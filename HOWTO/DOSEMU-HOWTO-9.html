<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>The dosemu HOWTO: Video and sound</TITLE>
 <LINK HREF="DOSEMU-HOWTO-10.html" REL=next>
 <LINK HREF="DOSEMU-HOWTO-8.html" REL=previous>
 <LINK HREF="DOSEMU-HOWTO.html#toc9" REL=contents>
</HEAD>
<BODY>
<A HREF="DOSEMU-HOWTO-10.html">Next</A>
<A HREF="DOSEMU-HOWTO-8.html">Previous</A>
<A HREF="DOSEMU-HOWTO.html#toc9">Contents</A>
<HR>
<H2><A NAME="s9">9. Video and sound</A></H2>

<H2><A NAME="ss9.1">9.1 Can I run 32-bit video games under dosemu?</A>
</H2>

<P>Mark Rejhon (<B>mdrejhon@magi.com</B>) reported (95/4/8) that
<P>With the recent DPMI improvements that has gone into 0.60, you can now
run some 32-bit video games in dosemu.   If the game is compatible in
an OS/2 DOS box, there are chances that it will work in dosemu.
(Example 32-bit games include Descent, Dark Forces, Mortal Kombat 2, 
Rise of The Triad, which have all successfully been tested in recent 
dosemu releases).
<P>Before you attempt to run a video game, you must have the keyboard
configured in raw keyboard mode and enabled VGA graphics modes, in the
<B>/etc/dosemu.conf</B> file.
<P>Note, however, you will have to turn off the sound in the game.
(Someone will have to program in sound board emulation before we can
avoid this).  Note that game timers can be a little bit slow, due to
Linux multitasking and lack of high-frequency timer support.  So the
games may run from anywhere from 5 to 100 percent speed.  Typically,
the speed is approximately 50 percent in recent dosemu releases and is
expected to improve eventually.
<P>Who knows, it might even work. If you can't get it to work, check
EMUfailure.txt if the program is listed there, or falls in a category of
programs that at present don't or probably never work with dosemu. If
you think, it should be listed in EMUfailure.txt, report to
<B>linux-msdos@vger.rutgers.edu</B>   
<P>There is a security hole when having enabled DPMI and having dosemu
suid root (especially when using dos4gw-based games), the client is able
to access the whole user space, hence also can modify the dosemu code
itself. Use of the 'secure' option in /etc/dosemu.conf, e.g.
<BLOCKQUOTE><CODE>
$_secure = "ngd" # secure for: n (normal users), g (guest), d (dexe)
</CODE></BLOCKQUOTE>

disables this. It is better to run dosemu as a normal user under X
rather than root anyway.
<P>
<H2><A NAME="ss9.2">9.2 Exiting from dosemu gives me a screen full of garbage.</A>
</H2>

<P> (95/4/8)
<P>The problem is that the font information for the VGA text screen is
not being saved.  Get a copy of the svgalib package.  The current
source is in
<PRE>
sunsite.unc.edu:/pub/Linux/libs/graphics/svgalib-1.3.1.tar.gz
</PRE>

It may also be available as a pre-compiled package in your favorite
Linux distribution (e.g., Slackware, etc.).  Use <CODE>savetextmode</CODE> to
save the current text mode and font to a file in <B>/tmp</B> before
running dosemu.  Then run <CODE>textmode</CODE> upon exiting dosemu to restore
it.
<P>Addition from (<B>lermen@elserv.ffm.fgan.de</B>(97/2/11)):
<P>Have a look also at src/arch/linux/debugger/README.recover and
README.dosdebug, dosdebug can aid you recovering.
<P>
<H2><A NAME="ss9.3">9.3 Why doesn't my soundcard software work with dosemu?</A>
</H2>

<P>Dosemu includes a rudimentary soundblaster emulator called SBemu -
the documentation for it is currently at
http://www.slitesys.demon.co.uk/a.macdonald/dosemu/sound/
This is a work in progress, not completed yet so much or most
DOS software that uses sound will not work correctly with it yet.
<P>
<HR>
<A HREF="DOSEMU-HOWTO-10.html">Next</A>
<A HREF="DOSEMU-HOWTO-8.html">Previous</A>
<A HREF="DOSEMU-HOWTO.html#toc9">Contents</A>
</BODY>
</HTML>
