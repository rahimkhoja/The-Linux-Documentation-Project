<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML
><HEAD
><TITLE
>Getting the Source Files</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="ACPI: Advanced Configuration and Power Interface"
HREF="index.html"><LINK
REL="UP"
TITLE="Patching Old Kernels"
HREF="patch.html"><LINK
REL="PREVIOUS"
TITLE="Patching Old Kernels"
HREF="patch.html"><LINK
REL="NEXT"
TITLE="ACPI the Non-Debian Way"
HREF="nodebkernel.html"></HEAD
><BODY
CLASS="sect1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>ACPI: Advanced Configuration and Power Interface</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="patch.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>A. Patching Old Kernels</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="nodebkernel.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="AEN659"
></A
>A.1. Getting the Source Files</H1
><P
>Download a fresh kernel from <A
HREF="http://www.kernel.org"
TARGET="_top"
>www.kernel.org</A
>. You need to make sure you
get a full kernel. Find the <SPAN
CLASS="QUOTE"
>"latest stable version of the Linux kernel"</SPAN
> 
and click on <TT
CLASS="option"
>F</TT
> for FULL. Wait patiently. A bzipped kernel 
is about 26M. If you're feeling particularly geeky you could also
	<B
CLASS="command"
>wget</B
>
	<TT
CLASS="filename"
>http://kernel.org/pub/linux/kernel/v2.4/linux-<TT
CLASS="replaceable"
><I
>&#60;version&#62;</I
></TT
>.tar.bz2</TT
>.
</P
><DIV
CLASS="tip"
><P
></P
><TABLE
CLASS="tip"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.gif"
HSPACE="5"
ALT="Tip"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>You may or may not want the latest stable version. For more information
read the <A
HREF="install.html#kernelchoice"
>Section 7.1</A
> section of
this document. If you decide to use a version of the kernel that is not
published on the front page, use the <A
HREF="http://www.kernel.org/pub/linux/kernel/"
TARGET="_top"
>/pub/linux/kernel</A
>
directory on the <A
HREF="http://www.kernel.org"
TARGET="_top"
>kernel.org</A
> 
site to find the kernel you'd like.</P
></TD
></TR
></TABLE
></DIV
><P
>While you're waiting, grab a copy of the patch as well. For the 2.4.20
kernel use the <A
HREF="http://prdownloads.sourceforge.net/acpi/acpi-20021212-2.4.20.diff.gz?download"
TARGET="_top"
>2.4.20 
patch</A
>. It's dated 2002.12.12. You'll need to know that number later
when we check to make sure the patch worked. If you are using a different
kernel version make sure you take note of the date of your patch. Your
numbers will differ slightly from the one I use later on.</P
><P
>Once you've got those two files (the kernel and the patch) unpack them
and patch the kernel.</P
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="kernelpatch"
></A
>A.1.1. Patch</H2
><P
>Now we're going to actually patch the kernel. I take one extra step from
<A
HREF="http://acpi.sourceforge.net/download.html"
TARGET="_top"
>the instructions</A
> at
ACPI4Linux. Instead of gunzipping and patching in the same line, I use two lines.
This is purely a matter of preference. When you patch the kernel you want
to make sure there are no error messages. (There is no <SPAN
CLASS="QUOTE"
>"yay"</SPAN
> line, instead
look for the absence of errors.)</P
><P
></P
><UL
><LI
><P
>&#13;		<B
CLASS="command"
>cd 
		<TT
CLASS="filename"
>/usr/src/linux</TT
></B
>
	</P
></LI
><LI
><P
>&#13;		<B
CLASS="command"
>cp 
		<TT
CLASS="filename"
>acpi-20021212-2.4.20.diff.gz</TT
>
		<TT
CLASS="filename"
>/usr/src/linux/.</TT
>
		</B
>
		(Your patch filename will be different if you're not using the
		2.4.20 kernel.)
	</P
></LI
><LI
><P
>&#13;		<B
CLASS="command"
>gunzip  
		<TT
CLASS="filename"
>acpi-20021212-2.4.20.diff.gz</TT
></B
>
	</P
></LI
><LI
><P
>&#13;		<B
CLASS="command"
>patch <TT
CLASS="option"
>-p<TT
CLASS="parameter"
><I
>1</I
></TT
></TT
> &#60;
		<TT
CLASS="filename"
>acpi-20021212-2.4.20.diff</TT
>
		</B
> 
	 (this is the actual patching part)
	</P
></LI
></UL
><P
>Once you've finished patching your kernel, continue reading at <A
HREF="kernelconfig.html"
>Section 10</A
>.
</P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="patch.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="nodebkernel.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Patching Old Kernels</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="patch.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>ACPI the Non-Debian Way</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>