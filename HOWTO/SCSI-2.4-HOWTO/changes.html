<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML
><HEAD
><TITLE
>Changes between lk 2.2 and (during) 2.4</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="The Linux 2.4 SCSI subsystem HOWTO"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Common bus types (SCSI and other)"
HREF="scsibus.html"><LINK
REL="NEXT"
TITLE="Mid level changes"
HREF="chgml.html"></HEAD
><BODY
CLASS="appendix"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>The Linux 2.4 SCSI subsystem HOWTO</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="scsibus.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="chgml.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="appendix"
><H1
><A
NAME="changes"
></A
>Appendix B. Changes between lk 2.2 and (during) 2.4</H1
><DIV
CLASS="TOC"
><DL
><DT
><B
>Table of Contents</B
></DT
><DT
>B.1. <A
HREF="chgml.html"
>Mid level changes</A
></DT
><DT
>B.2. <A
HREF="chgsd.html"
>sd changes</A
></DT
><DT
>B.3. <A
HREF="chgsr.html"
>sr changes</A
></DT
><DT
>B.4. <A
HREF="chgst.html"
>st changes</A
></DT
><DT
>B.5. <A
HREF="chgsg.html"
>sg changes</A
></DT
><DT
>B.6. <A
HREF="chg24.html"
>Changes during the lk 2.4 series</A
></DT
></DL
></DIV
><P
>&#13;Significant work has been done to change the single SCSI command queue
used in lk 2.2 to one command queue per device. To make the SCSI subsystem
more SMP friendly the granularity of the locks is much finer grained. In
lk 2.2 the whole subsystem essentially used one lock.
</P
><P
>&#13;Even though it is not part of the SCSI subsystem, the inclusion of devfs
solves many SCSI device addressing problems that existed in the past.
Associated with devfs but very useful even in its absence is the
"scsihosts" kernel boot time (and module load time) option. This option
allows users to have some control over the ordering of multiple SCSI hosts.
</P
><P
>&#13;This appendix is difficult to maintain since features and drivers that
have proven useful in lk 2.4 (and its development tree) have tended to
be back ported into the higher release numbers of the lk 2.2 series.
</P
><P
>&#13;Currently (lk 2.4.2) support for MO devices is broken. Old DOS file
systems with a block size of 2048 bytes also have been reported as broken.
The problem seems to arise with media that have a physical block size
larger than the 1 KB logical block size used by the block subsystem.
Only the sd driver has this problem (luckily not the sr driver in
which 2048 byte sectors are the norm).
</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="scsibus.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="chgml.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Common bus types (SCSI and other)</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Mid level changes</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>