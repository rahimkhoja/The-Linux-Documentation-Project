<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML
><HEAD
><TITLE
>Kernel installation</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="PA-RISC/Linux Boot HOWTO"
HREF="index.html"><LINK
REL="UP"
TITLE="Building and installing a custom kernel"
HREF="vmlinux.html"><LINK
REL="PREVIOUS"
TITLE="Kernel configuration"
HREF="kernelconf.html"><LINK
REL="NEXT"
TITLE="Windows 2003 boot server howto"
HREF="win2kdhcp.html"></HEAD
><BODY
CLASS="sect1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PA-RISC/Linux Boot HOWTO</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="kernelconf.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 5. Building and installing a custom kernel</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="win2kdhcp.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="kernelinstall"
></A
>5.3. Kernel installation</H1
><P
>&#13;				If you have made a native build on the box you wish to install, you can setup
				the new kernel as follows:
				within the kernel source tree <TT
CLASS="filename"
>linux/</TT
>, as <TT
CLASS="literal"
>root</TT
> execute:

			  <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;<TT
CLASS="prompt"
>[user@machine ~/dir]&#62;</TT
> <B
CLASS="command"
>cp vmlinux /boot/vmlinux-<TT
CLASS="replaceable"
><I
>[kernelversion]</I
></TT
></B
>
<TT
CLASS="prompt"
>[user@machine ~/dir]&#62;</TT
> <B
CLASS="command"
>cp System.map /boot/System.map-<TT
CLASS="replaceable"
><I
>[kernelversion]</I
></TT
></B
>
<TT
CLASS="prompt"
>[user@machine ~/dir]&#62;</TT
> <B
CLASS="command"
>cp .config /boot/config-<TT
CLASS="replaceable"
><I
>[kernelversion]</I
></TT
></B
>
				</PRE
></FONT
></TD
></TR
></TABLE
>

				Though it is not mandatory, we suggest you to replace
				<TT
CLASS="replaceable"
><I
>[kernelversion]</I
></TT
> by the version of the
				kernel you built, <EM
>e.g.</EM
>:
				<TT
CLASS="filename"
>vmlinux-2.4.18-pa44</TT
>. This will help you
				dealing with multiple kernel versions on the same machine.
				The same applies to <TT
CLASS="filename"
>.config</TT
>.
				It is not needed to have a working kernel, though it might
				be very helpful when configuring a new one.
				Now, do <B
CLASS="command"
>cd /boot</B
>, make sure that
				<TT
CLASS="filename"
>vmlinux</TT
> is a symbolic link to another
				file, as in the following example:

			  <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;<TT
CLASS="prompt"
>[user@machine ~/dir]&#62;</TT
> <B
CLASS="command"
>ls -l vmlinux</B
>
<TT
CLASS="computeroutput"
>lrwxrwxrwx  1 root   root   35 Jun 23 01:38 vmlinux -&#62; vmlinux-2.4.18-64-SMP</TT
>
				</PRE
></FONT
></TD
></TR
></TABLE
>

				Make sure to remember the name of the kernel actually running
				on your box if ever the new one won't work properly.
				You are now able to ask <B
CLASS="command"
>PALO</B
> to boot on it if needed
				(see <A
HREF="palo.html"
>Chapter 3</A
> for more information).
				Now do the following:

			  <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;<TT
CLASS="prompt"
>[user@machine ~/dir]&#62;</TT
> <B
CLASS="command"
>rm -f vmlinux</B
>
<TT
CLASS="prompt"
>[user@machine ~/dir]&#62;</TT
> <B
CLASS="command"
>ln -s vmlinux-<TT
CLASS="replaceable"
><I
>[kernelversion]</I
></TT
> vmlinux</B
>
<TT
CLASS="prompt"
>[user@machine ~/dir]&#62;</TT
> <B
CLASS="command"
>sync</B
>
				</PRE
></FONT
></TD
></TR
></TABLE
>

				If you want to boot from network you can forget all this,
				as you will need to set <B
CLASS="command"
>PALO</B
> as explained in the
				<A
HREF="paloappusage.html"
>Section 3.3</A
>, and run <B
CLASS="command"
>make palo</B
>
				to create the bootable <EM
>lifimage</EM
>.
			</P
><P
>&#13;				If you have made a cross-compiled build or built a kernel on a
				PA box which is not the one you wish to install,
				you have to find a way to put <TT
CLASS="filename"
>vmlinux</TT
>,
				<TT
CLASS="filename"
>System.map</TT
> and eventually <TT
CLASS="filename"
>.config</TT
>
				in <TT
CLASS="filename"
>/boot/</TT
> as mentioned before.
				You can use the network (like <B
CLASS="command"
>ftp</B
>)
				or a CD to do so, or even direct copy to the hard disk drive.
			</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="kernelconf.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="win2kdhcp.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Kernel configuration</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="vmlinux.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><SPAN
CLASS="trademark"
>Windows</SPAN
>&#8482; 2003 boot server howto</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>