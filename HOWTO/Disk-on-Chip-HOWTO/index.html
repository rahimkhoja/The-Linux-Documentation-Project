<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML
><HEAD
><TITLE
>Booting Linux from DiskOnChip HOWTO</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="NEXT"
TITLE="Introduction"
HREF="intro.html"></HEAD
><BODY
CLASS="article"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="ARTICLE"
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="title"
><A
NAME="AEN2"
></A
>Booting Linux from DiskOnChip HOWTO</H1
><H3
CLASS="author"
><A
NAME="AEN4"
>Rohit Agarwal</A
></H3
><DIV
CLASS="affiliation"
><DIV
CLASS="address"
><P
CLASS="address"
><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<TT
CLASS="email"
>&#60;<A
HREF="mailto:rohdimp_24@rediffmail.com"
>rohdimp_24@rediffmail.com</A
>&#62;</TT
><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P
></DIV
></DIV
><H3
CLASS="author"
><A
NAME="AEN11"
>Vishnu Swaminathan</A
></H3
><DIV
CLASS="affiliation"
><DIV
CLASS="address"
><P
CLASS="address"
><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<TT
CLASS="email"
>&#60;<A
HREF="mailto:Vishnu.Swaminathan@siemens.com"
>Vishnu.Swaminathan@siemens.com</A
>&#62;</TT
><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P
></DIV
></DIV
><P
CLASS="pubdate"
>20060907<BR></P
><DIV
CLASS="revhistory"
><TABLE
WIDTH="100%"
BORDER="0"
><TR
><TH
ALIGN="LEFT"
VALIGN="TOP"
COLSPAN="3"
><B
>Revision History</B
></TH
></TR
><TR
><TD
ALIGN="LEFT"
>Revision 1.0</TD
><TD
ALIGN="LEFT"
>2006-09-07</TD
><TD
ALIGN="LEFT"
>Revised by: MG</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Last review for LDP publication</TD
></TR
></TABLE
></DIV
><DIV
><DIV
CLASS="abstract"
><A
NAME="AEN19"
></A
><P
></P
><P
>This document discusses how to make the Flash Drives Linux bootable.  We will describe how to boot from such a drive, instead of from the normal hard drive.</P
><P
></P
></DIV
></DIV
><HR></DIV
><DIV
CLASS="TOC"
><DL
><DT
><B
>Table of Contents</B
></DT
><DT
>1. <A
HREF="intro.html"
>Introduction</A
></DT
><DD
><DL
><DT
>1.1. <A
HREF="intro.html#why"
>Why this document?</A
></DT
><DT
>1.2. <A
HREF="intro.html#NFTL"
>NFTL vs. INFTL</A
></DT
><DT
>1.3. <A
HREF="intro.html#aims"
>Practical goals</A
></DT
></DL
></DD
><DT
>2. <A
HREF="refconf.html"
>Reference configuration</A
></DT
><DT
>3. <A
HREF="assumptions.html"
>Assumptions</A
></DT
><DT
>4. <A
HREF="steps.html"
>Using M-Systems DiskOnChip 2000 TSOP as an additional storage drive in Linux</A
></DT
><DD
><DL
><DT
>4.1. <A
HREF="steps.html#step1"
>Step 1: Patch the Kernel</A
></DT
><DT
>4.2. <A
HREF="steps.html#step2"
>Step 2: Compile the Kernel</A
></DT
><DT
>4.3. <A
HREF="steps.html#step3"
>Step 3: Create Nodes</A
></DT
><DT
>4.4. <A
HREF="steps.html#step4"
>Step 4: Reboot with the new kernel</A
></DT
><DT
>4.5. <A
HREF="steps.html#step5"
>Step 5: Insert M-Systems Driver/Module in the new Kernel</A
></DT
><DT
>4.6. <A
HREF="steps.html#step6"
>Step 6: Create a filesystem on the DiskOnChip</A
></DT
><DT
>4.7. <A
HREF="steps.html#step7"
>Step 7: Mount the newly created partition to start accessing DOC</A
></DT
></DL
></DD
><DT
>5. <A
HREF="install.html"
>Install Linux and LILO on DiskOnChip</A
></DT
><DD
><DL
><DT
>5.1. <A
HREF="install.html#copy_firmware"
>Step 1: Copying the DOC firmware onto DiskOnChip</A
></DT
><DT
>5.2. <A
HREF="install.html#format"
>Step 2: Format DiskOnChip using Dos Utilities</A
></DT
><DT
>5.3. <A
HREF="install.html#patch+compile"
>Step 3: Patch and Compile the kernel 2.4.18</A
></DT
><DT
>5.4. <A
HREF="install.html#nodes"
>Step 4: Create nodes</A
></DT
><DT
>5.5. <A
HREF="install.html#modconf"
>Step 5: Modify the /etc/module.conf file</A
></DT
><DT
>5.6. <A
HREF="install.html#initrd"
>Step 6: Create the initrd image</A
></DT
><DT
>5.7. <A
HREF="install.html#insert_driver"
>Step 7: Insert the DOC driver into the new kernel</A
></DT
><DT
>5.8. <A
HREF="install.html#createfs"
>Step 8:  Create a filesystem on the DiskOnChip</A
></DT
><DT
>5.9. <A
HREF="install.html#rootfs"
>Step 9:  Build Root Filesystem on the DiskOnChip</A
></DT
><DT
>5.10. <A
HREF="install.html#rdev"
>Step 10: Use rdev to specify the DOC root filesystem location to kernel image</A
></DT
><DT
>5.11. <A
HREF="install.html#lilo"
>Step 11: Compile lilo-22.3.2</A
></DT
><DT
>5.12. <A
HREF="install.html#boot.b"
>Step 12: Copy the boot.b file into boot directory of DOC</A
></DT
><DT
>5.13. <A
HREF="install.html#liloconf"
>Step 13:  Modify the /etc/lilo.conf file</A
></DT
><DT
>5.14. <A
HREF="install.html#bootable"
>Step 14: Store the new LILO configuration on the DiskOnChip</A
></DT
><DT
>5.15. <A
HREF="install.html#fstab"
>Step 15: Modify etc/fstab of DiskOnChip root file system</A
></DT
><DT
>5.16. <A
HREF="install.html#firmware"
>Step16:  Update Firmware</A
></DT
><DT
>5.17. <A
HREF="install.html#boot"
>Step17: BOOT from DiskOnChip</A
></DT
></DL
></DD
><DT
>6. <A
HREF="devtools.html"
>Install Development ToolChain on DiskOnChip</A
></DT
><DD
><DL
><DT
>6.1. <A
HREF="devtools.html#getimage"
>Step1: Obtain the latest copy of root_fs_i386.ext2</A
></DT
><DT
>6.2. <A
HREF="devtools.html#fs_swap"
>Step2: Replace the root filesystem of the DiskOnChip</A
></DT
><DT
>6.3. <A
HREF="devtools.html#DOS_fstab"
>Step3: Modify etc/fstab of DiskOnChip root file system</A
></DT
><DT
>6.4. <A
HREF="devtools.html#reboot"
>Step4: Reboot</A
></DT
></DL
></DD
><DT
>7. <A
HREF="refs.html"
>References</A
></DT
><DT
>A. <A
HREF="a871.html"
>Output of dinfo</A
></DT
><DT
>B. <A
HREF="a885.html"
>License</A
></DT
><DT
>C. <A
HREF="a890.html"
>About Authors</A
></DT
><DT
>D. <A
HREF="a899.html"
>Dedications</A
></DT
></DL
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="intro.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Introduction</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>