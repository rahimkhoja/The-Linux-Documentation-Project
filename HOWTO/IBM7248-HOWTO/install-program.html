<HTML
><HEAD
><TITLE
>Boot the machine and start the installation program</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="Installing GNU/Linux on the IBM RS/6000 43P model 7248 HOWTO"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Make boot floppies"
HREF="floppies.html"><LINK
REL="NEXT"
TITLE="Post installation configuration"
HREF="postconfig.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Installing GNU/Linux on the IBM RS/6000 43P model 7248 HOWTO</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="floppies.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="postconfig.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="INSTALL-PROGRAM"
></A
>6. Boot the machine and start the installation program</H1
><P
>      In this chapter we will find out how to get the installation
      program up and running.
    </P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="PARTITIONS"
></A
>6.1. A note on partitions</H2
><P
>        Below we will be asked about what partitions to make. We
        should have at least these partitions:
        <P
></P
><UL
><LI
><P
>            A PReP partition. It should be the first primary partition
            on one of the SCSI drives, preferably the first (this
            naming the partition to sda1). It must have type PReP boot
            (type 41), and must be large enough to
            hold a compressed Linux kernel image (zImage). Something like
            5-10MB should do. 
          </P
></LI
><LI
><P
>            A swap partition. It can be either a primary or a logical
            partition on any drive. Any size will do, but a guide may
            be twice the size of you physical RAM. I have 64MB RAM, so
            I have a swap partition on 128MB.
          </P
></LI
><LI
><P
>            A system root partition. It can be either a primary or a
	    logical partition, and it should be big enough to hold the
	    main parts of the installation. You should write down the 
	    device (disk and partition number, like sda5, for example)
	    for your system's root partition. You will need it later.
            The easy way is just to use the rest of the harddisk space
	    for this. If you have several harddisks, big drives or
	    special requirements on safety and other things, you
	    should consider to make own partitions for /home, /usr, 
	    /usr/local, and other parts of the system. Details on this
	    is outside the scope of this document, but there is a 
	    good discussion on this in the Linux Partition HOWTO.
	  </P
></LI
></UL
>
      </P
><P
>        You may of course add as many other partitions to your 
	system as you may wish, but this is the very minimum.
      </P
><P
>	It is a <EM
>VERY</EM
> good tip to find a piece
  	of paper and write down which partitions you have made, what
  	you want to use them to, and where you want to mount
  	them. You will need this information later.
      </P
><P
>        For Debian and SuSE, we will use the
        <EM
>cfdisk</EM
> program for partitioning. For
        those unfamiliar with cfdisk and partitioning in general, I
        have made two small appendices on this, just because I am a
        very kind person. See <A
HREF="cfdisk.html"
>Section 15</A
>.
      </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="BOOT"
></A
>6.2. Boot the machine and start the installer</H2
><P
>        To boot the 7248, just insert the boot floppy and turn the 
        machine on. If it won't boot off the floppy drive, check SMS settings
        (<A
HREF="sms.html"
>Section 3</A
>), and try to force a floppy boot
        by pressing F5 (or F6) at the bootscreen while the check icons pop
        up in the bottom of the screen. After a while, the screen blanks
        out, and Linux will boot. At this point, you can shout a little
        "hooray" for yourself, if there are not too many in the room,
        and Tux, the Linux Penguin will show up in the upper left corner
        of the screen. Insert the ramdisk floppies when prompted.
      </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="DEBIAN-INSTALLER"
></A
>6.3. The Debian installer</H2
><P
>        You should just walk through the Debian installer like you
        would on any Debian installation. More information on how to
        use the installer can be found at your favourite Debian mirror,
        a good reference should be
	<A
HREF="http://www.debian.org/debian/dists/woody/main/disks-powerpc/current/doc/install.en.html"
TARGET="_top"
>this document</A
>.
	You would maybe
	<A
HREF="http://www.debian.org/debian/dists/woody/main/disks-powerpc/current/doc/ch-rescue-boot.en.html#s-dbootstrap-intro"
TARGET="_top"
>start here</A
> 
	as you already have been walked through the preliminary steps.
	There are a few thing to remember though:

        <P
></P
><UL
><LI
><P
>	  
	    Not all keyboard layouts are availble in the
	    installer. Pick one you are able to use. We will have
	    more to choose from once the system is installed.</P
></LI
><LI
><P
> At the "Partition a Hard Disk" step, our
	    partition program will be cfdisk. At this step we have to
	    add the PReP partition as mentioned above, a swap
	    partition and a root partition.  Remember to write down
	    on a piece of paper what partition to use for the root
	    filesystem. Unless you have a really good memory, of
	    course.</P
></LI
><LI
><P
>	    The steps "Install Kernel and Driver Modules", "Configure
	    Device Driver modules", "Configure PCMCIA Support", and
	    "Install Foreign Modules" can be skipped, as all necessary
	    driver are compiled into the boot floppy kernel.</P
></LI
><LI
><P
>	    When installing the base system, we can choose either
	    network or cdrom. Both should work. (I have even installed
	    by floppy once, but this is something we really don't want
	    to do.)</P
></LI
><LI
><P
>	    Skip the steps "Make System bootable" and "Make a Boot
	    Floppy" - they won't work. See the later chapter <A
HREF="kernel.html#COMPILING-AND-INSTALLING-THE-KERNEL"
>Section 9.5</A
> on how to
	    make the system boot from the harddisk.</P
></LI
><LI
><P
>	      No bootloader will be installed, as there are no
	      availble bootloader for the PReP PPC platform (except
	      the one that's piggybacked onto the kernel). After the
	      installation is done, you will therefore have to boot
	      again from a floppy. See the next chapter for details.
	    </P
></LI
></UL
>

      </P
><P
>	    When you are finished installing the base system, reinsert
	    the boot floppy and choose "Reboot the system".
      </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="SUSE-INSTALLER"
></A
>6.4. The SuSE installer</H2
><P
>        The SuSE installer should work without any hassle at all.
        Prelimenary, I've only done ftp install, but any installation
        method should do, provided you have access to the media. I
        have not been able to find an online version of the
        installation instructions, but it should be quite
        strightforward. If you have bought the boxed set, you have
        probably got a printed manual on dead trees. A few things to
        look up for anyhow:

	<P
></P
><UL
><LI
><P
>	      When partition the hard disks, remember to make a PReP
	      boot partition as described above. As a general rule,
	      use /dev/sda1 for this.
	    </P
></LI
><LI
><P
>	      If we're doing a ftp install, use the following path
	      from a SuSE mirror root: suse/ppc/current/. An European
	      mirror is available at <EM
>194.71.11.20</EM
>
	      (ftp.sunet.se) in
	      /pub/Linux/distributions/suse/suse/ppc/current/ . An
	      American mirror is availble at
	      <EM
>140.221.9.138</EM
> (mirror.mcs.anl.gov)
	      in /pub/ftp.suse.com/ppc/current/ . <A
HREF="http://www.suse.de/us/private/download/ftp/int_mirrors.html"
TARGET="_top"
> There is a list of other mirrors here</A
>
	    </P
></LI
><LI
><P
>	      The download progress bar is broken on slow links, so
	      we don't care about it unless we're connected to a fat
	      pipe. Have patience.
	    </P
></LI
><LI
><P
>	      When the installation is finished, we may get a blank
	      screen with nothing but a blinking cursor. Ensure that the
	      installation is done (check for availble shells or status
	      screens at VT2, 3 and 4. by pressing Alt+F2,F3,F4,F1,
	      there should be none). Reinsert the boot
	      floppy and power-cycle the box. 
	    </P
><P
>	      No bootloader will be installed, as there are no
	      availble bootloader for the PReP PPC platform (except
	      the one that's piggybacked onto the kernel). After the
	      installation is done, you will therefore have to boot
	      again from a floppy. See the next chapter for details.
	    </P
></LI
></UL
>
      </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="YDL-INSTALLER"
></A
>6.5. The Yellow Dog installer</H2
><P
>        Just before the installer starts, I have added a small
        pre-installation routine. Please follow the on-screen
        instrucions. For someone who has done some sysadmin earlier,
        the steps should be quite easy. For the beginner, it should
        not be to difficult. Hop to a virtual terminal by hitting
        Alt+F2. Type 
<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>cfdisk /dev/sda</PRE
></FONT
></TD
></TR
></TABLE
>
       to partition your first scsi harddisk. Change to sdb for your
       second, and so on. If you think this is a little difficult,
       I've written a small appendix on this <A
HREF="more-on-partitioning.html"
>Section 16</A
>. When done partitioning, run
       for example
<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mke2fs /dev/sda3</PRE
></FONT
></TD
></TR
></TABLE
>
        to make an ext2 filesystem on your third partition on your
        first hard disk. When you are finished, hop back to the main
        screen by hitting Alt+F1, and press enter to continue
      </P
><P
>        You should walk through the installer as you would walk
        through any Yellow Dog installation (though only text-based
        interface is availble). I have not found any comprehensive
        online installation manual, but there is <A
HREF="http://www.yellowdoglinux.com/support/installation/guide.shtml"
TARGET="_top"
>        some info here</A
>. If you have bought a boxed set, you should
	open the box and Read The Fine Manual if you have questions not
	answered here.
      </P
><P
>        There are a few things to look out
        for, though:        
	<P
></P
><UL
><LI
><P
>	      At the "Installing Profile Selection" screen (one of the first
	      screens), choose "Custom".
	    </P
></LI
><LI
><P
>	      At the "Installation Setup" screen, only "Local CD/DVD" is
	      availble, so we'll have to choose ... well, you guessed it.
	    </P
></LI
><LI
><P
>	      At the "Partition Disks" screen, we "Edit" each disk, but just
	      choose "Save" in the subscreens. "Add" and "Delete" won't
	      work. And besides, we already have done this, haven't we?
	    </P
></LI
><LI
><P
>	      At the "Package Selection" screen, choose "Base Install", 
	      unless you have a full CD set. The downloadable CD image
	      has only the base install packages.
	    </P
></LI
><LI
><P
>	      At the "Sound Setup" screen, we'll get an error message
	      saying we are not one of those lucky bastards owning a Power
	      Macintosh computer. As this is something we should be
	      ashamed of. Ignore, sniff, and select "Ok". We'll fix
	      sound later.
	    </P
></LI
><LI
><P
>	      At the "PReP Bootloader Installation" screen, the
	      installer yells that it can't find a PReP partition. A
	      little strange, as we just made one. (We did, remember
	      to do that, didn't we?). This installer just can't get
	      it, so continue to ignore it. Select "Ok".
            </P
></LI
><LI
><P
>	      The "X11 Configuration" screen just flips by, so I
	      guess that part was painless. Yeah, right.
            </P
></LI
><LI
><P
>	      No bootloader will be installed, as there are no
	      availble bootloader for the PReP PPC platform (except
	      the one that's piggybacked onto the kernel). After the
	      installation is done, you will therefore have to boot
	      again from a floppy. See the next chapter for details.
	    </P
></LI
></UL
>
      </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="MANDRAKE-INSTALLER"
></A
>6.6. The Mandrake installer</H2
><P
>        For the Mandrake installer, there are a few quite extensive
        prerequisites necessary. For a CD install, we need to replace
        the installer program on the first CD before burning out the CD
        ISO image. For a network install, we need a complete local ftp
        or http mirror, made from the Mandrake Bamboo ppc ftp
        directory, or the three CDs. Actually, we only need to replace
        one single file, but because the installer is unable to
        change package source during the installation (this is one
        reason why Debian is a wonderful distribution), we need 
        local copies of all the files.
      </P
><P
>	If we don't like to hazzle around and tune things, we'll stick
	to the CD installation. It's the easiest.
      </P
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="MDK-CD"
></A
>6.6.1. CD installation</H3
><P
>	  First we have to download the three Mandrake ISO images from
	  your favourite mirror. There exist ppc ISO images at least
	  at a Sweedish mirror at <A
HREF="ftp://ftp.chello.se/pub/linux/Mandrake-iso/ppc/"
TARGET="_top"
>	  ftp://ftp.chello.se/pub/linux/Mandrake-iso/ppc/</A
>.
	</P
><P
>	  Then we must change the first image by replacing the
	  installer inside it. This could be done on any operating
	  system able to mount a CD ISO image. The instructions below
	  are made for running on RedHat Linux. We presume the images are
	  all put in /var/tmp.
	</P
><P
>	  First we mount the image by the loopback interface
<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mount -o loop=/dev/loop0 /var/tmp/MandrakeLinux-9.1-CD1.ppc.iso /mnt/cdrom</PRE
></FONT
></TD
></TR
></TABLE
>
	  Then copy all files in the image to somewhere with plenty of
	  space, eg. /var/tmp, and unmount the image again:
<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mkdir /var/tmp/bamboo1
cp -va /mnt/cdrom/* /var/tmp/bamboo1
umount /mnt/cdrom</PRE
></FONT
></TD
></TR
></TABLE
>
	  Now replace the installer image:
<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>cd /var/tmp/bamboo1/Mandrake/base
rm mdkinst_stage2.bz2
wget http://users.linpro.no/ingvar/43p/images/Mandrake/mdkinst_stage2.bz2</PRE
></FONT
></TD
></TR
></TABLE
>
	  Finally rebuild the installer image and, if you want, remove
	  the local copy of the cd contents:
<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>cd /var/tmp
mkisofs -r -o MandrakeLinux-9.1-CD1.ppc.iso bamboo1/
rm -rf bamboo1</PRE
></FONT
></TD
></TR
></TABLE
>
	  There. You now have a set of three working ISO images for
	  the 7248. Burn them out on CDs. Then insert the boot floppy
	  into the 7248 and turn the computer on. Disk-Jockey the
	  ramdisk floppy when prompted. Just do a normal CD
	  installation. See the installer notes below for details.
      </P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="MDK-NETWORK"
></A
>6.6.2. Network installation</H3
><P
>	  First you need a local http or ftp mirror with a patched
	  installer. This means that you need access to another
	  computer able to run a web or ftp server. Any Linux
	  distribution can do. A modern Windows or UNIX server should
	  also be able to do the job. The trick is to download all
	  necessary files, and change the installer file
	  Mandrake/base/mdkinst_stage2.bz with a patched one. Below
	  the the steps to get this done with the Apache web server on
	  a RedHat Linux installtion, and with the CD iso image files,
	  is described. (A complete download of the ppc archive from a
	  Mandrake ftp mirror should work allright too, but I prefer
	  to have the iso images availble.)
	</P
><P
>          Unless already done, install and start the Apache web server
	  on the system. This is described in the RedHat
	  documentation. Then download the three Mandrake CD images
	  from your favourite mirror. There exist ppc iso images at
	  least at a Sweedish mirror at <A
HREF="ftp://ftp.chello.se/pub/linux/Mandrake-iso/ppc/"
TARGET="_top"
>	  ftp://ftp.chello.se/pub/linux/Mandrake-iso/ppc/</A
>.

<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>cd /somwhere/with/plenty/space
wget ftp://your.favourite.mirror/path/to/MandrakeLinux-9.1-CD1.ppc.iso
wget ftp://your.favourite.mirror/path/to/MandrakeLinux-9.1-CD2.ppc.iso
wget ftp://your.favourite.mirror/path/to/MandrakeLinux-9.1-CD3.ppc.iso</PRE
></FONT
></TD
></TR
></TABLE
>

         Mount the images via the loopback interface:

<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mkdir /mnt/bamboo1 /mnt/bamboo2 /mnt/bamboo3 /var/www/html/bamboo
mount -o loop=/dev/loop1 MandrakeLinux-9.1-CD1.ppc.iso /mnt/bamboo1
mount -o loop=/dev/loop2 MandrakeLinux-9.1-CD2.ppc.iso /mnt/bamboo2
mount -o loop=/dev/loop3 MandrakeLinux-9.1-CD3.ppc.iso /mnt/bamboo3
cd -</PRE
></FONT
></TD
></TR
></TABLE
>

          Copy the base files, and symlink the package
          directories, to a directory availble for the web server:

<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>for i in base mdkinst share; do
cp -va /mnt/bamboo1/Mandrake/$i /var/www/html/bamboo/Mandrake; done
ln -s /mnt/bamboo1/Mandrake/RPMS1 /var/www/html/bamboo/Mandrake
ln -s /mnt/bamboo2/Mandrake/RPMS2 /var/www/html/bamboo/Mandrake
ln -s /mnt/bamboo3/Mandrake/RPMS3 /var/www/html/bamboo/Mandrake</PRE
></FONT
></TD
></TR
></TABLE
>

        Finally add my patched version of the installer image.

<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>cd /var/www/html/bamboo/Mandrake/base
mv mdkinst_stage2.bz2 mdkinst_stage2.orig.bz2
wget http://users.linpro.no/ingvar/43p/images/Mandrake/mdkinst_stage2.bz2
cd -</PRE
></FONT
></TD
></TR
></TABLE
>

          You should now have a working local http mirror of the
	  Mandrake installation files. Now boot with the boot floppy,
	  and insert the ramdisk floppy when prompted. From the
	  installation menus, select network install, select http and
	  then give the address of the server where you just downloaded the
	  files. The http directory from the example above is "/bamboo"
         
        </P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="MDK-INSTALLER"
></A
>6.6.3. Installer notes</H3
><P
>	  You will get an error when probing for a network and scsi
	  drivers. The driver module files don't exist. We don't
	  worry, as all necessary drivers are compiled into the running
	  kernel.
	</P
><P
>	  If all package files necessary are availble, the installer should
	  run without further errors.        
	</P
><P
>	  The installer won't recognize the sound card, so sound won't
	  work.  Don't worry about this. We'll fix it in a jiffy. Same
	  goes for XFree86, so we won't automagically get a working
	  graphical user interface either.
	</P
><P
>	  No bootloader will be installed, as there are no availble
	  bootloader for the PReP PPC platform (except the one that's
	  piggybacked onto the kernel). After the installation is
	  done, you will therefore have to boot again from a
	  floppy disk. See the next chapter for details.
	</P
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="floppies.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="postconfig.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Make boot floppies</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Post installation configuration</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>