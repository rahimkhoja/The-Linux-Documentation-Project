<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML
><HEAD
><TITLE
>Time Synchronization</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="Kerberos Infrastructure HOWTO"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Installing and Configuration"
HREF="install.html"><LINK
REL="NEXT"
TITLE="Kerberos Server Replication"
HREF="server-replication.html"></HEAD
><BODY
CLASS="section"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Kerberos Infrastructure HOWTO</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="install.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="server-replication.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="section"
><H1
CLASS="section"
><A
NAME="time-sync"
></A
>4. Time Synchronization</H1
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="time-sync-importance"
></A
>4.1. The Importance of Time Synchronization</H2
><P
>&#13;Since the security of Kerberos authentication is in part based upon the time stamps of tickets, it is critical to have accurately set clocks on Kerberos servers. As we mentioned in the introduction to Kerberos, a short lifetime for tickets is used to prevent attackers from performing successful brute force attacks or replay attacks.
</P
><P
>&#13;If you allow your clocks of your servers to drift, you will make your network vulnerable to such attacks.  Since clock synchronization is so important in the security of the Kerberos protocol, if clocks are not synchronized with in a reasonable window Kerberos will report fatal errors and refuse to function.  Clients attempting to authenticate from a machine with an inaccurate clock will be failed by the KDC in authentication attempts due to the time difference with the KDC's clock.
</P
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="intro-ntp"
></A
>4.2. Introduction to NTP</H2
><P
>&#13;The Network Time Protocol (NTP) is available for the time synchronization of servers. A number of public NTP servers are available for synchronization.  NTP is capable of synchronizing client clocks within milliseconds on LANs, and tens of milliseconds over WANs. NTP servers are divided by stratum.  Primary NTP servers are classified as stratum 1. These public primary servers should not be used for synchronization of client machines due to the relatively small number of them. Public stratum 2 servers are available for client machine synchronization and synchronize their own clocks with the public stratum 1 servers. For our Kerberos servers, we'll set up NTP to query against three stratum two servers.  A maintained
list of public stratum two servers can be <A
HREF="http://www.eecis.udel.edu/~mills/ntp/clock2b.html"
TARGET="_top"
>found here</A
>.
</P
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="ntp-install"
></A
>4.3. NTP Installation and Configuration</H2
><P
>&#13;In order to turn NTP on GNU/Linux, you must install the NTP package and edit the configuration filename.  By default, the NTP configuration filename is <TT
CLASS="filename"
>/etc/ntp.conf</TT
>. The default values in the configuration are acceptable.  All that needs to be done is to add the servers we wish to use to synchronize our clocks.  Authentication is not necessary, but authentication can be enabled from additional security.  If you're using NTP servers on your LAN, you may wish to use authentication. Here is a sample <TT
CLASS="filename"
><A
HREF="http://cryptnet.net/fdp/admin/kerby-infra/en/ntp.conf"
TARGET="_top"
>ntp.conf</A
></TT
> filename from the Gnu University Dublin.
</P
><P
>&#13;Finally we put a cron job in place to do the actual synchronization:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>&#13;30 * * * * /usr/sbin/ntpdate -s
</PRE
></FONT
></TD
></TR
></TABLE
>
</P
><P
>&#13;If our systems are behind a firewall we may need to provide use <EM
>-su</EM
> rather than just <EM
>-s</EM
>.  The <EM
>-u</EM
> argument will direct ntpdate to use an unprivileged port for its outgoing connection to the stratum 2 time servers.
</P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="install.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="server-replication.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Installing and Configuration</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Kerberos Server Replication</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>