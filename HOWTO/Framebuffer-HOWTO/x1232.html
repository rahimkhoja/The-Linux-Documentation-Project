<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML
><HEAD
><TITLE
>Setting up the X11 FBdev driver</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="Framebuffer HOWTO"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Changing Console Modes"
HREF="x1228.html"><LINK
REL="NEXT"
TITLE="How do I convert XFree86 mode-lines into framebuffer device timings?"
HREF="x1274.html"></HEAD
><BODY
CLASS="section"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Framebuffer HOWTO</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x1228.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x1274.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="section"
><H1
CLASS="section"
><A
NAME="AEN1232"
></A
>14. Setting up the X11 FBdev driver</H1
><P
>If you are not using XFree86 3.3.3.1 or later, you are
			urged to upgrade to XFree86 3.3.3.1, as it includes a
			FBdev X driver for framebuffer devices. Otherwise,
			follow the steps below to either download or build your
			own FBdev driver for older XFree86 versions such as
			3.3.2, 3.3.3 etc.</P
><P
>Go to <A
HREF="http://www.xfree86.org"
TARGET="_top"
>http://www.xfree86.org</A
>, and
			download the latest XServer sources archive, unpack,
			and configure the drivers, following these
			steps:</P
><P
></P
><UL
><LI
><P
>Edit
					xc/config/cf/xf86site.def,
					uncomment the #define for
					XF68FBDevServer</P
></LI
><LI
><P
>Comment out <EM
>all</EM
>
					references to
					FB_VISUAL_STATIC_DIRECTCOLOR,
					as those are bogus and are not used any
					more. If you are using XFree86 3.3.3.1,
					there is no need to do this step as
					this has all been
					removed.</P
></LI
><LI
><P
>Edit
					xc/programs/Xserver/hw/xfree86/os-support/linux/lnx_io.c,
					and change K_RAW to
					K_MEDIUMRAW</P
></LI
></UL
><P
>And then build the driver. Don't worry about the m68k
			references, it supports x86 platforms. Then build the
			whole thing - it'll take a long time though as it's a
			large source tree.</P
><P
>Alternatively, if you don't have the time to spare, you
			can obtain the binaries from the sites below. Please
			note that these are 'unofficial' builds and you use
			them at your risk.</P
><P
>For libc5, use the one at: <A
HREF="http://user.cs.tu-berlin.de/~kraxel/linux/XF68_FBDev.gz"
TARGET="_top"
>http://user.cs.tu-berlin.de/~kraxel/linux/XF68_FBDev.gz</A
>.
			For glibc2, download from these URLs (<A
HREF="http://user.cs.tu-berlin.de/~kraxel/linux/XF68_FBDev.libc6.gz"
TARGET="_top"
>http://user.cs.tu-berlin.de/~kraxel/linux/XF68_FBDev.libc6.gz</A
>
			or <A
HREF="     http://pobox.com/~brion/linux/fbxserver.html"
TARGET="_top"
>     http://pobox.com/~brion/linux/fbxserver.html</A
></P
><P
>There have been reports that X11 is non functional on
			certain graphic cards with this vesafb feature enabled,
			if this is happening, try the new XF86_FBdev driver for
			X11.</P
><P
>This driver, along with vesafb can also help run X11 in
			higher graphic resolutions with certain graphic
			chipsets which are not supported by any of the current
			X11 drivers. Examples are Matrox G200 et. al.</P
><P
>To configure the XF86_FBdev driver with your X11 system,
			you'll need to edit your XF86Config for the
			following:</P
><P
><P
CLASS="literallayout"
>&#13;Section "Screen"
        Driver          "FBDev"
        Device          "Primary Card"
        Monitor         "Primary Monitor"
        SubSection      "Display"
                Modes           "default"
        EndSubSection
EndSection
		</P
></P
><P
>You'll also need to set XkbDisable in the keyboard
			section as well, or invoke the XF86_FBDev server with
			the '-kb' option to set up your keyboard
			so it works properly. If you forget to set XkbDisable,
			you will have to put the following lines in your
			.Xmodmap to straighten out the keyboard
			mappings. Alternatively, you can edit your xkb to
			reflect the list below.</P
><P
><EM
>This is fixed in XFree86 3.3.3.1, and it is a
				good idea to upgrade to this version anyway
				because there are quite a few bug fixes, and
				also, it includes FBDev as one of the drvers,
				as I've mentioned previously.</EM
></P
><P
><P
CLASS="literallayout"
>&#13;! Keycode settings required
keycode 104 = KP_Enter
keycode 105 = Control_R
keycode 106 = KP_Divide
keycode 108 = Alt_R Meta_R
keycode 110 = Home
keycode 111 = Up
keycode 112 = Prior
keycode 113 = Left
keycode 114 = Right
keycode 115 = End
keycode 116 = Down
keycode 117 = Next
keycode 118 = Insert
keycode 119 = Delete
		</P
></P
><P
>You may need to do some fiddling around with this (try
			copying the original definition from the original X11
			driver that you were using and editing the name of the
			driver to FBDev), but basically this is what you need
			to do to use the vesafb X11 driver.</P
><P
>Hopefully the X11 problems with supported graphic cards
			will be fixed in future releases.</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x1228.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x1274.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Changing Console Modes</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>How do I convert XFree86 mode-lines into framebuffer device timings?</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>