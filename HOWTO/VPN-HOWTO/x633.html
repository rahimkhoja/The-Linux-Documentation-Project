<HTML
><HEAD
><TITLE
>Client: Bring up the connection</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="VPN HOWTO"
HREF="index.html"><LINK
REL="UP"
TITLE="Implementation"
HREF="implemenetation.html"><LINK
REL="PREVIOUS"
TITLE="Client: Configure ssh"
HREF="x620.html"><LINK
REL="NEXT"
TITLE="Client: Set the routes"
HREF="x645.html"></HEAD
><BODY
CLASS="sect1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>VPN HOWTO</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x620.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 5. Implementation</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x645.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="AEN633">5.17. Client: Bring up the connection</H1
><P
>&#13;Now we'll try to actually make the connection to the VPN server.  First
we'll need to make a single connection to set up the <B
CLASS="command"
>ssh</B
> known_hosts
file.  Run this:
</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>&#13;# ssh vpn.mycompany.com
</PRE
></FONT
></TD
></TR
></TABLE
><P
>&#13;Answer <SPAN
CLASS="QUOTE"
>"yes"</SPAN
> when it asks you if you want to continue connecting.  The
server will tell you <SPAN
CLASS="QUOTE"
>"permission denied"</SPAN
>, but that's okay. It's
important that you use the same name for the server that you are using
in your connection scripts.  Now run the following lines.  You will
obviously need to change the options to suit your setup.
</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>&#13;# /usr/sbin/pty-redir /usr/bin/ssh -t -e none -o 'Batchmode yes' -c blowfish -i /root/.ssh/identity.vpn -l vpn-user vpn.mycompany.com &#62; /tmp/vpn-device

	(now wait about 10 seconds)

# /usr/sbin/pppd `cat /tmp/vpn-device` 192.168.10.254:192.168.40.254
</PRE
></FONT
></TD
></TR
></TABLE
><P
>&#13;Note the IP addresses specified on the <B
CLASS="command"
>pppd</B
> line.  The first is the
address of the client end of the tunnel.  The second is the address of
the server end of the tunnel, which is set to the server's internal
address.  If all of that seemed to work, move on.  If not, check that you
have all of the options, and that they are spelled right.  If something
is still going wrong, check <A
HREF="pitfalls.html"
>Section 6.1</A
>.
</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x620.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x645.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Client: Configure <B
CLASS="command"
>ssh</B
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="implemenetation.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Client: Set the routes</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>