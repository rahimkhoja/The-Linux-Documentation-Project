<HTML
><HEAD
><TITLE
>Adding users</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="VPN HOWTO"
HREF="index.html"><LINK
REL="UP"
TITLE="Implementation"
HREF="implemenetation.html"><LINK
REL="PREVIOUS"
TITLE="The .ssh directory"
HREF="x516.html"><LINK
REL="NEXT"
TITLE="Server: Administration"
HREF="x532.html"></HEAD
><BODY
CLASS="sect1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>VPN HOWTO</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x516.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 5. Implementation</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x532.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="AEN523">5.11. Adding users</H1
><P
>&#13;Now comes the fun part.  We're going to edit the <TT
CLASS="filename"
>/etc/passwd</TT
> file
by hand.  Normally you let the system handle this file, but for an unusual
setup like this, it is easier to do it yourself.  To start, open the
<TT
CLASS="filename"
>/etc/passwd</TT
> file and see what's in there.  Here's an example of what
you might find:
</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>&#13;...
nobody:x:65534:100:nobody:/dev/null:
mwilson:x:1000:100:Matthew Wilson,,,:/home/mwilson:/bin/bash
joe:*:1020:101:Joe Mode (home),,,:/home/vpn-users:/usr/sbin/pppd
bill:*:1020:101:Bill Smith (home),,,:/home/vpn-users:/usr/sbin/pppd
frank:*:1020:101:Frank Jones (home),,,:/home/vpn-users:/usr/sbin/pppd
...
</PRE
></FONT
></TD
></TR
></TABLE
><P
>&#13;You'll find the first user on most any system.  The second one is me. 
After that are a few made up vpn-users. The first field is the username,
and the second is the password field. The third is user ID (UID) and the
fourth is the group ID (GID).  After that comes some info on who the
people are in the fifth field. The sixth field is the user's home
directory, and the last is their shell.  As you can see, each field is
separated by a colon.  Look at the last three lines. The only difference
between them is the username in the first field, and the user info in
the fifth field.  What we want to do is create lines like this for each
user.  Don't just use one user for all of the connections, you'll never
be able to tell them apart if you do.  So copy the last line of this
file and edit it so that it looks something like the above.  Make sure
that the second field has an asterisk (*).  The second field should be
unique to all the other IDs in the file.  I used 1020.  You should use a
number above 1000, since those below are typically reserved for system
use.  The fourth field should be the group ID for vpn-users.  I told you
to write it down, now is the time that you need it. So put the group ID
in there.  Lastly, change the home directory to
<TT
CLASS="filename"
>/home/vpn-users</TT
>, and the shell to <TT
CLASS="filename"
>/usr/sbin/pppd</TT
>. 
Now copy that line to make more users.  Just edit the first
the fifth fields and you're set.
</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x516.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x532.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>The <TT
CLASS="filename"
>.ssh</TT
> directory</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="implemenetation.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Server: Administration</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>