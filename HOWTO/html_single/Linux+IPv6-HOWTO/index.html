<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Linux IPv6 HOWTO (en)</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><meta name="description" content="The goal of the Linux IPv6 HOWTO is to answer both basic and advanced questions about IPv6 on the Linux operating system. This HOWTO will provide the reader with enough information to install, configure, and use IPv6 applications on Linux machines. Intermediate releases of this HOWTO are available at mirrors.bieringer.de or mirrors.deepspace6.net. See also revision history for changes."></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="en_US" class="book"><div class="titlepage"><div><div><h1 class="title"><a name="idp56320240"></a>Linux IPv6 HOWTO (en)</h1></div><div><div class="author"><h3 class="author"><span class="firstname">Peter</span> <span class="surname">Bieringer</span></h3><div class="affiliation"><div class="address"><p>pb at bieringer dot de</p></div></div></div></div><div><div class="revhistory"><table style="border-style:solid; width:100%;" summary="Revision History"><tr><th align="left" valign="top" colspan="3"><b>Revision History</b></th></tr><tr><td align="left">Revision 0.67wip</td><td align="left">2017-07-14</td><td align="left">PB</td></tr><tr><td align="left">Revision 0.66</td><td align="left">2014-05-15</td><td align="left">PB</td></tr><tr><td align="left">Revision 0.65</td><td align="left">2009-12-13</td><td align="left">PB</td></tr><tr><td align="left">Revision 0.64</td><td align="left">2009-06-11</td><td align="left">PB</td></tr><tr><td align="left">Revision 0.60</td><td align="left">2007-05-31</td><td align="left">PB</td></tr><tr><td align="left">Revision 0.51</td><td align="left">2006-11-08</td><td align="left">PB</td></tr></table></div></div><div><div class="abstract"><p class="title"><b>Abstract</b></p><p>The goal of the Linux IPv6 HOWTO is to answer both basic and advanced questions about IPv6 on the Linux operating system. This HOWTO will provide the reader with enough information to install, configure, and use IPv6 applications on Linux machines. Intermediate releases of this HOWTO are available at <a class="ulink" href="http://mirrors.bieringer.de/Linux+IPv6-HOWTO/" target="_top">mirrors.bieringer.de</a> or <a class="ulink" href="http://mirrors.deepspace6.net/Linux+IPv6-HOWTO/" target="_top">mirrors.deepspace6.net</a>. See also <a class="link" href="#revision-history" title="1. Revision history">revision history</a> for changes.</p></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="chapter"><a href="#chapter-general">1. General</a></span></dt><dd><dl><dt><span class="sect1"><a href="#general-copright">1. Copyright, license and others</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp52464832">1.1. Copyright</a></span></dt><dt><span class="sect2"><a href="#idp52507552">1.2. License</a></span></dt><dt><span class="sect2"><a href="#idp52511216">1.3. About the author</a></span></dt></dl></dd><dt><span class="sect1"><a href="#general-category">2. Category</a></span></dt><dt><span class="sect1"><a href="#idp52360080">3. Version, History and To-Do</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp52360768">3.1. Version</a></span></dt><dt><span class="sect2"><a href="#idp52362800">3.2. History</a></span></dt><dt><span class="sect2"><a href="#idp52373024">3.3. To-Do</a></span></dt></dl></dd><dt><span class="sect1"><a href="#general-translations">4. Translations</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp52377200">4.1. To language</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57411920">5. Technical</a></span></dt><dd><dl><dt><span class="sect2"><a href="#general-original-source">5.1. Original source of this HOWTO</a></span></dt><dt><span class="sect2"><a href="#idp57417168">5.2. On-line references to the HTML version of this HOWTO (linking/anchors)</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57420512">6. Preface</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57421408">6.1. How many versions of a Linux &amp; IPv6 related HOWTO are floating around?</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57432496">7. Used terms, glossary and shortcuts</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57433136">7.1. Network related</a></span></dt><dt><span class="sect2"><a href="#idp57462176">7.2. Document related</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57468704">8. Requirements for using this HOWTO</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57469344">8.1. Personal prerequisites</a></span></dt><dt><span class="sect2"><a href="#idp57477536">8.2. Linux operating system compatible hardware</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chapter-basics">2. Basics</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp57479568">1. What is IPv6?</a></span></dt><dt><span class="sect1"><a href="#basic-history-IPv6-Linux">2. History of IPv6 in Linux</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57485808">2.1. Beginning</a></span></dt><dt><span class="sect2"><a href="#idp57487776">2.2. In between</a></span></dt><dt><span class="sect2"><a href="#idp57493568">2.3. Current</a></span></dt><dt><span class="sect2"><a href="#idp57495248">2.4. Future</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57496864">3. What do IPv6 addresses look like?</a></span></dt><dt><span class="sect1"><a href="#idp57510016">4. FAQ (Basics)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57510656">4.1. Why is the name IPv6 and not IPv5 as successor for IPv4?</a></span></dt><dt><span class="sect2"><a href="#idp57513680">4.2. IPv6 addresses: why such a high number of bits?</a></span></dt><dt><span class="sect2"><a href="#idp57518384">4.3. IPv6 addresses: why so small a number of bits on a new design?</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chapter-addresstypes">3. Address types</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp57524672">1. Addresses without a special prefix</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57525312">1.1. Localhost address</a></span></dt><dt><span class="sect2"><a href="#idp57528304">1.2. Unspecified address</a></span></dt><dt><span class="sect2"><a href="#idp57531440">1.3. IPv6 address with embedded IPv4 address</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57539552">2. Network part, also known as prefix</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57541584">2.1. Link local address type</a></span></dt><dt><span class="sect2"><a href="#idp57545984">2.2. Site local address type</a></span></dt><dt><span class="sect2"><a href="#idp57551312">2.3. Unique Local IPv6 Unicast Addresses</a></span></dt><dt><span class="sect2"><a href="#idp57556176">2.4. Global address type "(Aggregatable) global unicast"</a></span></dt><dt><span class="sect2"><a href="#idp57576688">2.5. Multicast addresses</a></span></dt><dt><span class="sect2"><a href="#idp57589344">2.6. Anycast addresses</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57593792">3. Address types (host part)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57595312">3.1. Automatically computed (also known as stateless)</a></span></dt><dt><span class="sect2"><a href="#idp57603072">3.2. Manually set</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57605616">4. Prefix lengths for routing</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57608784">4.1. Prefix lengths (also known as "netmasks")</a></span></dt><dt><span class="sect2"><a href="#idp57614464">4.2. Matching a route</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chapter-systemcheck">4. IPv6-ready system check</a></span></dt><dd><dl><dt><span class="sect1"><a href="#systemcheck-kernel">1. IPv6-ready kernel</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57621504">1.1. Check for IPv6 support in the current running kernel</a></span></dt><dt><span class="sect2"><a href="#idp57624320">1.2. Try to load IPv6 module</a></span></dt><dt><span class="sect2"><a href="#idp57630736">1.3. Compile kernel with IPv6 capabilities</a></span></dt><dt><span class="sect2"><a href="#idp57641184">1.4. IPv6-ready network devices</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57649072">2. IPv6-ready network configuration tools</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57650144">2.1. net-tools package</a></span></dt><dt><span class="sect2"><a href="#idp57653408">2.2. iproute package</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57657408">3. IPv6-ready test/debug programs</a></span></dt><dd><dl><dt><span class="sect2"><a href="#program-ping6.">3.1. IPv6 ping</a></span></dt><dt><span class="sect2"><a href="#program-traceroute6.">3.2. IPv6 traceroute6</a></span></dt><dt><span class="sect2"><a href="#program-tracepath6.">3.3. IPv6 tracepath6</a></span></dt><dt><span class="sect2"><a href="#program-tcpdump">3.4. IPv6 tcpdump</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57703040">4. IPv6-ready programs</a></span></dt><dt><span class="sect1"><a href="#idp57706976">5. IPv6-ready client programs (selection)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57708976">5.1. Checking DNS for resolving IPv6 addresses</a></span></dt><dt><span class="sect2"><a href="#idp57711632">5.2. IPv6-ready telnet clients</a></span></dt><dt><span class="sect2"><a href="#idp57713984">5.3. IPv6-ready ssh clients</a></span></dt><dt><span class="sect2"><a href="#idp57720144">5.4. IPv6-ready web browsers</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57733712">6. IPv6-ready server programs</a></span></dt><dt><span class="sect1"><a href="#faq-ipv6-ready-system-check">7. FAQ (IPv6-ready system check)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57736416">7.1. Using tools</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chapter-configuration-interface">5. Configuring interfaces</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp57745136">1. Different network devices</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57747232">1.1. Physically bounded</a></span></dt><dt><span class="sect2"><a href="#idp57748256">1.2. Virtually bounded</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57759600">2. Bringing interfaces up/down</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57760496">2.1. Using "ip"</a></span></dt><dt><span class="sect2"><a href="#idp57763040">2.2. Using "ifconfig"</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chapter-configuration-address">6. Configuring IPv6 addresses</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp57766736">1. Displaying existing IPv6 addresses</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57768384">1.1. Using "ip"</a></span></dt><dt><span class="sect2"><a href="#idp57772368">1.2. Using "ifconfig"</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57775552">2. Add an IPv6 address</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57777040">2.1. Using "ip"</a></span></dt><dt><span class="sect2"><a href="#idp57779584">2.2. Using "ifconfig"</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57782016">3. Removing an IPv6 address</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57783056">3.1. Using "ip"</a></span></dt><dt><span class="sect2"><a href="#idp57785488">3.2. Using "ifconfig"</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57787920">4. Automatic IPv6 Address Configuration</a></span></dt><dt><span class="sect1"><a href="#idp57789440">5. Enable Privacy Extension</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57791904">5.1. Enable Privacy Extension using sysctl</a></span></dt><dt><span class="sect2"><a href="#idp57800448">5.2. Enable Privacy Extension using NetworkManager</a></span></dt><dt><span class="sect2"><a href="#idp57808016">5.3. Test real use of Privacy Extension IPv6 Addresses</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chapter-configuration-route">7. Configuring normal IPv6 routes</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp57811840">1. Displaying existing IPv6 routes</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57812880">1.1. Using "ip"</a></span></dt><dt><span class="sect2"><a href="#idp57815120">1.2. Using "route"</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57818064">2. Add an IPv6 route through a gateway</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57819856">2.1. Using "ip"</a></span></dt><dt><span class="sect2"><a href="#idp57822432">2.2. Using "route"</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57825488">3. Removing an IPv6 route through a gateway</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57826512">3.1. Using "ip"</a></span></dt><dt><span class="sect2"><a href="#idp57828976">3.2. Using "route"</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57831440">4. Add an IPv6 route through an interface</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57832336">4.1. Using "ip"</a></span></dt><dt><span class="sect2"><a href="#idp57835312">4.2. Using "route"</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57837728">5. Removing an IPv6 route through an interface</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57838720">5.1. Using "ip"</a></span></dt><dt><span class="sect2"><a href="#idp57841104">5.2. Using "route"</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57843504">6. FAQ for IPv6 routes</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57844144">6.1. Support of an IPv6 default route</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chapter-Neighbor-Discovery">8. Neighbor Discovery</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp57851424">1. Displaying neighbors using &#8221;ip&#8221;</a></span></dt><dt><span class="sect1"><a href="#idp57853824">2. Manipulating neighbors table using &#8221;ip&#8221;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57854864">2.1. Manually add an entry</a></span></dt><dt><span class="sect2"><a href="#idp57857424">2.2. Manually delete an entry</a></span></dt><dt><span class="sect2"><a href="#idp57859872">2.3. More advanced settings</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chapter-configuring-ipv6-in-ipv4-tunnels">9. Configuring IPv6-in-IPv4 tunnels</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp57864208">1. Types of tunnels</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57865200">1.1. Static point-to-point tunneling</a></span></dt><dt><span class="sect2"><a href="#idp57873488">1.2. Automatically tunneling</a></span></dt><dt><span class="sect2"><a href="#tunneling-6to4.">1.3. 6to4-Tunneling</a></span></dt><dt><span class="sect2"><a href="#idp57889440">1.4. UDP encapsulated IPv6 tunneling</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57896784">2. Displaying existing tunnels</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57897424">2.1. Using "ip"</a></span></dt><dt><span class="sect2"><a href="#idp57899664">2.2. Using "route"</a></span></dt></dl></dd><dt><span class="sect1"><a href="#conf-ipv6-in-ipv4-point-to-point-tunnels">3. Setup of point-to-point tunnel</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57906704">3.1. Add point-to-point tunnels</a></span></dt><dt><span class="sect2"><a href="#idp57917312">3.2. Removing point-to-point tunnels</a></span></dt><dt><span class="sect2"><a href="#idp57926384">3.3. Numbered point-to-point tunnels</a></span></dt></dl></dd><dt><span class="sect1"><a href="#configuring-ipv6to4-tunnels">4. Setup of 6to4 tunnels</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57930464">4.1. Add a 6to4 tunnel</a></span></dt><dt><span class="sect2"><a href="#idp57946048">4.2. Remove a 6to4 tunnel</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chapter-configuring-ipv4-in-ipv6-tunnels">10. Configuring IPv4-in-IPv6 tunnels</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp57955696">1. Displaying existing tunnels</a></span></dt><dt><span class="sect1"><a href="#idp57958976">2. Setup of point-to-point tunnel</a></span></dt><dt><span class="sect1"><a href="#idp57961520">3. Removing point-to-point tunnels</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chapter-kernel-settings">11. Kernel settings in /proc-filesystem</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp57967952">1. How to access the /proc-filesystem</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57968592">1.1. Using &#8221;cat&#8221; and &#8221;echo&#8221;</a></span></dt><dt><span class="sect2"><a href="#idp57976976">1.2. Using &#8221;sysctl&#8221;</a></span></dt><dt><span class="sect2"><a href="#idp57986480">1.3. Values found in /proc-filesystems</a></span></dt></dl></dd><dt><span class="sect1"><a href="#proc-sys-net-ipv6.">2. Entries in /proc/sys/net/ipv6/</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57990128">2.1. conf/default/*</a></span></dt><dt><span class="sect2"><a href="#idp57991024">2.2. conf/all/*</a></span></dt><dt><span class="sect2"><a href="#idp57996432">2.3. conf/interface/*</a></span></dt><dt><span class="sect2"><a href="#idp58024768">2.4. neigh/default/*</a></span></dt><dt><span class="sect2"><a href="#idp58035392">2.5. neigh/interface/*</a></span></dt><dt><span class="sect2"><a href="#idp58059328">2.6. route/*</a></span></dt></dl></dd><dt><span class="sect1"><a href="#proc-sys-net-ipv4.">3. IPv6-related entries in /proc/sys/net/ipv4/</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58077904">3.1. ip_*</a></span></dt><dt><span class="sect2"><a href="#idp58079440">3.2. tcp_*</a></span></dt><dt><span class="sect2"><a href="#idp58080336">3.3. icmp_*</a></span></dt><dt><span class="sect2"><a href="#idp58081424">3.4. others</a></span></dt></dl></dd><dt><span class="sect1"><a href="#proc-net">4. IPv6-related entries in /proc/net/</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58083872">4.1. if_inet6</a></span></dt><dt><span class="sect2"><a href="#idp58090512">4.2. ipv6_route</a></span></dt><dt><span class="sect2"><a href="#idp58099104">4.3. sockstat6</a></span></dt><dt><span class="sect2"><a href="#idp58101456">4.4. tcp6</a></span></dt><dt><span class="sect2"><a href="#idp58102352">4.5. udp6</a></span></dt><dt><span class="sect2"><a href="#idp58103248">4.6. igmp6</a></span></dt><dt><span class="sect2"><a href="#idp58104144">4.7. raw6</a></span></dt><dt><span class="sect2"><a href="#idp58105040">4.8. ip6_flowlabel</a></span></dt><dt><span class="sect2"><a href="#idp58105936">4.9. rt6_stats</a></span></dt><dt><span class="sect2"><a href="#idp58106832">4.10. snmp6</a></span></dt><dt><span class="sect2"><a href="#idp58108368">4.11. ip6_tables_names</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#netlink">12. Netlink-Interface to kernel</a></span></dt><dt><span class="chapter"><a href="#resolver">13. Address Resolver &amp; Selection</a></span></dt><dt><span class="chapter"><a href="#network-debugging">14. Network debugging</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp58147360">1. Server socket binding</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58148000">1.1. Using &#8221;netstat&#8221; for server socket binding check</a></span></dt></dl></dd><dt><span class="sect1"><a href="#examples-tcpdump">2. Examples for tcpdump packet dumps</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58152480">2.1. Router discovery</a></span></dt><dt><span class="sect2"><a href="#idp58164896">2.2. Neighbor discovery</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chapter-support-persistent-configuration">15. Support for persistent IPv6 configuration in Linux distributions</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp58177824">1. Red Hat Linux and &#8221;clones&#8221;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58183264">1.1. Test for IPv6 support of network configuration scripts</a></span></dt><dt><span class="sect2"><a href="#idp58188944">1.2. Short hint for enabling IPv6 on current RHL 7.1, 7.2, 7.3, ...</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp58195200">2. SuSE Linux</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58196736">2.1. SuSE Linux 7.3</a></span></dt><dt><span class="sect2"><a href="#idp58198384">2.2. SuSE Linux 8.0</a></span></dt><dt><span class="sect2"><a href="#idp58201520">2.3. SuSE Linux 8.1</a></span></dt></dl></dd><dt><span class="sect1"><a href="#Configuration-Debian-Linux">3. Debian Linux</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58210288">3.1. Further information</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chapter-autoconfiguration">16. Auto-configuration</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp58214560">1. Stateless auto-configuration out-of-the-box</a></span></dt><dt><span class="sect1"><a href="#idp58216448">2. Stateless auto-configuration using Router Advertisement Daemon (radvd)</a></span></dt><dt><span class="sect1"><a href="#idp58218448">3. Dynamic Host Configuration Protocol v6 (DHCPv6)</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chapter-mobility">17. Mobility</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp58226016">1. Common information</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58226656">1.1. Node Mobility</a></span></dt><dt><span class="sect2"><a href="#idp58229728">1.2. Network Mobility</a></span></dt><dt><span class="sect2"><a href="#idp58232496">1.3. Links</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chapter-firewalling-security">18. Firewalling</a></span></dt><dd><dl><dt><span class="sect1"><a href="#firewalling-netfilter6.">1. Firewalling using netfilter6 </a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58251824">1.1. More information</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp58255904">2. Preparation</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58256960">2.1. Get sources</a></span></dt><dt><span class="sect2"><a href="#idp58259872">2.2. Extract sources</a></span></dt><dt><span class="sect2"><a href="#idp58263168">2.3. Apply latest iptables/IPv6-related patches to kernel source</a></span></dt><dt><span class="sect2"><a href="#idp58270480">2.4. Configure, build and install new kernel</a></span></dt><dt><span class="sect2"><a href="#idp58274272">2.5. Rebuild and install binaries of iptables</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp58285920">3. Usage of ip6tables</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58286560">3.1. Check for support</a></span></dt><dt><span class="sect2"><a href="#idp58288592">3.2. Learn how to use ip6tables</a></span></dt><dt><span class="sect2"><a href="#idp58324672">3.3. Examples</a></span></dt></dl></dd><dt><span class="sect1"><a href="#nat-netfilter6.">4. Network Address Translation (NAT) using netfilter6 </a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58337184">4.1. IPv6 Masquerading</a></span></dt><dt><span class="sect2"><a href="#idp58339024">4.2. IPv6 Destination NAT</a></span></dt><dt><span class="sect2"><a href="#idp58340464">4.3. IPv6 Port Forwarding</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp58354192">5. Firewalling using nftables</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58357792">5.1. Preparation for nftables usage</a></span></dt><dt><span class="sect2"><a href="#idp58358912">5.2. Basic nftables configuration</a></span></dt><dt><span class="sect2"><a href="#idp58363152">5.3. Simple filter policy with nftables using only table &#8221;inet&#8221;</a></span></dt><dt><span class="sect2"><a href="#idp58377456">5.4. Filter policy with nftables using tables &#8221;ip&#8221;, &#8221;ip6&#8221; and &#8221;inet&#8221;</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chapter-security">19. Security</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp58381152">1. Node security</a></span></dt><dt><span class="sect1"><a href="#idp58385056">2. Access limitations</a></span></dt><dt><span class="sect1"><a href="#IPv6-security-auditing">3. IPv6 security auditing</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58389184">3.1. Legal issues</a></span></dt><dt><span class="sect2"><a href="#idp58390304">3.2. Security auditing using IPv6-enabled netcat</a></span></dt><dt><span class="sect2"><a href="#idp58392784">3.3. Security auditing using IPv6-enabled nmap</a></span></dt><dt><span class="sect2"><a href="#idp58394672">3.4. Security auditing using IPv6-enabled strobe</a></span></dt><dt><span class="sect2"><a href="#idp58398704">3.5. Security auditing using online tools</a></span></dt><dt><span class="sect2"><a href="#idp58401584">3.6. Audit results</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chapter-encryption-authentication">20. Encryption and Authentication</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp58406928">1. Modes of using encryption and authentication</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58407920">1.1. Transport mode</a></span></dt><dt><span class="sect2"><a href="#idp58409552">1.2. Tunnel mode</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp58411312">2. Support in kernel (ESP and AH)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58411952">2.1. Support in vanilla Linux kernel 2.4.x</a></span></dt><dt><span class="sect2"><a href="#idp58413808">2.2. Support in vanilla Linux kernel 2.6.x</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp58415200">3. Automatic key exchange (IKE)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58417808">3.1. IKE daemon &#8221;racoon&#8221;</a></span></dt><dt><span class="sect2"><a href="#idp58437264">3.2. IKE daemon &#8221;pluto&#8221;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp58453408">4. Additional informations:</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chapter-qos">21. Quality of Service (QoS)</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp58460240">1. General</a></span></dt><dt><span class="sect1"><a href="#idp58461856">2. Linux QoS using &#8221;tc&#8221;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58464240">2.1. Example for a constant bitrate queuing</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chapter-hints-daemons">22. Hints for IPv6-enabled daemons</a></span></dt><dd><dl><dt><span class="sect1"><a href="#hints-daemons-bind">1. Berkeley Internet Name Domain (BIND) daemon &#8221;named&#8221;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58486256">1.1. Listening on IPv6 addresses</a></span></dt><dt><span class="sect2"><a href="#idp58494368">1.2. IPv6 enabled Access Control Lists (ACL)</a></span></dt><dt><span class="sect2"><a href="#idp58498768">1.3. Sending queries with dedicated IPv6 address</a></span></dt><dt><span class="sect2"><a href="#idp58500400">1.4. Per zone defined dedicated IPv6 addresses</a></span></dt><dt><span class="sect2"><a href="#idp58504464">1.5. IPv6 DNS zone files examples</a></span></dt><dt><span class="sect2"><a href="#idp58506496">1.6. Serving IPv6 related DNS data</a></span></dt><dt><span class="sect2"><a href="#idp58516864">1.7. Checking IPv6-enabled connect</a></span></dt></dl></dd><dt><span class="sect1"><a href="#hints-daemons-xinetd">2. Internet super daemon (xinetd)</a></span></dt><dt><span class="sect1"><a href="#hints-daemons-apache2.">3. Webserver Apache2 (httpd2)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58532128">3.1. Listening on IPv6 addresses</a></span></dt></dl></dd><dt><span class="sect1"><a href="#hints-daemons-radvd">4. Router Advertisement Daemon (radvd)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58543872">4.1. Configuring radvd</a></span></dt><dt><span class="sect2"><a href="#idp58554480">4.2. Debugging</a></span></dt></dl></dd><dt><span class="sect1"><a href="#hints-daemons-dhcpv6.">5. Dynamic Host Configuration v6 Server (dhcp6s)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58560528">5.1. Configuration of the DHCPv6 server (dhcp6s)</a></span></dt><dt><span class="sect2"><a href="#idp58562672">5.2. Configuration of the DHCPv6 client (dhcp6c)</a></span></dt><dt><span class="sect2"><a href="#idp58565984">5.3. Usage</a></span></dt><dt><span class="sect2"><a href="#idp58569408">5.4. Debugging</a></span></dt></dl></dd><dt><span class="sect1"><a href="#hints-daemons-isc-dhcp">6. ISC Dynamic Host Configuration Server (dhcpd)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58576704">6.1. Configuration of the ISC DHCP server for IPv6 (dhcpd)</a></span></dt><dt><span class="sect2"><a href="#idp58582512">6.2. Usage</a></span></dt></dl></dd><dt><span class="sect1"><a href="#hints-daemons-dibbler">7. DHCP Server Dibbler</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58587216">7.1. Configuration of the Dibbler DHCP server for IPv6</a></span></dt><dt><span class="sect2"><a href="#idp58589440">7.2. Usage</a></span></dt></dl></dd><dt><span class="sect1"><a href="#hints-daemons-tcpwrapper">8. tcp_wrapper</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58593632">8.1. Filtering capabilities</a></span></dt><dt><span class="sect2"><a href="#idp58599376">8.2. Which program uses tcp_wrapper</a></span></dt><dt><span class="sect2"><a href="#idp58601408">8.3. Usage</a></span></dt><dt><span class="sect2"><a href="#idp58607584">8.4. Logging</a></span></dt></dl></dd><dt><span class="sect1"><a href="#hints-daemons-vsftpd">9. vsftpd</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58616704">9.1. Listening on IPv6 addresses</a></span></dt></dl></dd><dt><span class="sect1"><a href="#hints-daemons-proftpd">10. proftpd</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58619472">10.1. Listening on IPv6 addresses</a></span></dt></dl></dd><dt><span class="sect1"><a href="#hints-daemons-others">11. Other daemons</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chapter-programming">23. Programming</a></span></dt><dd><dl><dt><span class="sect1"><a href="#chapter-section-using-API">1. Programming using C-API</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58634448">1.1. Address Structures</a></span></dt><dt><span class="sect2"><a href="#idp58653104">1.2. Lookup Functions</a></span></dt><dt><span class="sect2"><a href="#idp58675120">1.3. Quirks Encountered</a></span></dt><dt><span class="sect2"><a href="#idp58685104">1.4. Putting It All Together (A Client-Server Programming Example)</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57692944">2. Other programming languages</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57693632">2.1. JAVA</a></span></dt><dt><span class="sect2"><a href="#idp58791360">2.2. Perl</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chapter-interoperability">24. Interoperability</a></span></dt><dt><span class="chapter"><a href="#chapter-information">25. Further information and URLs</a></span></dt><dd><dl><dt><span class="sect1"><a href="#information-books">1. Paper printed books, articles, online reviews (mixed)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58800128">1.1. Printed Books (English)</a></span></dt><dt><span class="sect2"><a href="#idp58705216">1.2. Articles, eBooks, Online Reviews (mixed)</a></span></dt><dt><span class="sect2"><a href="#information-sciencepublication">1.3. Science Publications (abstracts, bibliographies, online resources)</a></span></dt><dt><span class="sect2"><a href="#idp58932832">1.4. Others</a></span></dt></dl></dd><dt><span class="sect1"><a href="#information-conferences">2. Conferences, Meetings, Summits</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58935504">2.1. 2004</a></span></dt></dl></dd><dt><span class="sect1"><a href="#information-onlineinformation">3. Online information</a></span></dt><dd><dl><dt><span class="sect2"><a href="#information-joinipv6.">3.1. Join the IPv6 backbone</a></span></dt><dt><span class="sect2"><a href="#idp58965008">3.2. Latest news and URLs to other documents</a></span></dt><dt><span class="sect2"><a href="#idp58967888">3.3. Protocol references</a></span></dt><dt><span class="sect2"><a href="#idp58981168">3.4. More information</a></span></dt><dt><span class="sect2"><a href="#idp59027488">3.5. By countries</a></span></dt><dt><span class="sect2"><a href="#idp59061712">3.6. By operating systems</a></span></dt><dt><span class="sect2"><a href="#information-ipv6andsecurity">3.7. IPv6 Security</a></span></dt><dt><span class="sect2"><a href="#idp59091872">3.8. Application lists</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp59109328">4. IPv6 Infrastructure</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp59109968">4.1. Statistics</a></span></dt><dt><span class="sect2"><a href="#idp59113072">4.2. Internet Exchanges</a></span></dt><dt><span class="sect2"><a href="#information-Tunnelbroker">4.3. Tunnel broker</a></span></dt><dt><span class="sect2"><a href="#information-infrastructure-nativeipv6service">4.4. Native IPv6 Services</a></span></dt></dl></dd><dt><span class="sect1"><a href="#information-maillists">5. Maillists</a></span></dt><dt><span class="sect1"><a href="#information-onlinetesttools">6. Online tools</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp59258208">6.1. Testing tools</a></span></dt><dt><span class="sect2"><a href="#idp59261936">6.2. Information retrievement</a></span></dt><dt><span class="sect2"><a href="#idp59263792">6.3. IPv6 Looking Glasses</a></span></dt><dt><span class="sect2"><a href="#idp59265552">6.4. Helper applications</a></span></dt></dl></dd><dt><span class="sect1"><a href="#information-trainingsandseminars">7. Trainings, Seminars</a></span></dt><dt><span class="sect1"><a href="#information-onlinediscovery">8. 'The Online Discovery' ...</a></span></dt></dl></dd><dt><span class="chapter"><a href="#idp59276000">26. Revision history / Credits / The End</a></span></dt><dd><dl><dt><span class="sect1"><a href="#revision-history">1. Revision history</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp59278928">1.1. Releases 0.x</a></span></dt></dl></dd><dt><span class="sect1"><a href="#credits">2. Credits</a></span></dt><dd><dl><dt><span class="sect2"><a href="#major-credits">2.1. Major credits</a></span></dt><dt><span class="sect2"><a href="#idp59383440">2.2. Other credits</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp59409744">3. The End</a></span></dt></dl></dd></dl></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chapter-general"></a>Chapter 1. General</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#general-copright">1. Copyright, license and others</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp52464832">1.1. Copyright</a></span></dt><dt><span class="sect2"><a href="#idp52507552">1.2. License</a></span></dt><dt><span class="sect2"><a href="#idp52511216">1.3. About the author</a></span></dt></dl></dd><dt><span class="sect1"><a href="#general-category">2. Category</a></span></dt><dt><span class="sect1"><a href="#idp52360080">3. Version, History and To-Do</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp52360768">3.1. Version</a></span></dt><dt><span class="sect2"><a href="#idp52362800">3.2. History</a></span></dt><dt><span class="sect2"><a href="#idp52373024">3.3. To-Do</a></span></dt></dl></dd><dt><span class="sect1"><a href="#general-translations">4. Translations</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp52377200">4.1. To language</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57411920">5. Technical</a></span></dt><dd><dl><dt><span class="sect2"><a href="#general-original-source">5.1. Original source of this HOWTO</a></span></dt><dt><span class="sect2"><a href="#idp57417168">5.2. On-line references to the HTML version of this HOWTO (linking/anchors)</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57420512">6. Preface</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57421408">6.1. How many versions of a Linux &amp; IPv6 related HOWTO are floating around?</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57432496">7. Used terms, glossary and shortcuts</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57433136">7.1. Network related</a></span></dt><dt><span class="sect2"><a href="#idp57462176">7.2. Document related</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57468704">8. Requirements for using this HOWTO</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57469344">8.1. Personal prerequisites</a></span></dt><dt><span class="sect2"><a href="#idp57477536">8.2. Linux operating system compatible hardware</a></span></dt></dl></dd></dl></div><p>Information about available translations you will find in section <a class="link" href="#general-translations" title="4. Translations">Translations</a>.</p><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="general-copright"></a>1. Copyright, license and others</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp52464832"></a>1.1. Copyright</h3></div></div></div><p>Written and Copyright (C) 2001-2017 by Peter Bieringer</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp52507552"></a>1.2. License</h3></div></div></div><p>This Linux IPv6 HOWTO is published under GNU GPL version 2:
</p><p>The Linux IPv6 HOWTO, a guide how to configure and use IPv6 on Linux systems. 
</p><p>Copyright © 2001-2017 Peter Bieringer 
</p><p>This documentation is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version. </p><p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details. </p><p>You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110, USA.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp52511216"></a>1.3. About the author</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp52511888"></a>1.3.1. Internet/IPv6 history of the author</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>1993: I got in contact with the Internet using console based e-mail and news client (e.g. look for &#8221;e91abier&#8221; on <a class="ulink" href="http://groups.google.com/" target="_top">groups.google.com</a>, that's me).</p></li><li class="listitem"><p>1996: I got a request for designing a course on IPv6, including a workshop with the Linux operating system.</p></li><li class="listitem"><p>1997: Started writing a guide on how to install, configure and use IPv6 on Linux systems, called <a class="ulink" href="http://www.bieringer.de/linux/IPv6/" target="_top">IPv6 &amp; Linux - HowTo</a> (see <a class="ulink" href="http://www.bieringer.de/linux/IPv6/IPv6-HOWTO/IPv6-HOWTO-0.html#history" target="_top">IPv6 &amp; Linux - HowTo/History</a> for more information).</p></li><li class="listitem"><p>2001: Started writing this new Linux IPv6 HOWTO. </p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp52355744"></a>1.3.2. Contact</h4></div></div></div><p>The author can be contacted via e-mail at &lt;pb at bieringer dot de&gt; and also via his <a class="ulink" href="http://www.bieringer.de/pb/" target="_top">homepage</a>.</p><p>He's currently living in Munich / Bavaria / Germany / Europe / Earth.</p></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="general-category"></a>2. Category</h2></div></div></div><p>This HOWTO should be listed in category &#8221;<span class="emphasis"><em>Networking</em></span>/<span class="emphasis"><em>Protocols</em></span>&#8221;.</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp52360080"></a>3. Version, History and To-Do</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp52360768"></a>3.1. Version</h3></div></div></div><p>The current version is shown at the beginning of the document.</p><p>For other available versions/translations see also <a class="ulink" href="http://www.bieringer.de/linux/IPv6/" target="_top">http://www.bieringer.de/linux/IPv6/</a>.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp52362800"></a>3.2. History</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp52363472"></a>3.2.1. Major history</h4></div></div></div><p>2001-11-30: Starting to design new HOWTO.</p><p>2002-01-02: A lot of content completed, first public release of chapter 1 (version 0.10).</p><p>2002-01-14: More completed, some reviews, public release of the whole document (version 0.14).</p><p>2002-08-16: Polish translation is in progress</p><p>2002-10-31: Chinese translation is available (see <a class="link" href="#general-translations" title="4. Translations">Translations</a> for more)</p><p>2002-11-10: German translation is in progress</p><p>2003-02-10: German translation is available</p><p>2003-04-09: French translation is in progress</p><p>2003-05-09: French translation is available</p><p>2003-10-16: Italian translation is in progress</p><p>2004-03-12: Italian translation is available</p><p>2004-06-18: Greek translation is in progress</p><p>2005-07-25: Turkish translation is availble</p><p>2007-03-28: Portuguese-Brazil translation is in progress</p><p>2008-07-30: Spanish translation is available (lost, URL no longer valid)</p><p>2011-05-09: Portuguese-Brazil translation is again in progress</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp52371216"></a>3.2.2. Full history</h4></div></div></div><p>See <a class="link" href="#revision-history" title="1. Revision history">revision history</a> at the end of this document.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp52373024"></a>3.3. To-Do</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Fill in missing content</p></li><li class="listitem"><p>Finishing grammar checking</p></li></ul></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="general-translations"></a>4. Translations</h2></div></div></div><p>Translations always have to contain the URL, version number and copyright of the original document (but yours, too). Pls. don't translate the original changelog, this is not very useful - also do not translate the full section about available translations, can be run out-of-date, add an URL to this section here in the English howto.</p><p>Looks like the document's change frequency is mostly less than once per month. Since version 0.27 it looks like that most of the content contributed by me has been written. Translations always have to use the English version as source.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp52377200"></a>4.1. To language</h3></div></div></div><p>Note: an overview with URLs can be found at <a class="ulink" href="http://www.bieringer.de/linux/IPv6/" target="_top">http://www.bieringer.de/linux/IPv6/</a>.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp52378848"></a>4.1.1. Chinese</h4></div></div></div><p>A Chinese translation by Burma Chen &lt;expns at yahoo dot com&gt; (announced to me at 2002-10-31) can be found on the TLDP: <a class="ulink" href="http://www.ibiblio.org/pub/Linux/docs/HOWTO/translations/zh/Linux-IPv6-HOWTO.txt.gz" target="_top">http://www.ibiblio.org/pub/Linux/docs/HOWTO/translations/zh/Linux-IPv6-HOWTO.txt.gz (g'zipped txt)</a>. It's a snapshot translation, don't know whether kept up-to-date.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57395840"></a>4.1.2. Polish</h4></div></div></div><p>Since 2002-08-16 a Polish translation was started and is still in progress by Lukasz Jokiel &lt;Lukasz dot Jokiel at klonex dot com dot pl&gt;. Taken source: CVS-version 1.29 of LyX file, which was source for howto version 0.27. Status is still work-in-progress (2004-08-30).</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57397392"></a>4.1.3. German</h4></div></div></div><p>With 2002-11-10 a German translation was started by Georg Käfer &lt;gkaefer at gmx dot at&gt; and the first public version was published 2003-02-10. It's originally available on Deep Space 6 at <a class="ulink" href="http://mirrors.deepspace6.net/Linux+IPv6-HOWTO-de/" target="_top">http://mirrors.deepspace6.net/Linux+IPv6-HOWTO-de/</a> (mirrored e.g. on <a class="ulink" href="http://mirrors.bieringer.de/Linux+IPv6-HOWTO-de/" target="_top">http://mirrors.bieringer.de/Linux+IPv6-HOWTO-de/</a>). This version will stay up-to-date as much as possible.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57400096"></a>4.1.4. French</h4></div></div></div><p>With 2003-04-09 a French translation was started by Michel Boucey &lt;mboucey at free dot fr&gt; and the first public version was published 2003-05-09. It's originally available on Deep Space 6 at <a class="ulink" href="http://mirrors.deepspace6.net/Linux+IPv6-HOWTO-fr/" target="_top">http://mirrors.deepspace6.net/Linux+IPv6-HOWTO-fr/</a> (mirrored e.g. on <a class="ulink" href="http://mirrors.bieringer.de/Linux+IPv6-HOWTO-fr/" target="_top">http://mirrors.bieringer.de/Linux+IPv6-HOWTO-fr/</a>).</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57402736"></a>4.1.5. Spanish</h4></div></div></div><p>A member of the MontevideoLibre, a project in Uruguay (South America) started the translation into Spanish in wiki format some time ago, but the URL is no longer available.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57403824"></a>4.1.6. Italian</h4></div></div></div><p>With 2003-10-16 a Italian translation was started by Michele Ferritto &lt;m dot ferritto at virgilio dot it&gt; for the <a class="ulink" href="http://ildp.pluto.linux.it/" target="_top">ILDP</a> (Italian Linux Documentation Project) and the first public version was published 2004-03-12. It's originally available on the ILDP at <a class="ulink" href="http://www.pluto.it/ildp/howto/ipv6.html" target="_top">http://www.pluto.it/ildp/howto/ipv6.html</a>.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57406272"></a>4.1.7. Japanese</h4></div></div></div><p>On 2003-05-14 Shino Taketani &lt;shino_1305 at hotmail dot com&gt; send me a note that he planned to translate the HowTo into Japanese.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57407440"></a>4.1.8. Greek</h4></div></div></div><p>On 2004-06-18 Nikolaos Tsarmpopoulos &lt;ntsarb at uth dot gr&gt; send me a note that he planned to translate the HowTo into Greek.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57408640"></a>4.1.9. Turkish</h4></div></div></div><p>On 2005-07-18 Necdet Yucel &lt;nyucel at comu dot edu dot tr&gt; send me a note that a Turkish translation is available. It's a snapshot translation (currently of 0.61) and can be found at <a class="ulink" href="http://docs.comu.edu.tr/howto/ipv6-howto.html" target="_top">http://docs.comu.edu.tr/howto/ipv6-howto.html</a>.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57410656"></a>4.1.10. Portuguese-Brazil</h4></div></div></div><p>On 2011-05-06 Gustavo Mendes de Carvalho &lt;gmcarvalho at gmail dot com&gt; start to translate the HowTo in Portuguese-Brazil. The first try in 2007 by Claudemir da Luz &lt;claudemir dot daluz at virtuallink dot com dot br&gt; was never finished.</p></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57411920"></a>5. Technical</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="general-original-source"></a>5.1. Original source of this HOWTO</h3></div></div></div><p>This HOWTO is currently written with LyX version 2.2.2 on a Fedora 25 Linux system with template SGML/XML (DocBook book). It's available on <a class="ulink" href="https://github.com/tLDP/Linux-IPv6/" target="_top">github / tLDP / Linux-IPv6</a> for contribution.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57414608"></a>5.1.1. Code line wrapping</h4></div></div></div><p>Code line wrapping is done using selfmade utility &#8221;lyxcodelinewrapper.pl&#8221;, you can get it from GitHub for your own usage: <a class="ulink" href="https://github.com/tLDP/Linux-IPv6/" target="_top">github / tLDP / Linux-IPv6</a></p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57416272"></a>5.1.2. SGML generation</h4></div></div></div><p>SGML/XML is generated using export function in LyX.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57417168"></a>5.2. On-line references to the HTML version of this HOWTO (linking/anchors)</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57417888"></a>5.2.1. Master index page</h4></div></div></div><p>Generally, a reference to the master index page is recommended. </p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57418864"></a>5.2.2. Dedicated pages</h4></div></div></div><p>Because the HTML pages are generated out of the SGML file, the HTML filenames turn out to be quite random. However, some pages are tagged in LyX, resulting in static names. These tags are useful for references and shouldn't be changed in the future.</p><p>If you think that I have forgotten a tag, please let me know, and I will add it.</p></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57420512"></a>6. Preface</h2></div></div></div><p>Some things first:</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57421408"></a>6.1. How many versions of a Linux &amp; IPv6 related HOWTO are floating around?</h3></div></div></div><p>Including this, there are three (3) HOWTO documents available. Apologies, if that is too many ;-)</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57422640"></a>6.1.1. Linux IPv6 FAQ/HOWTO (outdated)</h4></div></div></div><p>The first IPv6 related document was written by <span class="emphasis"><em>Eric Osborne</em></span> and called <a class="ulink" href="http://www.linuxhq.com/IPv6/" target="_top">Linux IPv6 FAQ/HOWTO</a> (please use it only for historical issues). Latest version was 3.2.1 released July, 14 1997.</p><p>Please help: if someone knows the date of birth of this HOWTO, please send me an e-mail (information will be needed in &#8221;history&#8221;).</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57425328"></a>6.1.2. IPv6 &amp; Linux - HowTo (maintained)</h4></div></div></div><p>There exists a second version called <a class="ulink" href="http://www.bieringer.de/linux/IPv6/" target="_top">IPv6 &amp; Linux - HowTo</a> written by me (<span class="emphasis"><em>Peter Bieringer</em></span>) in pure HTML. It was born April 1997 and the first English version was published in June 1997. I will continue to maintain it, but it will slowly fade (but not full) in favour of the Linux IPv6 HOWTO you are currently reading.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57427568"></a>6.1.3. Linux IPv6 HOWTO (this document)</h4></div></div></div><p>Because the <a class="ulink" href="http://www.bieringer.de/linux/IPv6/" target="_top">IPv6 &amp; Linux - HowTo</a> is written in pure HTML it's not really compatible with the <a class="ulink" href="http://www.tldp.org/" target="_top">The Linux Documentation Project (TLDP)</a>. I (<span class="emphasis"><em>Peter Bieringer</em></span>) got a request in late November 2001 to rewrite the <a class="ulink" href="http://www.bieringer.de/linux/IPv6/" target="_top">IPv6 &amp; Linux - HowTo</a> in SGML. However, because of the discontinuation of that HOWTO (<a class="ulink" href="http://www.bieringer.de/linux/IPv6/IPv6-HOWTO/IPv6-HOWTO-0.html#history" target="_top">Future of IPv6 &amp; Linux - HowTo</a>), and as IPv6 is becoming more and more standard, I decided to write a new  document covering basic and advanced issues which will remain important over the next few years. More dynamic and some advanced content will be still found further on in the second HOWTO (<a class="ulink" href="http://www.bieringer.de/linux/IPv6/" target="_top">IPv6 &amp; Linux - HowTo</a>).</p></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57432496"></a>7. Used terms, glossary and shortcuts</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57433136"></a>7.1. Network related</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Base 10</span></dt><dd><p>Well known decimal number system, represent any value with digit 0-9.</p></dd><dt><span class="term">Base 16</span></dt><dd><p>Usually used in lower and higher programming languages, known also as hexadecimal number system, represent any value with digit 0-9 and char A-F (case insensitive).</p></dd><dt><span class="term">Base 85</span></dt><dd><p>Representation of a value with 85 different digits/chars, this can lead to shorter strings but never seen in the wild.</p></dd><dt><span class="term">Bit</span></dt><dd><p>Smallest storage unit, on/true (1) or off/false (0)</p></dd><dt><span class="term">Byte</span></dt><dd><p>Mostly a collection of 8 (but not really a must - see older computer systems) bits</p></dd><dt><span class="term">Device</span></dt><dd><p>Here, hardware of network connection, see also NIC</p></dd><dt><span class="term">Dual homed host</span></dt><dd><p>A dual homed host is a node with two network (physical or virtual) interfaces on two different links, but does not forward any packets between the interfaces.</p></dd><dt><span class="term">Host</span></dt><dd><p>Generally a single homed host on a link. Normally it has only one active network interface, e.g. Ethernet or (not and) PPP.</p></dd><dt><span class="term">Interface</span></dt><dd><p>Mostly same as &#8221;device&#8221;, see also NIC</p></dd><dt><span class="term">IP Header</span></dt><dd><p>Header of an IP packet (each network packet has a header, kind of is depending on network layer)</p></dd><dt><span class="term">Link</span></dt><dd><p>A link is a layer 2 network packet transport medium, examples are Ethernet, Token Ring, PPP, SLIP, ATM, ISDN, Frame Relay,...</p></dd><dt><span class="term">Node</span></dt><dd><p>A node is a host or a router.</p></dd><dt><span class="term">Octet</span></dt><dd><p>A collection of 8 real bits, today also similar to &#8221;byte&#8221;.</p></dd><dt><span class="term">Port</span></dt><dd><p>Information for the TCP/UDP dispatcher (layer 4) to transport information to upper layers</p></dd><dt><span class="term">Protocol</span></dt><dd><p>Each network layer contains mostly a protocol field to make life easier on dispatching transported information to upper layer, seen in layer 2 (MAC) and 3 (IP)</p></dd><dt><span class="term">Router</span></dt><dd><p>A router is a node with two or more network (physical or virtual) interfaces, capable of forwarding packets between the interfaces.</p></dd><dt><span class="term">Socket</span></dt><dd><p>An IP socket is defined by source and destination IP addresses and Ports and (binding) </p></dd><dt><span class="term">Stack</span></dt><dd><p>Network related a collection of layers</p></dd><dt><span class="term">Subnetmask</span></dt><dd><p>IP networks uses bit masks to separate local networks from remote ones</p></dd><dt><span class="term">Tunnel</span></dt><dd><p>A tunnel is typically a point-to-point connection over which packets are exchanged which carry the data of another protocol, e.g. an IPv6-in-IPv4 tunnel.</p></dd></dl></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="Glossar"></a>7.1.1. Shortcuts</h4></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">ACL</span></dt><dd><p>Access Control List</p></dd><dt><span class="term">API</span></dt><dd><p>Application Programming Interface</p></dd><dt><span class="term">ASIC</span></dt><dd><p>Application Specified Integrated Circuit</p></dd><dt><span class="term">BSD</span></dt><dd><p>Berkeley Software Distribution</p></dd><dt><span class="term">CAN-Bus</span></dt><dd><p>Controller Area Network Bus (physical bus system)</p></dd><dt><span class="term">ISP</span></dt><dd><p>Internet Service Provider</p></dd><dt><span class="term">KAME</span></dt><dd><p>Project - a joint effort of six companies in Japan to provide a free IPv6 and IPsec (for both IPv4 and IPv6) stack for BSD variants to the world <a class="ulink" href="http://www.kame.net/" target="_top">www.kame.net</a></p></dd><dt><span class="term">LIR</span></dt><dd><p>Local Internet Registry</p></dd><dt><span class="term">NIC</span></dt><dd><p>Network Interface Card</p></dd><dt><span class="term">RFC</span></dt><dd><p>Request For Comments - set of technical and organizational notes about the Internet</p></dd><dt><span class="term">USAGI</span></dt><dd><p>UniverSAl playGround for Ipv6 Project - works to deliver the production quality IPv6 protocol stack for the Linux system.</p></dd></dl></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57462176"></a>7.2. Document related</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57462816"></a>7.2.1. Long code line wrapping signal char</h4></div></div></div><p>The special character &#8221;¬&#8221; is used for signaling that this code line is wrapped for better viewing in PDF and PS files.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57463968"></a>7.2.2. Placeholders</h4></div></div></div><p>In generic examples you will sometimes find the following:</p><pre class="screen">
&lt;myipaddress&gt;
</pre><p>For real use on your system command line or in scripts this has to be replaced with relevant content (removing the &lt; and &gt; of course), the result would be e.g.</p><pre class="screen">
1.2.3.4
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57466560"></a>7.2.3. Commands in the shell</h4></div></div></div><p>Commands executable as non-root user begin with $, e.g.</p><pre class="screen">
$ whoami
</pre><p>Commands executable as root user begin with #, e.g.</p><pre class="screen">
# whoami
</pre></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57468704"></a>8. Requirements for using this HOWTO</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57469344"></a>8.1. Personal prerequisites</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57469984"></a>8.1.1. Experience with Unix tools</h4></div></div></div><p>You should be familiar with the major Unix tools e.g. <span class="emphasis"><em>grep</em></span>, <span class="emphasis"><em>awk</em></span>, <span class="emphasis"><em>find</em></span>, ... , and know about their most commonly used command-line options.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57472112"></a>8.1.2. Experience with networking theory</h4></div></div></div><p>You should know about layers, protocols, addresses, cables, plugs, etc. If you are new to this field, here is one good starting point for you: <a class="ulink" href="http://www.rigacci.org/docs/biblio/online/intro_to_networking/book1.htm" target="_top">http://www.rigacci.org/docs/biblio/online/intro_to_networking/book1.htm</a></p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57473712"></a>8.1.3. Experience with IPv4 configuration</h4></div></div></div><p>You should definitely have some experience in IPv4 configuration, otherwise it will be hard for you to understand what is really going on.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57474768"></a>8.1.4. Experience with the Domain Name System (DNS)</h4></div></div></div><p>Also you should understand what the Domain Name System (DNS) is, what it provides and how to use it.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57475776"></a>8.1.5. Experience with network debugging strategies</h4></div></div></div><p>You should at least understand how to use <span class="emphasis"><em>tcpdump</em></span> and what<span class="emphasis"><em> </em></span>it can show you. Otherwise, network debugging will very difficult for you.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57477536"></a>8.2. Linux operating system compatible hardware</h3></div></div></div><p>Surely you wish to experiment with real hardware, and not only read this HOWTO to fall asleep here and there. ;-7)</p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chapter-basics"></a>Chapter 2. Basics</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#idp57479568">1. What is IPv6?</a></span></dt><dt><span class="sect1"><a href="#basic-history-IPv6-Linux">2. History of IPv6 in Linux</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57485808">2.1. Beginning</a></span></dt><dt><span class="sect2"><a href="#idp57487776">2.2. In between</a></span></dt><dt><span class="sect2"><a href="#idp57493568">2.3. Current</a></span></dt><dt><span class="sect2"><a href="#idp57495248">2.4. Future</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57496864">3. What do IPv6 addresses look like?</a></span></dt><dt><span class="sect1"><a href="#idp57510016">4. FAQ (Basics)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57510656">4.1. Why is the name IPv6 and not IPv5 as successor for IPv4?</a></span></dt><dt><span class="sect2"><a href="#idp57513680">4.2. IPv6 addresses: why such a high number of bits?</a></span></dt><dt><span class="sect2"><a href="#idp57518384">4.3. IPv6 addresses: why so small a number of bits on a new design?</a></span></dt></dl></dd></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57479568"></a>1. What is IPv6?</h2></div></div></div><p>IPv6 is a new layer 3 protocol which will supersede IPv4 (also known as IP). IPv4 was designed a long time ago (<a class="ulink" href="http://www.faqs.org/rfcs/rfc760.html" target="_top">RFC 760 / Internet Protocol</a> from January 1980) and since its inception, there have been many requests for more addresses and enhanced capabilities. Latest RFC is <a class="ulink" href="http://www.faqs.org/rfcs/rfc2460.html" target="_top">RFC 2460 / Internet Protocol Version 6 Specification</a>. Major changes in IPv6 are the redesign of the header, including the increase of address size from 32 bits to 128 bits. Because layer 3 is responsible for end-to-end packet transport using packet routing based on addresses, it must include the new IPv6 addresses (source and destination), like IPv4.</p><p>For more information about the IPv6 history take a look at older IPv6 related RFCs listed e.g. at <a class="ulink" href="http://www.switch.ch/lan/ipv6/references.html" target="_top">SWITCH IPv6 Pilot / References</a>.</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="basic-history-IPv6-Linux"></a>2. History of IPv6 in Linux</h2></div></div></div><p>The years 1992, 1993 and 1994 of the IPv6 History (in general) are covered by the following document: <a class="ulink" href="http://www.laynetworks.com/IPv6.htm#CH3" target="_top">IPv6 or IPng (IP next generation)</a>.</p><p>To-do: better time-line, more content...</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57485808"></a>2.1. Beginning</h3></div></div></div><p>The first IPv6 related network code was added to the Linux kernel 2.1.8 in November 1996 by Pedro Roque. It was based on the BSD API:</p><pre class="screen">
diff -u --recursive --new-file v2.1.7/linux/include/linux/in6.h
¬ linux/include/linux/in6.h 
--- v2.1.7/linux/include/linux/in6.h Thu Jan 1 02:00:00 1970 
+++ linux/include/linux/in6.h Sun Nov 3 11:04:42 1996 
@@ -0,0 +1,99 @@ 
+/* 
+ * Types and definitions for AF_INET6 
+ * Linux INET6 implementation 
+ * + * Authors: 
+ * Pedro Roque &lt;******&gt; 
+ * 
+ * Source: 
+ * IPv6 Program Interfaces for BSD Systems 
+ * &lt;draft-ietf-ipngwg-bsd-api-05.txt&gt;
</pre><p>The shown lines were copied from patch-2.1.8 (e-mail address was blanked on copy&amp;paste).</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57487776"></a>2.2. In between</h3></div></div></div><p>Because of lack of manpower, the IPv6 implementation in the kernel was unable to follow the discussed drafts or newly released RFCs. In October 2000, a project was started in Japan, called <a class="ulink" href="http://www.linux-ipv6.org/" target="_top">USAGI</a>, whose aim was to implement all missing, or outdated IPv6 support in Linux. It tracks the current IPv6 implementation in FreeBSD made by the <a class="ulink" href="http://www.kame.net/" target="_top">KAME project</a>. From time to time they create snapshots against current vanilla Linux kernel sources.</p><p>Until kernel development series 2.5.x was started, the <a class="ulink" href="http://www.linux-ipv6.org/" target="_top">USAGI</a> patch was so big, that Linux networking maintainers were unable to include it completly in the production source of the Linux kernel 2.4.x series.</p><p>During kernel development series 2.5.x, <a class="ulink" href="http://www.linux-ipv6.org/" target="_top">USAGI</a> tried to insert all of their current extensions into this.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57493568"></a>2.3. Current</h3></div></div></div><p>Many of the long-term developed IPv6 related patches by <a class="ulink" href="http://www.linux-ipv6.org/" target="_top">USAGI</a> and others are integrated into vanilla kernel series 2.6.x.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57495248"></a>2.4. Future</h3></div></div></div><p><a class="ulink" href="http://www.linux-ipv6.org/" target="_top">USAGI</a> and others are still working on implementation of newer features like mobililty and others. From time to time, new extension patches are released and also integration into vanilla kernel series is made.</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57496864"></a>3. What do IPv6 addresses look like?</h2></div></div></div><p>As previously mentioned, IPv6 addresses are 128 bits long. This number of bits generates very high decimal numbers with up to 39 digits: </p><pre class="screen">
2^128-1: 340282366920938463463374607431768211455
</pre><p>Such numbers are not really addresses that can be memorized. Also the IPv6 address schema is bitwise oriented (just like IPv4, but that's not often recognized). Therefore a better notation of such big numbers is hexadecimal. In hexadecimal, 4 bits (also known as &#8221;nibble&#8221;) are represented by a digit or character from 0-9 and a-f (10-15). This format reduces the length of the IPv6 address to 32 characters.</p><pre class="screen">
2^128-1: 0xffffffffffffffffffffffffffffffff
</pre><p>This representation is still not very convenient (possible mix-up or loss of single hexadecimal digits), so the designers of IPv6 chose a hexadecimal format with a colon as separator after each block of 16 bits. In addition, the leading "0x" (a signifier for hexadecimal values used in programming languages) is removed:</p><pre class="screen">
2^128-1: ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff
</pre><p>A usable address (see address types later) is e.g.: </p><pre class="screen">
2001:0db8:0100:f101:0210:a4ff:fee3:9566
</pre><p>For simplifications, leading zeros of each 16 bit block can be omitted: </p><pre class="screen">
2001:0db8:0100:f101:0210:a4ff:fee3:9566  -&gt; 
¬ 2001:db8:100:f101:210:a4ff:fee3:9566
</pre><p>One sequence of 16 bit blocks containing only zeroes can be replaced with &#8220;::&#8220;. But not more than one at a time, otherwise it is no longer a unique representation. </p><pre class="screen">
2001:0db8:100:f101:0:0:0:1  -&gt;  2001:db8:100:f101::1
</pre><p>The biggest reduction is seen by the IPv6 localhost address: </p><pre class="screen">
0000:0000:0000:0000:0000:0000:0000:0001  -&gt;  ::1
</pre><p>There is also a so-called <span class="emphasis"><em>compact</em></span> (base85 coded) representation defined in <a class="ulink" href="http://www.faqs.org/rfcs/rfc1924.html" target="_top">RFC 1924 / A Compact Representation of IPv6 Addresses</a> (published on 1. April 1996), never seen in the wild, probably an April fool's joke, but here is an example: </p><pre class="screen">
# ipv6calc --addr_to_base85 2001:0db8:0100:f101:0210:a4ff:fee3:9566 
9R}vSQZ1W=9A_Q74Lz&amp;R
</pre><div class="blockquote"><blockquote class="blockquote"><p>Info: <span class="emphasis"><em>ipv6calc</em></span> is an IPv6 address format calculator and converter program and can be found here: <a class="ulink" href="http://www.deepspace6.net/projects/ipv6calc.html" target="_top">ipv6calc homepage</a> (<a class="ulink" href="http://mirrors.bieringer.de/www.deepspace6.net/projects/ipv6calc.html" target="_top">Mirror</a>)</p></blockquote></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57510016"></a>4. FAQ (Basics)</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57510656"></a>4.1. Why is the name IPv6 and not IPv5 as successor for IPv4?</h3></div></div></div><p>On any IP header, the first 4 bits are reserved for protocol version. So theoretically a protocol number between 0 and 15 is possible:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>4: is already used for IPv4</p></li><li class="listitem"><p>5: is reserved for the Stream Protocol (STP, <a class="ulink" href="http://www.faqs.org/rfcs/rfc1819.html" target="_top">RFC 1819 / Internet Stream Protocol Version 2</a>) (which never really made it to the public)</p></li></ul></div><p>The next free number was 6. Hence IPv6 was born!</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57513680"></a>4.2. IPv6 addresses: why such a high number of bits?</h3></div></div></div><p>During the design of IPv4, people thought that 32 bits were enough for the world. Looking back into the past, 32 bits were enough until now and will perhaps be enough for another few years. However, 32 bits are not enough to provide each network device with a global address in the future. Think about mobile phones, cars (including electronic devices on its CAN-bus), toasters, refrigerators, light switches, and so on...</p><p>So designers have chosen 128 bits, 4 times more in length than in IPv4 today.</p><p>The usable size is smaller than it may appear however. This is because in the currently defined address schema, 64 bits are used for interface identifiers. The other 64 bits are used for routing. Assuming the current strict levels of aggregation (/48, /32, ...), it is still possible to &#8221;run out&#8221; of space, but hopefully not in the near future.</p><p>See also for more information <a class="ulink" href="http://www.faqs.org/rfcs/rfc1715.html" target="_top">RFC 1715 / The H Ratio for Address Assignment Efficiency</a> and <a class="ulink" href="http://www.faqs.org/rfcs/rfc3194.html" target="_top">RFC 3194 / The Host-Density Ratio for Address Assignment Efficiency</a>.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57518384"></a>4.3. IPv6 addresses: why so small a number of bits on a new design?</h3></div></div></div><p>While, there are (possibly) some people (only know about Jim Fleming...) on the Internet who are thinking about IPv8 and IPv16, their design is far away from acceptance and implementation. In the meantime 128 bits was the best choice regarding header overhead and data transport. Consider the minimum Maximum Transfer Unit (MTU) in IPv4 (576 octets) and in IPv6 (1280 octets), the header length in IPv4 is 20 octets (minimum, can increase to 60 octets with IPv4 options) and in IPv6 is 40 octets (fixed). This is 3.4 % of minimum MTU in IPv4 and 3.1 % of minimum MTU in IPv6. This means the header overhead is almost equal. More bits for addresses would require bigger headers and therefore more overhead. Also, consider the maximum MTU on normal links (like Ethernet today): it's 1500 octets (in special cases: 9k octets using Jumbo frames). Ultimately, it wouldn't be a proper design if 10 % or 20 % of transported data in a Layer-3 packet were used for addresses and not for payload.</p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chapter-addresstypes"></a>Chapter 3. Address types</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#idp57524672">1. Addresses without a special prefix</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57525312">1.1. Localhost address</a></span></dt><dt><span class="sect2"><a href="#idp57528304">1.2. Unspecified address</a></span></dt><dt><span class="sect2"><a href="#idp57531440">1.3. IPv6 address with embedded IPv4 address</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57539552">2. Network part, also known as prefix</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57541584">2.1. Link local address type</a></span></dt><dt><span class="sect2"><a href="#idp57545984">2.2. Site local address type</a></span></dt><dt><span class="sect2"><a href="#idp57551312">2.3. Unique Local IPv6 Unicast Addresses</a></span></dt><dt><span class="sect2"><a href="#idp57556176">2.4. Global address type "(Aggregatable) global unicast"</a></span></dt><dt><span class="sect2"><a href="#idp57576688">2.5. Multicast addresses</a></span></dt><dt><span class="sect2"><a href="#idp57589344">2.6. Anycast addresses</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57593792">3. Address types (host part)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57595312">3.1. Automatically computed (also known as stateless)</a></span></dt><dt><span class="sect2"><a href="#idp57603072">3.2. Manually set</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57605616">4. Prefix lengths for routing</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57608784">4.1. Prefix lengths (also known as "netmasks")</a></span></dt><dt><span class="sect2"><a href="#idp57614464">4.2. Matching a route</a></span></dt></dl></dd></dl></div><p>Like IPv4, IPv6 addresses can be split into network and host parts using subnet masks.</p><p>IPv4 has shown that sometimes it would be nice, if more than one IP address can be assigned to an interface, each for a different purpose (aliases, multi-cast). To remain extensible in the future, IPv6 is going further and allows more than one IPv6 address to be assigned to an interface. There is currently no limit defined by an RFC, only in the implementation of the IPv6 stack (to prevent DoS attacks).</p><p>Using this large number of bits for addresses, IPv6 defines address types based on some leading bits, which are hopefully never going to be broken in the future (unlike IPv4 today and the history of class A, B, and C).
</p><p>Also the number of bits are separated into a network part (upper 64 bits) and a host part (lower 64 bits), to facilitate auto-configuration.</p><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57524672"></a>1. Addresses without a special prefix</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57525312"></a>1.1. Localhost address</h3></div></div></div><p>This is a special address for the loopback interface, similiar to IPv4 with its &#8221;127.0.0.1&#8221;. With IPv6, the localhost address is:</p><pre class="screen">
0000:0000:0000:0000:0000:0000:0000:0001 
</pre><p>or compressed:</p><pre class="screen">
::1
</pre><p>Packets with this address as source or destination should never leave the sending host.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57528304"></a>1.2. Unspecified address</h3></div></div></div><p>This is a special address like &#8221;any&#8221; or &#8221;0.0.0.0&#8221; in IPv4 . For IPv6 it's:</p><pre class="screen">
0000:0000:0000:0000:0000:0000:0000:0000 
</pre><p>or:</p><pre class="screen">
::
</pre><p>These addresses are mostly used/seen in socket binding (to any IPv6 address) or routing tables.</p><p>Note: the unspecified address cannot be used as destination address.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57531440"></a>1.3. IPv6 address with embedded IPv4 address</h3></div></div></div><p>There are two addresses which contain an IPv4 address.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57532336"></a>1.3.1. IPv4-mapped IPv6 address</h4></div></div></div><p>IPv4-only IPv6-compatible addresses are sometimes used/shown for sockets created by an IPv6-enabled daemon, but only binding to an IPv4 address.</p><p>These addresses are defined with a special prefix of length 96 (a.b.c.d is the IPv4 address):</p><pre class="screen">
0:0:0:0:0:ffff:a.b.c.d/96
</pre><p>or in compressed format</p><pre class="screen">
::ffff:a.b.c.d/96
</pre><p>For example, the IPv4 address 1.2.3.4 looks like this:</p><pre class="screen">
::ffff:1.2.3.4
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57536000"></a>1.3.2. IPv4-compatible IPv6 address</h4></div></div></div><p>IPv4-compatible IPv6 addresses are used for automatic tunneling (<a class="ulink" href="http://www.faqs.org/rfcs/rfc2893.html" target="_top">RFC 2893 / Transition Mechanisms for IPv6 Hosts and Routers</a>), which is being replaced by <a class="link" href="#tunneling-6to4." title="1.3. 6to4-Tunneling">6to4 tunneling</a>.</p><pre class="screen">
0:0:0:0:0:0:a.b.c.d/96
</pre><p>or in compressed format</p><pre class="screen">
::a.b.c.d/96
</pre></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57539552"></a>2. Network part, also known as prefix</h2></div></div></div><p>Designers defined some address types and left a lot of scope for future definitions as currently unknown requirements arise. <a class="ulink" href="http://www.faqs.org/rfcs/rfc4291.html" target="_top">RFC 4291 / IP Version 6 Addressing Architecture</a> defines the current addressing scheme.
</p><p>Now lets take a look at the different types of prefixes (and therefore address types):</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57541584"></a>2.1. Link local address type</h3></div></div></div><p>These are special addresses which will only be valid on a link of an interface. Using this address as destination the packet would never pass through a router. It's used for link communications such as:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>anyone else here on this link?</p></li><li class="listitem"><p>anyone here with a special address (e.g. looking for a router)?</p></li></ul></div><p>They begin with ( where <span class="emphasis"><em>&#8221;x&#8221;</em></span> is any hex character, normally <span class="emphasis"><em>&#8221;0</em></span>&#8221;)</p><pre class="screen">
fe8x:  &lt;- currently the only one in use
fe9x:
feax:
febx:
</pre><p>An address with this prefix is found on each IPv6-enabled interface after stateless auto-configuration (which is normally always the case).</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57545984"></a>2.2. Site local address type</h3></div></div></div><p>These are addresses similar to the <a class="ulink" href="http://www.faqs.org/rfcs/rfc1918.html" target="_top">RFC 1918 / Address Allocation for Private Internets</a> in IPv4 today, with the added advantage that everyone who use this address type has the capability to use the given 16 bits for a maximum number of 65536 subnets. Comparable with the 10.0.0.0/8 in IPv4 today.</p><p>Another advantage: because it's possible to assign more than one address to an interface with IPv6, you can also assign such a site local address in addition to a global one.</p><p>It begins with: </p><pre class="screen">
fecx:  &lt;- most commonly used
fedx:
feex:
fefx:

</pre><p>(where<span class="emphasis"><em> &#8221;x&#8221;</em></span> is any hex character, normally <span class="emphasis"><em>&#8221;0</em></span>&#8221;) </p><p>This address type is now deprecated <a class="ulink" href="http://www.faqs.org/rfcs/rfc3879.html" target="_top">RFC 3879 / Deprecating Site Local Addresses</a>, but for a test in a lab, such addresses are still a good choice in my humble opinion.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57551312"></a>2.3. Unique Local IPv6 Unicast Addresses</h3></div></div></div><p>Because the original defined site local addresses are not unique, this can lead to major problems, if two former independend networks would be connected later (overlapping of subnets). This and other issues lead to a new address type named <a class="ulink" href="http://www.faqs.org/rfcs/rfc4193.html" target="_top">RFC 4193 / Unique Local IPv6 Unicast Addresses</a>. 
</p><p>It begins with: </p><pre class="screen">
fcxx:
fdxx:  &lt;- currently the only one in use
</pre><p>A part of the prefix (40 bits) are generated using a pseudo-random algorithm and it's improbable, that two generated ones are equal.</p><p>Example for a prefix (generated using a web-based tool: <a class="ulink" href="http://www.goebel-consult.de/ipv6/createLULA" target="_top">Goebel Consult / createLULA</a>):</p><pre class="screen">
fd0f:8b72:ac90::/48
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57556176"></a>2.4. Global address type "(Aggregatable) global unicast"</h3></div></div></div><p>Today, there is one global address type defined (the first design, called "provider based," was thrown away some years ago <a class="ulink" href="http://www.faqs.org/rfcs/rfc1884.html" target="_top">RFC 1884 / IP Version 6 Addressing Architecture [obsolete]</a>, you will find some remains in older Linux kernel sources).</p><p>It begins with (<span class="emphasis"><em>x</em></span> are hex characters)</p><pre class="screen">
2xxx: 
3xxx:
</pre><p>Note: the prefix &#8221;aggregatable&#8221; is thrown away in current drafts.
There are some further subtypes defined, see below:</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57559776"></a>2.4.1. 6bone test addresses</h4></div></div></div><p>These were the first global addresses which were defined and in use. They all start with </p><pre class="screen">
3ffe:
</pre><p>Example:</p><pre class="screen">
3ffe:ffff:100:f102::1
</pre><p>A special 6bone test address which will never be globally unique begins with </p><pre class="screen">
3ffe:ffff: 
</pre><p>and is mostly shown in older examples. The reason for this is, if real addresses are are shown, it's possible for someone to do a copy &amp; paste to their configuration files, thus inadvertently causing duplicates on a globally unique address. This would cause serious problems for the original host (e.g. getting answer packets for request that were never sent).
Because IPv6 is now in production, this prefix is no longer be delegated and is removed from routing after 6.6.2006 (see <a class="ulink" href="http://www.faqs.org/rfcs/rfc3701.html" target="_top">RFC 3701 / 6bone Phaseout</a> for more).</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57564768"></a>2.4.2. 6to4 addresses</h4></div></div></div><p>These addresses, designed for a special tunneling mechanism [<a class="ulink" href="http://www.faqs.org/rfcs/rfc3056.html" target="_top">RFC 3056 / Connection of IPv6 Domains via IPv4 Clouds</a> and <a class="ulink" href="http://www.faqs.org/rfcs/rfc2893.html" target="_top">RFC 2893 / Transition Mechanisms for IPv6 Hosts and Routers</a>], encode a given IPv4 address and a possible subnet and begin with </p><pre class="screen">
2002:
</pre><p>For example, representing 192.168.1.1/5:</p><pre class="screen">
2002:c0a8:0101:5::1
</pre><p>A small shell command line can help you generating such address out of a given IPv4 one:</p><pre class="screen">
ipv4="1.2.3.4"; sla="5"; printf "2002:%02x%02x:%02x%02x:%04x::1" `echo $ipv4
¬ | tr "." " "` $sla
</pre><p>See also <a class="link" href="#tunneling-6to4." title="1.3. 6to4-Tunneling">tunneling using 6to4</a> and <a class="link" href="#information-joinipv6-6to4-tunneling" title="3.1.4. 6to4">information about 6to4 relay routers</a>.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57571072"></a>2.4.3. Assigned by provider for hierarchical routing</h4></div></div></div><p>These addresses are delegated to Internet service providers (ISP) and begin currently with</p><pre class="screen">
2001:
</pre><p>Prefixes to major (backbone owning) ISPs (also known as LIRs) are delegated by <a class="link" href="#information-majorregionregistries" title="3.1.2. Major regional registries">local registries</a> and currently have a prefix with length 32 assigned.</p><p>Any ISP customer can get a prefix with length 48.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57573936"></a>2.4.4. Addresses reserved for examples and documentation</h4></div></div></div><p>Currently, two address ranges are reserved for examples and documentation <a class="ulink" href="http://www.faqs.org/rfcs/rfc3849.html" target="_top">RFC 3849 / IPv6 Address Prefix Reserved for Documentation</a>:</p><pre class="screen">
3fff:ffff::/32
2001:0DB8::/32   EXAMPLENET-WF
</pre><p>These address ranges should be filtered based on source addresses and should NOT be routed on border routers to the internet, if possible.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57576688"></a>2.5. Multicast addresses</h3></div></div></div><p>Multicast addresses are used for related services. </p><p>They alway start with (<span class="emphasis"><em>xx</em></span> is the scope value)</p><pre class="screen">
ffxy:
</pre><p>They are split into scopes and types:</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57579104"></a>2.5.1. Multicast scopes</h4></div></div></div><p>Multicast scope is a parameter to specify the maximum distance a multicast packet can travel from the sending entity.</p><p>Currently, the following regions (scopes) are defined:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ffx1: node-local, packets never leave the node.</p></li><li class="listitem"><p>ffx2: link-local, packets are never forwarded by routers, so they never leave the specified link.</p></li><li class="listitem"><p>ffx5: site-local, packets never leave the site.</p></li><li class="listitem"><p>ffx8: organization-local, packets never leave the organization (not so easy to implement, must be covered by routing protocol).</p></li><li class="listitem"><p>ffxe: global scope.</p></li><li class="listitem"><p>others are reserved</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57583216"></a>2.5.2. Multicast types</h4></div></div></div><p>There are many types already defined/reserved (see <a class="ulink" href="http://www.faqs.org/rfcs/rfc4291.html" target="_top">RFC 4291 / IP Version 6 Addressing Architecture</a> for details). Some examples are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>All Nodes Address: ID = 1h, addresses all hosts on the local node (ff01:0:0:0:0:0:0:1) or the connected link (ff02:0:0:0:0:0:0:1).</p></li><li class="listitem"><p>All Routers Address: ID = 2h, addresses all routers on the local node (ff01:0:0:0:0:0:0:2), on the connected link (ff02:0:0:0:0:0:0:2), or on the local site (ff05:0:0:0:0:0:0:2)</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57586096"></a>2.5.3. Solicited node link-local multicast address</h4></div></div></div><p>Special multicast address used as destination address in neighborhood discovery, because unlike in IPv4, ARP no longer exists in IPv6.</p><p>An example of this address looks like</p><pre class="screen">
ff02::1:ff00:1234
</pre><p>Used prefix shows that this is a link-local multicast address. The suffix is generated from the destination address. In this example, a packet should be sent to address &#8220;fe80::1234&#8221;, but the network stack doesn't know the current layer 2 MAC address. It replaces the upper 104 bits with &#8220;ff02:0:0:0:0:1:ff00::/104&#8221; and leaves the lower 24 bits untouched. This address is now used `on-link' to find the corresponding node which has to send a reply containing its layer 2 MAC address.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57589344"></a>2.6. Anycast addresses</h3></div></div></div><p>Anycast addresses are special addresses and are used to cover things like nearest DNS server, nearest DHCP server, or similar dynamic groups. Addresses are taken out of the unicast address space (aggregatable global or site-local at the moment). The anycast mechanism (client view) will be handled by dynamic routing protocols.</p><p>Note: Anycast addresses cannot be used as source addresses, they are only used as destination addresses.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57591088"></a>2.6.1. Subnet-router anycast address</h4></div></div></div><p>A simple example for an anycast address is the subnet-router anycast address. Assuming that a node has the following global assigned IPv6 address:</p><pre class="screen">
2001:db8:100:f101:210:a4ff:fee3:9566/64  &lt;- Node's address
</pre><p>The subnet-router anycast address will be created blanking the suffix (least significant 64 bits) completely:</p><pre class="screen">
2001:db8:100:f101::/64  &lt;- subnet-router anycast address
</pre></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57593792"></a>3. Address types (host part)</h2></div></div></div><p>For auto-configuration and mobility issues, it was decided to use the lower 64 bits as the host part of the address in most of the current address types. Therefore each single subnet can hold a large amount of addresses.</p><p>This host part can be inspected differently: </p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57595312"></a>3.1. Automatically computed (also known as stateless)</h3></div></div></div><p>With auto-configuration, the host part of the address is computed by converting the MAC address of an interface (if available), with the EUI-64 method, to a unique IPv6 address. If no MAC address is available for this device (happens e.g. on virtual devices), something else (like the IPv4 address or the MAC address of a physical interface) is used instead.</p><p>E.g. a NIC has following MAC address (48 bit):</p><pre class="screen">
00:10:a4:01:23:45
</pre><p>This would be expanded according to the<a class="ulink" href="http://standards.ieee.org/regauth/oui/tutorials/EUI64.html" target="_top">IEEE-Tutorial EUI-64</a> design for EUI-48 identifiers to the 64 bit interface identifier:</p><pre class="screen">
0210:a4ff:fe01:2345
</pre><p>With a given prefix, the result is the IPv6 address shown in example above:</p><pre class="screen">
2001:0db8:0100:f101:0210:a4ff:fe01:2345
</pre><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57599936"></a>3.1.1. Privacy problem with automatically computed addresses and a solution</h4></div></div></div><p>Because the "automatically computed" host part is globally unique (except when a vendor of a NIC uses the same MAC address on more than one NIC), client tracking is possible on the host when not using a proxy of any kind.</p><p>This is a known problem, and a solution was defined: privacy extension, defined in <a class="ulink" href="http://www.faqs.org/rfcs/rfc3041.html" target="_top">RFC 3041 / Privacy Extensions for Stateless Address Autoconfiguration in IPv6</a> (there is also already a newer draft available: <a class="ulink" href="http://www.ietf.org/ids.by.wg/ipv6.html" target="_top">draft-ietf-ipv6-privacy-addrs-v2-*</a>). Using a random and a static value a new suffix is generated from time to time. Note: this is only reasonable for outgoing client connections and isn't really useful for well-known servers.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57603072"></a>3.2. Manually set</h3></div></div></div><p>For servers, it's probably easier to remember simpler addresses, this can also be accommodated. It is possible to assign an additional IPv6 address to an interface, e.g. </p><pre class="screen">
2001:0db8:100:f101::1
</pre><p>For manual suffixes like &#8221;::1&#8221; shown in the above example, it's required that the 7th most significant bit is set to 0 (the universal/local bit of the automatically generated identifier). Also some other (otherwise unchosen ) bit combinations are reserved for anycast addresses, too.</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57605616"></a>4. Prefix lengths for routing</h2></div></div></div><p>In the early design phase it was planned to use a fully hierarchical routing approach to reduce the size of the routing tables maximally. The reasons behind this approach were the number of current IPv4 routing entries in core routers (&gt; 400 thousand in 2013), reducing the need of memory in hardware routers (ASIC &#8221;Application Specified Integrated Circuit&#8221; driven) to hold the routing table and increase speed (fewer entries hopefully result in faster lookups).
</p><p>Todays view is that routing will be mostly hierarchically designed for networks with only one service provider. With more than one ISP connections, this is not possible, and subject to an issue named multi-homing (infos on multi-homing: <a class="ulink" href="http://www.ietf.org/ids.by.wg/multi6.html" target="_top">drafts-ietf-multi6-*</a>,<a class="ulink" href="http://arneill-py.sacramento.ca.us/ipv6mh/" target="_top">IPv6 Multihoming Solutions</a>).</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57608784"></a>4.1. Prefix lengths (also known as "netmasks")</h3></div></div></div><p>Similar to IPv4, the routable network path for routing to take place. Because standard netmask notation for 128 bits doesn't look nice, designers employed the IPv4 Classless Inter Domain Routing (CIDR, <a class="ulink" href="http://www.faqs.org/rfcs/rfc1519.html" target="_top">RFC 1519 / Classless Inter-Domain Routing</a>) scheme, which specifies the number of bits of the IP address to be used for routing. It is also called the "slash" notation.</p><p>An example: </p><pre class="screen">
2001:0db8:100:1:2:3:4:5/48
</pre><p>This notation will be expanded:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Network: </p></li></ul></div><pre class="screen">
2001:0db8:0100:0000:0000:0000:0000:0000
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Netmask: </p></li></ul></div><pre class="screen">
ffff:ffff:ffff:0000:0000:0000:0000:0000
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57614464"></a>4.2. Matching a route</h3></div></div></div><p>Under normal circumstances (no QoS), a lookup in a routing table results in the route with the most significant number of address bits being selected. In other words, the route with the biggest prefix length matches first.</p><p>For example if a routing table shows following entries (list is not complete):</p><pre class="screen">
2001:0db8:100::/48     ::            U  1 0 0 sit1 
2000::/3               ::192.88.99.1 UG 1 0 0 tun6to4
</pre><p>Shown destination addresses of IPv6 packets will be routed through shown device</p><pre class="screen">
2001:0db8:100:1:2:3:4:5/48  -&gt;  routed through device sit1
2001:0db8:200:1:2:3:4:5/48  -&gt;  routed through device tun6to4
</pre></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chapter-systemcheck"></a>Chapter 4. IPv6-ready system check</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#systemcheck-kernel">1. IPv6-ready kernel</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57621504">1.1. Check for IPv6 support in the current running kernel</a></span></dt><dt><span class="sect2"><a href="#idp57624320">1.2. Try to load IPv6 module</a></span></dt><dt><span class="sect2"><a href="#idp57630736">1.3. Compile kernel with IPv6 capabilities</a></span></dt><dt><span class="sect2"><a href="#idp57641184">1.4. IPv6-ready network devices</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57649072">2. IPv6-ready network configuration tools</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57650144">2.1. net-tools package</a></span></dt><dt><span class="sect2"><a href="#idp57653408">2.2. iproute package</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57657408">3. IPv6-ready test/debug programs</a></span></dt><dd><dl><dt><span class="sect2"><a href="#program-ping6.">3.1. IPv6 ping</a></span></dt><dt><span class="sect2"><a href="#program-traceroute6.">3.2. IPv6 traceroute6</a></span></dt><dt><span class="sect2"><a href="#program-tracepath6.">3.3. IPv6 tracepath6</a></span></dt><dt><span class="sect2"><a href="#program-tcpdump">3.4. IPv6 tcpdump</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57703040">4. IPv6-ready programs</a></span></dt><dt><span class="sect1"><a href="#idp57706976">5. IPv6-ready client programs (selection)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57708976">5.1. Checking DNS for resolving IPv6 addresses</a></span></dt><dt><span class="sect2"><a href="#idp57711632">5.2. IPv6-ready telnet clients</a></span></dt><dt><span class="sect2"><a href="#idp57713984">5.3. IPv6-ready ssh clients</a></span></dt><dt><span class="sect2"><a href="#idp57720144">5.4. IPv6-ready web browsers</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57733712">6. IPv6-ready server programs</a></span></dt><dt><span class="sect1"><a href="#faq-ipv6-ready-system-check">7. FAQ (IPv6-ready system check)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57736416">7.1. Using tools</a></span></dt></dl></dd></dl></div><p>Before you can start using IPv6 on a Linux host, you have to test, whether your system is IPv6-ready. You may have to do some work to enable it first.</p><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="systemcheck-kernel"></a>1. IPv6-ready kernel</h2></div></div></div><p>Modern Linux distributions already contain IPv6-ready kernels, the IPv6 capability is generally compiled as a module, but it's possible that this module is not loaded automatically on startup.</p><p>Note: you shouldn't anymore use kernel series 2.2.x, because it's not IPv6-up-to-date anymore. Also the IPv6 support in series 2.4.x is no longer improved according to definitions in latest RFCs. It's recommend to use series 2.6.x now.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57621504"></a>1.1. Check for IPv6 support in the current running kernel</h3></div></div></div><p>To check, whether your current running kernel supports IPv6, take a look into your /proc-file-system. Following entry must exists: </p><pre class="screen">
/proc/net/if_inet6
</pre><p>A short automatical test looks like:</p><pre class="screen">
# test -f /proc/net/if_inet6 &amp;&amp; echo "Running kernel is IPv6 ready"
</pre><p>If this fails, it is quite likely, that the IPv6 module is not loaded.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57624320"></a>1.2. Try to load IPv6 module</h3></div></div></div><p>You can try to load the IPv6 module executing</p><pre class="screen">
# modprobe ipv6
</pre><p>If this is successful, this module should be listed, testable with following auto-magically line:</p><pre class="screen">
# lsmod |grep -w 'ipv6' &amp;&amp; echo "IPv6 module successfully loaded"
</pre><p>And the check shown above should now run successfully.</p><p>Note: unloading the module is currently not supported and can result, under some circumstances, in a kernel crash.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57627488"></a>1.2.1. Automatically loading of module</h4></div></div></div><p>Its possible to automatically load the IPv6 module on demand. You only have to add following line in the configuration file of the kernel module loader (normally /etc/modules.conf or /etc/conf.modules):</p><pre class="screen">
alias net-pf-10 ipv6  # automatically load IPv6 module on demand
</pre><p>It's also possible to disable automatically loading of the IPv6 module using following line</p><pre class="screen">
alias net-pf-10 off   # disable automatically load of IPv6 module on demand
</pre><p>Additional note: in kernels series 2.6.x, the module loader mechanism was changed. The new configuration file has to be named /etc/modprobe.conf instead of /etc/modules.conf.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57630736"></a>1.3. Compile kernel with IPv6 capabilities</h3></div></div></div><p>If both above shown results were negative and your kernel has no IP6 support, than you have the following options:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Update your distribution to a current one which supports IPv6 out-of-the-box (recommended for newbies)</p></li><li class="listitem"><p>Compile a new vanilla kernel (easy, if you know which options you needed)</p></li><li class="listitem"><p>Recompile kernel sources given by your Linux distribution (sometimes not so easy)</p></li><li class="listitem"><p>Compile a kernel with USAGI extensions</p></li></ul></div><p>If you decide to compile a kernel, you should have previous experience in kernel compiling and read the <a class="ulink" href="http://www.tldp.org/HOWTO/Kernel-HOWTO.html" target="_top">Linux Kernel HOWTO</a>.</p><p>A comparison between vanilla and USAGI extended kernels is available on <a class="ulink" href="http://www.bieringer.de/linux/IPv6/status/IPv6+Linux-status-kernel.html" target="_top">IPv6+Linux-Status-Kernel</a>.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57635856"></a>1.3.1. Compiling a vanilla kernel</h4></div></div></div><p>More detailed hints about compiling an IPv6-enabled kernel can be found e.g. on <a class="ulink" href="http://www.bieringer.de/linux/IPv6/IPv6-HOWTO/IPv6-HOWTO-2.html#kernel" target="_top">IPv6-HOWTO-2#kernel</a>.</p><p>Note: you should use whenever possible kernel series 2.6.x or above, because the IPv6 support in series 2.4.x only will no longer get backported features from 2.6.x and IPv6 support in series 2.2.x is hopeless outdated.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57638176"></a>1.3.2. Compiling a kernel with USAGI extensions</h4></div></div></div><p>Same as for vanilla kernel, only recommend for advanced users, which are already familiar with IPv6 and kernel compilation. See also <a class="ulink" href="http://www.linux-ipv6.org/faq.html" target="_top">USAGI project / FAQ</a> and <a class="ulink" href="http://www.deepspace6.net/docs/best_ipv6_support.html" target="_top">Obtaining the best IPv6 support with Linux (Article)</a> (<a class="ulink" href="http://mirrors.bieringer.de/www.deepspace6.net/docs/best_ipv6_support.html" target="_top">Mirror</a>).</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57641184"></a>1.4. IPv6-ready network devices</h3></div></div></div><p>Not all existing network devices have already (or ever) the capability to transport IPv6 packets. A current status can be found at <a class="ulink" href="http://www.bieringer.de/linux/IPv6/status/IPv6+Linux-status-kernel.html#transport" target="_top">IPv6+Linux-status-kernel.html#transport</a>.</p><p>A major issue is that because of the network layer structure of kernel implementation an IPv6 packet isn't really recognized by it's IP header number (6 instead of 4). It's recognized by the protocol number of the Layer 2 transport protocol. Therefore any transport protocol which doesn't use such protocol number cannot dispatch IPv6 packets. Note: the packet is still transported over the link, but on receivers side, the dispatching won't work (you can see this e.g. using tcpdump).</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57643824"></a>1.4.1. Currently known never &#8221;IPv6 capable links&#8221;</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Serial Line IP (SLIP, <a class="ulink" href="http://www.faqs.org/rfcs/rfc1055.html" target="_top">RFC 1055 / SLIP</a>), should be better called now to SLIPv4, device named: slX</p></li><li class="listitem"><p>Parallel Line IP (PLIP), same like SLIP, device names: plipX</p></li><li class="listitem"><p>ISDN with encapsulation <span class="emphasis"><em>rawip</em></span>, device names: isdnX</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57647152"></a>1.4.2. Currently known &#8221;not supported IPv6 capable links&#8221;</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ISDN with encapsulation <span class="emphasis"><em>syncppp</em></span>, device names: ipppX (design issue of the ipppd, will be merged into more general PPP layer in kernel series 2.5.x)</p></li></ul></div></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57649072"></a>2. IPv6-ready network configuration tools</h2></div></div></div><p>You wont get very far, if you are running an IPv6-ready kernel, but have no tools to configure IPv6. There are several packages in existence which can configure IPv6.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57650144"></a>2.1. net-tools package</h3></div></div></div><p>The net-tool package includes some tools like ifconfig and route, which helps you to configure IPv6 on an interface. Look at the output of ifconfig -? or route -?, if something is shown like IPv6 or inet6, then the tool is IPv6-ready.</p><p>Auto-magically check:</p><pre class="screen">
# /sbin/ifconfig -? 2&gt;&amp; 1|grep -qw 'inet6' &amp;&amp; echo "utility 'ifconfig' is
¬ IPv6-ready"
</pre><p>Same check can be done for route:</p><pre class="screen">
# /sbin/route -? 2&gt;&amp; 1|grep -qw 'inet6' &amp;&amp; echo "utility 'route' is IPv6-ready"
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57653408"></a>2.2. iproute package</h3></div></div></div><p>Alexey N. Kuznetsov (current a maintainer of the Linux networking code) created a tool-set which configures networks through the netlink device. Using this tool-set you have more functionality than net-tools provides, but its not very well documented and isn't for the faint of heart. </p><pre class="screen">
# /sbin/ip 2&gt;&amp;1 |grep -qw 'inet6' &amp;&amp; echo "utility 'ip' is IPv6-ready"
</pre><p>If the program /sbin/ip isn't found, then I strongly recommend you install the iproute package. </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>You can get it from your Linux distribution (if contained)</p></li><li class="listitem"><p>You're able to look for a proper RPM package at <a class="ulink" href="http://rpmfind.net/linux/rpm2html/search.php?query=iproute" target="_top">RPMfind/iproute</a> (sometimes rebuilding of a SRPMS package is recommended)</p></li></ul></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57657408"></a>3. IPv6-ready test/debug programs</h2></div></div></div><p>After you have prepared your system for IPv6, you now want to use IPv6 for network communications. First you should learn how to examine IPv6 packets with a sniffer program. This is strongly recommended because for debugging/troubleshooting issues this can aide in providing a diagnosis very quickly.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="program-ping6."></a>3.1. IPv6 ping</h3></div></div></div><p>This program is normally included in package <span class="emphasis"><em>iputils</em></span>. It is designed for simple transport tests sending ICMPv6 echo-request packets and wait for ICMPv6 echo-reply packets.</p><p>Usage</p><pre class="screen">
# ping6 &lt;hostwithipv6address&gt;
# ping6 &lt;ipv6address&gt;
# ping6 [-I &lt;device&gt;] &lt;link-local-ipv6address&gt;
</pre><p>Some implementation also support %&lt;device&gt; suffix instead of using -I &lt;device&gt;, e.g.</p><pre class="screen">
# ping6 &lt;link-local-ipv6address&gt;%&lt;device&gt;
</pre><p>Example</p><pre class="screen">
# ping6 -c 1 ::1 
PING ::1(::1) from ::1 : 56 data bytes 
64 bytes from ::1: icmp_seq=0 hops=64 time=292 usec

--- ::1 ping statistics --- 
1 packets transmitted, 1 packets received, 0% packet loss 
round-trip min/avg/max/mdev = 0.292/0.292/0.292/0.000 ms
</pre><p>Hint: ping6 needs raw access to socket and therefore root permissions. So if non-root users cannot use ping6 then there are two possible problems:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>ping6 is not in users path (probably, because ping6 is generally stored in /usr/sbin -&gt; add path (not really recommended)</p></li><li class="listitem"><p>ping6 doesn't execute properly, generally because of missing root permissions -&gt; chmod u+s /usr/sbin/ping6</p></li></ol></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57666176"></a>3.1.1. Specifying interface for IPv6 ping</h4></div></div></div><p>Using link-local addresses for an IPv6 ping, the kernel does not know through which (physically or virtual) device it must send the packet - each device has a link-local address. A try will result in following error message:</p><pre class="screen">
# ping6 fe80::212:34ff:fe12:3456 
connect: Invalid argument
</pre><p>In this case you have to specify the interface additionally like shown here:</p><pre class="screen">
# ping6 -I eth0 -c 1 fe80::2e0:18ff:fe90:9205
PING fe80::212:23ff:fe12:3456(fe80::212:23ff:fe12:3456) from
¬ fe80::212:34ff:fe12:3478 eth0: 56 data bytes 
64 bytes from fe80::212:23ff:fe12:3456: icmp_seq=0 hops=64 time=445 usec

--- fe80::2e0:18ff:fe90:9205 ping statistics --- 
1 packets transmitted, 1 packets received, 0% packet loss round-trip
¬ min/avg/max/mdev = 0.445/0.445/0.445/0.000 ms
</pre><p>Example for %&lt;device&gt; notation:</p><pre class="screen">
# ping6 -c 1 fe80::2e0:18ff:fe90:9205%eth0
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57670784"></a>3.1.2. Ping6 to multicast addresses</h4></div></div></div><p>An interesting mechanism to detect IPv6-active hosts on a link is to ping6 to the link-local all-node multicast address:</p><pre class="screen">
# ping6 -I eth0 ff02::1
PING ff02::1(ff02::1) from fe80:::2ab:cdff:feef:0123 eth0: 56 data bytes
64 bytes from ::1: icmp_seq=1 ttl=64 time=0.104 ms
64 bytes from fe80::212:34ff:fe12:3450: icmp_seq=1 ttl=64 time=0.549 ms (DUP!) 
</pre><p>Example for %&lt;device&gt; notation:</p><pre class="screen">
# ping6 ff02::1%eth0
</pre><p>Unlike in IPv4, where replies to a ping on the broadcast address can be disabled, in IPv6 currently this behavior cannot be disable except by local IPv6 firewalling.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="program-traceroute6."></a>3.2. IPv6 traceroute6</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57675040"></a>3.2.1. IPv6 traceroute6 (old)</h4></div></div></div><p>This older program is normally included in package <span class="emphasis"><em>iputils</em></span>. It's a program similar to IPv4 traceroute. Below you will see an example:</p><pre class="screen">
# traceroute6 www.6bone.net 
traceroute to 6bone.net (3ffe:b00:c18:1::10) from 2001:0db8:0000:f101::2, 30
¬ hops max, 16 byte packets 
 1 localipv6gateway (2001:0db8:0000:f101::1) 1.354 ms 1.566 ms 0.407 ms 
 2 swi6T1-T0.ipv6.switch.ch (3ffe:2000:0:400::1) 90.431 ms 91.956 ms 92.377 ms 
 3 3ffe:2000:0:1::132 (3ffe:2000:0:1::132) 118.945 ms 107.982 ms 114.557 ms 
 4 3ffe:c00:8023:2b::2 (3ffe:c00:8023:2b::2) 968.468 ms 993.392 ms 973.441 ms 
 5 3ffe:2e00:e:c::3 (3ffe:2e00:e:c::3) 507.784 ms 505.549 ms 508.928 ms 
 6 www.6bone.net (3ffe:b00:c18:1::10) 1265.85 ms * 1304.74 ms
</pre><p>Note: unlike some modern versions of IPv4 traceroute, which can use ICMPv4 echo-request packets as well as UDP packets (default), current IPv6-traceroute is only able to send UDP packets. As you perhaps already know, ICMP echo-request packets are more accepted by firewalls or ACLs on routers inbetween than UDP packets. </p><p>If a dedicated interface must be specified, this can be done by -i &lt;device&gt; or using &lt;address&gt;%&lt;device&gt;.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp52261760"></a>3.2.2. traceroute since version 2</h4></div></div></div><p>traceroute got native IPv6 support with version 2 and support all features as for IPv4. Below you will see an example for an ICMP (ping) traceroute (root permissions required) </p><pre class="screen">
# traceroute -I -n ipv6.google.com
traceroute to ipv6.google.com (2a00:1450:4016:804::200e), 30 hops max, 80 byte packets
 1  2001:a61:***  0.410 ms  0.510 ms  0.655 ms
 2  2001:a60::89:705:1  26.428 ms  34.361 ms  41.777 ms
 3  2001:a60::89:0:1:2  19.131 ms  19.163 ms  19.248 ms
 4  2001:a60:0:106::2  20.464 ms  20.467 ms  20.457 ms
 5  2001:4860::9:4000:cf86  21.836 ms *  21.852 ms
 6  2001:4860:0:1::19  21.690 ms  21.585 ms  22.919 ms
 7  2a00:1450:4016:804::200e  23.176 ms  19.310 ms  20.065 ms
</pre><p>If a dedicated interface must be specified, this can be done by -i &lt;device&gt;.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="program-tracepath6."></a>3.3. IPv6 tracepath6</h3></div></div></div><p>This program is normally included in package <span class="emphasis"><em>iputils</em></span>. It's a program like traceroute6 and traces the path to a given destination discovering the MTU along this path. Below you will see an example:</p><pre class="screen">
# tracepath6 www.6bone.net 
 1?: [LOCALHOST] pmtu 1480 
 1: 3ffe:401::2c0:33ff:fe02:14 150.705ms 
 2: 3ffe:b00:c18::5 267.864ms 
 3: 3ffe:b00:c18::5 asymm 2 266.145ms pmtu 1280 
 3: 3ffe:3900:5::2 asymm 4 346.632ms 
 4: 3ffe:28ff:ffff:4::3 asymm 5 365.965ms 
 5: 3ffe:1cff:0:ee::2 asymm 4 534.704ms 
 6: 3ffe:3800::1:1 asymm 4 578.126ms !N 
Resume: pmtu 1280
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="program-tcpdump"></a>3.4. IPv6 tcpdump</h3></div></div></div><p>On Linux, tcpdump is the major tool for packet capturing. Below you find some examples. IPv6 support is normally built-in in current releases of version 3.6.</p><p>tcpdump uses expressions for filtering packets to minimize the noise:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>icmp6: filters native ICMPv6 traffic</p></li><li class="listitem"><p>ip6: filters native IPv6 traffic (including ICMPv6)</p></li><li class="listitem"><p>proto ipv6: filters tunneled IPv6-in-IPv4 traffic</p></li><li class="listitem"><p>not port ssh: to suppress displaying SSH packets for running tcpdump in a remote SSH session</p></li></ul></div><p>Also some command line options are very useful to catch and print more information in a packet, mostly interesting for digging into ICMPv6 packets:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>&#8220;-s 512&#8221;: increase the snap length during capturing of a packet to 512 bytes</p></li><li class="listitem"><p>&#8220;-vv&#8221;: really verbose output</p></li><li class="listitem"><p>&#8220;-n&#8221;: don't resolve addresses to names, useful if reverse DNS resolving isn't working proper</p></li></ul></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57699648"></a>3.4.1. IPv6 ping to 2001:0db8:100:f101::1 native over a local link</h4></div></div></div><pre class="screen">
# tcpdump -t -n -i eth0 -s 512 -vv ip6 or proto ipv6 
tcpdump: listening on eth0 
2001:0db8:100:f101:2e0:18ff:fe90:9205 &gt; 2001:0db8:100:f101::1: icmp6: echo
¬ request (len 64, hlim 64) 
2001:0db8:100:f101::1 &gt; 2001:0db8:100:f101:2e0:18ff:fe90:9205: icmp6: echo
¬ reply (len 64, hlim 64)
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57700864"></a>3.4.2. IPv6 ping to 2001:0db8:100::1 routed through an IPv6-in-IPv4-tunnel</h4></div></div></div><p>1.2.3.4 and 5.6.7.8 are tunnel endpoints (all addresses are examples)</p><pre class="screen">
# tcpdump -t -n -i ppp0 -s 512 -vv ip6 or proto ipv6 
tcpdump: listening on ppp0 
1.2.3.4 &gt; 5.6.7.8: 2002:ffff:f5f8::1 &gt; 2001:0db8:100::1: icmp6: echo request
¬ (len 64, hlim 64) (DF) (ttl 64, id 0, len 124) 
5.6.7.8 &gt; 1.2.3.4: 2001:0db8:100::1 &gt; 2002:ffff:f5f8::1: icmp6: echo reply (len
¬ 64, hlim 61) (ttl 23, id 29887, len 124) 
1.2.3.4 &gt; 5.6.7.8: 2002:ffff:f5f8::1 &gt; 2001:0db8:100::1: icmp6: echo request
¬ (len 64, hlim 64) (DF) (ttl 64, id 0, len 124) 
5.6.7.8 &gt; 1.2.3.4: 2001:0db8:100::1 &gt; 2002:ffff:f5f8::1: icmp6: echo reply (len
¬ 64, hlim 61) (ttl 23, id 29919, len 124)
</pre></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57703040"></a>4. IPv6-ready programs</h2></div></div></div><p>Current distributions already contain the most needed IPv6 enabled client and servers. See first on <a class="ulink" href="http://www.bieringer.de/linux/IPv6/status/IPv6+Linux-status-distributions.html" target="_top">IPv6+Linux-Status-Distribution</a>. If still not included, you can check <a class="ulink" href="http://www.deepspace6.net/docs/ipv6_status_page_apps.html" target="_top">Current Status of IPv6 Support for Networking Applications</a> whether the program is already ported to IPv6 and usable with Linux. For common used programs there are some hints available here later in this document.</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57706976"></a>5. IPv6-ready client programs (selection)</h2></div></div></div><p>To run the following shown tests, it's required that your system is IPv6 enabled, and some examples show addresses which only can be reached if a connection to the global IPv6 network is available.</p><p>Note: if using names instead of dedicated IPv4/IPv6 addresses which resolves to IPv4 and IPv6 addresses, some command line clients support explicitly use of specified protocol. Usually such clients have option &#8221;-4&#8221; for IPv4 and &#8221;-6&#8221; for IPv6.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57708976"></a>5.1. Checking DNS for resolving IPv6 addresses</h3></div></div></div><p>Because of security updates in the last years every Domain Name System (DNS) server should run newer software which already understands the (intermediate) IPv6 address-type AAAA (the newer one named A6 isn't still common at the moment because only supported using BIND9 and newer and also the non-existent support of root domain IP6.ARPA). A simple test whether the used system can resolve IPv6 addresses is</p><pre class="screen">
# host -t AAAA www.join.uni-muenster.de
</pre><p>and should show something like following:</p><pre class="screen">
www.join.uni-muenster.de. is an alias for tolot.join.uni-muenster.de. 
tolot.join.uni-muenster.de. has AAAA address
¬ 2001:638:500:101:2e0:81ff:fe24:37c6
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57711632"></a>5.2. IPv6-ready telnet clients</h3></div></div></div><p>IPv6-ready telnet clients are available. A simple test can be done with</p><pre class="screen">
$ telnet 3ffe:400:100::1 80
Trying 3ffe:400:100::1... 
Connected to 3ffe:400:100::1. 
Escape character is '^]'. 
HEAD / HTTP/1.0

HTTP/1.1 200 OK 
Date: Sun, 16 Dec 2001 16:07:21 
GMT Server: Apache/2.0.28 (Unix) 
Last-Modified: Wed, 01 Aug 2001 21:34:42 GMT 
ETag: "3f02-a4d-b1b3e080" 
Accept-Ranges: bytes 
Content-Length: 2637 
Connection: close 
Content-Type: text/html; charset=ISO-8859-1

Connection closed by foreign host.
</pre><p>If the telnet client don't understand the IPv6 address and says something like &#8221;cannot resolve hostname&#8221;, then it's not IPv6-enabled.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57713984"></a>5.3. IPv6-ready ssh clients</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57715520"></a>5.3.1. openssh</h4></div></div></div><p>Current versions of openssh are IPv6-ready. Depending on configuring before compiling it has two behavior.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>--without-ipv4-default: the client tries an IPv6 connect first automatically and fall back to IPv4 if not working</p></li><li class="listitem"><p>--with-ipv4-default: default connection is IPv4, IPv6 connection must be force like following example shows</p></li></ul></div><pre class="screen">
$ ssh -6 ::1 
user@::1's password: ****** 
[user@ipv6host user]$
</pre><p>If your ssh client doesn't understand the option &#8221;-6&#8221; then it's not IPv6-enabled, like most ssh version 1 packages.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57719088"></a>5.3.2. ssh.com</h4></div></div></div><p>SSH.com's SSH client and server is also IPv6 aware now and is free for all Linux and FreeBSD machine regardless if used for personal or commercial use.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57720144"></a>5.4. IPv6-ready web browsers</h3></div></div></div><p>A current status of IPv6 enabled web browsers is available at <a class="ulink" href="http://www.deepspace6.net/docs/ipv6_status_page_apps.html#http" target="_top">Current Status of IPv6 Support for Networking Applications - HTTP</a>.</p><p>Most of them have unresolved problems at the moment</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>If using an IPv4 only proxy in the settings, IPv6 requests will be sent to the proxy, but the proxy will fail to understand the request and the request fails. Solution: update proxy software (see later).</p></li><li class="listitem"><p>Automatic proxy settings (*.pac) cannot be extended to handle IPv6 requests differently (e.g. don't use proxy) because of their nature (written in Java-script and well hard coded in source like to be seen in Mozilla source code).</p></li></ol></div><p>Also older versions don't understand an URL with IPv6 encoded addresses like <a class="ulink" href="http://%5B2001:4dd0:f838:a006::6%5D/" target="_top">http://[2001:4dd0:f838:a006::6]/</a>, IPv6 address of <a class="ulink" href="http://www.ipv6.bieringer.de/" target="_top">http://www.ipv6.bieringer.de/</a> (this given URLs only works with an IPv6-enabled browser!).</p><p>A short test is to try shown URL with a given browser and using no proxy.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57726304"></a>5.4.1. URLs for testing</h4></div></div></div><p>A good starting point for browsing using IPv6 is <a class="ulink" href="http://www.kame.net/" target="_top">http://www.kame.net/</a>. If the turtle on this page is animated, the connection is via IPv6, otherwise the turtle is static.</p><p>Other test servers are e.g.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.whatismyipv6.com/" target="_top">What Is My IPv6</a></p></li><li class="listitem"><p><a class="ulink" href="http://ip.bieringer.de/" target="_top">ip.bieringer.de</a></p></li><li class="listitem"><p><a class="ulink" href="http://ipv6-test.com/" target="_top">IPv6 Test</a></p></li><li class="listitem"><p><a class="ulink" href="http://test-ipv6.com/" target="_top">test-ipv6.com</a></p></li><li class="listitem"><p><a class="ulink" href="http://netalyzr.icsi.berkeley.edu/" target="_top">The ICSI Netalyzr</a></p></li><li class="listitem"><p><a class="ulink" href="http://speedtest.comcast.net/" target="_top">Speedtest Comcast</a>, <a class="ulink" href="http://ipv6.speedtest.comcast.net/" target="_top">IPv6 Speedtest Comcast</a></p></li></ul></div></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57733712"></a>6. IPv6-ready server programs</h2></div></div></div><p>In this part of this HOWTO, more client specific issues are mentioned. Therefore hints for IPv6-ready servers like sshd, httpd, telnetd, etc. are shown below in <a class="link" href="#chapter-hints-daemons" title="Chapter 22. Hints for IPv6-enabled daemons">Hints for IPv6-enabled daemons</a>.</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="faq-ipv6-ready-system-check"></a>7. FAQ (IPv6-ready system check)</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57736416"></a>7.1. Using tools</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57737056"></a>7.1.1. Q: Cannot ping6 to link-local addresses</h4></div></div></div><p>Error message: "<span class="emphasis"><em>connect: Invalid argument</em></span>"</p><p>Kernel doesn't know, which physical or virtual link you want to use to send such ICMPv6 packets. Therefore it displays this error message.</p><p>Solution: Specify interface like: &#8221;ping6 -I eth0 fe80::2e0:18ff:fe90:9205&#8221;, see also <a class="link" href="#program-ping6." title="3.1. IPv6 ping">program ping6 usage</a>.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57740080"></a>7.1.2. Q: Cannot ping6 or traceroute6 as normal user</h4></div></div></div><p>Error message: &#8221;<span class="emphasis"><em>icmp socket: Operation not permitted</em></span>&#8221;</p><p>These utilities create special ICMPv6 packets and send them out. This is done by using raw sockets in the kernel. But raw sockets can only be used by the &#8221;root&#8221; user. Therefore normal users get such error message.</p><p>Solution: If it's really needed that all users should be able to use these utilities, you can add the &#8221;suid&#8221; bit using &#8221;chmod u+s /path/to/program&#8221;, see also <a class="link" href="#program-ping6." title="3.1. IPv6 ping">program ping6 usage</a>. If not all users should be able to, you can change the group of the program to e.g. &#8221;wheel&#8221;, add these power users to this group and remove the execution bit for other users using &#8221;chmod o-rwx /path/to/program&#8221;. Or configure &#8221;sudo&#8221; to enable your security policy. </p></div></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chapter-configuration-interface"></a>Chapter 5. Configuring interfaces</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#idp57745136">1. Different network devices</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57747232">1.1. Physically bounded</a></span></dt><dt><span class="sect2"><a href="#idp57748256">1.2. Virtually bounded</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57759600">2. Bringing interfaces up/down</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57760496">2.1. Using "ip"</a></span></dt><dt><span class="sect2"><a href="#idp57763040">2.2. Using "ifconfig"</a></span></dt></dl></dd></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57745136"></a>1. Different network devices</h2></div></div></div><p>On a node, there exist different network devices. They can be collected in classes</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Physically bounded, like eth0, tr0</p></li><li class="listitem"><p>Virtually existing, like ppp0, tun0, tap0, sit0, isdn0, ippp0</p></li></ul></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57747232"></a>1.1. Physically bounded</h3></div></div></div><p>Physically bounded interfaces like Ethernet or Token-Ring are normal ones and need no special treatment.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57748256"></a>1.2. Virtually bounded</h3></div></div></div><p>Virtually bounded interfaces always need special support</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57749232"></a>1.2.1. IPv6-in-IPv4 tunnel interfaces</h4></div></div></div><p>These interfaces are normally named sit<span class="emphasis"><em>x</em></span>. The name <span class="emphasis"><em>sit</em></span> is a shortcut for Simple Internet Transition. This device has the capability to encapsulate IPv6 packets into IPv4 ones and tunnel them to a foreign endpoint.</p><p>sit0 has a special meaning and cannot be used for dedicated tunnels.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57751536"></a>1.2.2. PPP interfaces</h4></div></div></div><p>PPP interfaces get their IPv6 capability from an IPv6 enabled PPP daemon.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57752528"></a>1.2.3. ISDN HDLC interfaces</h4></div></div></div><p>IPv6 capability for HDLC with encapsulation ip is already built-in in the kernel</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57753520"></a>1.2.4. ISDN PPP interfaces </h4></div></div></div><p>ISDN PPP interfaces (ippp) aren't IPv6 enabled by kernel. Also there are also no plans to do that because in kernel 2.5.+ they will be replaced by a more generic ppp interface layer.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57754608"></a>1.2.5. SLIP + PLIP</h4></div></div></div><p>Like mentioned earlier, this interfaces don't support IPv6 transport (sending is OK, but dispatching on receiving don't work).</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57755648"></a>1.2.6. Ether-tap device</h4></div></div></div><p>Ether-tap devices are IPv6-enabled and also stateless configured. For use, the module &#8221;ethertap&#8221; has to be loaded before.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57756816"></a>1.2.7. tun devices</h4></div></div></div><p>Currently not tested by me.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57757712"></a>1.2.8. ATM</h4></div></div></div><p>01/2002: Aren't currently supported by vanilla kernel, supported by USAGI extension</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57758704"></a>1.2.9. Others</h4></div></div></div><p>Did I forget an interface?...</p></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57759600"></a>2. Bringing interfaces up/down</h2></div></div></div><p>Two methods can be used to bring interfaces up or down.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57760496"></a>2.1. Using "ip"</h3></div></div></div><p>Usage: </p><pre class="screen">
# ip link set dev &lt;interface&gt; up
# ip link set dev &lt;interface&gt; down
</pre><p>Example:</p><pre class="screen">

# ip link set dev eth0 up
# ip link set dev eth0 down
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57763040"></a>2.2. Using "ifconfig"</h3></div></div></div><p>Usage: </p><pre class="screen">
# /sbin/ifconfig &lt;interface&gt; up
# /sbin/ifconfig &lt;interface&gt; down
</pre><p>Example:</p><pre class="screen">
# /sbin/ifconfig eth0 up
# /sbin/ifconfig eth0 down
</pre></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chapter-configuration-address"></a>Chapter 6. Configuring IPv6 addresses</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#idp57766736">1. Displaying existing IPv6 addresses</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57768384">1.1. Using "ip"</a></span></dt><dt><span class="sect2"><a href="#idp57772368">1.2. Using "ifconfig"</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57775552">2. Add an IPv6 address</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57777040">2.1. Using "ip"</a></span></dt><dt><span class="sect2"><a href="#idp57779584">2.2. Using "ifconfig"</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57782016">3. Removing an IPv6 address</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57783056">3.1. Using "ip"</a></span></dt><dt><span class="sect2"><a href="#idp57785488">3.2. Using "ifconfig"</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57787920">4. Automatic IPv6 Address Configuration</a></span></dt><dt><span class="sect1"><a href="#idp57789440">5. Enable Privacy Extension</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57791904">5.1. Enable Privacy Extension using sysctl</a></span></dt><dt><span class="sect2"><a href="#idp57800448">5.2. Enable Privacy Extension using NetworkManager</a></span></dt><dt><span class="sect2"><a href="#idp57808016">5.3. Test real use of Privacy Extension IPv6 Addresses</a></span></dt></dl></dd></dl></div><p>There are different ways to configure an IPv6 address on an interface. You can use use "ifconfig" or "ip".</p><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57766736"></a>1. Displaying existing IPv6 addresses</h2></div></div></div><p>First you should check, whether and which IPv6 addresses are already configured (perhaps auto-magically during stateless auto-configuration).</p><p>Just note that addresses beginning with &#8221;fec0&#8221; are deprecated, but shown here for completness!</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57768384"></a>1.1. Using "ip"</h3></div></div></div><p>Usage:</p><pre class="screen">
# /sbin/ip -6 addr show dev &lt;interface&gt;
</pre><p>Example for a static configured host:</p><pre class="screen">
# /sbin/ip -6 addr show dev eth0
2: eth0: &lt;BROADCAST,MULTICAST,UP&amp;gt; mtu 1500 qdisc pfifo_ fast qlen 100
inet6 fe80::210:a4ff:fee3:9566/10 scope link
inet6 2001:0db8:0:f101::1/64 scope global
inet6 fec0:0:0:f101::1/64 scope site 
</pre><p>Example for a host which is auto-configured</p><p>Here you see some auto-magically configured IPv6 addresses and their lifetime.</p><pre class="screen">
# /sbin/ip -6 addr show dev eth0 
3: eth0: &lt;BROADCAST,MULTICAST,PROMISC,UP&amp;gt; mtu 1500 qdisc pfifo_fast qlen
¬ 100 
inet6 2002:d950:f5f8:f101:2e0:18ff:fe90:9205/64 scope global dynamic 
valid_lft 16sec preferred_lft 6sec 
inet6 3ffe:400:100:f101:2e0:18ff:fe90:9205/64 scope global dynamic 
valid_lft 2591997sec preferred_lft 604797sec inet6 fe80::2e0:18ff:fe90:9205/10
¬ scope link
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57772368"></a>1.2. Using "ifconfig"</h3></div></div></div><p>Usage:</p><pre class="screen">
# /sbin/ifconfig &lt;interface&gt;
</pre><p>Example (output filtered with grep to display only IPv6 addresses). Here you see different IPv6 addresses with different scopes.</p><pre class="screen">
# /sbin/ifconfig eth0 |grep "inet6 addr:"
inet6 addr: fe80::210:a4ff:fee3:9566/10 Scope:Link
inet6 addr: 2001:0db8:0:f101::1/64 Scope:Global
inet6 addr: fec0:0:0:f101::1/64 Scope:Site
</pre></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57775552"></a>2. Add an IPv6 address</h2></div></div></div><p>Adding an IPv6 address is similar to the mechanism of "IP ALIAS" addresses in Linux IPv4 addressed interfaces.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57777040"></a>2.1. Using "ip"</h3></div></div></div><p>Usage: </p><pre class="screen">
# /sbin/ip -6 addr add &lt;ipv6address&gt;/&lt;prefixlength&gt; dev &lt;interface&gt; 
</pre><p>Example:</p><pre class="screen">
# /sbin/ip -6 addr add 2001:0db8:0:f101::1/64 dev eth0 
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57779584"></a>2.2. Using "ifconfig"</h3></div></div></div><p>Usage: </p><pre class="screen">
# /sbin/ifconfig &lt;interface&gt; inet6 add &lt;ipv6address&gt;/&lt;prefixlength&gt;
</pre><p>Example:</p><pre class="screen">
# /sbin/ifconfig eth0 inet6 add 2001:0db8:0:f101::1/64 
</pre></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57782016"></a>3. Removing an IPv6 address</h2></div></div></div><p>Not so often needed, be carefully with removing non existent IPv6 address, sometimes using older kernels it results in a crash.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57783056"></a>3.1. Using "ip"</h3></div></div></div><p>Usage: </p><pre class="screen">
# /sbin/ip -6 addr del &lt;ipv6address&gt;/&lt;prefixlength&gt; dev &lt;interface&gt; 
</pre><p>Example:</p><pre class="screen">
# /sbin/ip -6 addr del 2001:0db8:0:f101::1/64 dev eth0 
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57785488"></a>3.2. Using "ifconfig"</h3></div></div></div><p>Usage:</p><pre class="screen">
# /sbin/ifconfig &lt;interface&gt; inet6 del &lt;ipv6address&gt;/&lt;prefixlength&gt;
</pre><p>Example:</p><pre class="screen">
# /sbin/ifconfig eth0 inet6 del 2001:0db8:0:f101::1/64
</pre></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57787920"></a>4. Automatic IPv6 Address Configuration</h2></div></div></div><p>In case, a Router Advertisement is received by a client, and IPv6 autoconfiguration is enabled (default on non-router), the client configures itself an IPv6 address according to the prefix contained in the advertisement (see also <a class="xref" href="#hints-daemons-radvd" title="4. Router Advertisement Daemon (radvd)">Section 4, &#8220;Router Advertisement Daemon (radvd)&#8221;</a>).</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57789440"></a>5. Enable Privacy Extension</h2></div></div></div><p>Privacy Extension as described in <a class="ulink" href="http://www.faqs.org/rfcs/rfc4941.html" target="_top">RFC 4941 / Privacy Extensions for Stateless Address Autoconfiguration in IPv6</a> (obsoleted <a class="ulink" href="http://www.faqs.org/rfcs/rfc3041.html" target="_top">RFC 3041</a>) is replacing the static interface ID (mostly based on word-wide unique MAC address) used during autoconfiguration by a pseudo-random one and generating from time to time a new one deprecating the old one.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57791904"></a>5.1. Enable Privacy Extension using sysctl</h3></div></div></div><h3><a name="idp57792544"></a>Temporary activation</h3><p>Enable privacy extension for e.g. interface &#8221;eth0&#8221; and prefer the generated address:</p><pre class="screen">
# sysctl -w net.ipv6.conf.eth0.use_tempaddr=2
</pre><p>Afterwards, restart of the interface is necessary</p><pre class="screen">
# ip link set dev eth0 down
# ip link set dev eth0 up
</pre><p>Once a router advertisement is received, the result should look like following</p><pre class="screen">
# ip -6 addr show dev eth0
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qlen 1000
    inet6 2001:db8:0:1:8992:3c03:d6e2:ed72/64 scope global secondary dynamic   &lt;- pseudo-random IID
       valid_lft 604711sec preferred_lft 86311sec
    inet6 2001:db8:0:1::224:21ff:fe01:2345/64 scope global     &lt;- IID based on MAC
       valid_lft 604711sec preferred_lft 86311sec
    ...
</pre><h3><a name="idp57795952"></a>Permanent activation</h3><p>For permanent activation, either a special initscript value per interface will enable privacy or an entry in the /etc/sysctl.conf file like</p><pre class="screen">
net.ipv6.conf.eth0.use_tempaddr=2
</pre><p>Note: interface must already exists with proper name when sysctl.conf is applied. If this is not the case (e.g. after reboot) one has to configure privacy for all interfaces by default:</p><pre class="screen">
net.ipv6.conf.all.use_tempaddr=2
net.ipv6.conf.default.use_tempaddr=2
</pre><p>Changed/added values in /etc/sysctl.conf can be activated during runtime, but at least an interface down/up or a reboot is recommended.</p><pre class="screen">
# sysctl -p
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57800448"></a>5.2. Enable Privacy Extension using NetworkManager</h3></div></div></div><p>Modern (client) systems are using NetworkManager for configuring interfaces. A command line tool is built-in which can be used to change settings which are not available via GUI.</p><p>Examples based on version 0.9.9.1-5.git20140319.fc21</p><p>Check existing interfaces with:</p><pre class="screen">
# nmcli connection 
NAME UUID TYPE DEVICE
ens4v1 d0fc2b2e-5fa0-4675-96b5-b723ca5c46db 802-3-ethernet ens4v1 
</pre><p>Current amount of IPv6 privacy extension addresses can be checked with</p><pre class="screen">
# ip -o addr show dev ens4v1 | grep temporary | wc -l
0
</pre><p>Current IPv6 privacy extension settings can be checked with</p><pre class="screen">
# nmcli connection show ens4v1 |grep ip6-privacy
ipv6.ip6-privacy: -1 (unknown)
</pre><p>Enable IPv6 privacy extension and restart interface</p><pre class="screen">
# nmcli connection modify ens4v1 ipv6.ip6-privacy 2
# nmcli connection down ens4v1; nmcli connection up ens4v1
</pre><p>New IPv6 privacy extension settings can be checked with</p><pre class="screen">
# nmcli connection show ens4v1 |grep ip6-privacy
ipv6.ip6-privacy: 2 (active, prefer temporary IP)
</pre><p>Now IPv6 privacy extension addresses are configured on the interface</p><pre class="screen">
# ip -o addr show dev ens4v1 | grep temporary | wc -l
2
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57808016"></a>5.3. Test real use of Privacy Extension IPv6 Addresses</h3></div></div></div><p>Whether the IPv6 address with an Interface ID generated by Privacy Extension is really used for outgoing connections, one can browse to <a class="ulink" href="http://ip.bieringer.de/" target="_top">http://ip.bieringer.de/</a>, in case EUI64_SCOPE shows &#8221;iid-privacy&#8221;, then everything is working fine.</p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chapter-configuration-route"></a>Chapter 7. Configuring normal IPv6 routes</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#idp57811840">1. Displaying existing IPv6 routes</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57812880">1.1. Using "ip"</a></span></dt><dt><span class="sect2"><a href="#idp57815120">1.2. Using "route"</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57818064">2. Add an IPv6 route through a gateway</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57819856">2.1. Using "ip"</a></span></dt><dt><span class="sect2"><a href="#idp57822432">2.2. Using "route"</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57825488">3. Removing an IPv6 route through a gateway</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57826512">3.1. Using "ip"</a></span></dt><dt><span class="sect2"><a href="#idp57828976">3.2. Using "route"</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57831440">4. Add an IPv6 route through an interface</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57832336">4.1. Using "ip"</a></span></dt><dt><span class="sect2"><a href="#idp57835312">4.2. Using "route"</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57837728">5. Removing an IPv6 route through an interface</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57838720">5.1. Using "ip"</a></span></dt><dt><span class="sect2"><a href="#idp57841104">5.2. Using "route"</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57843504">6. FAQ for IPv6 routes</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57844144">6.1. Support of an IPv6 default route</a></span></dt></dl></dd></dl></div><p>If you want to leave your link and want to send packets in the world wide IPv6-Internet, you need routing. If there is already an IPv6 enabled router on your link, it's possible enough to add IPv6 routes.</p><p>Just note that addresses beginning with &#8221;fec0&#8221; are deprecated, but shown here for completness!</p><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57811840"></a>1. Displaying existing IPv6 routes</h2></div></div></div><p>First you should check, whether and which IPv6 addresses are already configured (perhaps auto-magically during auto-configuration).</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57812880"></a>1.1. Using "ip"</h3></div></div></div><p>Usage:</p><pre class="screen">
# /sbin/ip -6 route show [dev &lt;device&gt;]
</pre><p>Example:</p><pre class="screen">
# /sbin/ip -6 route show dev eth0
2001:0db8:0:f101::/64 proto kernel metric 256 mtu 1500 advmss 1440
fe80::/10             proto kernel metric 256 mtu 1500 advmss 1440
ff00::/8              proto kernel metric 256 mtu 1500 advmss 1440
default               proto kernel metric 256 mtu 1500 advmss 1440
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57815120"></a>1.2. Using "route"</h3></div></div></div><p>Usage: </p><pre class="screen">
# /sbin/route -A inet6 
</pre><p>Example (output is filtered for interface eth0). Here you see different IPv6 routes for different addresses on a single interface.</p><pre class="screen">
# /sbin/route -A inet6 |grep -w "eth0"
2001:0db8:0:f101 ::/64 :: UA  256 0 0 eth0 &lt;- Interface route for global
¬ address
fe80::/10        ::       UA  256 0 0 eth0 &lt;- Interface route for link-local
¬ address
ff00::/8         ::       UA  256 0 0 eth0 &lt;- Interface route for all multicast
¬ addresses
::/0             ::       UDA 256 0 0 eth0 &lt;- Automatic default route
</pre></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57818064"></a>2. Add an IPv6 route through a gateway</h2></div></div></div><p>Mostly needed to reach the outside with IPv6 using an IPv6-enabled router on your link.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57819856"></a>2.1. Using "ip"</h3></div></div></div><p>Usage:</p><pre class="screen">
# /sbin/ip -6 route add &lt;ipv6network&gt;/&lt;prefixlength&gt; via &lt;ipv6address&gt;
¬ [dev &lt;device&gt;]
</pre><p>Example:</p><pre class="screen">
# /sbin/ip -6 route add default via 2001:0db8:0:f101::1
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57822432"></a>2.2. Using "route"</h3></div></div></div><p>Usage: </p><pre class="screen">
# /sbin/route -A inet6 add &lt;ipv6network&gt;/&lt;prefixlength&gt; gw
¬ &lt;ipv6address&gt; [dev &lt;device&gt;] 
</pre><p>A device can be needed, too, if the IPv6 address of the gateway is a link local one.</p><p>Following shown example adds a default route through gateway 2001:0db8:0:f101::1</p><pre class="screen">
# /sbin/route -A inet6 add default gw 2001:0db8:0:f101::1
</pre></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57825488"></a>3. Removing an IPv6 route through a gateway</h2></div></div></div><p>Not so often needed manually, mostly done by network configure scripts on shutdown (full or per interface)</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57826512"></a>3.1. Using "ip"</h3></div></div></div><p>Usage:</p><pre class="screen">
# /sbin/ip -6 route del &lt;ipv6network&gt;/&lt;prefixlength&gt; via &lt;ipv6address&gt;
¬ [dev &lt;device&gt;]
</pre><p>Example:</p><pre class="screen">
# /sbin/ip -6 route del default via 2001:0db8:0:f101::1
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57828976"></a>3.2. Using "route"</h3></div></div></div><p>Usage: </p><pre class="screen">
# /sbin/route -A inet6 del &lt;network&gt;/&lt;prefixlength&gt; gw &lt;ipv6address&gt; [dev
¬ &lt;device&gt;]
</pre><p>Example for removing upper added route again:</p><pre class="screen">
# /sbin/route -A inet6 del default gw 2001:0db8:0:f101::1
</pre></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57831440"></a>4. Add an IPv6 route through an interface</h2></div></div></div><p>Not often needed, sometimes in cases of dedicated point-to-point links.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57832336"></a>4.1. Using "ip"</h3></div></div></div><p>Usage:</p><pre class="screen">
# /sbin/ip -6 route add &lt;ipv6network&gt;/&lt;prefixlength&gt; dev &lt;device&gt;
¬ metric 1
</pre><p>Example:</p><pre class="screen">
# /sbin/ip -6 route add default dev eth0 metric 1
</pre><p>Metric &#8221;1&#8221; is used here to be compatible with the metric used by route, because the default metric on using &#8221;ip&#8221; is &#8221;1024&#8221;.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57835312"></a>4.2. Using "route"</h3></div></div></div><p>Usage:</p><pre class="screen">
# /sbin/route -A inet6 add &lt;ipv6network&gt;/&lt;prefixlength&gt; dev &lt;device&gt;
</pre><p>Example:</p><pre class="screen">
# /sbin/route -A inet6 add default dev eth0 
</pre></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57837728"></a>5. Removing an IPv6 route through an interface</h2></div></div></div><p>Not so often needed to use by hand, configuration scripts will use such on shutdown.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57838720"></a>5.1. Using "ip"</h3></div></div></div><p>Usage:</p><pre class="screen">
# /sbin/ip -6 route del &lt;ipv6network&gt;/&lt;prefixlength&gt; dev &lt;device&gt;
</pre><p>Example:</p><pre class="screen">
# /sbin/ip -6 route del default dev eth0 
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57841104"></a>5.2. Using "route"</h3></div></div></div><p>Usage:</p><pre class="screen">
# /sbin/route -A inet6 del &lt;network&gt;/&lt;prefixlength&gt; dev &lt;device&gt;
</pre><p>Example:</p><pre class="screen">
# /sbin/route -A inet6 del default dev eth0
</pre></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57843504"></a>6. FAQ for IPv6 routes</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57844144"></a>6.1. Support of an IPv6 default route</h3></div></div></div><p>One idea of IPv6 was a hierachical routing, therefore only less routing entries are needed in routers.</p><p>There are some issues in current Linux kernels:</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57845424"></a>6.1.1. Clients (not routing any packet!)</h4></div></div></div><p>Client can setup a default route like prefix &#8221;::/0&#8221;, they also learn such route on autoconfiguration e.g. using radvd on the link like following example shows:</p><pre class="screen">
# ip -6 route show | grep ^default
default via fe80::212:34ff:fe12:3450 dev eth0 proto kernel metric 1024 expires
¬ 29sec mtu 1500 advmss 1440
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57847152"></a>6.1.2. Routers in case of packet forwarding</h4></div></div></div><p>Older Linux kernel (at least &lt;= 2.4.17) don't support default routes. You can set them up, but the route lookup fails when a packet should be forwarded (normal intention of a router). If you're still using such older kernel, &#8221;default routing&#8221; can be setup using the currently used global address prefix &#8221;2000::/3&#8221;.</p><p>Note: take care about default routing without address filtering on edge routers. Otherwise unwanted multicast or site-local traffic can leave the edge.</p></div></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chapter-Neighbor-Discovery"></a>Chapter 8. Neighbor Discovery</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#idp57851424">1. Displaying neighbors using &#8221;ip&#8221;</a></span></dt><dt><span class="sect1"><a href="#idp57853824">2. Manipulating neighbors table using &#8221;ip&#8221;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57854864">2.1. Manually add an entry</a></span></dt><dt><span class="sect2"><a href="#idp57857424">2.2. Manually delete an entry</a></span></dt><dt><span class="sect2"><a href="#idp57859872">2.3. More advanced settings</a></span></dt></dl></dd></dl></div><p>Neighbor discovery was the IPv6 successor for the ARP (Address Resolution Protocol) in IPv4. You can retrieve information about the current neighbors, in addition you can set and delete entries. The kernel keeps tracking of successful neighbor detection (like ARP in IPv4). You can dig into the learnt table using &#8221;ip&#8221;.</p><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57851424"></a>1. Displaying neighbors using &#8221;ip&#8221;</h2></div></div></div><p>With following command you can display the learnt or configured IPv6 neighbors</p><pre class="screen">
# ip -6 neigh show [dev &lt;device&gt;]
</pre><p>The following example shows one neighbor, which is a reachable router</p><pre class="screen">
# ip -6 neigh show
fe80::201:23ff:fe45:6789 dev eth0 lladdr 00:01:23:45:67:89 router nud reachable
</pre></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57853824"></a>2. Manipulating neighbors table using &#8221;ip&#8221;</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57854864"></a>2.1. Manually add an entry</h3></div></div></div><p>With following command you are able to manually add an entry</p><pre class="screen">
# ip -6 neigh add &lt;IPv6 address&gt; lladdr &lt;link-layer address&gt; dev &lt;device&gt;
</pre><p>Example:</p><pre class="screen">
# ip -6 neigh add fec0::1 lladdr 02:01:02:03:04:05 dev eth0
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57857424"></a>2.2. Manually delete an entry</h3></div></div></div><p>Like adding also an entry can be deleted:</p><pre class="screen">
# ip -6 neigh del &lt;IPv6 address&gt; lladdr &lt;link-layer address&gt; dev &lt;device&gt;
</pre><p>Example:</p><pre class="screen">
# ip -6 neigh del fec0::1 lladdr 02:01:02:03:04:05 dev eth0
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57859872"></a>2.3. More advanced settings</h3></div></div></div><p>The tool &#8221;ip&#8221; is less documentated, but very strong. See online &#8221;help&#8221; for more:</p><pre class="screen">
# ip -6 neigh help
Usage: ip neigh { add | del | change | replace } { ADDR [ lladdr LLADDR ] 
          [ nud { permanent | noarp | stale | reachable } ] 
          | proxy ADDR } [ dev DEV ] 
       ip neigh {show|flush} [ to PREFIX ] [ dev DEV ] [ nud STATE ]
</pre><p>Looks like some options are only for IPv4...if you can contribute information about flags and advanced usage, pls. send.</p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chapter-configuring-ipv6-in-ipv4-tunnels"></a>Chapter 9. Configuring IPv6-in-IPv4 tunnels</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#idp57864208">1. Types of tunnels</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57865200">1.1. Static point-to-point tunneling</a></span></dt><dt><span class="sect2"><a href="#idp57873488">1.2. Automatically tunneling</a></span></dt><dt><span class="sect2"><a href="#tunneling-6to4.">1.3. 6to4-Tunneling</a></span></dt><dt><span class="sect2"><a href="#idp57889440">1.4. UDP encapsulated IPv6 tunneling</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57896784">2. Displaying existing tunnels</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57897424">2.1. Using "ip"</a></span></dt><dt><span class="sect2"><a href="#idp57899664">2.2. Using "route"</a></span></dt></dl></dd><dt><span class="sect1"><a href="#conf-ipv6-in-ipv4-point-to-point-tunnels">3. Setup of point-to-point tunnel</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57906704">3.1. Add point-to-point tunnels</a></span></dt><dt><span class="sect2"><a href="#idp57917312">3.2. Removing point-to-point tunnels</a></span></dt><dt><span class="sect2"><a href="#idp57926384">3.3. Numbered point-to-point tunnels</a></span></dt></dl></dd><dt><span class="sect1"><a href="#configuring-ipv6to4-tunnels">4. Setup of 6to4 tunnels</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57930464">4.1. Add a 6to4 tunnel</a></span></dt><dt><span class="sect2"><a href="#idp57946048">4.2. Remove a 6to4 tunnel</a></span></dt></dl></dd></dl></div><p>If you want to leave your link and you have no IPv6 capable network around you, you need IPv6-in-IPv4 tunneling to reach the world wide IPv6-Internet.</p><p>There are some kind of tunnel mechanism and also some possibilities to setup tunnels.</p><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57864208"></a>1. Types of tunnels</h2></div></div></div><p>There are more than one possibility to tunnel IPv6 packets over IPv4-only links.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57865200"></a>1.1. Static point-to-point tunneling</h3></div></div></div><p>A point-to-point tunnel is a dedicated tunnel to an endpoint, which knows about your IPv6 network (for backward routing) and the IPv4 address of your tunnel endpoint and defined in <a class="ulink" href="http://www.faqs.org/rfcs/rfc4213.html" target="_top">RFC 4213 / Basic Transition Mechanisms for IPv6 Hosts and Routers</a>. Requirements:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>IPv4 address of your local tunnel endpoint must be static, global unique and reachable from the foreign tunnel endpoint
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>If no static IPv4 address is available, the tunnel provider must support authentication of the dynamic IPv4 address, like <a class="ulink" href="http://www.sixxs.net/" target="_top">SixXS / AICCU</a> (3740/udp) or <a class="ulink" href="http://gogo6.com/" target="_top">gogo6</a> (3653/udp).</p></li></ul></div></li><li class="listitem"><p>A global IPv6 prefix assigned to you
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>It is also possible that additional IPv6 networks are routed through this tunnel.</p></li></ul></div></li><li class="listitem"><p>A foreign tunnel endpoint which is capable to route your IPv6 prefix to your local tunnel endpoint (mostly remote manual configuration required)</p></li></ul></div><p>Tunnel provider for static point-to-point tunneling:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://he.com/" target="_top">Hurricane Electric</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.sixxs.net/" target="_top">SixXS</a></p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57873488"></a>1.2. Automatically tunneling</h3></div></div></div><p>Automatic tunneling occurs, when a node directly connects another node gotten the IPv4 address of the other node before.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="tunneling-6to4."></a>1.3. 6to4-Tunneling</h3></div></div></div><p>6to4 tunneling (<a class="ulink" href="http://www.faqs.org/rfcs/rfc3056.html" target="_top">RFC 3056 / Connection of IPv6 Domains via IPv4 Clouds</a>) uses a simple mechanism to create automatic tunnels. Each node with a global unique IPv4 address is able to be a 6to4 tunnel endpoint (if no IPv4 firewall prohibits traffic). 6to4 tunneling is mostly not a one-to-one tunnel. This case of tunneling can be divided into upstream and downstream tunneling. Also, a special IPv6 address indicates that this node will use 6to4 tunneling for connecting the world-wide IPv6 network</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57876880"></a>1.3.1. Generation of 6to4 prefix</h4></div></div></div><p>The 6to4 address is defined like following (schema is taken from <a class="ulink" href="http://www.faqs.org/rfcs/rfc3056.html" target="_top">RFC 3056 / Connection of IPv6 Domains via IPv4 Clouds</a>):</p><pre class="screen">
|   3+13   |    32     |    16  |            64 bits             | 
+---+------+-----------+--------+--------------------------------+ 
|  FP+TLA  |  V4ADDR   | SLA ID |           Interface ID         | 
|  0x2002  |           |        |                                | 
+---+------+-----------+--------+--------------------------------+
</pre><p>FP and TLA together (16 bits) have the value 0x2002. V4ADDR is the node's global unique IPv4 address (in hexadecimal notation). SLA is the subnet identifier (65536 local subnets possible) and are usable to represent your local network structure.</p><p>For gateways, such prefix is generated by normally using SLA &#8221;0000&#8221; and suffix &#8221;::1&#8221; (not a must, can be an arbitrary one with local-scope) and assigned to the 6to4 tunnel interface. Note that Microsoft Windows uses V4ADDR also for suffix.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57881120"></a>1.3.2. 6to4 upstream tunneling</h4></div></div></div><p>The node has to know to which foreign tunnel endpoint its in IPv4 packed IPv6 packets should be send to. In &#8221;early&#8221; days of 6to4 tunneling, dedicated upstream accepting routers were defined. See  <a class="ulink" href="http://www.kfu.com/~nsayer/6to4/" target="_top">NSayer's 6to4 information</a> for a list of routers.</p><p>Nowadays, 6to4 upstream routers can be found auto-magically using the anycast address 192.88.99.1. In the background routing protocols handle this, see <a class="ulink" href="http://www.faqs.org/rfcs/rfc3068.html" target="_top">RFC 3068 / An Anycast Prefix for 6to4 Relay Routers</a> for details. </p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57884240"></a>1.3.3. 6to4 downstream tunneling</h4></div></div></div><p>The downstream (IPv6 backbone -&gt; your 6to4 enabled node) is not really fix and can vary from foreign host which originated packets were send to. There exist two possibilities:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Foreign host uses 6to4 and sends packet direct back to your node (see below)</p></li><li class="listitem"><p>Foreign host sends packets back to the world-wide IPv6 network and depending on the dynamic routing a relay router of an ISP which announces 2002::/16 via BGP will create a automatic tunnel back to your node.</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57886912"></a>1.3.4. Possible 6to4 traffic</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>from 6to4 to 6to4: is normally directly tunneled between the both 6to4 enabled hosts</p></li><li class="listitem"><p>from 6to4 to non-6to4: is sent via upstream tunneling</p></li><li class="listitem"><p>non-6to4 to 6to4: is sent via downstream tunneling</p></li></ul></div><p>Note, that because of possible asymmetric routing problems with a broken 6to4 relay can be hard to troubleshoot.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57889440"></a>1.4. UDP encapsulated IPv6 tunneling</h3></div></div></div><p>UDP encapsulated IPv6 tunneling is usally used if no global IPv4 address is available on the internal endpoint, but using Network Adress Translation (NAT) it can still reach related endpoints using UDP ports described below.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57890576"></a>1.4.1. Teredo Tunnel</h4></div></div></div><p><a class="ulink" href="http://www.faqs.org/rfcs/rfc4380.html" target="_top">RFC 4380 / Teredo: Tunneling IPv6 over UDP through Network Address Translations</a>describes tunneling of IPv6 packets via IPv4 UDP bubbles, see also <a class="ulink" href="http://de.wikipedia.org/wiki/Teredo" target="_top">Wikipedia / Teredo</a>. It uses usually 3544/udp. Linux client is named <a class="ulink" href="http://www.remlab.net/miredo/" target="_top">miredo</a> and usable out-of-the-box. This tunnel method can only connect a single client to the global IPv6 network..</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57893520"></a>1.4.2. AYIYA Tunnel</h4></div></div></div><p>Tunnel provider <a class="ulink" href="http://www.sixxs.net/" target="_top">SixXS</a> has also IPv6-in-UDP-in-IPv4 (5072/udp) capability, for using it, the AYIYA mode must be enabled.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57895152"></a>1.4.3. gogo6 Tunnel</h4></div></div></div><p>Tunnel provider <a class="ulink" href="http://gogo6.com/" target="_top">gogo6</a> has also IPv6-in-UDP-in-IPv4 (3653/udp) capability, for using it, the v6udpv4 mode must be enabled.</p></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57896784"></a>2. Displaying existing tunnels</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57897424"></a>2.1. Using "ip"</h3></div></div></div><p>Usage:</p><pre class="screen">
# /sbin/ip -6 tunnel show [&lt;device&gt;]
</pre><p>Example:</p><pre class="screen">
# /sbin/ip -6 tunnel show 
sit0: ipv6/ip remote any local any ttl 64 nopmtudisc 
sit1: ipv6/ip remote 195.226.187.50 local any ttl 64
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57899664"></a>2.2. Using "route"</h3></div></div></div><p>Usage:</p><pre class="screen">
# /sbin/route -A inet6 
</pre><p>Example (output is filtered to display only tunnels through virtual interface sit0):</p><pre class="screen">
# /sbin/route -A inet6 | grep "\Wsit0\W*$" 
::/96      ::               U   256  2  0  sit0 
2002::/16  ::               UA  256  0  0  sit0 
2000::/3   ::193.113.58.75  UG    1  0  0  sit0 
fe80::/10  ::               UA  256  0  0  sit0 
ff00::/8   ::               UA  256  0  0  sit0
</pre></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="conf-ipv6-in-ipv4-point-to-point-tunnels"></a>3. Setup of point-to-point tunnel</h2></div></div></div><p>There are 3 possibilities to add or remove point-to-point tunnels.</p><p>A good additional information about tunnel setup using &#8221;ip&#8221; is <a class="ulink" href="http://www.deepspace6.net/docs/iproute2tunnel-en.html" target="_top">Configuring tunnels with iproute2 (article)</a> (<a class="ulink" href="http://mirrors.bieringer.de/www.deepspace6.net/docs/iproute2tunnel-en.html" target="_top">Mirror</a>).</p><p>Note: support of such kind of tunnels is provided by kernel module &#8221;sit&#8221; (potentially not possible on Virtuozzo platforms)</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57906704"></a>3.1. Add point-to-point tunnels</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57907344"></a>3.1.1. Using "ip"</h4></div></div></div><p>Common method at the moment for a small amount of tunnels.</p><p>Usage for creating a tunnel device (but it's not up afterward, also a TTL must be specified because the default value is 0).</p><pre class="screen">
# /sbin/ip tunnel add &lt;device&gt; mode sit ttl &lt;ttldefault&gt; remote
¬ &lt;ipv4addressofforeigntunnel&gt; local &lt;ipv4addresslocal&gt;
</pre><p>Usage (generic example for three tunnels):</p><pre class="screen">
# /sbin/ip tunnel add sit1 mode sit ttl &lt;ttldefault&gt; remote
¬ &lt;ipv4addressofforeigntunnel1&gt; local &lt;ipv4addresslocal&gt;
# /sbin/ip link set dev sit1 up
# /sbin/ip -6 route add &lt;prefixtoroute1&gt; dev sit1 metric 1

# /sbin/ip tunnel add sit2 mode sit ttl &lt;ttldefault&gt;
¬ &lt;ipv4addressofforeigntunnel2&gt; local &lt;ipv4addresslocal&gt;
# /sbin/ip link set dev sit2 up
# /sbin/ip -6 route add &lt;prefixtoroute2&gt; dev sit2 metric 1

# /sbin/ip tunnel add sit3 mode sit ttl &lt;ttldefault&gt;
¬ &lt;ipv4addressofforeigntunnel3&gt; local &lt;ipv4addresslocal&gt;
# /sbin/ip link set dev sit3 up
# /sbin/ip -6 route add &lt;prefixtoroute3&gt; dev sit3 metric 1
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57910432"></a>3.1.2. Using "ifconfig" and "route" (deprecated)</h4></div></div></div><p>This not very recommended way to add a tunnel because it's a little bit strange. No problem if adding only one, but if you setup more than one, you cannot easy shutdown the first ones and leave the others running.</p><p>Usage (generic example for three tunnels):</p><pre class="screen">
# /sbin/ifconfig sit0 up

# /sbin/ifconfig sit0 tunnel &lt;ipv4addressofforeigntunnel1&gt;
# /sbin/ifconfig sit1 up
# /sbin/route -A inet6 add &lt;prefixtoroute1&gt; dev sit1

# /sbin/ifconfig sit0 tunnel &lt;ipv4addressofforeigntunnel2&gt;
# /sbin/ifconfig sit2 up
# /sbin/route -A inet6 add &lt;prefixtoroute2&gt; dev sit2

# /sbin/ifconfig sit0 tunnel &lt;ipv4addressofforeigntunnel3&gt;
# /sbin/ifconfig sit3 up
# /sbin/route -A inet6 add &lt;prefixtoroute3&gt; dev sit3
</pre><p>Important: DON'T USE THIS, because this setup implicit enable "automatic tunneling" from anywhere in the Internet, this is a risk, and it should not be advocated.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57914160"></a>3.1.3. Using "route" only</h4></div></div></div><p>It's also possible to setup tunnels in Non Broadcast Multiple Access (NBMA) style, it's a easy way to add many tunnels at once. But none of the tunnel can be numbered (which is a not required feature).</p><p>Usage (generic example for three tunnels):</p><pre class="screen">
# /sbin/ifconfig sit0 up

# /sbin/route -A inet6 add &lt;prefixtoroute1&gt; gw
¬ ::&lt;ipv4addressofforeigntunnel1&gt; dev sit0
# /sbin/route -A inet6 add &lt;prefixtoroute2&gt; gw
¬ ::&lt;ipv4addressofforeigntunnel2&gt; dev sit0
# /sbin/route -A inet6 add &lt;prefixtoroute3&gt; gw
¬ ::&lt;ipv4addressofforeigntunnel3&gt; dev sit0
</pre><p>Important: DON'T USE THIS, because this setup implicit enable "automatic tunneling" from anywhere in the Internet, this is a risk, and it should not be advocated.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57917312"></a>3.2. Removing point-to-point tunnels</h3></div></div></div><p>Manually not so often needed, but used by scripts for clean shutdown or restart of IPv6 configuration.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57919152"></a>3.2.1. Using "ip"</h4></div></div></div><p>Usage for removing a tunnel device:</p><pre class="screen">
# /sbin/ip tunnel del &lt;device&gt;
</pre><p>Usage (generic example for three tunnels):</p><pre class="screen">
# /sbin/ip -6 route del &lt;prefixtoroute1&gt; dev sit1
# /sbin/ip link set sit1 down
# /sbin/ip tunnel del sit1

# /sbin/ip -6 route del &lt;prefixtoroute2&gt; dev sit2
# /sbin/ip link set sit2 down
# /sbin/ip tunnel del sit2

# /sbin/ip -6 route del &lt;prefixtoroute3&gt; dev sit3
# /sbin/ip link set sit3 down
# /sbin/ip tunnel del sit3
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57921296"></a>3.2.2. Using "ifconfig" and "route" (deprecated because not very funny)</h4></div></div></div><p>Not only the creation is strange, the shutdown also...you have to remove the tunnels in backorder, means the latest created must be removed first.</p><p>Usage (generic example for three tunnels):</p><pre class="screen">
# /sbin/route -A inet6 del &lt;prefixtoroute3&gt; dev sit3
# /sbin/ifconfig sit3 down

# /sbin/route -A inet6 del &lt;prefixtoroute2&gt; dev sit2
# /sbin/ifconfig sit2 down

# /sbin/route -A inet6 add &lt;prefixtoroute1&gt; dev sit1
# /sbin/ifconfig sit1 down

# /sbin/ifconfig sit0 down

</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57924016"></a>3.2.3. Using "route"</h4></div></div></div><p>This is like removing normal IPv6 routes.
</p><p>Usage (generic example for three tunnels):</p><pre class="screen">
# /sbin/route -A inet6 del &lt;prefixtoroute1&gt; gw
¬ ::&lt;ipv4addressofforeigntunnel1&gt; dev sit0
# /sbin/route -A inet6 del &lt;prefixtoroute2&gt; gw
¬ ::&lt;ipv4addressofforeigntunnel2&gt; dev sit0
# /sbin/route -A inet6 del &lt;prefixtoroute3&gt; gw
¬ ::&lt;ipv4addressofforeigntunnel3&gt; dev sit0

# /sbin/ifconfig sit0 down
</pre></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57926384"></a>3.3. Numbered point-to-point tunnels</h3></div></div></div><p>Sometimes it's needed to configure a point-to-point tunnel with IPv6 addresses like in IPv4 today. This is only possible with the first (ifconfig+route - deprecated) and third (ip+route) tunnel setup. In such cases, you can add the IPv6 address to the tunnel interface like shown on interface configuration. </p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configuring-ipv6to4-tunnels"></a>4. Setup of 6to4 tunnels</h2></div></div></div><p>Pay attention that the support of 6to4 tunnels currently lacks on vanilla kernel series 2.2.x (see <a class="link" href="#systemcheck-kernel" title="1. IPv6-ready kernel">systemcheck/kernel</a> for more information). Also note that that the prefix length for a 6to4 address is 16 because of from network point of view, all other 6to4 enabled hosts are on the same layer 2.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57930464"></a>4.1. Add a 6to4 tunnel</h3></div></div></div><p>First, you have to calculate your 6to4 prefix using your local assigned global routable IPv4 address (if your host has no global routable IPv4 address, in special cases NAT on border gateways is possible):</p><p>Assuming your IPv4 address is </p><pre class="screen">
1.2.3.4
</pre><p>the generated 6to4 prefix will be</p><pre class="screen">
2002:0102:0304::
</pre><p>Local 6to4 gateways should (but it's not a must, you can choose an arbitrary suffix with local-scope, if you feel better) always assigned the suffix &#8221;::1&#8221;, therefore your local 6to4 address will be</p><pre class="screen">
2002:0102:0304::1
</pre><p>Use e.g. following for automatic generation:</p><pre class="screen">
ipv4="1.2.3.4"; printf "2002:%02x%02x:%02x%02x::1" `echo $ipv4 | tr "." " "`
</pre><p>There are two ways possible to setup 6to4 tunneling now.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57935760"></a>4.1.1. Using "ip" and a dedicated tunnel device</h4></div></div></div><p>This is now the recommended way (a TTL must be specified because the default value is 0).</p><p>Create a new tunnel device</p><pre class="screen">
# /sbin/ip tunnel add tun6to4 mode sit ttl &lt;ttldefault&gt; remote any local
¬ &lt;localipv4address&gt; 
</pre><p>Bring interface up</p><pre class="screen">
# /sbin/ip link set dev tun6to4 up 
</pre><p>Add local 6to4 address to interface (note: prefix length 16 is important!)</p><pre class="screen">
# /sbin/ip -6 addr add &lt;local6to4address&gt;/16 dev tun6to4 
</pre><p>Add (default) route to the global IPv6 network using the all-6to4-routers IPv4 anycast address</p><pre class="screen">
# /sbin/ip -6 route add default via ::192.88.99.1 dev tun6to4 metric 1
</pre><p>It was reported that some versions of &#8221;ip&#8221; (e.g. SuSE Linux 9.0) don't support IPv4-compatible IPv6 addresses for gateways, in this case the related IPv6 address has to be used:</p><pre class="screen">
# /sbin/ip -6 route add default via 2002:c058:6301::1 dev tun6to4 metric 1
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57942096"></a>4.1.2. Using "ifconfig" and "route" and generic tunnel device &#8221;sit0&#8221; (deprecated)</h4></div></div></div><p>This is now deprecated because using the generic tunnel device sit0 doesn't let specify filtering per device.</p><p>Bring generic tunnel interface sit0 up</p><pre class="screen">
# /sbin/ifconfig sit0 up 
</pre><p>Add local 6to4 address to interface</p><pre class="screen">
# /sbin/ifconfig sit0 add &lt;local6to4address&gt;/16
</pre><p>Add (default) route to the global IPv6 network using the all-6to4-relays IPv4 anycast address</p><pre class="screen">
# /sbin/route -A inet6 add default gw ::192.88.99.1 dev sit0
</pre></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57946048"></a>4.2. Remove a 6to4 tunnel</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57946688"></a>4.2.1. Using "ip" and a dedicated tunnel device</h4></div></div></div><p>Remove all routes through this dedicated tunnel device</p><pre class="screen">
# /sbin/ip -6 route flush dev tun6to4
</pre><p>Shut down interface</p><pre class="screen">
# /sbin/ip link set dev tun6to4 down
</pre><p>Remove created tunnel device</p><pre class="screen">
# /sbin/ip tunnel del tun6to4 
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57949776"></a>4.2.2. Using &#8221;ifconfig&#8221; and &#8221;route&#8221; and generic tunnel device &#8221;sit0&#8221; (deprecated)</h4></div></div></div><p>Remove (default) route through the 6to4 tunnel interface</p><pre class="screen">
# /sbin/route -A inet6 del default gw ::192.88.99.1 dev sit0
</pre><p>Remove local 6to4 address to interface</p><pre class="screen">
# /sbin/ifconfig sit0 del &lt;local6to4address&gt;/16
</pre><p>Shut down generic tunnel device (take care about this, perhaps it's still in use...)</p><pre class="screen">
# /sbin/ifconfig sit0 down 
</pre></div></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chapter-configuring-ipv4-in-ipv6-tunnels"></a>Chapter 10. Configuring IPv4-in-IPv6 tunnels</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#idp57955696">1. Displaying existing tunnels</a></span></dt><dt><span class="sect1"><a href="#idp57958976">2. Setup of point-to-point tunnel</a></span></dt><dt><span class="sect1"><a href="#idp57961520">3. Removing point-to-point tunnels</a></span></dt></dl></div><p><a class="ulink" href="http://www.faqs.org/rfcs/rfc2473.html" target="_top">RFC 2473 / Generic Packet Tunneling in IPv6 Specification</a> specifies mechanisms to tunnel several different packet types over IPv6 including IPv4.</p><p>NOTE: Support for IPv4-in-IPv6 tunnel is available only since kernel version 2.6.22.</p><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57955696"></a>1. Displaying existing tunnels</h2></div></div></div><p>Usage:</p><pre class="screen">
# /sbin/ip -6 tunnel show [&lt;device&gt;]
</pre><p>Example:</p><pre class="screen">
# /sbin/ip -6 tunnel show mode any
ip6tnl0: ipv6/ipv6 remote :: local :: encaplimit 0 hoplimit 0 tclass 0x00
¬ flowlabel 0x00000 (flowinfo 0x00000000)
ip6tnl1: ip/ipv6 remote fd00:0:0:2::a local fd00:0:0:2::1 dev eth1 encaplimit 4
¬ hoplimit 64 tclass 0x00 flowlabel 0x00000 (flowinfo 0x00000000)
</pre><p>NOTE: If you don't include "mode any", only IPv6-in-IPv6 tunnels are displayed.</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57958976"></a>2. Setup of point-to-point tunnel</h2></div></div></div><p>Usage for creating a 4over6 tunnel device (but it's not up afterward)</p><pre class="screen">
# /sbin/ip tunnel add &lt;device&gt; mode ip4ip6 remote &lt;ipv6addressofforeigntunnel&gt;
¬ local &lt;ipv6addresslocal&gt;
</pre><p>Usage (generic example for three tunnels):</p><pre class="screen">
# /sbin/ip -6 tunnel add ip6tnl1 mode ip4ip6 remote
¬ &lt;ipv6addressofforeigntunnel1&gt; local &lt;ipv6addresslocal&gt;
# /sbin/ip link set dev ip6tnl1 up 
# /sbin/ip -6 route add &lt;prefixtoroute1&gt; dev ip6tnl1 metric 1

# /sbin/ip -6 tunnel add ip6tnl2 mode ip4ip6 remote
¬ &lt;ipv6addressofforeigntunnel2&gt; local &lt;ipv6addresslocal&gt;
# /sbin/ip link set dev ip6tnl2 up
# /sbin/ip -6 route add &lt;prefixtoroute2&gt; dev ip6tnl2 metric 1

# /sbin/ip -6 tunnel add ip6tnl3 mode ip4ip6 remote
¬ &lt;ipv6addressofforeigntunnel3&gt; local &lt;ipv6addresslocal&gt;
# /sbin/ip link set dev ip6tnl3 up
# /sbin/ip -6 route add &lt;prefixtoroute3&gt; dev ip6tnl3 metric 1
</pre></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57961520"></a>3. Removing point-to-point tunnels</h2></div></div></div><p>Usage for removing a tunnel device:</p><pre class="screen">
# /sbin/ip -6 tunnel del &lt;device&gt;
</pre><p>Usage (generic example for three tunnels):</p><pre class="screen">
# /sbin/ip -6 route del &lt;prefixtoroute1&gt; dev ip6tnl1
# /sbin/ip link set ip6tnl1 down
# /sbin/ip -6 tunnel del ip6tnl1

# /sbin/ip -6 route del &lt;prefixtoroute2&gt; dev ip6tnl2
# /sbin/ip link set ip6tnl2 down
# /sbin/ip -6 tunnel del ip6tnl2

# /sbin/ip -6 route del &lt;prefixtoroute3&gt; dev ip6tnl3
# /sbin/ip link set ip6tnl3 down
# /sbin/ip -6 tunnel del ip6tnl3 
</pre></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chapter-kernel-settings"></a>Chapter 11. Kernel settings in /proc-filesystem</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#idp57967952">1. How to access the /proc-filesystem</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57968592">1.1. Using &#8221;cat&#8221; and &#8221;echo&#8221;</a></span></dt><dt><span class="sect2"><a href="#idp57976976">1.2. Using &#8221;sysctl&#8221;</a></span></dt><dt><span class="sect2"><a href="#idp57986480">1.3. Values found in /proc-filesystems</a></span></dt></dl></dd><dt><span class="sect1"><a href="#proc-sys-net-ipv6.">2. Entries in /proc/sys/net/ipv6/</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57990128">2.1. conf/default/*</a></span></dt><dt><span class="sect2"><a href="#idp57991024">2.2. conf/all/*</a></span></dt><dt><span class="sect2"><a href="#idp57996432">2.3. conf/interface/*</a></span></dt><dt><span class="sect2"><a href="#idp58024768">2.4. neigh/default/*</a></span></dt><dt><span class="sect2"><a href="#idp58035392">2.5. neigh/interface/*</a></span></dt><dt><span class="sect2"><a href="#idp58059328">2.6. route/*</a></span></dt></dl></dd><dt><span class="sect1"><a href="#proc-sys-net-ipv4.">3. IPv6-related entries in /proc/sys/net/ipv4/</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58077904">3.1. ip_*</a></span></dt><dt><span class="sect2"><a href="#idp58079440">3.2. tcp_*</a></span></dt><dt><span class="sect2"><a href="#idp58080336">3.3. icmp_*</a></span></dt><dt><span class="sect2"><a href="#idp58081424">3.4. others</a></span></dt></dl></dd><dt><span class="sect1"><a href="#proc-net">4. IPv6-related entries in /proc/net/</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58083872">4.1. if_inet6</a></span></dt><dt><span class="sect2"><a href="#idp58090512">4.2. ipv6_route</a></span></dt><dt><span class="sect2"><a href="#idp58099104">4.3. sockstat6</a></span></dt><dt><span class="sect2"><a href="#idp58101456">4.4. tcp6</a></span></dt><dt><span class="sect2"><a href="#idp58102352">4.5. udp6</a></span></dt><dt><span class="sect2"><a href="#idp58103248">4.6. igmp6</a></span></dt><dt><span class="sect2"><a href="#idp58104144">4.7. raw6</a></span></dt><dt><span class="sect2"><a href="#idp58105040">4.8. ip6_flowlabel</a></span></dt><dt><span class="sect2"><a href="#idp58105936">4.9. rt6_stats</a></span></dt><dt><span class="sect2"><a href="#idp58106832">4.10. snmp6</a></span></dt><dt><span class="sect2"><a href="#idp58108368">4.11. ip6_tables_names</a></span></dt></dl></dd></dl></div><p><a name="proc-filesystem"></a>Note: the source of this section is mostly the file &#8221;ip-sysctl.txt&#8221; which is included in current kernel sources in directory &#8221;Documentation/networking&#8221;. Credits to Pekka Savola for maintaining the IPv6-related part in this file. Also some text is more or less copied &amp; pasted into this document.</p><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57967952"></a>1. How to access the /proc-filesystem</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57968592"></a>1.1. Using &#8221;cat&#8221; and &#8221;echo&#8221;</h3></div></div></div><p>Using &#8221;cat&#8221; and &#8221;echo&#8221; is the simplest way to access the /proc filesystem, but some requirements are needed for that</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The /proc-filesystem had to be enabled in kernel, means on compiling following switch has to be set</p></li></ul></div><pre class="screen">
CONFIG_PROC_FS=y
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The /proc-filesystem was mounted before, which can be tested using</p></li></ul></div><pre class="screen">
# mount | grep "type proc"
none on /proc type proc (rw)
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>You need read and sometimes also write access (normally root only) to the /proc-filesystem</p></li></ul></div><p>Normally, only entries in /proc/sys/* are writable, the others are readonly and for information retrieving only.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57973568"></a>1.1.1. Retrieving a value</h4></div></div></div><p>The value of an entry can be retrieved using &#8221;cat&#8221;:</p><pre class="screen">
# cat /proc/sys/net/ipv6/conf/all/forwarding
0
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57975312"></a>1.1.2. Setting a value</h4></div></div></div><p>A new value can be set (if entry is writable) using &#8221;echo&#8221;:</p><pre class="screen">
# echo "1" &gt;/proc/sys/net/ipv6/conf/all/forwarding
</pre></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57976976"></a>1.2. Using &#8221;sysctl&#8221;</h3></div></div></div><p>Using the &#8221;sysctl&#8221; program to access the kernel switches is a modern method today. You can use it also, if the /proc-filesystem isn't mounted. But you have only access to /proc/sys/*!</p><p>The program &#8221;sysctl&#8221; is included in package &#8221;procps&#8221; (on Red Hat Linux systems).</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The sysctl-interface had to be enabled in kernel, means on compiling following switch has to be set</p></li></ul></div><pre class="screen">
CONFIG_SYSCTL=y
</pre><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57980080"></a>1.2.1. Retrieving a value</h4></div></div></div><p>The value of an entry can be retrieved now:</p><pre class="screen">
# sysctl net.ipv6.conf.all.forwarding
net.ipv6.conf.all.forwarding = 0
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57981632"></a>1.2.2. Setting a value</h4></div></div></div><p>A new value can be set (if entry is writable):</p><pre class="screen">
# sysctl -w net.ipv6.conf.all.forwarding=1
net.ipv6.conf.all.forwarding = 1
</pre><p>Note: Don't use spaces around the &#8221;=&#8221; on setting values. Also on multiple values per line, quote them like e.g.</p><pre class="screen">
# sysctl -w net.ipv4.ip_local_port_range="32768 61000"
net.ipv4.ip_local_port_range = 32768 61000
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57984080"></a>1.2.3. Additionals</h4></div></div></div><p>Note: There are sysctl versions in the wild which displaying &#8221;/&#8221; instead of the &#8221;.&#8221;</p><p>For more details take a look into sysctl's manpage.</p><p>Hint: for digging fast into the settings, use the option &#8221;-a&#8221; (display all entries) in conjunction with &#8221;grep&#8221;.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57986480"></a>1.3. Values found in /proc-filesystems</h3></div></div></div><p>There are several formats seen in /proc-filesystem:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>BOOLEAN: simple a &#8221;0&#8221; (false) or a &#8221;1&#8221; (true)</p></li><li class="listitem"><p>INTEGER: an integer value, can be unsigned, too</p></li><li class="listitem"><p>more sophisticated lines with several values: sometimes a header line is displayed also, if not, have a look into the kernel source to retrieve information about the meaning of each value...</p></li></ul></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="proc-sys-net-ipv6."></a>2. Entries in /proc/sys/net/ipv6/</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57990128"></a>2.1. conf/default/*</h3></div></div></div><p>Change the interface-specific default settings.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57991024"></a>2.2. conf/all/*</h3></div></div></div><p>Change all the interface-specific settings.</p><p>Exception: &#8221;conf/all/forwarding&#8221; has a different meaning here</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57992448"></a>2.2.1. conf/all/forwarding</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: BOOLEAN</p></li></ul></div><p>This enables global IPv6 forwarding between all interfaces.</p><p>In IPv6 you can't control forwarding per device, forwarding control has to be done using IPv6-netfilter (controlled with ip6tables) rulesets and specify input and output devices (see <a class="link" href="#firewalling-netfilter6." title="1. Firewalling using netfilter6">Firewalling/Netfilter6</a> for more). This is different to IPv4, where you are able to control forwarding per device (decision is made on interface where packet came in).</p><p>This also sets all interfaces' Host/Router setting 'forwarding' to the specified value. See below for details. This referred to as global forwarding.</p><p>If this value is 0, no IPv6 forwarding is enabled, packets never leave another interface, neither physical nor logical like e.g. tunnels.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57996432"></a>2.3. conf/interface/*</h3></div></div></div><p>Change special settings per interface.</p><p>The functional behaviour for certain settings is different depending on whether local forwarding is enabled or not.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57997840"></a>2.3.1. accept_ra</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: BOOLEAN</p></li><li class="listitem"><p>Functional default: enabled if local forwarding is disabled. disabled if local forwarding is enabled.</p></li></ul></div><p>Accept Router Advertisements, and autoconfigure this interface with received data.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57999968"></a>2.3.2. accept_redirects</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: BOOLEAN</p></li><li class="listitem"><p>Functional default: enabled if local forwarding is disabled. disabled if local forwarding is enabled.</p></li></ul></div><p>Accept Redirects sent by an IPv6 router.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58002000"></a>2.3.3. autoconf</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: BOOLEAN</p></li><li class="listitem"><p>Functional default: enabled if accept_ra_pinfo is enabled. disabled if accept_ra_pinfo is disabled.</p></li></ul></div><p>Autoconfigure addresses using prefix information from router advertisements.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58004128"></a>2.3.4. dad_transmits</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 1</p></li></ul></div><p>The amount of Duplicate Address Detection probes to send.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58006128"></a>2.3.5. forwarding</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: BOOLEAN</p></li><li class="listitem"><p>Default: FALSE if global forwarding is disabled (default), otherwise TRUE</p></li></ul></div><p>Configure interface-specific Host/Router behaviour.</p><p>Note: It is recommended to have the same setting on all interfaces; mixed router/host scenarios are rather uncommon.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Value FALSE: By default, Host behaviour is assumed. This means:</p></li></ul></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>IsRouter flag is not set in Neighbour Advertisements.</p></li><li class="listitem"><p>Router Solicitations are being sent when necessary.</p></li><li class="listitem"><p>If accept_ra is TRUE (default), accept Router Advertisements (and do autoconfiguration).</p></li><li class="listitem"><p>If accept_redirects is TRUE (default), accept Redirects.</p></li></ol></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Value TRUE: If local forwarding is enabled, Router behaviour is assumed. This means exactly the reverse from the above:</p></li></ul></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>IsRouter flag is set in Neighbour Advertisements.</p></li><li class="listitem"><p>Router Solicitations are not sent.</p></li><li class="listitem"><p>Router Advertisements are ignored.</p></li><li class="listitem"><p>Redirects are ignored.</p></li></ol></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58014880"></a>2.3.6. hop_limit</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 64</p></li></ul></div><p>Default Hop Limit to set.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58016800"></a>2.3.7. mtu</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 1280 (IPv6 required minimum)</p></li></ul></div><p>Default Maximum Transfer Unit</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58018720"></a>2.3.8. router_solicitation_delay</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 1</p></li></ul></div><p>Number of seconds to wait after interface is brought up before sending Router Solicitations.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58020752"></a>2.3.9. router_solicitation_interval</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 4</p></li></ul></div><p>Number of seconds to wait between Router Solicitations. </p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58022752"></a>2.3.10. router_solicitations</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 3</p></li></ul></div><p>Number of Router Solicitations to send until assuming no routers are present.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58024768"></a>2.4. neigh/default/*</h3></div></div></div><p>Change default settings for neighbor detection and some special global interval and threshold values:</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58025776"></a>2.4.1. gc_thresh1</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 128</p></li></ul></div><p>More to be filled.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58027696"></a>2.4.2. gc_thresh2</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 512</p></li></ul></div><p>More to be filled.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58029616"></a>2.4.3. gc_thresh3</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 1024</p></li></ul></div><p>Tuning parameter for neighbour table size.</p><p>Increase this value if you have a lot of interfaces and problem with routes start to act mysteriously and fail. Or if a running <a class="ulink" href="http://www.zebra.org/" target="_top">Zebra (routing daemon)</a>  reports:</p><pre class="screen">
ZEBRA: netlink-listen error: No buffer space available, type=RTM_NEWROUTE(24),
¬ seq=426, pid=0
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58033184"></a>2.4.4. gc_interval</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 30</p></li></ul></div><p>More to be filled.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58035392"></a>2.5. neigh/interface/*</h3></div></div></div><p>Change special settings per interface for neighbor detection.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58036288"></a>2.5.1. anycast_delay</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 100</p></li></ul></div><p>More to be filled.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58038208"></a>2.5.2. gc_stale_time</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 60</p></li></ul></div><p>More to be filled.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58040128"></a>2.5.3. proxy_qlen</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 64</p></li></ul></div><p>More to be filled.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58042048"></a>2.5.4. unres_qlen</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 3</p></li></ul></div><p>More to be filled.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58043968"></a>2.5.5. app_solicit</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 0</p></li></ul></div><p>More to be filled.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58045888"></a>2.5.6. locktime</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 0</p></li></ul></div><p>More to be filled.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58047808"></a>2.5.7. retrans_time</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 100</p></li></ul></div><p>More to be filled.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58049728"></a>2.5.8. base_reachable_time</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 30</p></li></ul></div><p>More to be filled.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58051648"></a>2.5.9. mcast_solicit</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 3</p></li></ul></div><p>More to be filled.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58053568"></a>2.5.10. ucast_solicit</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 3</p></li></ul></div><p>More to be filled</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58055488"></a>2.5.11. delay_first_probe_time</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 5</p></li></ul></div><p>More to be filled.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58057408"></a>2.5.12. proxy_delay</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 80</p></li></ul></div><p>More to be filled.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58059328"></a>2.6. route/*</h3></div></div></div><p>Change global settings for routing.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58060224"></a>2.6.1. flush</h4></div></div></div><p>Removed in newer kernel releases - more to be filled.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58061120"></a>2.6.2. gc_interval</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 30</p></li></ul></div><p>More to be filled.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58063040"></a>2.6.3. gc_thresh</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 1024</p></li></ul></div><p>More to be filled.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58064960"></a>2.6.4. mtu_expires</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 600</p></li></ul></div><p>More to be filled.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58066880"></a>2.6.5. gc_elasticity</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 0</p></li></ul></div><p>More to be filled.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58068800"></a>2.6.6. gc_min_interval</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 5</p></li></ul></div><p>More to be filled.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58070720"></a>2.6.7. gc_timeout</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 60</p></li></ul></div><p>More to be filled.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58072640"></a>2.6.8. min_adv_mss</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 12</p></li></ul></div><p>More to be filled.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58074560"></a>2.6.9. max_size</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: INTEGER</p></li><li class="listitem"><p>Default: 4096</p></li></ul></div><p>More to be filled.</p></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="proc-sys-net-ipv4."></a>3. IPv6-related entries in /proc/sys/net/ipv4/</h2></div></div></div><p>At the moment (and this will be until IPv4 is completly converted to an independend kernel module) some switches are also used here for IPv6.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58077904"></a>3.1. ip_*</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58078544"></a>3.1.1. ip_local_port_range</h4></div></div></div><p>This control setting is used by IPv6 also.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58079440"></a>3.2. tcp_*</h3></div></div></div><p>This control settings are used by IPv6 also.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58080336"></a>3.3. icmp_*</h3></div></div></div><p>This control settings are not used by IPv6. To enable ICMPv6 rate limiting (which is very recommended because of the capability of ICMPv6 storms) netfilter-v6 rules must be used.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58081424"></a>3.4. others</h3></div></div></div><p>Unknown, but probably not used by IPv6.</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="proc-net"></a>4. IPv6-related entries in /proc/net/</h2></div></div></div><p>In /proc/net there are several read-only entries available. You cannot retrieve information using &#8221;sysctl&#8221; here, so use e.g. &#8221;cat&#8221;.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58083872"></a>4.1. if_inet6</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: One line per addresss containing multiple values</p></li></ul></div><p>Here all configured IPv6 addresses are shown in a special format. The example displays for loopback interface only. The meaning is shown below (see &#8221;net/ipv6/addrconf.c&#8221; for more).</p><pre class="screen">
# cat /proc/net/if_inet6
00000000000000000000000000000001 01 80 10 80 lo
+------------------------------+ ++ ++ ++ ++ ++
|                                |  |  |  |  |
1                                2  3  4  5  6
</pre><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>IPv6 address displayed in 32 hexadecimal chars without colons as separator</p></li><li class="listitem"><p>Netlink device number (interface index) in hexadecimal (see &#8221;ip addr&#8221; , too)</p></li><li class="listitem"><p>Prefix length in hexadecimal</p></li><li class="listitem"><p>Scope value (see kernel source &#8221; include/net/ipv6.h&#8221; and &#8221;net/ipv6/addrconf.c&#8221; for more)</p></li><li class="listitem"><p>Interface flags (see &#8221;include/linux/rtnetlink.h&#8221; and &#8221;net/ipv6/addrconf.c&#8221; for more)</p></li><li class="listitem"><p>Device name</p></li></ol></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58090512"></a>4.2. ipv6_route</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: One line per route containing multiple values</p></li></ul></div><p>Here all configured IPv6 routes are shown in a special format. The example displays for loopback interface only. The meaning is shown below (see &#8221;net/ipv6/route.c&#8221; for more).</p><pre class="screen">
# cat /proc/net/ipv6_route
00000000000000000000000000000000 00 00000000000000000000000000000000 00
+------------------------------+ ++ +------------------------------+ ++
|                                |  |                                |
1                                2  3                                4

¬ 00000000000000000000000000000000 ffffffff 00000001 00000001 00200200 lo
¬ +------------------------------+ +------+ +------+ +------+ +------+ ++
¬ |                                |        |        |        |        |
¬ 5                                6        7        8        9        10
</pre><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>IPv6 destination network displayed in 32 hexadecimal chars without colons as separator</p></li><li class="listitem"><p>IPv6 destination prefix length in hexadecimal</p></li><li class="listitem"><p>IPv6 source network displayed in 32 hexadecimal chars without colons as separator</p></li><li class="listitem"><p>IPv6 source prefix length in hexadecimal</p></li><li class="listitem"><p>IPv6 next hop displayed in 32 hexadecimal chars without colons as separator</p></li><li class="listitem"><p>Metric in hexadecimal</p></li><li class="listitem"><p>Reference counter</p></li><li class="listitem"><p>Use counter</p></li><li class="listitem"><p>Flags</p></li><li class="listitem"><p>Device name</p></li></ol></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58099104"></a>4.3. sockstat6</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: One line per protocol with description and value</p></li></ul></div><p>Statistics about used IPv6 sockets. Example:</p><pre class="screen">
# cat /proc/net/sockstat6
TCP6: inuse 7 
UDP6: inuse 2 
RAW6: inuse 1 
FRAG6: inuse 0 memory 0
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58101456"></a>4.4. tcp6</h3></div></div></div><p>To be filled.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58102352"></a>4.5. udp6</h3></div></div></div><p>To be filled.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58103248"></a>4.6. igmp6</h3></div></div></div><p>To be filled.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58104144"></a>4.7. raw6</h3></div></div></div><p>To be filled.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58105040"></a>4.8. ip6_flowlabel</h3></div></div></div><p>To be filled.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58105936"></a>4.9. rt6_stats</h3></div></div></div><p>To be filled.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58106832"></a>4.10. snmp6</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Type: One line per SNMP description and value</p></li></ul></div><p>SNMP statistics, can be retrieved via SNMP server and related MIB table by network management software.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58108368"></a>4.11. ip6_tables_names</h3></div></div></div><p>Available netfilter6 tables</p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="netlink"></a>Chapter 12. Netlink-Interface to kernel</h1></div></div></div><p>To be filled...I have no experience with that...</p></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="resolver"></a>Chapter 13. Address Resolver &amp; Selection</h1></div></div></div><p>Additional info can be found at</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.bieringer.de/linux/IPv6/getaddrinfo/" target="_top">Linux &amp; IPv6: getaddrinfo and search domains - Research</a></p></li><li class="listitem"><p><a class="ulink" href="http://people.redhat.com/drepper/linux-rfc3484.html" target="_top">RFC 3484 on Linux</a> </p></li><li class="listitem"><p>Karl Auer's Blog: <a class="ulink" href="http://biplane.com.au/blog/?p=30" target="_top">Controlling IPv6 source address selection</a> , <a class="ulink" href="http://biplane.com.au/blog/?p=22" target="_top">IPv6 Source Address Selection - what, why, how</a></p></li><li class="listitem"><p>Into6: <a class="ulink" href="http://into6.com.au/?p=288" target="_top">/etc/gai.conf - it ain't what you think it is</a></p></li></ul></div><h2><a name="idp58116208"></a>Address Resolver &amp; Destination Address Selection</h2><p>Name to IPv4 or IPv6 address resolving is usually done using a libc resolver library. Usually the function <span class="emphasis"><em>getaddrinfo</em></span> is used for that. In case of more than one IPv6 address is returned, according to <a class="ulink" href="http://www.faqs.org/rfcs/rfc3484.html" target="_top">RFC 3484 / Default Address Selection for Internet Protocol version 6</a> a sorting should be applied, which can be optionally configured.</p><p>The &#8221;magic&#8221; is controlled by a file named /etc/gai.conf (it can be that it is empty or missing by default). Default is usually somewhere stored in documentation, see &#8221;man gai.conf&#8221; or e.g. /usr/share/doc/glibc-common/gai.conf.</p><p>For controlling sort order by configuration following are needed for testing:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>A host in DNS returning more than one IPv6 address, e.g.</p></li></ul></div><pre class="screen">
$ dig +short aaaa st1.bieringer.de
2001:4dd0:ff00:834::2
2a01:238:423d:8800:85b3:9e6b:3019:8909 
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Lookup via DNS (/etc/hosts won't work)</p></li><li class="listitem"><p>/etc/gai.conf with proper config, e.g.</p></li></ul></div><pre class="screen">
precedence  ::1/128       50            # default
precedence  ::/0          40            # default
precedence  2002::/16     30            # default
precedence ::/96          20            # default
precedence ::ffff:0:0/96  10            # default
precedence 2001:4dd0:ff00:834::/64  80  # dst-A
precedence 2a01:238:423d:8800::/64  90  # dst-B
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>For tests use e.g. telnet client</p></li></ul></div><pre class="screen">
$ telnet st1.bieringer.de
Trying 2a01:238:423d:8800:85b3:9e6b:3019:8909...    (dst-B)
...
Trying 2001:4dd0:ff00:834::2...                     (dst-A)
...
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>If precedence is changed in configuration</p></li></ul></div><pre class="screen">
precedence 2001:4dd0:ff00:834::/64  90  # dst-A ex 80
precedence 2a01:238:423d:8800::/64  80  # dst-B ex 90
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The order is changed accordingly</p></li></ul></div><pre class="screen">
$ telnet st1.bieringer.de
Trying 2001:4dd0:ff00:834::2...                     (dst-A)
...
Trying 2a01:238:423d:8800:85b3:9e6b:3019:8909...    (dst-B)
...
</pre><h2><a name="idp58127856"></a>Source Address Selection</h2><p>Source address selection in Linux is done automatically by kernel and usually only using information from routing tables and try to match the same scope of address.</p><h3><a name="idp58129440"></a>Source Address Selection with &#8221;ip addrlabel&#8221;</h3><p>With extension of internal &#8221;ip addrlabel&#8221; a source address can be bound to a destination address (e.g. selected via mechanisms above). Binding means here: &#8221;same label&#8221; (label is a number).</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Default of &#8221;ip addrlabel&#8221; (here on CentOS 6):</p></li></ul></div><pre class="screen">
# ip addrlabel
prefix ::1/128 label 0 
prefix ::/96 label 3 
prefix ::ffff:0.0.0.0/96 label 4 
prefix 2001::/32 label 6 
prefix 2001:10::/28 label 7 
prefix 2002::/16 label 2 
prefix fc00::/7 label 5 
prefix ::/0 label 1 
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>System is multihomed (here on one interface), router provides 2 prefixes via radvd:</p></li></ul></div><pre class="screen">
# ip -6 addr show dev eth1 | grep -w inet6 |grep -w global
    inet6 2001:6f8:12d8:2:5054:ff:fefb:6582/64 scope global dynamic 
    inet6 2001:6f8:900:8cbc:5054:ff:fefb:6582/64 scope global dynamic 
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Connect now to server (shown above)</p></li></ul></div><pre class="screen">
$ telnet st1.bieringer.de
Trying 2001:4dd0:ff00:834::2...                     (dst-A)
...
Trying 2a01:238:423d:8800:85b3:9e6b:3019:8909...    (dst-B)
...
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Related tcpdump with filter &#8221;tcp and dst port 23&#8221; shows only the use of the upper local source IPv6 address</p></li></ul></div><pre class="screen">
IP6 2001:6f8:12d8:2:5054:ff:fefb:6582.37762 &gt; 2001:4dd0:ff00:834::2.telnet:                  (src-A -&gt; dst-A)
IP6 2001:6f8:12d8:2:5054:ff:fefb:6582.45754 &gt; 2a01:238:423d:8800:85b3:9e6b:3019:8909.telnet: (src-A -&gt; dst-B)
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Binding now source and destination with &#8221;ip addrlabel&#8221;</p></li></ul></div><pre class="screen">
# ip addrlabel add prefix 2001:6f8:12d8:2::/64 label 200
# ip addrlabel add prefix 2001:6f8:900:8cbc::/64 label 300
# ip addrlabel add prefix 2001:4dd0:ff00:834::/64 label 200
# ip addrlabel add prefix 2a01:238:423d:8800::/64 label 300
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Resulting &#8221;ip addrlabel&#8221;</p></li></ul></div><pre class="screen">
# ip addrlabel
prefix ::1/128 label 0 
prefix ::/96 label 3 
prefix ::ffff:0.0.0.0/96 label 4 
prefix 2a01:238:423d:8800::/64 label 300   # dst-B
prefix 2001:4dd0:ff00:834::/64 label 200   # dst-A
prefix 2001:6f8:900:8cbc::/64 label 300    # src-B
prefix 2001:6f8:12d8:2::/64 label 200      # src-A
prefix 2001::/32 label 6 
prefix 2001:10::/28 label 7 
prefix 2002::/16 label 2 
prefix fc00::/7 label 5 
prefix ::/0 label 1 
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Connect now to server again</p></li></ul></div><pre class="screen">
$ telnet st1.bieringer.de
Trying 2001:4dd0:ff00:834::2...                     (dst-A)
...
Trying 2a01:238:423d:8800:85b3:9e6b:3019:8909...    (dst-B)
...
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Related tcpdump with filter &#8221;tcp and dst port 23&#8221; shows now the use of both local source IPv6 addresses according to the configured pairs A and B</p></li></ul></div><pre class="screen">
IP6 2001:6f8:12d8:2:5054:ff:fefb:6582.37765   &gt; 2001:4dd0:ff00:834::2.telnet:                  (src-A -&gt; dst-A)
IP6 2001:6f8:900:8cbc:5054:ff:fefb:6582.39632 &gt; 2a01:238:423d:8800:85b3:9e6b:3019:8909.telnet: (src-B -&gt; dst-B)
</pre><p>Setup of persistent &#8221;ip addrtable&#8221; is probably currently not supported by Linux distributions, so extension of network init scripts or rc.local must be used for that. A script which uses information from /etc/gai.conf and configure &#8221;ip addrtable&#8221; accordingly can be found here: <a class="ulink" href="http://into6.com.au/?p=288" target="_top">/etc/gai.conf - it ain't what you think it is</a></p></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="network-debugging"></a>Chapter 14. Network debugging</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#idp58147360">1. Server socket binding</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58148000">1.1. Using &#8221;netstat&#8221; for server socket binding check</a></span></dt></dl></dd><dt><span class="sect1"><a href="#examples-tcpdump">2. Examples for tcpdump packet dumps</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58152480">2.1. Router discovery</a></span></dt><dt><span class="sect2"><a href="#idp58164896">2.2. Neighbor discovery</a></span></dt></dl></dd></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp58147360"></a>1. Server socket binding</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58148000"></a>1.1. Using &#8221;netstat&#8221; for server socket binding check</h3></div></div></div><p>It's always interesting which server sockets are currently active on a node. Using &#8221;netstat&#8221; is a short way to get such information: </p><p>Used options: -nlptu</p><p>Example:</p><pre class="screen">
# netstat -nlptu
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State      
¬ PID/Program name
tcp        0      0 0.0.0.0:32768           0.0.0.0:*               LISTEN     
¬ 1258/rpc.statd
tcp        0      0 0.0.0.0:32769           0.0.0.0:*               LISTEN     
¬ 1502/rpc.mountd
tcp        0      0 0.0.0.0:515             0.0.0.0:*               LISTEN     
¬ 22433/lpd Waiting
tcp        0      0 1.2.3.1:139             0.0.0.0:*               LISTEN     
¬ 1746/smbd
tcp        0      0 0.0.0.0:111             0.0.0.0:*               LISTEN     
¬ 1230/portmap
tcp        0      0 0.0.0.0:6000            0.0.0.0:*               LISTEN     
¬ 3551/X
tcp        0      0 1.2.3.1:8081            0.0.0.0:*               LISTEN     
¬ 18735/junkbuster
tcp        0      0 1.2.3.1:3128            0.0.0.0:*               LISTEN     
¬ 18822/(squid)
tcp        0      0 127.0.0.1:953           0.0.0.0:*               LISTEN     
¬ 30734/named
tcp        0      0 ::ffff:1.2.3.1:993      :::*                    LISTEN     
¬ 6742/xinetd-ipv6
tcp        0      0 :::13                   :::*                    LISTEN     
¬ 6742/xinetd-ipv6
tcp        0      0 ::ffff:1.2.3.1:143      :::*                    LISTEN     
¬ 6742/xinetd-ipv6
tcp        0      0 :::53                   :::*                    LISTEN     
¬ 30734/named
tcp        0      0 :::22                   :::*                    LISTEN     
¬ 1410/sshd
tcp        0      0 :::6010                 :::*                    LISTEN     
¬ 13237/sshd
udp        0      0 0.0.0.0:32768           0.0.0.0:*                          
¬ 1258/rpc.statd
udp        0      0 0.0.0.0:2049            0.0.0.0:*                          
¬ -
udp        0      0 0.0.0.0:32770           0.0.0.0:*                          
¬ 1502/rpc.mountd
udp        0      0 0.0.0.0:32771           0.0.0.0:*                          
¬ -
udp        0      0 1.2.3.1:137             0.0.0.0:*                          
¬ 1751/nmbd
udp        0      0 0.0.0.0:137             0.0.0.0:*                          
¬ 1751/nmbd
udp        0      0 1.2.3.1:138             0.0.0.0:*                          
¬ 1751/nmbd
udp        0      0 0.0.0.0:138             0.0.0.0:*                          
¬ 1751/nmbd
udp        0      0 0.0.0.0:33044           0.0.0.0:*                          
¬ 30734/named
udp        0      0 1.2.3.1:53              0.0.0.0:*                          
¬ 30734/named
udp        0      0 127.0.0.1:53            0.0.0.0:*                          
¬ 30734/named
udp        0      0 0.0.0.0:67              0.0.0.0:*                          
¬ 1530/dhcpd
udp        0      0 0.0.0.0:67              0.0.0.0:*                          
¬ 1530/dhcpd
udp        0      0 0.0.0.0:32858           0.0.0.0:*                          
¬ 18822/(squid)
udp        0      0 0.0.0.0:4827            0.0.0.0:*                          
¬ 18822/(squid)
udp        0      0 0.0.0.0:111             0.0.0.0:*                          
¬ 1230/portmap
udp        0      0 :::53                   :::*                               
¬ 30734/named
</pre></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="examples-tcpdump"></a>2. Examples for tcpdump packet dumps</h2></div></div></div><p>Here some examples of captured packets are shown, perhaps useful for your own debugging...</p><p>...more coming next...</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58152480"></a>2.1. Router discovery</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58153152"></a>2.1.1. Router advertisement</h4></div></div></div><pre class="screen">
15:43:49.484751 fe80::212:34ff:fe12:3450 &gt; ff02::1: icmp6: router
¬ advertisement(chlim=64, router_ltime=30, reachable_time=0,
¬ retrans_time=0)(prefix info: AR valid_ltime=30, preffered_ltime=20,
¬ prefix=2002:0102:0304:1::/64)(prefix info: LAR valid_ltime=2592000,
¬ preffered_ltime=604800, prefix=2001:0db8:0:1::/64)(src lladdr:
¬ 0:12:34:12:34:50) (len 88, hlim 255)
</pre><p>Router with link-local address &#8221;fe80::212:34ff:fe12:3450&#8221; send an advertisement to the all-node-on-link multicast address &#8221;ff02::1&#8221; containing two prefixes &#8221;2002:0102:0304:1::/64&#8221; (lifetime 30 s) and &#8221;2001:0db8:0:1::/64&#8221; (lifetime 2592000 s) including its own layer 2 MAC address &#8221;0:12:34:12:34:50&#8221;.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58156224"></a>2.1.2. Router solicitation</h4></div></div></div><pre class="screen">
15:44:21.152646 fe80::212:34ff:fe12:3456 &gt; ff02::2: icmp6: router solicitation
¬ (src lladdr: 0:12:34:12:34:56) (len 16, hlim 255)
</pre><p>Node with link-local address &#8221;fe80::212:34ff:fe12:3456&#8221; and layer 2 MAC address &#8221;0:12:34:12:34:56&#8221; is looking for a router on-link, therefore sending this solicitation to the all-router-on-link multicast address &#8221;ff02::2&#8221;.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58164896"></a>2.2. Neighbor discovery</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58165536"></a>2.2.1. Neighbor discovery solicitation for duplicate address detection</h4></div></div></div><p>Following packets are sent by a node with layer 2 MAC address &#8221;0:12:34:12:34:56&#8221; during autoconfiguration to check whether a potential address is already used by another node on the link sending this to the solicited-node link-local multicast address.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Node wants to configure its link-local address &#8221;fe80::212:34ff:fe12:3456&#8221;, checks for duplicate now</p></li></ul></div><pre class="screen">
15:44:17.712338 :: &gt; ff02::1:ff12:3456: icmp6: neighbor sol: who has
¬ fe80::212:34ff:fe12:3456(src lladdr: 0:12:34:12:34:56) (len 32, hlim 255)
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Node wants to configure its global address &#8221;2002:0102:0304:1:212:34ff:fe12:3456&#8221; (after receiving advertisement shown above), checks for duplicate now</p></li></ul></div><pre class="screen">
15:44:21.905596 :: &gt; ff02::1:ff12:3456: icmp6: neighbor sol: who has
¬ 2002:0102:0304:1:212:34ff:fe12:3456(src lladdr: 0:12:34:12:34:56) (len 32,
¬ hlim 255)
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Node wants to configure its global address &#8221;2001:0db8:0:1:212:34ff:fe12:3456&#8221; (after receiving advertisement shown above), checks for duplicate now</p></li></ul></div><pre class="screen">
15:44:22.304028 :: &gt; ff02::1:ff12:3456: icmp6: neighbor sol: who has
¬ 2001:0db8:0:1:212:34ff:fe12:3456(src lladdr: 0:12:34:12:34:56) (len 32, hlim
¬ 255)
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58171920"></a>2.2.2. Neighbor discovery solicitation for looking for host or gateway</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Node wants to send packages to &#8221;2001:0db8:0:1::10&#8221; but has no layer 2 MAC address to send packet, so send solicitation now</p></li></ul></div><pre class="screen">
13:07:47.664538 2002:0102:0304:1:2e0:18ff:fe90:9205 &gt; ff02::1:ff00:10: icmp6:
¬ neighbor sol: who has 2001:0db8:0:1::10(src lladdr: 0:e0:18:90:92:5) (len 32,
¬ hlim 255)
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Node looks for &#8221;fe80::10&#8221; now</p></li></ul></div><pre class="screen">
13:11:20.870070 fe80::2e0:18ff:fe90:9205 &gt; ff02::1:ff00:10: icmp6: neighbor
¬ sol: who has fe80::10(src lladdr: 0:e0:18:90:92:5) (len 32, hlim 255)
</pre></div></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chapter-support-persistent-configuration"></a>Chapter 15. Support for persistent IPv6 configuration in Linux distributions</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#idp58177824">1. Red Hat Linux and &#8221;clones&#8221;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58183264">1.1. Test for IPv6 support of network configuration scripts</a></span></dt><dt><span class="sect2"><a href="#idp58188944">1.2. Short hint for enabling IPv6 on current RHL 7.1, 7.2, 7.3, ...</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp58195200">2. SuSE Linux</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58196736">2.1. SuSE Linux 7.3</a></span></dt><dt><span class="sect2"><a href="#idp58198384">2.2. SuSE Linux 8.0</a></span></dt><dt><span class="sect2"><a href="#idp58201520">2.3. SuSE Linux 8.1</a></span></dt></dl></dd><dt><span class="sect1"><a href="#Configuration-Debian-Linux">3. Debian Linux</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58210288">3.1. Further information</a></span></dt></dl></dd></dl></div><p>Some Linux distribution contain already support of a persistent IPv6 configuration using existing or new configuration and script files and some hook in the IPv4 script files.</p><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp58177824"></a>1. Red Hat Linux and &#8221;clones&#8221;</h2></div></div></div><p>Since starting writing the <a class="ulink" href="http://www.bieringer.de/linux/IPv6/" target="_top">IPv6 &amp; Linux - HowTo</a> it was my intention to enable a persistent IPv6 configuration which catch most of the wished cases like host-only, router-only, dual-homed-host, router with second stub network, normal tunnels, 6to4 tunnels, and so on. Nowadays there exists a set of configuration and script files which do the job very well (never heard about real problems, but I don't know how many use the set). Because this configuration and script files are extended from time to time, they got their own homepage: <a class="ulink" href="http://www.deepspace6.net/projects/initscripts-ipv6.html" target="_top">initscripts-ipv6 homepage</a> (<a class="ulink" href="http://mirrors.bieringer.de/www.deepspace6.net/projects/initscripts-ipv6.html" target="_top">Mirror</a>). Because I began my IPv6 experience using a Red Hat Linux 5.0 clone, my IPv6 development systems are mostly Red Hat Linux based now, it's kind a logic that the scripts are developed for this kind of distribution (so called <span class="emphasis"><em>historic issue</em></span>). Also it was very easy to extend some configuration files, create new ones and create some simple hook for calling IPv6 setup during IPv4 setup.</p><p>Fortunately, in Red Hat Linux since 7.1 a snapshot of my IPv6 scripts is included, this was and is still further on assisted by Pekka Savola.</p><p>Mandrake since version 8.0 also includes an IPv6-enabled initscript package, but a minor bug still prevents usage (&#8221;ifconfig&#8221; misses &#8221;inet6&#8221; before &#8221;add&#8221;).</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58183264"></a>1.1. Test for IPv6 support of network configuration scripts</h3></div></div></div><p>You can test, whether your Linux distribution contain support for persistent IPv6 configuration using my set. Following script library should exist:</p><pre class="screen">
/etc/sysconfig/network-scripts/network-functions-ipv6
</pre><p>Auto-magically test:</p><pre class="screen">
# test -f /etc/sysconfig/network-scripts/network-functions-ipv6 &amp;&amp; echo "Main
¬ IPv6 script library exists"
</pre><p>The version of the library is important if you miss some features. You can get it executing following (or easier look at the top of the file):</p><pre class="screen">
# source /etc/sysconfig/network-scripts/network-functions-ipv6 &amp;&amp;
¬ getversion_ipv6_functions 
20011124
</pre><p>In shown example, the used version is 20011124. Check this against latest information on <a class="ulink" href="http://www.deepspace6.net/projects/initscripts-ipv6.html" target="_top">initscripts-ipv6 homepage</a> (<a class="ulink" href="http://mirrors.bieringer.de/www.deepspace6.net/projects/initscripts-ipv6.html" target="_top">Mirror</a>) to see what has been changed. You will find there also a change-log.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58188944"></a>1.2. Short hint for enabling IPv6 on current RHL 7.1, 7.2, 7.3, ...</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Check whether running system has already IPv6 module loaded</p></li></ul></div><pre class="screen">
# modprobe -c | grep net-pf-10
alias net-pf-10 off
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>If result is &#8221;off&#8221;, then enable IPv6 networking by editing /etc/sysconfig/network, add following new line</p></li></ul></div><pre class="screen">
NETWORKING_IPV6=yes
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Reboot or restart networking using</p></li></ul></div><pre class="screen">
# service network restart
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Now IPv6 module should be loaded</p></li></ul></div><pre class="screen">
# modprobe -c | grep ipv6
alias net-pf-10 ipv6
</pre><p>If your system is on a link which provides router advertisement, autoconfiguration will be done automatically. For more information which settings are supported see /usr/share/doc/initscripts-$version/sysconfig.txt.</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp58195200"></a>2. SuSE Linux</h2></div></div></div><p>In newer 7.x versions there is a really rudimentary support available, see /etc/rc.config for details.</p><p>Because of the really different configuration and script file structure it is hard (or impossible) to use the set for Red Hat Linux and clones with this distribution.
In versions 8.x they completly change their configuration setup. </p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58196736"></a>2.1. SuSE Linux 7.3</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.feyrer.de/IPv6/SuSE73-IPv6+6to4-setup.html" target="_top">How to setup 6to4 IPv6 with SuSE 7.3</a></p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58198384"></a>2.2. SuSE Linux 8.0</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58199024"></a>2.2.1. IPv6 address configuration</h4></div></div></div><p>Edit file /etc/sysconfig/network/ifcfg-&lt;Interface-Name&gt; and setup following value</p><pre class="screen">
IP6ADDR="&lt;ipv6-address&gt;/&lt;prefix&gt;"
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58200624"></a>2.2.2. Additional information</h4></div></div></div><p>See file /usr/share/doc/packages/sysconfig/README</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58201520"></a>2.3. SuSE Linux 8.1</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58202160"></a>2.3.1. IPv6 address configuration</h4></div></div></div><p>Edit file /etc/sysconfig/network/ifcfg-&lt;Interface-Name&gt; and setup following value</p><pre class="screen">
IPADDR="&lt;ipv6-address&gt;/&lt;prefix&gt;"
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58203664"></a>2.3.2. Additional information</h4></div></div></div><p>See file /usr/share/doc/packages/sysconfig/Network </p></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Configuration-Debian-Linux"></a>3. Debian Linux</h2></div></div></div><p>Following information was contributed by Stephane Bortzmeyer &lt;bortzmeyer at nic dot fr&gt;</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Be sure that IPv6 is loaded, either because it is compiled into the kernel or because the module is loaded. For the latest, three solutions, adding it to /etc/modules, using the pre-up trick shown later or using kmod (not detailed here).</p></li><li class="listitem"><p>Configure your interface. Here we assume eth0 and address (2001:0db8:1234:5::1:1). Edit /etc/network/interfaces:</p></li></ol></div><pre class="screen">
iface eth0 inet6 static
        pre-up modprobe ipv6
        address 2001:0db8:1234:5::1:1
        # To suppress completely autoconfiguration:
        # up echo 0 &gt; /proc/sys/net/ipv6/conf/all/autoconf
        netmask 64
        # The router is autoconfigured and has no fixed address.
        # It is magically
        # found. (/proc/sys/net/ipv6/conf/all/accept_ra). Otherwise:
        #gateway 2001:0db8:1234:5::1
</pre><p>And you reboot or you just</p><pre class="screen">
# ifup --force eth0
</pre><p>and you have your static address. </p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58210288"></a>3.1. Further information</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://ipv6.debian.net/" target="_top">IPv6 with Debian Linux</a></p></li><li class="listitem"><p>Jean-Marc V. Liotier's <a class="ulink" href="http://www.ruwenzori.net/ipv6/Jims_LAN_IPv6_global_connectivity_howto.html" target="_top">HOWTO for Freenet6 &amp; Debian Users</a> (announced 24.12.2002 on <a class="link" href="#information-maillists" title="5. Maillists">mailinglist</a> users@ipv6.org )</p></li></ul></div></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chapter-autoconfiguration"></a>Chapter 16. Auto-configuration</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#idp58214560">1. Stateless auto-configuration out-of-the-box</a></span></dt><dt><span class="sect1"><a href="#idp58216448">2. Stateless auto-configuration using Router Advertisement Daemon (radvd)</a></span></dt><dt><span class="sect1"><a href="#idp58218448">3. Dynamic Host Configuration Protocol v6 (DHCPv6)</a></span></dt></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp58214560"></a>1. Stateless auto-configuration out-of-the-box</h2></div></div></div><p>Is supported and seen on the assigned link-local address after an IPv6-enabled interface is up.</p><p>Example:</p><pre class="screen">
# ip -6 addr show dev eth0 scope link
2: eth0: &lt;BROADCAST,MULTICAST,UP&gt; mtu 1500 qlen1000
    inet6 fe80::211:d8ff:fe6b:f0f5/64 scope link
       valid_lft forever preferred_lft forever 
</pre></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp58216448"></a>2. Stateless auto-configuration using Router Advertisement Daemon (radvd)</h2></div></div></div><p>to be filled. See <a class="link" href="#hints-daemons-radvd" title="4. Router Advertisement Daemon (radvd)">radvd daemon autoconfiguration</a> below.</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp58218448"></a>3. Dynamic Host Configuration Protocol v6 (DHCPv6)</h2></div></div></div><p>After a long time discussing issues, finally <a class="ulink" href="http://www.faqs.org/rfcs/rfc3315.html" target="_top">RFC 3315 / Dynamic Host Configuration Protocol for IPv6 (DHCPv6)</a> was finished. At time updating this part (10/2005) currently two implementations are available:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://klub.com.pl/dhcpv6/" target="_top">Dibbler</a> by Tomasz Mrugalski &lt;thomson at klub dot com dot pl&gt; (<a class="link" href="#hints-daemons-dibbler" title="7. DHCP Server Dibbler">Hints for configuration</a>)</p></li><li class="listitem"><p><a class="ulink" href="https://fedorahosted.org/dhcpv6/" target="_top">dhcpv6</a> (<a class="link" href="#hints-daemons-dhcpv6." title="5. Dynamic Host Configuration v6 Server (dhcp6s)">Hints for configuration</a>)</p></li><li class="listitem"><p><a class="ulink" href="http://www.isc.org/software/dhcp" target="_top">ISC DHCP</a> (<a class="link" href="#hints-daemons-isc-dhcp" title="6. ISC Dynamic Host Configuration Server (dhcpd)">Hints for configuration</a>)</p></li></ul></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chapter-mobility"></a>Chapter 17. Mobility</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#idp58226016">1. Common information</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58226656">1.1. Node Mobility</a></span></dt><dt><span class="sect2"><a href="#idp58229728">1.2. Network Mobility</a></span></dt><dt><span class="sect2"><a href="#idp58232496">1.3. Links</a></span></dt></dl></dd></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp58226016"></a>1. Common information</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58226656"></a>1.1. Node Mobility</h3></div></div></div><p>Support for IPv6 mobility can be enabled in Linux by installing the MIPL2 implementation found at: <a class="ulink" href="http://www.mobile-ipv6.org/" target="_top">http://www.mobile-ipv6.org/</a></p><p>This implementation is compliant with RFC 3775. It is composed of a kernel patch and a mobility daemon called mip6d. Version 2.0.1 applies on Linux kernel 2.6.15.</p><p>Installation and setup are described in the <a class="ulink" href="http://tldp.org/HOWTO/Mobile-IPv6-HOWTO/" target="_top">Linux Mobile IPv6 HOWTO</a>.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58229728"></a>1.2. Network Mobility</h3></div></div></div><p>There also exists an implementation of network mobility for Linux, it is called NEPL and is based on MIPL. It can also be downloaded from: <a class="ulink" href="http://www.mobile-ipv6.org/" target="_top">http://www.mobile-ipv6.org/</a>.</p><p>The HOWTO document describing setup and configuration is available at: <a class="ulink" href="http://www.nautilus6.org/doc/nepl-howto/" target="_top">http://www.nautilus6.org/doc/nepl-howto/</a>.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58232496"></a>1.3. Links</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Mobile IPv6 for Linux (MIPL) project: <a class="ulink" href="http://www.mobile-ipv6.org/" target="_top">http://www.mobile-ipv6.org/</a></p></li><li class="listitem"><p>Nautilus6 working group: <a class="ulink" href="http://nautilus6.org/" target="_top">http://nautilus6.org/</a></p></li><li class="listitem"><p>Fast Handovers for Mobile IPv6 for Linux project: <a class="ulink" href="http://www.fmipv6.org/" target="_top">http://www.fmipv6.org/</a></p></li><li class="listitem"><p>USAGI-patched Mobile IPv6 for Linux (UMIP):<a class="ulink" href="http://umip.linux-ipv6.org/" target="_top">http://umip.linux-ipv6.org/</a></p></li><li class="listitem"><p>Deploying IPsec/IKE-protected MIPv6 under Linux:<a class="ulink" href="http://natisbad.org/MIPv6/" target="_top">http://natisbad.org/MIPv6/</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.faqs.org/rfcs/rfc3775.html" target="_top">RFC 3775 / Mobility Support in IPv6</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.faqs.org/rfcs/rfc3776.html" target="_top">RFC 3776 / Using IPsec to Protect Mobile IPv6 Signaling Between Mobile Nodes and Home Agents</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.faqs.org/rfcs/rfc3963.html" target="_top">RFC 3963 / Network Mobility (NEMO)</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.faqs.org/rfcs/rfc4068.html" target="_top">RFC 4068 / Fast Handovers for Mobile IPv6</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.faqs.org/rfcs/rfc4423.html" target="_top">RFC 4423 / Host Identity Protocol (HIP) Architecture</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.faqs.org/rfcs/rfc5201.html" target="_top">RFC 5201 / Host Identity Protocol</a></p></li><li class="listitem"><p>HIP implementations: <a class="ulink" href="http://infrahip.hiit.fi/" target="_top">http://infrahip.hiit.fi/</a>, <a class="ulink" href="http://hip4inter.net/" target="_top">http://hip4inter.net/</a>, <a class="ulink" href="http://www.openhip.org/" target="_top">http://www.openhip.org/</a></p></li></ul></div></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chapter-firewalling-security"></a>Chapter 18. Firewalling</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#firewalling-netfilter6.">1. Firewalling using netfilter6 </a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58251824">1.1. More information</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp58255904">2. Preparation</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58256960">2.1. Get sources</a></span></dt><dt><span class="sect2"><a href="#idp58259872">2.2. Extract sources</a></span></dt><dt><span class="sect2"><a href="#idp58263168">2.3. Apply latest iptables/IPv6-related patches to kernel source</a></span></dt><dt><span class="sect2"><a href="#idp58270480">2.4. Configure, build and install new kernel</a></span></dt><dt><span class="sect2"><a href="#idp58274272">2.5. Rebuild and install binaries of iptables</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp58285920">3. Usage of ip6tables</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58286560">3.1. Check for support</a></span></dt><dt><span class="sect2"><a href="#idp58288592">3.2. Learn how to use ip6tables</a></span></dt><dt><span class="sect2"><a href="#idp58324672">3.3. Examples</a></span></dt></dl></dd><dt><span class="sect1"><a href="#nat-netfilter6.">4. Network Address Translation (NAT) using netfilter6 </a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58337184">4.1. IPv6 Masquerading</a></span></dt><dt><span class="sect2"><a href="#idp58339024">4.2. IPv6 Destination NAT</a></span></dt><dt><span class="sect2"><a href="#idp58340464">4.3. IPv6 Port Forwarding</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp58354192">5. Firewalling using nftables</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58357792">5.1. Preparation for nftables usage</a></span></dt><dt><span class="sect2"><a href="#idp58358912">5.2. Basic nftables configuration</a></span></dt><dt><span class="sect2"><a href="#idp58363152">5.3. Simple filter policy with nftables using only table &#8221;inet&#8221;</a></span></dt><dt><span class="sect2"><a href="#idp58377456">5.4. Filter policy with nftables using tables &#8221;ip&#8221;, &#8221;ip6&#8221; and &#8221;inet&#8221;</a></span></dt></dl></dd></dl></div><p>IPv6 firewalling is important, especially if using IPv6 on internal networks with global IPv6 addresses. Because unlike at IPv4 networks where in common internal hosts are protected automatically using private IPv4 addresses like <a class="ulink" href="http://www.faqs.org/rfcs/rfc1918.html" target="_top">RFC 1918 / Address Allocation for Private Internets</a> or Automatic Private IP Addressing (APIPA)<a class="ulink" href="http://www.google.com/search?q=apipa+microsoft" target="_top">Google search for Microsoft + APIPA</a>, in IPv6 normally global addresses are used and someone with IPv6 connectivity can reach all internal IPv6 enabled nodes.</p><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="firewalling-netfilter6."></a>1. Firewalling using netfilter6 </h2></div></div></div><p>Native IPv6 firewalling is only supported in kernel versions 2.4+. In older 2.2- you can only filter IPv6-in-IPv4 by protocol 41. </p><p>Attention: no warranty that described rules or examples can really protect your system! </p><p>Audit your ruleset after installation, see <a class="xref" href="#IPv6-security-auditing" title="3. IPv6 security auditing">Section 3, &#8220;IPv6 security auditing&#8221;</a> for more.</p><p>Since kernel version 2.6.20 (February 2007) IPv6 connection tracking is fully working (and does not break IPv4 NAT anymore like versions before)</p><p>Since kernel version 3.9.0 (April 2013) NAT for IPv6 is supported with ip6tables &gt;= 1.4.18</p><p>Since kernel version 3.13 (April 2014) new framework introduced named: nftables</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58251824"></a>1.1. More information</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.netfilter.org/" target="_top">Netfilter project</a></p></li><li class="listitem"><p><a class="ulink" href="https://lists.netfilter.org/mailman/listinfo/netfilter" target="_top">maillist archive of netfilter users</a></p></li><li class="listitem"><p><a class="ulink" href="https://lists.netfilter.org/mailman/listinfo/netfilter-devel" target="_top">maillist archive of netfilter developers</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.bieringer.de/linux/IPv6/status/IPv6+Linux-status-kernel.html#netfilter6%20" target="_top">Unofficial status informations</a></p></li></ul></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp58255904"></a>2. Preparation</h2></div></div></div><p>This step is only needed if distributed kernel and netfilter doesn't fit your requirements and new features are available but still not built-in.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58256960"></a>2.1. Get sources</h3></div></div></div><p>Get the latest kernel source: <a class="ulink" href="http://www.kernel.org/" target="_top">http://www.kernel.org/</a></p><p>Get the latest iptables package: </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Source tarball (for kernel patches): <a class="ulink" href="http://www.netfilter.org/" target="_top">http://www.netfilter.org/</a></p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58259872"></a>2.2. Extract sources</h3></div></div></div><p>Change to source directory: </p><pre class="screen">
# cd /path/to/src 
</pre><p>Unpack and rename kernel sources </p><pre class="screen">
# tar z|jxf kernel-version.tar.gz|bz2 
# mv linux linux-version-iptables-version+IPv6 
</pre><p>Unpack iptables sources </p><pre class="screen">
# tar z|jxf iptables-version.tar.gz|bz2 
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58263168"></a>2.3. Apply latest iptables/IPv6-related patches to kernel source</h3></div></div></div><p>Change to iptables directory </p><pre class="screen">
# cd iptables-version 
</pre><p>Apply pending patches </p><pre class="screen">
# make pending-patches KERNEL_DIR=/path/to/src/linux-version-iptables-version/ 
</pre><p>Apply additional IPv6 related patches (still not in the vanilla kernel included) </p><pre class="screen">
# make patch-o-matic KERNEL_DIR=/path/to/src/linux-version-iptables-version/ 
</pre><p>Say yes at following options (iptables-1.2.2) </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ah-esp.patch </p></li><li class="listitem"><p>masq-dynaddr.patch (only needed for systems with dynamic IP assigned WAN connections like PPP or PPPoE) </p></li><li class="listitem"><p>ipv6-agr.patch.ipv6 </p></li><li class="listitem"><p>ipv6-ports.patch.ipv6 </p></li><li class="listitem"><p>LOG.patch.ipv6 </p></li><li class="listitem"><p>REJECT.patch.ipv6 </p></li></ul></div><p>Check IPv6 extensions </p><pre class="screen">
# make print-extensions 
Extensions found: IPv6:owner IPv6:limit IPv6:mac IPv6:multiport
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58270480"></a>2.4. Configure, build and install new kernel</h3></div></div></div><p>Change to kernel sources </p><pre class="screen">
# cd /path/to/src/linux-version-iptables-version/ 
</pre><p>Edit Makefile </p><pre class="screen">
- EXTRAVERSION = 
+ EXTRAVERSION = -iptables-version+IPv6-try 
</pre><p>Run configure, enable IPv6 related </p><pre class="screen">
            Code maturity level options 
                  Prompt for development and/or incomplete code/drivers : yes 
            Networking options 
                  Network packet filtering: yes 
                  The IPv6 protocol: module 
                       IPv6: Netfilter Configuration 
                             IP6 tables support: module 
                             All new options like following: 
                                   limit match support: module 
                                   MAC address match support: module 
                                   Multiple port match support: module 
                                   Owner match support: module 
                                   netfilter MARK match support: module 
                                   Aggregated address check: module 
                                   Packet filtering: module 
                                        REJECT target support: module 
                                        LOG target support: module 
                                   Packet mangling: module 
                                   MARK target support: module 
</pre><p>Configure other related to your system, too </p><p>Compilation and installing: see the kernel section here and other HOWTOs </p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58274272"></a>2.5. Rebuild and install binaries of iptables</h3></div></div></div><p>Make sure, that upper kernel source tree is also available at /usr/src/linux/ </p><p>Rename older directory </p><pre class="screen">
# mv /usr/src/linux /usr/src/linux.old 
</pre><p>Create a new softlink </p><pre class="screen">
# ln -s /path/to/src/linux-version-iptables-version /usr/src/linux 
</pre><p>Rebuild SRPMS </p><pre class="screen">
# rpm --rebuild /path/to/SRPMS/iptables-version-release.src.rpm 
</pre><p>Install new iptables packages (iptables + iptables-ipv6) </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>On RH 7.1 systems, normally, already an older version is installed, therefore use "freshen" </p></li></ul></div><pre class="screen">
# rpm -Fhv /path/to/RPMS/cpu/iptables*-version-release.cpu.rpm 
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>If not already installed, use "install" </p></li></ul></div><pre class="screen">
# rpm -ihv /path/to/RPMS/cpu/iptables*-version-release.cpu.rpm 
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>On RH 6.2 systems, normally, no kernel 2.4.x is installed, therefore the requirements don't fit. Use "--nodeps" to install it </p></li></ul></div><pre class="screen">
# rpm -ihv --nodeps /path/to/RPMS/cpu/iptables*-version-release.cpu.rpm 
</pre><p>Perhaps it's necessary to create a softlink for iptables libraries where iptables looks for them </p><pre class="screen">
# ln -s /lib/iptables/ /usr/lib/iptables 
</pre></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp58285920"></a>3. Usage of ip6tables</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58286560"></a>3.1. Check for support</h3></div></div></div><p>Load module, if so compiled </p><pre class="screen">
# modprobe ip6_tables 
</pre><p>Check for capability </p><pre class="screen">
# [ ! -f /proc/net/ip6_tables_names ] &amp;&amp; echo "Current kernel doesn't support
¬ 'ip6tables' firewalling (IPv6)!" 
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58288592"></a>3.2. Learn how to use ip6tables</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58289568"></a>3.2.1. List all IPv6 netfilter entries </h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Short </p></li></ul></div><pre class="screen">
# ip6tables -L 
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Extended </p></li></ul></div><pre class="screen">
# ip6tables -n -v --line-numbers -L 
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58292688"></a>3.2.2. List specified filter </h4></div></div></div><pre class="screen">
# ip6tables -n -v --line-numbers -L INPUT 
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58293936"></a>3.2.3. Insert a log rule at the input filter with options </h4></div></div></div><pre class="screen">
# ip6tables --table filter --append INPUT  -j LOG --log-prefix "INPUT:"
¬ --log-level 7 
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58295264"></a>3.2.4. Insert a drop rule at the input filter </h4></div></div></div><pre class="screen">
# ip6tables --table filter --append INPUT  -j DROP 
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58296528"></a>3.2.5. Delete a rule by number </h4></div></div></div><pre class="screen">
# ip6tables --table filter --delete INPUT 1 
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58297776"></a>3.2.6. Enable connection tracking</h4></div></div></div><p>Since kernel version 2.6.20 IPv6 connection tracking is well supported and should be used instead of using stateless filter rules.</p><pre class="screen">
# ip6tables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58299472"></a>3.2.7. Allow ICMPv6</h4></div></div></div><p>Using older kernels (unpatched kernel 2.4.5 and iptables-1.2.2) no type can be specified</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Accept incoming ICMPv6 through tunnels </p></li></ul></div><pre class="screen">
# ip6tables -A INPUT -i sit+ -p icmpv6 -j ACCEPT 
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Allow outgoing ICMPv6 through tunnels </p></li></ul></div><pre class="screen">
# ip6tables -A OUTPUT -o sit+ -p icmpv6 -j ACCEPT 
</pre><p>Newer kernels allow specifying of ICMPv6 types:</p><pre class="screen">
# ip6tables -A INPUT -p icmpv6 --icmpv6-type echo-request -j ACCEPT
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58303904"></a>3.2.8. Rate-limiting</h4></div></div></div><p>Because it can happen (author already saw it to times) that an ICMPv6 storm will raise up, you should use available rate limiting for at least ICMPv6 ruleset. In addition logging rules should also get rate limiting to prevent DoS attacks against syslog and storage of log file partition. An example for a rate limited ICMPv6 looks like:</p><pre class="screen">
# ip6tables -A INPUT --protocol icmpv6 --icmpv6-type echo-request
¬ -j ACCEPT --match limit --limit 30/minute
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58305536"></a>3.2.9. Allow incoming SSH</h4></div></div></div><p>Here an example is shown for a ruleset which allows incoming SSH connection from a specified IPv6 address </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Allow incoming SSH from 2001:0db8:100::1/128 </p></li></ul></div><pre class="screen">
# ip6tables -A INPUT -i sit+ -p tcp -s 2001:0db8:100::1/128 --sport 512:65535
¬ --dport 22 -j ACCEPT 
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Allow response packets (no longer needed if connection tracking is used!) </p></li></ul></div><pre class="screen">
# ip6tables -A OUTPUT -o sit+ -p tcp -d 2001:0db8:100::1/128 --dport 512:65535
¬ --sport 22 ! --syn -j ACCEPT 
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58309552"></a>3.2.10. Enable tunneled IPv6-in-IPv4</h4></div></div></div><p>To accept tunneled IPv6-in-IPv4 packets, you have to insert rules in your IPv4 firewall setup relating to such packets, for example </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Accept incoming IPv6-in-IPv4 on interface ppp0 </p></li></ul></div><pre class="screen">
# iptables -A INPUT -i ppp0 -p ipv6 -j ACCEPT 
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Allow outgoing IPv6-in-IPv4 to interface ppp0 </p></li></ul></div><pre class="screen">
# iptables -A OUTPUT -o ppp0 -p ipv6 -j ACCEPT 
</pre><p>If you have only a static tunnel, you can specify the IPv4 addresses, too, like </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Accept incoming IPv6-in-IPv4 on interface ppp0 from tunnel endpoint 192.0.2.2</p></li></ul></div><pre class="screen">
# iptables -A INPUT -i ppp0 -p ipv6 -s 192.0.2.2 -j ACCEPT 
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Allow outgoing IPv6-in-IPv4 to interface ppp0 to tunnel endpoint 192.0.2.2</p></li></ul></div><pre class="screen">
# iptables -A OUTPUT -o ppp0 -p ipv6 -d 192.0.2.2 -j ACCEPT 
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58316624"></a>3.2.11. Protection against incoming TCP connection requests</h4></div></div></div><p>VERY RECOMMENDED! For security issues you should really insert a rule which blocks incoming TCP connection requests. Adapt "-i" option, if other interface names are in use! </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Block incoming TCP connection requests to this host </p></li></ul></div><pre class="screen">
# ip6tables -I INPUT -i sit+ -p tcp --syn -j DROP 
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Block incoming TCP connection requests to hosts behind this router </p></li></ul></div><pre class="screen">
# ip6tables -I FORWARD -i sit+ -p tcp --syn -j DROP 
</pre><p>Perhaps the rules have to be placed below others, but that is work you have to think about it. Best way is to create a script and execute rules in a specified way. </p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58320672"></a>3.2.12. Protection against incoming UDP connection requests</h4></div></div></div><p>ALSO RECOMMENDED! Like mentioned on my firewall information it's possible to control the ports on outgoing UDP/TCP sessions. So if all of your local IPv6 systems are using local ports e.g. from 32768 to 60999 you are able to filter UDP connections also (until connection tracking works) like: </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Block incoming UDP packets which cannot be responses of outgoing requests of this host </p></li></ul></div><pre class="screen">
# ip6tables -I INPUT -i sit+ -p udp ! --dport 32768:60999 -j DROP 
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Block incoming UDP packets which cannot be responses of forwarded requests of hosts behind this router </p></li></ul></div><pre class="screen">
# ip6tables -I FORWARD -i sit+ -p udp ! --dport 32768:60999 -j DROP 
</pre></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58324672"></a>3.3. Examples</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58325312"></a>3.3.1. Simple example for Fedora</h4></div></div></div><p>Following lines show a simple firewall configuration for Fedora 6 (since kernel version 2.6.20). It was modfied from the default one (generated by system-config-firewall) for supporting connection tracking and return the proper ICMPv6 code for rejects. Incoming SSH (port 22) connections are allowed.</p><pre class="screen">
File: /etc/sysconfig/ip6tables

*filter :INPUT ACCEPT [0:0]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [0:0]
:RH-Firewall-1-INPUT - [0:0]
-A INPUT -j RH-Firewall-1-INPUT
-A FORWARD -j RH-Firewall-1-INPUT
-A RH-Firewall-1-INPUT -i lo -j ACCEPT
-A RH-Firewall-1-INPUT -p icmpv6 -j ACCEPT
-A RH-Firewall-1-INPUT -p 50 -j ACCEPT
-A RH-Firewall-1-INPUT -p 51 -j ACCEPT
-A RH-Firewall-1-INPUT -p udp --dport 5353 -d ff02::fb -j ACCEPT
-A RH-Firewall-1-INPUT -p udp -m udp --dport 631 -j ACCEPT 
-A RH-Firewall-1-INPUT -p tcp -m tcp --dport 631 -j ACCEPT
-A RH-Firewall-1-INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
-A RH-Firewall-1-INPUT -m state --state NEW -p tcp --dport 22 -j ACCEPT
-A RH-Firewall-1-INPUT -j REJECT --reject-with icmp6-adm-prohibited
COMMIT 
</pre><p>For completeness also the IPv4 configuration is shown here:</p><pre class="screen">
File: /etc/sysconfig/iptables

*filter :INPUT ACCEPT [0:0]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [0:0]
:RH-Firewall-1-INPUT - [0:0]
-A INPUT -j RH-Firewall-1-INPUT
-A FORWARD -j RH-Firewall-1-INPUT
-A RH-Firewall-1-INPUT -i lo -j ACCEPT
-A RH-Firewall-1-INPUT -p icmp --icmp-type any -j ACCEPT
-A RH-Firewall-1-INPUT -p 50 -j ACCEPT
-A RH-Firewall-1-INPUT -p 51 -j ACCEPT
-A RH-Firewall-1-INPUT -p udp --dport 5353 -d 224.0.0.251 -j ACCEPT
-A RH-Firewall-1-INPUT -p udp -m udp --dport 631 -j ACCEPT
-A RH-Firewall-1-INPUT -p tcp -m tcp --dport 631 -j ACCEPT
-A RH-Firewall-1-INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT
-A RH-Firewall-1-INPUT -j REJECT --reject-with icmp-host-prohibited
COMMIT 
</pre><p>Usage:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Create/modify the configuration files</p></li><li class="listitem"><p>Activate IPv4 &amp; IPv6 firewalling</p></li></ul></div><pre class="screen">
# service iptables start
# service ip6tables start
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Enable automatic start after reboot</p></li></ul></div><pre class="screen">
# chkconfig iptables on
# chkconfig ip6tables on
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58334272"></a>3.3.2. Sophisticated example</h4></div></div></div><p>Following lines show a more sophisticated but still stateless filter setup as an example. Happy netfilter6 ruleset creation.... </p><pre class="screen">
# ip6tables -n -v -L 
Chain INPUT (policy DROP 0 packets, 0 bytes) 
 pkts bytes target     prot opt in     out     source               destination
    0     0 extIN      all      sit+   *       ::/0                 ::/0 
    4   384 intIN      all      eth0   *       ::/0                 ::/0 
    0     0 ACCEPT     all      *      *       ::1/128              ::1/128 
    0     0 ACCEPT     all      lo     *       ::/0                 ::/0 
    0     0 LOG        all      *      *       ::/0                 ::/0       
¬        LOG flags 0 level 7 prefix `INPUT-default:' 
    0     0 DROP       all      *      *       ::/0                 ::/0 
 
Chain FORWARD (policy DROP 0 packets, 0 bytes) 
 pkts bytes target     prot opt in     out     source               destination
¬ 
    0     0 int2ext    all      eth0   sit+    ::/0                 ::/0 
    0     0 ext2int    all      sit+   eth0    ::/0                 ::/0 
    0     0 LOG        all      *      *       ::/0                 ::/0       
¬        LOG flags 0 level 7 prefix `FORWARD-default:' 
    0     0 DROP       all      *      *       ::/0                 ::/0 
 
Chain OUTPUT (policy DROP 0 packets, 0 bytes) 
 pkts bytes target     prot opt in     out     source               destination
¬ 
    0     0 extOUT     all      *      sit+    ::/0                 ::/0 
    4   384 intOUT     all      *      eth0    ::/0                 ::/0 
    0     0 ACCEPT     all      *      *       ::1/128              ::1/128 
    0     0 ACCEPT     all      *      lo      ::/0                 ::/0 
    0     0 LOG        all      *      *       ::/0                 ::/0       
¬        LOG flags 0 level 7 prefix `OUTPUT-default:' 
    0     0 DROP       all      *      *       ::/0                 ::/0 
 
Chain ext2int (1 references) 
 pkts bytes target     prot opt in     out     source               destination
¬ 
    0     0 ACCEPT     icmpv6    *      *       ::/0                 ::/0 
    0     0 ACCEPT     tcp      *      *       ::/0                 ::/0       
¬        tcp spts:1:65535 dpts:1024:65535 flags:!0x16/0x02 
    0     0 LOG        all      *      *       ::/0                 ::/0       
¬        LOG flags 0 level 7 prefix `ext2int-default:' 
    0     0 DROP       tcp      *      *       ::/0                 ::/0 
    0     0 DROP       udp      *      *       ::/0                 ::/0 
    0     0 DROP       all      *      *       ::/0                 ::/0 
 
Chain extIN (1 references) 
 pkts bytes target     prot opt in     out     source               destination
¬ 
    0     0 ACCEPT     tcp      *      *       3ffe:400:100::1/128  ::/0       
¬        tcp spts:512:65535 dpt:22 
    0     0 ACCEPT     tcp      *      *       3ffe:400:100::2/128  ::/0       
¬        tcp spts:512:65535 dpt:22 
    0     0 ACCEPT     icmpv6    *      *       ::/0                 ::/0 
    0     0 ACCEPT     tcp      *      *       ::/0                 ::/0       
¬        tcp spts:1:65535 dpts:1024:65535 flags:!0x16/0x02 
    0     0 ACCEPT     udp      *      *       ::/0                 ::/0       
¬        udp spts:1:65535 dpts:1024:65535 
    0     0 LOG        all      *      *       ::/0                 ::/0       
¬        limit: avg 5/min burst 5 LOG flags 0 level 7 prefix `extIN-default:' 
    0     0 DROP       all      *      *       ::/0                 ::/0 
 
Chain extOUT (1 references) 
 pkts bytes target     prot opt in     out     source               destination
¬ 
    0     0 ACCEPT     tcp      *      *       ::/0                
¬ 2001:0db8:100::1/128tcp spt:22 dpts:512:65535 flags:!0x16/0x02 
    0     0 ACCEPT     tcp      *      *       ::/0                
¬ 2001:0db8:100::2/128tcp spt:22 dpts:512:65535 flags:!0x16/0x02 
    0     0 ACCEPT     icmpv6    *      *       ::/0                 ::/0 
    0     0 ACCEPT     tcp      *      *       ::/0                 ::/0       
¬        tcp spts:1024:65535 dpts:1:65535 
    0     0 ACCEPT     udp      *      *       ::/0                 ::/0       
¬        udp spts:1024:65535 dpts:1:65535 
    0     0 LOG        all      *      *       ::/0                 ::/0       
¬        LOG flags 0 level 7 prefix `extOUT-default:' 
    0     0 DROP       all      *      *       ::/0                 ::/0 
 
Chain int2ext (1 references) 
 pkts bytes target     prot opt in     out     source               destination
¬ 
    0     0 ACCEPT     icmpv6    *      *       ::/0                 ::/0 
    0     0 ACCEPT     tcp      *      *       ::/0                 ::/0       
¬        tcp spts:1024:65535 dpts:1:65535 
    0     0 LOG        all      *      *       ::/0                 ::/0       
¬        LOG flags 0 level 7 prefix `int2ext:' 
    0     0 DROP       all      *      *       ::/0                 ::/0 
    0     0 LOG        all      *      *       ::/0                 ::/0       
¬        LOG flags 0 level 7 prefix `int2ext-default:' 
    0     0 DROP       tcp      *      *       ::/0                 ::/0 
    0     0 DROP       udp      *      *       ::/0                 ::/0 
    0     0 DROP       all      *      *       ::/0                 ::/0 
 
Chain intIN (1 references) 
 pkts bytes target     prot opt in     out     source               destination
¬ 
    0     0 ACCEPT     all      *      *       ::/0                
¬ fe80::/ffc0:: 
    4   384 ACCEPT     all      *      *       ::/0                 ff02::/16 
 
Chain intOUT (1 references) 
 pkts bytes target     prot opt in     out     source               destination
¬ 
    0     0 ACCEPT     all      *      *       ::/0                
¬ fe80::/ffc0:: 
    4   384 ACCEPT     all      *      *       ::/0                 ff02::/16 
    0     0 LOG        all      *      *       ::/0                 ::/0       
¬        LOG flags 0 level 7 prefix `intOUT-default:' 
    0     0 DROP       all      *      *       ::/0                 ::/0 
</pre></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="nat-netfilter6."></a>4. Network Address Translation (NAT) using netfilter6 </h2></div></div></div><p>Since at least Linux kernel version 3.9.0 and using ip6tables since 1.4.18 also Network Address Translation (NAT) is usable.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58337184"></a>4.1. IPv6 Masquerading</h3></div></div></div><p>Like in IPv4 clients behind a router can be hided by using IPv6 masquerading (hide/overlap NAT), e.g.</p><pre class="screen">
# ip6tables -t nat -A POSTROUTING -o sixxs -s fec0::/64 -j MASQUERADE
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58339024"></a>4.2. IPv6 Destination NAT</h3></div></div></div><p>A dedicated public IPv6 address can be forwarded to an internal IPv6 address, e.g.</p><pre class="screen">
# ip6tables -t nat -A PREROUTING -d 2001:db8:0:1:5054:ff:fe01:2345 -i sixxs -j DNAT --to-destination fec0::5054:ff:fe01:2345
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58340464"></a>4.3. IPv6 Port Forwarding</h3></div></div></div><p>A dedicated specified port can be forwarded to an internal system, e.g.</p><pre class="screen">
# ip6tables -t nat -A PREROUTING -i sixxs -p tcp --dport 8080 -j DNAT --to-destination [fec0::1234]:80
</pre></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp58354192"></a>5. Firewalling using nftables</h2></div></div></div><p>nftables adds in addition to protocol specific tables &#8221;ip&#8221; (IPv4) and &#8221;ip6&#8221; (IPv6) support for a IPv4/IPv6 aware table named &#8221;inet&#8221;. Using this table it's possible to add only one rule and match both protocols (in case of UDP and TCP).</p><p>Take care if rules are contained in more than one table, because the tables are checked in sequence:</p><pre class="screen">
IPv4-Packet --&gt; table "ip"  --&gt; table "inet" --&gt; further checks
IPv6-Packet --&gt; table "ip6" --&gt; table "inet" --&gt; further checks
</pre><p>If table &#8221;ip6&#8221; accepts the packet, also table &#8221;inet&#8221; must accept the packet, otherwise it can be dropped by a later drop rule.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58357792"></a>5.1. Preparation for nftables usage</h3></div></div></div><p>Install a Linux distribution which has nftables support already included. At time of writing (May 2014) at least Fedora Rawhide (upcoming version 21) has support in conjunction with nftables version 0.2.0.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58358912"></a>5.2. Basic nftables configuration</h3></div></div></div><p>Load kernel modules:</p><pre class="screen">
# modprobe nf_tables
# modprobe nf_tables_ipv4
# modprobe nf_tables_ipv6
# modprobe nf_tables_inet 
</pre><p>Flush iptables and ip6tables to avoid interferences:</p><pre class="screen">
# iptables -F
# ip6tables -F
</pre><p>Create filter table:</p><pre class="screen">
# nft add table inet filter 
</pre><p>Create input chain:</p><pre class="screen">
# nft add chain inet filter input { type filter hook input priority 0 \; }
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58363152"></a>5.3. Simple filter policy with nftables using only table &#8221;inet&#8221;</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58363936"></a>5.3.1. Configuration</h4></div></div></div><p>Allow packets which are related to existing connection tracking entries</p><pre class="screen">
# nft add rule inet filter input ct state established,related counter accept
</pre><p>Allow IPv4 and IPv6 ICMP echo-request (aka ping)</p><pre class="screen">
# nft add rule inet filter input meta nfproto ipv4 icmp type { echo-request } counter accept
# nft add rule inet filter input meta nfproto ipv6 icmpv6 type echo-request counter accept 
</pre><p>Allow some important IPv6 ICMP traffic, without counter, but checking hop-limit for security</p><pre class="screen">
# nft add rule inet filter input meta nfproto ipv6
¬  icmpv6 type { nd-neighbor-advert, nd-neighbor-solicit, nd-router-advert} ip6 hoplimit 1 accept
# nft add rule inet filter input meta nfproto ipv6
¬  icmpv6 type { nd-neighbor-advert, nd-neighbor-solicit, nd-router-advert} ip6 hoplimit 255 counter accept
</pre><p>Allow incoming SSH for IPv4 and IPv6</p><pre class="screen">
# nft add rule inet filter input tcp dport 22 ct state new tcp flags \&amp; \(syn \| ack\) == syn counter accept
</pre><p>Reject/drop others</p><pre class="screen">
# nft add rule inet filter input tcp dport 0-65535 reject
# nft add rule inet filter input udp dport 0-65535 counter drop
# nft add rule inet filter input counter drop
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58369984"></a>5.3.2. Result</h4></div></div></div><p>Table for IP version aware filter</p><pre class="screen">
table inet filter {
	chain input {
		 type filter hook input priority 0;
		 ct state established,related counter packets 0 bytes 0 accept
		 ip protocol icmp icmp type { echo-request} counter packets 0 bytes 0 accept
		 ip6 nexthdr ipv6-icmp icmpv6 type echo-request counter packets 0 bytes 0 accept
		 ip6 nexthdr ipv6-icmp ip6 hoplimit 1 icmpv6 type { nd-neighbor-advert, nd-neighbor-solicit, nd-router-advert} accept
		 ip6 nexthdr ipv6-icmp ip6 hoplimit 255 icmpv6 type { nd-neighbor-advert, nd-neighbor-solicit, nd-router-advert} accept
		 tcp dport ssh ct state new tcp flags &amp; (syn | ack) == syn counter packets 0 bytes 0 accept
		 tcp dport &gt;= 0 tcp dport &lt;= 65535 counter packets 0 bytes 0 reject
		 udp dport &gt;= 0 udp dport &lt;= 65535 counter packets 0 bytes 0 drop
		 log prefix counter packets 0 bytes 0 drop
	}
}
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58371808"></a>5.3.3. Hints for logging</h4></div></div></div><p>To enable logging, an additonal kernel module must be loaded</p><pre class="screen">
# modprobe xt_LOG
</pre><p>BUT TAKE CARE, IT LOOKS LIKE THAT NO LOG LEVEL CAN BE SPEFICIED CURRENTLY IN nftables, resulting that events are logged with kern.emerg - POSSIBILITY OF FLODDING THE CONSOLE WITH LOG ENTRIES!</p><p>Fir initial test with logging it can be useful to disable kernel console logging in e.g. /etc/rsyslog.conf by putting a &#8221;#&#8221; in front of the related entry and restart logging daemon</p><pre class="screen">
#*.emerg    :omusrmsg:* 
</pre><p>Rule from above accepting SSH on port 22, but now with logging:</p><pre class="screen">
# nft add rule inet filter input tcp dport 22 ct state new tcp flags \&amp; \(syn \| ack\) == syn log prefix \"inet/input/accept: \" counter accept
</pre></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58377456"></a>5.4. Filter policy with nftables using tables &#8221;ip&#8221;, &#8221;ip6&#8221; and &#8221;inet&#8221;</h3></div></div></div><p>As written above, if rules should be stored in related tables, it must be assured that earlier accepts are not discarded in the further table. This can be done using &#8221;meta mark set xxxx&#8221; on every accept rule and generic rules which accepts packets with &#8221;mark xxxx&#8221;. A resulting filter set would look like the following:</p><pre class="screen">
# for table in ip ip6 inet; do nft list table $table filter; done
table ip filter {
	chain input {
		 type filter hook input priority 0;
		 ct state established,related counter packets 241 bytes 25193 accept
		 counter packets 2 bytes 120 mark 0x00000100 accept
		 icmp type { echo-request} counter packets 0 bytes 0 meta mark set 0x00000100 accept
	}
}
table ip6 filter {
	chain input {
		 type filter hook input priority 0;
		 ct state established,related counter packets 14 bytes 4077 accept
		 counter packets 4 bytes 408 mark 0x00000100 accept
		 icmpv6 type echo-request counter packets 1 bytes 104 meta mark set 0x00000100
		 icmpv6 type { nd-neighbor-advert, nd-neighbor-solicit, nd-router-advert} counter packets 2 bytes 224 meta mark set 0x00000100 accept
	}
}
table inet filter {
	chain input {
		 type filter hook input priority 0;
		 ct state established,related counter packets 307 bytes 31974 accept
		 counter packets 6 bytes 528 mark 0x00000100 accept
		 tcp dport ssh ct state new tcp flags &amp; (syn | ack) == syn log prefix "inet/input/accept: " meta mark set 0x00000100 counter packets 3 bytes 200 accept
		 log prefix "inet/input/reject: " counter packets 0 bytes 0 reject
	}
}
</pre></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chapter-security"></a>Chapter 19. Security</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#idp58381152">1. Node security</a></span></dt><dt><span class="sect1"><a href="#idp58385056">2. Access limitations</a></span></dt><dt><span class="sect1"><a href="#IPv6-security-auditing">3. IPv6 security auditing</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58389184">3.1. Legal issues</a></span></dt><dt><span class="sect2"><a href="#idp58390304">3.2. Security auditing using IPv6-enabled netcat</a></span></dt><dt><span class="sect2"><a href="#idp58392784">3.3. Security auditing using IPv6-enabled nmap</a></span></dt><dt><span class="sect2"><a href="#idp58394672">3.4. Security auditing using IPv6-enabled strobe</a></span></dt><dt><span class="sect2"><a href="#idp58398704">3.5. Security auditing using online tools</a></span></dt><dt><span class="sect2"><a href="#idp58401584">3.6. Audit results</a></span></dt></dl></dd></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp58381152"></a>1. Node security</h2></div></div></div><p>It's very recommended to apply all available patches and disable all not necessary services. Also bind services to the needed IPv4/IPv6 addresses only and install local firewalling.</p><p>More to be filled...</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp58385056"></a>2. Access limitations</h2></div></div></div><p>Many services uses the tcp_wrapper library for access control. Below is described the <a class="link" href="#hints-daemons-tcpwrapper" title="8. tcp_wrapper">use of tcp_wrapper</a>.</p><p>More to be filled...</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IPv6-security-auditing"></a>3. IPv6 security auditing</h2></div></div></div><p>Currently there are no comfortable tools out which are able to check a system over network for IPv6 security issues. Neither <a class="ulink" href="http://www.nessus.org/" target="_top">Nessus</a> nor any commercial security scanner is as far as I know able to scan IPv6 addresses.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58389184"></a>3.1. Legal issues</h3></div></div></div><p>ATTENTION: always take care that you only scan your own systems or after receiving a written order, otherwise legal issues are able to come up to you.
CHECK destination IPv6 addresses TWICE before starting a scan.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58390304"></a>3.2. Security auditing using IPv6-enabled netcat</h3></div></div></div><p>With the IPv6-enabled netcat (see <a class="ulink" href="http://www.bieringer.de/linux/IPv6/status/IPv6+Linux-status-apps.html#security-auditing" target="_top">IPv6+Linux-status-apps/security-auditing</a> for more) you can run a portscan by wrapping a script around which run through a port range, grab banners and so on. Usage example:</p><pre class="screen">
# nc6 ::1 daytime
13 JUL 2002 11:22:22 CEST
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58392784"></a>3.3. Security auditing using IPv6-enabled nmap</h3></div></div></div><p><a class="ulink" href="http://www.insecure.org/nmap/" target="_top">NMap</a>, one of the best portscaner around the world, supports IPv6 since version 3.10ALPHA1. Usage example:</p><pre class="screen">
# nmap -6 -sT ::1
Starting nmap V. 3.10ALPHA3 ( www.insecure.org/nmap/ ) 
Interesting ports on localhost6 (::1): 
(The 1600 ports scanned but not shown below are in state: closed) 
Port       State       Service 
22/tcp     open        ssh 
53/tcp     open        domain 
515/tcp    open        printer 
2401/tcp   open        cvspserver
Nmap run completed -- 1 IP address (1 host up) scanned in 0.525 seconds
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58394672"></a>3.4. Security auditing using IPv6-enabled strobe</h3></div></div></div><p>Strobe is a (compared to NMap) more a low budget portscanner, but there is an IPv6-enabling patch available (see <a class="ulink" href="http://www.bieringer.de/linux/IPv6/status/IPv6+Linux-status-apps.html#security-auditing" target="_top">IPv6+Linux-status-apps/security-auditing</a> for more). Usage example:</p><pre class="screen">
# ./strobe ::1 strobe 1.05 (c) 1995-1999 Julian Assange &lt;proff@iq.org&gt;.
::1 2401 unassigned unknown
::1 22 ssh Secure Shell - RSA encrypted rsh 
::1 515 printer spooler (lpd)
::1 6010 unassigned unknown 
::1 53 domain Domain Name Server
</pre><p>Note: strobe isn't really developed further on, the shown version number isn't the right one.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58398704"></a>3.5. Security auditing using online tools</h3></div></div></div><p>There are some IPv6 enabled online tools available which can support in testing inbound firewall configuration:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://ipv6.chappell-family.com/ipv6tcptest/" target="_top">Tim's Online IPv6 TCP/UDP Port Scanner</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.subnetonline.com/pages/ipv6-network-tools/online-ipv6-port-scanner.php" target="_top">SubnetOnline IPv6 Scanner</a></p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58401584"></a>3.6. Audit results</h3></div></div></div><p>If the result of an audit mismatch your IPv6 security policy, use IPv6 firewalling to close the holes, e.g. using netfilter6 (see <a class="link" href="#firewalling-netfilter6." title="1. Firewalling using netfilter6">Firewalling/Netfilter6</a> for more).</p><p>Info: More detailed information concerning IPv6 Security can be found here: </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.ietf.org/ids.by.wg/v6ops.html" target="_top">IETF drafts - IPv6 Operations (v6ops)</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.faqs.org/rfcs/rfc3964.html" target="_top">RFC 3964 / Security Considerations for 6to4</a></p></li></ul></div></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chapter-encryption-authentication"></a>Chapter 20. Encryption and Authentication</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#idp58406928">1. Modes of using encryption and authentication</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58407920">1.1. Transport mode</a></span></dt><dt><span class="sect2"><a href="#idp58409552">1.2. Tunnel mode</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp58411312">2. Support in kernel (ESP and AH)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58411952">2.1. Support in vanilla Linux kernel 2.4.x</a></span></dt><dt><span class="sect2"><a href="#idp58413808">2.2. Support in vanilla Linux kernel 2.6.x</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp58415200">3. Automatic key exchange (IKE)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58417808">3.1. IKE daemon &#8221;racoon&#8221;</a></span></dt><dt><span class="sect2"><a href="#idp58437264">3.2. IKE daemon &#8221;pluto&#8221;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp58453408">4. Additional informations:</a></span></dt></dl></div><p>Unlike in IPv4, encryption and authentication is a mandatory feature of IPv6. Those features are normally implemented using IPsec (which can be also used by IPv4).</p><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp58406928"></a>1. Modes of using encryption and authentication</h2></div></div></div><p>Two modes of encryption and authentication of a connection are possible:</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58407920"></a>1.1. Transport mode</h3></div></div></div><p>Transport mode is a real end-to-end connection mode. Here, only the payload (usually ICMP, TCP or UDP) is encrypted with their particular header, while the IP header is not encrypted (but usually included in authentication).</p><p>Using AES-128 for encryption and SHA1 for authentication, this mode decreases the MTU by 42 octets.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58409552"></a>1.2. Tunnel mode</h3></div></div></div><p>Tunnel mode can be used either for end-to-end or for gateway-to-gateway connection modes. Here, the complete IP packet is being encrypted and gets a new IP header prepended, all together constituing a new IP packet (this mechanism is also known as "encapsulation")</p><p>This mode usually decreases the MTU by 40 octets from the MTU of transport mode. I.e. using AES-128 for encryption and SHA1 for authentication 82 octets less than the normal MTU.</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp58411312"></a>2. Support in kernel (ESP and AH)</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58411952"></a>2.1. Support in vanilla Linux kernel 2.4.x</h3></div></div></div><p>At the time of writing missing in vanilla up to 2.4.28. There was an issue about keeping the Linux kernel source free of export/import-control-laws regarding encryption code. This is also one case why <a class="ulink" href="http://www.freeswan.org/" target="_top">FreeS/WAN project</a> wasn't included in vanilla source. Perhaps a backport from 2.6.x will be done in the future.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58413808"></a>2.2. Support in vanilla Linux kernel 2.6.x</h3></div></div></div><p>Current versions (as time of writing 2.6.9 and upper) support native IPsec for IPv4 and IPv6.</p><p>Implementation was helped by the USAGI project.</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp58415200"></a>3. Automatic key exchange (IKE)</h2></div></div></div><p>IPsec requires a key exchange of a secret. This is mostly done automatically by so called IKE daemons. They also handle the authentication of the peers, either by a common known secret (so called &#8221;pre-shared secret&#8221;) or by RSA keys (which can also be used from X.509 certificates).</p><p>Currently, two different IKE daemons are available for Linux, which totally differ in configuration and usage.</p><p>I prefer &#8221;pluto&#8221; from the *S/WAN implementation because of the easier and one-config-only setup.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58417808"></a>3.1. IKE daemon &#8221;racoon&#8221;</h3></div></div></div><p>The IKE daemon &#8221;racoon&#8221; is taken from the KAME project and ported to Linux. Modern Linux distributions contain this daemon in the package &#8221;ipsec-tools&#8221;. Two executables are required for a proper IPsec setup. Take a look on <a class="ulink" href="http://lartc.org/howto/lartc.ipsec.html" target="_top">Linux Advanced Routing &amp; Traffic Control HOWTO / IPSEC</a>, too.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58419984"></a>3.1.1. Manipulation of the IPsec SA/SP database with the tool &#8221;setkey&#8221;</h4></div></div></div><p>&#8221;setkey&#8221; is important to define the security policy (SP) for the kernel.</p><p>File: /etc/racoon/setkey.sh</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Example for an end-to-end encrypted connection in transport mode</p></li></ul></div><pre class="screen">
#!/sbin/setkey -f
flush;
spdflush;
spdadd 2001:db8:1:1::1 2001:db8:2:2::2 any -P out ipsec esp/transport//require;
spdadd 2001:db8:2:2::2 2001:db8:1:1::1 any -P in  ipsec esp/transport//require;

</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Example for a end-to-end encrypted connection in tunnel mode</p></li></ul></div><pre class="screen">
#!/sbin/setkey -f
flush;
spdflush;
spdadd 2001:db8:1:1::1 2001:db8:2:2::2 any -P out ipsec
¬ esp/tunnel/2001:db8:1:1::1-2001:db8:2:2::2/require;
spdadd 2001:db8:2:2::2 2001:db8:1:1::1 any -P in  ipsec
¬ esp/tunnel/2001:db8:2:2::2-2001:db8:1:1::1/require;
</pre><p>For the other peer, you have to replace &#8221;in&#8221; with &#8221;out&#8221;.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58425168"></a>3.1.2. Configuration of the IKE daemon &#8221;racoon&#8221;</h4></div></div></div><p>&#8221;racoon&#8221; requires a configuration file for proper execution. It includes the related settings to the security policy, which should be set up previously using &#8221;setkey&#8221;.</p><p>File: /etc/racoon/racoon.conf</p><pre class="screen">
# Racoon IKE daemon configuration file.
# See 'man racoon.conf' for a description of the format and entries.
path include "/etc/racoon";
path pre_shared_key "/etc/racoon/psk.txt";

listen
{
        isakmp 2001:db8:1:1::1;
}

remote 2001:db8:2:2::2
{
        exchange_mode main;
        lifetime time 24 hour;
        proposal
        {
                encryption_algorithm 3des;
                hash_algorithm md5;
                authentication_method pre_shared_key;
                dh_group 2;
        }
}

# gateway-to-gateway
sainfo address 2001:db8:1:1::1 any address 2001:db8:2:2::2 any
{
        lifetime time 1 hour;
        encryption_algorithm 3des;
        authentication_algorithm hmac_md5;
        compression_algorithm deflate;
}

sainfo address 2001:db8:2:2::2 any address 2001:db8:1:1::1 any
{
        lifetime time 1 hour;
        encryption_algorithm 3des;
        authentication_algorithm hmac_md5;
        compression_algorithm deflate;
} 
</pre><p>Also set up the pre-shared secret:</p><p>File: /etc/racoon/psk.txt</p><pre class="screen">
# file for pre-shared keys used for IKE authentication
# format is: 'identifier' 'key'

2001:db8:2:2::2 verysecret 
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58428480"></a>3.1.3. Running IPsec with IKE daemon &#8221;racoon&#8221;</h4></div></div></div><p>At least the daemon needs to be started. For the first time, use debug and foreground mode. The following example shows a successful IKE phase 1 (ISAKMP-SA) and 2 (IPsec-SA) negotiation:</p><pre class="screen">
# racoon -F -v -f /etc/racoon/racoon.conf
Foreground mode. 
2005-01-01 20:30:15: INFO: @(#)ipsec-tools 0.3.3
¬ (http://ipsec-tools.sourceforge.net)
2005-01-01 20:30:15: INFO: @(#)This product linked
¬ OpenSSL 0.9.7a Feb 19 2003 (http://www.openssl.org/)
2005-01-01 20:30:15: INFO: 2001:db8:1:1::1[500] used as isakmp port (fd=7)
2005-01-01 20:31:06: INFO: IPsec-SA request for 2001:db8:2:2::2
¬ queued due to no phase1 found.
2005-01-01 20:31:06: INFO: initiate new phase 1 negotiation:
¬ 2001:db8:1:1::1[500]&lt;=&gt;2001:db8:2:2::2[500]
2005-01-01 20:31:06: INFO: begin Identity Protection mode.
2005-01-01 20:31:09: INFO: ISAKMP-SA established
¬ 2001:db8:1:1::1[500]-2001:db8:2:2::2[500] spi:da3d3693289c9698:ac039a402b2db401
2005-01-01 20:31:09: INFO: initiate new phase 2 negotiation:
¬ 2001:6f8:900:94::2[0]&lt;=&gt;2001:db8:2:2::2[0]
2005-01-01 20:31:10: INFO: IPsec-SA established:
¬ ESP/Tunnel 2001:db8:2:2::2-&gt;2001:db8:1:1::1 spi=253935531(0xf22bfab) 
2005-01-01 20:31:10: INFO: IPsec-SA established:
¬ ESP/Tunnel 2001:db8:1:1::1-&gt;2001:db8:2:2::2 spi=175002564(0xa6e53c4) 
</pre><p>Each direction got its own IPsec-SA (like defined in the IPsec standard). With &#8221;tcpdump&#8221; on the related interface, you will see as result of an IPv6 ping:</p><pre class="screen">
20:35:55.305707 2001:db8:1:1::1 &gt; 2001:db8:2:2::2: ESP(spi=0x0a6e53c4,seq=0x3)
20:35:55.537522 2001:db8:2:2::2 &gt; 2001:db8:1:1::1: ESP(spi=0x0f22bfab,seq=0x3)
</pre><p>As expected, the negotiated SPIs are being used here.</p><p>And using &#8221;setkey&#8221;, current active parameters are shown:</p><pre class="screen">
# setkey -D
2001:db8:1:1::1 2001:db8:2:2::2
        esp mode=tunnel spi=175002564(0x0a6e53c4) reqid=0(0x00000000)
        E: 3des-cbc  bd26bc45 aea0d249 ef9c6b89 7056080f 5d9fa49c 924e2edd
        A: hmac-md5  60c2c505 517dd8b7 c9609128 a5efc2db
        seq=0x00000000 replay=4 flags=0x00000000 state=mature
        created: Jan  1 20:31:10 2005   current: Jan  1 20:40:47 2005
        diff: 577(s)    hard: 3600(s)   soft: 2880(s)
        last: Jan  1 20:35:05 2005      hard: 0(s)      soft: 0(s)
        current: 540(bytes)     hard: 0(bytes)  soft: 0(bytes)
        allocated: 3    hard: 0 soft: 0
        sadb_seq=1 pid=22358 refcnt=0
2001:db8:2:2::2 2001:db8:1:1::1
        esp mode=tunnel spi=253935531(0x0f22bfab) reqid=0(0x00000000)
        E: 3des-cbc  c1ddba65 83debd62 3f6683c1 20e747ac 933d203f 4777a7ce
        A: hmac-md5  3f957db9 9adddc8c 44e5739d 3f53ca0e
        seq=0x00000000 replay=4 flags=0x00000000 state=mature
        created: Jan  1 20:31:10 2005   current: Jan  1 20:40:47 2005
        diff: 577(s)    hard: 3600(s)   soft: 2880(s)
        last: Jan  1 20:35:05 2005      hard: 0(s)      soft: 0(s)
        current: 312(bytes)     hard: 0(bytes)  soft: 0(bytes)
        allocated: 3    hard: 0 soft: 0
        sadb_seq=0 pid=22358 refcnt=0 
</pre></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58437264"></a>3.2. IKE daemon &#8221;pluto&#8221;</h3></div></div></div><p>The IKE daemon &#8221;pluto&#8221; is included in distributions of the *S/WAN projects. *S/WAN project starts at the beginning as <a class="ulink" href="http://www.freeswan.org/" target="_top">FreeS/WAN</a>. Unfortunately, the FreeS/WAN project stopped further development in 2004. Because of the slow pace of development in the past, two spin-offs started: <a class="ulink" href="http://www.strongswan.org/" target="_top">strongSwan</a> and <a class="ulink" href="http://www.openswan.org/" target="_top">Openswan</a>. Today, readily installable packages are available for at least Openswan (included in Fedora Core 3).</p><p>A major difference to &#8221;racoon&#8221;, only one configuration file is required. Also, an initscript exists for automatic setup after booting.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58443904"></a>3.2.1. Configuration of the IKE daemon &#8221;pluto&#8221;</h4></div></div></div><p>The configuration is very similar to the IPv4 one, only one important option is necessary.</p><p>File: /etc/ipsec.conf</p><pre class="screen">
# /etc/ipsec.conf - Openswan IPsec configuration file
#
# Manual:     ipsec.conf.5
version 2.0     # conforms to second version of ipsec.conf specification

# basic configuration
config setup
        # Debug-logging controls:  "none" for (almost) none, "all" for lots.
        # klipsdebug=none
        # plutodebug="control parsing"

#Disable Opportunistic Encryption
include /etc/ipsec.d/examples/no_oe.conf

conn ipv6-p1-p2
        connaddrfamily=ipv6       # Important for IPv6, but no longer needed since StrongSwan 4
        left=2001:db8:1:1::1
        right=2001:db8:2:2::2
        authby=secret
        esp=aes128-sha1
        ike=aes128-sha-modp1024
        type=transport
        #type=tunnel
        compress=no
        #compress=yes
        auto=add
        #auto=up

</pre><p>Don't forget to define the pre-shared secret here also.</p><p>File: /etc/ipsec.secrets</p><pre class="screen">
2001:db8:1:1::1 2001:db8:2:2::2 : PSK      "verysecret"
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58448896"></a>3.2.2. Running IPsec with IKE daemon &#8221;pluto&#8221;</h4></div></div></div><p>If installation of Openswan was successfully, an initscript should exist for starting IPsec, simply run (on each peer):</p><pre class="screen">
# /etc/rc.d/init.d/ipsec start
</pre><p>Afterwards, start this connection on one peer. If you saw the line &#8221;IPsec SA established&#8221;, all worked fine.</p><pre class="screen">
# ipsec auto --up ipv6-peer1-peer2
104 "ipv6-p1-p2" #1: STATE_MAIN_I1: initiate
106 "ipv6-p1-p2" #1: STATE_MAIN_I2: sent MI2, expecting MR2
108 "ipv6-p1-p2" #1: STATE_MAIN_I3: sent MI3, expecting MR3
004 "ipv6-p1-p2" #1: STATE_MAIN_I4: ISAKMP SA established
112 "ipv6-p1-p2" #2: STATE_QUICK_I1: initiate
004 "ipv6-p1-p2" #2: STATE_QUICK_I2: sent QI2,
¬ IPsec SA established {ESP=&gt;0xa98b7710 &lt;0xa51e1f22} 
</pre><p>Because *S/WAN and setkey/racoon do use the same IPsec implementation in Linux 2.6.x kernel, &#8221;setkey&#8221; can be used here too to show current active parameters:</p><pre class="screen">
# setkey -D
2001:db8:1:1::1 2001:db8:2:2::2
        esp mode=transport spi=2844489488(0xa98b7710) reqid=16385(0x00004001)
        E: aes-cbc  082ee274 2744bae5 7451da37 1162b483
        A: hmac-sha1  b7803753 757417da 477b1c1a 64070455 ab79082c
        seq=0x00000000 replay=64 flags=0x00000000 state=mature
        created: Jan  1 21:16:32 2005   current: Jan  1 21:22:20 2005
        diff: 348(s)    hard: 0(s)      soft: 0(s)
        last:                           hard: 0(s)      soft: 0(s)
        current: 0(bytes)       hard: 0(bytes)  soft: 0(bytes)
        allocated: 0    hard: 0 soft: 0
        sadb_seq=1 pid=23825 refcnt=0
2001:db8:2:2::2 2001:db8:1:1::1
        esp mode=transport spi=2770214690(0xa51e1f22) reqid=16385(0x00004001)
        E: aes-cbc  6f59cc30 8d856056 65e07b76 552cac18
        A: hmac-sha1  c7c7d82b abfca8b1 5440021f e0c3b335 975b508b
        seq=0x00000000 replay=64 flags=0x00000000 state=mature
        created: Jan  1 21:16:31 2005   current: Jan  1 21:22:20 2005
        diff: 349(s)    hard: 0(s)      soft: 0(s)
        last:                           hard: 0(s)      soft: 0(s)
        current: 0(bytes)       hard: 0(bytes)  soft: 0(bytes)
        allocated: 0    hard: 0 soft: 0
        sadb_seq=0 pid=23825 refcnt=0 
</pre></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp58453408"></a>4. Additional informations:</h2></div></div></div><p>On Linux Kernel 2.6.x you can get the policy and status of IPsec also using &#8221;ip&#8221;:</p><pre class="screen">
# ip xfrm policy
...

# ip xfrm state
...
</pre></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chapter-qos"></a>Chapter 21. Quality of Service (QoS)</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#idp58460240">1. General</a></span></dt><dt><span class="sect1"><a href="#idp58461856">2. Linux QoS using &#8221;tc&#8221;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58464240">2.1. Example for a constant bitrate queuing</a></span></dt></dl></dd></dl></div><p>IPv6 supports QoS with use of Flow Labels and Traffic Classes.</p><p>Additional infos:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.faqs.org/rfcs/rfc3697.html" target="_top">RFC 3697 / IPv6 Flow Label Specification</a></p></li></ul></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp58460240"></a>1. General</h2></div></div></div><p>Proper working QoS is only possible on the outgoing interface of a router or host, where the bottleneck begins. Everything else is a hickup and not subject to work as expected or has a successful result.</p><pre class="screen">
--------------&gt;-------
           Queue 1    \
           ---&gt;---     ----&gt;---------&gt;---------&gt;---------------
Big pipe   Queue 2      Queue 1 / Queue 2 / Queue 3   Thin Pipe
           ---&gt;----    ----&gt;---------&gt;---------&gt;---------------
           Queue 3    /
--------------&gt;-------
</pre></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp58461856"></a>2. Linux QoS using &#8221;tc&#8221;</h2></div></div></div><p>Linux is using &#8221;tc&#8221; from the &#8221;iproute2&#8221; package to configure traffic shaping, generally described in the <a class="ulink" href="http://lartc.org/" target="_top">Linux Advanced Routing &amp; Traffic Control HOWTO</a>.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58464240"></a>2.1. Example for a constant bitrate queuing</h3></div></div></div><p>With the &#8221;cbq&#8221; scheduler, pipes with constant bit rates can be defined.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58465296"></a>2.1.1. Root qdisc definition</h4></div></div></div><p>Define root qdisc with a bandwidth of 1000 MBit/s on eth1</p><pre class="screen">
# tc qdisc add dev eth1 root handle 1: cbq avpkt 1000 bandwidth 1000Mbit
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58467040"></a>2.1.2. QoS class definition</h4></div></div></div><p>Define a class 1:1 with 1 MBit/s</p><pre class="screen">
# tc class add dev eth1 parent 1: classid 1:1 cbq rate   1Mbit allot 1500 bounded 
</pre><p>Define a class 1:2 with 50 MBit/s</p><pre class="screen">
# tc class add dev eth1 parent 1: classid 1:2 cbq rate  50Mbit allot 1500 bounded
</pre><p>Define a class 1:3 with 10 MBit/s</p><pre class="screen">
# tc class add dev eth1 parent 1: classid 1:3 cbq rate  10Mbit allot 1500 bounded
</pre><p>Define a class 1:4 with 200 kBit/s</p><pre class="screen">
# tc class add dev eth1 parent 1: classid 1:4 cbq rate 200kbit allot 1500 bounded
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58471408"></a>2.1.3. QoS filter definition</h4></div></div></div><p>Define a filter for IPv4 (<span class="emphasis"><em>protocol ip</em></span>), TCP (<span class="emphasis"><em>match ip protocol 6 0xff</em></span>) destination port 5001 (<span class="emphasis"><em>match ip dport 5001 0xffff</em></span>) using class 1:2 from above</p><pre class="screen">
# tc filter add dev eth1 parent 1: protocol ip   u32 match ip  protocol 6 0xff match ip dport 5001 0xffff flowid 1:1
</pre><p>Define a filter for IPv6 (<span class="emphasis"><em>protocol ip</em></span>), TCP (<span class="emphasis"><em>match ip6 protocol 6 0xff</em></span>) destination port 5001 using class 1:2 from above</p><pre class="screen">
# tc filter add dev eth1 parent 1: protocol ipv6 u32 match ip6 protocol 6 0xff match ip6 dport 5001 0xffff flowid 1:2
</pre><p>Define a filter for IPv6 for packets having flow label 12345 (<span class="emphasis"><em>match ip6 flowlabel 12345 0x3ffff</em></span>) using class 1:3 from above</p><pre class="screen">
# tc filter add dev eth1 parent 1: protocol ipv6 u32 match ip6 flowlabel 12345 0x3ffff flowid 1:3 
</pre><p>Define a filter for IPv6 for packets having Linux iptables mark 32 (<span class="emphasis"><em>handle 32 fw</em></span>) specified using class 1:4 from above</p><pre class="screen">
# tc filter add dev eth1 parent 1: protocol ipv6 handle 32 fw flowid 1:4
</pre><p>The last filter definition requires an entry in the ip6tables to mark a packet</p><pre class="screen">
# ip6tables -A POSTROUTING -t mangle -p tcp --dport 5003 -j MARK --set-mark 32 
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58479904"></a>2.1.4. Testing filter definitions using iperf</h4></div></div></div><p>Start on server side each one one separate console:</p><pre class="screen">
# iperf -V -s -p 5001
# iperf -V -s -p 5002
# iperf -V -s -p 5003
</pre><p>Start on client side and compare results:</p><pre class="screen">
# iperf -V -c SERVER-IPv4 -p 5001    (expected:      1 MBit/s)
# iperf -V -c SERVER-IPv6 -p 5001    (expected:     50 MBit/s)
# iperf -V -c SERVER-IPv4 -p 5002    (expected:  &gt;&gt; 50 MBit/s &amp;&amp; &lt;= 1000 MBit/s)
# iperf -V -c SERVER-IPv6 -p 5002    (expected:  &gt;&gt; 50 MBit/s &amp;&amp; &lt;= 1000 MBit/s)
# iperf -V -c SERVER-IPv4 -p 5003    (expected:  &gt;&gt; 50 MBit/s &amp;&amp; &lt;= 1000 MBit/s)
# iperf -V -c SERVER-IPv6 -p 5003    (expected:    200 kBit/s)
</pre><p>The rate result should be as defined in the classes (see above), the results on port 5002 should be very similar independend from used IP version.</p></div></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chapter-hints-daemons"></a>Chapter 22. Hints for IPv6-enabled daemons</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#hints-daemons-bind">1. Berkeley Internet Name Domain (BIND) daemon &#8221;named&#8221;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58486256">1.1. Listening on IPv6 addresses</a></span></dt><dt><span class="sect2"><a href="#idp58494368">1.2. IPv6 enabled Access Control Lists (ACL)</a></span></dt><dt><span class="sect2"><a href="#idp58498768">1.3. Sending queries with dedicated IPv6 address</a></span></dt><dt><span class="sect2"><a href="#idp58500400">1.4. Per zone defined dedicated IPv6 addresses</a></span></dt><dt><span class="sect2"><a href="#idp58504464">1.5. IPv6 DNS zone files examples</a></span></dt><dt><span class="sect2"><a href="#idp58506496">1.6. Serving IPv6 related DNS data</a></span></dt><dt><span class="sect2"><a href="#idp58516864">1.7. Checking IPv6-enabled connect</a></span></dt></dl></dd><dt><span class="sect1"><a href="#hints-daemons-xinetd">2. Internet super daemon (xinetd)</a></span></dt><dt><span class="sect1"><a href="#hints-daemons-apache2.">3. Webserver Apache2 (httpd2)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58532128">3.1. Listening on IPv6 addresses</a></span></dt></dl></dd><dt><span class="sect1"><a href="#hints-daemons-radvd">4. Router Advertisement Daemon (radvd)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58543872">4.1. Configuring radvd</a></span></dt><dt><span class="sect2"><a href="#idp58554480">4.2. Debugging</a></span></dt></dl></dd><dt><span class="sect1"><a href="#hints-daemons-dhcpv6.">5. Dynamic Host Configuration v6 Server (dhcp6s)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58560528">5.1. Configuration of the DHCPv6 server (dhcp6s)</a></span></dt><dt><span class="sect2"><a href="#idp58562672">5.2. Configuration of the DHCPv6 client (dhcp6c)</a></span></dt><dt><span class="sect2"><a href="#idp58565984">5.3. Usage</a></span></dt><dt><span class="sect2"><a href="#idp58569408">5.4. Debugging</a></span></dt></dl></dd><dt><span class="sect1"><a href="#hints-daemons-isc-dhcp">6. ISC Dynamic Host Configuration Server (dhcpd)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58576704">6.1. Configuration of the ISC DHCP server for IPv6 (dhcpd)</a></span></dt><dt><span class="sect2"><a href="#idp58582512">6.2. Usage</a></span></dt></dl></dd><dt><span class="sect1"><a href="#hints-daemons-dibbler">7. DHCP Server Dibbler</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58587216">7.1. Configuration of the Dibbler DHCP server for IPv6</a></span></dt><dt><span class="sect2"><a href="#idp58589440">7.2. Usage</a></span></dt></dl></dd><dt><span class="sect1"><a href="#hints-daemons-tcpwrapper">8. tcp_wrapper</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58593632">8.1. Filtering capabilities</a></span></dt><dt><span class="sect2"><a href="#idp58599376">8.2. Which program uses tcp_wrapper</a></span></dt><dt><span class="sect2"><a href="#idp58601408">8.3. Usage</a></span></dt><dt><span class="sect2"><a href="#idp58607584">8.4. Logging</a></span></dt></dl></dd><dt><span class="sect1"><a href="#hints-daemons-vsftpd">9. vsftpd</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58616704">9.1. Listening on IPv6 addresses</a></span></dt></dl></dd><dt><span class="sect1"><a href="#hints-daemons-proftpd">10. proftpd</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58619472">10.1. Listening on IPv6 addresses</a></span></dt></dl></dd><dt><span class="sect1"><a href="#hints-daemons-others">11. Other daemons</a></span></dt></dl></div><p>Here some hints are shown for IPv6-enabled daemons.</p><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="hints-daemons-bind"></a>1. Berkeley Internet Name Domain (BIND) daemon &#8221;named&#8221;</h2></div></div></div><p>IPv6 is supported since version 9. Always use newest available version. At least version 9.1.3 must be used, older versions can contain remote exploitable security holes.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58486256"></a>1.1. Listening on IPv6 addresses</h3></div></div></div><p>Note: unlike in IPv4 current versions doesn't allow to bind a server socket to dedicated IPv6 addresses, so only <span class="emphasis"><em>any</em></span> or <span class="emphasis"><em>none</em></span> are valid. Because this can be a security issue, check the Access Control List (ACL) section below, too!</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58488176"></a>1.1.1. Enable BIND named for listening on IPv6 address</h4></div></div></div><p>To enable IPv6 for listening, following options are requested to change</p><pre class="screen">
options {
        # sure other options here, too
        listen-on-v6 { any; };
};
</pre><p>This should result after restart in e.g.</p><pre class="screen">
# netstat -lnptu |grep "named\W*$" 
tcp 0 0 :::53         :::*      LISTEN 1234/named
¬ # incoming TCP requests
udp 0 0 1.2.3.4:53    0.0.0.0:*        1234/named
¬ # incoming UDP requests to IPv4 1.2.3.4
udp 0 0 127.0.0.1:53  0.0.0.0:*        1234/named
¬ # incoming UDP requests to IPv4 localhost
udp 0 0 0.0.0.0:32868 0.0.0.0:*        1234/named
¬ # dynamic chosen port for outgoing queries
udp 0 0 :::53         :::*             1234/named
¬ # incoming UDP request to any IPv6
</pre><p>And a simple test looks like</p><pre class="screen">
# dig localhost @::1
</pre><p>and should show you a result.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58492688"></a>1.1.2. Disable BIND named for listening on IPv6 address</h4></div></div></div><p>To disable IPv6 for listening, following options are requested to change</p><pre class="screen">
options {
        # sure other options here, too
        listen-on-v6 { none; };
};
</pre></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58494368"></a>1.2. IPv6 enabled Access Control Lists (ACL)</h3></div></div></div><p>IPv6 enabled ACLs are possible and should be used whenever it's possible. An example looks like following:</p><pre class="screen">
acl internal-net { 
        127.0.0.1; 
        1.2.3.0/24;  
        2001:0db8:100::/56; 
        ::1/128; 
        ::ffff:1.2.3.4/128; 
};
acl ns-internal-net { 
        1.2.3.4;  
        1.2.3.5;  
        2001:0db8:100::4/128; 
        2001:0db8:100::5/128; 
};
</pre><p>This ACLs can be used e.g. for queries of clients and transfer zones to secondary name-servers. This prevents also your caching name-server to be used from outside using IPv6.</p><pre class="screen">
options {
        # sure other options here, too
        listen-on-v6 { none; };
        allow-query { internal-net; }; 
        allow-transfer { ns-internal-net; }; 
};
</pre><p>It's also possible to set the <span class="emphasis"><em>allow-query </em></span>and <span class="emphasis"><em>allow-transfer</em></span> option for most of single zone definitions, too.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58498768"></a>1.3. Sending queries with dedicated IPv6 address</h3></div></div></div><p>This option is not required, but perhaps needed:</p><pre class="screen">
query-source-v6 address &lt;ipv6address|*&gt; port &lt;port|*&gt;;
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58500400"></a>1.4. Per zone defined dedicated IPv6 addresses</h3></div></div></div><p>It's also possible to define per zone some IPv6 addresses.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58501296"></a>1.4.1. Transfer source address </h4></div></div></div><p>Transfer source address is used for outgoing zone transfers:</p><pre class="screen">
transfer-source-v6 &lt;ipv6addr|*&gt; [port port];
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58502880"></a>1.4.2. Notify source address </h4></div></div></div><p>Notify source address is used for outgoing notify messages:</p><pre class="screen">
notify-source-v6 &lt;ipv6addr|*&gt; [port port];
</pre></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58504464"></a>1.5. IPv6 DNS zone files examples</h3></div></div></div><p>Some information can be also found at <a class="ulink" href="http://www.isi.edu/~bmanning/v6DNS.html" target="_top">IPv6 DNS Setup Information (article)</a>. Perhaps also helpful is the <a class="ulink" href="http://tools.fpsn.net/ipv6-inaddr/" target="_top">IPv6 Reverse DNS zone builder for BIND 8/9 (webtool)</a>.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58506496"></a>1.6. Serving IPv6 related DNS data</h3></div></div></div><p>For IPv6 new types and root zones for reverse lookups are defined:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>AAAA and reverse IP6.INT: specified in <a class="ulink" href="http://www.faqs.org/rfcs/rfc1886.html" target="_top">RFC 1886 / DNS Extensions to support IP version 6</a>, usable since BIND version 4.9.6</p></li><li class="listitem"><p>A6, DNAME (DEPRECATED NOW!) and reverse IP6.ARPA: specified in <a class="ulink" href="http://www.faqs.org/rfcs/rfc2874.html" target="_top">RFC 2874 / DNS Extensions to Support IPv6 Address Aggregation and Renumbering</a>, usable since BIND 9, but see also an information about the current state at <a class="ulink" href="http://www.ietf.org/ids.by.wg/dnsext.html" target="_top">Domain Name System Extension (dnsext)</a></p></li></ul></div><p>Perhaps filled later more content, for the meantime take a look at given RFCs and</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>AAAA and reverse IP6.INT: <a class="ulink" href="http://www.isi.edu/~bmanning/v6DNS.html" target="_top">IPv6 DNS Setup Information</a></p></li><li class="listitem"><p>A6, DNAME (DEPRECATED NOW!) and reverse IP6.ARPA: take a look into chapter 4 and 6 of the BIND 9 Administrator Reference Manual (ARM) distributed with the bind-package or get this here: <a class="ulink" href="http://www.isc.org/sw/bind/arm93/" target="_top">BIND manual version 9.3</a></p></li></ul></div><p>Because IP6.INT is deprecated (but still in use), a DNS server which will support IPv6 information has to serve both reverse zones.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58513488"></a>1.6.1. Current best practice</h4></div></div></div><p>Because there are some troubles around using the new formats, current best practice is:</p><p>Forward lookup support:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>AAAA</p></li></ul></div><p>Reverse lookup support:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Reverse nibble format for zone ip6.int (FOR BACKWARD COMPATIBILITY)</p></li><li class="listitem"><p>Reverse nibble format for zone ip6.arpa (RECOMMENDED)</p></li></ul></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58516864"></a>1.7. Checking IPv6-enabled connect</h3></div></div></div><p>To check, whether BIND named is listening on an IPv6 socket and serving data see following examples.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58517872"></a>1.7.1. IPv6 connect, but denied by ACL</h4></div></div></div><p>Specifying a dedicated server for the query, an IPv6 connect can be forced:</p><pre class="screen">
$ host -t aaaa www.6bone.net 2001:0db8:200:f101::1 
Using domain server: 
Name: 2001:0db8:200:f101::1 
Address: 2001:0db8:200:f101::1#53 
Aliases:

Host www.6bone.net. not found: 5(REFUSED)
</pre><p>Related log entry looks like following:</p><pre class="screen">
Jan 3 12:43:32 gate named[12347]: client
¬ 2001:0db8:200:f101:212:34ff:fe12:3456#32770: 
 query denied
</pre><p>If you see such entries in the log, check whether requests from this client should be allowed and perhaps review your ACL configuration.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58521312"></a>1.7.2. Successful IPv6 connect</h4></div></div></div><p>A successful IPv6 connect looks like following:</p><pre class="screen">
$ host -t aaaa www.6bone.net 2001:0db8:200:f101::1 
Using domain server: 
Name: 2001:0db8:200:f101::1 
Address: 2001:0db8:200:f101::1#53 
Aliases:

www.6bone.net. is an alias for 6bone.net. 
6bone.net. has AAAA address 3ffe:b00:c18:1::10
</pre></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="hints-daemons-xinetd"></a>2. Internet super daemon (xinetd)</h2></div></div></div><p>IPv6 is supported since <a class="ulink" href="http://www.xinetd.org/" target="_top">xinetd</a> version around 1.8.9. Always use newest available version. At least version 2.3.3 must be used, older versions can contain remote exploitable security holes.</p><p>Some Linux distribution contain an extra package for the IPv6 enabled xinetd, some others start the IPv6-enabled xinetd if following variable is set: NETWORKING_IPV6="yes", mostly done by /etc/sysconfig/network (only valid for Red Hat like distributions). In newer releases, one binary supports IPv4 and IPv6.</p><p>If you enable a built-in service like e.g. daytime by modifying the configuration file in /etc/xinetd.d/daytime like</p><pre class="screen">
# diff -u /etc/xinetd.d/daytime.orig /etc/xinetd.d/daytime 
--- /etc/xinetd.d/daytime.orig Sun Dec 16 19:00:14 2001 
+++ /etc/xinetd.d/daytime Sun Dec 16 19:00:22 2001 
@@ -10,5 +10,5 @@ 
        protocol = tcp 
        user = root 
        wait = no 
-       disable = yes 
+       disable = no 
 }
</pre><p>After restarting the xinetd you should get a positive result like:</p><pre class="screen">
# netstat -lnptu -A inet6 |grep "xinetd*" 
tcp 0 0 ::ffff:192.168.1.1:993  :::*  LISTEN  12345/xinetd-ipv6 
tcp 0 0 :::13                   :::*  LISTEN  12345/xinetd-ipv6 &lt;- service
¬ daytime/tcp
tcp 0 0 ::ffff:192.168.1.1:143  :::*  LISTEN  12345/xinetd-ipv6
</pre><p>Shown example also displays an IMAP and IMAP-SSL IPv4-only listening xinetd.</p><p>Note: earlier versions had a problem that an IPv4-only xinetd won't start on an IPv6-enabled node and also the IPv6-enabled xinetd won't start on an IPv4-only node. This is known to be fixed in later versions, at least version 2.3.11.</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="hints-daemons-apache2."></a>3. Webserver Apache2 (httpd2)</h2></div></div></div><p>Apache web server supports IPv6 native by maintainers since 2.0.14. Available patches for the older 1.3.x series are not current and shouldn't be used in public environment, but available at <a class="ulink" href="ftp://ftp.kame.net/pub/kame/misc/" target="_top">KAME / Misc</a>.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58532128"></a>3.1. Listening on IPv6 addresses</h3></div></div></div><p>Note: virtual hosts on IPv6 addresses are broken in versions until 2.0.28 (a patch is available for 2.0.28). But always try latest available version first because earlier versions had some security issues.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58533248"></a>3.1.1. Virtual host listen on an IPv6 address only</h4></div></div></div><pre class="screen">
Listen [2001:0db8:100::1]:80
&lt;VirtualHost [2001:0db8:100::1]:80&gt;
        ServerName ipv6only.yourdomain.yourtopleveldomain
        # ...sure more config lines
&lt;/VirtualHost&gt;
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58534384"></a>3.1.2. Virtual host listen on an IPv6 and on an IPv4 address</h4></div></div></div><pre class="screen">
Listen [2001:0db8:100::2]:80 
Listen 1.2.3.4:80
&lt;VirtualHost [2001:0db8:100::2]:80 1.2.3.4:80&gt;
        ServerName ipv6andipv4.yourdomain.yourtopleveldomain
        # ...sure more config lines
&lt;/VirtualHost&gt;
</pre><p>This should result after restart in e.g.</p><pre class="screen">
# netstat -lnptu |grep "httpd2\W*$" 
tcp 0 0 1.2.3.4:80          0.0.0.0:* LISTEN 12345/httpd2 
tcp 0 0 2001:0db8:100::1:80 :::*      LISTEN 12345/httpd2 
tcp 0 0 2001:0db8:100::2:80 :::*      LISTEN 12345/httpd2
</pre><p>For simple tests use the telnet example already shown.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58537440"></a>3.1.3. Additional notes</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Apache2 supports a method called &#8221;sendfile&#8221; to speedup serving data. Some NIC drivers also support offline checksumming. In some cases, this can lead to connection problems and invalid TCP checksums. In this cases, disable &#8221;sendfile&#8221; either by recompiling using configure option &#8221;--without-sendfile&#8221; or by using the "EnableSendfile off" directive in configuration file.</p></li></ul></div></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="hints-daemons-radvd"></a>4. Router Advertisement Daemon (radvd)</h2></div></div></div><p>The router advertisement daemon is very useful on a LAN, if clients should be auto-configured. The daemon itself should run on the Linux default IPv6 gateway router (it's not required that this is also the default IPv4 gateway, so pay attention who on your LAN is sending router advertisements). </p><p>You can specify some information and flags which should be contained in the advertisement. Common used are</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Prefix (needed)</p></li><li class="listitem"><p>Lifetime of the prefix</p></li><li class="listitem"><p>Frequency of sending advertisements (optional)</p></li></ul></div><p>After a proper configuration, the daemon sends advertisements through specified interfaces and clients are hopefully receive them and auto-magically configure addresses with received prefix and the default route.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58543872"></a>4.1. Configuring radvd</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58544512"></a>4.1.1. Simple configuration</h4></div></div></div><p>Radvd's config file is normally /etc/radvd.conf. An simple example looks like following:</p><pre class="screen">
interface eth0 { 
        AdvSendAdvert on;
        MinRtrAdvInterval 3; 
        MaxRtrAdvInterval 10;
        prefix 2001:0db8:0100:f101::/64 { 
                AdvOnLink on; 
                AdvAutonomous on; 
                AdvRouterAddr on; 
        };
};
</pre><p>This results on client side in</p><pre class="screen">
# ip -6 addr show eth0 
3: eth0: &lt;BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc pfifo_fast qlen 100 
    inet6 2001:0db8:100:f101:2e0:12ff:fe34:1234/64 scope global dynamic 
       valid_lft 2591992sec preferred_lft 604792sec 
    inet6 fe80::2e0:12ff:fe34:1234/10 scope link
</pre><p>Because no lifetime was defined, a very high value was used.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58547616"></a>4.1.2. Special 6to4 configuration</h4></div></div></div><p>Version since 0.6.2pl3 support the automatic (re)-generation of the prefix depending on an IPv4 address of a specified interface. This can be used to distribute advertisements in a LAN after the 6to4 tunneling has changed. Mostly used behind a dynamic dial-on-demand Linux router. Because of the sure shorter lifetime of such prefix (after each dial-up, another prefix is valid), the lifetime configured to minimal values:</p><pre class="screen">
interface eth0 { 
        AdvSendAdvert on;
        MinRtrAdvInterval 3; 
        MaxRtrAdvInterval 10;
        prefix 0:0:0:f101::/64 { 
                AdvOnLink off; 
                AdvAutonomous on; 
                AdvRouterAddr on; 
                Base6to4Interface ppp0;
                AdvPreferredLifetime 20; 
                AdvValidLifetime 30;
        };
};
</pre><p>This results on client side in (assuming, ppp0 has currently 1.2.3.4 as local IPv4 address):</p><pre class="screen">
# /sbin/ip -6 addr show eth0 
3: eth0: &lt;BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc pfifo_fast qlen 100 
   inet6 2002:0102:0304:f101:2e0:12ff:fe34:1234/64 scope global dynamic 
      valid_lft 22sec preferred_lft 12sec
   inet6 fe80::2e0:12ff:fe34:1234/10 scope link
</pre><p>Because a small lifetime was defined, such prefix will be thrown away quickly, if no related advertisement was received.</p><p>Additional note: if you do not used special 6to4 support in initscripts, you have to setup a special route on the internal interface on the router, otherwise you will get some backrouting problems. for the example showh here:</p><pre class="screen">
# /sbin/ip -6 route add 2002:0102:0304:f101::/64 dev eth0 metric 1
</pre><p>This route needs to be replaced every time the prefix changes, which is the case after a new IPv4 address was assigned to the dial-up interface.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58554480"></a>4.2. Debugging</h3></div></div></div><p>A program called &#8221;radvdump&#8221; can help you looking into sent or received advertisements. Simple to use:</p><pre class="screen">
# radvdump 
Router advertisement from fe80::280:c8ff:feb9:cef9 (hoplimit 255) 
        AdvCurHopLimit: 64 
        AdvManagedFlag: off 
        AdvOtherConfigFlag: off 
        AdvHomeAgentFlag: off 
        AdvReachableTime: 0 
        AdvRetransTimer: 0 
        Prefix 2002:0102:0304:f101::/64 
                AdvValidLifetime: 30 
                AdvPreferredLifetime: 20 
                AdvOnLink: off 
                AdvAutonomous: on 
                AdvRouterAddr: on 
        Prefix 2001:0db8:100:f101::/64 
                AdvValidLifetime: 2592000 
                AdvPreferredLifetime: 604800 
                AdvOnLink: on 
                AdvAutonomous: on 
                AdvRouterAddr: on 
        AdvSourceLLAddress: 00 80 12 34 56 78
</pre><p>Output shows you each advertisement package in readable format. You should see your configured values here again, if not, perhaps it's not your radvd which sends the advertisement...look for another router on the link (and take the LLAddress, which is the MAC address for tracing).</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="hints-daemons-dhcpv6."></a>5. Dynamic Host Configuration v6 Server (dhcp6s)</h2></div></div></div><p>DHCPv6 can be used for stateful configurations. The daemon itself need not necessary run on the Linux default IPv6 gateway router. </p><p>You can specify more information than by using radvd. The are most similar to IPv4 DHCP server.</p><p>After a proper configuration, the daemon reacts on received ICMPv6 multicast packets sent by a client to address ff02::1:2</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58560528"></a>5.1. Configuration of the DHCPv6 server (dhcp6s)</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58561168"></a>5.1.1. Simple configuration</h4></div></div></div><p>dhcp6s's config file is normally /etc/dhcp6s.conf. An simple example looks like following:</p><pre class="screen">
interface eth0 {
        server-preference 255;
        renew-time 60;
        rebind-time 90;
        prefer-life-time 130;
        valid-life-time 200;
        allow rapid-commit;
        option dns_servers 2001:db8:0:f101::1 sub.domain.example;
        link AAA {
                range 2001:db8:0:f101::1000 to 2001:db8:0:f101::ffff/64;
                prefix 2001:db8:0:f101::/64;
        };
};
</pre></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58562672"></a>5.2. Configuration of the DHCPv6 client (dhcp6c)</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58563312"></a>5.2.1. Simple configuration</h4></div></div></div><p>dhcp6c's config file is normally /etc/dhcp6c.conf. An simple example looks like following:</p><pre class="screen">
interface eth0 {
        send rapid-commit;
        request domain-name-servers;
}; 
</pre></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58565984"></a>5.3. Usage</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58566624"></a>5.3.1. dhcpv6_server</h4></div></div></div><p>Start server, e.g.</p><pre class="screen">
# service dhcp6s start
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58568016"></a>5.3.2. dhcpv6_client</h4></div></div></div><p>Start client in foreground, e.g.</p><pre class="screen">
# dhcp6c -f eth0
</pre></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58569408"></a>5.4. Debugging</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58570048"></a>5.4.1. dhcpv6_server</h4></div></div></div><p>The server has one foreground and two debug toggles (both should be used for debugging), here is an example:</p><pre class="screen">
# dhcp6s -d -D -f eth0
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58571568"></a>5.4.2. dhcpv6_client</h4></div></div></div><p>As general debugging for test whether the IPv6 DHCP server is reable on the link use an IPv6 ping to the DHCP multicast address:</p><pre class="screen">
# ping6 -I eth0 ff02::1:2
</pre><p>The client has one foreground and two debug toggles, here is an example:</p><pre class="screen">
# dhcp6c -d -f eth0
Oct/03/2005 17:18:16 dhcpv6 doesn't support hardware type 776 
Oct/03/2005 17:18:16 doesn't support sit0 address family 0 
Oct/03/2005 17:18:16 netlink_recv_rtgenmsg error 
Oct/03/2005 17:18:16 netlink_recv_rtgenmsg error 
Oct/03/2005 17:18:17 status code for this address is: success 
Oct/03/2005 17:18:17 status code: success 
Oct/03/2005 17:18:17 netlink_recv_rtgenmsg error 
Oct/03/2005 17:18:17 netlink_recv_rtgenmsg error 
Oct/03/2005 17:18:17 assigned address 2001:db8:0:f101::1002 prefix len is not
¬ in any RAs prefix length using 64 bit instead 
Oct/03/2005 17:18:17 renew time 60, rebind time 9
</pre><p>Note that the netlink error messages have no impact.</p></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="hints-daemons-isc-dhcp"></a>6. ISC Dynamic Host Configuration Server (dhcpd)</h2></div></div></div><p>ISC DHCP supports IPv6 since version 4.x.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58576704"></a>6.1. Configuration of the ISC DHCP server for IPv6 (dhcpd)</h3></div></div></div><p>Note that currently, the ISC DHCP server can only serve IPv4 or IPv6, means you have to start the daemon twice (for IPv6 with option &#8221;-6&#8221;) to support both protocols.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58577952"></a>6.1.1. Simple configuration</h4></div></div></div><p>Create a dedicated configuration file /etc/dhcp/dhcpd6.conf for the IPv6 part of the dhcpd. Note, that the router requires to have a interface configured with an IPv6 address out of the defined subnet.</p><pre class="screen">
default-lease-time 600;
max-lease-time 7200; 
log-facility local7; 
subnet6 2001:db8:0:1::/64 {
        # Range for clients
        range6 2001:db8:0:1::129 2001:db8:0:1::254;

        # Range for clients requesting a temporary address
        range6 2001:db8:0:1::/64 temporary;

        # Additional options
        option dhcp6.name-servers fec0:0:0:1::1;
        option dhcp6.domain-search "domain.example";

        # Prefix range for delegation to sub-routers
        prefix6 2001:db8:0:100:: 2001:db8:0:f00:: /56;

        # Example for a fixed host address
        host specialclient {
    		host-identifier option dhcp6.client-id 00:01:00:01:4a:1f:ba:e3:60:b9:1f:01:23:45;
        	fixed-address6 2001:db8:0:1::127;
    	} 
} 
</pre><p>Note that the &#8221;dhcp.client-id&#8221; no longer belongs to a MAC address, an unique ID is used instead! &#8221;dhcp6c&#8221; (see above) uses the file /var/lib/dhcpv6/dhcp6c_duid (would be created during first start, if not existing) as unique identity. It's a 14 byte long identifier, starting with a 2 byte length information (usually &#8221;0x000e&#8221;):</p><pre class="screen">
# hexdump -e '"%07.7_ax " 1/2 "%04x" " " 14/1 "%02x:" "\n"' /var/lib/dhcpv6/dhcp6c_duid 0000000 000e 00:01:00:01:4a:1f:ba:e3:60:b9:1f:01:23:45:
</pre></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58582512"></a>6.2. Usage</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58583536"></a>6.2.1. dhcpd</h4></div></div></div><p>Start server in foreground:</p><pre class="screen">
# /usr/sbin/dhcpd -6 -d -cf /etc/dhcp/dhcpd6.conf eth1 
Internet Systems Consortium DHCP Server 4.1.0 
Copyright 2004-2008 Internet Systems Consortium. 
All rights reserved. 
For info, please visit http://www.isc.org/sw/dhcp/ 
Not searching LDAP since ldap-server, ldap-port and ldap-base-dn were not specified in the config file 
Wrote 0 leases to leases file. 
Bound to *:547 
Listening on Socket/5/eth1/2001:db8:0:1::/64 
Sending on   Socket/5/eth1/2001:db8:0:1::/64
</pre></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="hints-daemons-dibbler"></a>7. DHCP Server Dibbler</h2></div></div></div><p>Dibbler is also a DHCP server</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58587216"></a>7.1. Configuration of the Dibbler DHCP server for IPv6</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58587856"></a>7.1.1. Simple configuration</h4></div></div></div><p>Create a dedicated configuration file /etc/dibbler/server.conf . Note, that the router requires to have a interface configured with an IPv6 address out of the defined subnet.</p><pre class="screen">
log-level 8 
log-mode short 
preference 0 
iface "eth1" {
 // also ranges can be defines, instead of exact values  t1 1800-2000  t2 2700-3000
  prefered-lifetime 3600
  valid-lifetime 7200
  class {
    pool 2001:6f8:12d8:1::/64
  }
  option dns-server fec0:0:0:1::1
  option domain domain.example
} 
</pre></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58589440"></a>7.2. Usage</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58590736"></a>7.2.1. dibbler-server</h4></div></div></div><p>Start server in foreground:</p><pre class="screen">
# dibbler-server run 
| Dibbler - a portable DHCPv6, version 0.7.3 (SERVER, Linux port) 
| Authors : Tomasz Mrugalski&lt;thomson(at)klub.com.pl&gt;,Marek Senderski&lt;msend(at)o2.pl&gt; 
| Licence : GNU GPL v2 only. Developed at Gdansk University of Technology. 
| Homepage: http://klub.com.pl/dhcpv6/ 
2009.05.28 10:18:48 Server Notice    My pid (1789) is stored in /var/lib/dibbler/server.pid 
2009.05.28 10:18:48 Server Notice    Detected iface eth0/3, MAC=54:52:00:01:23:45. 
2009.05.28 10:18:48 Server Notice    Detected iface eth1/2, MAC=54:52:00:67:89:ab. 
2009.05.28 10:18:48 Server Notice    Detected iface lo/1, MAC=00:00:00:00:00:00. 
2009.05.28 10:18:48 Server Debug     Skipping database loading. 
2009.05.28 10:18:48 Server Debug     Cache:server-cache.xml file: parsing started, expecting 0 entries. 
2009.05.28 10:18:48 Server Notice    Parsing /etc/dibbler/server.conf config file... 
18:48 Server Debug     Setting 0 generic option(s). 
18:48 Server Debug     0 per-client configurations (exceptions) added. 
18:48 Server Debug     Parsing /etc/dibbler/server.conf done. 
18:48 Server Info      0 client class(es) defined. 
18:48 Server Debug     1 interface(s) specified in /etc/dibbler/server.conf 
18:48 Server Info      Mapping allow, deny list to class 0:0 allow/deny entries in total. 
18:48 Server Info      Interface eth1/2 configuration has been loaded. 
18:48 Server Notice    Running in stateful mode. 
18:48 Server Info      My DUID is 00:01:00:01:11:aa:6d:a7:54:52:00:67:89:ab. 
18:48 Server Notice    Creating multicast (ff02::1:2) socket on eth1/2 (eth1/2) interface. 
18:48 Server Debug     Cache: size set to 1048576 bytes, 1 cache entry size is 87 bytes, so maximum 12052 address-client pair(s) may be cached. 
18:48 Server Notice    Accepting connections. Next event in 4294967295 second(s).
</pre></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="hints-daemons-tcpwrapper"></a>8. tcp_wrapper</h2></div></div></div><p>tcp_wrapper is a library which can help you to protect service against misuse.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58593632"></a>8.1. Filtering capabilities</h3></div></div></div><p>You can use tcp_wrapper for</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Filtering against source addresses (IPv4 or IPv6)</p></li><li class="listitem"><p>Filtering against users (requires a running ident daemon on the client)</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58599376"></a>8.2. Which program uses tcp_wrapper</h3></div></div></div><p>Following are known:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Each service which is called by xinetd (if xinetd is compiled using tcp_wrapper library)</p></li><li class="listitem"><p>sshd (if compiled using tcp_wrapper)</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58601408"></a>8.3. Usage</h3></div></div></div><p>tcp_wrapper is controlled by two files name /etc/hosts.allow and /etc/hosts.deny. For more information see</p><pre class="screen">
$ man hosts.allow
</pre><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58603040"></a>8.3.1. Example for /etc/hosts.allow</h4></div></div></div><p>In this file, each service which should be positive filtered (means connects are accepted) need a line.</p><pre class="screen">
sshd:           1.2.3. [2001:0db8:100:200::]/64
daytime-stream: 1.2.3. [2001:0db8:100:200::]/64
</pre><p>Note: there are broken implementations around, which uses following broken IPv6 network description: [2001:0db8:100:200::/64]. Hopefully, such versions will be fixed soon.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58605168"></a>8.3.2. Example for /etc/hosts.deny</h4></div></div></div><p>This file contains all negative filter entries and should normally deny the rest using</p><pre class="screen">
ALL: ALL
</pre><p>If this node is a more sensible one you can replace the standard line above with this one, but this can cause a DoS attack (load of mailer and spool directory), if too many connects were made in short time. Perhaps a logwatch is better for such issues.</p><pre class="screen">
ALL: ALL: spawn (echo "Attempt from %h %a to %d at `date`" 
 | tee -a /var/log/tcp.deny.log | mail root@localhost)
</pre></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58607584"></a>8.4. Logging</h3></div></div></div><p>Depending on the entry in the syslog daemon configuration file /etc/syslog.conf the tcp_wrapper logs normally into /var/log/secure.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58608960"></a>8.4.1. Refused connection</h4></div></div></div><p>A refused connection via IPv4 to an xinetd covered daytime service produces a line like following example</p><pre class="screen">
Jan 2 20:40:44 gate xinetd-ipv6[12346]: FAIL: daytime-stream libwrap
¬ from=::ffff:1.2.3.4
Jan 2 20:32:06 gate xinetd-ipv6[12346]: FAIL: daytime-stream libwrap 
 from=2001:0db8:100:200::212:34ff:fe12:3456
</pre><p>A refused connection via IPv4 to an dual-listen sshd produces a line like following example</p><pre class="screen">
Jan 2 20:24:17 gate sshd[12345]: refused connect from ::ffff:1.2.3.4
¬ (::ffff:1.2.3.4)
Jan 2 20:39:33 gate sshd[12345]: refused connect 
 from 2001:0db8:100:200::212:34ff:fe12:3456
¬ (2001:0db8:100:200::212:34ff:fe12:3456)
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58611824"></a>8.4.2. Permitted connection</h4></div></div></div><p>A permitted connection via IPv4 to an xinetd covered daytime service produces a line like following example</p><pre class="screen">
Jan 2 20:37:50 gate xinetd-ipv6[12346]: START: daytime-stream pid=0
¬ from=::ffff:1.2.3.4 
Jan 2 20:37:56 gate xinetd-ipv6[12346]: START: daytime-stream pid=0 
 from=2001:0db8:100:200::212:34ff:fe12:3456
</pre><p>A permitted connection via IPv4 to an dual-listen sshd produces a line like following example</p><pre class="screen">
Jan 2 20:43:10 gate sshd[21975]: Accepted password for user from ::ffff:1.2.3.4
¬ port 33381 ssh2
Jan 2 20:42:19 gate sshd[12345]: Accepted password for user 
 from 2001:0db8:100:200::212:34ff:fe12:3456 port 33380 ssh2
</pre></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="hints-daemons-vsftpd"></a>9. vsftpd</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58616704"></a>9.1. Listening on IPv6 addresses</h3></div></div></div><p>Edit the configuration file, ususally /etc/vsftpd/vsftpd.conf, and adjust the listen option like</p><pre class="screen">
listen_ipv6=yes
</pre><p>That's all.</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="hints-daemons-proftpd"></a>10. proftpd</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58619472"></a>10.1. Listening on IPv6 addresses</h3></div></div></div><p>Edit the configuration file, ususally /etc/proftpd.conf, but take care, not 100% logical in virtual host setup</p><pre class="screen">
&lt;VirtualHost 192.0.2.1&gt;
        ...
        Bind 2001:0DB8::1
        ...
&lt;/VirtualHost&gt;
</pre><p>That's all.</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="hints-daemons-others"></a>11. Other daemons</h2></div></div></div><p>Nowadays it's mostly simple, look for either a command line option or a configuration value to enable IPv6 listening. See manual page of the daemon or check related FAQs. It can happen that you can bind a daemon only to the IPv6-&#8221;any&#8221;-address (::) and not to bind to a dedicated IPv6 address, because the lack of support (depends on that what the programmer has implemented so far...).</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chapter-programming"></a>Chapter 23. Programming</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#chapter-section-using-API">1. Programming using C-API</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58634448">1.1. Address Structures</a></span></dt><dt><span class="sect2"><a href="#idp58653104">1.2. Lookup Functions</a></span></dt><dt><span class="sect2"><a href="#idp58675120">1.3. Quirks Encountered</a></span></dt><dt><span class="sect2"><a href="#idp58685104">1.4. Putting It All Together (A Client-Server Programming Example)</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp57692944">2. Other programming languages</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp57693632">2.1. JAVA</a></span></dt><dt><span class="sect2"><a href="#idp58791360">2.2. Perl</a></span></dt></dl></dd></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="chapter-section-using-API"></a>1. Programming using C-API</h2></div></div></div><p>Related RFCs:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.faqs.org/rfcs/rfc3493.html" target="_top">RFC 3493 / Basic Socket Interface Extensions for IPv6</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.faqs.org/rfcs/rfc3542.html" target="_top">RFC 3542 / Advanced Sockets Application Program Interface (API) for IPv6</a></p></li></ul></div><p>Following contents of this section is contributed by John Wenker, Sr. Software Engineer Performance Technologies San Diego, CA USA <a class="ulink" href="http://www.pt.com/" target="_top">http://www.pt.com/</a>.</p><p>
</p><p>This section describes how to write IPv6 client-server applications under the Linux operating system. First thing's first, and credit must be given where it is due. The information contained in this section is derived from Chapters 2 through 4 of IPv6 Network Programming by Jun-ichiro itojun Hagino (ISBN 1-55558-318-0). The reader is encouraged to consult that book for more detailed information. It describes how to convert IPv4 applications to be IPv6 compatible in a protocol-independent way, and describes some of the common problems encountered during the conversion along with suggested solutions. At the time of this writing, this is the only book of which the author is aware that specifically addresses how to program IPv6 applications [since writing this section, the author has also become aware of the Porting applications to IPv6 HowTo by Eva M. Castro at <a class="ulink" href="http://jungla.dit.upm.es/~ecastro/IPv6-web/ipv6.html" target="_top">http://jungla.dit.upm.es/~ecastro/IPv6-web/ipv6.html</a>]. Unfortunately, of the almost 360 pages in the book, maybe 60 are actually useful (the chapters mentioned). Nevertheless, without the guidance of that book, the author would have been unable to perform his job duties or compose this HowTo. While most (but certainly not all) of the information in the Hagino book is available via the Linux 'man' pages, application programmers will save a significant amount of time and frustration by reading the indicated chapters of the book rather than searching through the 'man' pages and online documentation.</p><p>Other than the Hagino book, any other information presented in this HowTo was obtained through trial and error. Some items or explanations may not be entirely &#8221;correct&#8221; in the grand IPv6 scheme, but seem to work in practical application.</p><p>The discussion that follows assumes the reader is already experienced with the traditional TCP/IP socket API. For more information on traditional socket programming, the Internetworking with TCP/IP series of textbooks by Comer &amp; Stevens is hard to beat, specifically Volume III: Client-Server Programming and Applications, Linux/POSIX Sockets Version (ISBN 0-13-032071-4). This HowTo also assumes that the reader has had at least a bare basic introduction to IPv6 and in particular the addressing scheme for network addresses (see Section 2.3).</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58634448"></a>1.1. Address Structures</h3></div></div></div><p>This section provides a brief overview of the structures provided in the socket API to represent network addresses (or more specifically transport endpoints) when using the Internet protocols in a client-server application.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58635584"></a>1.1.1. IPv4 sockaddr_in</h4></div></div></div><p>In IPv4, network addresses are 32 bits long and define a network node. Addresses are written in dotted decimal notation, such as 192.0.2.1, where each number represents eight bits of the address. Such an IPv4 address is represented by the struct sockaddr_in data type, which is defined in &lt;netinet/in.h&gt;.</p><pre class="screen">
struct sockaddr_in
{
   sa_family_t    sin_family;
   in_port_t      sin_port;
   struct in_addr sin_addr;
   /* Plus some padding for alignment */
};
</pre><p>The sin_family component indicates the address family. For IPv4 addresses, this is always set to AF_INET. The sin_addr field contains the 32-bit network address (in network byte order). Finally, the sin_port component represents the transport layer port number (in network byte order). Readers should already be familiar with this structure, as this is the standard IPv4 address structure.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58639024"></a>1.1.2. IPv6 sockaddr_in6</h4></div></div></div><p>The biggest feature of IPv6 is its increased address space. Instead of 32-bit network addresses, IPv6 allots 128 bits to an address. Addresses are written in colon-hex notation of the form fe80::2c0:8cff:fe01:2345, where each hex number separated by colons represents 16 bits of the address. Two consecutive colons indicate a string of consecutive zeros for brevity, and at most only one double-colon may appear in the address. IPv6 addresses are represented by the struct sockaddr_in6 data type, also defined in &lt;netinet/in.h&gt;.</p><pre class="screen">
struct sockaddr_in6
{
   sa_family_t     sin6_family;
   in_port_t       sin6_port;
   uint32_t        sin6_flowinfo;
   struct in6_addr sin6_addr;
   uint32_t        sin6_scope_id;
};
</pre><p>The sin6_family, sin6_port, and sin6_addr components of the structure have the same meaning as the corresponding fields in the sockaddr_in structure. However, the sin6_family member is set to AF_INET6 for IPv6 addresses, and the sin6_addr field holds a 128-bit address instead of only 32 bits.</p><p>The sin6_flowinfo field is used for flow control, but is not yet standardized and can be ignored.</p><p>The sin6_scope_id field has an odd use, and it seems (at least to this naïve author) that the IPv6 designers took a huge step backwards when devising this. Apparently, 128-bit IPv6 network addresses are not unique. For example, it is possible to have two hosts, on separate networks, with the same link-local address (see Figure 1). In order to pass information to a specific host, more than just the network address is required; the scope identifier must also be specified. In Linux, the network interface name is used for the scope identifier (e.g. &#8221;eth0&#8221;) [be warned that the scope identifier is implementation dependent!]. Use the ifconfig(1M) command to display a list of active network interfaces.</p><p>A colon-hex network address can be augmented with the scope identifier to produce a "scoped address&#8221;. The percent sign ('%') is used to delimit the network address from the scope identifier. For example, fe80::1%eth0 is a scoped IPv6 address where fe80::1 represents the 128-bit network address and eth0 is the network interface (i.e. the scope identifier). Thus, if a host resides on two networks, such as Host B in example below, the user now has to know which path to take in order to get to a particular host. In Figure 1, Host B addresses Host A using the scoped address fe80::1%eth0, while Host C is addressed with fe80::1%eth1.</p><pre class="screen">
Host A (fe80::1) ---- eth0 ---- Host B ---- eth1 ---- Host C (fe80::1)
</pre><p>Getting back to the sockaddr_in6 structure, its sin6_scope_id field contains the index of the network interface on which a host may be found. Server applications will have this field set automatically by the socket API when they accept a connection or receive a datagram. For client applications, if a scoped address is passed as the node parameter to getaddrinfo(3) (described later in this HowTo), then the sin6_scope_id field will be filled in correctly by the system upon return from the function; if a scoped address is not supplied, then the sin6_scope_id field must be explicitly set by the client software prior to attempting to communicate with the remote server. The if_nametoindex(3) function is used to translate a network interface name into its corresponding index. It is declared in &lt;net/if.h&gt;.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58647968"></a>1.1.3. Generic Addresses</h4></div></div></div><p>As any programmer familiar with the traditional TCP/IP socket API knows, several socket functions deal with "generic" pointers. For example, a pointer to a generic struct sockaddr data type is passed as a parameter to some socket functions (such as connect(2) or bind(2)) rather than a pointer to a specific address type. Be careful&#8230; the sockaddr_in6 structure is larger than the generic sockaddr structure! Thus, if your program receives a generic address whose actual type is unknown (e.g. it could be an IPv4 address structure or an IPv6 address structure), you must supply sufficient storage to hold the entire address. The struct sockaddr_storage data type is defined in &lt;bits/socket.h&gt; for this purpose [do not #include this file directly within an application; use &lt;sys/socket.h&gt; as usual, and &lt;bits/socket.h&gt; will be implicitly included].</p><p>For example, consider the recvfrom(2) system call, which is used to receive a message from a remote peer. Its function prototype is:</p><pre class="screen">
ssize_t recvfrom( int              s,
                  void            *buf,
                  size_t           len,
                  int              flags,
                  struct sockaddr *from,
                  socklen_t       *fromlen );
</pre><p>The from parameter points to a generic sockaddr structure. If data can be received from an IPv6 peer on the socket referenced by s, then from should point to a data type of struct sockaddr_storage, as in the following dummy example:</p><pre class="screen">
/*
** Read a message from a remote peer, and return a buffer pointer to
** the caller.
**
** 's' is the file descriptor for the socket.
*/
char *rcvMsg( int s )
{
   static char             bfr[ 1025 ];  /* Where the msg is stored. */
   ssize_t                 count;
   struct sockaddr_storage ss;           /* Where the peer adr goes. */
   socklen_t               sslen;
   sslen = sizeof( ss );
   count = recvfrom( s,
                     bfr,
                     sizeof( bfr ) - 1,
                     0,
                     (struct sockaddr*) &amp;ss,
                     &amp;sslen );
   bfr[ count ] = '\0';   /* Null-terminates the message. */
   return bfr;
}  /* End rcvMsg() */
</pre><p>As seen in the above example, ss (a struct sockaddr_storage data object) is used to receive the peer address information, but it's address is typecast to a generic struct sockaddr* pointer in the call to recvfrom(2). </p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58653104"></a>1.2. Lookup Functions</h3></div></div></div><p>Traditionally, hostname and service name resolution were performed by functions such as gethostbyname(3) and getservbyname(3). These traditional lookup functions are still available, but they are not forward compatible to IPv6. Instead, the IPv6 socket API provides new lookup functions that consolidate the functionality of several traditional functions. These new lookup functions are also backward compatible with IPv4, so a programmer can use the same translation algorithm in an application for both the IPv4 and IPv6 protocols. This is an important feature, because obviously a global IPv6 infrastructure isn't going to be put in place overnight. Thus, during the transition period from IPv4 to IPv6, client-server applications should be designed with the flexibility to handle both protocols simultaneously. The example programs at the end of this chapter do just that.</p><p>The primary lookup function in the new socket API is getaddrinfo(3). Its prototype is as follows. </p><pre class="screen">
int getaddrinfo( const char             *node,
                 const char             *service,
                 const struct addrinfo  *hints,
                 struct addrinfo       **res );
</pre><p>The node parameter is a pointer to the hostname or IP address being translated. The referenced string can be a hostname, IPv4 dotted decimal address, or IPv6 colon-hex address (possibly scoped). The service parameter is a pointer to the transport layer's service name or port number. It can be specified as a name found in /etc/services or a decimal number. getaddrinfo(3) resolves the host/service combination and returns a list of address records; a pointer to the list is placed in the location pointed at by res. For example, suppose a host can be identified by both an IPv4 and IPv6 address, and that the indicated service has both a TCP entry and UDP entry in /etc/services. In such a scenario, it is not inconceivable that four address records are returned; one for TCP/IPv6, one for UDP/IPv6, one for TCP/IPv4, and one for UDP/IPv4.</p><p>The definition for struct addrinfo is found in &lt;netdb.h&gt; (as is the declaration for getaddrinfo(3) and the other functions described in this section). The structure has the following format:</p><pre class="screen">
struct addrinfo
{
   int              ai_flags;
   int              ai_family;
   int              ai_socktype;
   int              ai_protocol;
   socklen_t        ai_addrlen;
   struct sockaddr *ai_addr;
   char            *ai_canonname;
   struct addrinfo *ai_next;
};
</pre><p>Consult the 'man' page for getaddrinfo(3) for detailed information about the various fields; this HowTo only describes a subset of them, and only to the extent necessary for normal IPv6 programming.</p><p>The ai_family, ai_socktype, and ai_protocol fields have the exact same meaning as the parameters to the socket(2) system call. The ai_family field indicates the protocol family (not the address family) associated with the record, and will be PF_INET6 for IPv6 or PF_INET for IPv4. The ai_socktype parameter indicates the type of socket to which the record corresponds; SOCK_STREAM for a reliable connection-oriented byte-stream or SOCK_DGRAM for connectionless communication. The ai_protocol field specifies the underlying transport protocol for the record.</p><p>The ai_addr field points to a generic struct sockaddr object. Depending on the value in the ai_family field, it will point to either a struct sockaddr_in (PF_INET) or a struct sockaddr_in6 (PF_INET6). The ai_addrlen field contains the size of the object pointed at by the ai_addr field.</p><p>As mentioned, getaddrinfo(3) returns a list of address records. The ai_next field points to the next record in the list.</p><p>The hints parameter to getaddrinfo(3) is also of type struct addrinfo and acts as a filter for the address records returned in res. If hints is NULL, all matching records are returned; but if hints is non-NULL, the referenced structure gives "hints" to getaddrinfo(3) about which records to return. Only the ai_flags, ai_family, ai_socktype, and ai_protocol fields are significant in the hints structure, and all other fields should be set to zero.</p><p>Programs can use hints-&gt;ai_family to specify the protocol family. For example, if it is set to PF_INET6, then only IPv6 address records are returned. Likewise, setting hints-&gt;ai_family to PF_INET results in only IPv4 address records being returned. If an application wants both IPv4 and IPv6 records, the field should be set to PF_UNSPEC.</p><p>The hints-&gt;socktype field can be set to SOCK_STREAM to return only records that correspond to connection-oriented byte streams, SOCK_DGRAM to return only records corresponding to connectionless communication, or 0 to return both.</p><p>For the Internet protocols, there is only one protocol associated with connection-oriented sockets (TCP) and one protocol associated with connectionless sockets (UDP), so setting hints-&gt;ai_socktype to SOCK_STREAM or SOCK_DGRAM is the same as saying, "Give me only TCP records," or "Give me only UDP records," respectively. With that in mind, the hints-&gt;ai_protocol field isn't really that important with the Internet protocols, and pretty much mirrors the hints-&gt;ai_socktype field. Nevertheless, hints-&gt;ai_protocol can be set to IPPROTO_TCP to return only TCP records, IPPROTO_UDP to return only UDP records, or 0 for both.</p><p>The node or service parameter to gethostbyname(3) can be NULL, but not both. If node is NULL, then the ai_flags field of the hints parameter specifies how the network address in a returned record is set (i.e. the sin_addr or sin6_addr field of the object pointed at by the ai_addr component in a returned record). If the AI_PASSIVE flag is set in hints, then the returned network addresses are left unresolved (all zeros). This is how server applications would use getaddrinfo(3). If the flag is not set, then the address is set to the local loopback address (::1 for IPv6 or 127.0.0.1 for IPv4). This is one way a client application can specify that the target server is running on the same machine as the client. If the service parameter is NULL, the port number in the returned address records remains unresolved.</p><p>The getaddrinfo(3) function returns zero on success, or an error code. In the case of an error, the gai_strerror(3) function is used to obtain a character pointer to an error message corresponding to the error code, just like strerror(3) does in the standard 'C' library.</p><p>Once the address list is no longer needed, it must be freed by the application. This is done with the freeaddrinfo(3) function.</p><p>The last function that will be mentioned in this section is getnameinfo(3). This function is the inverse of getaddrinfo(3); it is used to create a string representation of the hostname and service from a generic struct sockaddr data object. It has the following prototype. </p><pre class="screen">
int getnameinfo( const struct sockaddr *sa,
                 socklen_t              salen,
                 char                  *host,
                 size_t                 hostlen,
                 char                  *serv,
                 size_t                 servlen,
                 int                    flags );
</pre><p>The sa parameter points to the address structure in question, and salen contains its size. The host parameter points to a buffer where the null-terminated hostname string is placed, and the hostlen parameter is the size of that buffer. If there is no hostname that corresponds to the address, then the network address (dotted decimal or colon-hex) is placed in host. Likewise, the serv parameter points to a buffer where the null-terminated service name string (or port number) is placed, and the servlen parameter is the size of that buffer. The flags parameter modifies the function's behavior; in particular, the NI_NUMERICHOST flag indicates that the converted hostname should always be formatted in numeric form (i.e. dotted decimal or colon-hex), and the NI_NUMERICSERV flag indicates that the converted service should always be in numeric form (i.e. the port number).</p><p>The symbols NI_MAXHOST and NI_MAXSERV are available to applications and represent the maximum size of any converted hostname or service name, respectively. Use these when declaring output buffers for getnameinfo(3).</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58675120"></a>1.3. Quirks Encountered</h3></div></div></div><p>Before jumping into the programming examples, there are several quirks in IPv6 of which the reader should be aware. The more significant ones (in addition to the non-uniqueness of IPv6 network addresses already discussed) are described in the paragraphs below. </p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58676288"></a>1.3.1. IPv4 Mapped Addresses</h4></div></div></div><p>For security reasons that this author won't pretend to understand, "IPv4 mapped addresses" should not be allowed in IPv6-capable server applications. To put it in terms that everyone can understand, this simply means that a server should not accept IPv4 traffic on an IPv6 socket (an otherwise legal operation). An IPv4 mapped address is a mixed-format address of the form:</p><pre class="screen">
::ffff:192.0.2.1
</pre><p>where the first portion is in IPv6 colon-hex format and the last portion is in IPv4 dotted decimal notation. The dotted decimal IPv4 address is the actual network address, but it is being mapped into an IPv6 compatible format.</p><p>To prevent IPv4 mapped addresses from being accepted on an IPv6 socket, server applications must explicitly set the IPV6_V6ONLY socket option on all IPv6 sockets created [the Hagino book implies that this is only a concern with server applications. However, it has been observed during testing that if a client application uses an IPv4 mapped address to specify the target server, and the target server has IPv4 mapped addresses disabled, the connection still completes regardless. On the server side, the connection endpoint is an IPv4 socket as desired; but on the client side, the connection endpoint is an IPv6 socket. Setting the IPV6_V6ONLY socket option on the client side as well as the server side prevents any connection from being established at all.]. There's only one problem. Apparently, IPV6_V6ONLY isn't defined on all systems [or at least it wasn't in 2005 when the Hagino book was written]. The server example at the end of this chapter provides a method for handling this problem.</p><p>If IPv4 traffic cannot be handled on IPv6 sockets, then that implies that server applications must open both an IPv4 and IPv6 socket for a particular network service if it wants to handle requests from either protocol. This goes back to the flexibility issue mentioned earlier. If getaddrinfo(3) returns multiple address records, then server applications should traverse the list and open a passive socket for each address provided. </p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58680896"></a>1.3.2. Cannot Specify the Scope Identifier in /etc/hosts</h4></div></div></div><p>It is possible to assign a hostname to an IPv6 network address in /etc/hosts. For example, the following is an excerpt from the /etc/hosts file on the author's development system. </p><pre class="screen">
        ::1                        localhost
        127.0.0.1                  localhost
        fe80::2c0:8cff:fe01:2345   pt141
        192.0.2.1                  pt141
</pre><p>The "localhost" and "pt141" hostnames can be translated to either an IPv4 or IPv6 network address. So, for example, if "pt141" is passed as the node parameter to getaddrinfo(3), the function returns both an IPv4 and IPv6 address record for the host (assuming the behavior hasn't been modified by the hints parameter). Unfortunately, a scoped address cannot be used in /etc/hosts. Doing so results in getaddrinfo(3) returning only the IPv4 record.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58683536"></a>1.3.3. Client &amp; Server Residing on the Same Machine</h4></div></div></div><p>Suppose a machine has the IPv4 address 192.0.2.1. A client application running on that machine can connect to a server application on the same machine by using either the local loopback address (127.0.0.1) or the network address (192.0.2.1) as the target server. Much to this author's surprise (and dismay), it turns out that an IPv6 client application cannot connect to a server application on the same machine if it uses the network address of that machine as the target; it must use the local loopback address (::1). </p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58685104"></a>1.4. Putting It All Together (A Client-Server Programming Example)</h3></div></div></div><p>Now it's time to put everything discussed thus far together into a sample client-server application. The remainder of this section is devoted to a remote time-of-day application (the 'daytime' Internet service) [I noticed that Ms. Castro used a 'daytime' example in her <span class="emphasis"><em>Porting applications to IPv6 HowTo</em></span>. For the record, the source code presented here is original, developed from scratch, and any similarity between it and any other publicly available 'daytime' example is purely coincidental.]. The source code presented in this section was developed and tested on a RedHat Linux release using the 2.6 kernel (2.6.9 to be specific). Readers may use the source code freely, so long as proper credit is attributed; but of course the standard disclaimer must be given first: </p><div class="blockquote"><blockquote class="blockquote"><p>Although the sample source code is believed to be free of errors, the author makes no guarantees as to its reliability, especially considering that some error paths were intentionally omitted for brevity. Use it at your own risk!</p></blockquote></div><p>When you get right down to it, there really aren't that many differences between IPv4 and IPv6 applications. The trick is to code IPv6 applications in a protocol-independent manner, such that they can handle both IPv4 and IPv6 simultaneously and transparently. This sample application does just that. The only protocol-dependent code in the example occurs when printing network addresses in verbose mode; but only after the ai_family field in the addrinfo structure has been checked, so the programs know exactly what type of address they're handling at the time.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58688864"></a>1.4.1. 'Daytime' Server Code</h4></div></div></div><p>The server code is found in file tod6d.c (time-of-day IPv6 daemon). Once built, the server may be started using the following command syntax (assuming tod6d is the executable file):</p><pre class="screen">
tod6d [-v] [service]
</pre><p>ARGUMENTS: </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">service</span></dt><dd><p>The service (or well-known port) on which to listen. Default is "daytime".</p></dd></dl></div><p>OPTIONS:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">-v</span></dt><dd><p>Turn on verbose mode.</p></dd></dl></div><p>The server handles both TCP and UDP requests on the network. The server source code contained in tod6d.c follows:</p><pre class="screen">
/******************************************************************************
* File: tod6d.c
* Description: Contains source code for an IPv6-capable 'daytime' server.
* Author: John Wenker, Sr. Software Engineer,
*         Performance Technologies, San Diego, USA
******************************************************************************/
/*
** System header files.
*/
#include &lt;errno.h&gt;        /* errno declaration &amp; error codes.            */
#include &lt;netdb.h&gt;        /* getaddrinfo(3) et al.                       */
#include &lt;netinet/in.h&gt;   /* sockaddr_in &amp; sockaddr_in6 definition.      */
#include &lt;stdio.h&gt;        /* printf(3) et al.                            */
#include &lt;stdlib.h&gt;       /* exit(2).                                    */
#include &lt;string.h&gt;       /* String manipulation &amp; memory functions.     */
#include &lt;sys/poll.h&gt;     /* poll(2) and related definitions.            */
#include &lt;sys/socket.h&gt;   /* Socket functions (socket(2), bind(2), etc). */
#include &lt;time.h&gt;         /* time(2) &amp; ctime(3).                         */
#include &lt;unistd.h&gt;       /* getopt(3), read(2), etc.                    */
/*
** Constants.
*/
#define DFLT_SERVICE "daytime"   /* Default service name.                    */
#define INVALID_DESC -1          /* Invalid file descriptor.                 */
#define MAXCONNQLEN  3           /* Max nbr of connection requests to queue. */
#define MAXTCPSCKTS  2           /* One TCP socket for IPv4 &amp; one for IPv6.  */
#define MAXUDPSCKTS  2           /* One UDP socket for IPv4 &amp; one for IPv6.  */
#define VALIDOPTS    "v"         /* Valid command options.                   */
/*
** Simple boolean type definition.
*/
typedef enum { false = 0, true } boolean;
/*
** Prototypes for internal helper functions.
*/
static int  openSckt( const char *service,
                      const char *protocol,
                      int         desc[ ],
                      size_t     *descSize );
static void tod( int    tSckt[ ],
                 size_t tScktSize,
                 int    uSckt[ ],
                 size_t uScktSize );
/*
** Global (within this file only) data objects.
*/
static char        hostBfr[ NI_MAXHOST ];   /* For use w/getnameinfo(3).    */
static const char *pgmName;                 /* Program name w/o dir prefix. */
static char        servBfr[ NI_MAXSERV ];   /* For use w/getnameinfo(3).    */
static boolean     verbose = false;         /* Verbose mode indication.     */
/*
** Usage macro for command syntax violations.
*/
#define USAGE                                       \
        {                                           \
           fprintf( stderr,                         \
                    "Usage: %s [-v] [service]\n",   \
                    pgmName );                      \
           exit( 127 );                             \
        }  /* End USAGE macro. */
/*
** Macro to terminate the program if a system call error occurs.  The system
** call must be one of the usual type that returns -1 on error.  This macro is
** a modified version of a macro authored by Dr. V. Vinge, SDSU Dept. of
** Computer Science (retired)... best professor I ever had.  I hear he writes
** great science fiction in addition to robust code, too.
*/
#define CHK(expr)                                                   \
        do                                                          \
        {                                                           \
           if ( (expr) == -1 )                                      \
           {                                                        \
              fprintf( stderr,                                      \
                       "%s (line %d): System call ERROR - %s.\n",   \
                       pgmName,                                     \
                       __LINE__,                                    \
                       strerror( errno ) );                         \
              exit( 1 );                                            \
           }   /* End IF system call failed. */                     \
        } while ( false )
/******************************************************************************
* Function: main
*
* Description:
*    Set up a time-of-day server and handle network requests.  This server
*    handles both TCP and UDP requests.
*
* Parameters:
*    The usual argc and argv parameters to a main() function.
*
* Return Value:
*    This is a daemon program and never returns.  However, in the degenerate
*    case where no sockets are created, the function returns zero.
******************************************************************************/
int main( int   argc,
          char *argv[ ] )
{
   int         opt;
   const char *service   = DFLT_SERVICE;
   int         tSckt[ MAXTCPSCKTS ];     /* Array of TCP socket descriptors. */
   size_t      tScktSize = MAXTCPSCKTS;  /* Size of uSckt (# of elements).   */
   int         uSckt[ MAXUDPSCKTS ];     /* Array of UDP socket descriptors. */
   size_t      uScktSize = MAXUDPSCKTS;  /* Size of uSckt (# of elements).   */
   /*
   ** Set the program name (w/o directory prefix).
   */
   pgmName = strrchr( argv[ 0 ], '/' );
   pgmName = pgmName == NULL  ?  argv[ 0 ]  :  pgmName + 1;
   /*
   ** Process command options.
   */
   opterr = 0;   /* Turns off "invalid option" error messages. */
   while ( ( opt = getopt( argc, argv, VALIDOPTS ) ) &gt;= 0 )
   {
      switch ( opt )
      {
         case 'v':   /* Verbose mode. */
         {
            verbose = true;
            break;
         }
         default:
         {
            USAGE;
         }
      }  /* End SWITCH on command option. */
   }  /* End WHILE processing options. */
   /*
   ** Process command line arguments.
   */
   switch ( argc - optind )
   {
      case 0:  break;
      case 1:  service = argv[ optind ]; break;
      default: USAGE;
   }  /* End SWITCH on number of command line arguments. */
   /*
   ** Open both a TCP and UDP socket, for both IPv4 &amp; IPv6, on which to receive
   ** service requests.
   */
   if ( ( openSckt( service, "tcp", tSckt, &amp;tScktSize ) &lt; 0 ) ||
        ( openSckt( service, "udp", uSckt, &amp;uScktSize ) &lt; 0 ) )
   {
      exit( 1 );
   }
   /*
   ** Run the time-of-day server.
   */
   if ( ( tScktSize &gt; 0 ) || ( uScktSize &gt; 0 ) )
   {
      tod( tSckt,         /* tod() never returns. */
           tScktSize,
           uSckt,
           uScktSize );
   }
   /*
   ** Since tod() never returns, execution only gets here if no sockets were
   ** created.
   */
   if ( verbose )
   {
      fprintf( stderr,
               "%s: No sockets opened... terminating.\n",
               pgmName );
   }
   return 0;
}  /* End main() */
/******************************************************************************
* Function: openSckt
*
* Description:
*    Open passive (server) sockets for the indicated inet service &amp; protocol.
*    Notice in the last sentence that "sockets" is plural.  During the interim
*    transition period while everyone is switching over to IPv6, the server
*    application has to open two sockets on which to listen for connections...
*    one for IPv4 traffic and one for IPv6 traffic.
*
* Parameters:
*    service  - Pointer to a character string representing the well-known port
*               on which to listen (can be a service name or a decimal number).
*    protocol - Pointer to a character string representing the transport layer
*               protocol (only "tcp" or "udp" are valid).
*    desc     - Pointer to an array into which the socket descriptors are
*               placed when opened.
*    descSize - This is a value-result parameter.  On input, it contains the
*               max number of descriptors that can be put into 'desc' (i.e. the
*               number of elements in the array).  Upon return, it will contain
*               the number of descriptors actually opened.  Any unused slots in
*               'desc' are set to INVALID_DESC.
*
* Return Value:
*    0 on success, -1 on error.
******************************************************************************/
static int openSckt( const char *service,
                     const char *protocol,
                     int         desc[ ],
                     size_t     *descSize )
{
   struct addrinfo *ai;
   int              aiErr;
   struct addrinfo *aiHead;
   struct addrinfo  hints    = { .ai_flags  = AI_PASSIVE,    /* Server mode. 
¬ */
                                 .ai_family = PF_UNSPEC };   /* IPv4 or IPv6.
¬ */
   size_t           maxDescs = *descSize;
   /*
   ** Initialize output parameters.  When the loop completes, *descSize is 0.
   */
   while ( *descSize &gt; 0 )
   {
      desc[ --( *descSize ) ] = INVALID_DESC;
   }
   /*
   ** Check which protocol is selected (only TCP and UDP are valid).
   */
   if ( strcmp( protocol, "tcp" ) == 0 )        /* TCP protocol.     */
   {
      hints.ai_socktype = SOCK_STREAM;
      hints.ai_protocol = IPPROTO_TCP;
   }
   else if ( strcmp( protocol, "udp" ) == 0 )   /* UDP protocol.     */
   {
      hints.ai_socktype = SOCK_DGRAM;
      hints.ai_protocol = IPPROTO_UDP;
   }
   else                                         /* Invalid protocol. */
   {
      fprintf( stderr,
               "%s (line %d): ERROR - Unknown transport "
               "layer protocol \"%s\".\n",
               pgmName,
               __LINE__,
               protocol );
      return -1;
   }
   /*
   ** Look up the service's well-known port number.  Notice that NULL is being
   ** passed for the 'node' parameter, and that the AI_PASSIVE flag is set in
   ** 'hints'.  Thus, the program is requesting passive address information.
   ** The network address is initialized to :: (all zeros) for IPv6 records, or
   ** 0.0.0.0 for IPv4 records.
   */
   if ( ( aiErr = getaddrinfo( NULL,
                               service,
                               &amp;hints,
                               &amp;aiHead ) ) != 0 )
   {
      fprintf( stderr,
               "%s (line %d): ERROR - %s.\n",
               pgmName,
               __LINE__,
               gai_strerror( aiErr ) );
      return -1;
   }
   /*
   ** For each of the address records returned, attempt to set up a passive
   ** socket.
   */
   for ( ai = aiHead;
         ( ai != NULL ) &amp;&amp; ( *descSize &lt; maxDescs );
         ai = ai-&gt;ai_next )
   {
      if ( verbose )
      {
         /*
         ** Display the current address info.   Start with the protocol-
         ** independent fields first.
         */
         fprintf( stderr,
                  "Setting up a passive socket based on the "
                  "following address info:\n"
                  "   ai_flags     = 0x%02X\n"
                  "   ai_family    = %d (PF_INET = %d, PF_INET6 = %d)\n"
                  "   ai_socktype  = %d (SOCK_STREAM = %d, SOCK_DGRAM = %d)\n"
                  "   ai_protocol  = %d (IPPROTO_TCP = %d, IPPROTO_UDP = %d)\n"
                  "   ai_addrlen   = %d (sockaddr_in = %d, "
                  "sockaddr_in6 = %d)\n",
                  ai-&gt;ai_flags,
                  ai-&gt;ai_family,
                  PF_INET,
                  PF_INET6,
                  ai-&gt;ai_socktype,
                  SOCK_STREAM,
                  SOCK_DGRAM,
                  ai-&gt;ai_protocol,
                  IPPROTO_TCP,
                  IPPROTO_UDP,
                  ai-&gt;ai_addrlen,
                  sizeof( struct sockaddr_in ),
                  sizeof( struct sockaddr_in6 ) );
         /*
         ** Now display the protocol-specific formatted socket address.  Note
         ** that the program is requesting that getnameinfo(3) convert the
         ** host &amp; service into numeric strings.
         */
         getnameinfo( ai-&gt;ai_addr,
                      ai-&gt;ai_addrlen,
                      hostBfr,
                      sizeof( hostBfr ),
                      servBfr,
                      sizeof( servBfr ),
                      NI_NUMERICHOST | NI_NUMERICSERV );
         switch ( ai-&gt;ai_family )
         {
            case PF_INET:   /* IPv4 address record. */
            {
               struct sockaddr_in *p = (struct sockaddr_in*) ai-&gt;ai_addr;
               fprintf( stderr,
                        "   ai_addr      = sin_family:   %d (AF_INET = %d, "
                        "AF_INET6 = %d)\n"
                        "                  sin_addr:     %s\n"
                        "                  sin_port:     %s\n",
                        p-&gt;sin_family,
                        AF_INET,
                        AF_INET6,
                        hostBfr,
                        servBfr );
               break;
            }  /* End CASE of IPv4. */
            case PF_INET6:   /* IPv6 address record. */
            {
               struct sockaddr_in6 *p = (struct sockaddr_in6*) ai-&gt;ai_addr;
               fprintf( stderr,
                        "   ai_addr      = sin6_family:   %d (AF_INET = %d, "
                        "AF_INET6 = %d)\n"
                        "                  sin6_addr:     %s\n"
                        "                  sin6_port:     %s\n"
                        "                  sin6_flowinfo: %d\n"
                        "                  sin6_scope_id: %d\n",
                        p-&gt;sin6_family,
                        AF_INET,
                        AF_INET6,
                        hostBfr,
                        servBfr,
                        p-&gt;sin6_flowinfo,
                        p-&gt;sin6_scope_id );
               break;
            }  /* End CASE of IPv6. */
            default:   /* Can never get here, but just for completeness. */
            {
               fprintf( stderr,
                        "%s (line %d): ERROR - Unknown protocol family (%d).\n",
                        pgmName,
                        __LINE__,
                        ai-&gt;ai_family );
               freeaddrinfo( aiHead );
               return -1;
            }  /* End DEFAULT case (unknown protocol family). */
         }  /* End SWITCH on protocol family. */
      }  /* End IF verbose mode. */
      /*
      ** Create a socket using the info in the addrinfo structure.
      */
      CHK( desc[ *descSize ] = socket( ai-&gt;ai_family,
                                       ai-&gt;ai_socktype,
                                       ai-&gt;ai_protocol ) );
      /*
      ** Here is the code that prevents "IPv4 mapped addresses", as discussed
      ** in Section 22.1.3.1.  If an IPv6 socket was just created, then set the
      ** IPV6_V6ONLY socket option.
      */
      if ( ai-&gt;ai_family == PF_INET6 )
      {
#if defined( IPV6_V6ONLY )
         /*
         ** Disable IPv4 mapped addresses.
         */
         int v6Only = 1;
         CHK( setsockopt( desc[ *descSize ],
                          IPPROTO_IPV6,
                          IPV6_V6ONLY,
                          &amp;v6Only,
                          sizeof( v6Only ) ) );
#else
         /*
         ** IPV6_V6ONLY is not defined, so the socket option can't be set and
         ** thus IPv4 mapped addresses can't be disabled.  Print a warning
         ** message and close the socket.  Design note: If the
         ** #if...#else...#endif construct were removed, then this program
         ** would not compile (because IPV6_V6ONLY isn't defined).  That's an
         ** acceptable approach; IPv4 mapped addresses are certainly disabled
         ** if the program can't build!  However, since this program is also
         ** designed to work for IPv4 sockets as well as IPv6, I decided to
         ** allow the program to compile when IPV6_V6ONLY is not defined, and
         ** turn it into a run-time warning rather than a compile-time error.
         ** IPv4 mapped addresses are still disabled because _all_ IPv6 traffic
         ** is disabled (all IPv6 sockets are closed here), but at least this
         ** way the server can still service IPv4 network traffic.
         */
         fprintf( stderr,
                  "%s (line %d): WARNING - Cannot set IPV6_V6ONLY socket "
                  "option.  Closing IPv6 %s socket.\n",
                  pgmName,
                  __LINE__,
                  ai-&gt;ai_protocol == IPPROTO_TCP  ?  "TCP"  :  "UDP" );
         CHK( close( desc[ *descSize ] ) );
         continue;   /* Go to top of FOR loop w/o updating *descSize! */
#endif /* IPV6_V6ONLY */
      }  /* End IF this is an IPv6 socket. */
      /*
      ** Bind the socket.  Again, the info from the addrinfo structure is used.
      */
      CHK( bind( desc[ *descSize ],
                 ai-&gt;ai_addr,
                 ai-&gt;ai_addrlen ) );
      /*
      ** If this is a TCP socket, put the socket into passive listening mode
      ** (listen is only valid on connection-oriented sockets).
      */
      if ( ai-&gt;ai_socktype == SOCK_STREAM )
      {
         CHK( listen( desc[ *descSize ],
                      MAXCONNQLEN ) );
      }
      /*
      ** Socket set up okay.  Bump index to next descriptor array element.
      */
      *descSize += 1;
   }  /* End FOR each address info structure returned. */
   /*
   ** Dummy check for unused address records.
   */
   if ( verbose &amp;&amp; ( ai != NULL ) )
   {
      fprintf( stderr,
               "%s (line %d): WARNING - Some address records were "
               "not processed due to insufficient array space.\n",
               pgmName,
               __LINE__ );
   }  /* End IF verbose and some address records remain unprocessed. */
   /*
   ** Clean up.
   */
   freeaddrinfo( aiHead );
   return 0;
}  /* End openSckt() */
/******************************************************************************
* Function: tod
*
* Description:
*    Listen on a set of sockets and send the current time-of-day to any
*    clients.  This function never returns.
*
* Parameters:
*    tSckt     - Array of TCP socket descriptors on which to listen.
*    tScktSize - Size of the tSckt array (nbr of elements).
*    uSckt     - Array of UDP socket descriptors on which to listen.
*    uScktSize - Size of the uSckt array (nbr of elements).
*
* Return Value: None.
******************************************************************************/
static void tod( int    tSckt[ ],
                 size_t tScktSize,
                 int    uSckt[ ],
                 size_t uScktSize )
{
   char                     bfr[ 256 ];
   ssize_t                  count;
   struct pollfd           *desc;
   size_t                   descSize = tScktSize + uScktSize;
   int                      idx;
   int                      newSckt;
   struct sockaddr         *sadr;
   socklen_t                sadrLen;
   struct sockaddr_storage  sockStor;
   int                      status;
   size_t                   timeLen;
   char                    *timeStr;
   time_t                   timeVal;
   ssize_t                  wBytes;
   /*
   ** Allocate memory for the poll(2) array.
   */
   desc = malloc( descSize * sizeof( struct pollfd ) );
   if ( desc == NULL )
   {
      fprintf( stderr,
               "%s (line %d): ERROR - %s.\n",
               pgmName,
               __LINE__,
               strerror( ENOMEM ) );
      exit( 1 );
   }
   /*
   ** Initialize the poll(2) array.
   */
   for ( idx = 0;     idx &lt; descSize;     idx++ )
   {
      desc[ idx ].fd      = idx &lt; tScktSize  ?  tSckt[ idx ]
                                             :  uSckt[ idx - tScktSize ];
      desc[ idx ].events  = POLLIN;
      desc[ idx ].revents = 0;
   }
   /*
   ** Main time-of-day server loop.  Handles both TCP &amp; UDP requests.  This is
   ** an interative server, and all requests are handled directly within the
   ** main loop.
   */
   while ( true )   /* Do forever. */
   {
      /*
      ** Wait for activity on one of the sockets.  The DO..WHILE construct is
      ** used to restart the system call in the event the process is
      ** interrupted by a signal.
      */
      do
      {
         status = poll( desc,
                        descSize,
                        -1 /* Wait indefinitely for input. */ );
      } while ( ( status &lt; 0 ) &amp;&amp; ( errno == EINTR ) );
      CHK( status );   /* Check for a bona fide system call error. */
      /*
      ** Get the current time.
      */
      timeVal = time( NULL );
      timeStr = ctime( &amp;timeVal );
      timeLen = strlen( timeStr );
      /*
      ** Indicate that there is new network activity.
      */
      if ( verbose )
      {
         char *s = malloc( timeLen+1 );
         strcpy( s, timeStr );
         s[ timeLen-1 ] = '\0';   /* Overwrite '\n' in date string. */
         fprintf( stderr,
                  "%s: New network activity on %s.\n",
                  pgmName,
                  s );
         free( s );
      }  /* End IF verbose. */
      /*
      ** Process sockets with input available.
      */
      for ( idx = 0;     idx &lt; descSize;     idx++ )
      {
         switch ( desc[ idx ].revents )
         {
            case 0:        /* No activity on this socket; try the next. */
               continue;
            case POLLIN:   /* Network activity.  Go process it.         */
               break;
            default:       /* Invalid poll events.                      */
            {
               fprintf( stderr,
                        "%s (line %d): ERROR - Invalid poll event (0x%02X).\n",
                        pgmName,
                        __LINE__,
                        desc[ idx ].revents );
               exit( 1 );
            }
         }  /* End SWITCH on returned poll events. */
         /*
         ** Determine if this is a TCP request or UDP request.
         */
         if ( idx &lt; tScktSize )
         {
            /*
            ** TCP connection requested.  Accept it.  Notice the use of
            ** the sockaddr_storage data type.
            */
            sadrLen = sizeof( sockStor );
            sadr    = (struct sockaddr*) &amp;sockStor;
            CHK( newSckt = accept( desc[ idx ].fd,
                                   sadr,
                                   &amp;sadrLen ) );
            CHK( shutdown( newSckt,       /* Server never recv's anything. */
                           SHUT_RD ) );
            if ( verbose )
            {
               /*
               ** Display the socket address of the remote client.  Begin with
               ** the address-independent fields.
               */
               fprintf( stderr,
                        "Sockaddr info for new TCP client:\n"
                        "   sa_family = %d (AF_INET = %d, AF_INET6 = %d)\n"
                        "   addr len  = %d (sockaddr_in = %d, "
                        "sockaddr_in6 = %d)\n",
                        sadr-&gt;sa_family,
                        AF_INET,
                        AF_INET6,
                        sadrLen,
                        sizeof( struct sockaddr_in ),
                        sizeof( struct sockaddr_in6 ) );
               /*
               ** Display the address-specific fields.
               */
               getnameinfo( sadr,
                            sadrLen,
                            hostBfr,
                            sizeof( hostBfr ),
                            servBfr,
                            sizeof( servBfr ),
                            NI_NUMERICHOST | NI_NUMERICSERV );
               /*
               ** Notice that we're switching on an address family now, not a
               ** protocol family.
               */
               switch ( sadr-&gt;sa_family )
               {
                  case AF_INET:   /* IPv4 address. */
                  {
                     struct sockaddr_in *p = (struct sockaddr_in*) sadr;
                     fprintf( stderr,
                              "   sin_addr  = sin_family: %d\n"
                              "               sin_addr:   %s\n"
                              "               sin_port:   %s\n",
                              p-&gt;sin_family,
                              hostBfr,
                              servBfr );
                     break;
                  }  /* End CASE of IPv4. */
                  case AF_INET6:   /* IPv6 address. */
                  {
                     struct sockaddr_in6 *p = (struct sockaddr_in6*) sadr;
                     fprintf( stderr,
                              "   sin6_addr = sin6_family:   %d\n"
                              "               sin6_addr:     %s\n"
                              "               sin6_port:     %s\n"
                              "               sin6_flowinfo: %d\n"
                              "               sin6_scope_id: %d\n",
                              p-&gt;sin6_family,
                              hostBfr,
                              servBfr,
                              p-&gt;sin6_flowinfo,
                              p-&gt;sin6_scope_id );
                     break;
                  }  /* End CASE of IPv6. */
                  default:   /* Can never get here, but for completeness. */
                  {
                     fprintf( stderr,
                              "%s (line %d): ERROR - Unknown address "
                              "family (%d).\n",
                              pgmName,
                              __LINE__,
                              sadr-&gt;sa_family );
                     break;
                  }  /* End DEFAULT case (unknown address family). */
               }  /* End SWITCH on address family. */
            }  /* End IF verbose mode. */
            /*
            ** Send the TOD to the client.
            */
            wBytes = timeLen;
            while ( wBytes &gt; 0 )
            {
               do
               {
                  count = write( newSckt,
                                 timeStr,
                                 wBytes );
               } while ( ( count &lt; 0 ) &amp;&amp; ( errno == EINTR ) );
               CHK( count );   /* Check for a bona fide error. */
               wBytes -= count;
            }  /* End WHILE there is data to send. */
            CHK( close( newSckt ) );
         }  /* End IF this was a TCP connection request. */
         else
         {
            /*
            ** This is a UDP socket, and a datagram is available.  The funny
            ** thing about UDP requests is that this server doesn't require any
            ** client input; but it can't send the TOD unless it knows a client
            ** wants the data, and the only way that can occur with UDP is if
            ** the server receives a datagram from the client.  Thus, the
            ** server must receive _something_, but the content of the datagram
            ** is irrelevant.  Read in the datagram.  Again note the use of
            ** sockaddr_storage to receive the address.
            */
            sadrLen = sizeof( sockStor );
            sadr    = (struct sockaddr*) &amp;sockStor;
            CHK( count = recvfrom( desc[ idx ].fd,
                                   bfr,
                                   sizeof( bfr ),
                                   0,
                                   sadr,
                                   &amp;sadrLen ) );
            /*
            ** Display whatever was received on stdout.
            */
            if ( verbose )
            {
               ssize_t rBytes = count;
               fprintf( stderr,
                        "%s: UDP datagram received (%d bytes).\n",
                        pgmName,
                        count );
               while ( count &gt; 0 )
               {
                  fputc( bfr[ rBytes - count-- ],
                         stdout );
               }
               if ( bfr[ rBytes-1 ] != '\n' )
                  fputc( '\n', stdout );   /* Newline also flushes stdout. */
               /*
               ** Display the socket address of the remote client.  Address-
               ** independent fields first.
               */
               fprintf( stderr,
                        "Remote client's sockaddr info:\n"
                        "   sa_family = %d (AF_INET = %d, AF_INET6 = %d)\n"
                        "   addr len  = %d (sockaddr_in = %d, "
                        "sockaddr_in6 = %d)\n",
                        sadr-&gt;sa_family,
                        AF_INET,
                        AF_INET6,
                        sadrLen,
                        sizeof( struct sockaddr_in ),
                        sizeof( struct sockaddr_in6 ) );
               /*
               ** Display the address-specific information.
               */
               getnameinfo( sadr,
                            sadrLen,
                            hostBfr,
                            sizeof( hostBfr ),
                            servBfr,
                            sizeof( servBfr ),
                            NI_NUMERICHOST | NI_NUMERICSERV );
               switch ( sadr-&gt;sa_family )
               {
                  case AF_INET:   /* IPv4 address. */
                  {
                     struct sockaddr_in *p = (struct sockaddr_in*) sadr;
                     fprintf( stderr,
                              "   sin_addr  = sin_family: %d\n"
                              "               sin_addr:   %s\n"
                              "               sin_port:   %s\n",
                              p-&gt;sin_family,
                              hostBfr,
                              servBfr );
                     break;
                  }  /* End CASE of IPv4 address. */
                  case AF_INET6:   /* IPv6 address. */
                  {
                     struct sockaddr_in6 *p = (struct sockaddr_in6*) sadr;
                     fprintf( stderr,
                              "   sin6_addr = sin6_family:   %d\n"
                              "               sin6_addr:     %s\n"
                              "               sin6_port:     %s\n"
                              "               sin6_flowinfo: %d\n"
                              "               sin6_scope_id: %d\n",
                              p-&gt;sin6_family,
                              hostBfr,
                              servBfr,
                              p-&gt;sin6_flowinfo,
                              p-&gt;sin6_scope_id );
                     break;
                  }  /* End CASE of IPv6 address. */
                  default:   /* Can never get here, but for completeness. */
                  {
                     fprintf( stderr,
                              "%s (line %d): ERROR - Unknown address "
                              "family (%d).\n",
                              pgmName,
                              __LINE__,
                              sadr-&gt;sa_family );
                     break;
                  }  /* End DEFAULT case (unknown address family). */
               }  /* End SWITCH on address family. */
            }  /* End IF verbose mode. */
            /*
            ** Send the time-of-day to the client.
            */
            wBytes = timeLen;
            while ( wBytes &gt; 0 )
            {
               do
               {
                  count = sendto( desc[ idx ].fd,
                                  timeStr,
                                  wBytes,
                                  0,
                                  sadr,        /* Address &amp; address length   */
                                  sadrLen );   /*    received in recvfrom(). */
               } while ( ( count &lt; 0 ) &amp;&amp; ( errno == EINTR ) );
               CHK( count );   /* Check for a bona fide error. */
               wBytes -= count;
            }  /* End WHILE there is data to send. */
         }  /* End ELSE a UDP datagram is available. */
         desc[ idx ].revents = 0;   /* Clear the returned poll events. */
      }  /* End FOR each socket descriptor. */
   }  /* End WHILE forever. */
}  /* End tod() */
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57677728"></a>1.4.2. 'Daytime' TCP Client Code</h4></div></div></div><p>The TCP client code is found in file tod6tc.c (time-of-day IPv6 TCP client). Once built, the TCP client may be started using the following command syntax (assuming tod6tc is the executable file):</p><pre class="screen">
tod6tc [-v] [-s scope_id] [host [service]]
</pre><p>ARGUMENTS:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">host</span></dt><dd><p>The hostname or IP address (dotted decimal or colon-hex) of the remote host providing the service. Default is "localhost".</p></dd><dt><span class="term">service</span></dt><dd><p>The TCP service (or well-known port number) to which a connection attempt is made. Default is "daytime".</p></dd></dl></div><p>OPTIONS:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">-s</span></dt><dd><p>This option is only meaningful for IPv6 addresses, and is used to set the scope identifier (i.e. the network interface on which to establish the connection). Default is "eth0". If host is a scoped address, this option is ignored.</p></dd><dt><span class="term">-v</span></dt><dd><p>Turn on verbose mode.</p></dd></dl></div><p>The TCP client source code contained in tod6tc.c follows:</p><pre class="screen">
/******************************************************************************
* File: tod6tc.c
* Description: Contains source code for an IPv6-capable 'daytime' TCP client.
* Author: John Wenker, Sr. Software Engineer
*         Performance Technologies, San Diego, USA
******************************************************************************/
/*
** System header files.
*/
#include &lt;errno.h&gt;        /* errno declaration and error codes.             */
#include &lt;net/if.h&gt;       /* if_nametoindex(3).                             */
#include &lt;netdb.h&gt;        /* getaddrinfo(3) and associated definitions.     */
#include &lt;netinet/in.h&gt;   /* sockaddr_in and sockaddr_in6 definitions.      */
#include &lt;stdio.h&gt;        /* printf(3) et al.                               */
#include &lt;stdlib.h&gt;       /* exit(2).                                       */
#include &lt;string.h&gt;       /* String manipulation and memory functions.      */
#include &lt;sys/socket.h&gt;   /* Socket functions (socket(2), connect(2), etc). */
#include &lt;unistd.h&gt;       /* getopt(3), read(2), etc.                       */
/*
** Constants &amp; macros.
*/
#define DFLT_HOST      "localhost"   /* Default server name.              */
#define DFLT_SCOPE_ID  "eth0"        /* Default scope identifier.         */
#define DFLT_SERVICE   "daytime"     /* Default service name.             */
#define INVALID_DESC   -1            /* Invalid file (socket) descriptor. */
#define MAXBFRSIZE     256           /* Max bfr sz to read remote TOD.    */
#define VALIDOPTS      "s:v"         /* Valid command options.            */
/*
** Type definitions (for convenience).
*/
typedef enum { false = 0, true } boolean;
typedef struct sockaddr_in       sockaddr_in_t;
typedef struct sockaddr_in6      sockaddr_in6_t;
/*
** Prototypes for internal helper functions.
*/
static int  openSckt( const char   *host,
                      const char   *service,
                      unsigned int  scopeId );
static void tod( int sckt );
/*
** Global (within this file only) data objects.
*/
static const char *pgmName;           /* Program name (w/o directory). */
static boolean     verbose = false;   /* Verbose mode.                 */
/*
** Usage macro.
*/
#define USAGE                                                            \
        {                                                                \
           fprintf( stderr,                                              \
                    "Usage: %s [-v] [-s scope_id] [host [service]]\n",   \
                    pgmName );                                           \
           exit( 127 );                                                  \
        }  /* End USAGE macro. */
/*
** This "macro" (even though it's really a function) is loosely based on the
** CHK() macro by Dr. V. Vinge (see server code).  The status parameter is
** a boolean expression indicating the return code from one of the usual system
** calls that returns -1 on error.  If a system call error occurred, an alert
** is written to stderr.  It returns a boolean value indicating success/failure
** of the system call.
**
** Example: if ( !SYSCALL( "write",
**                         count = write( fd, bfr, size ) ) )
**          {
**             // Error processing... but SYSCALL() will have already taken
**             // care of dumping an error alert to stderr.
**          }
*/
static __inline boolean SYSCALL( const char *syscallName,
                                 int         lineNbr,
                                 int         status )
{
   if ( ( status == -1 ) &amp;&amp; verbose )
   {
      fprintf( stderr,
               "%s (line %d): System call failed ('%s') - %s.\n",
               pgmName,
               lineNbr,
               syscallName,
               strerror( errno ) );
   }
   return status != -1;   /* True if the system call was successful. */
}  /* End SYSCALL() */
/******************************************************************************
* Function: main
*
* Description:
*    Connect to a remote time-of-day service and write the remote host's TOD to
*    stdout.
*
* Parameters:
*    The usual argc &amp; argv parameters to a main() program.
*
* Return Value:
*    This function always returns zero.
******************************************************************************/
int main( int   argc,
          char *argv[ ] )
{
   const char   *host     = DFLT_HOST;
   int           opt;
   int           sckt;
   unsigned int  scopeId  = if_nametoindex( DFLT_SCOPE_ID );
   const char   *service  = DFLT_SERVICE;
   /*
   ** Determine the program name (w/o directory prefix).
   */
   pgmName = (const char*) strrchr( argv[ 0 ], '/' );
   pgmName = pgmName == NULL  ?  argv[ 0 ]  :  pgmName+1;
   /*
   ** Process command line options.
   */
   opterr = 0;   /* Turns off "invalid option" error messages. */
   while ( ( opt = getopt( argc, argv, VALIDOPTS ) ) != -1 )
   {
      switch ( opt )
      {
         case 's':   /* Scope identifier (IPv6 kluge). */
         {
            scopeId = if_nametoindex( optarg );
            if ( scopeId == 0 )
            {
               fprintf( stderr,
                        "%s: Unknown network interface (%s).\n",
                        pgmName,
                        optarg );
               USAGE;
            }
            break;
         }
         case 'v':   /* Verbose mode. */
         {
            verbose = true;
            break;
         }
         default:
         {
            USAGE;
         }
      }  /* End SWITCH on command option. */
   } /* End WHILE processing command options. */
   /*
   ** Process command arguments.  At the end of the above loop, optind is the
   ** index of the first NON-option argv element.
   */
   switch ( argc - optind )
   {
      case 2:   /* Both host &amp; service are specified on the command line. */
      {
          service = argv[ optind + 1 ];
          /***** Fall through *****/
      }
      case 1:   /* Host is specified on the command line. */
      {
          host = argv[ optind ];
          /***** Fall through *****/
      }
      case 0:   /* Use default host &amp; service. */
      {
          break;
      }
      default:
      {
         USAGE;
      }
   }  /* End SWITCH on number of command arguments. */
   /*
   ** Open a connection to the indicated host/service.
   **
   ** Note that if all three of the following conditions are met, then the
   ** scope identifier remains unresolved at this point.
   **    1) The default network interface is unknown for some reason.
   **    2) The -s option was not used on the command line.
   **    3) An IPv6 "scoped address" was not specified for the hostname on the
   **       command line.
   ** If the above three conditions are met, then only an IPv4 socket can be
   ** opened (connect(2) fails without the scope ID properly set for IPv6
   ** sockets).
   */
   if ( ( sckt = openSckt( host,
                           service,
                           scopeId ) ) == INVALID_DESC )
   {
      fprintf( stderr,
               "%s: Sorry... a connection could not be established.\n",
               pgmName );
      exit( 1 );
   }
   /*
   ** Get the remote time-of-day.
   */
   tod( sckt );
   /*
   ** Close the connection and terminate.
   */
   (void) SYSCALL( "close",
                   __LINE__,
                   close( sckt ) );
   return 0;
}  /* End main() */
/******************************************************************************
* Function: openSckt
*
* Description:
*    Sets up a TCP connection to a remote server.  Getaddrinfo(3) is used to
*    perform lookup functions and can return multiple address records (i.e. a
*    list of 'struct addrinfo' records).  This function traverses the list and
*    tries to establish a connection to the remote server.  The function ends
*    when either a connection has been established or all records in the list
*    have been processed.
*
* Parameters:
*    host    - A pointer to a character string representing the hostname or IP
*              address (IPv4 or IPv6) of the remote server.
*    service - A pointer to a character string representing the service name or
*              well-known port number.
*    scopeId - For IPv6 sockets only.  This is the index corresponding to the
*              network interface on which to set up the connection.  This
*              parameter is ignored for IPv4 sockets or when an IPv6 "scoped
*              address" is specified in 'host' (i.e. where the colon-hex
*              network address is augmented with the scope ID).
*
* Return Value:
*    Returns the socket descriptor for the connection, or INVALID_DESC if all
*    address records have been processed and a connection could not be
*    established.
******************************************************************************/
static int openSckt( const char   *host,
                     const char   *service,
                     unsigned int  scopeId )
{
   struct addrinfo *ai;
   int              aiErr;
   struct addrinfo *aiHead;
   struct addrinfo  hints;
   sockaddr_in6_t  *pSadrIn6;
   int              sckt;
   /*
   ** Initialize the 'hints' structure for getaddrinfo(3).
   **
   ** Notice that the 'ai_family' field is set to PF_UNSPEC, indicating to
   ** return both IPv4 and IPv6 address records for the host/service.  Most of
   ** the time, the user isn't going to care whether an IPv4 connection or an
   ** IPv6 connection is established; the user simply wants to exchange data
   ** with the remote host and doesn't care how it's done.  Sometimes, however,
   ** the user might want to explicitly specify the type of underlying socket.
   ** It is left as an exercise for the motivated reader to add a command line
   ** option allowing the user to specify the IP protocol, and then process the
   ** list of addresses accordingly (it's not that difficult).
   */
   memset( &amp;hints, 0, sizeof( hints ) );
   hints.ai_family   = PF_UNSPEC;     /* IPv4 or IPv6 records (don't care). */
   hints.ai_socktype = SOCK_STREAM;   /* Connection-oriented byte stream.   */
   hints.ai_protocol = IPPROTO_TCP;   /* TCP transport layer protocol only. */
   /*
   ** Look up the host/service information.
   */
   if ( ( aiErr = getaddrinfo( host,
                               service,
                               &amp;hints,
                               &amp;aiHead ) ) != 0 )
   {
      fprintf( stderr,
               "%s (line %d): ERROR - %s.\n",
               pgmName,
               __LINE__,
               gai_strerror( aiErr ) );
      return INVALID_DESC;
   }
   /*
   ** Go through the list and try to open a connection.  Continue until either
   ** a connection is established or the entire list is exhausted.
   */
   for ( ai = aiHead,   sckt = INVALID_DESC;
         ( ai != NULL ) &amp;&amp; ( sckt == INVALID_DESC );
         ai = ai-&gt;ai_next )
   {
      /*
      ** IPv6 kluge.  Make sure the scope ID is set.
      */
      if ( ai-&gt;ai_family == PF_INET6 )
      {
         pSadrIn6 = (sockaddr_in6_t*) ai-&gt;ai_addr;
         if ( pSadrIn6-&gt;sin6_scope_id == 0 )
         {
            pSadrIn6-&gt;sin6_scope_id = scopeId;
         }  /* End IF the scope ID wasn't set. */
      }  /* End IPv6 kluge. */
      /*
      ** Display the address info for the remote host.
      */
      if ( verbose )
      {
         /*
         ** Temporary character string buffers for host &amp; service.
         */
         char hostBfr[ NI_MAXHOST ];
         char servBfr[ NI_MAXSERV ];
         /*
         ** Display the address information just fetched.  Start with the
         ** common (protocol-independent) stuff first.
         */
         fprintf( stderr,
                  "Address info:\n"
                  "   ai_flags     = 0x%02X\n"
                  "   ai_family    = %d (PF_INET = %d, PF_INET6 = %d)\n"
                  "   ai_socktype  = %d (SOCK_STREAM = %d, SOCK_DGRAM = %d)\n"
                  "   ai_protocol  = %d (IPPROTO_TCP = %d, IPPROTO_UDP = %d)\n"
                  "   ai_addrlen   = %d (sockaddr_in = %d, "
                  "sockaddr_in6 = %d)\n",
                  ai-&gt;ai_flags,
                  ai-&gt;ai_family,
                  PF_INET,
                  PF_INET6,
                  ai-&gt;ai_socktype,
                  SOCK_STREAM,
                  SOCK_DGRAM,
                  ai-&gt;ai_protocol,
                  IPPROTO_TCP,
                  IPPROTO_UDP,
                  ai-&gt;ai_addrlen,
                  sizeof( struct sockaddr_in ),
                  sizeof( struct sockaddr_in6 ) );
         /*
         ** Display the protocol-specific formatted address.
         */
         getnameinfo( ai-&gt;ai_addr,
                      ai-&gt;ai_addrlen,
                      hostBfr,
                      sizeof( hostBfr ),
                      servBfr,
                      sizeof( servBfr ),
                      NI_NUMERICHOST | NI_NUMERICSERV );
         switch ( ai-&gt;ai_family )
         {
            case PF_INET:   /* IPv4 address record. */
            {
               sockaddr_in_t *pSadrIn = (sockaddr_in_t*) ai-&gt;ai_addr;
               fprintf( stderr,
                        "   ai_addr      = sin_family: %d (AF_INET = %d, "
                        "AF_INET6 = %d)\n"
                        "                  sin_addr:   %s\n"
                        "                  sin_port:   %s\n",
                        pSadrIn-&gt;sin_family,
                        AF_INET,
                        AF_INET6,
                        hostBfr,
                        servBfr );
               break;
            }  /* End CASE of IPv4 record. */
            case PF_INET6:   /* IPv6 address record. */
            {
               pSadrIn6 = (sockaddr_in6_t*) ai-&gt;ai_addr;
               fprintf( stderr,
                        "   ai_addr      = sin6_family:   %d (AF_INET = %d, "
                        "AF_INET6 = %d)\n"
                        "                  sin6_addr:     %s\n"
                        "                  sin6_port:     %s\n"
                        "                  sin6_flowinfo: %d\n"
                        "                  sin6_scope_id: %d\n",
                        pSadrIn6-&gt;sin6_family,
                        AF_INET,
                        AF_INET6,
                        hostBfr,
                        servBfr,
                        pSadrIn6-&gt;sin6_flowinfo,
                        pSadrIn6-&gt;sin6_scope_id );
               break;
            }  /* End CASE of IPv6 record. */
            default:   /* Can never get here, but just for completeness. */
            {
               fprintf( stderr,
                        "%s (line %d): ERROR - Unknown protocol family (%d).\n",
                        pgmName,
                        __LINE__,
                        ai-&gt;ai_family );
               break;
            }  /* End DEFAULT case (unknown protocol family). */
         }  /* End SWITCH on protocol family. */
      }  /* End IF verbose mode. */
      /*
      ** Create a socket.
      */
      if ( !SYSCALL( "socket",
                     __LINE__,
                     sckt = socket( ai-&gt;ai_family,
                                    ai-&gt;ai_socktype,
                                    ai-&gt;ai_protocol ) ) )
      {
         sckt = INVALID_DESC;
         continue;   /* Try the next address record in the list. */
      }
      /*
      ** Connect to the remote host.
      */
      if ( !SYSCALL( "connect",
                     __LINE__,
                     connect( sckt,
                              ai-&gt;ai_addr,
                              ai-&gt;ai_addrlen ) ) )
      {
         (void) close( sckt );   /* Could use SYSCALL() again here, but why? */
         sckt = INVALID_DESC;
         continue;   /* Try the next address record in the list. */
      }
   }  /* End FOR each address record returned by getaddrinfo(3). */
   /*
   ** Clean up &amp; return.
   */
   freeaddrinfo( aiHead );
   return sckt;
}  /* End openSckt() */
/******************************************************************************
* Function: tod
*
* Description:
*    Receive the time-of-day from the remote server and write it to stdout.
*
* Parameters:
*    sckt - The socket descriptor for the connection.
*
* Return Value: None.
******************************************************************************/
static void tod( int sckt )
{
   char bfr[ MAXBFRSIZE+1 ];
   int  inBytes;
   /*
   ** The client never sends anything, so shut down the write side of the
   ** connection.
   */
   if ( !SYSCALL( "shutdown",
                  __LINE__,
                  shutdown( sckt, SHUT_WR ) ) )
   {
      return;
   }
   /*
   ** Read the time-of-day from the remote host.
   */
   do
   {
      if ( !SYSCALL( "read",
                     __LINE__,
                     inBytes = read( sckt,
                                     bfr,
                                     MAXBFRSIZE ) ) )
      {
         return;
      }
      bfr[ inBytes ] = '\0';   /* Null-terminate the received string. */
      fputs( bfr, stdout );    /* Null string if EOF (inBytes == 0).  */
   } while ( inBytes &gt; 0 );
   fflush( stdout );
}  /* End tod() */
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp57685152"></a>1.4.3. 'Daytime' UDP Client Code</h4></div></div></div><p>The UDP client code is found in file tod6uc.c (time-of-day IPv6 UDP client). It is almost an exact duplicate of the TCP client (and in fact was derived from it), but is included in this HowTo for completeness. Once built, the UDP client may be started using the following command syntax (assuming tod6uc is the executable file):</p><pre class="screen">
tod6uc [-v] [-s scope_id] [host [service]]
</pre><p>ARGUMENTS:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">host</span></dt><dd><p>The hostname or IP address (dotted decimal or colon-hex) of the remote host providing the service. Default is "localhost".</p></dd><dt><span class="term">service</span></dt><dd><p>The UDP service (or well-known port number) to which datagrams are sent. Default is "daytime".</p></dd></dl></div><p>OPTIONS:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">-s</span></dt><dd><p>This option is only meaningful for IPv6 addresses, and is used to set the scope identifier (i.e. the network interface on which to exchange datagrams). Default is "eth0". If host is a scoped address, this option is ignored.</p></dd><dt><span class="term">-v</span></dt><dd><p>Turn on verbose mode.</p></dd></dl></div><p>The UDP client source code contained in tod6uc.c follows:</p><pre class="screen">
/******************************************************************************
* File: tod6uc.c
* Description: Contains source code for an IPv6-capable 'daytime' UDP client.
* Author: John Wenker, Sr. Software Engineer
*         Performance Technologies, San Diego, USA
******************************************************************************/
/*
** System header files.
*/
#include &lt;errno.h&gt;        /* errno declaration and error codes.             */
#include &lt;net/if.h&gt;       /* if_nametoindex(3).                             */
#include &lt;netdb.h&gt;        /* getaddrinfo(3) and associated definitions.     */
#include &lt;netinet/in.h&gt;   /* sockaddr_in and sockaddr_in6 definitions.      */
#include &lt;stdio.h&gt;        /* printf(3) et al.                               */
#include &lt;stdlib.h&gt;       /* exit(2).                                       */
#include &lt;string.h&gt;       /* String manipulation and memory functions.      */
#include &lt;sys/socket.h&gt;   /* Socket functions (socket(2), connect(2), etc). */
#include &lt;unistd.h&gt;       /* getopt(3), recvfrom(2), sendto(2), etc.        */
/*
** Constants &amp; macros.
*/
#define DFLT_HOST      "localhost"   /* Default server name.              */
#define DFLT_SCOPE_ID  "eth0"        /* Default scope identifier.         */
#define DFLT_SERVICE   "daytime"     /* Default service name.             */
#define INVALID_DESC   -1            /* Invalid file (socket) descriptor. */
#define MAXBFRSIZE     256           /* Max bfr sz to read remote TOD.    */
#define VALIDOPTS      "s:v"         /* Valid command options.            */
/*
** Type definitions (for convenience).
*/
typedef enum { false = 0, true } boolean;
typedef struct sockaddr_in       sockaddr_in_t;
typedef struct sockaddr_in6      sockaddr_in6_t;
/*
** Prototypes for internal helper functions.
*/
static int  openSckt( const char   *host,
                      const char   *service,
                      unsigned int  scopeId );
static void tod( int sckt );
/*
** Global (within this file only) data objects.
*/
static const char *pgmName;           /* Program name (w/o directory). */
static boolean     verbose = false;   /* Verbose mode.                 */
/*
** Usage macro.
*/
#define USAGE                                                            \
        {                                                                \
           fprintf( stderr,                                              \
                    "Usage: %s [-v] [-s scope_id] [host [service]]\n",   \
                    pgmName );                                           \
           exit( 127 );                                                  \
        }  /* End USAGE macro. */
/*
** This "macro" (even though it's really a function) is loosely based on the
** CHK() macro by Dr. V. Vinge (see server code).  The status parameter is
** a boolean expression indicating the return code from one of the usual system
** calls that returns -1 on error.  If a system call error occurred, an alert
** is written to stderr.  It returns a boolean value indicating success/failure
** of the system call.
**
** Example: if ( !SYSCALL( "write",
**                         count = write( fd, bfr, size ) ) )
**          {
**             // Error processing... but SYSCALL() will have already taken
**             // care of dumping an error alert to stderr.
**          }
*/
static __inline boolean SYSCALL( const char *syscallName,
                                 int         lineNbr,
                                 int         status )
{
   if ( ( status == -1 ) &amp;&amp; verbose )
   {
      fprintf( stderr,
               "%s (line %d): System call failed ('%s') - %s.\n",
               pgmName,
               lineNbr,
               syscallName,
               strerror( errno ) );
   }
   return status != -1;   /* True if the system call was successful. */
}  /* End SYSCALL() */
/******************************************************************************
* Function: main
*
* Description:
*    Connect to a remote time-of-day service and write the remote host's TOD to
*    stdout.
*
* Parameters:
*    The usual argc &amp; argv parameters to a main() program.
*
* Return Value:
*    This function always returns zero.
******************************************************************************/
int main( int   argc,
          char *argv[ ] )
{
   const char   *host     = DFLT_HOST;
   int           opt;
   int           sckt;
   unsigned int  scopeId  = if_nametoindex( DFLT_SCOPE_ID );
   const char   *service  = DFLT_SERVICE;
   /*
   ** Determine the program name (w/o directory prefix).
   */
   pgmName = (const char*) strrchr( argv[ 0 ], '/' );
   pgmName = pgmName == NULL  ?  argv[ 0 ]  :  pgmName+1;
   /*
   ** Process command line options.
   */
   opterr = 0;   /* Turns off "invalid option" error messages. */
   while ( ( opt = getopt( argc, argv, VALIDOPTS ) ) != -1 )
   {
      switch ( opt )
      {
         case 's':   /* Scope identifier (IPv6 kluge). */
         {
            scopeId = if_nametoindex( optarg );
            if ( scopeId == 0 )
            {
               fprintf( stderr,
                        "%s: Unknown network interface (%s).\n",
                        pgmName,
                        optarg );
               USAGE;
            }
            break;
         }
         case 'v':   /* Verbose mode. */
         {
            verbose = true;
            break;
         }
         default:
         {
            USAGE;
         }
      }  /* End SWITCH on command option. */
   } /* End WHILE processing command options. */
   /*
   ** Process command arguments.  At the end of the above loop, optind is the
   ** index of the first NON-option argv element.
   */
   switch ( argc - optind )
   {
      case 2:   /* Both host &amp; service are specified on the command line. */
      {
          service = argv[ optind + 1 ];
          /***** Fall through *****/
      }
      case 1:   /* Host is specified on the command line. */
      {
          host = argv[ optind ];
          /***** Fall through *****/
      }
      case 0:   /* Use default host &amp; service. */
      {
          break;
      }
      default:
      {
         USAGE;
      }
   }  /* End SWITCH on number of command arguments. */
   /*
   ** Open a connection to the indicated host/service.
   **
   ** Note that if all three of the following conditions are met, then the
   ** scope identifier remains unresolved at this point.
   **    1) The default network interface is unknown for some reason.
   **    2) The -s option was not used on the command line.
   **    3) An IPv6 "scoped address" was not specified for the hostname on the
   **       command line.
   ** If the above three conditions are met, then only an IPv4 socket can be
   ** opened (connect(2) fails without the scope ID properly set for IPv6
   ** sockets).
   */
   if ( ( sckt = openSckt( host,
                           service,
                           scopeId ) ) == INVALID_DESC )
   {
      fprintf( stderr,
               "%s: Sorry... a connectionless socket could "
               "not be set up.\n",
               pgmName );
      exit( 1 );
   }
   /*
   ** Get the remote time-of-day.
   */
   tod( sckt );
   /*
   ** Close the connection and terminate.
   */
   (void) SYSCALL( "close",
                   __LINE__,
                   close( sckt ) );
   return 0;
}  /* End main() */
/******************************************************************************
* Function: openSckt
*
* Description:
*    Sets up a UDP socket to a remote server.  Getaddrinfo(3) is used to
*    perform lookup functions and can return multiple address records (i.e. a
*    list of 'struct addrinfo' records).  This function traverses the list and
*    tries to establish a connection to the remote server.  The function ends
*    when either a connection has been established or all records in the list
*    have been processed.
*
* Parameters:
*    host    - A pointer to a character string representing the hostname or IP
*              address (IPv4 or IPv6) of the remote server.
*    service - A pointer to a character string representing the service name or
*              well-known port number.
*    scopeId - For IPv6 sockets only.  This is the index corresponding to the
*              network interface on which to exchange datagrams.  This
*              parameter is ignored for IPv4 sockets or when an IPv6 "scoped
*              address" is specified in 'host' (i.e. where the colon-hex
*              network address is augmented with the scope ID).
*
* Return Value:
*    Returns the socket descriptor for the connection, or INVALID_DESC if all
*    address records have been processed and a socket could not be initialized.
******************************************************************************/
static int openSckt( const char   *host,
                     const char   *service,
                     unsigned int  scopeId )
{
   struct addrinfo *ai;
   int              aiErr;
   struct addrinfo *aiHead;
   struct addrinfo  hints;
   sockaddr_in6_t  *pSadrIn6;
   int              sckt;
   /*
   ** Initialize the 'hints' structure for getaddrinfo(3).
   **
   ** Notice that the 'ai_family' field is set to PF_UNSPEC, indicating to
   ** return both IPv4 and IPv6 address records for the host/service.  Most of
   ** the time, the user isn't going to care whether an IPv4 connection or an
   ** IPv6 connection is established; the user simply wants to exchange data
   ** with the remote host and doesn't care how it's done.  Sometimes, however,
   ** the user might want to explicitly specify the type of underlying socket.
   ** It is left as an exercise for the motivated reader to add a command line
   ** option allowing the user to specify the IP protocol, and then process the
   ** list of addresses accordingly (it's not that difficult).
   */
   memset( &amp;hints, 0, sizeof( hints ) );
   hints.ai_family   = PF_UNSPEC;     /* IPv4 or IPv6 records (don't care). */
   hints.ai_socktype = SOCK_DGRAM;    /* Connectionless communication.      */
   hints.ai_protocol = IPPROTO_UDP;   /* UDP transport layer protocol only. */
   /*
   ** Look up the host/service information.
   */
   if ( ( aiErr = getaddrinfo( host,
                               service,
                               &amp;hints,
                               &amp;aiHead ) ) != 0 )
   {
      fprintf( stderr,
               "%s (line %d): ERROR - %s.\n",
               pgmName,
               __LINE__,
               gai_strerror( aiErr ) );
      return INVALID_DESC;
   }
   /*
   ** Go through the list and try to open a connection.  Continue until either
   ** a connection is established or the entire list is exhausted.
   */
   for ( ai = aiHead,   sckt = INVALID_DESC;
         ( ai != NULL ) &amp;&amp; ( sckt == INVALID_DESC );
         ai = ai-&gt;ai_next )
   {
      /*
      ** IPv6 kluge.  Make sure the scope ID is set.
      */
      if ( ai-&gt;ai_family == PF_INET6 )
      {
         pSadrIn6 = (sockaddr_in6_t*) ai-&gt;ai_addr;
         if ( pSadrIn6-&gt;sin6_scope_id == 0 )
         {
            pSadrIn6-&gt;sin6_scope_id = scopeId;
         }  /* End IF the scope ID wasn't set. */
      }  /* End IPv6 kluge. */
      /*
      ** Display the address info for the remote host.
      */
      if ( verbose )
      {
         /*
         ** Temporary character string buffers for host &amp; service.
         */
         char hostBfr[ NI_MAXHOST ];
         char servBfr[ NI_MAXSERV ];
         /*
         ** Display the address information just fetched.  Start with the
         ** common (protocol-independent) stuff first.
         */
         fprintf( stderr,
                  "Address info:\n"
                  "   ai_flags     = 0x%02X\n"
                  "   ai_family    = %d (PF_INET = %d, PF_INET6 = %d)\n"
                  "   ai_socktype  = %d (SOCK_STREAM = %d, SOCK_DGRAM = %d)\n"
                  "   ai_protocol  = %d (IPPROTO_TCP = %d, IPPROTO_UDP = %d)\n"
                  "   ai_addrlen   = %d (sockaddr_in = %d, "
                  "sockaddr_in6 = %d)\n",
                  ai-&gt;ai_flags,
                  ai-&gt;ai_family,
                  PF_INET,
                  PF_INET6,
                  ai-&gt;ai_socktype,
                  SOCK_STREAM,
                  SOCK_DGRAM,
                  ai-&gt;ai_protocol,
                  IPPROTO_TCP,
                  IPPROTO_UDP,
                  ai-&gt;ai_addrlen,
                  sizeof( struct sockaddr_in ),
                  sizeof( struct sockaddr_in6 ) );
         /*
         ** Display the protocol-specific formatted address.
         */
         getnameinfo( ai-&gt;ai_addr,
                      ai-&gt;ai_addrlen,
                      hostBfr,
                      sizeof( hostBfr ),
                      servBfr,
                      sizeof( servBfr ),
                      NI_NUMERICHOST | NI_NUMERICSERV );
         switch ( ai-&gt;ai_family )
         {
            case PF_INET:   /* IPv4 address record. */
            {
               sockaddr_in_t *pSadrIn = (sockaddr_in_t*) ai-&gt;ai_addr;
               fprintf( stderr,
                        "   ai_addr      = sin_family: %d (AF_INET = %d, "
                        "AF_INET6 = %d)\n"
                        "                  sin_addr:   %s\n"
                        "                  sin_port:   %s\n",
                        pSadrIn-&gt;sin_family,
                        AF_INET,
                        AF_INET6,
                        hostBfr,
                        servBfr );
               break;
            }  /* End CASE of IPv4 record. */
            case PF_INET6:   /* IPv6 address record. */
            {
               pSadrIn6 = (sockaddr_in6_t*) ai-&gt;ai_addr;
               fprintf( stderr,
                        "   ai_addr      = sin6_family:   %d (AF_INET = %d, "
                        "AF_INET6 = %d)\n"
                        "                  sin6_addr:     %s\n"
                        "                  sin6_port:     %s\n"
                        "                  sin6_flowinfo: %d\n"
                        "                  sin6_scope_id: %d\n",
                        pSadrIn6-&gt;sin6_family,
                        AF_INET,
                        AF_INET6,
                        hostBfr,
                        servBfr,
                        pSadrIn6-&gt;sin6_flowinfo,
                        pSadrIn6-&gt;sin6_scope_id );
               break;
            }  /* End CASE of IPv6 record. */
            default:   /* Can never get here, but just for completeness. */
            {
               fprintf( stderr,
                        "%s (line %d): ERROR - Unknown protocol family (%d).\n",
                        pgmName,
                        __LINE__,
                        ai-&gt;ai_family );
               break;
            }  /* End DEFAULT case (unknown protocol family). */
         }  /* End SWITCH on protocol family. */
      }  /* End IF verbose mode. */
      /*
      ** Create a socket.
      */
      if ( !SYSCALL( "socket",
                     __LINE__,
                     sckt = socket( ai-&gt;ai_family,
                                    ai-&gt;ai_socktype,
                                    ai-&gt;ai_protocol ) ) )
      {
         sckt = INVALID_DESC;
         continue;   /* Try the next address record in the list. */
      }
      /*
      ** Set the target destination for the remote host on this socket.  That
      ** is, this socket only communicates with the specified host.
      */
      if ( !SYSCALL( "connect",
                     __LINE__,
                     connect( sckt,
                              ai-&gt;ai_addr,
                              ai-&gt;ai_addrlen ) ) )
      {
         (void) close( sckt );   /* Could use SYSCALL() again here, but why? */
         sckt = INVALID_DESC;
         continue;   /* Try the next address record in the list. */
      }
   }  /* End FOR each address record returned by getaddrinfo(3). */
   /*
   ** Clean up &amp; return.
   */
   freeaddrinfo( aiHead );
   return sckt;
}  /* End openSckt() */
/******************************************************************************
* Function: tod
*
* Description:
*    Receive the time-of-day from the remote server and write it to stdout.
*
* Parameters:
*    sckt - The socket descriptor for the connection.
*
* Return Value: None.
******************************************************************************/
static void tod( int sckt )
{
   char bfr[ MAXBFRSIZE+1 ];
   int  inBytes;
   /*
   ** Send a datagram to the server to wake it up.  The content isn't
   ** important, but something must be sent to let it know we want the TOD.
   */
   if ( !SYSCALL( "write",
                  __LINE__,
                  write( sckt, "Are you there?", 14 ) ) )
   {
      return;
   }
   /*
   ** Read the time-of-day from the remote host.
   */
   if ( !SYSCALL( "read",
                  __LINE__,
                  inBytes = read( sckt,
                                  bfr,
                                  MAXBFRSIZE ) ) )
   {
      return;
   }
   bfr[ inBytes ] = '\0';   /* Null-terminate the received string. */
   fputs( bfr, stdout );    /* Null string if EOF (inBytes == 0).  */
   fflush( stdout );
}  /* End tod() */
</pre></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp57692944"></a>2. Other programming languages</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp57693632"></a>2.1. JAVA</h3></div></div></div><p>Sun Java versions since 1.4 are IPv6 enabled, see e.g. <a class="ulink" href="http://java.sun.com/j2se/1.5.0/docs/api/java/net/Inet6Address.html" target="_top">Inet6Address (1.5/5.0)</a> class. Hints are available in the <span class="emphasis"><em>Networking IPv6 User Guide for JDK/JRE</em></span> <a class="ulink" href="http://java.sun.com/j2se/1.4.2/docs/guide/net/ipv6_guide/index.html" target="_top">1.4</a> and <a class="ulink" href="http://java.sun.com/j2se/1.5.0/docs/guide/net/ipv6_guide/index.html" target="_top">1.5 (5.0)</a>.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58791360"></a>2.2. Perl</h3></div></div></div><p>As of May 2007 it's not known that the Perl core itself already supports IPv6. It can be added by using following modules:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://search.cpan.org/~umemoto/Socket6/" target="_top">Socket6</a></p></li></ul></div><p>Anyway, some other modules exist for/with IPv6 support (e.g. Net::IP), search for &#8221;IPv6&#8221; on <a class="ulink" href="http://search.cpan.org/" target="_top">http://search.cpan.org/</a>.</p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chapter-interoperability"></a>Chapter 24. Interoperability</h1></div></div></div><p>The <a class="ulink" href="http://www.tahi.org/" target="_top">TAHI Project</a> checks the interoperability of different operating systems regarding the implementation of IPv6 features. Linux kernel already got the <a class="ulink" href="http://www.linux-ipv6.org/v6ready/" target="_top">IPv6 Ready Logo Phase 1</a>. </p></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chapter-information"></a>Chapter 25. Further information and URLs</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#information-books">1. Paper printed books, articles, online reviews (mixed)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58800128">1.1. Printed Books (English)</a></span></dt><dt><span class="sect2"><a href="#idp58705216">1.2. Articles, eBooks, Online Reviews (mixed)</a></span></dt><dt><span class="sect2"><a href="#information-sciencepublication">1.3. Science Publications (abstracts, bibliographies, online resources)</a></span></dt><dt><span class="sect2"><a href="#idp58932832">1.4. Others</a></span></dt></dl></dd><dt><span class="sect1"><a href="#information-conferences">2. Conferences, Meetings, Summits</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp58935504">2.1. 2004</a></span></dt></dl></dd><dt><span class="sect1"><a href="#information-onlineinformation">3. Online information</a></span></dt><dd><dl><dt><span class="sect2"><a href="#information-joinipv6.">3.1. Join the IPv6 backbone</a></span></dt><dt><span class="sect2"><a href="#idp58965008">3.2. Latest news and URLs to other documents</a></span></dt><dt><span class="sect2"><a href="#idp58967888">3.3. Protocol references</a></span></dt><dt><span class="sect2"><a href="#idp58981168">3.4. More information</a></span></dt><dt><span class="sect2"><a href="#idp59027488">3.5. By countries</a></span></dt><dt><span class="sect2"><a href="#idp59061712">3.6. By operating systems</a></span></dt><dt><span class="sect2"><a href="#information-ipv6andsecurity">3.7. IPv6 Security</a></span></dt><dt><span class="sect2"><a href="#idp59091872">3.8. Application lists</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp59109328">4. IPv6 Infrastructure</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp59109968">4.1. Statistics</a></span></dt><dt><span class="sect2"><a href="#idp59113072">4.2. Internet Exchanges</a></span></dt><dt><span class="sect2"><a href="#information-Tunnelbroker">4.3. Tunnel broker</a></span></dt><dt><span class="sect2"><a href="#information-infrastructure-nativeipv6service">4.4. Native IPv6 Services</a></span></dt></dl></dd><dt><span class="sect1"><a href="#information-maillists">5. Maillists</a></span></dt><dt><span class="sect1"><a href="#information-onlinetesttools">6. Online tools</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp59258208">6.1. Testing tools</a></span></dt><dt><span class="sect2"><a href="#idp59261936">6.2. Information retrievement</a></span></dt><dt><span class="sect2"><a href="#idp59263792">6.3. IPv6 Looking Glasses</a></span></dt><dt><span class="sect2"><a href="#idp59265552">6.4. Helper applications</a></span></dt></dl></dd><dt><span class="sect1"><a href="#information-trainingsandseminars">7. Trainings, Seminars</a></span></dt><dt><span class="sect1"><a href="#information-onlinediscovery">8. 'The Online Discovery' ...</a></span></dt></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="information-books"></a>1. Paper printed books, articles, online reviews (mixed)</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58800128"></a>1.1. Printed Books (English)</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58800768"></a>1.1.1. Cisco</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Cisco Self-Study: Implementing IPv6 Networks (IPV6) by Regis Desmeules. Cisco Press; ISBN 1587050862; 500 pages; 1st edition (April 11, 2003).
Note: This item will be published on April 11, 2003.</p></li><li class="listitem"><p>Configuring IPv6 with Cisco IOS by Sam Brown, Sam Browne, Neal Chen, Robbie Harrell, Edgar, Jr. Parenti (Editor), Eric Knipp (Editor), Paul Fong (Editor)362 pages; Syngress Media Inc; ISBN 1928994849; (July 12, 2002).</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58802912"></a>1.1.2. General</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.benedikt-stockebrand.de/books_e.html#ipv6-in-practice" target="_top">IPv6 in Practice: A Unixer's Guide to the Next Generation Internet</a> von Benedikt Stockebrand, November 2006; ISBN 3-540-24524-3</p></li><li class="listitem"><p><a class="ulink" href="http://www.sunny.ch/publications/f_ipv6.htm" target="_top">IPv6 Essentials</a> by Silvia Hagen, 2nd Edition, May 2006; ISBN 0-5961-0058-2
<a class="ulink" href="http://www.oreilly.com/catalog/ipv6ess/" target="_top">ToC, Index, Sample Chapter etc.</a>; <a class="ulink" href="http://press.oreilly.com/ipv6ess.html" target="_top">O'Reilly Pressrelease</a></p></li><li class="listitem"><p>IPv6: The New Internet Protocol. By Christian Huitema; Published by Prentice-Hall; ISBN 0138505055. 
Description: This book, written by Christian Huitema - a member of the InternetArchitecture Board, gives an excellent description of IPv6, how it differs from IPv4, and the hows and whys of it's development. 
Source: <a class="ulink" href="http://www.cs.uu.nl/wais/html/na-dir/internet/tcp-ip/resource-list.html" target="_top">http://www.cs.uu.nl/wais/html/na-dir/internet/tcp-ip/resource-list.html</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.epinions.com/book_mu-3402412/display_~full_specs" target="_top">IPv6 Networks</a> by Niles, Kitty; (ISBN 0070248079); 550 pages; Date Published 05/01/1998.</p></li><li class="listitem"><p>Implementing IPV6. Supporting the Next Generation Internet Protocols by P. E. Miller, Mark A. Miller; Publisher: John Wiley &amp; Sons; ISBN 0764545892; 2nd edition (March 15, 2000); 402 pages.</p></li><li class="listitem"><p>Big Book of Ipv6 Addressing Rfcs by Peter H. Salus (Compiler), Morgan Kaufmann Publishers, April 2000, 450 pages ISBN 0126167702. </p></li><li class="listitem"><p><a class="ulink" href="http://www.epinions.com/book_mu-3922588/display_~full_specs" target="_top">Understanding IPV6</a> by Davies, Joseph; ISBN 0735612455; Date Published 05/01/2001; Number of Pages: 350.</p></li><li class="listitem"><p>Migrating to IPv6 - IPv6 in Practice by Marc Blanchet Publisher: John Wiley &amp; Sons; ISBN 0471498920; 1st edition (November 2002); 368 pages.</p></li><li class="listitem"><p>Ipv6 Network Programming by Jun-ichiro Hagino; ISBN 1555583180</p></li><li class="listitem"><p><a class="ulink" href="http://www.nwfusion.com/news/2000/1023ipv6.html" target="_top">Wireless boosting IPv6</a> by Carolyn Duffy Marsan, 10/23/2000.</p></li><li class="listitem"><p><a class="ulink" href="http://www.oreillynet.com/search/index.ncsp?sp-q=IPv6" target="_top">O'reilly Network search for keyword IPv6</a> results in 29 hits (28. January 2002)</p></li></ul></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58705216"></a>1.2. Articles, eBooks, Online Reviews (mixed)</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.onlamp.com/pub/a/onlamp/2001/06/01/ipv6_tutorial.html" target="_top">Getting Connected with 6to4</a> by Huber Feyrer, 06/01/2001</p></li><li class="listitem"><p>Transient Addressing for Related Processes: Improved Firewalling by Using IPv6 and Multiple Addresses per Host; written by Peter M. Gleiz, Steven M. Bellovin (<a class="ulink" href="http://www.securiteinfo.com/ebooks/pdf/tarp.pdf" target="_top">PC-PDF-Version</a>; <a class="ulink" href="http://www.securiteinfo.com/ebooks/palm/tarp.pdf" target="_top">Palm-PDF-Version</a>; <a class="ulink" href="http://www.securiteinfo.com/ebooks/pdb/tarp.pdb" target="_top">PDB-Version</a>)</p></li><li class="listitem"><p><a class="ulink" href="http://www.ip6.com/index.html" target="_top">Internetworking IPv6 with Cisco Routers</a> by Silvano Gai, McGrawHill Italia, 1997. The 13 chapters and appendix A-D are downloadable as PDF-documents.</p></li><li class="listitem"><p><a class="ulink" href="http://www.csc.fi/~psavola/residential.html" target="_top">Migration and Co-existence of IPv4 and IPv6 in Residential Networks</a> by Pekka Savola, CSC/FUNET, 2002</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="information-sciencepublication"></a>1.3. Science Publications (abstracts, bibliographies, online resources)</h3></div></div></div><p>See also: <a class="ulink" href="http://liinwww.ira.uka.de/mpsbib?query=ipv6&amp;maxnum=200" target="_top">liinwww.ira.uka.de/ipv6</a> or <a class="ulink" href="http://www.google.com/scholar?q=ipv6" target="_top">Google / Scholar / IPv6</a></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.ipv6.ac.uk/gtpv6/workplan.html" target="_top">GEANT IPv6 Workplan</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.ipv6.ac.uk/bermuda2/" target="_top">IPv6 Trials on UK Academic Networks: Bermuda Project Aug.2002</a>: Participants - Getting connected - Project deliverables - Network topology - Address assignments - Wireless IPv6 access - IPv6 migration - Project presentations - Internet 2 - Other IPv6 projects - IPv6 fora and standards Bermuda 2...</p></li><li class="listitem"><p><a class="ulink" href="http://www.ipv6.ac.uk/" target="_top">http://www.ipv6.ac.uk/</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.ipv6.ecs.soton.ac.uk/" target="_top">IPv6 at the University of Southampton</a></p></li><li class="listitem"><p>Microsoft Research IPv6 Implementation (MSRIPv6): <a class="ulink" href="http://www.research.microsoft.com/msripv6/" target="_top">MSRIPv6 Configuring 6to4 - Connectivity with MSR IPv6 - Our 6Bone Node... </a></p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58932832"></a>1.4. Others</h3></div></div></div><p>See following URL for more: <a class="ulink" href="http://www.switch.ch/lan/ipv6/references.html" target="_top">SWITCH IPv6 Pilot / References</a></p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="information-conferences"></a>2. Conferences, Meetings, Summits</h2></div></div></div><p>Something missing? Suggestions are welcome!</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58935504"></a>2.1. 2004</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>1st Global IPv6 Summit in Sao Paul, Brazil</p></li></ul></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="information-onlineinformation"></a>3. Online information</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="information-joinipv6."></a>3.1. Join the IPv6 backbone</h3></div></div></div><p>More to be filled later...suggestions are welcome!</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-globalregistries"></a>3.1.1. Global registries</h4></div></div></div><p>See regional registries.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-majorregionregistries"></a>3.1.2. Major regional registries</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>America: <a class="ulink" href="http://www.arin.net/" target="_top">ARIN</a>, <a class="ulink" href="http://www.arin.net/registration/ipv6/index.html" target="_top">ARIN / registration page</a>, <a class="ulink" href="http://www.arin.net/registration/ipv6/index.html" target="_top">ARIN / IPv6 guidelines</a></p></li><li class="listitem"><p>EMEA: <a class="ulink" href="http://www.ripe.net/" target="_top">Ripe NCC</a>, <a class="ulink" href="http://www.ripe.net/ripencc/mem-services/registration/" target="_top">Ripe NCC / registration page</a>, <a class="ulink" href="http://www.ripe.net/ripencc/mem-services/registration/ipv6/" target="_top">Ripe NCC / IPv6 registration</a></p></li><li class="listitem"><p>Asia/Pacific: <a class="ulink" href="http://www.apnic.net/" target="_top">APNIC</a>, <a class="ulink" href="http://www.apnic.net/services/ipv6_guide.html" target="_top">APNIC / IPv6 ressource guide</a></p></li><li class="listitem"><p>Latin America and Caribbea: <a class="ulink" href="http://lacnic.org/" target="_top">LACNIC</a>, <a class="ulink" href="http://lacnic.net/en/bt-IPv6.html" target="_top">IPv6 Registration Services</a>, <a class="ulink" href="http://lacnic.net/en/chapter-4-en.pdf" target="_top">IPv6 Allocation Policy</a></p></li><li class="listitem"><p>Africa: <a class="ulink" href="http://www.afrinic.org/" target="_top">AfriNIC</a></p></li></ul></div><p>Also a list of major (prefix length 32) allocations per local registry is available here: <a class="ulink" href="http://www.ripe.net/ripencc/mem-services/registration/ipv6/ipv6allocs.html" target="_top">Ripe NCC / IPv6 allocations</a>.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-joinipv6-tunnelbrokers"></a>3.1.3. Tunnel brokers</h4></div></div></div><p>Note: A list of available Tunnel broker can be found in the section <a class="link" href="#information-Tunnelbroker" title="4.3. Tunnel broker">Tunnel broker</a> below. </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Former IPng. Tunnelbroker and IPv6 resources, now migrated to the <a class="ulink" href="http://www.sixxs.net/main/" target="_top">SixXs System</a>.</p></li><li class="listitem"><p>Eckes' <a class="ulink" href="http://sites.inka.de/lina/linux/ipv6.html" target="_top">IPv6-with-Linux</a> Page.</p></li><li class="listitem"><p>tunnelc - a perl based tunnel client script:
freshmeat.net: <a class="ulink" href="http://freshmeat.net/projects/tunnelc" target="_top">Project details for tunnel client</a>
SourceForge: <a class="ulink" href="http://sourceforge.net/projects/tunnelc" target="_top">Project Info - tunnelc</a> (also <a class="ulink" href="http://tunnelc.sourceforge.net/" target="_top">here</a>)</p></li><li class="listitem"><p>Linux Advanced Routing &amp; Traffic Control HOWTO, <a class="ulink" href="http://howtos.linuxbroker.com/howtoreader.shtml?file=Adv-Routing-HOWTO.html#LARTC.TUNNEL-IPV6.ADDRESSING" target="_top">Chapter 6: IPv6 tunneling with Cisco and/or 6bone</a>.</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-joinipv6-6to4-tunneling"></a>3.1.4. 6to4</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.kfu.com/~nsayer/6to4/" target="_top">NSayer's 6to4 information</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.faqs.org/rfcs/rfc3068.html" target="_top">RFC 3068 / An Anycast Prefix for 6to4 Relay Routers</a></p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-joinipv6-isatap-tunneling"></a>3.1.5. ISATAP</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.join.uni-muenster.de/Dokumente/Howtos/Howto_ISATAP.php?lang=en" target="_top">ISATAP (Intra-Site Automatic Tunnel Access Protocol) Information</a> by <a class="ulink" href="http://www.join.uni-muenster.de/" target="_top">JOIN</a></p></li></ul></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58965008"></a>3.2. Latest news and URLs to other documents</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.estoile.com/links/ipv6" target="_top">Lot of URLs to others documents</a> by Anil Edathara</p></li><li class="listitem"><p><a class="ulink" href="http://www.go6.net/" target="_top">go6 - The IPv6 Portal</a>: an IPv6 online portal with a wiki-based IPv6 knowledge center, an IPv6 discussion forum, an up-to-date collection of IPv6 Events and News, free IPv6 access and services, IPv6 software applications, and much more</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58967888"></a>3.3. Protocol references</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58968528"></a>3.3.1. IPv6-related Request For Comments (RFCs)</h4></div></div></div><p>Publishing the list of IPv6-related RFCs is beyond the scope of this document, but given URLs will lead you to such lists:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>List sorted by <a class="ulink" href="http://playground.sun.com/pub/ipng/html/specs/standards.html" target="_top">IPng Standardization Status</a> or <a class="ulink" href="http://playground.sun.com/pub/ipng/html/specs/specifications.html" target="_top">IPng Current Specifications</a> by Robert Hinden</p></li><li class="listitem"><p><a class="ulink" href="http://www.ipv6.org/specs.html" target="_top">IPv6 Related Specifications</a> on IPv6.org</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58972496"></a>3.3.2. Current drafts of working groups</h4></div></div></div><p>Current (also) IPv6-related drafts can be found here:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.ietf.org/ids.by.wg/ipv6.html" target="_top">IP Version 6 (ipv6)</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.ietf.org/ids.by.wg/ngtrans.html" target="_top">Next Generation Transition (ngtrans)</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.ietf.org/ids.by.wg/dhc.html" target="_top">Dynamic Host Configuration (dhc)</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.ietf.org/ids.by.wg/dnsext.html" target="_top">Domain Name System Extension (dnsext)</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.ietf.org/ids.by.wg/v6ops.html" target="_top">IPv6 Operations (v6ops)</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.ietf.org/ids.by.wg/mobileip.html" target="_top">Mobile IP (mobileip)</a></p></li><li class="listitem"><p><a class="ulink" href="http://playground.sun.com/pub/ipng/html/ipng-main.html" target="_top">Get any information about IPv6, from overviews, through RFCs &amp; drafts, to implementations</a> (including availability of stacks on various platforms &amp; source code for IPv6 stacks) </p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58979312"></a>3.3.3. Others</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.switch.ch/lan/ipv6/references.html" target="_top">SWITCH IPv6 Pilot / References</a>, big list of IPv6 references maintained by Simon Leinen</p></li></ul></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp58981168"></a>3.4. More information</h3></div></div></div><p><a class="ulink" href="http://www.deepspace6.net/sections/links.html" target="_top">DeepSpace6 / more interesting links</a></p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58982432"></a>3.4.1. Linux related</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.deepspace6.net/" target="_top">DeepSpace6 / (Not only) Linux IPv6 Portal</a> - Italy (<a class="ulink" href="http://mirrors.bieringer.de/www.deepspace6.net/" target="_top">Mirror</a>)</p></li><li class="listitem"><p><a class="ulink" href="http://www.bieringer.de/linux/IPv6/" target="_top">IPv6-HowTo for Linux by Peter Bieringer</a> - Germany, and his <a class="ulink" href="ftp://ftp.bieringer.de/pub/linux/IPv6/" target="_top">Bieringer / IPv6 - software archive</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.bieringer.de/linux/IPv6/status/IPv6+Linux-status.html" target="_top">Linux+IPv6 status by Peter Bieringer</a> - Germany (going obsolete)</p></li><li class="listitem"><p><a class="ulink" href="http://www.deepspace6.net/docs/ipv6_status_page_apps.html" target="_top">DeepSpace6 / IPv6 Status Page</a> - Italy (<a class="ulink" href="http://mirrors.bieringer.de/www.deepspace6.net/docs/ipv6_status_page_apps.html" target="_top">Mirror</a>) (will superseed upper one)</p></li><li class="listitem"><p><a class="ulink" href="http://www.linux-ipv6.org/" target="_top">USAGI project</a> - Japan, and their <a class="ulink" href="ftp://ftp.linux-ipv6.org/pub/" target="_top">USAGI project - software archive</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.tldp.org/HOWTO/OLSR-IPv6-HOWTO/" target="_top">Linux Optimized Link State Routing Protocol (OLSR) IPv6 HOWTO</a></p></li><li class="listitem"><p><a class="ulink" href="http://inl.info.ucl.ac.be/LinShim6/" target="_top">LinShim6</a></p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp58991808"></a>3.4.2. Linux related per distribution</h4></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">PLD</span></dt><dd><p><a class="ulink" href="http://www.pld-linux.org/" target="_top">PLD Linux Distribution</a> (&#8221;market leader&#8221; in containing IPv6 enabled packages)</p></dd><dt><span class="term">Red Hat</span></dt><dd><p><a class="ulink" href="http://www.redhat.com/" target="_top">Red Hat Enterprise Linux</a>, <a class="ulink" href="http://www.netcore.fi/pekkas/linux/ipv6/" target="_top"> Pekka Savola's IPv6 packages (Historic)</a></p></dd><dt><span class="term">Fedora</span></dt><dd><p><a class="ulink" href="https://fedoraproject.org/" target="_top">Fedora (Project) Linux</a></p></dd><dt><span class="term">Debian</span></dt><dd><p><a class="ulink" href="http://www.debian.org/" target="_top">Debian Linux</a>, <a class="ulink" href="http://ipv6.debian.net/" target="_top">IPv6 with Debian Linux</a></p></dd><dt><span class="term">SuSE</span></dt><dd><p><a class="ulink" href="https://www.suse.com/" target="_top">SuSE Linux</a></p></dd><dt><span class="term">Mandriva</span></dt><dd><p><a class="ulink" href="http://wiht.link/mandrivalinux" target="_top">Mandriva (Historic)</a></p></dd></dl></div><p>For more see the <a class="ulink" href="http://www.bieringer.de/linux/IPv6/status/IPv6+Linux-status-distributions.html" target="_top">IPv6+Linux Status Distributions</a> page.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59002000"></a>3.4.3. General</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.ipv6.org/" target="_top">IPv6.org</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.6bone.net/" target="_top">6bone</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.v6.wide.ad.jp/" target="_top">WIDE project</a> - Japan</p></li><li class="listitem"><p><a class="ulink" href="http://www.switch.ch/lan/ipv6/" target="_top">SWITCH IPv6 Pilot</a> - Switzerland</p></li><li class="listitem"><p><a class="ulink" href="http://www.feyrer.de/IPv6/" target="_top">IPv6 Corner of Hubert Feyrer</a> - Germany</p></li><li class="listitem"><p><a class="ulink" href="http://www.ipv6forum.com/" target="_top">IPv6 Forum</a> - a world-wide consortium of leading Internet vendors, Research &amp; Education Networks...</p></li><li class="listitem"><p><a class="ulink" href="http://playground.sun.com/pub/ipng/html/ipng-main.html" target="_top">Playground.sun.com / IPv6 Info Page</a> - maintained by Robert Hinden, Nokia. Get any information about IPv6, from overviews, through RFCs &amp; drafts, to implementations (including availability of stacks on various platforms &amp; source code for IPv6 stacks).</p></li><li class="listitem"><p><a class="ulink" href="http://www.6init.com/" target="_top">6INIT</a> - IPv6 Internet Initiative - an EU Fifth Framework Project under the IST Programme.</p></li><li class="listitem"><p><a class="ulink" href="http://www.ipv6-taskforce.org/" target="_top">IPv6 Task Force (European Union)</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.6init.org/" target="_top">6init</a> - IPv6 INternet IniTiative </p></li><li class="listitem"><p><a class="ulink" href="http://www.usenix.org/publications/library/proceedings/ana97/summaries/deering.html" target="_top">IPv6: The New Version of the Internet Protocol</a>, by Steve Deering.</p></li><li class="listitem"><p><a class="ulink" href="http://www.garykessler.net/library/ipv6_exp.html" target="_top">IPv6: The Next Generation Internet Protocol</a>, by Gary C. Kessler. </p></li><li class="listitem"><p><a class="ulink" href="http://www.3com.com/nsc/ipv6.html" target="_top">IPv6: Next Generation Internet Protocol</a> - 3Com</p></li><li class="listitem"><p><a class="ulink" href="http://www.internet2.org/" target="_top">internet || site</a> and <a class="ulink" href="http://ipv6.internet2.edu/" target="_top">internet2 Working Group</a></p></li><li class="listitem"><p>NetworkWorldFusion: Search / Doc Finder: <a class="ulink" href="http://search.nwfusion.com/query.html?qt=IPv6&amp;qp=&amp;ch=cn&amp;" target="_top">searched for IPv6</a> (102 documents found 22.12.2002)</p></li><li class="listitem"><p><a class="ulink" href="http://www.theregister.co.uk/" target="_top">The Register</a> (Search for IPv6 will result in 30 documents, 22.12.2002)</p></li><li class="listitem"><p><a class="ulink" href="http://zdnet.search.com/search?cat=279&amp;q=IPv6" target="_top">ZDNet Search for IPv6</a></p></li><li class="listitem"><p><a class="ulink" href="http://whatis.techtarget.com/wsearchResults/1,290214,sid9,00.html?query=IPv6" target="_top">TechTarget Search for IPv6</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.faqs.org/faqs/internet/tcp-ip/resource-list/index.html" target="_top">IPv6 &amp; TCP Resources List</a></p></li></ul></div><p>Something missing? Suggestions are welcome!</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-marketresearch"></a>3.4.4. Market Research</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.statista.com/search/internet+america/" target="_top">statista - The Statistics Portal</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.marketresearch.com/" target="_top">Market Research</a></p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-patents"></a>3.4.5. Patents</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Delphion Research: <a class="ulink" href="http://www.delphion.com/research/" target="_top">Patent Search Page</a>. Basic (free) registration needed. Examples found 21.12.2002 searching for IPv6:
<a class="ulink" href="http://www.delphion.com/details?pn=US06118784__" target="_top">Communicating method between IPv4 terminal and IPv6 terminal and IPv4-IPv6 converting apparatus</a>
<a class="ulink" href="http://www.delphion.com/details?pn=US06038233__" target="_top">Translator for IP networks, network system using the translator, and IP network coupling method therefor</a></p></li></ul></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp59027488"></a>3.5. By countries</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59028128"></a>3.5.1. Europe</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.ist-ipv6.org/" target="_top">www.ist-ipv6.org</a>: IST IPv6 Cluster, European IPv6 Research and Development Projects</p></li><li class="listitem"><p><a class="ulink" href="http://www.euro6ix.org/" target="_top">Euro6IX</a>: European IPv6 Internet Exchanges Backbone</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59030864"></a>3.5.2. Austria</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.ikn.tuwien.ac.at/~ipv6/" target="_top">IPv6@IKNnet and MIPv6 Research Group</a>: TU Vienna, Austria (IPv6: project, publications, diploma / doctor thesis, Conference Proceedings etc.)</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59032768"></a>3.5.3. Australia</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://oversteer.bl.echidna.id.au/IPv6/" target="_top">Carl's Australian IPv6 Pages</a> (old content)</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59034544"></a>3.5.4. Belgium</h4></div></div></div><p>Suggestions are welcome!</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59035440"></a>3.5.5. Brasil</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.ipv6dobrasil.com.br/" target="_top">IPv6 do Brasil</a></p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59037088"></a>3.5.6. China</h4></div></div></div><p>Suggestions are welcome!</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59037984"></a>3.5.7. Czech</h4></div></div></div><p>Suggestions are welcome!</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59038880"></a>3.5.8. Germany</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="https://www.xing.com/net/ipv6/" target="_top">Xing / IPv6</a></p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59040528"></a>3.5.9. France</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.renater.fr/Projets/IPv6/index.htm" target="_top">Renater</a>: Renater IPv6 Project Page</p></li><li class="listitem"><p><a class="ulink" href="http://www.inria.fr/recherche/equipes/ipv6.fr.html" target="_top">IPv6 - RSVP - ATM at INRIA</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.netbsd.org/fr/Documentation/network/ipv6/" target="_top">NetBSD IPv6 Documentation</a></p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59043808"></a>3.5.10. Italy</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://project6.ferrara.linux.it/" target="_top">Project6</a>: IPv6 networking with Linux</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59045584"></a>3.5.11. Japan</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.rtpro.yamaha.co.jp/RT/ipv6/" target="_top">Yamaha IPv6</a> (sorry, all in japanese native ...)</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59047360"></a>3.5.12. Korea</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.krv6.net/" target="_top">ETRI</a>: Electronics and Telecommunications Research Institut</p></li><li class="listitem"><p><a class="ulink" href="http://www.ipv6.or.kr/english/index.new.htm" target="_top">IPv6 Forum Korea</a>: Korean IPv6 Deployment Project</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59050016"></a>3.5.13. Mexico</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.ipv6.unam.mx/" target="_top">IPv6 Mexico</a> (spain &amp; english version): IPv6 Project Hompeage of The National Autonomous University of Mexico (UNAM)</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59052032"></a>3.5.14. Netherland</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.ipv6.surfnet.nl/" target="_top">SURFnet</a>: SURFnet IPv6 Backbone</p></li><li class="listitem"><p><a class="ulink" href="http://www.stack.nl/" target="_top">STACK</a>, <a class="ulink" href="http://www.stack.nl/ipv6/" target="_top">STACK (IPv6)</a>: Students' computer association of the Eindhoven University of Technology, Netherland</p></li><li class="listitem"><p><a class="ulink" href="http://www.ipng.nl/" target="_top">IPng.nl</a>: collaboration between WiseGuys and Intouch</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59056288"></a>3.5.15. Portugal </h4></div></div></div><p>Suggestions are welcome!</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59057184"></a>3.5.16. Russia</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.ipv6.ru/" target="_top">IPv6 Forum for Russia</a>: Yaroslavl State University Internet Center</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59058960"></a>3.5.17. Switzerland</h4></div></div></div><p>Suggestions are welcome!</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59059856"></a>3.5.18. United Kingdom</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.bt.com/ipv6/" target="_top">British Telecom IPv6 Home</a>: BT's ISP IPv6 Trial, UK's first IPv6 Internet Exchange etc.</p></li></ul></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp59061712"></a>3.6. By operating systems</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59062352"></a>3.6.1. *BSD</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.kame.net/" target="_top">KAME project</a> (*BSD)</p></li><li class="listitem"><p><a class="ulink" href="http://www.netbsd.org/Documentation/network/ipv6/" target="_top">NetBSD's IPv6 Networking FAQ</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.freebsd.org/ports/ipv6.html" target="_top">FreeBSD Ports: Ipv6</a></p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59065632"></a>3.6.2. Cisco IOS</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.cisco.com/warp/public/732/Tech/ipv6/" target="_top">Cisco IOS IPv6 Entry Page</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.cisco.com/univercd/cc/td/doc/product/software/ios122/122newft/122t/122t2/ipv6/ftipv6c.htm" target="_top">IPv6 for Cisco IOS Software</a>, File 2 of 3: Aug 2002 -- Table of Contents: IPv6 for Cisco IOS Software; Configuring Documentation Specifics; Enabling IPv6 Routing and Configuring; IPv6 Addressing; Enabling IPv6 Processing Globally.</p></li><li class="listitem"><p>Cisco Internet Networking Handbook, <a class="ulink" href="http://www.cisco.com/univercd/cc/td/doc/cisintwk/ito_doc/ipv6.htm" target="_top">Chapter IPv6</a></p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59069456"></a>3.6.3. HPUX</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.faqs.org/faqs/hp/hpux-faq/index.html" target="_top">comp.sys.hp.hpux FAQ</a></p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59071104"></a>3.6.4. IBM</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Now that IBM's announced the availability of z/OS V1.4, <a class="ulink" href="http://search390.techtarget.com/ateQuestionNResponse/0,289625,sid10_cid486367_tax292523,00.html" target="_top">what's new in this release?</a> This question was posed on 15 August 2002</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59073200"></a>3.6.5. Microsoft</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.microsoft.com/windows2000/technologies/communications/ipv6/default.asp" target="_top">Microsoft Windows 2000 IPv6</a> </p></li><li class="listitem"><p><a class="ulink" href="http://www.research.microsoft.com/msripv6" target="_top">MSRIPv6</a> - Microsoft Research Network - IPv6 Homepage </p></li><li class="listitem"><p><a class="ulink" href="http://support.microsoft.com/default.aspx?scid=kb;en-us;306203" target="_top">Internet Connection Firewall Does Not Block Internet Protocol Version 6 Traffic</a> (6.11.2001)</p></li><li class="listitem"><p><a class="ulink" href="http://support.microsoft.com/default.aspx?scid=kb;en-us;289892" target="_top">Internet Protocol Numbers</a> (8.10.2002)</p></li><li class="listitem"><p><a class="ulink" href="http://support.microsoft.com/default.aspx?scid=kb;en-us;273826" target="_top">IPv6 Technology Preview Refresh</a> (16.10.2002)</p></li><li class="listitem"><p><a class="ulink" href="http://support.microsoft.com/default.aspx?scid=kb;en-us;325449" target="_top">HOW TO: Install and Configure IP Version 6 in Windows .NET Enterprise Server</a> (26.10.2002)</p></li><li class="listitem"><p><a class="ulink" href="http://support.microsoft.com/default.aspx?scid=kb;en-us;329984" target="_top">Windows .NET Server 6to4 Router Service Quits When You Advertise a 2002 Address on the Public Interface</a> (28.10.2002)</p></li><li class="listitem"><p><a class="ulink" href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/wcetcpip/htm/cmconIPv6exe.asp" target="_top">msdn - Microsoft Windows CE .NET - IPv6 commands</a></p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59081920"></a>3.6.6. Solaris</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.sun.com/software/solaris/" target="_top">Sun Microsystems Solaris</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.cs.uu.nl/wais/html/na-dir/Solaris2/FAQ.html" target="_top">Solaris 2 Frequently Asked Questions (FAQ) 1.73</a></p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59084320"></a>3.6.7. Sumitoma </h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://playground.sun.com/pub/ipng/html/ipng-implementations.html#Sumitomo" target="_top">Sumitomo Electric has implemented IPv6 on Suminet 3700 family routers</a></p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59086144"></a>3.6.8. ZebOS</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>IpInfusion's <a class="ulink" href="http://www.ipinfusion.com/products/server/products_server.html" target="_top">ZebOS Server Routing Software</a></p></li></ul></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="information-ipv6andsecurity"></a>3.7. IPv6 Security</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://csrc.nist.gov/ipsec/" target="_top">NIST IPsec Project</a> ( National Institute of Standards and Technology, NIST)</p></li><li class="listitem"><p><a class="ulink" href="http://www.infosecuritymag.com/index.shtml" target="_top">Information Security</a></p></li><li class="listitem"><p><a class="ulink" href="http://neworder.box.sk/search.php3?srch=IPv6" target="_top">NewOrder.box.sk (search for IPv6)</a> (Articles, exploits, files database etc.) </p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp59091872"></a>3.8. Application lists</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.deepspace6.net/docs/ipv6_status_page_apps.html" target="_top">DeepSpace6 / IPv6 Status Page</a> (<a class="ulink" href="http://mirrors.bieringer.de/www.deepspace6.net/docs/ipv6_status_page_apps.html" target="_top">Mirror</a>)</p></li><li class="listitem"><p><a class="ulink" href="http://www.ipv6.org/v6-apps.html" target="_top">IPv6.org / IPv6 enabled applications</a></p></li><li class="listitem"><p><a class="ulink" href="http://freshmeat.net/search/?q=IPv6" target="_top">Freshmeat / IPv6 search</a>, currently (14 Dec 2002) 62 projects</p></li><li class="listitem"><p><a class="ulink" href="http://www.ipv6forum.com/modules.php?op=modload&amp;name=Web_Links&amp;file=index" target="_top">IPv6 Forum / Web Links</a></p></li></ul></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59097040"></a>3.8.1. Analyzer tools</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.wireshark.org/" target="_top">Wireshark</a> (former known as <span class="emphasis"><em>Ethereal</em></span>) is a free network protocol analyzer for Unix and Windows</p></li><li class="listitem"><p><a class="ulink" href="http://www.ip6.com/us/analyzer.htm" target="_top">Radcom RC100-WL</a> - Download Radcom RC100-WL protocol analyzer version 3.20</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59100128"></a>3.8.2. IPv6 Products</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.6wind.com/" target="_top">6wind</a> - solutions for IPv4/IPv6 Router, QoS, Multicast, Mobility, Security/VPN/Firewall. </p></li><li class="listitem"><p><a class="ulink" href="http://www.fefe.de/dns/" target="_top">Fefe's patches for IPv6 with djbdns</a>Aug 2002 -- What is djbdns and why does it need IPv6? djbdns is a full blown DNS server which outperforms BIND in nearly all respects.</p></li><li class="listitem"><p><a class="ulink" href="http://www.ipinfusion.com/products/server/products_server.html" target="_top">ZebOS Server Routing Suite </a></p></li><li class="listitem"><p><a class="ulink" href="http://download.cnet.com/Inframail-Advantage-Server-Edition/3000-10248_4-8202652.html" target="_top">Inframail (Advantage Server Edition)</a></p></li><li class="listitem"><p><a class="ulink" href="http://download.cnet.com/HTTrack-Website-Copier/3000-2377_4-10149393.html" target="_top">HTTrack Website Copier</a></p></li><li class="listitem"><p><a class="ulink" href="http://download.cnet.com/CommView/3000-2085_4-10132748.html" target="_top">CommView</a></p></li><li class="listitem"><p><a class="ulink" href="http://download.cnet.com/Posadis/3000-2155_4-10149750.html" target="_top">Posadis</a></p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-snmp"></a>3.8.3. SNMP</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.cs.uu.nl/wais/html/na-dir/snmp-faq/part1.html" target="_top">comp.protocpols.snmp SNMP FAQ Part 1 of 2</a></p></li></ul></div></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp59109328"></a>4. IPv6 Infrastructure</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp59109968"></a>4.1. Statistics</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.space.net/~gert/RIPE/" target="_top">IPv6 routing table history</a> created by Gert Döring, <a class="ulink" href="http://www.space.net/" target="_top">Space.Net</a></p></li><li class="listitem"><p><a class="ulink" href="http://6bone.informatik.uni-leipzig.de/ipv6/stats/stats.php3" target="_top">Official 6bone Webserver list Statisic</a></p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp59113072"></a>4.2. Internet Exchanges</h3></div></div></div><p>Another list of IPv6 Internet Exchanges can be found here: <a class="ulink" href="http://www.euro-ix.net/isp/choosing/search/matrix.php" target="_top">IPv6 status of IXPs in Europe</a></p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-ipv6exchanges-estonia"></a>4.2.1. Estonia</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://tix.estpak.ee/" target="_top">TIX</a> (tallinn interneti exchange with ipv6 support)</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-ipv6exchanges-europe"></a>4.2.2. Europe</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.euro6ix.net/" target="_top">Euro6IX</a>, European IPv6 Internet Exchange Backbone</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-ipv6exchanges-france"></a>4.2.3. France</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.fnix6.net/" target="_top">French National Internet  Exchange IPv6</a> (since 1.11.2002 active). 
FNIX6 provides a free and reliable high speed FastEthernet interconnection between ISP located in TeleCity Paris.</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-ipv6exchanges-germany"></a>4.2.4. Germany</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.inxs.de/" target="_top">INXS</a>: (Cable &amp; Wireless) Munich and Hamburg</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-ipv6exchanges-japan"></a>4.2.5. Japan</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.wide.ad.jp/nspixp6/" target="_top">NSPIXP-6</a>: IPv6-based Internet Exchange in Tokyo</p></li><li class="listitem"><p><a class="ulink" href="http://www.jpix.co.jp/" target="_top">JPIX</a>, Tokyo</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-ipv6exchanges-korea"></a>4.2.6. Korea</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.ngix.ne.kr/" target="_top">6NGIX</a></p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-ipv6exchanges-netherlands"></a>4.2.7. Netherlands</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.ams-ix.net/" target="_top">AMS-IX</a>: Amsterdam Internet Exchange</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-ipv6exchanges-uk"></a>4.2.8. UK</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.uk6x.com/" target="_top">UK6X</a>: London</p></li><li class="listitem"><p><a class="ulink" href="http://www.xchangepoint.net/" target="_top">XchangePoint</a>: London</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-ipv6exchanges-usa"></a>4.2.9. USA</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.6tap.net/" target="_top">6TAP</a>: Chicago. Supports peerings around the globe.</p></li><li class="listitem"><p><a class="ulink" href="http://www.paix.net/" target="_top">PAIX</a>: Palo Alto</p></li></ul></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="information-Tunnelbroker"></a>4.3. Tunnel broker</h3></div></div></div><p>See also: <a class="ulink" href="http://www.deepspace6.net/docs/tunnelbrokers.html" target="_top">http://www.deepspace6.net/docs/tunnelbrokers.html</a></p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-tunnelbroker-belgium"></a>4.3.1. Belgium</h4></div></div></div><p>Something missing? Suggestions are welcome!</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-tunnelbroker-canada"></a>4.3.2. Canada</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.freenet6.net/" target="_top">Freenet6</a> - /48 Delegation, Canada
<a class="ulink" href="http://www.linuxjournal.com/article.php?sid=5963&amp;mode=thread&amp;order=0" target="_top">Getting IPv6 Using Freenet6 on Debian</a>
<a class="ulink" href="http://www.viagenie.qc.ca/en/index.shtml" target="_top">Freenet6 creater</a></p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-tunnelbroker-china"></a>4.3.3. China</h4></div></div></div><p>Something missing? Suggestions are welcome!</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-tunnelbroker-estonia"></a>4.3.4. Estonia</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://tunnelbroker.ipv6.estpak.ee/?tunnel&amp;PHPSESSID=aa2184190cc2cc6d3a6f6ddd01ae3635" target="_top">Estpak</a></p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-tunnelbroker-germany"></a>4.3.5. Germany</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://6bone.informatik.uni-leipzig.de/" target="_top">6bone Knoten Leipzig</a>
<a class="ulink" href="http://www.mail-archive.com/ipv6@uni-muenster.de/msg00056.html" target="_top">Info bez. Hackangriff (2001)</a></p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-tunnelbroker-italy"></a>4.3.6. Italy</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.comv6.com/" target="_top">Comv6</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.bersafe.it/" target="_top">Bersafe</a> (Italian language)</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-tunnelbroker-japan"></a>4.3.7. Japan</h4></div></div></div><p>Something missing? Suggestions are welcome!</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-tunnelbroker-malaysia"></a>4.3.8. Malaysia</h4></div></div></div><p>Something missing? Suggestions are welcome!</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-tunnelbroker-netherlands"></a>4.3.9. Netherlands</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.ipng.nl/" target="_top">IPng Netherland</a> - Intouch, SurfNet, AMS-IX, UUNet, Cistron, RIPE NCC and AT&amp;T are connected at the AMS-IX. It is possible (there are requirements...) to get an static tunnel.</p></li><li class="listitem"><p><a class="ulink" href="http://www.ipv6.surfnet.nl/" target="_top">SURFnet Customers</a></p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-tunnelbroker-norway"></a>4.3.10. Norway</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.uninett.no/testnett/index.en.html" target="_top">UNINETT</a> - Pilot IPv6 Service (for Customers): tunnelbroker &amp; address allocation 
<a class="ulink" href="http://www.guruz.de/Uninett-Autoupdate-HOWTO" target="_top">Uninett-Autoupdate-HOWTO</a></p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-tunnelbroker-spain"></a>4.3.11. Spain</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://tb.consulintel.euro6ix.org/" target="_top">Consulintel</a></p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-tunnelbroker-switzerland"></a>4.3.12. Switzerland</h4></div></div></div><p>Something missing? Suggestions are welcome!</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-tunnelbroker-uk"></a>4.3.13. UK</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.nttv6.net/" target="_top">NTT</a>, United Kingdom - IPv6 Trial. IPv4 Tunnel and native IPv6 leased Line connections. POPs are located in London, UK Dusseldorf, Germany New Jersey, USA (East Coast) Cupertino, USA (West Coast) Tokyo, Japan</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-tunnelbroker-usa"></a>4.3.14. USA</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.es.net/hypertext/welcome/pr/ipv6.html" target="_top">ESnet</a>, USA - Energy Sciences Network: Tunnel Registry &amp; Address Delegation for directly connected ESnet sites and ESnet collaborators.</p></li><li class="listitem"><p><a class="ulink" href="http://ipv6tb.he.net/" target="_top">Hurricane Electric</a>, US backbone; 
<a class="ulink" href="http://tunnelbroker.net/" target="_top">Hurrican Electric Tunnelbroker</a> (also available under <a class="ulink" href="http://tunnelbroker.com/" target="_top">http://tunnelbroker.com/</a>)
Press Release: <a class="ulink" href="http://www.he.net/releases/release6.html" target="_top">Hurricane Electric Upgrades IPv6 Tunnel Broker</a>
<a class="ulink" href="http://ipv6.he.net/tunnelbroker-update.php" target="_top">Tunnel Broker Endpoint Autoupdate</a>, Perl Script</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-tunnelbroker-singapore"></a>4.3.15. Singapore</h4></div></div></div><p>Something missing? Suggestions are welcome!</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-tunnelbroker-more"></a>4.3.16. More Tunnel brokers...</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.kfu.com/~nsayer/6to4/" target="_top">Public 6to4 relay routers</a> (MS IIE boycott!)</p></li></ul></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="information-infrastructure-nativeipv6service"></a>4.4. Native IPv6 Services</h3></div></div></div><p>Note: These services are mostly only available with a valid IPv6 connection!</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-nativeipv6nntp"></a>4.4.1. Net News (NNTP)</h4></div></div></div><p>Something missing? Suggestions are welcome!</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-nativeipv6gameserver"></a>4.4.2. Game Server</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.viagenie.qc.ca/en/ipv6/quake2/ipv6-quake2.shtml" target="_top">Quake2</a> over IPv6</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-nativeipv6ircserver"></a>4.4.3. IRC Server</h4></div></div></div><p>Something missing? Suggestions are welcome!</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59182272"></a>4.4.4. Radio Stations, Music Streams</h4></div></div></div><p>Something missing? Suggestions are welcome!</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="information-nativeipv6webserver"></a>4.4.5. Webserver</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.ipv6.bieringer.de/" target="_top">Peter Bieringer's Home of Linux IPv6 HOWTO </a></p></li></ul></div><p>Something missing? Suggestions are welcome!</p></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="information-maillists"></a>5. Maillists</h2></div></div></div><p>Lists of maillists are available at:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.deepspace6.net/sections/lists.html" target="_top">DeepSpace6 / Mailling Lists</a></p></li></ul></div><p>Major Mailinglists are listed in following table:</p><div class="informaltable"><table border="1"><colgroup><col align="center" class="col0"><col align="center" class="col1"><col align="center" class="col2"><col align="center" class="col3"><col align="center" class="col4"><col align="center" class="col5"></colgroup><tbody><tr><td align="center" valign="top">Focus</td><td align="center" valign="top">Request e-mail address</td><td align="center" valign="top">What to subscribe</td><td align="center" valign="top">Maillist e-mail address</td><td align="center" valign="top">Language</td><td align="center" valign="top">Access through WWW</td></tr><tr><td align="center" valign="top">Linux kernel networking including IPv6</td><td align="center" valign="top">majordomo (at) vger.kernel.org</td><td align="center" valign="top">netdev</td><td align="center" valign="top">netdev (at) vger.kernel.org</td><td align="center" valign="top">English</td><td align="center" valign="top"><a class="ulink" href="http://vger.kernel.org/vger-lists.html#netdev" target="_top">Info</a>, <a class="ulink" href="http://www.spinics.net/lists/netdev/" target="_top">Archive</a></td></tr><tr><td align="center" valign="top">Mobile IP(v6) for Linux</td><td align="center" valign="top">Web-based, see URL</td><td align="center" valign="top">mipl</td><td align="center" valign="top">mipl (at) mobile-ipv6.org</td><td align="center" valign="top">English</td><td align="center" valign="top"><a class="ulink" href="http://www.mobile-ipv6.org/cgi-bin/mailman/listinfo" target="_top">Info</a>, <a class="ulink" href="http://www.mobile-ipv6.org/pipermail/mipl/" target="_top">Archive</a></td></tr><tr><td align="center" valign="top">Linux IPv6 users using USAGI extension</td><td align="center" valign="top">usagi-users-ctl (at) linux-ipv6.org</td><td align="center" valign="top"> </td><td align="center" valign="top">usagi-users (at) linux-ipv6.org</td><td align="center" valign="top">English</td><td align="center" valign="top"><a class="ulink" href="http://www.linux-ipv6.org/ml/index.html#usagi-users" target="_top">Info / Search</a>, <a class="ulink" href="http://www.linux-ipv6.org/ml/usagi-users/" target="_top">Archive</a></td></tr><tr><td align="center" valign="top">IPv6 on Debian Linux</td><td align="center" valign="top"> </td><td align="center" valign="top"> </td><td align="center" valign="top">debian-ipv6 (at) lists.debian.org</td><td align="center" valign="top">English</td><td align="center" valign="top"><a class="ulink" href="http://lists.debian.org/debian-ipv6/" target="_top">Info/Subscription/Archive</a></td></tr><tr><td align="center" valign="top">6bone</td><td align="center" valign="top">majordomo (at) isi.edu</td><td align="center" valign="top">6bone</td><td align="center" valign="top">6bone (at) isi.edu</td><td align="center" valign="top">English</td><td align="center" valign="top"><a class="ulink" href="http://www.6bone.net/6bone_email.html" target="_top">Info</a>, <a class="ulink" href="http://mailman.isi.edu/pipermail/6bone/" target="_top">Archive</a></td></tr><tr><td align="center" valign="top">IPv6 users in general</td><td align="center" valign="top">majordomo (at) ipv6.org</td><td align="center" valign="top">users</td><td align="center" valign="top">users (at) ipv6.org</td><td align="center" valign="top">English</td><td align="center" valign="top"><a class="ulink" href="http://www.ipv6.org/mailing-lists.html" target="_top">Info</a>, <a class="ulink" href="http://www.mail-archive.com/users@ipv6.org/" target="_top">Archive</a></td></tr><tr><td align="center" valign="top">Bugtracking of Internet applications (1)</td><td align="center" valign="top">bugtraq-subscribe (at) securityfocus.com</td><td align="center" valign="top"> </td><td align="center" valign="top">bugtraq (at) securityfocus.com (2)</td><td align="center" valign="top">English</td><td align="center" valign="top"><a class="ulink" href="http://online.securityfocus.com/popups/forums/bugtraq/intro.shtml" target="_top">Info</a>, <a class="ulink" href="http://online.securityfocus.com/archive/1" target="_top">Archive</a></td></tr></tbody></table></div><p>(1) very recommended if you provide server applications.</p><p>(2) list is moderated.
</p><p>Something missing? Suggestions are welcome!
</p><p>Following other maillinglists &amp; newsgroups are available via web:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://groups.yahoo.com/group/student-ipv6" target="_top">student-ipv6 (India)</a>
Description: This is the group for the Student Awareness group of IPv6 in India</p></li><li class="listitem"><p><a class="ulink" href="http://groups.yahoo.com/group/sun-ipv6-users" target="_top">sun-ipv6-users</a>
Description: Please report problems/suggestions regarding SUN Microsystems IPng implementation</p></li><li class="listitem"><p><a class="ulink" href="http://groups.yahoo.com/group/IPv6-BITS" target="_top">IPv6-BITS</a>
Description: This List will co-ordinate the working of Project Vertebrae.</p></li><li class="listitem"><p><a class="ulink" href="http://groups.yahoo.com/group/linux-bangalore-ipv6" target="_top">linux-bangalore-ipv6</a>
Description: The IPv6 deployment list of the Bangalore Linux User Group</p></li><li class="listitem"><p><a class="ulink" href="http://groups.yahoo.com/group/packet-switching" target="_top">packet-switching</a>
Description: This mailing list provides a forum for discussion of packet switching theory, technology, implementation and application in any relevant aspect including without limitation LAPB, X.25, SDLC, P802.1d, LLC, IP, IPv6, IPX, DECNET, APPLETALK, FR, PPP, IP Telephony, LAN PBX systems, management protocols like SNMP, e-mail, network transparent window systems, protocol implementation, protocol verification, conformance testing and tools used in maintaining or developing packet switching systems.</p></li><li class="listitem"><p>de.comm.protocols.tcp-ip
Description: Umstellung auf IPv6
Source: <a class="ulink" href="http://www.faqs.org/faqs/de-newsgroups/chartas/index.html" target="_top">Chartas der Newsgruppen in de.*</a></p></li><li class="listitem"><p>Google Group: <a class="ulink" href="http://groups.google.com/groups?hl=en&amp;lr=&amp;ie=UTF-8&amp;oe=UTF8&amp;safe=off&amp;group=comp.protocols.tcp-ip" target="_top">comp.protocols.tcp-ip</a></p></li><li class="listitem"><p>Google Group: <a class="ulink" href="http://groups.google.com/groups?hl=en&amp;lr=&amp;ie=UTF-8&amp;oe=UTF8&amp;safe=off&amp;group=linux.debian.maint.ipv6" target="_top">linux.debian.maint.ipv6</a></p></li><li class="listitem"><p>Google Group: <a class="ulink" href="http://groups.google.com/groups?hl=en&amp;lr=&amp;ie=UTF-8&amp;oe=UTF8&amp;safe=off&amp;group=microsoft.public.platformsdk.networking.ipv6" target="_top">microsoft.public.platformsdk.networking.ipv6</a></p></li><li class="listitem"><p>Google Group: <a class="ulink" href="http://groups.google.com/groups?hl=en&amp;lr=&amp;ie=UTF-8&amp;oe=UTF8&amp;safe=off&amp;group=fa.openbsd.ipv6" target="_top">fa.openbsd.ipv6</a></p></li></ul></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="information-onlinetesttools"></a>6. Online tools</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp59258208"></a>6.1. Testing tools</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ping, traceroute, tracepath, 6bone registry, DNS: <a class="ulink" href="http://www.join.uni-muenster.de/lab/testtools.html" target="_top">JOIN / Testtools</a> (German language only, but should be no problem for non German speakers)</p></li><li class="listitem"><p>traceroute6, whois: <a class="ulink" href="http://www.ipng.nl/" target="_top">IPng.nl</a></p></li><li class="listitem"><p>AAAA Lookup Checker <a class="ulink" href="http://www.cnri.dit.ie/cgi-bin/check_aaaa.pl" target="_top">http://www.cnri.dit.ie/cgi-bin/check_aaaa.pl</a></p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp59261936"></a>6.2. Information retrievement</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.ripe.net/ripencc/mem-services/registration/ipv6/ipv6allocs.html" target="_top">List of worldwide all IPv6-aggregated IP-Blocks</a></p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp59263792"></a>6.3. IPv6 Looking Glasses</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.v6.dren.net/lg/" target="_top">DRENv6 Looking Glass</a></p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp59265552"></a>6.4. Helper applications</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.tdoi.org/prefcalc.php" target="_top">IPv6 Prefix Calculator</a> by <a class="ulink" href="http://www.tdoi.org/" target="_top">TDOI</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.maths.tcd.ie/cgi-bin/check_dns.pl" target="_top">DNS record checker</a></p></li></ul></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="information-trainingsandseminars"></a>7. Trainings, Seminars</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.e-trainonline.com/html/ciw_internetworking_profession.html#IPv6" target="_top">CIW Internetworking Professional Training CBT CD</a></p></li><li class="listitem"><p><a class="ulink" href="http://www.trainingpages.com/x/category,kw-1628,.html" target="_top">Training Pages</a>, U.K. - Search for IPv6 (13 Courses, 2006-08-21)</p></li><li class="listitem"><p><a class="ulink" href="http://www.erion.co.uk/ipv6.html" target="_top">Erion IPv6 Training</a>, UK</p></li></ul></div><p>Something missing? Suggestions are welcome!</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="information-onlinediscovery"></a>8. 'The Online Discovery' ...</h2></div></div></div><p>IPv6: Addressing The Needs Of the Future by Yankee Group (Author) 
List Price:   $595.00
Edition: e-book (Acrobat Reader)
Pages: 3 (three)
Publisher: MarketResearch.com; ISBN B00006334Y; (November 1, 2001) 
</p><p>;-) The number of copies would be interesting...
</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="idp59276000"></a>Chapter 26. Revision history / Credits / The End</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#revision-history">1. Revision history</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp59278928">1.1. Releases 0.x</a></span></dt></dl></dd><dt><span class="sect1"><a href="#credits">2. Credits</a></span></dt><dd><dl><dt><span class="sect2"><a href="#major-credits">2.1. Major credits</a></span></dt><dt><span class="sect2"><a href="#idp59383440">2.2. Other credits</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp59409744">3. The End</a></span></dt></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="revision-history"></a>1. Revision history</h2></div></div></div><p>Versions x.y are published on the Internet.</p><p>Versions x.y.z are work-in-progress and published as LyX and SGML file on CVS. Because Deep Space 6 mirrors these SGML files and generate independend from TLDP public versions, this versions will show up there and also on its mirrors.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp59278928"></a>1.1. Releases 0.x</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">0.67wip</span></dt><dd><p>2015-08-18/PB: fix some broken URLs, 20151016/bie: remove broken URL to Spanish transation, 20161215/bie: update some URLs, 20170114/: update some URLs</p></dd><dt><span class="term">0.66</span></dt><dd><p>2010-04-20/PB: extend QoS section with examples, 20130513/PB: add IPv6 NAT hints, 20130521/PB: review dhcpd, 20131019/bie: general review, 20140502/bie: add hints for nftables, 20140513/bie: extend section regarding address resolution and add source/destination address selection information, 20140515/bie: add hints for activation of privacy extension</p></dd><dt><span class="term">0.65</span></dt><dd><p>2009-12-13/PB: minor fixes</p></dd><dt><span class="term">0.64</span></dt><dd><p>2009-06-11/PB: extend DHCP server examples (ISC DHCP, Dibbler)</p></dd><dt><span class="term">0.63</span></dt><dd><p>2009-02-14/PB: Fix FSF address, major update on 4in6 tunnels, add new section for address resolving, add some URLs, remove broken URLs</p></dd><dt><span class="term">0.62</span></dt><dd><p>2008-11-09/PB: Adjust URL to Turkish howto, add some HIP related URLs, remove broken URLs</p></dd><dt><span class="term">0.61.1</span></dt><dd><p>2007-11-11/PB: fix broken description of shortcut BIND</p></dd><dt><span class="term">0.61</span></dt><dd><p>2007-10-06/PB: fix broken URLs to TLDP-CVS, minor URL update.</p></dd><dt><span class="term">0.60.2</span></dt><dd><p>2007-10-03/PB: fix description of sysctl/autoconf (credits to Francois-Xavier Le Bail)</p></dd><dt><span class="term">0.60.1</span></dt><dd><p>2007-06-16/PB: speling fixes (credits to Larry W. Burton)</p></dd><dt><span class="term">0.60</span></dt><dd><p>2007-05-29/PB: import major contribution to Programming using C-API written by John Wenker, minor fixes</p></dd><dt><span class="term">0.52</span></dt><dd><p>2007-05-23/PB: update firewalling chapter, improve document for proper SGML validation, minor bugfixes</p></dd><dt><span class="term">0.51</span></dt><dd><p>2006-11-08/PB: remove broken URLs, add a new book (credits to Bryan Vukich)</p></dd><dt><span class="term">0.50.2</span></dt><dd><p>2006-10-25/PB: fix typo in dhcp6 section (credits to Michele Ferritto)</p></dd><dt><span class="term">0.50.1</span></dt><dd><p>2006-09-23/PB: add some URLs</p></dd><dt><span class="term">0.50</span></dt><dd><p>2006-08-24/PB: check RFC URLs, fix URL to Chinese translation, finalize for publishing</p></dd><dt><span class="term">0.49.5</span></dt><dd><p>2006-08-23/PB: fix/remove broken URLs</p></dd><dt><span class="term">0.49.4</span></dt><dd><p>2006-08-21/PB: some review, update and enhancement of the content, replace old 6bone example addresses with the current defined ones.</p></dd><dt><span class="term">0.49.3</span></dt><dd><p>2006-08-20/PB: fix bug in maillist entries, 'mobility' is now a separate chapter</p></dd><dt><span class="term">0.49.2</span></dt><dd><p>2006-08-20/PB: update and cleanup of maillist entries</p></dd><dt><span class="term">0.49.1</span></dt><dd><p>2006-06-13/PB: major update of mobility section (contributed by Benjamin Thery)</p></dd><dt><span class="term">0.49</span></dt><dd><p>2005-10-03/PB: add configuration hints for DHCPv6, major broken URL cleanup (credits to Necdet Yucel)</p></dd><dt><span class="term">0.48.1</span></dt><dd><p>2005-01-15/PB: minor fixes</p></dd><dt><span class="term">0.48</span></dt><dd><p>2005-01-11/PB: grammar check and minor review of IPv6 IPsec section</p></dd><dt><span class="term">0.47.1</span></dt><dd><p>2005-01-01/PB: add information and examples about IPv6 IPsec, add some URLs</p></dd><dt><span class="term">0.47</span></dt><dd><p>2004-08-30/PB: add some notes about proftpd, vsftpd and other daemons, add some URLs, minor fixes, update status of Spanish translation</p></dd><dt><span class="term">0.46.4</span></dt><dd><p>2004-07-19/PB: minor fixes</p></dd><dt><span class="term">0.46.3</span></dt><dd><p>2004-06-23/PB: add note about started Greek translation, replace Taiwanese with Chinese for related translation</p></dd><dt><span class="term">0.46.2</span></dt><dd><p>2004-05-22/PB: minor fixes</p></dd><dt><span class="term">0.46.1</span></dt><dd><p>2004-04-18/PB: minor fixes</p></dd><dt><span class="term">0.46</span></dt><dd><p>2004-03-04/PB: announce Italian translation, add information about DHCPv6, minor updates</p></dd><dt><span class="term">0.45.1</span></dt><dd><p>2004-01-12/PB: add note about the official example address space</p></dd><dt><span class="term">0.45</span></dt><dd><p>2004-01-11/PB: minor fixes, add/fix some URLs, some extensions</p></dd><dt><span class="term">0.44.2</span></dt><dd><p>2003-10-30/PB: fix some copy&amp;paste text bugs</p></dd><dt><span class="term">0.44.1</span></dt><dd><p>2003-10-19/PB: add note about start of Italian translation</p></dd><dt><span class="term">0.44</span></dt><dd><p>2003-08-15/PB: fix URLs, add hint on tcp_wrappers (about broken notation in some versions) and Apache2</p></dd><dt><span class="term">0.43.4</span></dt><dd><p>2003-07-26/PB: fix URL, add archive URL for maillist users at ipv6.org, add some ds6 URLs</p></dd><dt><span class="term">0.43.3</span></dt><dd><p>2003-06-19/PB: fix typos</p></dd><dt><span class="term">0.43.2</span></dt><dd><p>2003-06-11/PB: fix URL</p></dd><dt><span class="term">0.43.1</span></dt><dd><p>2003-06-07/PB: fix some URLs, fix credits, add some notes at IPsec</p></dd><dt><span class="term">0.43</span></dt><dd><p>2003-06-05/PB: add some notes about configuration in SuSE Linux, add URL of French translation</p></dd><dt><span class="term">0.42</span></dt><dd><p>2003-05-09/PB: minor fixes, announce French translation</p></dd><dt><span class="term">0.41.4</span></dt><dd><p>2003-05-02/PB: Remove a broken URL, update some others.</p></dd><dt><span class="term">0.41.3</span></dt><dd><p>2003-04-23/PB: Minor fixes, remove a broken URL, fix URL to Taiwanese translation</p></dd><dt><span class="term">0.41.2</span></dt><dd><p>2003-04-13/PB: Fix some typos, add a note about a French translation is in progress</p></dd><dt><span class="term">0.41.1</span></dt><dd><p>2003-03-31/PB: Remove a broken URL, fix another</p></dd><dt><span class="term">0.41</span></dt><dd><p>2003-03-22/PB: Add URL of German translation</p></dd><dt><span class="term">0.40.2</span></dt><dd><p>2003-02-27/PB: Fix a misaddressed URL</p></dd><dt><span class="term">0.40.1</span></dt><dd><p>2003-02-12/PB: Add Debian-Linux-Configuration, add a minor note on translations</p></dd><dt><span class="term">0.40</span></dt><dd><p>2003-02-10/PB: Announcing available German version</p></dd><dt><span class="term">0.39.2</span></dt><dd><p>2003-02-10/GK: Minor syntax and spelling fixes</p></dd><dt><span class="term">0.39.1</span></dt><dd><p>2003-01-09/PB: fix an URL (draft adopted to an RFC)</p></dd><dt><span class="term">0.39</span></dt><dd><p>2003-01-13/PB: fix a bug (forgotten 'link&#8221; on &#8221;ip link set&#8221; (credits to Yaniv Kaul)</p></dd><dt><span class="term">0.38.1</span></dt><dd><p>2003-01-09/PB: a minor fix</p></dd><dt><span class="term">0.38</span></dt><dd><p>2003-01-06/PB: minor fixes</p></dd><dt><span class="term">0.37.1</span></dt><dd><p>2003-01-05/PB: minor updates</p></dd><dt><span class="term">0.37</span></dt><dd><p>2002-12-31/GK: 270 new links added (searched in 1232 SearchEngines) in existing and 53 new (sub)sections</p></dd><dt><span class="term">0.36.1</span></dt><dd><p>2002-12-20/PB: Minor fixes</p></dd><dt><span class="term">0.36</span></dt><dd><p>2002-12-16/PB: Check of and fix broken links (credits to Georg Käfer), some spelling fixes</p></dd><dt><span class="term">0.35</span></dt><dd><p>2002-12-11/PB: Some fixes and extensions</p></dd><dt><span class="term">0.34.1</span></dt><dd><p>2002-11-25/PB: Some fixes (e.g. broken linuxdoc URLs)</p></dd><dt><span class="term">0.34</span></dt><dd><p>2002-11-19/PB: Add information about German translation (work in progress), some fixes, create a small shortcut explanation list, extend &#8221;used terms&#8221; and add two German books</p></dd><dt><span class="term">0.33</span></dt><dd><p>2002-11-18/PB: Fix broken RFC-URLs, add parameter ttl on 6to4 tunnel setup example</p></dd><dt><span class="term">0.32</span></dt><dd><p>2002-11-03/PB: Add information about Taiwanese translation</p></dd><dt><span class="term">0.31.1</span></dt><dd><p>2002-10-06/PB: Add another maillist</p></dd><dt><span class="term">0.31</span></dt><dd><p>2002-09-29/PB: Extend information in proc-filesystem entries</p></dd><dt><span class="term">0.30</span></dt><dd><p>2002-09-27/PB: Add some maillists</p></dd><dt><span class="term">0.29</span></dt><dd><p>2002-09-18/PB: Update statement about nmap (triggered by Fyodor)</p></dd><dt><span class="term">0.28.1</span></dt><dd><p>2002-09-16/PB: Add note about ping6 to multicast addresses, add some labels</p></dd><dt><span class="term">0.28</span></dt><dd><p>2002-08-17/PB: Fix broken LDP/CVS links, add info about Polish translation, add URL of the IPv6 Address Oracle</p></dd><dt><span class="term">0.27</span></dt><dd><p>2002-08-10/PB: Some minor updates</p></dd><dt><span class="term">0.26.2</span></dt><dd><p>2002-07-15/PB: Add information neighbor discovery, split of firewalling (got some updates) and security into extra chapters</p></dd><dt><span class="term">0.26.1</span></dt><dd><p>2002-07-13/PB: Update nmap/IPv6 information</p></dd><dt><span class="term">0.26</span></dt><dd><p>2002-07-13/PB: Fill /proc-filesystem chapter, update DNS information about depricated A6/DNAME, change P-t-P tunnel setup to use of &#8221;ip&#8221; only</p></dd><dt><span class="term">0.25.2</span></dt><dd><p>2002-07-11/PB: Minor spelling fixes</p></dd><dt><span class="term">0.25.1</span></dt><dd><p>2002-06-23/PB: Minor spelling and other fixes</p></dd><dt><span class="term">0.25</span></dt><dd><p>2002-05-16/PB: Cosmetic fix for 2^128, thanks to José Abílio Oliveira Matos for help with LyX</p></dd><dt><span class="term">0.24</span></dt><dd><p>2002-05-02/PB: Add entries in URL list, minor spelling fixes</p></dd><dt><span class="term">0.23</span></dt><dd><p>2002-03-27/PB: Add entries in URL list and at maillists, add a label and minor information about IPv6 on RHL</p></dd><dt><span class="term">0.22</span></dt><dd><p>2002-03-04/PB: Add info about 6to4 support in kernel series 2.2.x and add an entry in URL list and at maillists</p></dd><dt><span class="term">0.21</span></dt><dd><p>2002-02-26/PB: Migrate next grammar checks submitted by John Ronan </p></dd><dt><span class="term">0.20.4</span></dt><dd><p>2002-02-21/PB: Migrate more grammar checks submitted by John Ronan, add some additional hints at DNS section </p></dd><dt><span class="term">0.20.3</span></dt><dd><p>2002-02-12/PB: Migrate a minor grammar check patch submitted by John Ronan</p></dd><dt><span class="term">0.20.2</span></dt><dd><p>2002-02-05/PB: Add mipl to maillist table</p></dd><dt><span class="term">0.20.1</span></dt><dd><p>2002-01-31/PB: Add a hint how to generate 6to4 addresses</p></dd><dt><span class="term">0.20</span></dt><dd><p>2002-01-30/PB: Add a hint about default route problem, some minor updates</p></dd><dt><span class="term">0.19.2</span></dt><dd><p>2002-01-29/PB: Add many new URLs</p></dd><dt><span class="term">0.19.1</span></dt><dd><p>2002-01-27/PB: Add some forgotten URLs</p></dd><dt><span class="term">0.19</span></dt><dd><p>2002-01-25/PB: Add two German books, fix quote entinities in exported SGML code</p></dd><dt><span class="term">0.18.2</span></dt><dd><p>2002-01-23/PB: Add a FAQ on the program chapter</p></dd><dt><span class="term">0.18.1</span></dt><dd><p>2002-01-23/PB: Move &#8221;the end&#8221; to the end, add USAGI to maillists</p></dd><dt><span class="term">0.18</span></dt><dd><p>2002-01-22/PB: Fix bugs in explanation of multicast address types</p></dd><dt><span class="term">0.17.2</span></dt><dd><p>2002-01-22/PB: Cosmetic fix double existing text in history (at 0.16), move all credits to the end of the document</p></dd><dt><span class="term">0.17.1</span></dt><dd><p>2002-01-20/PB: Add a reference, fix URL text in online-test-tools</p></dd><dt><span class="term">0.17</span></dt><dd><p>2002-01-19/PB: Add some forgotten information and URLs about global IPv6 addresses</p></dd><dt><span class="term">0.16</span></dt><dd><p>2002-01-19/PB: Minor fixes, remove &#8221;bold&#8221; and &#8221;emphasize&#8221; formats on code lines, fix &#8221;too long unwrapped code lines&#8221; using selfmade utility, extend list of URLs.</p></dd><dt><span class="term">0.15</span></dt><dd><p>2002-01-15/PB: Fix bug in addresstype/anycast, move content related credits to end of document</p></dd><dt><span class="term">0.14</span></dt><dd><p>2002-01-14/PB: Minor review at all, new chapter &#8221;debugging&#8221;, review &#8221;addresses&#8221;, spell checking, grammar checking (from beginning to 3.4.1) by Martin Krafft, add tcpdump examples, copy firewalling/netfilter6 from IPv6+Linux-HowTo, minor enhancements</p></dd><dt><span class="term">0.13</span></dt><dd><p>2002-01-05/PB: Add example BIND9/host, move revision history to end of document, minor extensions</p></dd><dt><span class="term">0.12</span></dt><dd><p>2002-01-03/PB: Merge review of David Ranch</p></dd><dt><span class="term">0.11</span></dt><dd><p>2002-01-02/PB: Spell checking and merge review of Pekka Savola</p></dd><dt><span class="term">0.10</span></dt><dd><p>2002-01-02/PB: First public release of chapter 1</p></dd></dl></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="credits"></a>2. Credits</h2></div></div></div><p>The quickest way to be added to this nice list is to send bug fixes, corrections, and/or updates to me ;-).</p><p>If you want to do a major review, you can use the native LyX file (see <a class="link" href="#general-original-source" title="5.1. Original source of this HOWTO">original source</a>) and send diffs against it, because diffs against SGML don't help too much.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="major-credits"></a>2.1. Major credits</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>David Ranch &lt;dranch at trinnet dot net&gt;: For encouraging me to write this HOWTO, his editorial comments on the first few revisions, and his contributions to various IPv6 testing results on my IPv6 web site. Also for his major reviews and suggestions.</p></li><li class="listitem"><p>Pekka Savola &lt;pekkas at netcore dot fi&gt;: For major reviews, input and suggestions.</p></li><li class="listitem"><p>Martin F. Krafft &lt;madduck at madduck dot net&gt;: For grammar checks and general reviewing of the document.</p></li><li class="listitem"><p>John Ronan &lt;j0n at tssg dot wit dot ie&gt;: For grammar checks.</p></li><li class="listitem"><p>Georg Käfer &lt;gkaefer at gmx dot at&gt;: For detection of no proper PDF creation (fixed now by LDP maintainer Greg Ferguson), input for German books, big list of URLs, checking all URLs, many more suggestions, corrections and contributions, and the German translation</p></li><li class="listitem"><p>Michel Boucey &lt;mboucey at free dot fr&gt;: Finding typos and some broken URLs, contribute some suggestions and URLs, and the French translation</p></li><li class="listitem"><p>Michele Ferritto &lt;m dot ferritto at virgilio dot it&gt;: Finding bugs and the Italian translation</p></li><li class="listitem"><p>Daniel Roesen &lt;dr at cluenet dot de&gt;: For grammar checks</p></li><li class="listitem"><p>Benjamin Thery &lt;benjamin dot thery at bull dot net&gt;: For contribution of updated mobility section</p></li><li class="listitem"><p>John Wenker &lt;jjw at pt dot com&gt;: major contribution to Programming using C-API</p></li><li class="listitem"><p>Srivats P. &lt;Srivats dot P at conexant dot com&gt;: major contribution for 4in6 tunnels</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp59383440"></a>2.2. Other credits</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp59384112"></a>2.2.1. Document technique related</h4></div></div></div><p>Writing a LDP HOWTO as a newbie (in LyX and exporting this to DocBook to conform to SGML) isn't as easy as some people say. There are some strange pitfalls... Nevertheless, thanks to:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Authors of the <a class="ulink" href="http://www.tldp.org/LDP/LDP-Author-Guide/" target="_top">LDP Author Guide</a></p></li><li class="listitem"><p>B. Guillon: For his <a class="ulink" href="http://perso.libertysurf.fr/bgu/doc/db4lyx/" target="_top">DocBook with LyX HOWTO</a></p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="content-related-credits"></a>2.2.2. Content related credits</h4></div></div></div><p>Credits for fixes and hints are listed here, will grow sure in the future</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>S .P. Meenakshi &lt;meena at cs dot iitm dot ernet dot in&gt;: For a hint using a &#8221;send mail&#8221; shell program on tcp_wrapper/hosts.deny</p></li><li class="listitem"><p>Frank Dinies &lt;FrankDinies at web dot de&gt;: For a bugfix on IPv6 address explanation</p></li><li class="listitem"><p>John Freed &lt;jfreed at linux-mag dot com&gt;: For finding a bug in IPv6 multicast address explanation</p></li><li class="listitem"><p>Craig Rodrigues &lt;crodrigu at bbn dot com&gt;: For suggestion about RHL IPv6 setup</p></li><li class="listitem"><p>Fyodor &lt;fyodor at insecure dot org&gt;: Note me about outdated nmap information</p></li><li class="listitem"><p>Mauro Tortonesi &lt;mauro at deepspace6 dot net&gt;: For some suggestions</p></li><li class="listitem"><p>Tom Goodale &lt;goodale at aei-potsdam dot mpg dot de&gt;: For some suggestions</p></li><li class="listitem"><p>Martin Luemkemann &lt;mluemkem at techfak dot uni-bielefeld dot de&gt;: For a suggestion</p></li><li class="listitem"><p>Jean-Marc V. Liotier &lt;jim at jipo dot com&gt;: Finding a bug</p></li><li class="listitem"><p>Yaniv Kaul &lt;ykaul at checkpoint dot com&gt;: Finding a bug</p></li><li class="listitem"><p>Arnout Engelen &lt;arnouten at bzzt dot net&gt;: For sending note about a draft was adopted to RFC now</p></li><li class="listitem"><p>Stephane Bortzmeyer &lt;bortzmeyer at nic dot fr&gt;: Contributing persistent configuration on Debian</p></li><li class="listitem"><p>lithis von saturnsys &lt;lithis at saturnsys dot com&gt;: Reporting a misaddressed URL</p></li><li class="listitem"><p>Guy Hulbert &lt;gwhulbert at rogers dot com&gt;: Send a note that RFC1924 is probably an April fool's joke</p></li><li class="listitem"><p>Tero Pelander &lt;tpeland at tkukoulu dot fi&gt;: Reporting a broken URL</p></li><li class="listitem"><p>Walter Jontofsohn &lt;wjontof at gmx dot de&gt;: Hints for SuSE Linux 8.0/8.1</p></li><li class="listitem"><p>Benjamin Hofstetter &lt;benjamin dot hofstetter at netlabs dot org&gt;: Reporting a mispointing URL</p></li><li class="listitem"><p>J.P. Larocque &lt;piranha at ely dot ath dot cx&gt;: Reporting archive URL for maillist users at ipv6 dot org</p></li><li class="listitem"><p>Jorrit Kronjee &lt;jorrit at wafel dot org&gt;: Reporting broken URLs</p></li><li class="listitem"><p>Colm MacCarthaigh &lt;colm dot maccarthaigh at heanet dot ie&gt;: Hint for sendfile issue on Apache2</p></li><li class="listitem"><p>Tiago Camilo &lt;tandre at ipg dot pt&gt;: Contribute some URLs about Mobile IPv6</p></li><li class="listitem"><p>Harald Geiger: Reporting a bug in how described the bit counting of the universal/global bit</p></li><li class="listitem"><p>Bjoern Jacke &lt;bjoern at j3e dot de&gt;: Triggered me to fix some outdated information on xinetd</p></li><li class="listitem"><p>Christoph Egger &lt;cegger at chrrr dot com&gt;: Sending note about &#8221;ip&#8221; has problems with IPv4-compatible addresses on SuSE Linux 9.0 and trigger to add a hint on 6to4-radvd example</p></li><li class="listitem"><p>David Lee Haw Ling &lt;hawling at singnet dot com dot sg&gt;: Sending information about a tunnel broker</p></li><li class="listitem"><p>Michael H. Warfield &lt;mhw at iss dot net&gt;: Sending note about suffix for 6to4 routers</p></li><li class="listitem"><p>Tomasz Mrugalski &lt;thomson at klub dot com dot pl&gt;: Sending updates for DHCPv6 section</p></li><li class="listitem"><p>Jan Minar &lt;jjminar at fastmail dot fm&gt;: Reporting minor bugs</p></li><li class="listitem"><p>Kalin KOZHUHAROV &lt;kalin at tar dot bz&gt;: Fixing a not so well explanation</p></li><li class="listitem"><p>Roel van Dijk &lt;rdvdijk at planet dot nl&gt;: Reporting broken URLs</p></li><li class="listitem"><p>Catalin Muresan &lt;catalin dot muresan at astral dot ro&gt;: Reporting minor bugs</p></li><li class="listitem"><p>Dennis van Dok &lt;dvandok at quicknet dot nl&gt;: Reporting minor bugs</p></li><li class="listitem"><p>Necdet Yucel &lt;nyucel at comu dot edu dot tr&gt;: Reporting broken URLs</p></li><li class="listitem"><p>Bryan Vukich: Reporting a broken URL</p></li><li class="listitem"><p>Daniele Masini: reporting a broken iptables example</p></li><li class="listitem"><p>Yao Zhao: reporting a bug in IPv6 route remove description</p></li><li class="listitem"><p>Aaron Kunde: reporting a broken URL and a content related bug</p></li><li class="listitem"><p>Larry W. Burton: speling fixes</p></li><li class="listitem"><p>Justin Pryzby: reporting broken shortcut description of BIND</p></li></ul></div></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp59409744"></a>3. The End</h2></div></div></div><p>Thanks for reading. Hope it helps!</p><p>If you have any questions, subscribe to proper <a class="link" href="#information-maillists" title="5. Maillists">maillist</a> and describe your problem providing as much as information as possible.</p></div></div></div></body></html>
