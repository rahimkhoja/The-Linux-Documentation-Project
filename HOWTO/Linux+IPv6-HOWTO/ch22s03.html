<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>3. Webserver Apache2 (httpd2)</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Linux IPv6 HOWTO (en)"><link rel="up" href="ch22.html" title="Chapter 22. Hints for IPv6-enabled daemons"><link rel="prev" href="ch22s02.html" title="2. Internet super daemon (xinetd)"><link rel="next" href="ch22s04.html" title="4. Router Advertisement Daemon (radvd)"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3. Webserver Apache2 (httpd2)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch22s02.html">Prev</a> </td><th width="60%" align="center">Chapter 22. Hints for IPv6-enabled daemons</th><td width="20%" align="right"> <a accesskey="n" href="ch22s04.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="hints-daemons-apache2."></a>3. Webserver Apache2 (httpd2)</h2></div></div></div><p>Apache web server supports IPv6 native by maintainers since 2.0.14. Available patches for the older 1.3.x series are not current and shouldn't be used in public environment, but available at <a class="ulink" href="ftp://ftp.kame.net/pub/kame/misc/" target="_top">KAME / Misc</a>.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp51461616"></a>3.1. Listening on IPv6 addresses</h3></div></div></div><p>Note: virtual hosts on IPv6 addresses are broken in versions until 2.0.28 (a patch is available for 2.0.28). But always try latest available version first because earlier versions had some security issues.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp51462736"></a>3.1.1. Virtual host listen on an IPv6 address only</h4></div></div></div><pre class="screen">
Listen [2001:0db8:100::1]:80
&lt;VirtualHost [2001:0db8:100::1]:80&gt;
        ServerName ipv6only.yourdomain.yourtopleveldomain
        # ...sure more config lines
&lt;/VirtualHost&gt;
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp51463872"></a>3.1.2. Virtual host listen on an IPv6 and on an IPv4 address</h4></div></div></div><pre class="screen">
Listen [2001:0db8:100::2]:80 
Listen 1.2.3.4:80
&lt;VirtualHost [2001:0db8:100::2]:80 1.2.3.4:80&gt;
        ServerName ipv6andipv4.yourdomain.yourtopleveldomain
        # ...sure more config lines
&lt;/VirtualHost&gt;
</pre><p>This should result after restart in e.g.</p><pre class="screen">
# netstat -lnptu |grep "httpd2\W*$" 
tcp 0 0 1.2.3.4:80          0.0.0.0:* LISTEN 12345/httpd2 
tcp 0 0 2001:0db8:100::1:80 :::*      LISTEN 12345/httpd2 
tcp 0 0 2001:0db8:100::2:80 :::*      LISTEN 12345/httpd2
</pre><p>For simple tests use the telnet example already shown.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp51466928"></a>3.1.3. Additional notes</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Apache2 supports a method called &#8221;sendfile&#8221; to speedup serving data. Some NIC drivers also support offline checksumming. In some cases, this can lead to connection problems and invalid TCP checksums. In this cases, disable &#8221;sendfile&#8221; either by recompiling using configure option &#8221;--without-sendfile&#8221; or by using the "EnableSendfile off" directive in configuration file.</p></li></ul></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch22s02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch22.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch22s04.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">2. Internet super daemon (xinetd) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 4. Router Advertisement Daemon (radvd)</td></tr></table></div></body></html>
