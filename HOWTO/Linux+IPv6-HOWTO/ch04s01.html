<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>1. IPv6-ready kernel</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Linux IPv6 HOWTO (en)"><link rel="up" href="ch04.html" title="Chapter 4. IPv6-ready system check"><link rel="prev" href="ch04.html" title="Chapter 4. IPv6-ready system check"><link rel="next" href="ch04s02.html" title="2. IPv6-ready network configuration tools"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">1. IPv6-ready kernel</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch04.html">Prev</a> </td><th width="60%" align="center">Chapter 4. IPv6-ready system check</th><td width="20%" align="right"> <a accesskey="n" href="ch04s02.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="systemcheck-kernel"></a>1. IPv6-ready kernel</h2></div></div></div><p>Modern Linux distributions already contain IPv6-ready kernels, the IPv6 capability is generally compiled as a module, but it's possible that this module is not loaded automatically on startup.</p><p>Note: you shouldn't anymore use kernel series 2.2.x, because it's not IPv6-up-to-date anymore. Also the IPv6 support in series 2.4.x is no longer improved according to definitions in latest RFCs. It's recommend to use series 2.6.x now.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp50550960"></a>1.1. Check for IPv6 support in the current running kernel</h3></div></div></div><p>To check, whether your current running kernel supports IPv6, take a look into your /proc-file-system. Following entry must exists: </p><pre class="screen">
/proc/net/if_inet6
</pre><p>A short automatical test looks like:</p><pre class="screen">
# test -f /proc/net/if_inet6 &amp;&amp; echo "Running kernel is IPv6 ready"
</pre><p>If this fails, it is quite likely, that the IPv6 module is not loaded.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp50553776"></a>1.2. Try to load IPv6 module</h3></div></div></div><p>You can try to load the IPv6 module executing</p><pre class="screen">
# modprobe ipv6
</pre><p>If this is successful, this module should be listed, testable with following auto-magically line:</p><pre class="screen">
# lsmod |grep -w 'ipv6' &amp;&amp; echo "IPv6 module successfully loaded"
</pre><p>And the check shown above should now run successfully.</p><p>Note: unloading the module is currently not supported and can result, under some circumstances, in a kernel crash.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp50556944"></a>1.2.1. Automatically loading of module</h4></div></div></div><p>Its possible to automatically load the IPv6 module on demand. You only have to add following line in the configuration file of the kernel module loader (normally /etc/modules.conf or /etc/conf.modules):</p><pre class="screen">
alias net-pf-10 ipv6  # automatically load IPv6 module on demand
</pre><p>It's also possible to disable automatically loading of the IPv6 module using following line</p><pre class="screen">
alias net-pf-10 off   # disable automatically load of IPv6 module on demand
</pre><p>Additional note: in kernels series 2.6.x, the module loader mechanism was changed. The new configuration file has to be named /etc/modprobe.conf instead of /etc/modules.conf.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp50560192"></a>1.3. Compile kernel with IPv6 capabilities</h3></div></div></div><p>If both above shown results were negative and your kernel has no IP6 support, than you have the following options:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Update your distribution to a current one which supports IPv6 out-of-the-box (recommended for newbies)</p></li><li class="listitem"><p>Compile a new vanilla kernel (easy, if you know which options you needed)</p></li><li class="listitem"><p>Recompile kernel sources given by your Linux distribution (sometimes not so easy)</p></li><li class="listitem"><p>Compile a kernel with USAGI extensions</p></li></ul></div><p>If you decide to compile a kernel, you should have previous experience in kernel compiling and read the <a class="ulink" href="http://www.tldp.org/HOWTO/Kernel-HOWTO.html" target="_top">Linux Kernel HOWTO</a>.</p><p>A comparison between vanilla and USAGI extended kernels is available on <a class="ulink" href="http://www.bieringer.de/linux/IPv6/status/IPv6+Linux-status-kernel.html" target="_top">IPv6+Linux-Status-Kernel</a>.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp50565312"></a>1.3.1. Compiling a vanilla kernel</h4></div></div></div><p>More detailed hints about compiling an IPv6-enabled kernel can be found e.g. on <a class="ulink" href="http://www.bieringer.de/linux/IPv6/IPv6-HOWTO/IPv6-HOWTO-2.html#kernel" target="_top">IPv6-HOWTO-2#kernel</a>.</p><p>Note: you should use whenever possible kernel series 2.6.x or above, because the IPv6 support in series 2.4.x only will no longer get backported features from 2.6.x and IPv6 support in series 2.2.x is hopeless outdated.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp50567632"></a>1.3.2. Compiling a kernel with USAGI extensions</h4></div></div></div><p>Same as for vanilla kernel, only recommend for advanced users, which are already familiar with IPv6 and kernel compilation. See also <a class="ulink" href="http://www.linux-ipv6.org/faq.html" target="_top">USAGI project / FAQ</a> and <a class="ulink" href="http://www.deepspace6.net/docs/best_ipv6_support.html" target="_top">Obtaining the best IPv6 support with Linux (Article)</a> (<a class="ulink" href="http://mirrors.bieringer.de/www.deepspace6.net/docs/best_ipv6_support.html" target="_top">Mirror</a>).</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp50570640"></a>1.4. IPv6-ready network devices</h3></div></div></div><p>Not all existing network devices have already (or ever) the capability to transport IPv6 packets. A current status can be found at <a class="ulink" href="http://www.bieringer.de/linux/IPv6/status/IPv6+Linux-status-kernel.html#transport" target="_top">IPv6+Linux-status-kernel.html#transport</a>.</p><p>A major issue is that because of the network layer structure of kernel implementation an IPv6 packet isn't really recognized by it's IP header number (6 instead of 4). It's recognized by the protocol number of the Layer 2 transport protocol. Therefore any transport protocol which doesn't use such protocol number cannot dispatch IPv6 packets. Note: the packet is still transported over the link, but on receivers side, the dispatching won't work (you can see this e.g. using tcpdump).</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp50573280"></a>1.4.1. Currently known never &#8221;IPv6 capable links&#8221;</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Serial Line IP (SLIP, <a class="ulink" href="http://www.faqs.org/rfcs/rfc1055.html" target="_top">RFC 1055 / SLIP</a>), should be better called now to SLIPv4, device named: slX</p></li><li class="listitem"><p>Parallel Line IP (PLIP), same like SLIP, device names: plipX</p></li><li class="listitem"><p>ISDN with encapsulation <span class="emphasis"><em>rawip</em></span>, device names: isdnX</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idp50576608"></a>1.4.2. Currently known &#8221;not supported IPv6 capable links&#8221;</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ISDN with encapsulation <span class="emphasis"><em>syncppp</em></span>, device names: ipppX (design issue of the ipppd, will be merged into more general PPP layer in kernel series 2.5.x)</p></li></ul></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch04.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch04.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch04s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 4. IPv6-ready system check </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 2. IPv6-ready network configuration tools</td></tr></table></div></body></html>
