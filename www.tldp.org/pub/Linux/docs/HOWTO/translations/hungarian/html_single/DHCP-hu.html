<HTML
><HEAD
>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-2">
<TITLE
>DHCP mini-HOGYAN</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"></HEAD
><BODY
CLASS="ARTICLE"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="ARTICLE"
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="TITLE"
><A
NAME="AEN2">DHCP mini-HOGYAN</H1
><H3
CLASS="AUTHOR"
><A
NAME="AEN4"
>Vladimir Vuksan</A
></H3
><DIV
CLASS="AFFILIATION"
><DIV
CLASS="ADDRESS"
><P
CLASS="ADDRESS"
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vuksan@veus.hr<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P
></DIV
></DIV
><DIV
CLASS="REVHISTORY"
><TABLE
WIDTH="100%"
BORDER="0"
><TR
><TH
ALIGN="LEFT"
VALIGN="TOP"
COLSPAN="3"
><B
>Verziótörténet</B
></TH
></TR
><TR
><TD
ALIGN="LEFT"
>Verzió: v4.12</TD
><TD
ALIGN="LEFT"
>2000 október 22.</TD
><TD
ALIGN="LEFT"
>Átdolgozta: vv</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
></TD
></TR
></TABLE
></DIV
><DIV
><DIV
CLASS="ABSTRACT"
><A
NAME="AEN15"><P
></P
><P
>      A dokumentum azokra az alapvetõ kérdésekre próbál választ adni, amelyek
      egy Linuxot futtató gép DHCP szerverként illetve kliensként való alkalmazásakor
      felmerülnek.
      </P
><P
></P
></DIV
></DIV
><HR></DIV
><DIV
CLASS="TOC"
><DL
><DT
><B
>Tartalomjegyzék</B
></DT
><DT
>1. <A
HREF="#AEN17"
>Bevezetés</A
></DT
><DD
><DL
><DT
>1.1. <A
HREF="#AEN19"
>Általános jogi nyilatkozat</A
></DT
><DT
>1.2. <A
HREF="#AEN24"
>A dokumentum új változatai</A
></DT
><DT
>1.3. <A
HREF="#AEN41"
>Visszajelzés</A
></DT
><DT
>1.4. <A
HREF="#AEN45"
>Közremûködõk</A
></DT
><DT
>1.5. <A
HREF="#AEN64"
>Szerzõi jog</A
></DT
><DT
>1.6. <A
HREF="#AEN69"
>Magyar fordítás</A
></DT
></DL
></DD
><DT
>2. <A
HREF="#AEN76"
>A DHCP protokoll</A
></DT
><DT
>3. <A
HREF="#AEN81"
>A kliens beállítása</A
></DT
><DD
><DL
><DT
>3.1. <A
HREF="#AEN84"
>A kliens démon letöltése (dhcpcd)</A
></DT
><DT
>3.2. <A
HREF="#SLACKWARE"
>Slackware</A
></DT
><DT
>3.3. <A
HREF="#REDHAT6"
>RedHat 6.x és Mandrake 6.x</A
></DT
><DT
>3.4. <A
HREF="#AEN173"
>RedHat 5.x</A
></DT
><DT
>3.5. <A
HREF="#AEN188"
>RedHat 4.x és Caldera OpenLinux 1.1/1.2</A
></DT
><DT
>3.6. <A
HREF="#DEBIAN"
>Debian</A
></DT
><DT
>3.7. <A
HREF="#AEN235"
>LinuxPPC és MkLinux</A
></DT
><DT
>3.8. <A
HREF="#NAMESERVER"
>Utolsó lépés</A
></DT
><DT
>3.9. <A
HREF="#AEN298"
>Különféle megjegyzések</A
></DT
><DT
>3.10. <A
HREF="#TROUBLESHOOTING"
>Hibaelhárítás</A
></DT
><DT
>3.11. <A
HREF="#AEN360"
>Alternatív DHCP kliens (ISC dhclient)</A
></DT
></DL
></DD
><DT
>4. <A
HREF="#AEN374"
>DHCP szerver beállítás</A
></DT
><DD
><DL
><DT
>4.1. <A
HREF="#DHCPSERVER"
>DHCP szerver UNIX rendszerekhez</A
></DT
><DT
>4.2. <A
HREF="#AEN386"
>DHCP szerver beállítás</A
></DT
><DT
>4.3. <A
HREF="#AEN407"
>DHCPd beállítások</A
></DT
><DT
>4.4. <A
HREF="#AEN425"
>A szerver indítása</A
></DT
><DT
>4.5. <A
HREF="#AEN443"
>Egyéb érdekes olvasnivalók</A
></DT
></DL
></DD
></DL
></DIV
><DIV
CLASS="SECT1"
><H2
CLASS="SECT1"
><A
NAME="AEN17">1. Bevezetés</H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="AEN19">1.1. Általános jogi nyilatkozat</H3
><P
>&#13;A szerzõ nem feltétlenül ért egyet a dokumentum teljes tartalmával.
Használd a saját felelõsségedre az összes elképzelést, példát és a dokumentum egyéb tartalmát.
Mivel ez a dokumentum egy újabb kiadása, elõfordulhatnak benne hibák
és pontatlanságok, amelyek esetleg kárt tehetnek a rendszeredben.
Ezen figyelmeztetés után olvasd tovább, és bár nagyon sajnálatos,
mindezekért semmilyen felelõsséget nem vállalok.</P
><P
>Azt is tartsd észben, hogy ez <EM
>NEM</EM
> hivatalos információ.
A dokumentum legnagyobb része feltételezés, amelyre az emberek munkájuk
során jutottak. Az információkat saját felelõsségedre használd.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN24">1.2. A dokumentum új változatai</H3
><P
>A dokumentum új változata megtalálható a következõ helyen:</P
><P
><A
HREF="http://www.oswg.org/oswg-nightly/DHCP.html"
TARGET="_top"
>http://www.oswg.org/oswg-nightly/DHCP.html</A
></P
><P
>A DHCP mini-HOGYAN következõ fordításai érhetõk el:</P
><P
></P
><UL
><LI
><P
>kínai - <A
HREF="http://www.linux.org.tw/CLDP/mini/DHCP.html"
TARGET="_top"
>http://www.linux.org.tw/CLDP/mini/DHCP.html</A
></P
></LI
><LI
><P
>japán - <A
HREF="http://www.linux.or.jp/JF/JFdocs/DHCP.html"
TARGET="_top"
>http://www.linux.or.jp/JF/JFdocs/DHCP.html</A
></P
></LI
><LI
><P
>spanyol - <A
HREF="ftp://cuates.pue.upaep.mx/pub/linux/LuCAS/DHCP-mini-Como/"
TARGET="_top"
>ftp://cuates.pue.upaep.mx/pub/linux/LuCAS/DHCP-mini-Como/</A
></P
></LI
></UL
><P
>Az engedélyt ezennel minden olyan személynek megadom, aki szeretné
lefordítani ezt a dokumentumot a saját nyelvére. Mindössze azt kérem,
hogy készíts egy hivatkozást erre a dokumentumra, valamint tudasd
velem a fordításod URL címét, hogy itt közölhessem azt.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN41">1.3. Visszajelzés</H3
><P
>Szívesen fogadok visszajelzést ezzel a dokumentummal kapcsolatban.
A beadványaitok és észrevételeitek nélkül ez a dokumentum
nem létezne. Szóval kiegészítéseiteket, megjegyzéseiteket
és kritikátokat küldjétek a <TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:vuksan-feedback@veus.hr"
>vuksan-feedback@veus.hr</A
>&#62;</TT
> címre.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN45">1.4. Közremûködõk</H3
><P
>Ez a dokumentum a Paul Makeev által készített eredeti
változat módosítása.</P
><P
>A következõ emberek mûködtek közre ezen mini-HOGYAN elkészítésében:</P
><P
></P
><UL
><LI
><P
>Heiko Schlittermann</P
></LI
><LI
><P
>Jonathan Smith</P
></LI
><LI
><P
>Dan Khabaza</P
></LI
><LI
><P
>Hal Sadofsky</P
></LI
><LI
><P
>Henrik Stoerner</P
></LI
><LI
><P
>Paul Rossington</P
></LI
><LI
><P
>és még sokan mások</P
></LI
></UL
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN64">1.5. Szerzõi jog</H3
><P
>Eme dokumentum szerzõi jogait (c) 1998 Vladimir Vuksan birtokolja, a dokumentum
az OpenContent License (OPL) feltételei szerint terjeszthetõ. A licenc
teljes szövegét megtalálod a következõ honlapon:</P
><P
><A
HREF="http://www.opencontent.org/opl.shtml"
TARGET="_top"
>http://www.opencontent.org/opl.shtml</A
></P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN69">1.6. Magyar fordítás</H3
><P
>A magyar fordítást <A
HREF="mailto:laca@janus.gimsz.sulinet.hu_NO_SPAM"
TARGET="_top"
>Szíjjártó László</A
> készítette (2002.07.17).
A lektorálást <A
HREF="mailto:souly1@freemail.hu_NO_SPAM"
TARGET="_top"
>Kilián Magdolna</A
> végezte el (2003.01.22).
Bármilyen fordítással kapcsolatos észrevételt a <A
HREF="mailto:linuxhowto@sch.bme.hu_NO_SPAM"
TARGET="_top"
>linuxhowto@sch.bme.hu</A
> címre küldjetek.
A dokumentum legfrissebb változata megtalálható a <A
HREF="http://tldp.fsf.hu/index.html"
TARGET="_top"
>Magyar Linux Dokumentációs Projekt</A
> honlapján.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="AEN76">2. A DHCP protokoll</H2
><P
>Egy dinamikus, számítógépek beállítására szolgáló (Dinamic Host
Configuration) protokoll. A kliensek legfontosabb hálózati beállításainak
vezérlésére szolgál, a szerver segítségével. A DHCP visszafelé kompatibilis a
BOOTP protokollal. További információért olvasd el az RFC 2131 (a régi RFC 1541)
és más dokumentumokat. (Például a doksi végén található Internetes Források
fejezetet). Ezen kívül ajánlatos elolvasni a
<A
HREF="http://web.syr.edu/~jmwobus/comfaqs/dhcp.faq.html"
TARGET="_top"
>http://web.syr.edu/~jmwobus/comfaqs/dhcp.faq.html</A
> honlapot.</P
><P
>Ez a mini-HOGYAN mind a DHCP _SERVER_ démonnal, mind a DHCP _KLIENS_ démonnal foglalkozik. 
A legtöbb felhasználónak a kliens démonra van szüksége, amit a munkaállomások használnak arra, 
hogy a szervertõl lekérjék a hálózati információkat. A szerver démont a rendszergazdák használják, 
hogy ezeket az információkat közzétegyék a hálózaton belül, ezért ha hétköznapi felhasználó
vagy, akkor csak a _KLIENS_ démonra van szükséged.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="AEN81">3. A kliens beállítása</H2
><P
>Jelenleg három különbözõ DHCP kliens létezik Linuxra: a dhcpcd, a pump és a
dhclient. Ez a mini-HOGYAN elsõsorban a dhcpcd démonnal foglalkozik.</P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN84">3.1. A kliens démon letöltése (dhcpcd)</H3
><P
>A Linux összeállításodtól függõen lehet, hogy le kell töltened a 
DHCP kliens-démont. Ha a forrásból le is akarod fordítani, 
akkor a csomag neve dhcpcd lesz , és az aktuális verzió az 1.3.18 XXX. 
A csomag karbantartója Sergei Viznyuk <TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:sergei@phystech.com"
>sergei@phystech.com</A
>&#62;</TT
> , 
és manapság a legtöbb Linux összeállításban bináris - lefordított - változatban is hozzáférhetõ.</P
><P
>A dhcpcd forráskódját a következõ helyekrõl töltheted le:</P
><P
></P
><UL
><LI
><P
><A
HREF="ftp://ftp.phystech.com/pub/"
TARGET="_top"
>ftp://ftp.phystech.com/pub/</A
> (elsõdleges lelõhely)</P
></LI
><LI
><P
><A
HREF="http://www.cps.msu.edu/~dunham/out/"
TARGET="_top"
>http://www.cps.msu.edu/~dunham/out/</A
></P
></LI
></UL
><P
>Majd kövesd az alábbi útmutatást.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="SLACKWARE">3.2. Slackware</H3
><P
>&#13;A DHCPcd program legutolsó változatát letöltheted egy Metalab tükörszerverrõl
vagy a következõ helyekrõl:</P
><P
></P
><UL
><LI
><P
><A
HREF="ftp://metalab.unc.edu/pub/Linux/system/network/daemons"
TARGET="_top"
>ftp://metalab.unc.edu/pub/Linux/system/network/daemons</A
></P
></LI
><LI
><P
><A
HREF="ftp://ftp.phystech.com/pub/"
TARGET="_top"
>ftp://ftp.phystech.com/pub/</A
> (elsõdleges hely)</P
></LI
></UL
><P
>Töltsd le a <TT
CLASS="FILENAME"
>dhcpcd.tar.gz</TT
> legutolsó változatát.</P
><P
></P
><UL
><LI
><P
>Csomagold ki</P
><P
><B
CLASS="COMMAND"
>tar -zxvf dhcpcd-1.3.18pl1.tar.gz</B
></P
></LI
><LI
><P
>Lépj be a létrejött könyvtárba és fordítsd le</P
><P
><B
CLASS="COMMAND"
>cd dhcpcd-1.3.18pl1</B
></P
><P
><B
CLASS="COMMAND"
>make</B
></P
></LI
><LI
><P
>Ezek után telepítsd (a következõ parancsot rendszergazdaként futtasd)</P
><P
><B
CLASS="COMMAND"
>make install</B
></P
></LI
></UL
><P
>Ez a parancs létrehozza a /etc/dhcpc könyvtárat, ahol a démon az információit
tárolja, a dhcpcd bináris fájl pedig a /usr/sbin könyvtárba kerül.</P
><P
>Ahhoz, hogy a rendszer a induláskor a DHCP szolgáltatást elindítsa, gépeld be:</P
><P
><B
CLASS="COMMAND"
>cd /etc/rc.d</B
></P
><P
><B
CLASS="COMMAND"
>mv rc.inet1 rc.inet1.OLD</B
></P
><P
>Ez a régi beállítószkriptet átnevezi
<TT
CLASS="FILENAME"
>rc.inet1.OLD</TT
>-ra.
Ezek után el kell készítened az új <TT
CLASS="FILENAME"
>rc.inet1</TT
> szkriptet.
A következõ kódrészletre van szükség:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>#!/bin/sh
#
# rc.inet1      Ez a shell szkript indítja az alapértelmezett INET rendszert.

HOSTNAME=`cat /etc/HOSTNAME` #Ez talán nem szükséges, de én mindig
                             #benne hagyom.

# A loopback eszköz beállítása.
/sbin/ifconfig lo 127.0.0.1
/sbin/route add -net 127.0.0.0 netmask 255.0.0.0 lo

# HA ETHERNET KAPCSOLATOD VAN, használd a következõ sorokat az eth0
# eszköz beállítására. Ha csak a loopback-et vagy SLIP-et használsz,
# ne hagyd meg a fájl további sorait.

/usr/sbin/dhcpcd</PRE
></FONT
></TD
></TR
></TABLE
><P
>Mentsd el és indítsd újra a gépet.</P
><P
>Amikor kész vagy, ugorj az <A
HREF="#NAMESERVER"
>utolsó lépésre</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="REDHAT6">3.3. RedHat 6.x és Mandrake 6.x</H3
><P
>A RedHat 6+ alatt a DHCPcd beállítása nagyon egyszerû. A grafikus felületen indítsd el a
Control Panelt (ha nincs menüben, akkor X terminálról a <B
CLASS="COMMAND"
>control-panel</B
> paranccsal, majd:.</P
><P
></P
><UL
><LI
><P
>Válaszd ki a "Network Configuration" menüpontot</P
></LI
><LI
><P
>Kattints az "Interfaces"-re</P
></LI
><LI
><P
>Kattints az "Add"-ra</P
></LI
><LI
><P
>Válaszd ki az "Ethernet"-et</P
></LI
><LI
><P
>Az "Edit Ethernet/Bus Interface" alatt válaszd ki az "Activate interface at
boot time" lehetõséget, valamint a "DHCP"-t, mint "Interface
configuration protocol"-t</P
></LI
></UL
><P
>Figyelem: a RedHat 6.x verziók az alapértelmezettként nem a dhcpcd démont, hanem a
pump kliens programot tartalmazzák. A telepítõ CD tartalmazza a dhcpcd csomagot, ezért
ha nincs szerencséd a pump programmal, próbáld a dhcpcd programot. Miután telepítetted
(pl. <B
CLASS="COMMAND"
>rpm -i dhcpcd-1.3.17pl2-1.i386.rpm</B
>),
néhány <A
HREF="#LINUXPPC-RH6"
>változtatást</A
> kell eszközölnöd.</P
><P
>Alexander Stevenson további megjegyzései
<TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:alexander.stevenson@home.com"
>alexander.stevenson@home.com</A
>&#62;</TT
>:</P
><P
>Nem volt szerencsém a DHCPcd démonnal. Ami végül bejött, az a RedHat 6.0 pump programja volt,
ami gondolom a többi RedHat verzióban is benne van. A következõ parancsot
használtam:</P
><P
><B
CLASS="COMMAND"
>pump -i eth0 -h hostname</B
></P
><P
>Mindegy, hogy a "hostname" mi volt, de e nélkül a szerver nem fog 
válaszolni.</P
><P
>Ezek után megváltoztattam a <TT
CLASS="FILENAME"
>/sbin/ifup</TT
> szkriptemet, hogy tükrözze a változást;
az alapértelmezett verzió nem tartalmazta a -h kapcsolót, ezért nem is mûködött
nálam.</P
><P
>Alapvetõen, ha a linuxconf-ot használod, és a csatoló "DHCP"-re való átállítása
után az nem mûködik, próbáld ki, hogy a  "<B
CLASS="COMMAND"
>-h
hostname</B
>" kapcsolót hozzáadod a pump sorához a
<TT
CLASS="FILENAME"
>/sbin/ifup</TT
> szkriptben. Az enyém így néz ki:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>...
if [ -n "$PUMP" ]; then
    echo -n "Determining IP information for $DEVICE..."
    if /sbin/pump -i $DEVICE -h hostname; then
        echo " done."
    else
        echo " failed."
        exit 1
    fi
else ...</PRE
></FONT
></TD
></TR
></TABLE
><P
>Egy másik, még elegánsabb módszert a hostname mezõ hozzáadásához Aad van der Klaauw ajánlott:</P
><P
>Most állítok be egy átjárót otthon, be kell állítanom
a MAC address-t a '-h hostname' használata nélkül. Ezért elhatároztam,
hogy *nem* változtatom meg a szkriptet, hanem a konfigurációs fájlt használom.
Az /etc/sysconfig/network-scripts/ifcfg-eth0 fájlhoz hozzáadtam a következõ sorokat:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>DEVICE="eth0"
MACADDR="00:11:22:33:44:55"
DHCP_HOSTNAME="trigger_for_terayon"</PRE
></FONT
></TD
></TR
></TABLE
><P
>Ez túl fogja élni a frissítéseket, és szerintem ez egy "tiszta" módszer.</P
><P
>Ennyi az egész. Indítsd újra a gépet vagy add ki a <B
CLASS="COMMAND"
>/sbin/ifup eth0</B
> parancsot.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN173">3.4. RedHat 5.x</H3
><P
>A DHCPcd beállítása Redhat 5.0+ alatt nagyon könnyû. A grafikus felületen indítsd el a Control Panelt
(ha nincs menüben, akkor X terminálról a <B
CLASS="COMMAND"
>control-panel</B
> paranccsal), majd:.</P
><P
></P
><UL
><LI
><P
>Válaszd ki a "Network Configuration" menüpontot</P
></LI
><LI
><P
>Kattints az "Interfaces" gombra</P
></LI
><LI
><P
>Válaszd ki az "Ethernet"-et</P
></LI
><LI
><P
>Az "Edit Ethernet/Bus Interface" alatt válaszd ki az "Activate interface at
boot time" lehetõséget, valamint a "DHCP" -t, mint "Interface configuration
protocol"-t.</P
></LI
></UL
><P
>Amikor kész vagy, ugorj az <A
HREF="#NAMESERVER"
>utolsó lépésre</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN188">3.5. RedHat 4.x és Caldera OpenLinux 1.1/1.2</H3
><P
>A DHCPcd csomagot tartalmazza a RedHat standard disztribúció mint RPM és megtalálhatód
a disztribúciós cd-n az RPMS könyvtárban vagy letöltheted a következõ csomagot:</P
><P
><A
HREF="ftp://ftp.redhat.com/pub/redhat/redhat-4.2/i386/RedHat/RPMS/dhcpcd-0.6-2.i386.rpm"
TARGET="_top"
>ftp://ftp.redhat.com/pub/redhat/redhat-4.2/i386/RedHat/RPMS/dhcpcd-0.6-2.i386.rpm</A
></P
><P
>Telepítsd a következõ paranccsal: <B
CLASS="COMMAND"
>rpm -i dhcpcd-0.6-2.i386.rpm</B
>.</P
><P
>De a saját verziódat a
következõ lépésekkel is fordíthatod a <A
HREF="#SLACKWARE"
><I
>Slackware</I
></A
>nél kiemelt sorokat követve...</P
><P
>A következõ információt nothing szolgáltatta
<TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:nothing@cc.gatech.edu"
>nothing@cc.gatech.edu</A
>&#62;</TT
>.</P
><A
NAME="AEN199"><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>Eltávolítottam az állandó IP-címemet és nevemet a
<TT
CLASS="FILENAME"
>/etc/resolv.conf</TT
> könyvtárból. De ott hagytam a keresõ sorban és a két névszerverem sorát is
(valamiért a dhcpcd csomagom sose hozza létre az <TT
CLASS="FILENAME"
>/etc/dhcpc/resolv.conf</TT
> fájlt, így az
állandó <TT
CLASS="FILENAME"
>/etc/resolv.conf</TT
>) fájlt kell használnom.</P
><P
>Az <TT
CLASS="FILENAME"
>/etc/sysconfig/network</TT
> fájlból eltávolítottam a HOSTNAME
és GATEWAY bejegyzéseket. A többit hagytam ahogy volt (NETWORKING,
DOMAINNAME, GATEWAYDEV).</P
><P
>Az <TT
CLASS="FILENAME"
>/etc/sysconfig/network-scripts/ifcfg-eth0</TT
> fájlból
eltávolítottam az IPADDR, NETMASK, NETWORK, és BROADCAST bejegyzéseket. A
DEVICE és ONBOOT bejegyzéseket változatlanul hagytam.  Megváltoztattam a BOOTPROTO sort
BOOTPROTO=dhcp sorra.</P
><P
>Mentsd el a fájlt és indítsd újra a gépet.</P
></BLOCKQUOTE
><P
>Amikor kész vagy, ugorj az <A
HREF="#NAMESERVER"
>utolsó lépésre</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="DEBIAN">3.6. Debian</H3
><P
>DHCPcd csomagot a Debianhoz a következõ helyen találsz:</P
><P
><A
HREF="http://ftp.debian.org/debian/dists/slink/main/binary-i386/net/"
TARGET="_top"
>http://ftp.debian.org/debian/dists/slink/main/binary-i386/net/</A
></P
><P
>Vagy kövesd a <A
HREF="#SLACKWARE"
><I
>Slackware</I
></A
> telepítésénél megadott utasításokat. </P
><P
>A deb csomag telepítéséhez használd a <B
CLASS="COMMAND"
>dpkg -i /where/ever/your/debian/packages/are/dhcpcd*deb</B
> parancsot.</P
><P
>Úgy néz ki, hogy semmilyen konfigurációra nem lesz szükség:</P
><A
NAME="AEN221"><TABLE
BORDER="0"
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
CLASS="BLOCKQUOTE"
><TR
><TD
WIDTH="10%"
VALIGN="TOP"
>&nbsp;</TD
><TD
WIDTH="80%"
VALIGN="TOP"
><P
>A dhcpcd csomag az indítószkriptjeit a Debian csomagjainál megszokott módon az 
<TT
CLASS="FILENAME"
>/etc/init.d/<TT
CLASS="REPLACEABLE"
><I
>csomag_neve</I
></TT
></TT
> könyvtárba telepíti,
jelen esetben ez az <TT
CLASS="FILENAME"
>/etc/init.d/dhcpcd</TT
>,
és ezt linkeli a különbözõ <TT
CLASS="FILENAME"
>/etc/rc?.d/</TT
> könyvtárakhoz.  </P
></TD
><TD
WIDTH="10%"
VALIGN="TOP"
>&nbsp;</TD
></TR
><TR
><TD
COLSPAN="2"
ALIGN="RIGHT"
VALIGN="TOP"
>--<SPAN
CLASS="ATTRIBUTION"
>Írta: Heiko Schlittermann
<TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:heiko@os.inf.tu-dresden.de"
>heiko@os.inf.tu-dresden.de</A
>&#62;</TT
></SPAN
></TD
><TD
WIDTH="10%"
>&nbsp;</TD
></TR
></TABLE
><P
>Az <TT
CLASS="FILENAME"
>/etc/rc?.d/</TT
> könyvtárak tartalma minden induláskor végrehajtódik.</P
><P
>Ha nem 
akarod újraindítani a gépet, akkor kézzel kell elindítanod a démont az <B
CLASS="COMMAND"
>/etc/init.d/dhcpcd start</B
> paranccsal.</P
><P
>Amikor végeztél, menj az <A
HREF="#NAMESERVER"
>utolsó lépésre</A
>. </P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN235">3.7. LinuxPPC és MkLinux</H3
><P
>A következõ részt R. Shapiro írta: </P
><P
>Az "1999" (R5) kiadású LinuxPPC majdnem teljesen 
kompatibilis a RedHat 6-tal, egy kivétellel (lásd alább). 
Általánosságban a beállítás ugyanaz, mint a
<A
HREF="#REDHAT6"
><I
>RedHat 6.x és Mandrake 6.x</I
></A
> esetében.</P
><P
>A probléma az, hogy a RedHat 6 a pump klienst használja a DHCP-hez 
alapértelmezettként, ami viszont nem mûködik megbízhatóan a LinuxPPC alatt.  <A
NAME="LINUXPPC-RH6"
></A
>A megoldáshoz telepítsd a legfrissebb Sergei Viznyuk-féle dhcpcd démont, 
és szerkeszd át az
<TT
CLASS="FILENAME"
>/sbin/ifup</TT
> szkriptet, hogy a <B
CLASS="COMMAND"
>dhcpcd</B
> klienst
használja a <B
CLASS="COMMAND"
>pump</B
> helyett. </P
><P
>Változtasd meg ezt:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>if [ "$BOOTPROTO" = bootp -o "$BOOTPROTO" = dhcp ]; then
     PUMP=true
 fi

 if [ -n "$PUMP" ]; then</PRE
></FONT
></TD
></TR
></TABLE
><P
>erre:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
> if [  "$BOOTPROTO" = bootp ]; then
       echo " done."
     else
       echo " failed."
       exit 1
     fi
 elif [ "$BOOTPROTO" = dhcp ]; then
     echo -n "Determining IP information for $DEVICE..."
     if /sbin/dhcpcd -d $DEVICE ; then
       if [ -f /etc/dhcpc/dhcpcd-${DEVICE}.exe ]; then
           /etc/dhcpc/dhcpcd-${DEVICE}.exe
       fi</PRE
></FONT
></TD
></TR
></TABLE
><P
>valamint ennek  megfelelõen a <B
CLASS="COMMAND"
>ifdown</B
> szkriptben, ezt:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>if [ "$BOOTPROTO" = bootp -o "$BOOTPROTO" = dhcp ]; then
....
fi</PRE
></FONT
></TD
></TR
></TABLE
><P
>erre:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>if [ "$BOOTPROTO" = bootp ]; then
fi

if [ "$BOOTPROTO" = dhcp ]; then
      if [ -f /var/run/dhcpcd-${DEVICE}.pid ]; then
              kill `cat /var/run/dhcpcd-${DEVICE}.pid`
              rm -f /var/run/dhcpcd-${DEVICE}.pid
      fi
fi</PRE
></FONT
></TD
></TR
></TABLE
><P
>Egy mûködõ PPC rpm a dhcpcd-hez megtalálható a LinuxPPC 1999 CD-n; egy kissé 
késõbbi rpm pedig a "contrib" könyvtárban a
<A
HREF="ftp://ftp.linuxppc.org/"
TARGET="_top"
>ftp://ftp.linuxppc.org/</A
> címen.
A forráskódot - amelybõl ez a csomag készült - megtalálod a <A
HREF="ftp://ftp.phystech.com/pub/dhcpcd-1.3.17-pl9.tar.gz"
TARGET="_top"
>ftp://ftp.phystech.com/pub/dhcpcd-1.3.17-pl9.tar.gz</A
> helyen.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="NAMESERVER">3.8. Utolsó lépés</H3
><P
>Miután a géped újraindult, a hálózati eszközödnek már mûködõképesnek kell lennie.
Gépeld be: <B
CLASS="COMMAND"
>ifconfig</B
>.</P
><P
>Valami hasonlónak kell megjelennie a képernyõn:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>          lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Bcast:127.255.255.255  Mask:255.0.0.0
          UP BROADCAST LOOPBACK RUNNING  MTU:3584  Metric:1
          RX packets:302 errors:0 dropped:0 overruns:0 frame:0
          TX packets:302 errors:0 dropped:0 overruns:0 carrier:0 coll:0

eth0      Link encap:Ethernet  HWaddr 00:20:AF:EE:05:45
          inet addr:24.128.53.102  Bcast:24.128.53.255  Mask:255.255.254.0
          ^^^^^^^^^^^^^^^^^^^^^^^
          UP BROADCAST NOTRAILERS RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:24783 errors:1 dropped:1 overruns:0 frame:1
          TX packets:11598 errors:0 dropped:0 overruns:0 carrier:0 coll:96
          Interrupt:10 Base address:0x300 </PRE
></FONT
></TD
></TR
></TABLE
><P
>Ha valamilyen normális számot látsz az <TT
CLASS="LITERAL"
>inet addr</TT
> mellett, akkor készen vagy. 
Ha azt látod: 0.0.0.0 , ne ess kétségbe, ez egy átmeneti beállítás, mielõtt a
<B
CLASS="COMMAND"
>dhcpcd</B
> lekérné
az IP címet. Ha néhány perc múlva is ezt látod, kérlek nézd meg 
a <A
HREF="#TROUBLESHOOTING"
><I
>Hibaelhárítás</I
></A
> fejezetet. A DHCPcd egy démon, 
és addig fut, míg a géped mûködik. Három óránként kapcsolatba lép a 
DHCP szerverrel, és próbálja megújítani az IP cím-kérést. Minden üzenetét
 a rendszernaplóban tárolja ( a Slakware-nél 
<TT
CLASS="FILENAME"
>/var/adm/syslog</TT
>, RedHat/OpenLinux esetén 
<TT
CLASS="FILENAME"
>/var/log/syslog</TT
>).</P
><P
>Még egy dolog. Meg kell adnod a névszervereidet is. Ezt kétféleképpen teheted meg; 
vagy megkérdezed a szolgáltatódat, hogy adja meg, és beírod az
<TT
CLASS="FILENAME"
>/etc/resolv.conf</TT
> fájlba (pl. egy ilyen sort kell beírni: 
nameserver 1.2.3.4 - a ford.), vagy a DHCPcd fogja 
lekérni a szervertõl a listát, és készít egy
<TT
CLASS="FILENAME"
>resolv.conf</TT
> fájlt az <TT
CLASS="FILENAME"
>/etc/dhcpc</TT
> könyvtárban.</P
><P
>Én úgy döntöttem, hogy a DHCPcd <TT
CLASS="FILENAME"
>resolv.conf</TT
> fájlját használom:</P
><P
>Készíts biztonsági másolatot az <TT
CLASS="FILENAME"
>/etc/resolv.conf</TT
> fájlról: <B
CLASS="COMMAND"
>mv /etc/resolv.conf
/etc/resolv.conf.OLD</B
></P
><P
>Ha még nincs <TT
CLASS="FILENAME"
>/etc/dhcpc</TT
> könyvtárad, 
készíts egyet: <B
CLASS="COMMAND"
>mkdir /etc/dhcpc</B
></P
><P
>Készíts egy hivatkozást (link) az <TT
CLASS="FILENAME"
>/etc/dhcpc/resolv.conf</TT
> fájlról az
<TT
CLASS="FILENAME"
>/etc/resolv.conf</TT
> fájlra: <B
CLASS="COMMAND"
>ln -s
/etc/dhcpc/resolv.conf /etc/resolv.conf</B
></P
><P
>Ha ez nem mûködne, próbáld ki a következõket (a megoldást 
<TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:nothing@cc.gatech.edu"
>nothing@cc.gatech.edu</A
>&#62;</TT
> ajánlotta Henrik
Stoerner közremûködésével): </P
><A
NAME="ERROR3"
></A
><P
>"Ezt az utolsó lépést csak azért csináltam , mert az én dhcpcd csomagom nem készítette 
el az <TT
CLASS="FILENAME"
>/etc/dhcpc/resolv.conf</TT
> fájlt. Az <TT
CLASS="FILENAME"
>/etc/sysconfig/network-scripts/ifup</TT
> fájlban
a következõket módosítottam (nem szépségdíjas, 
de nekem mûködött): </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>elif [ "$BOOTPROTO" = dhcp -a "$ISALIAS" = no ]; then
    echo -n "Using DHCP for ${DEVICE}... "
    /sbin/dhcpcd -c /etc/sysconfig/network-scripts/ifdhcpc-done ${DEVICE}
    echo "echo \$$ &#62; /var/run/dhcp-wait-${DEVICE}.pid; exec sleep 30" | sh

    if [ -f /var/run/dhcp-wait-${DEVICE}.pid ]; then
	^^^^
        echo "failed."
        exit 1</PRE
></FONT
></TD
></TR
></TABLE
><P
>Ezt megváltoztattam erre:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>elif [ "$BOOTPROTO" = dhcp -a "$ISALIAS" = no ]; then
    echo -n "Using DHCP for ${DEVICE}... "
    /sbin/dhcpcd
    echo "echo \$$ &#62; /var/run/dhcp-wait-${DEVICE}.pid; exec sleep 30" | sh

    if [ ! -f /var/run/dhcp-wait-${DEVICE}.pid ]; then
	^^^^^^
       echo "failed."
       exit 1</PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.gif"
HSPACE="5"
ALT="Megjegyzés"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Jegyezd meg, hogy ott a ! (felkiáltójel) a következõ sorban: <TT
CLASS="LITERAL"
>if [ ! -f
/var/run/dhcp-wait-${DEVICE}.pid ];</TT
></P
></TD
></TR
></TABLE
></DIV
><P
>Most dõlj hátra és örülj :-). </P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN298">3.9. Különféle megjegyzések</H3
><P
>A következõ lépés(ek) nem szükségesek, de hasznosak lehetnek néhány felhasználó 
számára:</P
><P
></P
><OL
TYPE="a"
><LI
><P
>Ha csak néha van szükséged a <B
CLASS="COMMAND"
>dhcpcd</B
> démonra, 
indíthatod kézzel is a parancssorból 
(ehhez root jogokkal kell rendelkezned): <B
CLASS="COMMAND"
>/usr/sbin/dhcpcd</B
>.</P
><P
>Ha le kell állítanod a hálózatot, akkor pedig add ki a
<B
CLASS="COMMAND"
>/usr/sbin/dhcpcd -k</B
> parancsot.</P
></LI
></OL
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="TROUBLESHOOTING">3.10. Hibaelhárítás</H3
><P
>Ha követted a fenti lépéseket, és mégsem tudsz a hálózaton dolgozni, akkor íme 
néhány lehetséges megoldás:</P
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="AEN311">3.10.1. A hálózati kártyád nincs jól beállítva</H4
><P
>Az induláskor a Linuxod teszteli a hálózati kártyát és valami hasonlót írhat ki:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>eth0: 3c509 at 0x300 tag 1, 10baseT port, address  00 20 af ee 11 11, IRQ 10.
3c509.c:1.07 6/15/95 becker@cesdis.gsfc.nasa.gov</PRE
></FONT
></TD
></TR
></TABLE
><P
>Ha ilyen sor nincs az üzenetek között (késõbb a dmesg parancs kiadásával is meg 
lehet nézni - a ford.), akkor a hálózati kártyádat nem ismerte fel az operációs 
rendszer. Ha hagyományos NE2000 kompatibilis kártyád van, akkor kapnod kell 
vele egy lemezt DOS programokkal, amelyekkel be tudod állítani a kártyát. 
Próbálkozz az IRQ-kal és a memóriacímekkel, amíg a Linux fel nem ismeri 
(általában az IRQ 9, 10, 12 jók).</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="AEN316">3.10.2. A DHCP szerver az RFC 1541-et támogatja/a szerver Windows NT 
rendszeren fut</H4
><P
>Próbáld meg a <B
CLASS="COMMAND"
>dhcpcd</B
> démont a <B
CLASS="COMMAND"
>dhcpcd -r</B
> paranccsal futtatni.</P
><P
>Használd az <B
CLASS="COMMAND"
>ifconfig</B
> programot, hogy ellenõrizd a beállítások helyességét (adj 
néhány percet a beállítási folyamatnak, elõször azt fogja mondani, 
hogy <TT
CLASS="LITERAL"
>Inet.addr=0.0.0.0</TT
>)</P
><P
>Ha ez megoldja a problémát, akkor add hozzá az "-r" kapcsolót az indítófájlokhoz, 
a például <B
CLASS="COMMAND"
>/sbin/dhcpcd</B
> helyett legyen
<B
CLASS="COMMAND"
>/sbin/dhcpcd -r</B
>.</P
><P
>RedHat alatt szerkeszd át az
<TT
CLASS="FILENAME"
>/etc/sysconfig/network-scripts/ifup</TT
>
szkriptet a következõ módon:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>        IFNAME=$[ {DEVICE} \
        "/sbin/dhcpcd -r -c /etc/"- etc etc.    </PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="AEN330">3.10.3. A rendszer indulásakor a következõ hibaüzenetet kapom: "Using DHCP for 
eth0...failed", viszont a rendszer jól mûködik</H4
><P
>Valószínûleg RedHat-ot használsz, és nem követted  rendesen a fenti 
instrukciókat :) A felkiáltójel hiányzik valamelyik utasításból. 
Nézd meg <A
HREF="#ERROR3"
>itt</A
>, hogyan kell jól beállítani.</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="AEN334">3.10.4. A hálózat néhány percig jól mûködik, 
de aztán nem válaszol</H4
><P
>Néhány visszajelzés szerint a gated (a gateway démon) összegubancolja az 
útválasztást a fenti problémával küzdõ gépeken. Ellenõrizd, 
hogy fut-e a gated a <B
CLASS="COMMAND"
>ps -auxww | grep gate</B
> parancs futtatásával.</P
><P
>Ha fut, próbáld meg eltávolítani a RedHat csomagkezelõjével, vagy a megfelelõ 
bejegyzés eltávolításával az <TT
CLASS="FILENAME"
>/etc/rc.d/</TT
> könyvtárból.</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="AEN340">3.10.5. A hálózati kártyámat felismerte  a rendszer, 
de "NO DHCPOFFER" üzeneteket látok a naplófájlokban. 
Ja, és PCMCIA kártyám van.</H4
><P
>Biztosnak kell lenned abban, hogy a 10BaseT aljzat (a "telefon" aljzat) a 
kártyádon aktiválva van. A legjobb módszer annak ellenõrzésére, hogy melyik 
csatlakozó lett beállítva induláskor például:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>eth0: 3c509 at 0x300 tag 1, 10baseT port, address  00 20 af ee 11 11, IRQ 10.
		            ^^^^^^^^^^^^
3c509.c:1.07 6/15/95 becker@cesdis.gsfc.nasa.gov</PRE
></FONT
></TD
></TR
></TABLE
><P
>Kaptam visszajelzést laptopos felhasználóktól, akiknek ilyen problémájuk volt, 
és a PCMCIA segédprogramokkal lehetett összefüggésbe hozni (különösen az 
ifport-tal), amelyek a csatoló típusát 10Base2-re (thinnet) állítják. Neked 
biztosnak kell lenni abban, hogy 10BaseT-t használsz. Ha nem, állítsd át a 
kártyát, és indítsd újra a gépet.</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="AEN345">3.10.6. A DHCP kliensem kiadja a broadcast üzenetet, de nincs rá válasz (Peter 
Amstutz közremûködésével)</H4
><P
>Néhány rendszeren valamilyen gépnevet kell megadnod, mint a kérés részét. A 
dhcpcd démonnal ezt a <B
CLASS="COMMAND"
>dhcpcd -h
<TT
CLASS="REPLACEABLE"
><I
>foohost</I
></TT
></B
> paranccsal tudod megtenni. 
Ez a gépnév valószínûleg megegyezik a hálózati belépéshez használt neveddel. </P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="AEN350">3.10.7. Minden lépést követtem, de még mindig nem tudok kapcsolatot létesíteni</H4
><P
>A kábelmodemek általában megjegyzik a kártya ethernet címét, 
így amikor új gépet csatlakoztatsz vagy kicseréled a hálókártyát, 
valahogy meg kell "tanítani" a kábelmodemet, 
hogy felismerje az új gépet/kártyát. Általában csak ki kell 
kapcsolni, majd vissza a modemet, míg a gép mûködik, vagy fel kell hívnod a 
szolgáltatót, és bejelenteni a hálókártya változását.</P
><P
>Lehetnek olyan tûzfal-szabályaid (ipfwadm, ipchains vagy iptables szabályok) 
amelyek letiltják a 67/68-as portokat, amelyeken a DHCP forgalmazza a beállítási 
információkat. Ellenõrizd alaposan a szabályokat.</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="AEN354">3.10.8. MediOne Express szolgáltatásom van és nem tudok 
kapcsolódni</H4
><P
>Úgy néz ki, hogy a MediOne olyan dolgokat ad hozzá a DHCP-hez, 
amiknek nem kéne ott lenniük. Feltehetõen ez már nem probléma, 
de ha gondokkal találkozol, ellenõrizd ezeket. 
Ha egy Windows NT szerencsés (?) felhasználója vagy, az 
Eseménynaplóban (Event Viewer) a következõt láthatod:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>DHCP received an unknown option 067 of length 005. The raw option data is 
given  below.

0000: 62 61 73 69 63            basic</PRE
></FONT
></TD
></TR
></TABLE
><P
>Ha ez probléma, látogass el az
<A
HREF="ftp://vanbuer.ddns.org/pub/"
TARGET="_top"
>ftp://vanbuer.ddns.org/pub/</A
>
címre és töltsd le a bináris programot, vagy a forrást a változtatáshoz.</P
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN360">3.11. Alternatív DHCP kliens (ISC dhclient)</H3
><P
>Ha sehogy sem sikerült a dhcpcd démonnal kapcsolatot létesítened, kipróbálhatod az 
ISC dhclient programot. A dhclient hozzáférhetõ az ISC által kiadott DHCP 
disztribúcióban,
 és mind kliens, mind szerverprogramot tartalmaz. Arról, hogy hogyan szerezheted 
meg és fordíthatod le a szervert, <A
HREF="#DHCPSERVER"
>itt</A
> olvashatsz. 
Amikor kész vagy, 
kérlek térj vissza ide a kliens beállítását illetõen.</P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.gif"
HSPACE="5"
ALT="Megjegyzés"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>a következõ információkat 
Ted Lemon <TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:mellon@isc.org"
>mellon@isc.org</A
>&#62;</TT
>
a dhclient szerzõinek egyike adta közre.</P
></TD
></TR
></TABLE
></DIV
><P
>A DHCP kliens jelenlegi verziójához igazándiból nem kell
 <TT
CLASS="FILENAME"
>dhclient.conf</TT
> fájl. Csak meg 
kell hívni a programot, például: <B
CLASS="COMMAND"
>/sbin/dhclient</B
>.</P
><P
>Ez minden broadcast eszközt beállít. 
Ha ez nem mûködik, vagy csak egyetlen eszközt akarsz megadni, készíts egy 
<TT
CLASS="FILENAME"
>/etc/dhclient.conf</TT
> fájlt ezzel a 
tartalommal:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>interface "eth0" {
  send dhcp-client-identifier 1:xx:xx:xx:xx:xx:xx;
  send dhcp-lease-time 86400;
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>Feltételeztük, hogy az ethernet eszköz neve eth0. 
Ha nem, változtasd meg. Ezen kívül írd át a xx:xx.xx.xx.xx.xx jeleket 
az eszköz ethernet címére. Ez a dhclient.conf 
nagyon hasonlóvá teszi a klienst egy Win95 klienshez.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="AEN374">4. DHCP szerver beállítás</H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="DHCPSERVER">4.1. DHCP szerver UNIX rendszerekhez</H3
><P
>Többféle DHCP szerver létezik a UN*X-szerû operációs rendszerekhez, mind pénzes, 
mind szabad felhasználású. Az egyik legnépszerûbb szabad szoftver a Paul 
Vixie/ISC- féle DHCPd. Jelenleg a legutolsó verzió a 2.0 (a legtöbb felhasználó 
számára javasolt), de a 3.0 is bétatesztelés alatt áll. Letöltheted a 
<A
HREF="ftp://ftp.isc.org/isc/dhcp/"
TARGET="_top"
>ftp://ftp.isc.org/isc/dhcp/</A
> webhelyrõl.</P
><P
>Néhány Linux összeállítás tartalmazza a bináris dhcpd csomagot, 
ezért átugorhatod a következõ részt, ha ezen a módon telepítetted.</P
><P
>Miután letöltötted, csomagold ki, majd lépj be a forráskönyvtárba. Itt add ki a 
 <B
CLASS="COMMAND"
>./configure</B
> parancsot.</P
><P
>Eltart egy kis ideig, amíg beállítja a dolgokat. Amikor 
kész, add ki a <B
CLASS="COMMAND"
>make</B
>, majd a <B
CLASS="COMMAND"
>make install</B
> parancsokat.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN386">4.2. DHCP szerver beállítás</H3
><P
>Miután kész a telepítés, add ki az <B
CLASS="COMMAND"
>ifconfig -a</B
> parancsot. Valami hasonlót kell 
látnod:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>eth0      Link encap:10Mbps Ethernet  HWaddr 00:C0:4F:D3:C4:62
          inet addr:183.217.19.43  Bcast:183.217.19.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:2875542 errors:0 dropped:0 overruns:0
          TX packets:218647 errors:0 dropped:0 overruns:0
          Interrupt:11 Base address:0x210</PRE
></FONT
></TD
></TR
></TABLE
><P
>Ha nem látható a MULTICAST szó a kiírásban, újra kell fordítanod a kerneled, 
hogy benne legyen a támogatás. A legtöbb rendszeren azonban erre nincs szükség.</P
><P
>A következõ lépés az útválasztás beállítása a 255.255.255.255 címre. Részlet a 
DHCPd README fájlból:</P
><A
NAME="AEN393"><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>A válogatós DHCP kliensekkel (pl. Win95) való korrekt együttmûködés 
érdekében a 255.255.255.255 címre is képesnek kell lennie csomagokat küldeni. 
Sajnos, a Linux ragaszkodik ahhoz, hogy a 255.255.255.255-öt a helyi 
broadcast címként állítsa be (itt ez 192.5.5.223). Ez a DHCP protokoll 
megsértése, és amíg a legtöbb DHCP kliens nem veszi észre a problémát, 
néhány (pl. az összes Microsoft kliens) igen. Az ilyen problémával 
küzdõ kliensek nem "látják" a szervertõl 
érkezõ "DHCPOFFER" üzeneteket.</P
></BLOCKQUOTE
><P
>Gépeld be: <B
CLASS="COMMAND"
>route add -host 255.255.255.255 dev eth0</B
></P
><P
>Ha a "<TT
CLASS="LITERAL"
>255.255.255.255: Unknown host</TT
>" választ kapod,
akkor próbáld meg a következõ bejegyzést hozzáadni az
<TT
CLASS="FILENAME"
>/etc/hosts</TT
> fájlhoz:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>255.255.255.255 all-ones</PRE
></FONT
></TD
></TR
></TABLE
><P
>Aztán pedig:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>route add -host all-ones dev eth0</PRE
></FONT
></TD
></TR
></TABLE
><P
>vagy</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>route add 255.255.255.0 dev eth0</PRE
></FONT
></TD
></TR
></TABLE
><P
>Itt természetesen az <TT
CLASS="LITERAL"
>eth0</TT
> a hálózati eszköz neve, ha 
nálad más, változtasd meg.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN407">4.3. DHCPd beállítások</H3
><P
>Most konfigurálni kell a DHCPd démont. Ennek érdekében meg kell csinálnod, vagy 
módosítanod kell az <TT
CLASS="FILENAME"
>/etc/dhcpd.conf</TT
> fájlt. Van ehhez grafikus program is a KDE 
alatt ( <A
HREF="http://www.kde.org/"
TARGET="_top"
>http://www.kde.org/</A
> ), amit kcmdhcpd-nek hívnak és nagyon hasonlít a 
Windows NT beállítóprogramjára. A KDE 2.0 kiadásakor benne lesz a csomagban 
vagy letölthetõ az 
<A
HREF="ftp://ftp.us.kde.org/pub/kde/unstable/apps/network/"
TARGET="_top"
>ftp://ftp.us.kde.org/pub/kde/unstable/apps/network/</A
> webhelyrõl.</P
><P
>Ha kézzel akarod konfigurálni a démont, akkor kövesd az alábbi utasításokat.</P
><P
>A legáltalánosabb esetben a címeket véletlenszerûen akarod kiosztani. Ez a 
következõ beállításokkal elérhetõ:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
># Sample /etc/dhcpd.conf
# (add your comments here) 
default-lease-time 600;
max-lease-time 7200;
option subnet-mask 255.255.255.0;
option broadcast-address 192.168.1.255;
option routers 192.168.1.254;
option domain-name-servers 192.168.1.1, 192.168.1.2;
option domain-name "mydomain.org";

subnet 192.168.1.0 netmask 255.255.255.0 {
   range 192.168.1.10 192.168.1.100;
   range 192.168.1.150 192.168.1.200;
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>Ez azt eredményezi, hogy a szerver a 192.168.1.10-192.168.1.100 vagy 
192.168.1.150-192.168.1.200 tartományból fog IP címeket kiadni. 600 másodpercig 
biztosítja az IP címet, ha a kliens nem kér más idõkeretet. Egyébként, a 
maximális (megengedett) "bérleti idõ" 7200 mp. A szerver ezen kívül ajánlja, 
hogy a kliens a 255.255.255.0 alhálózati maszkot, a 192.168.1.255-ös broadcast 
címet, a 192.168.1.254-et, mint a router címét és a 192.168.1.1 és 192.168.1.2 
címû névszervereket használja.</P
><P
>Ha WINS szervert kell a Windows kliensek számára 
megadni, akkor beszúrhatod még a <TT
CLASS="LITERAL"
>netbios-name-servers</TT
> beállítást is, például:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>option netbios-name-servers 192.168.1.1;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Ezen kívül specifikus IP címeket adhatsz meg, amik a kliens hálókártyájának 
ethernet címén alapulnak, például:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>host haagen {
   hardware ethernet 08:00:2b:4c:59:23;
   fixed-address 192.168.1.222;
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>Ez a példa a 192.168.1.122 címet osztja ki a 
08:00:2b:4c:59:23 ethernet azonosítójú kártyával rendelkezõ kliensnek.</P
><P
>Ezeket keverheted is, például ha van néhány kliens 
aminek fix IP cím kell, másoknak pedig (pl. laptopos felhasználók) 
dinamikus címkiosztás. Egy csomó más lehetõség 
is van, például NIS szerver címek, idõszerverek címei stb. 
Ha bármelyikre szükséged van, olvasd el a 
<TT
CLASS="FILENAME"
>dhcpd.conf</TT
> kézikönyv oldalt.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN425">4.4. A szerver indítása</H3
><P
>Egy dolgot kell tenned, mielõtt a szervert indítanád. A legtöbb esetben a 
DHCP telepítés nem készíti el a <TT
CLASS="FILENAME"
>dhcpd.leases</TT
>
. Ezt a szerver használja 
abból a célból, hogy tárolja az aktuális kiosztási információkat. Ez sima 
szöveges formátumú, tehát a démon mûködése közben is megnézheted a tartalmát. 
A <TT
CLASS="FILENAME"
>dhcpd.leases</TT
> elkészítéséhez gépeld be: 

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>touch /var/state/dhcp/dhcpd.leases</PRE
></FONT
></TD
></TR
></TABLE
></P
><P
>Ez egy üres fájlt készít (méret = 0). Néhány régebbi 2.0-ás szerververzió 
<TT
CLASS="FILENAME"
>/etc/dhcpd.leases</TT
> fájlt igényel.  Neked nem kell semmit sem tenned a fájllal, ezt 
a dhcpd kezeli. Ha olyan hibaüzenetet kapsz, hogy a fájl már létezik, simán 
figyelmen kívül hagyhatod és menj a következõ lépésre.</P
><P
>Most már indíthatod a DHCP szervert. Gépeld be (vagy rakd be az 
indítószkriptekbe):</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>/usr/sbin/dhcpd</PRE
></FONT
></TD
></TR
></TABLE
><P
>Ez az eth0 eszközön elindítja a szervert. Ha más eszközre akarod felhúzni, 
akkor add meg a parancssorban, például:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>/usr/sbin/dhcpd eth1</PRE
></FONT
></TD
></TR
></TABLE
><P
>Ellenõrzési és hibakeresési célból elõször "debug" módban és 
elõtérben futtatva indítsd el, ezt így teheted meg:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>/usr/sbin/dhcpd -d -f</PRE
></FONT
></TD
></TR
></TABLE
><P
>Ezek után indítsd el az egyik kliensedet, és figyeld a szerver konzolját. Számos 
hibaellenõrzõ üzenetet fogsz látni. Ha minden mûködik, akkor kész vagy :) 
Állítsd le a dhcpd-t és indítsd újra 
<B
CLASS="COMMAND"
>-d</B
> és <B
CLASS="COMMAND"
>-f</B
> paraméter nélkül. Ha rendszerinduláskor is 
el akarod indítani, akkor tedd be például az 


<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>/etc/rc.d/rc.local</PRE
></FONT
></TD
></TR
></TABLE
>

fájlba (vagy inkább a 
szabványos indítási folyamatba - a ford.)</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN443">4.5. Egyéb érdekes olvasnivalók</H3
><P
>A Linux Magazine egy nagyon jó cikket közöl egyik számában
<A
HREF="http://www.linux-mag.com/2000-04/networknirvana_01.html"
TARGET="_top"
>Network
Nirvana: How to make Network Configuration as easy as DHCP</A
> 
(Hálózati Mennyország: Hogyan végezzük el hálózati beállításainkat könnyedén) címmel.
ami a DHCP beállítását taglalja.</P
></DIV
></DIV
></DIV
></BODY
></HTML
>
