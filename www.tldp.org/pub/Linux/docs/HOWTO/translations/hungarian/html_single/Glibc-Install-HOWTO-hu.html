<HTML
><HEAD
>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-2">
<TITLE
>Glibc telepítés HOGYAN</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"/></HEAD
><BODY
CLASS="book"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="BOOK"
><A
NAME="Glibc-Install-Mini-Howto"/><DIV
CLASS="TITLEPAGE"
><H1
CLASS="title"
><A
NAME="AEN2"/>Glibc telepítés HOGYAN</H1
><H3
CLASS="author"
><A
NAME="AEN4"/>Kai Schlachter</H3
><DIV
CLASS="affiliation"
><DIV
CLASS="address"
><P
CLASS="address"
><br/>
linux (at) murphyslantech.de<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P
></DIV
></DIV
><P
CLASS="pubdate"
>2004.03.19<BR/></P
><DIV
CLASS="revhistory"
><TABLE
WIDTH="100%"
BORDER="0"
><TR
><TH
ALIGN="LEFT"
VALIGN="TOP"
COLSPAN="3"
><B
>Verziótörténet</B
></TH
></TR
><TR
><TD
ALIGN="LEFT"
>Verzió: 1.01</TD
><TD
ALIGN="LEFT"
>2004.03.19</TD
><TD
ALIGN="LEFT"
>Átdolgozta: KC</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Elsõ kiadás, az LDP által átnézve.</TD
></TR
></TABLE
></DIV
><HR/></DIV
><DIV
CLASS="TOC"
><DL
><DT
><B
>Tartalomjegyzék</B
></DT
><DT
>1. <A
HREF="#preface"
>Elõszó</A
></DT
><DD
><DL
><DT
>1.1. <A
HREF="#copyright"
>Szerzõi jog</A
></DT
><DT
>1.2. <A
HREF="#history"
>Verziótörténet</A
></DT
><DT
>1.3. <A
HREF="#thanks"
>Köszönetnyilvánítás</A
></DT
><DT
>1.4. <A
HREF="#AEN34"
>Magyar fordítás</A
></DT
></DL
></DD
><DT
>2. <A
HREF="#introduction"
>Bevezetés</A
></DT
><DD
><DL
><DT
>2.1. <A
HREF="#why"
>Miért?</A
></DT
><DT
>2.2. <A
HREF="#what"
>Mit?</A
></DT
></DL
></DD
><DT
>3. <A
HREF="#preparations"
>Elõkészületek</A
></DT
><DD
><DL
><DT
>3.1. <A
HREF="#stuff-you-will-need"
>Szükséges dolgok</A
></DT
><DT
>3.2. <A
HREF="#special-things-you-need-to-do"
>Speciális dolgok</A
></DT
></DL
></DD
><DT
>4. <A
HREF="#the-install-of-glibc-itself"
>A glibc telepítése</A
></DT
><DD
><DL
><DT
>4.1. <A
HREF="#obtaining-and-compiling-the-source"
>A forrás letöltése és fordítása</A
></DT
><DT
>4.2. <A
HREF="#the-installation"
>A telepítés</A
></DT
><DT
>4.3. <A
HREF="#after-the-kernel-is-booted"
>Miután a rendszer betöltõdött</A
></DT
></DL
></DD
><DT
>5. <A
HREF="#troubleshooting"
>Hibakeresés &#8212; valami nem sikerült ...</A
></DT
><DD
><DL
><DT
>5.1. <A
HREF="#errors-with-configure-or-make-while-trying-to-compile-the-glibc"
>Hibák a <B
CLASS="command"
>configure</B
> vagy a <B
CLASS="command"
>make</B
> 
futásakor a glibc fordítása közben</A
></DT
><DT
>5.2. <A
HREF="#something-goes-wrong-during-make-install"
>Ha a <B
CLASS="command"
>make install</B
> során történik valami baj</A
></DT
></DL
></DD
></DL
></DIV
><DIV
CLASS="chapter"
><HR/><H1
><A
NAME="preface"/>Fejezet 1. Elõszó</H1
><DIV
CLASS="sect1"
><H2
CLASS="sect1"
><A
NAME="copyright"/>1.1. Szerzõi jog</H2
><P
>Copyright (c) 2004 by Kai Schlachter</P
><P
>Ez a dokumentum másolható, terjeszthetõ és/vagy módosító a Free Software Foundation (Szabad Szoftver Alapítvány) által kiadott GNU Free Documentation License (Szabad Dokumentációs Licenc) 1.2 vagy késõbbi változatának megfelelõen, változatlan részek, elsõ és hátsó borítószövegek borítószövegek nélkül. A licenc egy példányát megtalálod a következõ címen:
<A
HREF="http://www.gnu.org/licenses/fdl.html"
TARGET="_top"
>http://www.gnu.org/licenses/fdl.html</A
>.</P
></DIV
><DIV
CLASS="sect1"
><HR/><H2
CLASS="sect1"
><A
NAME="history"/>1.2. Verziótörténet</H2
><P
>&#13;<P
></P
><UL
><LI
><P
>v1.01: Néhány rossz helyen lévõ idézõjel korrigálása.</P
></LI
></UL
>
</P
></DIV
><DIV
CLASS="sect1"
><HR/><H2
CLASS="sect1"
><A
NAME="thanks"/>1.3. Köszönetnyilvánítás</H2
><P
>Különösen szeretném megköszönni Nico Schmoiglnak, hogy segített helyreállítani az összeomlott rendszeremet, miután make install-al telepítettem a glibc-t, miközben a rendszer teljesen funkcionált. Fõként emiatt írtam ezt a HOGYANt.</P
><P
>Ugyancsak köszönöm mindenkinek, akik segítettek munka közben a HOGYAN megfelelõ formába önteni, a sajtóhibákat megkeresni stb.</P
></DIV
><DIV
CLASS="sect1"
><HR/><H2
CLASS="sect1"
><A
NAME="AEN34"/>1.4. Magyar fordítás</H2
><P
> A magyar fordítást <A
HREF="mailto: Dios.Gergely[kukac]stud.u-szeged[pont]hu"
TARGET="_top"
>Diós Gergely</A
> készítette (2004.06.09). A lektorálást <A
HREF="mailto: dacas[kukac]freemail[pont]hu"
TARGET="_top"
>Daczi László</A
> végezte el (2004.06.16). A dokumentum legfrissebb változata megtalálható a <A
HREF="http://tldp.fsf.hu/"
TARGET="_top"
>Magyar Linux Dokumentációs Projekt</A
> honlapján. A dokumentum fordítása a <A
HREF="http://www.u-szeged.hu/"
TARGET="_top"
>Szegedi Tudományegyetem</A
> <A
HREF="http://www.inf.u-szeged.hu/~havasi/opensource/"
TARGET="_top"
>nyílt forráskódú szoftverfejlesztés speciálkollégium</A
>ának segítségével valósult meg.</P
></DIV
></DIV
><DIV
CLASS="chapter"
><HR/><H1
><A
NAME="introduction"/>Fejezet 2. Bevezetés</H1
><P
>Ebben a HOGYANban kifejtem, hogyan telepítsd a <SPAN
CLASS="productname"
>glibc</SPAN
> új változatát a rendszeredre.</P
><P
>Azért írtam ezt a kézikönyvet, hogy a megkíméljek másokat azoktól a problémáktól, amelyekkel én is találkoztam.</P
><P
>Ez a HOGYAN egyfajta irányelv beállításokból és módszerekbõl, amelyek nálam mûködtek, ezért a dokumentum tartalmáért semmilyen felelõsséget nem vállalok. Saját felelõsségedre használd ezeket a példákat, elveket. Erõsen ajánlott, hogy a nagyobb telepítések elõtt, illetve bizonyos idõközönként is készíts biztonsági mentést rendszeredrõl. </P
><P
>Ha bármilyen javaslatod van a HOGYANnal kapcsolatban, vagy találtál egy bugot valamelyik disztribúcióban és javítását, küldj egy e-mail-t a
<TT
CLASS="email"
>&lt;<A
HREF="mailto:linux_at_murphyslantech.de"
>linux_at_murphyslantech.de</A
>&gt;</TT
> címre.</P
><DIV
CLASS="sect1"
><HR/><H2
CLASS="sect1"
><A
NAME="why"/>2.1. Miért?</H2
><P
>&#13;Jó kérdés. Miért is kéne egy újabb glibc-t feltelepíteni? Nos, több oka is lehet :
<P
></P
><UL
><LI
><P
>fejlesztõ vagy és szükséged lenne az újabb funkciókra
</P
></LI
><LI
><P
>le akarsz fordítani (compile) egy újabb programot, ami az újabb programkönyvtárat (library) használja
</P
></LI
><LI
><P
>szereted az új változatban lévõ hibák okozta izgalmakat ;-)
</P
></LI
></UL
>
</P
></DIV
><DIV
CLASS="sect1"
><HR/><H2
CLASS="sect1"
><A
NAME="what"/>2.2. Mit?</H2
><P
>&#13;Ha még nem tudod mi is az a glibc, ne aggódj! Amikor elõször voltak ilyen problémáim egy program fordítása során, csak annyit tudtam, hogy a glibc változatom nem megfelelõ a fordításhoz. Most, hogy már többet tudok, megpróbálom egyszerûen elmagyarázni, hogy tulajdonképpen mit is csinál a glibc.</P
><P
>A glibc csomag egy C nyelvben írt programkönyvtárat tartalmaz. A programkönyvtárak rendkívül hasznosak programírás során, ahelyett, hogy rögtönözve kellene írnunk eljárást olyan egyszerûbb mûveletek számára, mint például egy szám gyökének meghatározása, sok ilyen és hasonló függvény le van tárolva egy külön fájlban &#8212; az úgynevezett programkönyvtárban. Ha egy programkönyvtár újabb változata megjelenik, gyakran tartalmaz újabb függvényeket, vagy sokkal hatékonyabb algoritmusokat használ már meglévõ függvényekben és így tovább.</P
><P
>Ez az oka annak, amiért néhány program panaszkodik a régebbi változatú glibc miatt, az ugyanis nem tartalmazza az összes függvényt, ami szükséges a program futásához.</P
><P
>Tudom, ez így technikailag nem pontos magyarázat, de a lényeget megértheted belõle.</P
></DIV
></DIV
><DIV
CLASS="chapter"
><HR/><H1
><A
NAME="preparations"/>Fejezet 3. Elõkészületek</H1
><P
>&#13;A glibc telepítése nem könnyû feladat, ezért sok dolgot elõre meg kell csinálnod, legfõképp arra az esetre, ha valami tönkremegy. (Mint ahogy velem is történt az elsõ glibc telepítésemkor, mivel nem tettem semmi elõkészületet.)</P
><DIV
CLASS="sect1"
><HR/><H2
CLASS="sect1"
><A
NAME="stuff-you-will-need"/>3.1. Szükséges dolgok</H2
><P
>Alapvetõen két dologra lesz szükséged: már meglévõ szoftverekre (például elõre telepített programok), valamint pár program forráskódjára.</P
><DIV
CLASS="sect2"
><HR/><H3
CLASS="sect2"
><A
NAME="software-you-will-need"/>3.1.1. Szükséges szoftverek</H3
><P
>&#13;<P
></P
><UL
><LI
><P
>egy mûködõ <SPAN
CLASS="productname"
>gcc</SPAN
></P
></LI
><LI
><P
>a <SPAN
CLASS="productname"
>glibc</SPAN
> egy régebbi változata ;-)</P
></LI
><LI
><P
><SPAN
CLASS="productname"
>GNU-binutils</SPAN
></P
></LI
><LI
><P
><SPAN
CLASS="productname"
>GNU-make</SPAN
></P
></LI
><LI
><P
>a <SPAN
CLASS="productname"
>GNU-core-utils</SPAN
></P
></LI
><LI
><P
><SPAN
CLASS="productname"
>GNU-tar</SPAN
></P
></LI
><LI
><P
><SPAN
CLASS="productname"
>bash</SPAN
>, vagy valami más shell</P
></LI
><LI
><P
>jó ha van: <SPAN
CLASS="productname"
>Midnight Commander</SPAN
></P
></LI
><LI
><P
>egy szerkesztõ(<SPAN
CLASS="productname"
>vi, jed</SPAN
> stb.)</P
></LI
></UL
>
</P
></DIV
><DIV
CLASS="sect2"
><HR/><H3
CLASS="sect2"
><A
NAME="sources-you-will-need"/>3.1.2. Szükséges források</H3
><P
>&#13;<P
></P
><UL
><LI
><P
><SPAN
CLASS="productname"
>a bash</SPAN
>, vagy a kedvenc shell</P
></LI
><LI
><P
><SPAN
CLASS="productname"
>GNU-tar</SPAN
></P
></LI
><LI
><P
><SPAN
CLASS="productname"
>GNU-core-utils</SPAN
></P
></LI
><LI
><P
><SPAN
CLASS="productname"
>GNU-make</SPAN
></P
></LI
><LI
><P
>természetesen a <SPAN
CLASS="productname"
>glibc</SPAN
></P
></LI
><LI
><P
>talán a <SPAN
CLASS="productname"
>gcc</SPAN
> is</P
></LI
></UL
>
</P
></DIV
></DIV
><DIV
CLASS="sect1"
><HR/><H2
CLASS="sect1"
><A
NAME="special-things-you-need-to-do"/>3.2. Speciális dolgok</H2
><P
>Képzelheted milyen problémákat okozhat, ha eltávolítod az alap-programkönyvtárat, amire egy csomó program épül.</P
><P
>Nálam minden rendben ment, amíg ki nem adtam a <B
CLASS="command"
>make install</B
> parancsot. Körülbelül a telepítés felénél hibaüzenetet kaptam, miszerint az <B
CLASS="command"
>rm</B
> nem tudott lefutni, aztán észrevettem, hogy még az olyan alapparancsok sem mûködnek, mint a <B
CLASS="command"
>cp</B
>, <B
CLASS="command"
>ls</B
>, <B
CLASS="command"
>mv</B
>, <B
CLASS="command"
>ln</B
>, <B
CLASS="command"
>tar</B
> stb. Mind azt írta ki, hogy nem találják a szükséges programkönyvtáruk egy részét.</P
><P
>Viszont erre is van megoldás. Programfordításkor a fordítót (compiler) rá lehet kényszeríteni, hogy a programkönyvtárakból használt függvényeket belefordítsák a programba, így azoknak már nem kell ezeket megkeresni a programkönyvtárból.</P
><P
>Ezért ebben a fejezetben a telepítéshez szükséges segédprogramok statikus változatát készítjük el.</P
><DIV
CLASS="sect2"
><HR/><H3
CLASS="sect2"
><A
NAME="things-you-will-definitely-need"/>3.2.1. Amikre mindenképpen szükséged lesz</H3
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
NAME="the-gnu-binutils"/>3.2.1.1. A GNU-Binutils</H4
><P
>&#13;<P
></P
><OL
TYPE="1"
><LI
><P
>A legújabbat az <A
HREF="ftp.gnu.org/gnu/binutils"
TARGET="_top"
>ftp.gnu.org/gnu/binutils</A
> webhelyrõl töltheted le; a dokumentum íráskor ez a 2.14-es változat volt</P
></LI
><LI
><P
>Csomagold ki a forrást: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>tar xIvf binutils-2.14.tar.bz2</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Lépj be a könyvtárba: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>cd binutils-2.14</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Állítsd be a makefile-okat: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>./configure</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Fordítsd le a forrásokat: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Telepítsd:  <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make install</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
></OL
>
</P
><P
>&#13;Ha a fordítás során valamilyen gettextel kapcsolatos problémába ütköznél (mint például: <SPAN
CLASS="QUOTE"
>"undeclared reference to lib_intl"</SPAN
> vagy valami hasonló), akkor szedd le és telepítsd a legújabb változatot az <A
HREF="ftp.gnu.org/gnu/gettext"
TARGET="_top"
>ftp.gnu.org/gnu/gettext</A
> webhelyrõl.</P
><P
>Ha ez nem segít, akkor próbáld meg kikapcsolni az anyanyelvi támogatást a következõképpen: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>./configure --no-nls</PRE
></FONT
></TD
></TR
></TABLE
></P
><P
>A binutils statikus változatát nem muszáj elkészíteni, de nem árt, mert sok régi változatút használó rendszerrel találkoztam, amelyekkel majdnem mindig valamilyen hiba volt, ezért szerintem jó ötlet itt megemlíteni ezeket. </P
></DIV
><DIV
CLASS="sect3"
><HR/><H4
CLASS="sect3"
><A
NAME="gnu-make"/>3.2.1.2. GNU make</H4
><P
>A <B
CLASS="command"
>make</B
> parancs a felelõs a források lefordításáért, a gcc és más, a fordításához szükséges programok hívásáért. Ha valami baj történik az új glibc-vel, szükséged lehet valamit lefordítani, ezért nem árt, ha van egy statikus változatod, másként nem menne.</P
><P
>&#13;<P
></P
><OL
TYPE="1"
><LI
><P
>Töltsd le a forrást az <A
HREF="ftp.gnu.org/gnu/make/"
TARGET="_top"
>ftp.gnu.org/gnu/make/</A
> webhelyrõl;  a dokumentum írásakor a legújabb a 3.80 változat volt</P
></LI
><LI
><P
>Csomagold ki: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>tar xIvf make-3.80.tar.bz2</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Lépj be a létrehozott könyvtárba: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>cd make-3.80</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Ügyelj rá, hogy a binárisokat statikusra fordítsd le:<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>export CFLAGS="-static -O2 -g"</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Futtasd a beállító szkriptet: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>./configure</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Fordítsd le: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Telepítsd a binárisokat :  <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make install</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Ellenõrizz: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make -v</PRE
></FONT
></TD
></TR
></TABLE
> Az újonnan telepített változatot kell látnod. Ha nem, keresd meg a régi binárisokat, és cseréld ki õket egy szimbolikus hivatkozással (link) az új változatra.</P
></LI
></OL
>
</P
><P
>&#13;Gratulálok! Ismét elkészítetted egy program statikus változatát.
</P
></DIV
><DIV
CLASS="sect3"
><HR/><H4
CLASS="sect3"
><A
NAME="gnu-core-utils"/>3.2.1.3. A GNU core-utils</H4
><P
>A core-utils a <B
CLASS="command"
>cp</B
>, <B
CLASS="command"
>rm</B
>, <B
CLASS="command"
>ln</B
>, <B
CLASS="command"
>mv</B
> stb alapparancsokból áll. Ha valami hiba történik a telepítés során, ezekre mindenképp szükség van a hiba helyrehozatalához, tehát itt a statikus változat igazán fontos.</P
><P
>&#13;<P
></P
><OL
TYPE="1"
><LI
><P
>Megint csak töltsd le a forrást az <A
HREF="ftp.gnu.org/gnu/coreutils/"
TARGET="_top"
>ftp.gnu.org/gnu/coreutils/</A
> webhelyrõl; a dokumentum íráskor a legújabb az 5.0 változat volt.</P
></LI
><LI
><P
>Csomagold ki:  <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>tar xIvf coreutils-5.0.tar.bz2</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Lépj be a könyvtárba: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>cd coreutils-5.0</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Ügyelj rá, hogy a binárisokat statikusra fordítsd:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>export CFLAGS="-static -O2 -g"</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Futtasd a beállító szkriptet: 
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>./configure</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Fordítsd le:  <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>És telepítsd: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make install</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Ellenõrizd, hogy az új változat-e az aktuális:<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>cp --version</PRE
></FONT
></TD
></TR
></TABLE
> Az új változat számát kell látnod, ha nem, akkor cseréld ki az összes régit egy szimbolikus hivatkozással az új változatra.</P
></LI
></OL
>
</P
><P
>&#13;Most, hogy ezeknek az alapcsomagoknak a statikus változatát használod, biztos lehetsz benne, hogy minden körülmény közt mûködni fognak.
</P
></DIV
><DIV
CLASS="sect3"
><HR/><H4
CLASS="sect3"
><A
NAME="gnu-tar"/>3.2.1.4. A GNU tar</H4
><P
>Már használtad a GNU tar programot, amikor kicsomagoltad és telepítetted a programokat. De talán szükséged lehet majd újabb programokat fordítani, ha az új glibc miatt a rendszer összeomlik, tehát nem árt, ha ebbõl is van egy statikus változat (ezt személyesen tapasztaltam). Szükséged lesz a <B
CLASS="command"
>tar</B
> mellett a bz2 tömörítési algoritmusra, amely nincs benne a tar hivatalos forrásában.</P
><P
>&#13;<P
></P
><OL
TYPE="1"
><LI
><P
>Töltsd le a tar forrását az <A
HREF="ftp.gnu.org/gnu/tar"
TARGET="_top"
>ftp.gnu.org/gnu/tar</A
> webhelyrõl; a dokumentum írásakor a legújabb az 1.13 változat volt.</P
></LI
><LI
><P
>Mivel sok forrás bz2 algoritmussal van tömörítve, szükséged lesz a beépített támogatásra, mert jobb mint csövekkel (pipe) dolgozni. Tehát töltsd le a foltot az 
    <A
HREF="ftp://infogroep.be/pub/linux/lfs/lfs-packages/4.1/tar-1.13.patch"
TARGET="_top"
>ftp://infogroep.be/pub/linux/lfs/lfs-packages/4.1/tar-1.13.patch</A
> webhelyrõl.
    </P
></LI
><LI
><P
>Csomagold ki: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>tar xzvf tar-1.13.tar.gz</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Másold át a foltot a tar forráskönyvtárába: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>cp tar-1.13.patch tar-1.13/</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Foltozd a forráskódot: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>patch -Np1 -i tar-1.13.patch</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Állítsd be a fordító kapcsolóit a statikus fordításhoz: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>export CFLAGS="-static -O2 -g"</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Most már beállíthod: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>./configure</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Fordítsd le: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Végül telepítsd a csomagot: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make install</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Egy gyors ellenõrzés, hogy feltelepült-e az új változat: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>tar --version</PRE
></FONT
></TD
></TR
></TABLE
> Az új változatnak kell megjelennie, ellenkezõ esetben keresd meg a régieket és cseréld ki az újra mutató szimbolikus hivatkozásokkal.</P
></LI
></OL
></P
><P
>Ha valami hibát észlelsz a make futtatásakor, próbáld meg kikapcsolni az anyanyelvi támogatást (nls). Ezt a következõ kapcsolókkal érheted el: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>--disable-nls</PRE
></FONT
></TD
></TR
></TABLE
></P
><P
><EM
>Megjegyzés: </EM
> A tar ezen új változatában a <TT
CLASS="option"
>-j</TT
> kapcsolót kell használnod a .bzip2 fájlok kicsomagoláshoz, tehát a következõ helyett:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>tar xIvf anyfile.tar.bz2</PRE
></FONT
></TD
></TR
></TABLE
> így kell: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>tar xjvf anyfile.tar.bz2</PRE
></FONT
></TD
></TR
></TABLE
> Nem tudom, hogy ez miért változott meg, mindenesetre így szépen mûködik.</P
></DIV
><DIV
CLASS="sect3"
><HR/><H4
CLASS="sect3"
><A
NAME="the-bash"/>3.2.1.5. A Bash shell</H4
><P
>&#13;Én a Bash shell-t részesítem elõnyben, ha másikat használsz, ügyelj arra, hogy a statikus változatát telepítsd, a glibc telepítése elõtt.</P
><P
>&#13;<P
></P
><OL
TYPE="1"
><LI
><P
>Töltsd le a Bash forrástt az <A
HREF="ftp.gnu.org/gnu/bash/"
TARGET="_top"
>ftp.gnu.org/gnu/bash/</A
> webhelyrõl; a dokumentum írásakor a legújabb a 2.05b változat volt.</P
></LI
><LI
><P
>Csomagold ki:  <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>tar xzvf bash-2.05b.tar.gz</PRE
></FONT
></TD
></TR
></TABLE
>amely egy <TT
CLASS="filename"
>bash-2.05b</TT
> könyvtárat hoz létre, benne a forrásokkal.</P
></LI
><LI
><P
>Lépj be a könyvtárba: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>cd bash-2.05a</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
> Állíts be mindent a statikus programkészítéshez:  <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>export CFLAGS="-static -O2 -g"</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Állítsd be a makefile-okat:  <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>./configure</PRE
></FONT
></TD
></TR
></TABLE
> Ha valami extrát szeretnél a Bash-hoz, nézd meg a súgót: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>./configure --help</PRE
></FONT
></TD
></TR
></TABLE
>
 az összes kapcsolóról.</P
></LI
><LI
><P
>Fordítsd le: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Telepítsd fel a binárisokat:  <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make install</PRE
></FONT
></TD
></TR
></TABLE
> Ez az <TT
CLASS="filename"
>/usr/local/bin/</TT
>könyvtárba másolja a binárisokat.</P
></LI
><LI
><P
>Ügyelj arra, hogy ne legyen más változat elérhetõ (mint a SuSE Linuxnál a <TT
CLASS="filename"
>/bin/</TT
> könyvtárban). Egyszerûen másold a binárist a <TT
CLASS="filename"
>/bin/</TT
> könyvtárba is:

  <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>cp /usr/local/bin/bash /bin/</PRE
></FONT
></TD
></TR
></TABLE
> Itt nem használunk szimbolikus hivatkozásokat, mivel a rendszerbetöltésnél és a bash indításakor ebbõl problémák adódhatnak. </P
></LI
></OL
>
</P
><P
>Már van egy telepített statikus változatú Bash a rendszeren, ami így ugyan nagy, de legalább minden körülmény közt mûködik.</P
><P
>&#13;Ha másik shell-t szeretsz, használhatod azt is, csak ügyelj arra, hogy  statikusan fordított változatot használj. Nyugodtan írd meg hogyan készítetted az általad használt shell statikus változatát, valószínûleg a HOGYAN következõ változatában már szerepelni is fog.
</P
></DIV
></DIV
><DIV
CLASS="sect2"
><HR/><H3
CLASS="sect2"
><A
NAME="software-that-may-come-in-handy"/>3.2.2. Szoftverek, amelyek jól jöhetnek</H3
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
NAME="midnight-commander"/>3.2.2.1. Midnight Commander</H4
><P
>&#13;A Midnight Commander egy nagyon hasznos kis fájlkezelõ, sok extrával, például tömörített fájlok kicsomagolása, beépített általános parancsok, mint másolás, áthelyezés, és egy szerkesztõ.</P
><P
>Lefordításához, fent kell lennie glib programkönyvtárnak. Néhány disztribúcióban alapból fent van, ha esetleg a <B
CLASS="command"
>make</B
> során olyan hibaüzenetet kapsz, hogy az ld nem találja a glibet, akkor elõször fel kell telepítened ezt a programkönyvtárat. A forrásokat az  <A
HREF="ftp.gnome.org/pub/gnome/sources/glib/2.2/"
TARGET="_top"
>ftp.gnome.org/pub/gnome/sources/glib/2.2/</A
> webhelyrõl töltheted le, a telepítés egyértelmû.</P
><P
>A Midnight Commander elkészítésének lépései:</P
><P
>&#13;<P
></P
><OL
TYPE="1"
><LI
><P
>Töltsd le a forrást a 
    <A
HREF="http://www.ibiblio.org/pub/Linux/utils/file/managers/mc/"
TARGET="_top"
>http://www.ibiblio.org/pub/Linux/utils/file/managers/mc/"</A
> webhelyrõl; a dokumentum írásakor a legújabb a 4.6.0 változat volt. volt.</P
></LI
><LI
><P
>Csomagold ki: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>tar xzvf mc-4.6.0.tar.gz</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Lépj be az imént létrehozott könyvtárba: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>cd mc-4.6.0</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Állítsd be a konfigurációs fájlokat: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>./configure</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Fordítsd le:  <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Telepítsd: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make install</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
></OL
>
</P
></DIV
></DIV
></DIV
></DIV
><DIV
CLASS="chapter"
><HR/><H1
><A
NAME="the-install-of-glibc-itself"/>Fejezet 4. A glibc telepítése</H1
><P
>Elérkeztünk a legfontosabb részhez, a glibc telepítéséhez.</P
><DIV
CLASS="sect1"
><HR/><H2
CLASS="sect1"
><A
NAME="obtaining-and-compiling-the-source"/>4.1. A forrás letöltése és fordítása</H2
><P
>A glibc számos változata elérhetõ, de nem biztos, hogy a legújabb változat jobb, mint egy régebbi. A legjobb, ha utánanézel különbözõ internetes fórumokon, melyiket érdemes használni és melyiket nem. Vagy ha ismersz valakit, aki járatos a témában, kérdezd meg tõle, hátha tudja melyik változat mennyire jó. </P
><P
>Én a glibc-2.2.4-et telepítettem, mivel azt mondták, ez elég szépen mûködik, de más változatot is feltehetsz, ha az jobban tetszik.</P
><P
>Akkor munkára fel: </P
><P
><P
></P
><OL
TYPE="1"
><LI
><P
>Töltsd le a forrást az <A
HREF="ftp.gnu.org/gnu/glibc/"
TARGET="_top"
>ftp.gnu.org/gnu/glibc/</A
> webhelyrõl; amint említettem, a 2.2.4-es változatot használtam.
</P
></LI
><LI
><P
>Csomagold ki:  <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>tar -xzvf glibc-2.2.4.tar.gz</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Még szükséged lesz a <SPAN
CLASS="QUOTE"
>"linuxthreads"</SPAN
> csomagra is, amelyet a linuxthreads könyvtárban megtalálsz az 
    <A
HREF="ftp.gnu.org"
TARGET="_top"
>ftp.gnu.org</A
> szerveren. A fájl neve: 
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>glibc-llinuxthreads-2.2.4.tar.gz</PRE
></FONT
></TD
></TR
></TABLE
>Ügyelj arra, hogy a linuxthreads változatszáma  megegyezzen a glibc-ével.</P
></LI
><LI
><P
>Másold a linuxthreads csomagot a glibc forrás-könyvtárába: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>cp glibc-linuxthreads-2.2.4.tar.gz glibc-2.2.4</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Lépj be a glibc könyvtárába: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>cd glibc-2.2.4</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Csomagold ki a linuxthreads forrás	t: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>tar xzvf linux-threads-2.2.4.tar.gz</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Állítsd be:<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>./configure --enable-add-ons=linuxthreads</PRE
></FONT
></TD
></TR
></TABLE
> Ez a kapcsoló úgy állítja be a csomagot, hogy fordításkor vegye figyelembe a linuxthreads csomagot is. Ez a más Linux rendszerekkel való kompatibilitás miatt szükséges. E nélkül például nem biztos, hogy az általad fordított programok futni fognak más gépeken.</P
></LI
><LI
><P
>Majd indítsd el a glibc fordítását: 
    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make</PRE
></FONT
></TD
></TR
></TABLE
> Ez eltart egy darabig (körülbelül fél óráig tartott a 1.5 GHz-es Duron XP gépen).</P
></LI
></OL
>
</P
><P
>&#13;Most, hogy a programkönyvtár is le lett fordítva, minden készen áll a telepítéshez, de az már nem lesz ilyen könnyû feladat.
</P
></DIV
><DIV
CLASS="sect1"
><HR/><H2
CLASS="sect1"
><A
NAME="the-installation"/>4.2. A telepítés</H2
><P
>A glibc telepítéséhez egy olyan rendszerre van szükség, amin semmi sem fut, mivel számos folyamat (például a sendmail) mindig megpróbálja használni a programkönyvtárat, így megakadályozza annak lecserélését. Tehát egy <SPAN
CLASS="QUOTE"
>"lecsupaszított"</SPAN
> rendszerre van szükségünk, amin tényleg csak a legszükségesebb dolgok futnak. Ezt úgy tudod elérni, hogy a boot opcióknál beállítod az
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>init=/bin/bash</PRE
></FONT
></TD
></TR
></TABLE
>
értéket a rendszermaghoz. A rendszerbetöltõtõl függõen még meg kell tenned pár dolgot. A következõkben ezt fejtem ki, a két legelterjedtebb rendszerbetöltõ, a LILO (LInux LOader) és a GNU grub esetére.</P
><DIV
CLASS="sect2"
><HR/><H3
CLASS="sect2"
><A
NAME="lilo"/>4.2.1. LILO</H3
><P
>Egy <SPAN
CLASS="QUOTE"
>"alap"</SPAN
> rendszer használatához indítsd újra a számítógépet, és a LILO prompt-nál válaszd ki a neked megfelelõ kernel-image nevet, és fûzd hozzá a
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>init=/bin/bash</PRE
></FONT
></TD
></TR
></TABLE
>
sort, mielõtt <B
CLASS="keycap"
>Enter</B
>-t nyomsz. Ha gyakrabban akarsz glibc-t cserélni, célszerû egy külön beállítást adni a <TT
CLASS="filename"
>/etc/lilo.conf</TT
> fájlba. 
A részletekért nézd meg a LILO man oldalát.</P
></DIV
><DIV
CLASS="sect2"
><HR/><H3
CLASS="sect2"
><A
NAME="grub"/>4.2.2. Grub</H3
><P
>A Grub egy újabb rendszerbetöltõ, amely támogat többféle operációs- és fájlrendszert (például támogatja a reiser fájlrendszerû partíciókról való rendszerbetöltést). Ha többet akarsz megtudni róla, látogass el a <A
HREF="http://www.gnu.org/software/grub/"
TARGET="_top"
>http://www.gnu.org/software/grub/</A
> webhelyre, ahol minden szükséges dolgot megtalálsz.</P
><P
>Ha már van egy telepített Grub a gépen, akkor valószínûleg szöveges felületet használsz a megfelelõ rendszer kiválasztására. A Grub-nak van egy szép jellegzetessége &#8212; ahelyett, hogy kézzel kéne beírnod mindent, egyszerûen kiválasztod a menübõl a bejegyzést, és nyomsz egy <B
CLASS="keycap"
>e</B
>-t, amely megjelenít egy opciók menüt. Ebben a menüben látod a parancsokat, amelyeket a Grub a rendszerbetöltést megelõzõen hajt végre. Válaszd ki a következõ sort :
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>kernel="/ahol/a-kerneled-van és az-opcióid-vannak"</PRE
></FONT
></TD
></TR
></TABLE
>
és nyomj újra egy <B
CLASS="keycap"
>e</B
>-t. Most szerkesztheted a sort. Itt add hozzá az
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>init=/bin/bash</PRE
></FONT
></TD
></TR
></TABLE
>
sort, eztán nyomj <B
CLASS="keycap"
>Entert</B
>-t, hogy a változtatások érvényesüljenek, és nyomj <B
CLASS="keycap"
>b</B
>-t a rendszerbetöltéshez.</P
></DIV
></DIV
><DIV
CLASS="sect1"
><HR/><H2
CLASS="sect1"
><A
NAME="after-the-kernel-is-booted"/>4.3. Miután a rendszer betöltõdött</H2
><P
>&#13;... Egy abszolút minimális bash környezetben találod magad.</P
><P
>Még a felhasználónevet és a jelszót sem kellett begépelned! Most te vagy az egyetlen szuper-felhasználó minden hatalommal, mivel a rendszer egyfelhasználós üzemmódban mûködik, tehát gondold végig mit csinálsz. Még fájl-elérési jogok és hasonlók sincsenek!</P
><P
>A prompt körülbelül így néz ki: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>init-x.y#</PRE
></FONT
></TD
></TR
></TABLE
>
A gyökérkönyvtár most csak olvashatóként van felcsatolva, így nem tudod ráírni az új programkönyvtárat sem. Az írhatóvá (<TT
CLASS="varname"
>r/w</TT
>) tételhez, elég kiadni ezt a parancsot:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>mount -o remount,rw /</PRE
></FONT
></TD
></TR
></TABLE
>
Ha a forrásod más partíción van, akkor azt is fel kell csatolni (nálam a raid rendszert kell):
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>mount -t reiserfs /dev/md0 /usr/src</PRE
></FONT
></TD
></TR
></TABLE
>
Amint látod, megadtam a fájlrendszer típusát is, mivel a <B
CLASS="command"
>mount</B
> nem nézi meg az <TT
CLASS="filename"
>/etc/fstab</TT
> fájlban.</P
><P
>Most már beléphetsz a forrás-könyvtárába, és elkezdheted a fordítást:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>make install</PRE
></FONT
></TD
></TR
></TABLE
></P
><P
>Ha akarsz, imádkozhatsz, hogy minden mûködjön... ;-)</P
><P
>Ha minden jól ment, akkor telepítés után mindenféle hibaüzenet nélkül visszakapod a promptot. Ha mégsem, akkor olvasd el az <A
HREF="#troubleshooting"
>5 fejezet</A
>et.</P
><P
>Ha nem volt semmi hiba, írd be ezt a parancsot: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>ldconfig -v</PRE
></FONT
></TD
></TR
></TABLE
> a programkönyvtáraid frissítéséhez.</P
><P
>Gratulálok! A programkönyvtárat sikeresen telepítetted. Most írd be:
<B
CLASS="command"
>mount -o remount,ro /</B
> biztosítékképpen, hogy minden adat a merevlemezre íródott.</P
><P
>Indítsd újra a rendszert: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>exit</PRE
></FONT
></TD
></TR
></TABLE
>
Ez egy hibaüzenetet fog eredményezni, miszerint rendszermag-pánikot okoztál. Ha lehet, <B
CLASS="keycap"
>CTRL</B
>-<B
CLASS="keycap"
>ALT</B
>-<B
CLASS="keycap"
>DEL</B
>-el próbáld meg újraindítani a számítógépet, ha nem megy, akkor csak a reset gomb marad.</P
><P
>Próbáld meg a rendes rendszermagot betölteni. Ha minden jól megy, már használhatod is az új programkönyvtáradat.</P
></DIV
></DIV
><DIV
CLASS="chapter"
><HR/><H1
><A
NAME="troubleshooting"/>Fejezet 5. Hibakeresés &#8212; valami nem sikerült ...</H1
><P
>Ha annak ellenére, hogy pontosan követted az összes utasítást és ehhez a részhez érkeztél, valószínûleg a különbözõ Linux kiadások miatt van valami probléma, némelyikük nem ott tárol bizonyos dolgokat, ahol azt elvileg kéne. A Suse Linux a leghíresebb az ilyen buta dolgokról, de a többivel is elõfordulhat hasonló probléma. Ha ilyesmivel találkozol, és megtalálod a hiba okát &#8212; és remélhetõleg a megoldását is &#8212; tudasd velem, én hozzá fogom adni ehhez a HOGYANhoz.</P
><P
>Azt hiszem ez a rész sosem lesz teljesen kész, de leírok majd pár lehetséges hibát és megoldásukat.</P
><DIV
CLASS="sect1"
><HR/><H2
CLASS="sect1"
><A
NAME="errors-with-configure-or-make-while-trying-to-compile-the-glibc"/>5.1. Hibák a <B
CLASS="command"
>configure</B
> vagy a <B
CLASS="command"
>make</B
> 
futásakor a glibc fordítása közben</H2
><P
>Néha találkozhatsz olyan beállítási hibával, amely szerint valamely kellék hiányzik &#8212; általában valamilyen szoftver, vagy a programkönyvtárak túl régiek. Ezzel egy csomó programnál találkoztam, különösen a statikus fordítások során. Általában semmi baj, szerezd be a szükséges szoftvereket, vagy programkönyvtárakat, azután fordítsd le õket a forrásban található leírásoknak megfelelõen (általában <TT
CLASS="filename"
>README</TT
>, <TT
CLASS="filename"
>INSTALL</TT
>, vagy valami hasonló a nevük).</P
><P
>Viszont van néhány eset, amikor ez így nem mûködik. Például, az újabb változatú binutils fordításakor, amely szükséges a glibc fordításához (ezért is említettem a szükséges dolgok között), problémák adódtak. A binutils configure szkriptje azt írta, hogy <SPAN
CLASS="QUOTE"
>"A glibc túl régi"</SPAN
>. Tehát azt hittem, <EM
>a kígyó itt a saját farkába harap</EM
>. Szerencsére erre a problémára is van megoldás, ha nem tudsz egyszerre megtenni egy nagy lépést, próbálj több, kisebb lépésben haladni.</P
><P
>A disztribúciómban egy 2.1.1-es változatú glibc volt. A probléma megoldásához elõször megpróbáltam lefordítani a 2.1.3-as glibc-t, ami sikerült is. Ezután feltelepítettem ezt az újabb változatot. Mikor újra megpróbáltam a binutils-t lefordítani, ezúttal mindent rendben talált.</P
><P
>Ha egy hasonló <SPAN
CLASS="QUOTE"
>"ördögi körrel"</SPAN
> találkoznál, nézz utána, hogy minimum milyen változatú szoftverre van szükség, aztán töltsd le azt. (Azt hiszem ezért is tartanak az FTP szervereken olyan sok régi változatot). A sikeres fordítás és telepítés után próbáld meg fordítani azt a szoftvert, ami panaszkodott az elõbbi szoftver változata miatt, a legtöbb esetben már le tudod fordítani. Lehetséges, hogy ezt a lépést többször is meg kell ismételned egy hiányzó, vagy régi szoftver fordításánál. Ez az amit úgy hívok, hogy <SPAN
CLASS="QUOTE"
>"a patkány hosszú farka"</SPAN
> vagy <SPAN
CLASS="QUOTE"
>"dominó effektus"</SPAN
>. 
Valami megtételéhez több dolgot meg kell tenned. Ez elég idegesítõ lehet, de a jó oldala a dolognak, hogy utána már biztos lehetsz benne, az igazán régi programok frissítve lesznek a telepítés végére.
</P
></DIV
><DIV
CLASS="sect1"
><HR/><H2
CLASS="sect1"
><A
NAME="something-goes-wrong-during-make-install"/>5.2. Ha a <B
CLASS="command"
>make install</B
> során történik valami baj</H2
><P
>A legáltalánosabb hiba, hogy nincsenek meg a statikus alapkellékek; ebben az esetben csak a <B
CLASS="command"
>cd</B
> parancsot tudod használni, semmi mást. Ezért írtam le  a HOGYANban részletesen, hogyan tegyük azokat a kellékeket statikussá.</P
><P
>Az egyetlen nem statikus kellék a <B
CLASS="command"
>mount</B
>, amely a linux-utils csomagban van (véleményem szerint nagyon helyesen), amely tartalmazza még többek között a <B
CLASS="command"
>login</B
>, <B
CLASS="command"
>passwd</B
> stb. programokat. Mivel nem lehet statikus változatokat használni PAM vagy más biztonsághoz kapcsolódó szoftverekkel keverve, elég ésszerûtlen dolog lenne bármilyen körülmények közt is statikussan fordítani õket. Természetesen megteheted, ha tényleg tudod mit csinálsz.</P
><DIV
CLASS="sect2"
><HR/><H3
CLASS="sect2"
><A
NAME="going-back-to-a-working-configuration"/>5.2.1. Visszatérés egy mûködõ rendszerhez</H3
><P
>Visszaállítani egy mûködõ rendszert elég egyszerû, ha megvannak a statikus kellékek: lépj be a <TT
CLASS="filename"
>/usr/local/lib/</TT
>  könyvtárba, 
és tedd át az összes újonnan telepített fájlt egy másik könyvtárba (például 
<TT
CLASS="filename"
>/usr/local/lib/eltarolva</TT
>). Könnyen azonosíthatod õket a változatszámuk alapján, amely ugyanaz, mint a telepített glibc programkönyvtáré, valamint a létrehozási dátum alapján. Elég ritka, hogy két különbözõ programkönyvtárnak azonos a változatszáma és létrehozási ideje &#8212; én személy szerint sosem láttam ilyet &#8212; de a biztonság kedvéért ellenõrizd a dátum/idõt, hogy semmi fontosat ne törölj le. Ehhez jó segítséget nyújt a Midnight Commander, ha telepítve van.</P
><P
>Megpróbálhatod letörölni a <TT
CLASS="filename"
>ld-2.2.4.so</TT
> és a <TT
CLASS="filename"
>libc-2.2.4.so</TT
> fájlokat, majd kiadni egy <B
CLASS="command"
>ldconfig -v</B
> parancsot, mielõtt eltávolítanád az összes tönkrement fájlt. Ezzel lehetõvé válik a legtöbb program használata, a Midnight Commander-t minden esetben tudod használni.</P
><P
>Ne felejts el legalább egy <B
CLASS="command"
>ldconfig -v</B
> parancsot kiadni, miután eltávolítottad az összes fájlt.</P
><DIV
CLASS="sect3"
><HR/><H4
CLASS="sect3"
><A
NAME="removing-the-causes-for-the-crashing-of-the-installation"/>5.2.1.1. A sikertelen telepítés okának megszüntetése</H4
><P
>Gyakori oka a problémáknak, hogy a disztribúciód az összes programkönyvtárat egy másik helyen tárolta, mint ahol az újonnan  telepített rutin keresné, valamint gyakran több változat is fut párhuzamosan, zavarva egymást. Nálam sok problémát okozott a <TT
CLASS="filename"
>libc6.so</TT
> egy második példánya a <TT
CLASS="filename"
>/lib</TT
> könyvtárban. Egy szimbolikus hivatkozás az <TT
CLASS="filename"
>/usr/local/lib</TT
> könyvtárban lévõ megfelelõ fájlra megoldja ezt a problémát.</P
></DIV
></DIV
></DIV
></DIV
></DIV
></BODY
></HTML
>
