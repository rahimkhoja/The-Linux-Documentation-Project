<HTML
><HEAD
>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-2">
<TITLE
>Forgalomirányítás tcng és HTB segítségével HOGYAN</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"/></HEAD
><BODY
CLASS="article"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="ARTICLE"
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="title"
><A
NAME="AEN2"/>Forgalomirányítás tcng és HTB segítségével HOGYAN</H1
><H2
CLASS="subtitle"
>1.0 változat</H2
><H3
CLASS="author"
><A
NAME="AEN5"
>Martin A. Brown</A
></H3
><DIV
CLASS="affiliation"
><SPAN
CLASS="orgname"
>&#13;        <A
HREF="http://www.securepipe.com"
TARGET="_top"
>SecurePipe, Inc.</A
>
        <BR/></SPAN
><SPAN
CLASS="orgdiv"
>Network Administration<BR/></SPAN
><DIV
CLASS="address"
><P
CLASS="address"
>mabrown@securepipe.com</P
></DIV
></DIV
><P
CLASS="pubdate"
>2003 április<BR/></P
><DIV
CLASS="revhistory"
><TABLE
WIDTH="100%"
BORDER="0"
><TR
><TH
ALIGN="LEFT"
VALIGN="TOP"
COLSPAN="3"
><B
>Verziótörténet</B
></TH
></TR
><TR
><TD
ALIGN="LEFT"
>Verzió: 1.0</TD
><TD
ALIGN="LEFT"
>2003.04.16</TD
><TD
ALIGN="LEFT"
>Átdolgozta: tab</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Az LDP által jóváhagyott Elsõ kiadás.</TD
></TR
><TR
><TD
ALIGN="LEFT"
>Verzió: 0.5</TD
><TD
ALIGN="LEFT"
>2002.04.01</TD
><TD
ALIGN="LEFT"
>Átdolgozta: MAB</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>A doksit átneveztem HOGYANra, a TLDP-hez elõterjesztve.</TD
></TR
><TR
><TD
ALIGN="LEFT"
>Verzió: 0.4</TD
><TD
ALIGN="LEFT"
>2002.03.31</TD
><TD
ALIGN="LEFT"
>Átdolgozta: MAB</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Új példa, bucket gyorstalpaló.</TD
></TR
><TR
><TD
ALIGN="LEFT"
>Verzió: 0.3</TD
><TD
ALIGN="LEFT"
>2002.03.16</TD
><TD
ALIGN="LEFT"
>Átdolgozta: MAB</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Javításokat és jegyzeteket írt: Jacob Teplitsky, raptor és Joshua
        Heling.</TD
></TR
><TR
><TD
ALIGN="LEFT"
>Verzió: 0.2</TD
><TD
ALIGN="LEFT"
>2002.03.15</TD
><TD
ALIGN="LEFT"
>Átdolgozta: MAB</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Hivatkozások hozzáadása, fazonigazítás, publikálás.</TD
></TR
><TR
><TD
ALIGN="LEFT"
>Verzió: 0.1</TD
><TD
ALIGN="LEFT"
>2002.03.14</TD
><TD
ALIGN="LEFT"
>Átdolgozta: MAB</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Elsõ kiadás.</TD
></TR
></TABLE
></DIV
><HR/></DIV
><DIV
CLASS="TOC"
><DL
><DT
><B
>Tartalomjegyzék</B
></DT
><DT
>1. <A
HREF="#copyright"
>Szerzõi jog és licenc</A
></DT
><DD
><DL
><DT
>1.1. <A
HREF="#hungarian-translation"
>Magyar fordítás</A
></DT
></DL
></DD
><DT
>2. <A
HREF="#intro"
>Bevezetés</A
></DT
><DD
><DL
><DT
>2.1. <A
HREF="#intro-tc"
>A forgalomirányítás fogalma és mûködése</A
></DT
><DT
>2.2. <A
HREF="#intro-htb"
>Mi az a HTB?</A
></DT
><DT
>2.3. <A
HREF="#intro-tcng"
>Mi is az a <B
CLASS="command"
>tcng</B
>?</A
></DT
></DL
></DD
><DT
>3. <A
HREF="#requirements"
>Követelmények</A
></DT
><DD
><DL
><DT
>3.1. <A
HREF="#requirements-kernel"
>Rendszermag követelmények</A
></DT
><DT
>3.2. <A
HREF="#requirements-tc"
><B
CLASS="command"
>tc</B
> követelmények</A
></DT
><DT
>3.3. <A
HREF="#requirements-tcng"
><B
CLASS="command"
>tcng</B
> követelmények</A
></DT
></DL
></DD
><DT
>4. <A
HREF="#examples"
>Beállítási példák</A
></DT
><DD
><DL
><DT
>4.1. <A
HREF="#examples-adsl"
>tcng használata csak a letöltések alakításához</A
></DT
><DT
>4.2. <A
HREF="#examples-1"
>A kétsebességû háromszínû mérõóra használata</A
></DT
></DL
></DD
><DT
>5. <A
HREF="#misc"
>Egyéb megjegyzések</A
></DT
><DT
>6. <A
HREF="#further"
>További leírások és hivatkozások</A
></DT
></DL
></DIV
><DIV
CLASS="section"
><H1
CLASS="section"
><A
NAME="copyright"/>1. Szerzõi jog és licenc</H1
><P
>&#169; 2003, Martin A. Brown</P
><P
>&#13;  A dokumentum szabadon másolható, terjeszthetõ és módosítható, 
  az FSF által közzétett GNU Szabad Dokumentációs Licenc v1.1, vagy annak késõbbi változatában szereplõ feltételek szerint. A licenc egy másolata megtalálható a <A
HREF="http://www.gnu.org/licenses/fdl.html"
TARGET="_top"
>www.gnu.org/copyleft/fdl.html</A
>
  honlapon.
  </P
><DIV
CLASS="section"
><HR/><H2
CLASS="section"
><A
NAME="hungarian-translation"/>1.1. Magyar fordítás</H2
><P
>&#13;    A magyar fordítást <A
HREF="mailto:petvolgyi[kukac]freemail[pont]hu"
TARGET="_top"
> Völgyi Péter</A
> készítette (2004.02.29).
    A lektorálást <A
HREF="mailto:dacas@freemail.hu_NO_SPAM"
TARGET="_top"
>Daczi
    László</A
> végezte el (2004.03.11).
    A dokumentum legfrissebb változata megtalálható a <A
HREF="http://tldp.fsf.hu/index.html"
TARGET="_top"
>Magyar Linux Dokumentációs
    Projekt</A
> honlapján.
    </P
></DIV
></DIV
><DIV
CLASS="section"
><HR/><H1
CLASS="section"
><A
NAME="intro"/>2. Bevezetés</H1
><P
>&#13;    Ez a dokumentum rövid áttekintést ad a <B
CLASS="command"
>tcng</B
>
    (<A
HREF="http://tcng.sourceforge.net"
TARGET="_top"
>Traffic Control - Next Generation; következõ generációs forgalomirányítás </A
>) HTB-vel (<A
HREF="http://luxik.cdi.cz/~devik/qos/htb/"
TARGET="_top"
>Hierarchical Token
    Bucket</A
>) való használatáról, mely eszközök segítségével a Linux rendszeren forgalomszabályozást végezhetünk.</P
><P
>&#13;    Ez a gyakorlatsor elsõsorban olyan rendszergazdáknak készült, akik: <P
></P
><UL
><LI
><P
>&#13;          LEGALÁBB alapszintû forgalomirányítási ismeretekkel rendelkeznek,
		 </P
></LI
><LI
><P
>&#13;          forrásból tudják FORDÍTANI az iproute2 és a tcng csomagokat, vagy 
        </P
><P
>&#13;          Ugyanezen csomagokat SRPM-bõl telepíteni,</P
></LI
><LI
><P
>&#13;          Az általuk használt rendszer moduláris szerkezetû rendszermagja támogatja a HTB és DSMARK modulokat,
</P
><P
>&#13;          VAGY képesek rendszermagot fordítani ezeknek a támogatására. </P
></LI
></UL
>
    <DIV
CLASS="note"
><P
></P
><TABLE
CLASS="note"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.gif"
HSPACE="5"
ALT="Megjegyzés"/></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Ez a doksi nem átfogó és nem mértékadó. 
	  A szerzõ várja mind a pozitív, mind a negatív véleményeket a <TT
CLASS="email"
>&lt;<A
HREF="mailto:mabrown@securepipe.com"
>mabrown@securepipe.com</A
>&gt;</TT
> e-mail címen.
	  A helyreigazításokat, kiegészítéseket is szívesen veszi. </P
></TD
></TR
></TABLE
></DIV
>
  </P
><DIV
CLASS="section"
><HR/><H2
CLASS="section"
><A
NAME="intro-tc"/>2.1. A forgalomirányítás fogalma és mûködése</H2
><P
>&#13;     A forgalomirányítás egy hálózaton, vagy hálózati eszközön történõ teljes csomag-várakozósor (packet queuing) alrendszer összefoglaló neve. 
     A forgalomirányítás több mûveletbõl tevõdik össze.
     Az osztályozás (classifying) során történik a csomagok azonosítása, majd egyedi várakozósorokba, osztályokba rendezése.
Az engedélyezés (policing) az osztályozásnak megfelelõ adatfolyamban a csomagok vagy bájtok számának szabályozását jelenti.
A besorolás (scheduling) a döntéshozatali elem, ahol is a csomagokat az adattovábbításhoz sorrendbe, majd újra sorrendbe rakjuk.
Az alakítás (shaping) az a folyamat, amikor a csomagokat késleltetjük majd továbbküldjük, ezáltal az átviteli sebesség nagyjából egyenlõ ütemû, és elõre kiszámítható lesz.
</P
><P
>&#13;      A forgalomirányítás sokoldalúságát kihasználva komplex rendszereket lehet kialakítani, 
      annak érdekében, hogy egy bizonyos folyamat (vagy alkalmazás) részére sávszélességet biztosítsunk,
	   vagy a rendelkezésre álló sávszélességet korlátozzuk bizonyos folyamatok, vagy alkalmazás elõtt.
</P
><P
>&#13; A forgalomirányítás egyik kulcs-koncepciója a tokenek (jelek) fogalma.
Az engedélyezés vagy alakítás folyamata során ki kell számítani az elküldött bájtok vagy csomagok számát,
 vagyis melyik, milyen sebességgel kerül majd továbbításra.
 Minden csomag vagy bájt (az alkalmazástól függ, hogy melyik) egy jelnek felel meg,
 és az engedélyezõ- vagy alakító-alkalmazás csak akkor továbbítja a csomagot vagy bájtot, ha az rendelkezik a megfelelõ jellel.
Egy alkalmazás metaforikus jeltárolója a tároló (bucket).
 Röviden a tároló jelzi, mind az egyszerre használható jelek számát (ez a tároló mérete), mind pedig a jelek újratöltõdésének ütemét (milyen gyorsan töltõdik újra a tároló).
  </P
><P
>&#13;     Bõvebbet a 
      <A
HREF="#intro-htb"
>2.2 </A
> példában találsz a tároló használatára a Linux forgalomirányítási rendszerben.
    </P
><P
>&#13; Linux rendszereken a forgalomirányítás mindig is komoly kihívást jelentett.
A <B
CLASS="command"
>tc </B
> parancssori eszköz kapcsolatot jelent a rendszermag azon részeivel,
amelyek az alakítás, besorolás, engedélyezés, és osztályozás folyamatait végzik. 
A parancs szintaxisa viszont rendkívül bonyolult.
A <B
CLASS="command"
>tcng</B
> projekt azzal, hogy a <B
CLASS="command"
>tc</B
> parancssori eszköz fölé nyelvi réteget fektet,
 sokkal barátságosabb környezetet biztosít a felhasználónak.
  A <B
CLASS="command"
>tcng</B
>-ben írt forgalomirányítási beállítások ezáltal könnyebben kezelhetõ, kevésbé bonyolult, és - ami talán a legfontosabb - hordozhatóbb lesz.</P
><P
>&#13;</P
></DIV
><DIV
CLASS="section"
><HR/><H2
CLASS="section"
><A
NAME="intro-htb"/>2.2. Mi az a HTB?</H2
><P
>&#13;     A <A
HREF="http://luxik.cdi.cz/~devik/qos/htb/"
TARGET="_top"
>Hierarchichal Token
      Bucket</A
> a CBQ-nál egyszerûbb konfigurációs paraméterekkel rendelkezõ csoportnyi qdisc, melyet Martin Devera alkotott meg.
	   A HTB-rõl és használatáról elég sok dokumentum található a szerzõ honlapján, valamint <A
HREF="http://www.docum.org/"
TARGET="_top"
>Stef Coene weboldalán</A
> is.
	   Következzen egy rövid kis ismertetõ a HTB rendszerrõl. </P
><P
>&#13;      Alapvetõen a HTB egy tetszõleges számú, hierarchikusan felépített  jeltároló (token bucket) (...igen, erre könnyen rájöhettél magadtól is).
Tételezzük fel a legegyszerûbb esetet:
Bármilyen eszközön az elsõdleges kilépési sor a <TT
CLASS="constant"
>root</TT
> qdisc.
    </P
><P
>&#13;      A <TT
CLASS="constant"
>root</TT
> qdisc egyetlen osztályt fog tartalmazni (komplex esetekben több osztály is csatolódik a <TT
CLASS="constant"
>root</TT
> qdisc-hez).
	   Az egyszerû HTB osztályt két paraméter jellemzi: a <TT
CLASS="constant"
>rate</TT
> (mérték) és a <TT
CLASS="constant"
>ceil</TT
> (plafon).
	    A top-level (legfelsõbb szintû) osztálynál ezek az értékek meg kell, hogy egyezzenek és a kapcsolat teljes sávszélességét mutatják. 
    </P
><P
>&#13;      A HTB-nél, a <TT
CLASS="constant"
>rate</TT
> jelenti egy osztály számára a garantált sávszélességet, a <TT
CLASS="constant"
>ceil</TT
> pedig a maximális sávszélességet.
A <TT
CLASS="constant"
>rate</TT
> és a <TT
CLASS="constant"
>ceil</TT
> közötti sávszélességet mindig a szülõ osztálytól veszi az alkalmazás, 
vagyis a legfelsõ szinten lévõ osztálynál a <TT
CLASS="constant"
>rate</TT
> és a  <TT
CLASS="constant"
>ceil</TT
> ugyanannyi lesz.
</P
><P
>&#13;      Számos gyerek-osztály létesíthetõ ez alatt az osztály alatt, kezdetben mindegyikhez némi sávszélességet rendelve a szülõ-osztály meglévõ készletébõl.
	  Ezekben a gyerek-osztályokban már nem kell a <TT
CLASS="constant"
>rate</TT
> és a <TT
CLASS="constant"
>ceil</TT
> paramétereknek megegyezniük, mint a szülõ osztálynál.
	   Ez lehetõvé teszi, elõre meghatározott sávszélesség tartalékolását bizonyos osztályoknak.
	   Lehetõvé válik továbbá a HTB számára, hogy összehasonlítsa a meglévõ sávszélesség eloszlását az osztályok sávszélességeivel.
	   A következõ példa talán rávilágít a lényegre: 
    </P
><P
>&#13;A Hierarchical Token Bucket magában foglal egy osztálynyi besoroló mechanizmust a Linuxon való forgalomirányításhoz,
és ott van még a felhasználónak a <TT
CLASS="constant"
>rate</TT
> és a <TT
CLASS="constant"
>ceil</TT
> paraméter az egyes osztályok abszolút sávszélességének szabályozásához,
 valamint, hogy jelezze a sávszélesség eloszlását, amikor extra sávszélesség adódik (egészen a <TT
CLASS="constant"
>ceil</TT
>-ig).
    </P
><P
>&#13;     Jegyezzük meg, hogy a top-level osztály sávszélességének a beállításakor a forgalom alakításnak (shaping) csak akkor lesz értelme,
	 ha a szûk keresztmetszet a hálózat és az Internet között az a gép, amin dolgozunk.
	  Tipikusan ilyen eset az otthoni vagy irodai hálózati környezet, ahol az egész helyi hálózatot DSL vagy T1 kapcsolatok kötik össze.
</P
><P
>&#13;Gyakorlatilag ez annyit jelent, hogy a top-level osztály sávszélességét úgy kell beállítani,
hogy vesszük az egész, rendelkezésre álló sávszélességet és kivonunk belõle egy keveset.
</P
></DIV
><DIV
CLASS="section"
><HR/><H2
CLASS="section"
><A
NAME="intro-tcng"/>2.3. Mi is az a <B
CLASS="command"
>tcng</B
>?</H2
><P
>&#13; A <A
HREF="http://tcng.sourceforge.net/"
TARGET="_top"
> tcng (Traffic Control - Next Generation, következõ generációs forgalomirányítás)</A
> Werner Almesberger projektje, erõteljes, egységes és egyértelmû nyelvezet megteremtésére,
 amellyel a forgalomirányítási szerkezetek pontosan megfogalmazhatók.
  A <B
CLASS="command"
>tcng</B
> csomagban található <B
CLASS="command"
>tcc</B
> fordító alakítja át a tcng nyelvet többféle kimeneti formára.
   Alapesetben a <B
CLASS="command"
>tcc</B
> beolvas egy fájlt (amely argumentumként, vagy STDIN-ként adható meg) és a STDOUT kimenetre küld egy sorozat <B
CLASS="command"
>tc</B
> parancsot, 
   amelyek az elképzelt forgalomirányítási szerkezetet a rendszermagban létrehozzák. (lásd az <B
CLASS="command"
>iproute2</B
> fejezetet lentebb)
    </P
><P
>&#13;      A támogatott rendezési elveket megtalálod a <A
HREF="http://linux-ip.net/gl/tcng/node159.html"
TARGET="_top"
><B
CLASS="command"
>tcng Queuing discipline parameters</B
></A
>(Útmutató a <B
CLASS="command"
>tcng</B
> paramétereihez) dokumentumban.
	   A tcng projekthez a HTB támogatást Jacob Teplitsky írta, aki aktív tag a <A
HREF="http://lartc.org/#mailinglist"
TARGET="_top"
>LARTC levelezési listán</A
>.
</P
><P
>&#13;      A <B
CLASS="command"
>tcc</B
> eszköz sokféle kimenetet tud produkálni, ez a dokumentum azonban csak a legáltalánosabb és alapértelmezett kimeneti eredménnyel foglalkozik.
	   A <A
HREF="http://linux-ip.net/gl/tcng/"
TARGET="_top"
>TCNG képzikönyv</A
> foglalkozik bõvebben a <B
CLASS="command"
>tcng</B
> parancs használatával.
    </P
><P
>&#13;      A <B
CLASS="command"
>tcsim</B
> eszköz képes szimulálni az adott forgalomirányítási szabályokkal beállított rendszermag viselkedését,
	  mégpedig úgy, hogy tcng beállítófájlokat olvas és értelmez.
Habár a <B
CLASS="command"
>tcsim</B
> elég jelentõs részét képezi a <B
CLASS="command"
>tcng</B
> projectnek, itt többet nem foglalkozunk vele. 
    </P
></DIV
></DIV
><DIV
CLASS="section"
><HR/><H1
CLASS="section"
><A
NAME="requirements"/>3. Követelmények</H1
><P
>&#13;  Van néhány dolog, ami szükséges ahhoz, hogy 
 <A
HREF="#requirements-kernel"
>a rendszermag támogassa a HTB-t és DSMARK-ot</A
>, 
    <A
HREF="#requirements-tc"
>a tc támogassa a HTB-t és a DSMARK-ot</A
>, és, hogy
    <A
HREF="#requirements-tcng"
>a tcng mûködjön</A
>. 
  </P
><P
>&#13;  Ahhoz, hogy ez a dokumentum használható legyen, feltétlenül kell egyrészt egy olyan rendszermag,
  amely támogatja a HTB-t, másrészt a tc alkalmazás (elég csak a doksi címére utalni).
A DSMARK támogatás, a szó szoros értelmében nem feltétel, bár néhány <A
HREF="#examples"
>példa</A
> (különösen az osztály kiválasztási útvonal, de lehet, hogy más példák is) nem biztos, hogy mûködik e nélkül. </P
><DIV
CLASS="section"
><HR/><H2
CLASS="section"
><A
NAME="requirements-kernel"/>3.1. Rendszermag követelmények</H2
><P
>&#13;   A rendszermag követelményeknek egyszerû megfelelni.
A 2.4.20 és újabb rendszermagok beépített HTB és DSMARK támogatást tartalmaznak.
Szóval egyszerûen csak be kell kapcsolni ezeket az opciókat (QoS/FAIR Queing szekció). A rendszermag beállításáról bõvebben olvashatsz a <A
HREF="http://diffserv.sourceforge.net/#24"
TARGET="_top"
>DiffServ project</A
>  honlapján.
    </P
><P
>&#13;      2.4.20-nál régebbi rendszermagok esetében 
<A
HREF="http://luxik.cdi.cz/~devik/qos/htb/v3/htb3.6-020525.tgz"
TARGET="_top"
>ez a link
</A
> egy folt (patch) a 2.4.17 vagy újabb kernelekhez. 
    </P
></DIV
><DIV
CLASS="section"
><HR/><H2
CLASS="section"
><A
NAME="requirements-tc"/>3.2. <B
CLASS="command"
>tc</B
> követelmények</H2
><P
>&#13;      A <B
CLASS="command"
>tc</B
> parancs az <B
CLASS="command"
>iproute2</B
> eszközcsomag része.
	  Az <B
CLASS="command"
>iproute2</B
> általános leírása a <A
HREF="http://linux-ip.net/>http://linux-ip.net/</ulink> valamint az <ulink url=http://linux-ip.net/gl/ip-cref/"
TARGET="_top"
> <B
CLASS="command"
>iproute2</B
> kézikönyv</A
> oldalakon található.
A csomagot közvetlenül az <A
HREF="ftp://ftp.inr.ac.ru/ip-routing/"
TARGET="_top"
>Alexey Kuznyecov FTP archívuma</A
> webhelyrõl lehet letölteni, de a legtöbb disztribúcióban megtalálható csomagként is.
Ha RPM csomagkezelõt használsz, errõl a 
      <A
HREF="http://linux-ip.net/traffic-control/iproute-2.4.7-7.src.rpm"
TARGET="_top"
>SRPM</A
> webhelyrõl letöltheted a forrást, majd lefordíthatod a rendszernek megfelelõen.
</P
><P
>&#13;      Ha az <B
CLASS="command"
>iproute2</B
> programot forrásból telepíted, használható <A
HREF="http://luxik.cdi.cz/~devik/qos/htb/"
TARGET="_top"
>Martin Devera HTB</A
> webhelyen található <A
HREF="http://luxik.cdi.cz/~devik/qos/htb/v3/htb3.6-020525.tgz"
TARGET="_top"
> <B
CLASS="command"
>tc</B
> programhoz szükséges folt</A
>.
	   Erre azért van szükség, hogy a <B
CLASS="command"
>tc</B
> programban legyen HTB támogatás.
    </P
><P
>&#13; A <B
CLASS="command"
>tc</B
>-nek támogatnia kell továbbá a dsmark-ot, a diffserv jelölõ mechanizmust.
 Szerencsére ez egyszerûen megoldható, 
az <B
CLASS="command"
>iproute2</B
> forrásában található <TT
CLASS="filename"
>Config</TT
> fájlban az alábbiakat kell megváltoztatni:
a <TT
CLASS="computeroutput"
>TC_CONFIG_DIFFSERV=n</TT
> sort <TT
CLASS="computeroutput"
>TC_CONFIG_DIFFSERV=y</TT
> -ra kell cserélni, 
majd a csomagot újra kell fordítani.
    </P
><P
>&#13;Az <A
HREF="http://linux-ip.net/traffic-control/iproute-2.4.7-7.src.rpm"
TARGET="_top"
>SRPM</A
> dsmark és HTB támogató <B
CLASS="command"
>tc</B
> binárist készít, így az alábbi példáknál már nem lesz gond. </P
></DIV
><DIV
CLASS="section"
><HR/><H2
CLASS="section"
><A
NAME="requirements-tcng"/>3.3. <B
CLASS="command"
>tcng</B
> követelmények</H2
><P
>&#13;    Talán a telepítés legkönnyebb része a <B
CLASS="command"
>tcng</B
> támogatás megoldása.
	Csak ki kell csomagolni a forrást, és futtatni kell a 
<TT
CLASS="userinput"
><B
>./configure --no-tcsim</B
></TT
> parancsot fordítás elõtt. 
    </P
><P
>&#13; Ha RPM-alapú Linux fut a gépen, használhatod a SPEC fájlt <TT
CLASS="filename"
>tcng/build/tcng.spec</TT
> a fordításhoz, vagy letöltheted és fordíthatod <A
HREF="http://linux-ip.net/traffic-control/tcng-9d-1.src.rpm"
TARGET="_top"
>ezt az SRPM-t</A
>. Az SRPM két csomagot készít: tcc és tcc-devel.
Csak a tcc-re lesz szükség a beállításokhoz. 
    </P
><P
>&#13;A tcc fordító használatához szükség van még a <B
CLASS="command"
>cpp</B
> csomagra is.
  Ezt a <B
CLASS="command"
>tcc</B
> használja.
    </P
></DIV
></DIV
><DIV
CLASS="section"
><HR/><H1
CLASS="section"
><A
NAME="examples"/>4. Beállítási példák</H1
><P
>&#13;   Az itt bemutatásra kerülõ példák az <A
HREF="http://linux-ip.net/code/tcng/"
TARGET="_top"
>ebben a könyvtárban</A
> található, letölthetõ konfigurációs példák módosított változatai.
  </P
><P
>&#13;    Ezek a példák használhatók önálló beállító fájlként a <B
CLASS="command"
>tcc</B
> fordító segítségével, vagy a példaként szereplõ <A
HREF="http://linux-ip.net/code/tcng/tcng.init"
TARGET="_top"
>SysV indító szkript</A
> használatával.
	Az indítószkript a <A
HREF="http://mailman.ds9a.nl/pipermail/lartc/2002q4/005411.html"
TARGET="_top"
> raptor által a LARTC levelezõlistán közzétett </A
> szkript egy változata.
  </P
><P
>&#13;Amennyiben a fenti indítószkriptet használod, vess egy pillantást a következõ példára: <TT
CLASS="filename"
>/etc/sysconfig/tcng</TT
>:
  </P
><DIV
CLASS="example"
><A
NAME="ex-sysconfig-tcng"/><P
><B
>Példa 1. <TT
CLASS="filename"
>/etc/sysconfig/tcng</TT
></B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;# - tcng köztes-konfigurációs fájl
#   (Soha nem használok köztes konfigurációs fájlt, nem szeretem)

#
# -- 2003-03-15 created; -MAB
# -- 2003-03-31 modified to allow ENVAR override; -MAB
#
# -- ez a könyvtár fogja tartalmazni az összes erre a host-ra 
#    vonatkozó tcng beállítást

TCCONFBASEDIR=${TCCONFBASEDIR:-/etc/sysconfig/tcng-configs}
#
# -- ez az aktív tcng beállítófájl, FIGYELEM! mivel a tcng támogatja a 
#    az #include szerkezet használatát, a $TCCONFBASEDIR 
#    változóban tárolt beállítófájlba beépíthetõek a konfigurációs
#    modulok.

#
TCCONF=${TCCONF:-$TCCONFBASEDIR/global.tcc}

tcstats=${tcstats:-no}   # -- statisztikai jelentések kikapcsolása
tcstats=${tcstats:-yes}  # -- a tc-t "-s" kapcsolóval indítja

tcdebug=${tcdebug:-0}    # -- tipikus indítószkript-használat
tcdebug=${tcdebug:-1}    # -- egy csipetnyi információ az eseményekrõl
tcdebug=${tcdebug:-2}    # -- hibakövetési információk
#
#
# még egy lehetõség: felülbírálhatók az alapbeállításként használt tc és tcc eszközök
# az elérési út megadásával, például:
#
#  tc=/usr/local/bin/tc
#  tcc=/usr/local/tcng/bin/tcc
#
#
    </PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="section"
><HR/><H2
CLASS="section"
><A
NAME="examples-adsl"/>4.1. tcng használata csak a letöltések alakításához</H2
><P
>&#13;      Ezzel a példával sok általános koncepciót próbálok meg bemutatni.
A példát a tc kimenetre a <TT
CLASS="userinput"
><B
>tcc
 <TT
CLASS="filename"
>class-selection-path.tcc</TT
></B
></TT
> parancs használatával lehet fordítani.
    </P
><DIV
CLASS="example"
><A
NAME="ex-example-0"/><P
><B
>Példa 2. <TT
CLASS="filename"
>/etc/sysconfig/tcng/class-selection-path.tcc</TT
></B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;/*
 * Egyszerû, magyarázattal ellátott tcng forgalomirányítási beállítófájl.
 *
 *   Martin A. Brown <TT
CLASS="email"
>&lt;<A
HREF="mailto:mabrown@securepipe.com"
>mabrown@securepipe.com</A
>&gt;</TT
>
 *
 * Példa:  A class selection path használata.
 *
 * (Amennyiben HTML formában olvasod a szerkesztett kimenetet, a hívások
 * linkként jelennek meg a szövegben.)
 *
 */

#include "fields.tc"     <A
NAME="ex-0-includes"
><IMG
SRC="/docbook-dsssl/callouts/1.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"/></A
>
#include "ports.tc"

#define INTERFACE  eth0  <A
NAME="ex-0-defines"
><IMG
SRC="/docbook-dsssl/callouts/2.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(2)"/></A
>

dev INTERFACE {
    egress { <A
NAME="ex-0-egress"
><IMG
SRC="/docbook-dsssl/callouts/3.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(3)"/></A
>

        /* A class selection path-ban a szûrõk jönnek elõször! Dsmark */ <A
NAME="ex-0-csp"
><IMG
SRC="/docbook-dsssl/callouts/4.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(4)"/></A
>

        class ( &lt;$ssh&gt; )    if tcp_sport ==  22 &amp;&amp; ip_tos_delay == 1 ;
        class ( &lt;$audio&gt; )  if tcp_sport == 554 || tcp_dport == 7070 ;
        class ( &lt;$bulk&gt; ) \
            if tcp_sport == PORT_SSH || tcp_dport == PORT_HTTP ; <A
NAME="ex-0-portusage"
><IMG
SRC="/docbook-dsssl/callouts/5.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(5)"/></A
>
        class ( &lt;$other&gt; )  if 1 ; <A
NAME="ex-0-leftover"
><IMG
SRC="/docbook-dsssl/callouts/6.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(6)"/></A
>

        /* Ebben a részben állítjuk be a qdiskeket és az osztályokat */ 

        htb () { <A
NAME="ex-0-root"
><IMG
SRC="/docbook-dsssl/callouts/7.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(7)"/></A
>
            class ( rate 600kbps, ceil 600kbps ) { <A
NAME="ex-0-topclass"
><IMG
SRC="/docbook-dsssl/callouts/8.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(8)"/></A
>
                $ssh   = class ( rate  64kbps, ceil 128kbps ) { sfq; } ; 
              <A
NAME="ex-0-classvariable"
><IMG
SRC="/docbook-dsssl/callouts/9.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(9)"/></A
> $audio = class ( rate 128kbps, ceil 128kbps ) { sfq; } ;
                $bulk  = class ( rate 256kbps, ceil 512kbps ) { sfq; } ;
                $other = class ( rate 128kbps, ceil 384kbps ) { sfq; } ; <A
NAME="ex-0-embedsfq"
><IMG
SRC="/docbook-dsssl/callouts/10.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(10)"/></A
>
            }
        }
    }
}
      </PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="calloutlist"
><DL
COMPACT="COMPACT"
><DT
><A
HREF="#ex-0-includes"
><IMG
SRC="/docbook-dsssl/callouts/1.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"/></A
></DT
><DD
>&#13;           A <B
CLASS="command"
>tcng</B
> nyelvezete lehetõvé teszi a C-hez hasonló beszerkeszthetõ (include) fájlok használatát, amivel bármilyen fájlt a forráskódba illeszthetünk.
A beszerkeszthetõ fájlok elérési útja relatív az aktuális könyvtárhoz, vagy a <B
CLASS="command"
>tcng</B
> könyvtárhoz képest (alapesetben <TT
CLASS="filename"
>/usr/lib/tcng/include</TT
>).
Szigorúan véve nem szükséges a <TT
CLASS="filename"
>ports.tc</TT
> és a <TT
CLASS="filename"
>fields.tc</TT
> fájlok beszerkesztése (<TT
CLASS="constant"
>#include</TT
>), mert a <B
CLASS="command"
>tcc</B
> fordító alapból megteszi ezt.
</DD
><DD
><P
>&#13;            Az <TT
CLASS="constant"
>#include</TT
> használata rugalmas változó definiálást, és a forgalomirányítás általános elemeinek gyors beszerkeszthetõségét teszi lehetõvé.</P
></DD
><DD
><P
>&#13;            További részletek találhatók a tcng kézikönyv <A
HREF="http://linux-ip.net/gl/tcng/node35.html"
TARGET="_top"
>Include files</A
>(Beszerkesztett fájlok) címû fejezetében.
          </P
></DD
><DT
><A
HREF="#ex-0-defines"
><IMG
SRC="/docbook-dsssl/callouts/2.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(2)"/></A
></DT
><DD
>&#13;Ezek CPP direktívák. A <TT
CLASS="constant"
>#define</TT
> makrók és konstansok létrehozására szolgál. A használatáról többet a <B
CLASS="command"
>tcng</B
> kézikönyv <A
HREF="http://linux-ip.net/gl/tcng/node111.html"
TARGET="_top"
>Variables</A
> (A Változók) fejezetében olvashatsz. 
          </DD
><DT
><A
HREF="#ex-0-egress"
><IMG
SRC="/docbook-dsssl/callouts/3.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(3)"/></A
></DT
><DD
>&#13;Az <TT
CLASS="constant"
>egress</TT
> kulcsszó a <TT
CLASS="constant"
>dsmark</TT
> szinonimája. Az itt szereplõ példa a <A
HREF="http://linux-ip.net/gl/tcng/node32.html"
TARGET="_top"
>class selection path</A
> módszert használja. Ez az <TT
CLASS="constant"
>egress</TT
> kulcsszó használata ebben a konfigurációban, szükséges hozzá a rendszermag dsmark támogatása és a <B
CLASS="command"
>tc</B
>.
          </DD
><DT
><A
HREF="#ex-0-csp"
><IMG
SRC="/docbook-dsssl/callouts/4.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(4)"/></A
></DT
><DD
>&#13;            A class selection path egyfajta megközelítési módja a forgalom alalkításnak. A class selection path-ban a csomag a routerbe kerülésekor jelölést kap (DiffServ jel). Ennek a kezdeti osztályozásnak az eredményeként a router bármennyi mûveletet végrehajthat, bármennyi szabályt (engedélyezés, besorolás, alakítás) alkalmazhat a csomagon. </DD
><DD
><P
>&#13;További részletek találhatók a <B
CLASS="command"
>tcng</B
> kézikönyvben az <A
HREF="http://linux-ip.net/gl/tcng/node32.html"
TARGET="_top"
>on class selection path</A
> (A class selection path-ról) fejezetben.</P
></DD
><DT
><A
HREF="#ex-0-portusage"
><IMG
SRC="/docbook-dsssl/callouts/5.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(5)"/></A
></DT
><DD
>&#13;Ez a példa a kapuk (portok) jelölésénél a nevek használatát mutatja be a számok használata helyett. Ez a <B
CLASS="command"
>tcng</B
> egyik kényelmi funkciója (a <TT
CLASS="filename"
>ports.tc</TT
> automatikus beszerkesztésén keresztül válik elérhetõvé). A kapuk elnevezésénél az IANA által használt kapu-nevek az irányadók.
Lásd az <A
HREF="http://www.iana.org/assignments/port-numbers"
TARGET="_top"
>IANA regisztrált portok </A
> oldalt a szabványos nevekért, vagy vizsgáld meg a <TT
CLASS="filename"
>ports.tc</TT
> fájlt.
          </DD
><DD
><P
>&#13;Mind a nevek, mind a számok használata elfogadott és érvényes. </P
></DD
><DT
><A
HREF="#ex-0-leftover"
><IMG
SRC="/docbook-dsssl/callouts/6.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(6)"/></A
></DT
><DD
>&#13;Figyeljük meg ezt a különös konstrukciót, amely az összes eddig nem osztályozott csomagot osztályba sorolja.
 Minden, eddig nem osztályozott csomag a "$other" osztályba kerül.
 Az <TT
CLASS="constant"
>if 1</TT
> szerkezet a nem osztályozott forgalom maradványának osztályozására szolgál.</DD
><DT
><A
HREF="#ex-0-root"
><IMG
SRC="/docbook-dsssl/callouts/7.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(7)"/></A
></DT
><DD
>&#13;Itt történik a root qdisc létrehozása, ami jelen esetben az <TT
CLASS="constant"
>eth0</TT
> eszközre van csatlakoztatva.
A <B
CLASS="command"
>tcng</B
> kézikönyv referenciaanyagai között az
            <A
HREF="http://linux-ip.net/gl/tcng/node159.html"
TARGET="_top"
>appendix on
            queuing discipline parameters</A
> (Függelék: sorba rendezés paraméterezése) fejezetben minden qdisc-hez találhatunk paramétereket.
Bármilyen qdisc paraméter beilleszthetõ a zárójelek közé, ugyanúgy, ahogy egy késõbbi példánál látni fogjuk.
Paraméter nélküli használat esetén a zárójeleket nem kötelezõ kitenni.</DD
><DT
><A
HREF="#ex-0-topclass"
><IMG
SRC="/docbook-dsssl/callouts/8.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(8)"/></A
></DT
><DD
>&#13;Ebben a példában a legfelsõ-szintû osztályhoz a maximális sávszélességet rendeljük, ami ezen osztályon keresztül mehet.
Tételezzük fel, hogy az <TT
CLASS="constant"
>eth0</TT
> a belsõ hálózati csatolója a gépnek.
Ez a teljes sávszélességet 600 kilobit/s-ra korlátozza a belsõ hálózat felé.
</DD
><DD
><P
>&#13;Akik használtak már HTB-t, azoknak a <TT
CLASS="constant"
>rate</TT
> és a <TT
CLASS="constant"
>ceil</TT
> paraméterek ismerõsek lesznek.
Ezek HTB specifikus paraméterek, és a <B
CLASS="command"
>tcc</B
> eszköz segítségével fordíthatók le pontosan.
Nézzük meg a <A
HREF="#tb-misc-rates"
><B
CLASS="command"
>tcng</B
> ütem és sebesség specifikáció</A
> részben található táblázatot!.
          </P
></DD
><DT
><A
HREF="#ex-0-classvariable"
><IMG
SRC="/docbook-dsssl/callouts/9.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(9)"/></A
></DT
><DD
>&#13;Ezen osztály hozzárendelése a változóhoz.
Ezt általában a class selection path részeként végezzük el.</DD
><DT
><A
HREF="#ex-0-embedsfq"
><IMG
SRC="/docbook-dsssl/callouts/10.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(10)"/></A
></DT
><DD
>&#13;Ahogyan azt Martin Devera is leírta a HTB honlapján, egy beágyazott SFQ 
minden osztálynak ad egy sorba rendezõ algoritmust a konkurens folyamatoknak
az adott osztályon keresztüli csomagküldés erõforrásainak megfelelõ elosztásához.  
Figyeljünk a paraméterek hiányára a beágyazott sorba rendezés elvénél. 
          </DD
><DD
><P
>&#13;Ha nem határozunk meg sorba rendezési szabályokat a végsõ osztályoknál,
 akkor az alapbeállítás érvényesül, vagyis a pfifo_fast qdisc.

 Egy sztochasztikus tiszta sorba rendezõ qdisc beszerkesztése a vég-osztályokban meggátolja azt,
 hogy egyetlen kapcsolat uralja a sávszélességet az adott osztályban.
</P
></DD
></DL
></DIV
></DIV
><P
>&#13;    </P
><P
>&#13;    </P
></DIV
><DIV
CLASS="section"
><HR/><H2
CLASS="section"
><A
NAME="examples-1"/>4.2. A kétsebességû háromszínû mérõóra használata</H2
><P
>&#13;    </P
><DIV
CLASS="example"
><A
NAME="ex-example-1"/><P
><B
>Példa 3. <TT
CLASS="filename"
>/etc/sysconfig/tcng/two-rate-three-color-meter.tcc</TT
></B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;/*
 * Egyszerû, magyarázattal ellátott tcng forgalomirányítási beállítófájl.
 *
 *   Martin A. Brown <TT
CLASS="email"
>&lt;<A
HREF="mailto:mabrown@securepipe.com"
>mabrown@securepipe.com</A
>&gt;</TT
>
 *
 * Példa: Mérõóra használata
 *
 * (Amennyiben HTML formában olvasod a szerkesztett kimenetet, a hívások
 * hivatkozásként jelennek meg a szövegben.)
 *
 */

#define   EXCEPTION      192.168.137.50
#define   INTERFACE      eth0

$meter = trTCM( cir 128kbps, cbs 10kB, pir 256kbps, pbs 10kB );  <A
NAME="ex-1-mdefine"
><IMG
SRC="/docbook-dsssl/callouts/1.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"/></A
>

dev eth0 {
    egress {
        class ( &lt;$full&gt; )     if ip_src == EXCEPTION      ; <A
NAME="ex-1-notmetered"
><IMG
SRC="/docbook-dsssl/callouts/2.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(2)"/></A
>
        class ( &lt;$fast&gt; )     if trTCM_green( $meter )    ; <A
NAME="ex-1-green"
><IMG
SRC="/docbook-dsssl/callouts/3.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(3)"/></A
>
        class ( &lt;$slow&gt; )     if trTCM_yellow( $meter )   ; <A
NAME="ex-1-yellow"
><IMG
SRC="/docbook-dsssl/callouts/4.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(4)"/></A
>
        drop                  if trTCM_red( $meter )      ; <A
NAME="ex-1-red"
><IMG
SRC="/docbook-dsssl/callouts/5.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(5)"/></A
>
        htb {
            class ( rate 600kbps, ceil 600kbps ) {
                $fast = class ( rate 256kbps, ceil 256kbps ) { sfq; } ;
                $slow = class ( rate 128kbps, ceil 128kbps ) { sfq; } ;
                $full = class ( rate 600kbps, ceil 600kbps ) { sfq; } ;
            }
        }
    }
}
      </PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="calloutlist"
><DL
COMPACT="COMPACT"
><DT
><A
HREF="#ex-1-mdefine"
><IMG
SRC="/docbook-dsssl/callouts/1.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"/></A
></DT
><DD
>&#13;            Ez az osztályozáshoz használt mérõóra deklarációja.
A háttértechnológia a mérés kivitelezésére az engedélyezés (policing).
 További információk a <A
HREF="http://linux-ip.net/gl/tcng/node53.html"
TARGET="_top"
>tcng kézikönyv
</A
> "Meters" (Mérések) fejezetben találhatók.
          </DD
><DD
><P
>&#13; Ez a kétsebességes-háromszínû mérõ a legösszetettebb mérõóratípus
a <B
CLASS="command"
>tcng</B
> nyelvben. Ez a mérõóra a zöld, sárga és piros színeket ad vissza, a tárolók foglaltságától és csúcsértékeitõl (peak) függõen.
Ha a mért sebesség nagyobb, mint a foglaltságot jelzõ érték, akkor sárga színû lesz a jelzés, ha a mért sebesség túllépi a csúcsértéket (a csúcsérték itt nem a maximális, hanem kiemelkedõ értéket jelent - a lektor), akkor piros színû lesz a jelzés.
          </P
></DD
><DD
><P
>&#13;    A <TT
CLASS="varname"
>$meter</TT
> változó a mérõóra típusának megfelelõ függvényekkel 
    mûködtethetõ. Ebben az esetben három függvény jöhet szóba a <TT
CLASS="varname"
>$meter</TT
> állapotának 
    tesztelése céljából, 
    ezek: <TT
CLASS="function"
>trTCM_green</TT
>, <TT
CLASS="function"
>trTCM_yellow</TT
>,
            és <TT
CLASS="function"
>trTCM_red</TT
>. 
            A hatékonyság növelése érdekében lapozz bele a 
            <A
HREF="http://linux-ip.net/gl/tcng/node58.html"
TARGET="_top"
>Accelerating three color meters</A
> (gyorsított háromszínû mérõk) fejezetbe.
          </P
></DD
><DT
><A
HREF="#ex-1-notmetered"
><IMG
SRC="/docbook-dsssl/callouts/2.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(2)"/></A
></DT
><DD
>&#13;            A példában a 192.168.137.50  IP címet kizártuk az eth0 eszközrõl induló engedélyezési listából.
          </DD
><DT
><A
HREF="#ex-1-green"
><IMG
SRC="/docbook-dsssl/callouts/3.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(3)"/></A
></DT
><DD
>&#13;A "foglalt" információ-sebesség eléréséig (<TT
CLASS="constant"
>cir</TT
>) a csomagok áthaladnak ezen az osztályon
A tokenek eltávolításra kerülnek a  <TT
CLASS="constant"
>cir</TT
>/<TT
CLASS="constant"
>cbs</TT
> tárolóból.
          </DD
><DD
><P
>&#13;A mérõóra zöld.
          </P
></DD
><DT
><A
HREF="#ex-1-yellow"
><IMG
SRC="/docbook-dsssl/callouts/4.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(4)"/></A
></DT
><DD
>&#13;Itt lesznek osztályozva azok a tárolók, ahol a forgalom sebessége átlépi a <TT
CLASS="constant"
>cir</TT
>/<TT
CLASS="constant"
>cbs</TT
> értéket.
A <TT
CLASS="constant"
>pir</TT
>/<TT
CLASS="constant"
>pbs</TT
> bucket
            (<TT
CLASS="constant"
>pir</TT
> a "peak information rate"="csúcs információ-sebesség"),
            <TT
CLASS="constant"
>pbs</TT
> a "peak burst size"="csúcs kitörési sebesség"). 
            Ez teszi lehetõvé egy bizonyos adatfolyam számára, hogy garantált sávszélességet kapjon egy osztályon belül, majd újra osztályozásra kerüljön.
           </DD
><DD
><P
>&#13;  A mérõóra sárga.
            </P
></DD
><DT
><A
HREF="#ex-1-red"
><IMG
SRC="/docbook-dsssl/callouts/5.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(5)"/></A
></DT
><DD
>&#13; Azok a tárolók lesznek osztályozva itt, ahol a forgalom sebessége meghaladja a <TT
CLASS="constant"
>pir</TT
>/<TT
CLASS="constant"
>pbs</TT
> 
 értéket. Az általános beállítások azt eredményezik, hogy a forgalom a csúcssebesség feletti tartományba kerül, habár a forgalmat újra osztályozva a garantált osztályból a legjobb-teljesítmény osztályba kerülne.
          </DD
><DD
><P
>&#13; A mérõóra piros.
          </P
></DD
></DL
></DIV
></DIV
><P
>&#13;    </P
></DIV
></DIV
><DIV
CLASS="section"
><HR/><H1
CLASS="section"
><A
NAME="misc"/>5. Egyéb megjegyzések</H1
><P
>&#13;  Hál Istennek a  <B
CLASS="command"
>tcng</B
> elkerüli a <B
CLASS="command"
>tc</B
>
kisebb kényelmetlenségeit. A következõ táblázat ábrázolja ezen eszközök szintaxisát és
mértékegységeit, angol megfelelõikkel együtt.
   </P
><DIV
CLASS="table"
><A
NAME="tb-misc-rates"/><P
><B
>Táblázat 1. Sebesség/Ütem szintaxis: tcng vs. tc</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><THEAD
><TR
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
>tcng</TH
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
>Angol megfelelõ</TH
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
>tc</TH
></TR
></THEAD
><TBODY
><TR
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>bps</TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>bit(s) per second</TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>bit</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>Bps</TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>byte(s) per second</TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>bps (argh!)</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>kbps</TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>kilobit(s) per second</TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>kbit</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>kBps</TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>kilobyte(s) per second</TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>kbps</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>Mbps</TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>megabit(s) per second</TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>mbit or Mbit</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>MBps</TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>megabyte(s) per second</TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>mbps or Mbps</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>pps</TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>packet per second</TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>??</TD
></TR
></TBODY
></TABLE
></DIV
><P
>&#13;  Ez csak minimális igazítást igényel az õsrégi <B
CLASS="command"
>tc</B
> felhasználóktól,
   de sokkal jobb választás az angolul beszélõknek ha a megérzéseikre szeretnének hagyatkozni.
   </P
><P
>&#13;   Például a <B
CLASS="command"
>tcng</B
> konfigurációjában használhatjuk a sebesség jelölésére a konvencionális kifejezéseket:
     <TT
CLASS="userinput"
><B
>100Mbps</B
></TT
>, <TT
CLASS="userinput"
><B
>128kbps</B
></TT
>, sõt  <TT
CLASS="userinput"
><B
>2Gpps</B
></TT
>.
   Bõvebben a <B
CLASS="command"
>tcng</B
> kézikönyv
    <A
HREF="http://linux-ip.net/gl/tcng/node21.html"
TARGET="_top"
>Units</A
> (a mértékegységekrõl) fejezetében olvashatunk.
  </P
><P
>&#13;    A forgalomirányítás hatékonysága érdekében meg kell keresni a hálózat szûk keresztmetszeti pontjait.
    Legtöbb esetben ezeken a helyeken kell elvégezni a mûveleteket. </P
><P
>&#13;  </P
></DIV
><DIV
CLASS="section"
><HR/><H1
CLASS="section"
><A
NAME="further"/>6. További leírások és hivatkozások</H1
><P
>&#13;  </P
><P
></P
><UL
><LI
><P
>&#13;        <A
HREF="http://diffserv.sourceforge.net/"
TARGET="_top"
>the linux DiffServ
        project</A
>
      </P
></LI
><LI
><P
>&#13;        <A
HREF="http://luxik.cdi.cz/~devik/qos/htb/"
TARGET="_top"
>HTB
        site (<EM
>Martin <SPAN
CLASS="QUOTE"
>"devik"</SPAN
> Devera</EM
>)</A
> (HTB honlap)
      </P
></LI
><LI
><P
>&#13;         <A
HREF="http://tcng.sourceforge.net/"
TARGET="_top"
>Traffic Control Next
         Generation (<B
CLASS="command"
>tcng</B
>)</A
> (következõ generációs forgalomirányítás)
      </P
><P
>&#13;        <A
HREF="http://linux-ip.net/gl/tcng/"
TARGET="_top"
>TCNG manual
        (<EM
>Werner Almesberger</EM
>)</A
> (TCNG kézikönyv)
      </P
></LI
><LI
><P
>&#13;        <A
HREF="ftp://ftp.inr.ac.ru/ip-routing/"
TARGET="_top"
>iproute2
        (<EM
>Alexey Kuznetsov</EM
>)</A
>
      </P
><P
>&#13;        <A
HREF="http://linux-ip.net/gl/ip-cref/"
TARGET="_top"
><B
CLASS="command"
>iproute2</B
>
        manual (<EM
>Alexey Kuznetsov</EM
>)</A
> (iproute2 kézikönyv)
      </P
></LI
><LI
><P
>&#13;        <A
HREF="http://www.docum.org/"
TARGET="_top"
>Research and documentation on
        traffic control under linux (<EM
>Stef Coene</EM
>)</A
> (Forrásanyagok és dokumentációk a forgalomirányításról Linux alatt)
      </P
></LI
><LI
><P
>&#13;        <A
HREF="http://lartc.org/howto/"
TARGET="_top"
>LARTC HOWTO (<EM
>bert
        hubert, et.  al.</EM
>)</A
>
      </P
></LI
><LI
><P
>&#13;        <A
HREF="http://linux-ip.net/"
TARGET="_top"
>guide to IP networking with
        linux (<EM
>Martin A. Brown</EM
>)</A
> (Az IP hálózati protokoll használata Linuxszal)
      </P
></LI
></UL
></DIV
></DIV
></BODY
></HTML
>
