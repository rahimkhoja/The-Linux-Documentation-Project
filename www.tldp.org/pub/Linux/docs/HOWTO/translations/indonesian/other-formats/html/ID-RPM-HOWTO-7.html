<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.7">
 <TITLE>RPM HOWTO (RPM saat stasioner.....:-)): Pembangunan RPM multi-arsitektur</TITLE>
 <LINK HREF="ID-RPM-HOWTO-8.html" REL=next>
 <LINK HREF="ID-RPM-HOWTO-6.html" REL=previous>
 <LINK HREF="ID-RPM-HOWTO.html#toc7" REL=contents>
</HEAD>
<BODY>
<A HREF="ID-RPM-HOWTO-8.html">Next</A>
<A HREF="ID-RPM-HOWTO-6.html">Previous</A>
<A HREF="ID-RPM-HOWTO.html#toc7">Contents</A>
<HR>
<H2><A NAME="s7">7. Pembangunan RPM multi-arsitektur</A></H2>

<P>Sekarang RPM dapat digunakan untuk membangun paket untuk Intel i386,
Digital Alpha yang menjalankan Linux, dan Sparc. RPM juga dilaporkan bekerja
dalam SGI dan workstation HP dengan baik. Ada beberapa kemampuan yang membuat
pembangunan dalam <EM>platform</EM>-<EM>platform</EM> tersebut menjadi mudah,
Pertama adalah directive ``optflags'' yang ada dalam <CODE>/etc/rpmrc</CODE>. Ini dapat
digunakan untuk mengeset flag yang digunakan saat membangun perangkat lunak
ke arsitektur yang spesifik. Kemampuan lain adalah makro ``arch'' dalam
file spesifikasi. Mereka dapat digunakan untuk mengerjakan sesuatu yang
berbeda berdasarkan atas arsitektur dimana anda membangunnya. Kemampuan
yang lain lagi adalah directive ``Exclude'' dalam <EM>header</EM> / kepalanya.
<P>
<H2><A NAME="ss7.1">7.1 Contoh file spesikasi</A>
</H2>

<P>Bagian di bawah ini adalah file spesifikasi dari paket ``fileutils''.
Ini adalah setup untuk dibangun di atas Alpha dan Intel.
<P>
<BLOCKQUOTE><CODE>
<PRE>
Summary: GNU File Utilities
Name: fileutils
Version: 3.16
Release: 1
Copyright: GPL
Group: Utilities/File
Source0: prep.ai.mit.edu:/pub/gnu/fileutils-3.16.tar.gz
Source1: DIR_COLORS
Patch: fileutils-3.16-mktime.patch

%description
These are the GNU file management utilities.  It includes programs
to copy, move, list, etc, files.

The ls program in this package now incorporates color ls!

%prep
%setup

%ifarch alpha
%patch -p1
autoconf
%endif
%build
configure --prefix=/usr --exec-prefix=/
make CFLAGS="$RPM_OPT_FLAGS" LDFLAGS=-s

%install
rm -f /usr/info/fileutils*
make install
gzip -9nf /usr/info/fileutils*

.
.
.
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H2><A NAME="ss7.2">7.2 Optflags</A>
</H2>

<P>Dalam contoh tersebut, anda melihat bagaimana directive ``optflags''
digunakan dalam <CODE>/etc/rpmrc</CODE>. Bergantung kepada arsitektur mana anda membangunnya,
harga yang wajar diberikan kepada RPM_OPT_FLAGS. Anda harus menambal Makefile
untuk paket anda untuk menggunakan variabel ini di tempat directive yang
normal yang mungkin anda gunakan seperti -m486 dan -O2. Anda dapat merasakan
perasaan yang nyaman untuk kebutuhan apa yang harus dikerjakan dengan meng<EM>install</EM>
paket <EM>source</EM> ini dan kemudian melakukan unpack <EM>source</EM> dan
menguji Makefile. Setelah itu lihatlah <EM>patch</EM> untuk Makefile dan
lihat perubahan apa yang harus dibuat.
<P>
<H2><A NAME="ss7.3">7.3 Makro</A>
</H2>

<P>Makro <CODE>%ifarch</CODE> sangat penting secara keseluruhan. Banyak waktu akan diperlukan
untuk membuat sebuah <EM>patch</EM> atau dua yang spesifik ke satu arsitektur
saja. dalam kasus ini, RPM akan mengizinkan anda untuk menerapkan <EM>patch</EM>
itu untuk satu arsitektur saja.
<P>Dalam contoh di atas fileutils mempunyai <EM>patch</EM> untuk mesin 64
bit. Dengan jelas, ini seharusnya diterapkan untuk Alpha saat ini. Jadi,
kami menambahkan sebuah makro %ifarch di sekitar <EM>patch</EM> 64 bit seperti
ini :
<P>
<BLOCKQUOTE><CODE>
<PRE>
%ifarch axp
%patch1 -p1
%endif
</PRE>
</CODE></BLOCKQUOTE>

<UL>
<LI><P>Hal tersebut akan memastikan bahwa <EM>patch</EM> itu tidak diterapkan
untuk semua arsitektur, kecuali alpha.
</LI>
</UL>
<P>
<H2><A NAME="ss7.4">7.4 Membuat perkecualian Arsitektur dari Paket</A>
</H2>

<P>Anda dapat memelihara <EM>source</EM> RPM dalam satu direktori untuk semua
paltform, kami telah mengimplementasikan kemampuan untuk ``mengecualikan''
paket dari proses pembangunan dalam arsitektur tertentu. Dengan ini anda
masih dapat mengerjakan sesuatu seperti 
<P>
<BLOCKQUOTE><CODE>
<PRE>
rpm --rebuild /usr/src/SRPMS/*.rpm
</PRE>
</CODE></BLOCKQUOTE>
<P>dan mendapatkan paket yang benar sudah dibangun. Bila anda belum membuat
porting sebuah aplikasi dalam <EM>platform</EM> tertentu, semua yang harus
anda lakukan adalah menambahkan sebuah baris, seperti :
<P>
<BLOCKQUOTE><CODE>
<PRE>
ExcludeArch: axp
</PRE>
</CODE></BLOCKQUOTE>
<P>ke dalam kepala dari file spesifikasi dari paket <EM>source</EM>. Kemudian
bangun ulang paketnya di atas <EM>platform</EM> dimana ia telah dibangun
di atasnya. Anda akan mempunyai paket <EM>source</EM> yang dibangun di atas
Intel dan dapat dengan mudah berpindah ke atas Alpha.
<P>
<H2><A NAME="ss7.5">7.5 Penyelesaian Akhir</A>
</H2>

<P>Menggunakan RPM untuk membuat paket multi-arsitektur pada umumnya lebih
mudah dikerjakan daripada mendapatkan paket itu sendiri dibangun dalam
kedua tempat. Seperti lebih dari paket yang dibangun, ini akan menjadi
mudah, bagaimana pun juga. Sebagaimana lazimnya, bantuan yang terbaik saat
anda mulai bingung dalam membangun sebuah RPM adalah melihat paket <EM>source</EM>
yang mirip.
<P>
<HR>
<A HREF="ID-RPM-HOWTO-8.html">Next</A>
<A HREF="ID-RPM-HOWTO-6.html">Previous</A>
<A HREF="ID-RPM-HOWTO.html#toc7">Contents</A>
</BODY>
</HTML>
