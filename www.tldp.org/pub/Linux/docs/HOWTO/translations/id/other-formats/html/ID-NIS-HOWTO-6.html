<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.7">
 <TITLE>Linux NIS(YP)/NIS/NIS+ HOWTO : Apa yang Anda perlukan untuk men set-up NIS ?</TITLE>
 <LINK HREF="ID-NIS-HOWTO-7.html" REL=next>
 <LINK HREF="ID-NIS-HOWTO-5.html" REL=previous>
 <LINK HREF="ID-NIS-HOWTO.html#toc6" REL=contents>
</HEAD>
<BODY>
<A HREF="ID-NIS-HOWTO-7.html">Next</A>
<A HREF="ID-NIS-HOWTO-5.html">Previous</A>
<A HREF="ID-NIS-HOWTO.html#toc6">Contents</A>
<HR>
<H2><A NAME="s6">6. Apa yang Anda perlukan untuk men set-up NIS ?</A></H2>

<H2><A NAME="ss6.1">6.1 Tentukan apakah Anda akan bertinda sebagai server, pelayan atau klien.</A>
</H2>

<P>Untuk menjawab pertanyaan ini, Anda harus memperhatikan dua keadaan 
berikut ini :
<OL>
<LI>Mesin Anda merupakan bagian dari sebuah jaringan yang telah ada 
server NIS nya.</LI>
<LI>Pada saat ini Anda belum memiliki server NIS pada jaringan.</LI>
</OL>
<P>Pada kasus pertama, Anda hanya membutuhkan program untuk klien 
(ypbind,ypwhich, ypcat, yppoll, ypmatch). Program yang paling penting 
adalah ypbind. Program ini selalu harus dijalankan setiap saat dan 
harus selalu muncul pada setiap daftar-daftar proses. Sehingga disebut 
proses daemon dan perlu diaktifkan dari berkas untuk start-up milik 
sistem (contoh: /etc/rc.local, /etc/init.d/nis,/ etc/rc.d/init.d/
ypbind). Segera pada saat program ypbind jalan, maka sistem Anda 
telah menjadi klien NIS.
<P>Pada kasus ke dua, jika Anda tidak memiliki server NIS, maka Anda 
memerlukan program untuk server NIS (biasanya disebut ypserv). Seksi 8 
menjelaskan bagaimana melakukan set-up pada server NIS pada mesin 
Linux Anda dengan menggunakan "ypserv", yang implementasi ypserv ini 
dilakukan oleh Peter Eriksson dan Thorsten Kukuk. Catatat bahwa mulai 
versi 0.14, implementasi ini mendukung konsep majikan-pembantu, yang 
akan dibicarakan pada seksi 4.1.
<P>Terdapat pula server NIS yang lain yang juga gratis, disebut "yps", 
ditulis oleh Tobias Reber di Jerman yang juga mendukung konsep 
majikan- pembantu, tetapi banyak terdapat keterbatasan dan di mendapat 
dukungan lagi.
<P>
<H2><A NAME="ss6.2">6.2 Perangkat lunak</A>
</H2>

<P>Library system "/usr/lib/libc.a" (versi 4.4.2 dan yang lebih baru) 
atau library yang dapat dipergunakan bersama-sama (share) 
"/lib/libc.so.c" berisi semua system calls yang dibutuhkan agar dapat 
berhasil mengkompile klien NIS dan servernya. Untuk glibc 2.x, Anda 
membutuhkan pula /lib/libnsl.so.1.
<P>Beberapa orang melaporkan bahwa NIS hanya bekerja pada 
"/usr/lib/libc.a" versi 4.5.21 atau yang lebih baru, sehingga apabila 
Anda ingin menggunakannya jangan menggunakan libc versi yang lebih 
lama. Program untuk klien NIS bisa didapatkan dari
<BLOCKQUOTE><CODE>
<PRE>
Site                    Directory                       File Name

ftp.uni-paderborn.de    /linux/local/yp                 yp-clients-
2.2.tar.gz
ftp.uni-paderborn-de    /linux/local/yp                 ypbind-
3.3.tar.gz
ftp.kernel.org          /pub/linux/utils/net/NIS        yp-tools-
1.4.tar.gz
ftp.kernel.org          /pub/linux/utils/net/NIS        ypbind-
3.3.tar.gz
sunsite.unc.edu         /pub/Linux/system/Network/admin yp-clients-
2.2.tar.gz
</PRE>
</CODE></BLOCKQUOTE>
<P>Apabila Anda telah mendapatkan program tersebut, silahkan mengikuti 
instruksi yang menyertai program tersebut. yp-clients 2.2 dapat 
dipergunakan bersama dengan libc4 dan libc5 sampai 5.4.20. libc 5.4.21 
dan glibc 2.x perlu yp-tools 1.4. Karena adanya bugs pada kode-kode 
NIS, maka sebaiknya Anda tidak menggunakan libc 5.4.21-5.4.35. 
Gunakan saja libc 5.4.36 atau yang lebih baru. ypbind 3.3 dapat bekeja 
dengan semua libraries. Sebaiknya Anda tidak menggunakan ypbind yang 
berasal dari yp-clients 2.2.
<P>
<H2><A NAME="ss6.3">6.3 Daemon milik ypbind.</A>
</H2>

<P>Dengan assumsi Anda telah berhasil mengkompile program-program 
tersebut, maka Anda telah siap untuk menginstal program tersebut. 
Tempat yang sesuai untuk meletakkan daemon ypbind adalah pada 
direktori /usr/sbin. Beberapa orang mungkin mengatakan kepada Anda, 
bahwa Anda tidak memerlukan ypbind pada sistem yang menggunakan 
NYS. Tetapi pendapat ini salah, ypwhich dan ypcat memerlukannya.
<P>Untuk melakukan instalasi ini, Anda harus bertindak sebagai root. 
Berkas-berkas biner yang lain (ypwhich, ypcat, yppoll, ypmatch) 
sebaiknya diletakkan pada direktori yang dapat diakses oleh semua 
pemakai, biasanya /usr/bin.
<P>Proses ypbind memiliki berkas konfigurasi yang disebut /etc/yp.conf. 
Anda dapat memasukkan nama-nama server NIS disana, untuk informasi 
lebih lanjut, silahkan lihat pada halaman manual untuk ypbind(8). 
Anda memerlukan file ini pula untuk NYS. Sebagai contoh isi dari file 
konfigurasi tersebut adalah
<BLOCKQUOTE><CODE>
<PRE>
  ypserver voyager
  ypserver ds9
</PRE>
</CODE></BLOCKQUOTE>
<P>Jika sistem bisa mendapatkan nama hosts di atas tanpa melalui NIS, 
Anda dapat menggunakan nama servernya , tetapi apabila tidak, maka 
Anda harus menggunakan alamat IP nya.
<P>Lebih baik Anda melakukan test terlebih dahulu sebelum mengaktifkan 
ypbind secara otomatis melalui berkas /etc/rc.d. Untuk melakukan test 
tersebut, kerjakan langkah-langkah berikut :
i
<UL>
<LI>Pastikan nama domain Anda telah di set. Jika belum, jalankan 
perintah berikut :

<BLOCKQUOTE><CODE>
<PRE>
        /bin/domainname nis.domain
      
</PRE>
</CODE></BLOCKQUOTE>

dimana <CODE>nis.domain</CODE> sebaiknya merupakan string, dan sama sekali 
tidak berhubungan dengan nama domain dari mesin Anda ! Alasannya 
adalah untuk mempersulit orang-orang yang ingin mencuri basis data 
password dari server NIS Anda. Jika Anda tidak mengetahui nama domain 
NIS Anda, hubungi system/network administrator Anda.
</LI>
<LI>Jalankan "/usr/sbin/portmap" jika program tersebut masih belum 
jalan.
</LI>
<LI>Buat direktori "/var/yp" jika belum ada.
</LI>
<LI>Jalankan "/usr/sbin/ypbind"
</LI>
<LI>Gunakan perintah "rpcinfo -p localhost" untuk memeriksa apakah 
ypbind dapat mendaftarkan servicenya dengan portmapper. rpcinfo 
seharusnya menghasilkan output seperti berikut :

<BLOCKQUOTE><CODE>
<PRE>
        program vers    proto   port
         100000     2   tcp     111  portmapper
         100000     2   udp     111  portmapper
         100007     2   udp     637  ypbind
         100007     2   tcp     639  ypbind
         300019       1 udp     660
      
</PRE>
</CODE></BLOCKQUOTE>

</LI>
<LI>Anda sebaiknya juga menjalankan "rpcinfo -u localhost ypbind". 
Perintah ini seharusnya menghasilkan output seperti berikut :

<BLOCKQUOTE><CODE>
<PRE>
        program 100007 version 2 ready and waiting
      
</PRE>
</CODE></BLOCKQUOTE>

</LI>
</UL>
<P>Pada saat ini Anda seharusnya sudah dapat menggunakan program untuk 
klien NIS seperti ypcat, dll... Sebagai contoh "ypcat passwd" akan 
menampilkan isi seluruh basis data password dari NIS.
<P>Penting: jika Anda tidak melakukan prosedure tes di atas, pastikan 
bahwa Anda telah men set nama domain dan membuat direktori :
<P>
<BLOCKQUOTE><CODE>
<PRE>
  /var/yp
</PRE>
</CODE></BLOCKQUOTE>
<P>Direktori ini harus ada sehingga ypbind dapat berjalan dengan baik.
<P>Jika tes tersebut berjalan baik, mungkin Anda ingin merubah isi berkas 
/etc/rc.d pada sistem Anda, sehingga ypbind dapat berjalan secara 
otomatis pada saat booting pertama kali, dan secara otomatis pula 
mesin Anda menjadi klien NIS. Pastikan pula bahwa nama domain juga di 
set pada saat booting pertama.
<P>Booting ulang mesin Anda, dan lihat pada pesan-pesan pada saat 
booting, lihat apakah ypbind juga diaktifkan.
<P>
<H2><A NAME="ss6.4">6.4 Melakukan setting klien NIS menggunakan NIS yang tradisional</A>
</H2>

<P>Untuk pencarian nama host yang menggunakan NIS, Anda harus 
menambah "nis" pada berkas /etc/host.conf. Silahkan baca manual 
"resolv+8" untuk lebih detail.
<P>Tambahkan baris berikut ini pada berkas /etc/passwd di klien NIS Anda:
<P>
<BLOCKQUOTE><CODE>
<PRE>
+::::::
</PRE>
</CODE></BLOCKQUOTE>
<P>Anda dapat pula menggunakan karakter + dan - untuk menyertakan/tidak 
menyertakan atau merubah user. Jika Anda ingin tidak menyertakan user 
guest, tambahkan saja -guest pada berkas /etc/passwd. Apakah Anda 
ingin menggunakan shell yang berbeda (misalkan ksh) untuk user yang 
bernama "Linux"? Tidak ada masalah, tambahkan saja 
"+linux::::::/bin/ksh" (tanpa tanda petik) pada berkas /etc/passwd 
Anda. Field-field yang tidak ingin Anda ubah, biarkan kosong. Anda 
dapat pula menggunakan Netgroups untuk pengontrolan user.
<P>Sebagai contoh, untuk mengijinkan pengaksesan login hanya untuk 
miquels, dth dan ed serta semua anggota dari netgroup sysadmin, tetapi 
semua data account milik user tetap tersedia maka dituliskan sebagai 
berikut :
<P>
<BLOCKQUOTE><CODE>
<PRE>
        +miquels:::::::
        +ed:::::::
        +dth+++++++
        +@sysadmins:::::::
        -ftp
        +:*::::::/etc/NoShell
</PRE>
</CODE></BLOCKQUOTE>
<P>Perlu diperhatikan bahwa didalam Linux Anda dapat pula 
mengesampingkan field password, seperti yang telah kita lakukan pada 
contoh ini. Pada contoh ini, kita juga menghapus login untuk ftp, 
sehingga tidak dikenal lagi, dan anonymous ftp tidak dapat digunakan 
lagi.
<P>Netgroup akan terlihat seperti berikut :
<P>
<BLOCKQUOTE><CODE>
<PRE>
sysadmins (-,software,) (-,kukuk,)
</PRE>
</CODE></BLOCKQUOTE>
<P>Penting: perlu diketahui bahwa kelebihan netgroup diimplementasikan 
mulai libc 4.5.26. Tetapi jika Anda memiliki versi dari libc yang 
sebelum 4.5.26, setiap user yang terdaftar di dalam basis data password 
NIS , dapat mengakses mesin Linux Anda, jika Anda menjalankan "ypbind".
<P>
<H2><A NAME="ss6.5">6.5 Setting klien NIS dengan menggunakan NYS</A>
</H2>

<P>Yang dibutuhkan adalah berkas konfigurasi (/etc/yp.conf) yang berisi / 
menunjuk pada server NIS yang akan dipakai untuk mendapatkan 
informasi. Selain itu dibutuhkan pula berkas konfigurasi untuk Name 
Service Switch (/etc/nsswitch.conf) yang harus disetting secara benar.
<P>Anda harus meng install ypbind. Meskipun tidak dibutuhkan oleh libc, 
tetapi program-program / tool milik NIS(YP) membutuhkannya.
<P>Jika Anda bermaksud menyertakan/tidak menyertakan kelebihan-
kelebihan fasilitas untuk penanganan user (+/-guest/+@admins), Anda 
harus menggunakan "passwd: compat" dan "group:compat". Perlu 
diketahui, bahwa tidak ada "shadow: compat" ! Dalam kasus ini Anda 
harus menggunakan "shadow: files nis".
<P>Sumber-sumber NYS adalah bagian dari sumber-sumber libc 5. Pada saat 
melakukan konfigurasi, isikan "NO" pada pertanyaan "Values correct", 
lalu isikan "YES" pada "Build a NYS libc from nys"
<P>
<H2><A NAME="ss6.6">6.6 Setting klien NIS dengan menggunakan glibc 2.x</A>
</H2>

<P>glibc menggunakan NIS yang tradisional, sehingga Anda perlu untuk 
menjalankan ypbind. Berkas konfigurasi untuk Name Services Switch 
(/etc/nsswitch.conf) harus di set up secara benar. Jika Anda 
menggunakan mode compat untuk passwd, shadow atau group, Anda harus 
menambah "+" pada akhir dari berkas ini, dan Anda dapat menggunakan / 
tidak menggunakan kelebihan fasilitas-fasilitas untuk user. 
Konfigurasi ini persis sama pada Solaris 2.x.
<P>
<H2><A NAME="ss6.7">6.7 Berkas nsswitch.conf</A>
</H2>

<P>Berkas Network Services Switch, /etc/nsswitch.conf berisi urutan 
pencarian yang dilakukan ketika sebuah informasi dibutuhkan, sama 
seperti halnya berkas /etc/host.conf, yang berisi bagaimana pencarian 
sebuah host dilakukan. Sebagai contoh :
<P>
<BLOCKQUOTE><CODE>
<PRE>
    host: files nis dns
</PRE>
</CODE></BLOCKQUOTE>
<P>pada baris di atas, pencarian pertama kali dilakukan pada berkas lokal 
/etc/hosts, apabila tidak ditemukan, dilanjutkan pencarian pada nis 
dan akhirnya pada domain name service (/etc/resolv.conf dan named), 
apabila nama host tersebut belum ditemukan juga, maka akan ditampilkan 
pesan kesalahan.
<P>Versi pertama dari buku petunjuk untuk nsswitch.conf dapat ditemukan 
pada 
<A HREF="http://www-vt.uni-paderborn.de/~kukuk/linux/misc.html">http://www-vt.uni-paderborn.de/~kukuk/linux/misc.html</A>.
<P>Sebuah berkas /etc/nsswitch.conf yang bagus untuk NIS adalah :
<BLOCKQUOTE><CODE>
<PRE>
 #
 # /etc/nsswitch.conf
 #
 # An example Name Service Switch config file. This file should be
 # sorted with the most-used services at the beginning.
 #
 # The entry '[NOTFOUND=return]' means that the search for an
 # entry should stop if the search in the previous entry turned
 # up nothing. Note that if the search failed due to some other reason
 # (like no NIS server responding) then the search continues with the
 # next entry.
 #
 # Legal entries are:
 #
 #       nisplus          Use NIS+ (NIS version 3)
 #       nis              Use NIS (NIS version 2), also called YP
 #       dns              Use DNS (Domain Name Service)
 #       files            Use the local files
 #       db               Use the /var/db databases
 #       [NOTFOUND=return]      Stop searching if not found so far
 #

 passwd: compat
 group:  compat
 shadow: compat

 passwd_compat: nis
 group_compat:  nis
 shadow_compat: nis

 hosts:         nis files dns

 services:      nis [NOTFOUND=return] files
 networks:      nis [NOTFOUND=return] files
 protocols:     nis [NOTFOUND=return] files
 rpc:           nis [NOTFOUND=return] files
 ethers:        nis [NOTFOUND=return] files
 netmasks:      nis [NOTFOUND=return] files
 netgroup:      nis
 bootparams:    nis [NOTFOUND=return] files
 publickey:     nis [NOTFOUND=return] files
 automount:     files
 aliases:       nis [NOTFOUND=return] files
</PRE>
</CODE></BLOCKQUOTE>
<P>passwd_compat, group_compat dan shadow_compat hanya dapat 
digunakan apabila Anda menggunakan glibc 2.x Jika tidak ada aturan 
mengenai shadow di dalam berkas /etc/nsswitch.conf, glibc akan 
menggunakan aturan passwd untuk melakukan pencarian. Ada modul 
pencarian lain untuk glibc seperti hesoid. Untuk informasi lebih 
lanjut, silahkan baca dokumentasi untuk glibc.
<P>
<HR>
<A HREF="ID-NIS-HOWTO-7.html">Next</A>
<A HREF="ID-NIS-HOWTO-5.html">Previous</A>
<A HREF="ID-NIS-HOWTO.html#toc6">Contents</A>
</BODY>
</HTML>
