<HTML
><HEAD
>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-2">
<TITLE
>Debian és Windows megosztott nyomtatás mini-HOGYAN</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"/></HEAD
><BODY
CLASS="article"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="ARTICLE"
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="title"
><A
NAME="AEN2"/>Debian és Windows megosztott nyomtatás mini-HOGYAN</H1
><H3
CLASS="author"
><A
NAME="AEN4"
>Ian Ward</A
></H3
><DIV
CLASS="affiliation"
><DIV
CLASS="address"
><P
CLASS="address"
><br/>
ian at excess dot org<br/>
&nbsp;&nbsp;&nbsp;&nbsp;</P
></DIV
></DIV
><P
CLASS="pubdate"
>2002.12.01<BR/></P
><DIV
CLASS="revhistory"
><TABLE
WIDTH="100%"
BORDER="0"
><TR
><TH
ALIGN="LEFT"
VALIGN="TOP"
COLSPAN="3"
><B
>Verziótörténet</B
></TH
></TR
><TR
><TD
ALIGN="LEFT"
>Verzió: 1.4</TD
><TD
ALIGN="LEFT"
>2004.01.05</TD
><TD
ALIGN="LEFT"
>Átdolgozta: iw</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Szavak javítása.</TD
></TR
><TR
><TD
ALIGN="LEFT"
>Verzió: 1.3</TD
><TD
ALIGN="LEFT"
>2003.11.18</TD
><TD
ALIGN="LEFT"
>Átdolgozta: iw</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Az lpadmin -h helytelen használata törölve.</TD
></TR
><TR
><TD
ALIGN="LEFT"
>Verzió: 1.2</TD
><TD
ALIGN="LEFT"
>2003.10.03</TD
><TD
ALIGN="LEFT"
>Átdolgozta: iw</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Megjegyzés a woody-ról és a gs-esp-rõl, ütközés a bash enable parancsával, javítás az XP/2000 kliensekhez.</TD
></TR
><TR
><TD
ALIGN="LEFT"
>Verzió: 1.1</TD
><TD
ALIGN="LEFT"
>2003.06.26</TD
><TD
ALIGN="LEFT"
>Átdolgozta: iw</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Hozzáadva a jelszó megadása megosztott windowsos nyomtatónál,
javítások.</TD
></TR
><TR
><TD
ALIGN="LEFT"
>Verzió: 1.0</TD
><TD
ALIGN="LEFT"
>2003.05.15</TD
><TD
ALIGN="LEFT"
>Átdolgozta: tmm</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Elsõ kiadás, az LDP átnézte.</TD
></TR
><TR
><TD
ALIGN="LEFT"
>Verzió: 0.8</TD
><TD
ALIGN="LEFT"
>2003.04.11</TD
><TD
ALIGN="LEFT"
>Átdolgozta: iw</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>LaTeX-rõl konvertálva.</TD
></TR
></TABLE
></DIV
><HR/></DIV
><DIV
CLASS="TOC"
><DL
><DT
><B
>Tartalomjegyzék</B
></DT
><DT
>1. <A
HREF="#introduction"
>Bevezetés</A
></DT
><DT
>2. <A
HREF="#getting_started"
>Alapok</A
></DT
><DD
><DL
><DT
>2.1. <A
HREF="#linuxprintingcomponents"
>Linux nyomtatási komponensek</A
></DT
><DT
>2.2. <A
HREF="#packages"
>Szükséges csomagok</A
></DT
><DT
>2.3. <A
HREF="#basicprconfig"
>CUPS helyi nyomtató beállítás</A
></DT
><DT
>2.4. <A
HREF="#basics"
>Linux nyomtatási alapok</A
></DT
></DL
></DD
><DT
>3. <A
HREF="#printing_to_windows"
>Nyomtatás windowsos számítógépre</A
></DT
><DD
><DL
><DT
>3.1. <A
HREF="#to_windows"
>Kapcsolódás a Windowshoz</A
></DT
><DT
>3.2. <A
HREF="#to_windows_cupsconfig"
>A CUPS beállítása</A
></DT
></DL
></DD
><DT
>4. <A
HREF="#sharing_with_windows"
>Linuxos nyomtatók megosztása windowsos számítógépekkel</A
></DT
><DD
><DL
><DT
>4.1. <A
HREF="#sharing_basics"
>Megosztási alapfogalmak</A
></DT
><DT
>4.2. <A
HREF="#share_samba_config"
>Samba beállítások</A
></DT
><DT
>4.3. <A
HREF="#share_cups_config"
>CUPS beállítások</A
></DT
></DL
></DD
><DT
>5. <A
HREF="#troubleshooting"
>Hibaelhárítás</A
></DT
><DD
><DL
><DT
>5.1. <A
HREF="#connect_failure"
>Nem lehet elérni a windowsos nyomtatókat</A
></DT
><DT
>5.2. <A
HREF="#other_failure"
>Egyéb hibák</A
></DT
></DL
></DD
><DT
>6. <A
HREF="#license"
>Licenc</A
></DT
><DT
>7. <A
HREF="#hungarian_translation"
>Magyar fordítás</A
></DT
></DL
></DIV
><DIV
CLASS="sect1"
><H2
CLASS="sect1"
><A
NAME="introduction"/>1. Bevezetés</H2
><P
>&#13;   A Debian GNU/Linux
   (<A
HREF="http://www.debian.org"
TARGET="_top"
>http://www.debian.org</A
>)
az elsõ önkéntesek által támogatott Linux disztribúció. Sajnos Debianban a 
nyomtatóbeállítás nem mindig egyszerû feladat. Nehéz találni olyan Windows és 
Linux közötti nyomtatómegosztást lépésenkét leíró dokumentumot, amelyben a 
legújabb programeszközöket használják fel. Ez a HOGYAN mindkét probléma 
megoldását célozza meg.
</P
><P
>&#13;Ez a HOGYAN bemutatja, miként lehet beállítani Debian rendszerben a nyomtatást 
parancssoros eszközök segítségével.
Kifejti, hogyan lehet Linuxból dokumentumokat küldeni windowsos nyomtatókra, és 
hogyan lehet linuxos nyomtatókat Windowszal felszerelt számítógépekkel 
megosztani. Néhány gyakori probléma megoldására is mutatunk példát.
</P
><P
>&#13;Ezen dokumentum legfrissebb változata megtalálható a 
<A
HREF="http://excess.org/docs/linux_windows_printing.html"
TARGET="_top"
>&#13;http://excess.org/docs/linux_windows_printing.html</A
> honlapon.
Ezen dokumentumhoz kapcsolódó Docbook/XML és az EPS fájlok letölthetõk a 
<A
HREF="http://excess.org/docs/src/"
TARGET="_top"
>&#13;http://excess.org/docs/src/</A
> webhelyrõl.
Kérjük, hogy a dokumentummal kapcsolatos hibajelentéseket, javításokat és
javaslatokat az ian@excess.org e-mail címre küldjétek.
</P
></DIV
><DIV
CLASS="sect1"
><HR/><H2
CLASS="sect1"
><A
NAME="getting_started"/>2. Alapok</H2
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
NAME="linuxprintingcomponents"/>2.1. Linux nyomtatási komponensek</H3
><P
>&#13;A legfõbb komponensek, amiket használni fogunk:
<P
></P
><UL
><LI
><P
>&#13;CUPS
</P
><P
>&#13;Az Egységes UNIX Nyomtatási Rendszer (Common UNIX Printing System; 
<A
HREF="http://www.cups.org"
TARGET="_top"
>http://www.cups.org</A
>) 
egy nyomtatási sorkezelõ, valamint a nyomtatóhasználatot és adminisztrációt segítõ 
programok gyûjteménye.
</P
></LI
><LI
><P
>&#13;Samba
</P
><P
>&#13;A Samba
(<A
HREF="http://www.samba.org"
TARGET="_top"
>http://www.samba.org</A
>) egy olyan 
program, amely a Windows fájl- és nyomtatómegosztási protokollok 
implementálásával lehetõvé teszi a nem Windowst futtató számítógépek 
számára, hogy egy hálózaton windowsos gépként viselkedjenek.
</P
></LI
><LI
><P
>&#13;Nyomtató eszközmeghajtók
</P
><P
>&#13;A LinuxPrinting.org
(<A
HREF="http://www.linuxprinting.org"
TARGET="_top"
>http://www.linuxprinting.org</A
>) 
webhelyen a legtöbb nyomtatóhoz található eszközmeghajtó, itt egy 
adatbázisban tárolják a Linux alatt használható nyomtatók listáját.
A Linux alatt használni kívánt nyomtatók minden típusához le kell tölteni egy 
eszközmeghajtót. Egy nyomtató eszközmeghajtó egy PPD fájlból és egy
szûrõ programból áll, PostScript nyomtatók esetén pedig csak egy PPD fájlból.
</P
></LI
></UL
>
</P
></DIV
><DIV
CLASS="sect2"
><HR/><H3
CLASS="sect2"
><A
NAME="packages"/>2.2. Szükséges csomagok</H3
><P
>&#13;Minden szükséges program és programkönyvtár része a szabványos 
Debian rendszernek. Ezek a csomagok a megszokott Debian csomagkezelõkkel 
letölthetõk és telepíthetõk. A következõ csomagokra van szükség:
</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>cupsys</DT
><DD
><P
>CUPS szerver</P
></DD
><DT
>cupsys-bsd</DT
><DD
><P
>CUPS BSD parancsok</P
></DD
><DT
>cupsys-client</DT
><DD
><P
>CUPS kliens programok</P
></DD
><DT
>foomatic-bin</DT
><DD
><P
>A LinuxPrinting.org nyomtatást segítõ 
programjai</P
></DD
><DT
>samba</DT
><DD
><P
>Samba SMB/CIFS szerver UNIX-hoz</P
></DD
><DT
>smbclient</DT
><DD
><P
>Samba SMB/CIFS klines UNIX-hoz</P
></DD
><DT
>gs-esp</DT
><DD
><P
>ESP Ghostscript
(<A
HREF="http://www.cups.org/ghostscript.php"
TARGET="_top"
>&#13;http://www.cups.org/ghostscript.php</A
>)</P
><P
>Nem érhetõ el Debian GNU/Linux 3.0 (más néven woody) csomagként, használd a <SPAN
CLASS="QUOTE"
>"gs"</SPAN
> programot helyette.</P
></DD
><DT
>a2ps</DT
><DD
><P
>GNU A2PS
(<A
HREF="http://www.gnu.org/software/a2ps/"
TARGET="_top"
>&#13;http://www.gnu.org/software/a2ps/</A
>)</P
></DD
></DL
></DIV
><P
>&#13;A következõ parancsok segítségével telepítheted ezeket a csomagokat:
</P
><P
>&#13;<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>apt-get update
apt-get install cupsys cupsys-bsd cupsys-client foomatic-bin samba smbclient 
gs-esp a2ps
</PRE
></FONT
></TD
></TR
></TABLE
>
</P
><P
>&#13;Bizonyos nyomtatókhoz esetleg további csomagok is szükségesek. Például a 
HP InkJet nyomtatók helyes mûködéséhez a <EM
>hpijs</EM
> csomagot 
is telepítened kell.
</P
></DIV
><DIV
CLASS="sect2"
><HR/><H3
CLASS="sect2"
><A
NAME="basicprconfig"/>2.3. CUPS helyi nyomtató beállítás</H3
><P
>&#13;Az <B
CLASS="command"
>lpadmin</B
> parancsot használd nyomtatók beállításához.
Íme egy példa egy lézernyomtató CUPS-al történõ beállításához: 
</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>/usr/sbin/lpadmin -p Laser -v parallel:/dev/lp0 -P
/root/laser.ppd
/usr/bin/enable Laser
/usr/sbin/accept Laser
/usr/sbin/lpadmin -d Laser
</PRE
></FONT
></TD
></TR
></TABLE
><P
>&#13;
Kérlek vedd figyelembe, hogy a bash-ban van egy 
<B
CLASS="command"
>enable</B
>-nak nevezett belsõ parancs, 
így a bash felhasználóknak a teljes elérési utat kell használniuk 
(<B
CLASS="command"
>/usr/bin/enable</B
>) a nyomtatók engedélyezéséhez. 
</P
><P
>&#13;Az elsõ parancs egy új nyomtatót hoz létre <SPAN
CLASS="QUOTE"
>"Laser"</SPAN
> néven, amely az 
elsõ párhuzamos portra csatlakozik és a <TT
CLASS="filename"
>/root/laser.ppd</TT
> 
nevû PPD fájt használja. Ezután engedélyezd a <SPAN
CLASS="QUOTE"
>"Laser"</SPAN
> nevû 
nyomtató használatát, és állítsd be, hogy az <B
CLASS="command"
>enable</B
> és az 
<B
CLASS="command"
>accept</B
> parancsokkal fogadjon nyomtatási feladatokat. Az 
utolsó parancs a <SPAN
CLASS="QUOTE"
>"Laser"</SPAN
> nevû nyomtatót állítja be alapértelmezett 
nyomtatónak. A nyomtató beállításról részletesebb információk a CUPS 
dokumentációjában olvashatsz. 
</P
></DIV
><DIV
CLASS="sect2"
><HR/><H3
CLASS="sect2"
><A
NAME="basics"/>2.4. Linux nyomtatási alapok</H3
><DIV
CLASS="figure"
><A
NAME="printlocal"/><P
><B
>Ábra 1. Helyi nyomtatás</B
></P
><P
><IMG
SRC="printing_basics-hu.png"/></P
></DIV
><P
>&#13;Dokumentumokat a nyomtatási sorba az <B
CLASS="command"
>lpr</B
> vagy az
<B
CLASS="command"
>lp</B
> paranccsal vehetsz fel, a parancs után megadva a fájl
nevét. A nyomtatási sort megtekintheted és a nyomtató állapota ellenõrizheted
az <B
CLASS="command"
>lpstat -o</B
> illetve az <B
CLASS="command"
>lpstat -p</B
>
parancs használatával. Egy nyomtatási feladat törléséhez a <B
CLASS="command"
>cancel</B
> vagy
az <B
CLASS="command"
>lprm</B
> parancsot használd, megadva utána a feladat
azonosítóját.
</P
><P
>&#13;A CUPS nyomtatási sorkezelõ démon neve <EM
>cupsd</EM
>. 
Ez a dokumentumokat elõször PostScript formátumra, majd pedig 
a nyomtató saját formátumára konvertálja (<A
HREF="#printlocal"
>1 Ábra</A
>). 
A PostScriptet nem ismerõ nyomtatók egy raszteres vagy bittérképes dokumentum 
formátumot használnak. A raszteres formátum mérete az eredeti PostScript 
formátumúnál sokkal nagyobb lehet, és elküldése a nyomtatóhoz több idõt vesz 
igénybe.
</P
><P
>&#13;A szûrõk (filters) olyan programok, amelyek a dokumentumokat egyik formátumról 
egy másikra konvertálják. A CUPS nyomtatási sorkezelõ mindent megtesz, hogy az 
elküldött dokumentumok számára találjon egy megfelelõ szûrõt. 
Ha nincs olyan szûrõ telepítve, amellyel a dokumentumot konvertálni lehetne, 
egy ehhez hasonló hibaüzenettet kapsz: <TT
CLASS="computeroutput"
>lpr: unable to print
file: client-error-document-format-not-supported.</TT
>
</P
><P
>&#13;Sok alkalmazás nem tartalmaz szûrõket a saját dokumentum 
formátumaihoz. Ezekkel az alkalmazásokkal készített dokumentumok csak magából az 
alkalmazásból nyomtathatók ki, hacsak nem mented el a dokumentumot PostScript 
vagy más szabványos formátumba.
</P
></DIV
></DIV
><DIV
CLASS="sect1"
><HR/><H2
CLASS="sect1"
><A
NAME="printing_to_windows"/>3. Nyomtatás windowsos számítógépre</H2
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
NAME="to_windows"/>3.1. Kapcsolódás a Windowshoz</H3
><DIV
CLASS="figure"
><A
NAME="netprint"/><P
><B
>Ábra 2. Hálózati nyomtatás</B
></P
><P
><IMG
SRC="to_windows-hu.png"/></P
></DIV
><P
>&#13;Az SMB és a CIFS, a Windows fájl- és nyomtatómegosztási protokollja. A Samba szervert 
használhatod arra, hogy ezekkel a protokollokkal kommunikálj a Windowst futtató 
számítógépekkel. A CUPS konfigurálása elõtt meg kell gyõzõdnöd arról, hogy 
kapcsolódni tudsz a Samba SMB/CIFS kliensével, az <B
CLASS="command"
>smbclient</B
> 
programmal a windowsos számítógéphez (<A
HREF="#netprint"
>2 Ábra</A
>).
</P
><P
>&#13;Íme egy példa windowsos számítógéppel való kapcsolat létrehozására:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>/usr/bin/smbclient -L rice -U fred

added interface ip=10.6.7.234 bcast=10.6.7.255 nmask=255.255.255.0
Got a positive name query response from 10.6.7.8 ( 10.6.7.8 )
Password: (not shown)

Sharename  Type  Comment
PRINTER$   Disk
INKJET     Printer
STUFF      Disk
IPC$       IPC    Remote Inter Process Communication
</PRE
></FONT
></TD
></TR
></TABLE
>
</P
><P
>&#13;A bemutatott parancs a <SPAN
CLASS="QUOTE"
>"rice"</SPAN
> nevû windowsos számítógép azon 
megosztott erõforrásainak listáját kéri le, melyekhez a <SPAN
CLASS="QUOTE"
>"fred"</SPAN
> 
nevû felhasználó hozzáférhet. Ez az <SPAN
CLASS="QUOTE"
>"INKJET"</SPAN
> elnevezésû nyomtatót 
jeleníti meg.
</P
><P
>&#13;Ha a Windows névszolgáltatása nem érhetõ el, meg kell adnod a windowsos
számítógép IP címét az <TT
CLASS="option"
>-I</TT
> kapcsoló segítségével:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>/usr/bin/smbclient -I 10.6.7.8 -L rice -N
</PRE
></FONT
></TD
></TR
></TABLE
>
</P
><P
>&#13;További információkért az <B
CLASS="command"
>smbclient</B
> használatával 
kapcsolatban olvasd el a Samba dokumentációját.
</P
></DIV
><DIV
CLASS="sect2"
><HR/><H3
CLASS="sect2"
><A
NAME="to_windows_cupsconfig"/>3.2. A CUPS beállítása</H3
><P
>&#13;Mihelyt rendelkezésre áll egy Windows rendszerrõl mûködtetett nyomtató, 
be lehet állítani a CUPS-t. Elsõ lépésként ellenõrizd a következõ paranccsal, 
hogy a telepített CUPS tartalmazza-e az smb háttérszolgáltatást (backend):
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>ls -l /usr/lib/cups/backend/smb
</PRE
></FONT
></TD
></TR
></TABLE
>
</P
><P
>&#13;Ha ez a fájl nem létezik, hozd létre a következõ paranccsal:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>ln -s `which smbspool` /usr/lib/cups/backend/smb
</PRE
></FONT
></TD
></TR
></TABLE
>
</P
><P
>&#13;Egy példa a fent említett nyomtató beállítására:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>/usr/sbin/lpadmin -p RicePrinter -v
smb://fred:mypass@rice/INKJET -P /root/inkjet.ppd
/usr/bin/enable RicePrinter
/usr/sbin/accept RicePrinter
/usr/sbin/lpadmin -d RicePrinter
</PRE
></FONT
></TD
></TR
></TABLE
>
</P
><P
>&#13;Ahogy fent említettem a bash-ban van egy 
<B
CLASS="command"
>enable</B
>nak nevezett belsõ parancs, 
így a bash felhasználóknak a teljes elérési utat kell használniuk
(<B
CLASS="command"
>/usr/bin/enable</B
>) a nyomtatók engedélyezéséhez.
</P
><P
>&#13;Az <SPAN
CLASS="QUOTE"
>"lpadmin"</SPAN
> parancs egy megosztott windowsos nyomtatót állít be
a felhasználói név, jelszó, netbios név és nyomtató név paraméterként történõ
megadásával. A fent említett parancsok bõvebb magyarázatát olvasd el a <A
HREF="#basicprconfig"
>2.3 </A
> fejezetben.
</P
><P
>&#13;Most már készen áll a nyomtató a tesztelésre. Küldj egy fájlt a nyomtatóra 
az <B
CLASS="command"
>lp</B
> paranccsal, utána írva a fájl nevét, vagy nyomtass 
egy dokumentumot valamelyik alkalmazásból.
</P
></DIV
></DIV
><DIV
CLASS="sect1"
><HR/><H2
CLASS="sect1"
><A
NAME="sharing_with_windows"/>4. Linuxos nyomtatók megosztása windowsos számítógépekkel</H2
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
NAME="sharing_basics"/>4.1. Megosztási alapfogalmak</H3
><DIV
CLASS="figure"
><A
NAME="printshare"/><P
><B
>Ábra 3. Nyomtató megosztása</B
></P
><P
><IMG
SRC="from_windows-hu.png"/></P
></DIV
><P
>&#13;A Samba az <EM
>nmbd</EM
> és az <EM
>smbd</EM
> démonokat 
hasznája windowsos gépekkel való fájl és nyomtató megosztáshoz. Az 
<EM
>nmbd</EM
> windowsos névkiszolgálóként mûködik, üzenetszórással 
tájékoztatva a gép nevérõl a helyi hálózat windowsos számítógépeit. Az 
<EM
>smbd</EM
> fájl és nyomtatási kéréseket fogad windowsos gépektõl 
(<A
HREF="#printshare"
>3 Ábra</A
>).
</P
><P
>&#13;Minden megosztott linuxos nyomtatóhoz le kell tölteni és telepíteni kell a 
windowsos nyomtató eszközmeghajtókat. A windowsos nyomtató eszközmeghajtókat a 
nyomtató gyártójának honlapján lehet megtalálni.
</P
></DIV
><DIV
CLASS="sect2"
><HR/><H3
CLASS="sect2"
><A
NAME="share_samba_config"/>4.2. Samba beállítások</H3
><P
>&#13;Ha a nyomtatóhoz az anonim (anonymous) hozzáférés engedélyezve van, akkor a 
távoli nyomtatási feladatok elvégzéséhez létre kell hoznod egy új 
felhasználót:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>/usr/sbin/adduser --system --disabled-password smbprint
</PRE
></FONT
></TD
></TR
></TABLE
>
</P
><P
>&#13;Ez a parancs létrehoz egy <SPAN
CLASS="QUOTE"
>"smbprint"</SPAN
> nevû felhasználót. 
Bizonyosodj meg arról, hogy a <TT
CLASS="filename"
>/home/smbprint</TT
> 
könyvtárban, az <SPAN
CLASS="QUOTE"
>"smbprint"</SPAN
> nevû felhasználó munkakönyvtárában (home) 
elegendõ lemezterület áll rendelkezésre a nyomtatási sor kezeléséhez.
Ellenõrizd, hogy az <SPAN
CLASS="QUOTE"
>"smbprint"</SPAN
> nevû felhasználónak ne legyen 
jogosultsága a rendszer mûködésében fontos szerepet játszó fájlok és könyvtárak 
olvasásához vagy módosításához. Ha a CUPS beállítása csak bizonyos 
felhasználóknak teszi lehetõvé a nyomtatást, az <SPAN
CLASS="QUOTE"
>"smbprint"</SPAN
> nevû 
felhasználó számára engedélyezned kell azon nyomtatókhoz való hozzáférést, 
amelyeket meg akarsz osztani.
</P
><P
>&#13;Az <TT
CLASS="filename"
>/etc/samba/smb.conf</TT
> a Samba konfigurációs fájl. A 
következõ példa egy konfigurációs fájl, amely a CUPS-t az 
<SPAN
CLASS="QUOTE"
>"smbprint"</SPAN
> nevû felhasználó számára állítja be:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>[global]
  printcap name = cups
  printing = cups
  security = share
[printers]
  browseable = yes
  printable = yes
  public = yes
  create mode = 0700
  guest only = yes
  use client driver = yes
  guest account = smbprint
  path = /home/smbprint
</PRE
></FONT
></TD
></TR
></TABLE
>
</P
><P
>&#13;Jegyezd meg, hogy ez a beállítás mindenki számára engedélyezi a nyomtatást, aki
hálózati kapcsolatot tud létesíteni számítógépünkkel, és ezért nem ajánlott 
használni olyan, nem megbízható hálózatra csatlakozó gépek esetén, mint például 
közvetlen Internet hozzáféréssel rendelkezõ számítógépek. Ha a hozzáférést 
szabályozni szeretnéd, akkor szúrj be a <EM
>security = user</EM
>
vagy a <EM
>security = domain</EM
> sort, és további információkért 
olvasd el a Samba kézikönyv oldalait.
</P
><P
>&#13;Ha a Samba konfigurációs fájlhoz hozzáadtad a fenti beállításokat, újra kell 
indítanod a Samba szervert a következõ parancs segítségével: 
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>/etc/init.d/samba restart
</PRE
></FONT
></TD
></TR
></TABLE
>
</P
></DIV
><DIV
CLASS="sect2"
><HR/><H3
CLASS="sect2"
><A
NAME="share_cups_config"/>4.3. CUPS beállítások</H3
><P
>&#13;A windowsos eszközmeghajtók egy meghatározott formátumra alakítják a nyomtatónak küldött
kimenetüket, mielõtt a hálózatra küldik azt. Az 
<TT
CLASS="filename"
>/etc/cups/mime.convs</TT
> fájl 
következõ sorának elején lévõ megjegyzés-karakter törlésével be kell állítanod a CUPS-t, hogy 
fogadja az elõre formázott kimenetet: 
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>application/octet-stream   application/vnd.cups-raw   0
-</PRE
></FONT
></TD
></TR
></TABLE
>
</P
><P
>&#13;
Az <TT
CLASS="filename"
>/etc/cups/mime.types</TT
> fájl következõ sorának elejérõl 
szintén távolítsd el a megjegyzés karaktert: 
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>application/octet-stream
</PRE
></FONT
></TD
></TR
></TABLE
>
</P
><P
>&#13;Most pedig állítsd be a CUPS-t, hogy engedélyezze a kapcsolódást a hálózat 
többi gépe számára. 
Az <TT
CLASS="filename"
>/etc/cups/cupsd.conf</TT
> fájlhoz add hozzá ezeket a 
sorokat: 
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&lt;Location /printers&gt;
 AuthType None
 Order Deny,Allow
 Deny From None
 Allow From All
&lt;/Location&gt;
</PRE
></FONT
></TD
></TR
></TABLE
>
Ahogy a Samba beállítások esetén, ez a konfiguráció is engedélyezi a nyomtatóhoz 
való hozzáférést bármilyen számítógép számára, ezért nem ajánlott biztonsági szempontból 
megbízhatatlan hálózatokra csatlakozó számítógépek esetén. A nyomtatókhoz való 
hozzáférés szabályozásával kapcsolatos információkért olvasd el a 
<TT
CLASS="filename"
>cupsd.conf</TT
> kézikönyv oldalait és a CUPS dokumentációt.
</P
><P
>&#13;Végül indítsd újra a CUPS-t a következõ paranccsal: 
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>/etc/init.d/cupsys restart
</PRE
></FONT
></TD
></TR
></TABLE
>
</P
><P
>&#13;Ha minden jól ment, a linuxos nyomtatók most már meg vannak osztva a helyi 
hálózat windowsos gépei számára. Windowsos számítógépek esetén hálózati 
nyomtató hozzáadása a szokásos módon történik, és ne felejts el tesztoldalt 
nyomtatni.
</P
></DIV
></DIV
><DIV
CLASS="sect1"
><HR/><H2
CLASS="sect1"
><A
NAME="troubleshooting"/>5. Hibaelhárítás</H2
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
NAME="connect_failure"/>5.1. Nem lehet elérni a windowsos nyomtatókat</H3
><P
>&#13;Ha az <B
CLASS="command"
>smbclient</B
> CUPS által használt segédprogramja, az 
<EM
>smbspool</EM
> nem tud kapcsolatot létesíteni, hibaüzeneteket ad, 
amelyek tréfásak ugyan, de nem túl hasznosak. Ilyen üzenetre példa: 
<TT
CLASS="computeroutput"
>Unable to connect to SAMBA host:
Success.</TT
> A kapcsolódási hibáknak egy másik jele, amikor úgy 
tûnik, hogy a dokumentumok megrekednek a nyomtatási sorban, ha windowsos 
nyomtatóra nyomtatunk.
</P
><P
>&#13;A CUPS naplójának legfrissebb bejegyzéseit a következõ paranccsal nézheted meg: 

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>/usr/bin/tail /var/log/cups/error_log
</PRE
></FONT
></TD
></TR
></TABLE
>
</P
><P
>&#13;Ha a <TT
CLASS="computeroutput"
>cli_connect() failed...</TT
> üzenethez hasonlót 
látsz, akkor az <EM
>smbspool</EM
> nem tatálta meg azt windowsos 
számítógépet, amihez csatlakozni próbáltunk. Ellenõrizd, hogy jól írtad-e a 
windowsos számítógép nevét (host name). Ellenõrizd, hogy a 
windowsos számítógép be van-e kapcsolva, és hogy a hálózati kapcsolata 
mûködik-e.
Bizonyosodj meg arról, hogy az <B
CLASS="command"
>smbclient</B
> segítségével 
tudsz csatlakozni hozzá a <A
HREF="#to_windows"
>3.1 </A
> fejezetben bemutatott 
módon.
</P
><P
>&#13;Ha az <TT
CLASS="computeroutput"
>SMB tree connect failed: ERRSRV -
ERRinvnetname</TT
> üzenethez hasonlót látsz, 
akkor az <B
CLASS="command"
>smbclient</B
> sikeresen kapcsolódott a windowsos 
számítógéphez, de nem tudta felvenni a kapcsolatot a kért nyomtatóval. 
Ellenõrizzük az <B
CLASS="command"
>smbclient</B
> segítségével a 
<A
HREF="#to_windows"
>3.1 </A
> fejezetben bemutatottak szerint, hogy helyesen 
írtad-e a megosztott nyomtató nevét.
</P
></DIV
><DIV
CLASS="sect2"
><HR/><H3
CLASS="sect2"
><A
NAME="other_failure"/>5.2. Egyéb hibák</H3
><P
>&#13;Ide tartozik az, ha nem lehet nyomtatni egy helyi nyomtatóra, és ha a nyomtatási 
feladatok anélkül tûnnek el a nyomtatási sorból, hogy nyomtatásra kerülnének. 
Esetleg olyan elbizonytalanító hibaüzeneteket is láthatsz, mint például a 
<TT
CLASS="computeroutput"
>Child process 2384 exited with status 32.</TT
> 
üzenet.
</P
><P
>&#13;A CUPS naplózását <SPAN
CLASS="QUOTE"
>"debug"</SPAN
> szintre beállítva több üzenetet láthatsz 
arról, hogy mi történik mielõtt egy nyomtatási feladat hibát jelezve megszûnik.
</P
><P
></P
><OL
TYPE="1"
><LI
><P
>&#13;Nyisd meg a CUPS elsõdleges konfigurációs fájlját, az 
<TT
CLASS="filename"
>/etc/cups/cupsd.conf</TT
> fáljt egy ASCII szövegszerkesztõvel.
</P
></LI
><LI
><P
>&#13;Írd be a <SPAN
CLASS="QUOTE"
>"LogLevel warn"</SPAN
> sor helyett a <SPAN
CLASS="QUOTE"
>"LogLevel
debug"</SPAN
> sort.
</P
></LI
><LI
><P
>&#13;Mentsd el a konfigurációs fájlt és lépj ki a szövegszerkesztõbõl.
</P
></LI
><LI
><P
>Indítsd újra a CUPS szervert a következõ paranccsal:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>/etc/init.d/cupsys restart
</PRE
></FONT
></TD
></TR
></TABLE
>
</P
></LI
></OL
><P
>&#13;A CUPS naplózását a következõ paranccsal követheted nyomon:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>/usr/bin/tail -f /var/log/cups/error_log
</PRE
></FONT
></TD
></TR
></TABLE
>
</P
><P
>&#13;Léteznie kell a <TT
CLASS="computeroutput"
>Scheduler shutting down due to
SIGTERM</TT
> sornak. Ez azt jelenti, hogy a CUPS szerver sikeresen
leállt.
</P
><P
>&#13;A nyomtatási feladatot küldd el újra, és keress a kiírt nyomkövetési 
üzenetek (debug messages) között valami hasznavetõt. A <TT
CLASS="computeroutput"
>GNU 
Ghostscript 7.05: Can't start ijs server 'hpijs'.</TT
> egy ilyen 
hasznos nyomkövetési üzenet. Ez esetben a megoldás a <SPAN
CLASS="QUOTE"
>"hpijs"</SPAN
> csomag 
telepítése.
</P
><P
>&#13;Ha nem tudod meghatározni a hiba okát, a kapott hibaüzenetek kulcsszavaira az 
Interneten keress rá. Valószínû, hogy valaki már korábban megoldotta a 
problémát. Meg lehet próbálni a <A
HREF="#packages"
>2.2 </A
> fejezetben felsorolt 
csomagok legújabb verzióra történõ frissítését is.
</P
></DIV
></DIV
><DIV
CLASS="sect1"
><HR/><H2
CLASS="sect1"
><A
NAME="license"/>6. Licenc</H2
><P
>&#13;Copyright &#169; 2003 Ian Ward.
</P
><P
>&#13;Ez a kézikönyv egy szabad szoftver; továbbterjeszthetõ és/vagy módosítható 
a Free Software Foundation (Szabad Szoftver Alapítvány) által közzétett 
GNU General Public License feltételei szerint; a GNU GPL2 vagy késõbbi 
változata alapján.
</P
><P
>&#13;Annak reményében került közzétételre, hogy hasznosnak bizonyul, de mindenféle 
garancia nélkül; beleértve a eladhatóságot vagy egyéb célokra való használhatóságot
Olvasd el a GNU GPL-t a további részleteket illetõlen.
</P
><P
>&#13;A GNU GPL másolata megtalálható a 
/usr/share/common-licenses/GPL könyvtárban a Debian GNU/Linux összeállítás esetén, 
vagy a WEB-en a http://www.gnu.org/copyleft/gpl.html honlapon. Megkaphatod 
postai úton is, ha írsz a Szabad Szoftver Alapítványnak a következõ címre: 
Free Software Foundation, Inc., 59 Temple Place, Suite 330,
Boston, MA 02111-1307, USA. 
</P
></DIV
><DIV
CLASS="sect1"
><HR/><H2
CLASS="sect1"
><A
NAME="hungarian_translation"/>7. Magyar fordítás</H2
><P
>&#13;A magyar fordítást <A
HREF="mailto:moczaz@freemail.hu_NO_SPAM"
TARGET="_top"
>Mócza Zsolt</A
> készítette (2002.09.09). 
A lektorálást <A
HREF="mailto:dacas@freemail.hu_NO_SPAM"
TARGET="_top"
>Daczi László</A
> végezte el (2003.09.15).
Utoljára frissítve 2004.04.16-án.
 A dokumentum legfrissebb változata megtalálható a <A
HREF="http://tldp.fsf.hu/index.html"
TARGET="_top"
>Magyar Linux Dokumentációs Projekt</A
> 
honlapján.
</P
></DIV
></DIV
></BODY
></HTML
>
