<HTML
><HEAD
>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-2">
<TITLE
>Linux+Win9x+Grub HOGYAN</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"/></HEAD
><BODY
CLASS="article"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="ARTICLE"
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="title"
><A
NAME="AEN2"/>Linux+Win9x+Grub HOGYAN</H1
><H3
CLASS="author"
><A
NAME="AEN4"
>Joel Rosen</A
></H3
><DIV
CLASS="revhistory"
><TABLE
WIDTH="100%"
BORDER="0"
><TR
><TH
ALIGN="LEFT"
VALIGN="TOP"
COLSPAN="3"
><B
>Verziótörténet</B
></TH
></TR
><TR
><TD
ALIGN="LEFT"
>Verzió: v1.0</TD
><TD
ALIGN="LEFT"
>2002.01.10</TD
><TD
ALIGN="LEFT"
>Átdolgozta: jr</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Elsõ kiadás.</TD
></TR
></TABLE
></DIV
><DIV
><DIV
CLASS="abstract"
><A
NAME="AEN14"/><P
></P
><P
>&#13;Ez a HOGYAN a GRUB betöltésvezérlõ használatát írja le, hogy a gépeden Windowst és Linuxot is tudj futtatni a jelenlegi Linux telepítésed elrontása nélkül.
</P
><P
></P
></DIV
></DIV
><HR/></DIV
><DIV
CLASS="TOC"
><DL
><DT
><B
>Tartalomjegyzék</B
></DT
><DT
>1. <A
HREF="#intro"
>Bevezetés</A
></DT
><DD
><DL
><DT
>1.1. <A
HREF="#AEN18"
>Miért ezt a módszert használjuk?</A
></DT
><DT
>1.2. <A
HREF="#AEN22"
>Szerzõi jog és licensz</A
></DT
><DT
>1.3. <A
HREF="#AEN26"
>Magyar fordítás</A
></DT
></DL
></DD
><DT
>2. <A
HREF="#reqs"
>Követelmények</A
></DT
><DD
><DL
><DT
>2.1. <A
HREF="#AEN35"
>Mik a követelmények?</A
></DT
></DL
></DD
><DT
>3. <A
HREF="#proc"
>Az eljárás leírása</A
></DT
><DD
><DL
><DT
>3.1. <A
HREF="#AEN56"
>A Windows partíció létrehozása</A
></DT
><DT
>3.2. <A
HREF="#AEN65"
>A GRUB telepítése</A
></DT
><DT
>3.3. <A
HREF="#AEN83"
>A Windows telepítése</A
></DT
></DL
></DD
></DL
></DIV
><DIV
CLASS="sect1"
><H2
CLASS="sect1"
><A
NAME="intro"/>1. Bevezetés</H2
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
NAME="AEN18"/>1.1. Miért ezt a módszert használjuk?</H3
><P
>&#13;Nagy híve vagyok a nem Microsoft-os dolgoknak, így az új gépemet elõre telepített Linuxszal rendeltem meg. Nagyon jó asztali gép, de fölöttébb hiányoztak a Windows-os játékaim, és a GIMP azért csak nem az igazi. Ezért végül belevágtam, és elhatároztam, hogy kettõs indításúvá teszem a gépet. Amikor erre vonatkozó információkat kerestem, csak olyat találtam, ami leírja, hogy a LOADLIN segítségével miként telepítsünk Linuxot, ha már van Windows. Sajnos, mivel a LOADLIN DOS alatt fut, ez azt módszer feltételezi, hogy a Windowst az elsõ merevlemez elsõdleges partíciójára telepítetted, mert a Windows szerint õ a világegyetem közepe, és a többi operációs rendszer körülötte forog. Ez problémát okoz, ha már van ott egy Linux, és nem akarod törölni csak azért, hogy Windows-t telepíthess.
</P
><P
>&#13;Ez az a pont, ahol a GNU GRUB, a Grand Unified Bootloader (Nagy Egyesített Betöltésvezérlõ) belép a képbe. Ez abban különbözik a többi betöltésvezérlõtõl, mint például a LILO-tól, hogy átveri a Windowst, és azt hiteti el vele, hogy az elsõ partíción van, még akkor is, ha nem. Így megtarthatod a Linuxot ott, ahova eredetileg telepítve lett, és a Windows mehet mellé.
</P
></DIV
><DIV
CLASS="sect2"
><HR/><H3
CLASS="sect2"
><A
NAME="AEN22"/>1.2. Szerzõi jog és licensz</H3
><P
>&#13;
 Copyright (c) 2002 Joel Rosen. A dokumentum másolása, terjesztése
   és/vagy módosítása a Free Software Foundation által kiadott GNU Free
   Documentation License 1.1 vagy bármely késõbbi verziója szerint
   lehetséges a dokumentum részeinek, elõ- ill. hátoldali szövegeinek
   módosítása nélkül.
   A licensz egy másolatát megtalálod <A
HREF="http://www.gnu.org/copyleft/fdl.html"
TARGET="_top"
>ezen</A
> a honlapon.
</P
></DIV
><DIV
CLASS="sect2"
><HR/><H3
CLASS="sect2"
><A
NAME="AEN26"/>1.3. Magyar fordítás</H3
><P
>&#13;    A magyar fordítást <A
HREF="mailto:laca@janus.gimsz.sulinet.hu_NO_SPAM"
TARGET="_top"
>Szijjártó László</A
> készítette (2002.07.17).
    A lektorálást <A
HREF="mailto:tech.translation@axelero.hu_NO_SPAM"
TARGET="_top"
>Varga Zsolt</A
> végezte el (2003.01.02).
    Bármilyen fordítással kapcsolatos észrevételt a <A
HREF="mailto:linuxhowto@sch.bme.hu_NO_SPAM"
TARGET="_top"
>linuxhowto@sch.bme.hu</A
> címre küldjetek.
    A dokumentum legfrissebb változata megtalálható a <A
HREF="http://tldp.fsf.hu/index.html"
TARGET="_top"
>Magyar Linux Dokumentációs Projekt</A
> honlapján.
</P
></DIV
></DIV
><DIV
CLASS="sect1"
><HR/><H2
CLASS="sect1"
><A
NAME="reqs"/>2. Követelmények</H2
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
NAME="AEN35"/>2.1. Mik a követelmények?</H3
><P
>&#13;Szükség lesz a következõkre:

  <P
></P
><UL
><LI
><P
>Egy számítógépre, mûködõ Linux telepítéssel</P
></LI
><LI
><P
>Elegendõ szabad helyre a merevlemezen a Windows partíció számára</P
></LI
><LI
><P
>Egy partíció-szerkesztõre, mint például a <A
HREF="http://www.gnu.org/software/parted/"
TARGET="_top"
>GNU Parted</A
>.</P
></LI
><LI
><P
>A <A
HREF="http://www.gnu.org/software/grub/"
TARGET="_top"
>GRUB</A
> rpm csomagjára vagy forrására.</P
></LI
><LI
><P
>Egy Windows/DOS indítólemezre CDROM támogatással, és egy Windows 9x telepítõ CD-re, vagy egy indítható Windows 9x telepítõ CD-re</P
></LI
><LI
><P
><EM
>(Ajánlott)</EM
> Egy Linux indítólemezre</P
></LI
></UL
>

</P
></DIV
></DIV
><DIV
CLASS="sect1"
><HR/><H2
CLASS="sect1"
><A
NAME="proc"/>3. Az eljárás leírása</H2
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
NAME="AEN56"/>3.1. A Windows partíció létrehozása</H3
><P
>&#13;Ha már van üres helyed a lemezen a Windows telepítéséhez, átugorhatod ezt a részt. Máskülönben egy partíció-szerkesztõt kell futtatnod, hogy szét tudd darabolni a lemezt az új Windows-partíció számára. Én a GNU Parted nevû programot használtam, de az sfdisk is megfelelõ. NE HASZNÁLD az fdisk programot, mert az nem õrzi meg az adataidat. Ezen kívül jegyezd meg, hogy a módszer sikere nem garantált, ezért mindenképpen készíts biztonsági mentést az adatokról, mielõtt nekilátnál.
</P
><P
>Íme a merevlemezem partíciós táblája telepítés elõtt:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;Device	    Start	 End	      System

/dev/hda1   1		 3	      Linux
/dev/hda2   4		 1222	      Extended
/dev/hda5   4		 36	      Linux swap
/dev/hda6   37		 1222	      Linux
</PRE
></FONT
></TD
></TR
></TABLE
><P
>&#13;A /dev/hda1 a /boot partícióm (neked vagy van, vagy nincs ilyen elkülönített indítópartíciód), a /dev/hda2 egy kiterjesztett partíció, ami két logikai meghajtót tartalmaz, a /dev/hda5 és /dev/hda6-ot, amelyek a Linux swap és telepítõ partíciói. </P
><P
>&#13;Rendszergazdaként futtasd a partíció-szerkesztõt. Méretezd át a Linux partíciót olyan kicsire, amekkorára gondolod (de gyõzõdj meg róla, hogy ne legyen kisebb, mint a rajta lévõ adatok mérete). A program sokáig dolgozik és utána átírja a partíciós táblát. Méretezd át a kiterjesztetett partíciót is, ami a Linuxot tartalmazza. Most már elegendõ hely kell legyen ahhoz, hogy egy új elsõdleges Windows partíciót tudj létrehozni. Készíts egy Win95 FAT32 (LBA) fájlrendszerû partíciót. Ezek után a partíciós táblád valahogy így néz ki:
</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;Device	     Start	    End	     System

/dev/hda1    1		    3	     Linux
/dev/hda2    4		    905	     Extended
/dev/hda3    906	    1222     Win95 FAT32 (LBA)
/dev/hda5    4		    36	     Linux swap
/dev/hda6    37		    905	     Linux
</PRE
></FONT
></TD
></TR
></TABLE
><P
>&#13;Nagyon ajánlom, hogy futtasd le az fdisket ennél a pontnál, és írd fel egy darab papírra a partíciók információit. Ha valamit elrontasz, a Windows vígan felül fogja írni az adatokat, ahogy neki tetszik, és neked tudnod kell hogy néztek ki a partíciók, ha esetleg valóban erre kerülne a sor.
</P
></DIV
><DIV
CLASS="sect2"
><HR/><H3
CLASS="sect2"
><A
NAME="AEN65"/>3.2. A GRUB telepítése</H3
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
NAME="AEN67"/>3.2.1. Telepítés</H4
><P
>&#13;Valahol a lemezeden található a <A
HREF="http://www.gnu.org/software/grub/"
TARGET="_top"
>GRUB</A
> rpm csomagja vagy forrása. Végezd el a rendszerednek megfelelõ telepítési lépéseket. A GRUB-ot ekkor már telepítetted, de még nem töltötted be. Rendszergazdaként add ki a következõ parancsot:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;# /sbin/grub-install /dev/hda
</PRE
></FONT
></TD
></TR
></TABLE
><P
>Ez betölti a GRUB-ot a lemezed master boot recordjába (MBR). Ezek után szerkesztened kell a /boot/grub/grub.conf fájlt az indítómenü beállításához.
</P
></DIV
><DIV
CLASS="sect3"
><HR/><H4
CLASS="sect3"
><A
NAME="AEN73"/>3.2.2. A grub.conf szerkesztése</H4
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;default=0
timeout=10
splashimage=(hd0,0)/grub/splash.xpm.gz
title Red Hat Linux (2.4.7-10)
	root (hd0,0)
	kernel /vmlinuz-2.4.7-10 ro root=/dev/hda6
	initrd /initrd-2.4.7-10.img

title Windows 98
	map (hd0,0) (hd0,2)
	map (hd0,2) (hd0,0)
	rootnoverify (hd0,2)
	chainloader +1

title DOS Boot Disk
	map (hd0,0) (hd0,2)
	map (hd0,2) (hd0,0)
	chainloader (fd0)+1
</PRE
></FONT
></TD
></TR
></TABLE
><P
>Menjünk sorban, és nézzük meg, mi mit jelent.</P
><P
>A "default=0" és a  "timeout=10" azt eredményezi, hogy ha nem nyomsz le semmit, a Linux fog betöltõdni 10 másodperc múlva. A "splashimage" eléggé egyértelmû, és nem is annyira fontos (indítókép -a ford.).</P
><P
>&#13;A "title" jelöli az egyes indítási beállításokat, és az utána következõ szöveg fog majd az indítómenüben megjelenni. A"root" adja meg, hogy melyik partíció tartalmazza a Linux kernel image-fájlt (ez lehet az aktuális gyökér (/) partíció, de mást is megadhatsz). Itt a "root (hd0,0)" azt jelenti a GRUB számára, hogy a kernel a /dev/hda eszköz elsõ partícióján van. Láthatod, hogy a GRUB érdekes számozást használ, 0-tól 3-ig jelöli a négy elsõdleges partíciót, és négy fölött a logikai partíciókat. A következõ sor mondja meg, hol található a kernel, és hol van a tényleges Linux rendszer gyökérpartíciója. Az "initrd" jelzi, hogy hol található az init ramdiszk-fájl. Meg kell jegyezni, hogy ez a pár sor kicsit eltérõ lehet akkor, ha nincs külön /boot partíciód. További segítségért nézd meg a GRUB kézikönyv oldalait.
</P
><P
>&#13;A "map" sorok a Windows 98 rész alatt elengedhetetlenek a telepített rendszer mûködéséhez. Ezek azok a varázslatot rejtõ sorok, amik a Windows számára azt a látszatot keltik, hogy õ az elsõ merevlemez elsõ partíciójára lett telepítve. Ha nem lapozzuk át a Windows partíciót a (hd0,0)-ra, akkor szétrombolja a partíciós táblát, és semmit se fogsz tudni indítani.
</P
><P
>&#13;A "rootnoverify" paraméter adja meg a GRUB-nak, hogy a Windows partícióból indítsa a rendszert, de ne próbálja meg felcsatolni azt; a "chainloader +1" paraméter alapján a GRUB a Windows rendszerbetöltõjének adja át a vezérlést, ami majd azt indítani fogja. 
</P
><P
>&#13;A "DOS boot disk" rész akkor kell, ha floppyról akarod indítani a Windows telepítését, de jól jöhet akkor is, ha bármilyen okból DOS lemezrõl kell indítanod a gépet. Ha a Windows telepítõ CD-je bootolható, szükséged lehet egy "Windows boot disk" bejegyzésre is, ami a CD-rõl való rendszerindításra adja át a vezérlést.
</P
><P
>&#13;Ezek után mentsük el a grub.conf fájlt és lépjünk ki a szövegszerkesztõbõl is. A LILO-tól eltérõen a GRUB-nál nem kell semmilyen programot futtatni a módosítások után. Most, ha kéznél van a Linux indítólemez is, próbáld meg a gép újraindítását. Amikor a rendszer felállt, látnod kell a GRUB indítómenüt a három menüponttal. Válaszd a Linuxot. Remélhetõleg a Linux ugyanúgy fog elindulni, mint eddig, ami azt mutatja, hogy helyesen telepítetted a GRUB-ot. Ha mégse, szerencsére ott a Linux indítólemez, indítsd el arról a gépet és javítsd ki a grub.conf-ot. Ha végül a Linux szerencsésen elindul, ideje telepíteni a Windowst.
</P
></DIV
></DIV
><DIV
CLASS="sect2"
><HR/><H3
CLASS="sect2"
><A
NAME="AEN83"/>3.3. A Windows telepítése</H3
><P
>&#13;Távolíts el minden lemezt és CD-t a gépbõl, és indítsd újra. <EM
>NE INDÍTSD EL úgy a gépet, hogy már van benne valami telepítõlemez.</EM
>  Ha ezt teszed, a BIOS egyszerûen elindítja a Windows telepítõt, és a GRUB-nak nem marad esélye trükközni. Amikor a GRUB menüje elõtûnik, tedd a DOS floppyt (vagy a CD-t) a meghajtóba, és válaszd ki a "DOS boot disk" pontot (vagy, ha készítettél, a "Windows boot disk"-et) annak függvényében, hogy melyik telepítési módot választod. A Windows telepítõnek látnia kell az újonnan készített partíciót, mint C: meghajtót. Telepítsd a Windowst.
</P
><P
>&#13;Ennyi az egész. Most már a géped kész mindkét rendszer indítására.
</P
></DIV
></DIV
></DIV
></BODY
></HTML
>
