<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-2">

 <TITLE>Winmodemek és a Linux HOGYAN</TITLE>
</HEAD>
<BODY>
<H1>Winmodemek és a Linux HOGYAN</H1>

<H2>Alexandre J., alexandre12@mageos.com</H2>v1.2, 2001 április 29.
<HR>
<EM>Ez a dokumentum segít a Winmodem tulajdonos felhasználóknak mûködésre bírni az eszközt Linux alatt.</EM>
<HR>
<H2><A NAME="s1">1. Mik azok a Winmodemek?</A></H2>


<H2><A NAME="ss1.1">1.1 Ezek a modemek...</A>
</H2>

<P>Egy Winmodem - mint a más modemek is - arra használható, hogy telefonos szolgáltatásokat vehessünk vele igénybe. Ezek lehet: BBS, Internet, hagyományos telefon, fax stb. A telefonvonalra van kötve és a sebességével jellemezzük. Ha többet akarsz tudni róluk, ajánlom olvasd el a Modems-HOWTO (Modem-HOGYAN) leírást.</P>
<H2><A NAME="ss1.2">1.2 ...nem igazi modemek !</A>
</H2>

<P>De azért WINmodemek. Ezért kell a Windows ahhoz, hogy mûködjenek. Miért? Egyszerûen azért mert buták. Egy speciális programra - meghajtóra -  van szükségük ahhoz, hogy feladatukat elláthassák. Aki meghajtóprogramot mond operációs rendszert is mond, a modemekhez mellékelt meghajtók pedig az esetek 99%-ban kizárólag MS-Windows platformra készülnek el.
A Linux elõretörésével azonban néhány gyártó - mint az LT vagy a Motorola - elhatározta, hogy a Linux alá is elkészítik modemeik meghajtóját. Viszont nem értették meg a Linux filozófiáját: a meghajtók természetesen mûködnek, de "zárt forráskódúak". Ezek ingyenesek, de nem a GPL licenc szerint használhatók. Ez azt jelenti, hogy a forráskódjuk nem hozzáférhetõ.</P>

<P>Így néhány "buherátor" elhatározta, hogy készítenek egy nyílt forráskódú meghajtót, de nem sokat tudtak a modemeikrõl, mert a gyártók nem akartak nyilatkozni azok jellemzõirõl. Ezért a nyílt forráskódú meghajtók gyakran alfa vagy béta állapotban vannak. </P>

<H2><A NAME="ss1.3">1.3 Honnan tudhatom meg, hogy Winmodemem van?</A>
</H2>

<P>1. Próbáld megállapítani annak a soros portnak a nevét, amelyikhez a modemed csatlakozik (Windows vagy MSDOS alatt például: COM1, COM2...)</P>
<P>A modem neve Linux alatt /dev/ttySx, ahol az x a DOS alatti portszám -1.
Például.: DOS alatt COM1, Linux alatt /dev/ttyS0</P>
<P>Második példa: DOS alatt: COM3, Linux alatt /dev/ttyS2</P>
<P>és így tovább...</P>
<P>2. Készíts egy szimbolikus hivatkozást (symlink) a /dev/ttySx eszközrõl a /dev/modem eszközre:
<HR>
<PRE>
rm -f /dev/modem&lt;p>
ln -s /dev/ttySx /dev/modem
</PRE>
<HR>
</P>
<P>3. Töltsd le és telepítsd a minicom csomagot, majd futtasd a "minicom -s" parancsot.</P>
<P>Válaszd ki a "Serial Port Setup" (soros port beállítása) menüpontot, nyomd le az "A" billentyût a "Serial Device" (soros eszköz) beállításához.
Töröld az egész sort, majd gépeld a "/dev/modem" sort, aztán az [Enter] billentyût lenyomva fogadd el.
Az [Esc] billentyû lenyomása után válaszd a "Save setup as dfl" menüpontot, aztán lépj ki az "Exit" menüpont kiválasztásával. Várj egy kicsit, majd gépeld be: "AT". Ha a modem OK-val válaszol, akkor NEM Winmodemed van, hanem hagyományos...</P>
<P>Ha az inicializáció túl sokáig tart, akkor bizony Winmodemed van - olvasd tovább ezt a dokumentumot ezzel is hasznossá téve. Jelentkezz be root felhasználóként.</P>

<P>4. Lépj ki a Minicom programból a CTRL-A, majd X begépelésével. </P>



<H2><A NAME="s2">2. ISA vagy PCI?</A></H2>


<H2><A NAME="ss2.1">2.1 PCI?</A>
</H2>

<P>Rendben, Winmodemünk van, de ennek is két típusa van: ISA vagy PCI. Jó, Winmodemünk van...de ennek is két típusa van: ISA vagy PCI. Hogy bonyolítsuk a dolgokat, a két csatolótípus teljesen különbözõ.
Ezért most fogjuk tesztelni, hogy megtudjuk nekünk milyen van. Elõször be kell állítanod a rendszermagot (kernel). A beállítás (ez make config; make menuconfig vagy make xconfig lehet - a lektor) során igennel ("yes") kell válaszolnod a következõ kérdésekre: </P>

<P>
<UL>
<LI>"Loadable module support" (betölthetõ modulok támogatása): 'Enable loadable module support (betölthetõ modulok támogatásának engedélyezése) (CONFIG_MODULES)', és 'Set version information on all modules for symbols (CONFIG_MODVERSIONS)' (ehhez a modutils csomagot telepítettnek kell lennie; lásd a Kerneld-HOWTO leírásban)</LI>
<LI>"General setup" (általános beállítás): <P>'PCI support' (PCI támogatás) (CONFIG_PCI)</P>
<P>Válaszd az 'Any' beállítást a 'PCI Access Mode' (PCI elérési mód) tulajdonsághoz (CONFIG_PCI_GOBIOS)</P>
<P>'PCI quirks' (CONFIG_PCI_QUIRKS)</P>
<P>'Backward compatible /proc/pci' (visszamenõleg kompatibilis /proc/pci) (CONFIG_PCI_OLD_PROC)</P>

</LI>
<LI>Ha be tudod állítani a PCI Device Name Database (PCI eszközök neveinek adatbázisa) tulajdonságot (talán  a 2.4+ rendszermagnál), igennel válaszolhatsz, ez könnyebbé teszi a /proc/pci fájl megértését (CONFIG_PCI_NAMES).</LI>
<LI>A fájlrendszereknél<P>'/proc filesystem support' (/proc fájlrendszer támogatás) (CONFIG_PROC_FS)</P>

</LI>
</UL>

Ha még sosem fordítottad újra a rendszermagot, a disztribúciód rendszermagjában ez benne lehet Ha új rendszermagot akarsz fordítani, olvasd el a Kernel-HOWTO leírást.</P>

<P>Most feltételezzük, hogy az új rendszermag telepítve van. </P>

<P>Most futtasd a 'cat /proc/pci' parancsot. Most futtasd a "cat /proc/pci" parancsot. Ha látod a modemed nevét a megjelenõ sorok közt, akkor PCI Winmodemed van. Ugorj  "A meghajtó telepítése" pontra.</P>


<H2><A NAME="ss2.2">2.2 vagy ISA ?</A>
</H2>

<P>Ha nem találtad meg, akkor feltehetõleg ISA modemed van. Hogyan bizonyosodhatsz meg errõl?</P>
<P>Az ISA támogatást nem feltételezi a rendszermagod (FRISSÍTÉS: ha 2.4.x
rendszermagod van, akkor az automatikusan megteszi Neked, ha így van ugord
át ezt a részt és olvasd a következõt). Létezik egy isapnp nevû program,
ami elvégzi ezt. Elõször is nézd meg, hogy a csomag telepítve van-e. Ha nincs,
töltsd le az isapnptools csomagot. </P>
<P>Ennek telepítése után a pnpdump nevû
speciális programot fogjuk futtatni, ez megvizsgálja a géped és megtalálja az ISA
eszközöket. Ezek után megpróbálja kitalálni, milyen
erõforrásokat használnak az eszközök, majd beírja ezeket az adatokat egy
/etc/isapnp.conf nevû fájlba. A fájl szerkesztése után majd egy másik
program, az isapnp futtatásakor a beállításokat kiolvasva automatikusan
beállítja az eszközeidet. </P>
<P> </P>
<P> Durván hangzik? Akkor kövesd 
ezeket a lépéseket: </P>
<P> </P>
<P> 1. Futtasd a 'pnpdump >
/etc/isapnp.conf' parancsot. </P>
<P>2. Szerkeszd át a kedvenc 
szövegszerkesztõddel</P>
<P> 3. Keresd meg azt a részt, ahol a
modemed leírása van. </P>
<P>4. Töröld ki a # jelet bizonyos sorok elõl. 
A következõkre lesz szükséged: </P>
<P> 1 line
'(IO 0 ...)'</P>
<P> 1 line '(INT 0 ...)'</P>
<P> 1 line '(DMA 0
...)'</P>
<P> 1 line '(DMA 1 ...)'</P>
<P> 1 line '(IO 1...)'</P>
<P> 5.
Távolíts el minden '(CHECK)' bejegyzést, a nem megjegyzésként szereplõ IO sorokban</P>
<P> 6. Futtasd a
'isapnp /etc/isapnp.conf' parancsot. Ha hibaüzeneteket kapsz, 
szerkeszd az isapnp.conf fájlt és változtasd a paramétereket a 
hibaüzenetek segítségével. Ha nincs több hiba, távolítsd el a fájlból 
a "#" jelet az '(ACT Y)' sor elõl a modem-résznél, majd futtasd újra az 
'isapnp /etc/isapnp.conf' parancsot. Most ki kell írja, hogy 
"[[A modemed neve]] Enabled OK"</P>
<P> 7. Add hozzá az 'isapnp
/etc/isapnp.conf' bejegyzést a "/etc/rc.d/rc.local" fájlhoz, az 'echo "isapnp /etc/isapnp.conf 
">> /etc/rc.d/rc.local' begépelésével. Ezt minden egyes indításkor felhasználhatod 
eszközeid automatikus beállításához. </P>
<P> </P>
<P> Ha ez segít, íme egy kivonat az
én /etc/isapnp.conf fájlomból (kommenteztem a fájlt,
az eredeti megjegyzések "##" jellel kezdõdnek):</P>

<P>
<HR>
<PRE>

# hasznos részletek ...
## (DEBUG)
(READPORT 0x0203)
(ISOLATE PRESERVE)
(IDENTIFY *)
(VERBOSITY 2)
(CONFLICT (IO FATAL)(IRQ FATAL)(DMA FATAL)(MEM FATAL)) # or WARNING

# belsõ modemem azonosítása

## Card 1: (serial identifier e2 00 00 01 00 05 50 c3 1e)
## Vendor Id GVC5005, Serial Number 256, checksum 0xE2.
## Version 1.0, Vendor version 0.1
## ANSI string -->LT Win Modem&lt;--
##
## Logical device id HSM0140
##     Device support I/O range check register
#

# Mi egy GVC5005/256 kártyát akarunk beállítani

(CONFIGURE GVC5005/256 (LD 0

# I/O Base address 0x03f8, with a range of 8
(IO 0 (SIZE 8) (BASE 0x03f8) )
# IRQ 4
(INT 0 (IRQ 4 (MODE +E)))
# DMA 5
(DMA 0 (CHANNEL 5))
# DMA 7
(DMA 1 (CHANNEL 7))
# I/O Base Address 2  0x0100, range 8
(IO 1 (SIZE 8) (BASE 0x0100) )
# a kártya neve
 (NAME "GVC5005/256[0]{LT Win Modem        }")
# aktiválás
(ACT Y)
# beállítás vége
))

######## Paraméterek egyéb ISA eszközeim számára ##############

## Minden kártya "Wait for Key" állapotba tér vissza
(WAITFORKEY)
</PRE>
<HR>
</P>

<H2><A NAME="ss2.3">2.3 ISA és a 2.4 rendszermagok</A>
</H2>

<P>Amennyiben 2.4 rendszermagod van (add ki a "uname -r" parancsot ennek megállapítására), nincs szükséged erre a trükkös szövegfájl és egyéb csomagok telepítésre. A 2.4 sorozat óta egy a PCI-hoz hasonlatos módszer van a rendszermagban, ez idejétmúlttá teszi az "isapnptools" csomagot. A szolgáltatáshoz használatához az "y" vagy "m" billentyût kell lenyomnod a  'Plug and Play support' (PNP támogatás) (CONFIG_PNP) és az 'ISA Plug and Play support' (ISA PNP támogatás) (CONFIG_ISAPNP) kérdésre a rendszermag konfigurálása során (mindezek a "Plug and Play configuration" részen belül vannak.) Ismét fordítsd újra és telepítsd a rendszermagot. Ha az "m" billentyût nyomtad le az "ISA Plug-and-play support" kérdésre/menüpontra, hasznos a "modprobe isapnp" parancs kiadása. Ehhez egy olyan meghajtóra van szükséged (mint pl. az ltmodem 5.78 - lásd a következõ részt), ami támogatja ezt az új eszközhozzáférési módszert.</P>


<H2><A NAME="s3">3. Egy modem meghajtójának telepítése</A></H2>

<P>Ezt a részt nem kell végig elolvasnod; elég csak azt a részt elolvasnod, amely a modemedre vonatkozik. Itt jelenleg az LT modem telepítése van leírva - a Lucent vagy nyílt forráskódú meghajtó használatával. Ha már írtál vagy használsz más Winmodem meghajtót - akár zárt akár nyílt forráskódút - írj egy e-mailt nekem (alexandre12@mageos.com), és belerakom annak leírását ebbe a fejezetbe. </P>


<H2><A NAME="ss3.1">3.1 ltmodem 5.78</A>
</H2>

<P>URL: http://www.tux.org/pub/dclug/marvin/ltmodem-5.78e.tar.gz</P>
<P>Szerzõ: Lucent</P>
<P>Licenc: nem GPL</P>
<P>Támogatás: ISA/PCI modem, Lucent chipkészlettel (Mars család)</P>
<P>Szolgáltatások: rendszermag-modul; soros port szimulálása. PPP, fax és hang kezelése</P>
<P>Jelenlegi változat: 5.78e</P>
<P>Dokumentáció: README-1ST</P>
<P>Igények: 2.2.x or 2.4.x; ISA PNP támogatás; "Loadable module support" (betölthetõ modulok támogatása); C fordító</P>
<P>Használata: olvasd el a  README-1ST leírást. Nagyon világos.</P>
<P>Problémák: </P>
<P>
<UL>
<LI>Unresolved symbols: xxx_isapnp_xxxx: futtasd a "modprobe isapnp" parancsot.</LI>
<LI>Device or ressource busy: modemed nem kompatibilis a meghajtóval</LI>
</UL>

Megjegyzések: a Lucent jelenleg - a rendszermag változatai és disztribúciós problémák elkerülésére - közreadja a forráskód egyes részeit.</P>

<H2><A NAME="ss3.2">3.2 Az LT WinModem (Lucent) 5.68 (ELAVULT)</A>
</H2>

<P>URL: http://www.linmodems.org/linux568.zip</P>
<P>Szerzõ: Lucent Technologies</P>
<P>Licenc: nem GPL</P>
<P>Támogatás: ISA/PCI modemek, Lucent chipkészlettel (Mars család)</P>
<P>Szolgáltatások: rendszermag-modul; soros port szimulálása. PPP, fax és hang kezelése</P>
<P>Jelenlegi változat (amennyire tudom): 5.68</P>
<P>Dokumentáció: README</P>
<P>Igények: 2.2.12 vagy újabb RedHat rendszermag; "loadable module support" (betölthetõ modulok támogatása)</P>
<P>Használata: csomagold ki ('unzip linux568.zip'), és futtasd az ./ltinst parancsot. Ennyi!</P>
<P>Problémák: </P>
<P>
<UL>
<LI>
</LI>
<LI>'insmod: ltmodem: Unresolved symbol(s) *****': A rendszermagod nem használható az ltmodem programmal. Szerezd be a 2.2.12 rendszermagot az ftp.kernel.org helyrõl, fordítsd le és telepítsd</LI>
<LI>'Warning: kernel version mismatch...": Ez egyszerûen azt jelenti, hogy nem 2.2.12-20 rendszermagod van. Ez mindössze egy figyelmeztetés, ez nem akadályozza a modem használatát</LI>
<LI>'ltmodem: init_module: device or resource busy':
<UL>
<LI>Nem lt modem vagy kompatibilis eszköz van telepítve</LI>
<LI>Ha ISA modem, nincs beállítva az isapnp segítségével</LI>
<LI>Ha ISA modem, nincs beállítva az isapnp segítségével</LI>
</UL>
</LI>
</UL>
</P>

<H2><A NAME="ss3.3">3.3 Az LTMODEM program (OpenSource meghajtó)</A>
</H2>

<P>URL: http://www.close.u-net.com</P>
<P>Szerzõk: Richard Close and Pavel Machek</P>
<P>Licenc: GPL</P>
<P>Támogatás: ISA/PCI modemek, Lucent chipkészlettel (Mars család)</P>
<P>Szolgáltatás: felhasználói meghajtó; Voice calls; nem támogatja a PPP-t (V90)</P>
<P>Jelenlegi változat (amennyire én tudom): 0.99</P>
<P>Dokumentáció: README</P>
<P>Igények: GNU C fordító, automake</P>
<P>Használata: </P>
<P>
<UL>
<LI>
</LI>
<LI>PCI: make ; make install - ezután használd az 'ltmodem' programot a modemmel való kommunikáláshoz</LI>
<LI>ISA: (olvasd a README.ISA fájlt) mv Makefile Makefile.PCI ; mv Makefile.ISA Makefile ; szerkeszd a config.h fájl, állítsd be a helyes értékeket modemedhez (I/O cím, DMA, IRQ) ; make ; make install -  ezután használd az 'ltmodem' programot a modemmel való kommunikáláshoz. 
</LI>
</UL>

Problémák: </P>
<P>
<UL>
<LI>"Sorry, I can't found any modem...": <P>
<UL>
<LI>Nem LT modemed van</LI>
<LI>ISA modemed van, amit nem állítottál be az isapnp programmal</LI>
<LI>ISA modemed van, de az ltmodem nem ISA modemhez lett lefordítva</LI>
<LI>PCI modemed van viszont a rendszermagodban nincs PCI támogatás beállítva</LI>
<LI>PCI modemed és megfelelõ a rendszermagod, de az ltmodem nem PCI modemhez lett lefordítva</LI>
</UL>
</P>
</LI>
</UL>
</P>

<H2><A NAME="s4">4. Végül...</A></H2>


<H2><A NAME="ss4.1">4.1 Licenc, szerzõi jog</A>
</H2>

<P>Copyright (C) 2000, 2001  Alexandre J. </P>
<P>Ez a program egy szabad szoftver; terjesztheted és/vagy módosíthatod</P>
<P>a Free Software Foundation által közzétett</P>
<P>GNU General Public License alapján;</P>
<P>vagy a Licenc 2. változata, illetve</P>
<P>(saját belátásod alapján) ennek késõbbi változata szerint.</P>

<P>Ez a program a használhatóságának reményében került terjesztésre,
de MINDENFÉLE GARANCIA NÉLKÜL; beleértve az
ELADHATÓSÁGOT vagy BÁRMELY CÉLRA VALÓ ALKALMASSÁGOT.
Lásd a GNU General Public License leírásban a további részleteket.</P>

<P>A GNU General Public License egy példányát meg kell kapnod
ezzel a programmal együtt; amennyiben ezt nem kapnád meg írj a következõ címre:
Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</P>


<H2><A NAME="ss4.2">4.2 Kapcsolatfelvétel</A>
</H2>

<P>Ha bármilyen ötleted van ezzel a leírással kapcsolatban, kérlek küldj egy e-mailt nekem
(Alexandre J.) az alexandre12@mageos.com címre. </P>
<P> </P>
<H2><A NAME="ss4.3">4.3 Források</A>
</H2>

<P>
<UL>
<LI>A Linmodems project honlapja: http://www.linmodems.org
</LI>
<LI>Az LTModem project honlapja: http://www.close.u-net.com
</LI>
<LI>A Lucent Technologies honlapja: http://www.lucent.com
</LI>
<LI>A Linux rendszermag: http://www.kernel.org
</LI>
<LI>Az isapnptools honlapja: http://www.roestock.demon.co.uk/isapnptools
</LI>
<LI>Az LDP honlapja (itt szerezhetsz be HOGYANokat): http://www.redhat.com/mirrors/LDP

</LI>
</UL>
</P>

<H2><A NAME="ss4.4">4.4 Magyar fordítás</A>
</H2>

<P>A magyar fordítást 
<A HREF="mailto:laca@janus.gimsz.sulinet.hu_NO_SPAM">Szijjártó László</A> készítette (2002.07.17).
Bármilyen fordítással kapcsolatos észrevételt a 
<A HREF="mailto:linuxhowto@sch.bme.hu_NO_SPAM">linuxhowto@sch.bme.hu</A> címre küldjetek.
A lektorálást 
<A HREF="mailto:dacas@freemail.hu_NO_SPAM">Daczi László</A> végezte el (2002.10.21). A fordítás javítva 2002.10.25.-én.
Eme dokumentum legfrissebb változata megtalálható a 
<A HREF="http://tldp.fsf.hu/index.html">Magyar Linux Dokumentációs Projekt</A> honlapján.</P>

</BODY>
</HTML>
