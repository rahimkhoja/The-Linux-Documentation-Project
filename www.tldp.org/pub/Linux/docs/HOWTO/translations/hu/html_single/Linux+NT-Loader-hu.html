<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-2">

 <TITLE>NT OS Loader + Linux mini-HOGYAN</TITLE>
</HEAD>
<BODY>
<H1>NT OS Loader + Linux mini-HOGYAN</H1>

<H2>Bernd Reichert, &lt;reichert@dial.eunet.ch&gt;</H2>v1.11, 1997 szeptember 2.
<H2><A NAME="s1">1. A dokumentum célja</A></H2>

<P>Ez a dokumentum leírja, hogyan használjuk fel a Windows NT betöltõjét 
(boot loader) a Linux indításához. Ezeket az eljárásokat Windows
NT 4.0-val és Linux 2.0-val tesztelték.</P>


<H2><A NAME="s2">2. Hogyan mûködik az NT rendszerbetöltõje ?</A></H2>

<P>Az NT betöltõ szereti a többi operáció rendszer rendszerindító szektorát 
egyetlen állományként megkapni. Beolvassa ezt az állományt és elindítja 
a kiválasztott operációs rendszert, mint pl. akár a Windows NT-t 
különbözõ módokkal, vagy más operációs rendszert.</P>

<H2><A NAME="s3">3. Tippek arra nézve, hogyan telepítsünk Windows NT-t és Linuxot ugyanarra a rendszerre</A></H2>

<H2><A NAME="ss3.1">3.1 Windows NT telepítés</A>
</H2>

<P>Próbáljuk elõször a Windows NT-t telepíteni. Ha NTFS fájlrendszert 
akarsz használni az NT telepítéséhez, tartsd észben, hogy a jelenlegi 
Linux verziók nem férnek hozzá az NTFS partíciókhoz. Egy alfa állapotú 
meghajtó elérhetõ a 
<A HREF="http://www.informatik.hu-berlin.de/~loewis/ntfs"></A> 
címen (a jelenlegi verziók már kezelik az NTFS-t, de az írás az ilyen partícióra még mindig nem ajánlott - a ford.) 
Készíthetsz egy különálló FAT-partíciót az adatcseréhez, vagy DOS-ra 
formázott hajlékonylemezeket kell használnod.</P>

<H2><A NAME="ss3.2">3.2 Particionálás</A>
</H2>

<P>Egy másik mini-HOGYAN azt ajánlja, hogy ne használjuk az NT "Disk 
Administrator" programját a Linux swap- és root partícióinak létrehozásához. 
Elég, ha csak az üres helyet látjuk. Én szintén a Linux <B>fdisk</B> 
programját ajánlom.</P>

<H2><A NAME="ss3.3">3.3 A Linux telepítése</A>
</H2>

<P>Most indítsd a Linuxot hajlékonylemezrõl (vagy CD-rõl - a ford.), és 
készítsd el a swap- és a root partíciót. Az <B>fdisk</B> az NTFS-partíciót 
HPFS típusúnak feltételezi. Ez normális. Indítsd újra a gépet, és 
telepítsd a Linuxot, ahogy szeretnéd.</P>

<P>A telepítõ esetleg felajánlja, hogy felcsatlakoztathatod a HPFS partíciót, 
amit talált: ezt hagyd figyelmen kívül.</P>

<H2><A NAME="ss3.4">3.4 Lilo</A>
</H2>

<P>Amikor a LILO-részhez érsz, add meg a Linux root partícióját 
mint indítási eszközt (boot device), mivel a merevlemez Master Boot 
Record-ja (MBR) már a Windows NT-é. Ez azt jelenti, hogy a root- 
illetve a boot bejegyzés a <CODE>/etc/lilo.conf</CODE> állományban ugyanaz az érték. 
Ha IDE merevlemezed van, és a Linux a második partíción van, a boot-bejegyzés 
a <CODE>/etc/lilo.conf</CODE>-ban a következõ módon néz ki:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
boot=/dev/hda2
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Ha két merevlemezed van, és a Linux a második lemez elsõ partícióján 
van, akkor pedig:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
boot=/dev/hdb1
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Futtasd a lilo-t azzal a rendszermaggal, ami megfelel a rendszerednek. 
Hajlékonylemezrõl indítva ellenõrizd, ha nem vagy benne biztos.</P>

<P>Ha nem tudod indítani a Windows NT-t, akkor baj van. Remélem, nemrég 
készítettél javítólemezt.</P>


<H2><A NAME="s4">4. Bootpart</A></H2>

<P>Létezik egy NT-program, a neve <B>bootpart</B> (G. Vollant készítette). 
Ez képes a következõ két pontban leírt mûvelet végrehajtására. A program elérhetõ a 
<A HREF="http://ourworld.compuserve.com/homepages/gvollant/bootpart.htm"></A> címen. </P>

<P>Ha tudni szeretnéd, hogyan mûködnek együtt a dolgok, kövesd a 
4. és 5. pontban leírtakat.</P>


<H2><A NAME="s5">5. A munka Linux-os része</A></H2>

<P>Addig, míg az NT-rész rendben nem lesz, hajlékonylemezrõl kell indítanod a gépet.</P>

<P>Most le kell lopnod a boot-szektort a Linux root partíciójáról. 
Ha ez a <CODE>/dev/hda2</CODE> partíció, akkor a <B>dd</B> parancs a következõ:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
# dd if=/dev/hda2 of=/bootsect.lnx bs=512 count=1
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Ha a <CODE>bootsect.lnx</CODE> nagyobb mint 512 bájt, 
akkor valami gond van.</P>
<P>Most másold ezt a állományt egy DOS-os formázott hajlékonylemezre, ha ezzel a módszerrel viszed 
át az adatokat az NTFS partícióra. </P>
<P>Másolhatsz akár a </P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
# mcopy /bootsect.lnx a:
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>vagy akár a</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
# mount -t msdos /dev/fd0 /mnt
# copy /bootsect.lnx /mnt
# umount /mnt
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>paranccsal is.</P>


<H2><A NAME="s6">6. A munka Windows NT-s része</A></H2>

<P>Másold az elõbbi fájlt a hajlékonylemezrõl a <CODE>C:\\bootsect.lnx</CODE> 
állományba. Nem mondom el, hogyan kell ezt csinálni.</P>
<P>Ami a Linuxnak a <CODE>/etc/lilo.conf</CODE>, az az NT-nél a <CODE>c:\\boot.ini</CODE>. 
Vedd le a rendszer (system) és a csak olvasható (read-only) attribútumokat 
róla a következõ paranccsal:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
C:\attrib -s -r c:\boot.ini 
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Most szerkeszd a <CODE>boot.ini</CODE> állományt egy szövegszerkesztõvel, például a Notepad programmal a következõképpen:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
[boot loader]
timeout=30
default=multi(0)disk(0)rdisk(0)partition(1)\WINNT
[operating systems]
multi(0)disk(0)rdisk(0)partition(1)\WINNT="Windows NT Workstation ... 
multi(0)disk(0)rdisk(0)partition(1)\WINNT="Windows NT Workstation ...
C:\BOOTSECT.LNX="Linux"
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Csak az utolsó sort adtuk hozzá ebben a példában. Miután elmentetted, 
állítsd vissza a <CODE>boot.ini</CODE> állományra vonatkozó attribútumokat:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
C:\attrib +s +r c:\boot.ini 
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>A Windows NT újraindítása után a következõt kell 
látnod:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
  OS Loader V4.00
 
  Please select the operating system to start:

  Windows NT Workstation Version 4.0
  Windows NT Workstation Version 4.0 [VGA mode]
  Linux

Ha a Linux-ot választod a következõt látod:

  LILO loading zImage ....
</PRE>
</CODE></BLOCKQUOTE>
</P>


<H2><A NAME="s7">7. Játszd újra, Sam...</A></H2>

<P>A <CODE>bootsect.lnx</CODE> új példányát kell bemásolnod a <CODE>C:\BOOTSECT.LNX</CODE> 
állományba minden olyan alkalommal, amikor változik a Linux partíció 
boot-szektora. Ez akkor történhet, ha pl. új rendszermagot telepítesz a 
LILO-val. Amint látod, ez a rendszer nem valami ideális az új rendszermagok 
teszteléséhez.</P>

<H2><A NAME="s8">8. Hibaelhárítás</A></H2>

<P>Ha a dolgok nem az elvárásoknak megfelelõen mennek, ellenõrizd 
a gép indíthatóságát egy hajlékonylemezzel. Ha a <CODE>/dev/hdb1</CODE> a Linux partíciód, 
a <CODE>/etc/lilo.conf</CODE> a következõ bejegyzéseket tartalmazza:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
root=/dev/hdb1
boot=/dev/fd0
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Futtasd a <B>lilo</B>-t úgy, hogy a meghajtóban van egy hajlékonylemez. Most 
próbálj rendszert indítani róla. Ha a Linux a <CODE>/dev/hdb1</CODE>-en nem indul el, akkor 
az NT betöltõje sem tudja azt elindítani. Ha egy csomó 01010101-et 
látsz, akkor a root partíciód nem érhetõ el. Ellenõrizd, hogy minden 
lemezedet látja-e a BIOS.</P>

<P>Ha a hajlékonylemez indítja a Linux partíciót, akkor le tudod szedni 
a boot-szektort az NT betöltõje számára:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
# dd if=/dev/fd0 of=/bootsect.lnx bs=512 count=1
</PRE>
</CODE></BLOCKQUOTE>
</P>

<P>Ezt a lemezt biztonsági lemezként megtarthatod, ha a Windows NT telepítés 
megsérülne.</P>


<H2><A NAME="s9">9. Referenciák</A></H2>

<P>
<UL>
<LI>The Linux+WindowsNT mini-HOWTO (Linux+Windows NT mini-HOGYAN)</LI>
<LI>The FAQ for FreeBSD 2.X (FreeBSD 2.X Gyakran Ismételt Kérdések (FAQ))</LI>
</UL>
</P>

<H2><A NAME="s10">10. Köszönetnyilvánítások</A></H2>

<P>
<UL>
<LI>Köszönet Xiaoming Yi-nek &lt;z3c20@ttacs.ttu.edu&gt; a tippért, 
így a dolgok akkor is mûködnek, ha nem az elsõ merevlemezrõl van szó.</LI>
<LI>Köszönet Frank Dennler-nek &lt;Frank.Dennler@zkb.ch&gt; a hajlékonylemezes
trükkért.</LI>
</UL>
</P>

<H2><A NAME="s11">11. Visszajelzés</A></H2>

<P>Minden megjegyzést szívesen veszek.</P>

<H2><A NAME="s12">12. Magyar fordítás</A></H2>

<P>A magyar fordítást 
<A HREF="mailto:laca@janus.gimsz.sulinet.hu_NO_SPAM">Szijjártó László</A> készítette (2002.08.07).
Bármilyen fordítással kapcsolatos észrevételt a 
<A HREF="mailto:linuxhowto@sch.bme.hu_NO_SPAM">linuxhowto@sch.bme.hu</A> címre küldjetek.
A lektorálást 
<A HREF="mailto:abrudana@freemail.hu_NO_SPAM">Abrudán Attila</A> végezte el (2002.09.09).
A dokumentum legfrissebb változata megtalálható a 
<A HREF="http://tldp.fsf.hu/index.html">Magyar Linux Dokumentációs Projekt</A> honlapján.</P>

</BODY>
</HTML>
