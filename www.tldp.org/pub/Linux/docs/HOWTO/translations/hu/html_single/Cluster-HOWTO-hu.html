<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-2">

 <TITLE>Linux fürtözés HOGYAN</TITLE>
</HEAD>
<BODY>
<H1>Linux fürtözés HOGYAN</H1>

<H2>Ram Samudrala <CODE>(me@ram.org)</CODE> </H2> v1.1, 2003 június 17.
<HR>
<EM>Hogyan készítsünk nagy teljesítményû Linux fürtöket.</EM>
<HR>
<H2><A NAME="s1">1. Bevezetés</A></H2>

<P>Ez a dokumentum leírja hogyan készítettem el a 
<A HREF="http://compbio.washington.edu">kutatásaimhoz</A> szükséges
nagy teljesítményû Linux fürtöket.</P>
<P>Az alábbi információkat a saját felelõsségedre használd. Nem vállalok felelõseget
semmilyen cselekedetedért, amelyet ezen HOGYAN elolvasására alapozol.
Eme HOGYAN legfrissebb változata megtalálható a
<A HREF="http://www.ram.org/computing/linux/linux_cluster.html">http://www.ram.org/computing/linux/linux_cluster.html</A> honlapon. </P>
<P>Szemben más dokumentumokkal, melyek általában beszélnek arról hogyan
kell fürtöket készíteni, ez egy specifikus leírás arról, hogy a mi laborunk
miként készítette el azt. Így nem csak a számítási szempontok részleteit,
hanem az asztali számítógép, laptop, és a szerver általános szempontjait
is tartalmazza.
A dokumentum fõleg belsõ használatra készült, de feltettem webre is, mivel
számos e-mail-t kaptam amik ugyanezekrõl az információkról érdeklõdnek.
Mostanában - ahogy egy másik 64 csomópontos fürtöt tervezetem -
azt találtam, hogy nincs információ arról, pontosan hogyan gyûjthetsz
össze olyan komponenseket amibõl Linux alatt megbízhatóan mûködõ csomópontokat
hozhatsz létre. Olyan információ ami nem csak a csomópontokkal történõ
számítást, hanem azok szükségleteit is tartalmazza.
Leginkább arra használható ez a HOGYAN, hogy bemutassa milyen
típusú hardverek mûködnek jól Linux alatt és milyenek nem.</P>
<H2><A NAME="s2">2. Hardver</A></H2>

<P>Ez a fejezet a hardver választásommal foglalkozik. Az
<A HREF="#known_hardware_issues">ismert hardver problémák</A>
fejezetet leszámítva feltettem, hogy minden <I>tényleg</I> jól mûködik.</P>
<P>A hardver telepítése egyszerû, a legtöbb részlet benne van a kézikönyvben.
Minden részben a hardverlista a megrendelés sorrendjében található (a legújabb a legelsõ).</P>
<H2><A NAME="ss2.1">2.1 Csomópont hardverek</A>
</H2>

<P>32 db gép az alábbi összeállítással rendelkezik:</P>
<P>
<UL>
<LI> 2 XEON 2.4GHZ 533FSB CPU </LI>
<LI> Supermicro X5DPR-1G2 alaplap </LI>
<LI> 2 512MB PC2100 DDR REG ECC RAM </LI>
<LI> 1 40GB SEA 7200 HD </LI>
<LI> 1 120GB SEA 7200 HD </LI>
<LI> Supermicro Slim 24X CDROM </LI>
<LI> CSE-812 400 C/B 1U doboz </LI>
</UL>
</P>
<P> 32 db gép az alábbi összeállítással rendelkezik:</P>
<P>
<UL>
<LI> 2 AMD Palamino MP XP 2000+ 1.67 GHz CPU </LI>
<LI> Asus A7M266-D w/LAN Dual DDR alaplap</LI>
<LI> 2 Kingston 512mb PC2100 DDR-266MHz REG ECC RAM </LI>
<LI> 1 41 GB Maxtor 7200rpm ATA100 HD </LI>
<LI> 1 120 GB Maxtor 5400rpm ATA100 HD </LI>
<LI> Asus CD-A520 52x CDROM </LI>
<LI> 1.44mb floppy meghajtó </LI>
<LI> ATI Expert 2000 Rage 128 32mb </LI>
<LI> IN-WIN P4 300ATX Mid torony ház </LI>
<LI> Enermax P4-430ATX tápegység </LI>
</UL>
</P>
<P>32 db gép az alábbi összeállítással rendelkezik:</P>
<P>
<UL>
<LI> 2 AMD Palamino MP XP 1800+ 1.53 GHz CPU </LI>
<LI> Tyan S2460 Dual Socket-A/MP alaplap </LI>
<LI> Kingston 512mb PC2100 DDR-266MHz REG ECC RAM </LI>
<LI> 1 20 GB Maxtor UDMA/100 7200rpm HD </LI>
<LI> 1 120 GB Maxtor 5400rpm ATA100 HD </LI>
<LI> Asus CD-A520 52x CDROM </LI>
<LI> 1.44mb floppy meghajtó </LI>
<LI> ATI Expert 98 8mb AGP monitorvezérlõ </LI>
<LI> IN-WIN P4 300ATX Mid torony ház </LI>
<LI> Intel PCI PRO-100 10/100Mbps hálózati kártya </LI>
<LI> Enermax P4-430ATX tápegység </LI>
</UL>
</P>
<P>32 db gép az alábbi összeállítással rendelkezik:</P>
<P>
<UL>
<LI> 2 Pentium III 1 GHz Intel CPU </LI>
<LI> Supermicro 370 DLE Dual PIII-FCPGA alaplap </LI>
<LI> 2 256 MB 168-pin PC133 Registered ECC Micron RAM </LI>
<LI> 1 20 GB Maxtor ATA/66 5400 RPM HD </LI>
<LI> 1 40 GB Maxtor UDMA/100 7200 RPM HD </LI>
<LI> Asus CD-S500 50x CDROM </LI>
<LI> 1.4 MB floppy meghajtó </LI>
<LI> ATI Expert 98 8 MB PCI monitorvezérlõ </LI>
<LI> IN-WIN P4 300ATX Mid torony ház </LI>
</UL>
</P>
<H2><A NAME="ss2.2">2.2 Szerver hardver</A>
</H2>

<P>1 db szerver külsõ használatra (információ terjesztés) az alábbi
összeállítással rendelkezik:</P>
<P>
<UL>
<LI> 2 AMD Palamino MP XP 2000+ 1.67 GHz CPU </LI>
<LI> Asus A7M266-D w/LAN Dual DDR </LI>
<LI> 4 Kingston 512mb PC2100 DDR-266MHz REG ECC RAM </LI>
<LI> Asus CD-A520 52x CDROM </LI>
<LI> 1 41 GB Maxtor 7200rpm ATA100 HD </LI>
<LI> 6 120 GB Maxtor 5400rpm ATA100 HD </LI>
<LI> 1.44mb floppy meghajtó </LI>
<LI> ATI Expert 2000 Rage 128 32mb </LI>
<LI> IN-WIN P4 300ATX Mid torony ház </LI>
<LI> Enermax P4-430ATX tápegység </LI>
</UL>
</P>
<H2><A NAME="ss2.3">2.3 Asztali számítógép hardver</A>
</H2>

<P> 1 db asztali számítógép az alábbi összeállítással rendelkezik:</P>
<P>
<UL>
<LI> 2 AMD XP 2600 MP CPU</LI>
<LI> MSI K7D Master-L DUAL MS-6501 alaplap </LI>
<LI> 4 1024MB PC2100 DDR REG ECC RAM </LI>
<LI> 1 40GB SEA 7200 Maxtor merevlemez </LI>
<LI> 2 120GB SEA 7200 Maxtor merevlemez </LI>
<LI> PIONEER DVR-AO5 IDE DVD-RW </LI>
<LI> 1.44mb floppy drive </LI>
<LI> ATI Expert 2000 Rage 128 32mb monitorvezérlõ kártya </LI>
<LI> IN-WIN P4 300ATX Mid torony ház </LI>
<LI> Intel PCI PRO-100 10/100Mbps hálózati kártya </LI>
<LI> 450W ENERMAX P4-430ATX tápegység </LI>
<LI> CREATIVE SB 128 5.1 PCI hangkártya  </LI>
</UL>
</P>
<P> 2 db asztali számítógép az alábbi összeállítással rendelkezik:</P>
<P>
<UL>
<LI> 2 AMD XP 2600 MP CPU</LI>
<LI> MSI K7D Master-L DUAL MS-6501 alaplap </LI>
<LI> 2 512MB PC2100 DDR REG ECC RAM </LI>
<LI> 1 40GB SEA 7200 Maxtor merevlemez </LI>
<LI> 2 120GB SEA 7200 Maxtor merevlemez </LI>
<LI> MSI 52X24X52X CR52-A2 CD-RW </LI>
<LI> 1.44mb floppy drive </LI>
<LI> ATI Expert 2000 Rage 128 32mb monitorvezérlõ kártya </LI>
<LI> IN-WIN P4 300ATX Mid torony ház </LI>
<LI> Intel PCI PRO-100 10/100Mbps hálózati kártya </LI>
<LI> 450W ENERMAX P4-430ATX tápegység </LI>
<LI> CREATIVE SB 128 5.1 PCI hangkártya  </LI>
</UL>
</P>
<P> 1 db asztali számítógép az alábbi összeállítással rendelkezik:</P>
<P>
<UL>
<LI> 2 AMD Palamino MP XP 2000+ 1.67 GHz CPU </LI>
<LI> Asus A7M266-D w/LAN Dual DDR </LI>
<LI> 2 Kingston 512mb PC2100 DDR-266MHz REG ECC RAM </LI>
<LI> Ricoh 32x12x10 CDRW/DVD Combo EIDE </LI>
<LI> 1 41 GB Maxtor 7200rpm ATA100 HD </LI>
<LI> 1 120 GB Maxtor 5400rpm ATA100 HD </LI>
<LI> 1.44mb floppy meghajtó </LI>
<LI> ATI Expert 2000 Rage 128 32mb </LI>
<LI> IN-WIN P4 300ATX Mid torony ház </LI>
<LI> Intel PCI PRO-100 10/100Mbps hálózati kártya </LI>
<LI> Enermax P4-430ATX tápegység </LI>
</UL>
</P>
<P>1 db asztali számítógép az alábbi összeállítással rendelkezik:</P>
<P>
<UL>
<LI> 2 Intel Xeon 1.7 GHz 256K 400FS </LI>
<LI> Supermicro P4DCE Dual Xeon alaplap </LI>
<LI> 4 256mb RAMBUS 184-Pin 800 MHz RAM </LI>
<LI> 2 120 GB Maxtor ATA/100 5400 RPM HD </LI>
<LI> 1 60 GB Maxtor ATA/100 7200 RPM HD </LI>
<LI> 52X Asus CD-A520 INT IDE CDROM </LI>
<LI> 1.4 MB floppy meghajtó </LI>
<LI> Leadtex 64 MB GF2 MX400 AGP </LI>
<LI> Creative SB LIVE Value PCI 5.1 </LI>
<LI> Microsoft Natural billentyûzet </LI>
<LI> Microsoft Intellimouse Explorer </LI>
<LI> Supermicro SC760 nagy torony ház, 400W-os tápegységgel </LI>
</UL>
</P>
<P> 2 db asztali számítógép az alábbi összeállítással rendelkezik:</P>
<P>
<UL>
<LI> 2 AMD K7 1.2g/266 MP Socket A CPU </LI>
<LI> Tyan S2462NG Dual Socket A alaplap </LI>
<LI> 4 256mb PC2100 REG ECC DDR-266Mhz  </LI>
<LI> 3 40 GB Maxtor UDMA/100 7200 RPM HD  </LI>
<LI> 50X Asus CD-A520 INT IDE CDROM  </LI>
<LI> 1.4 MB floppy meghajtó  </LI>
<LI> Chaintech Geforce2 MX200 32mg AGP  </LI>
<LI> Creative SB LIVE Value PCI  </LI>
<LI> Microsoft Natural billenytûzet  </LI>
<LI> Microsoft Intellimouse Explorer  </LI>
<LI> nagy torony ház, 300W-os tápegységgel  </LI>
</UL>
</P>
<P> 2 db asztali számítógép az alábbi összeállítással rendelkezik:</P>
<P>
<UL>
<LI> 2 Pentium III 1 GHz Intel CPU </LI>
<LI> Supermicro 370 DLE Dual PIII-FCPGA alaplap </LI>
<LI> 4 256 MB 168-pin PC133 Registered ECC Micron RAM </LI>
<LI> 3 40 GB Maxtor UDMA/100 7200 RPM HD </LI>
<LI> Asus CD-S500 50x CDROM </LI>
<LI> 1.4 MB floppy meghajtó </LI>
<LI> Jaton Nvidia TNT2 32mb PCI </LI>
<LI> Creative SB LIVE Value PCI </LI>
<LI> Microsoft Natural billentyûzet </LI>
<LI> Microsoft Intellimouse Explorer </LI>
<LI> nagy torony ház, 300W-os tápegységgel </LI>
</UL>
</P>
<P> 2 db asztali számítógép az alábbi összeállítással rendelkezik:</P>
<P>
<UL>
<LI> 2 Pentium III 1 GHz Intel CPU </LI>
<LI> Supermicro 370 DLE Dual PIII-FCPGA alaplap </LI>
<LI> 4 256 MB 168-pin PC133 Registered ECC Micron RAM </LI>
<LI> 3 40 GB Maxtor UDMA/100 7200 RPM HD </LI>
<LI> Mitsumi 8x/4x/32x CDRW </LI>
<LI> 1.4 MB floppy meghajtó </LI>
<LI> Jaton Nvidia TNT2 32mb PCI </LI>
<LI> Creative SB LIVE Value PCI </LI>
<LI> Microsoft Natural billentyûzet </LI>
<LI> Microsoft Intellimouse Explorer </LI>
<LI> nagy torony ház, 300W-os tápegységgel </LI>
</UL>
 </P>
<P> 2 db asztali számítógép az alábbi összeállítással rendelkezik:</P>
<P>
<UL>
<LI> 2 Pentium III 1 GHz Intel CPU </LI>
<LI> Supermicro 370 DE6 Dual PIII-FCPGA alaplap </LI>
<LI> 4 256 MB 168-pin PC133 Registered ECC Micron RAM </LI>
<LI> 3 40 GB Maxtor UDMA/100 7200 RPM HD </LI>
<LI> Ricoh 32x12x10 CDRW/DVD Combo EIDE </LI>
<LI> Asus CD-A520 52x CDROM </LI>
<LI> 1.4 MB floppy meghajtó </LI>
<LI> Asus V7700 64mb GeForce2-GTS AGP monitorvezérlõ kártya </LI>
<LI> Creative SB Live Platinum 5.1 hangkártya </LI>
<LI> Microsoft Natural billentyûzet </LI>
<LI> Microsoft Intellimouse Explorer </LI>
<LI> nagy torony ház, 300W-os tápegységgel </LI>
</UL>
</P>
<P> 3 db asztali számítógép az alábbi összeállítással rendelkezik:</P>
<P>
<UL>
<LI> 2 Pentium III 1 GHz Intel CPU </LI>
<LI> Supermicro 370 DE6 Dual PIII-FCPGA alaplap </LI>
<LI> 4 256 MB 168-pin PC133 Registered ECC Micron RAM </LI>
<LI> 3 40 GB Maxtor UDMA/100 7200 RPM merevlemez </LI>
<LI> Ricoh 32x12x10 CDRW/DVD Combo EIDE </LI>
<LI> 1.4 MB floppy meghajtó </LI>
<LI> Asus V7700 64mb GeForce2-GTS AGP monitorvezérlõ kártya </LI>
<LI> Creative SB Live Platinum 5.1 hangkártya </LI>
<LI> Microsoft Natural billentyûzet </LI>
<LI> Microsoft Intellimouse Explorer </LI>
<LI> nagy torony ház, 300W-os tápegységgel </LI>
</UL>
</P>
<H2><A NAME="ss2.4">2.4 Tûzfal, átjáró hardver</A>
</H2>

<P> 1 db tûzfal az alábbi összeállítással rendelkezik:</P>
<P>
<UL>
<LI> AMD Palamino XP 1700+ 1.47GHz CPU </LI>
<LI> MSI KT3 Ultra2 KT333 MS-6380E alaplap </LI>
<LI> 512 MB PC2100 DDR-266MHz DIMM RAM </LI>
<LI> 40GB Seagate 7200rpm ATA/100 merevlemez </LI>
<LI> Asus 52X CD-A520 INT IDE cdrom </LI>
<LI> 1.44 MB floppy meghajtó </LI>
<LI> ATI Expert 2000 Rage 128 32mb monitorvezérlõ kártya </LI>
<LI> 3 Intel Pro/1000T Gigabit Server ethernet kártya </LI>
<LI> 4U Black Rackmount acél ház </LI>
</UL>
</P>
<P> 1 átjáró (gateway) az alábbi összeállítással rendelkezik. Az átjáró tükrözése a tûzfalnak,
arra az esetre, ha az összeomlana/elromlana.</P>
<P>
<UL>
<LI> AMD Palamino XP 1800+ 1.57GHz CPU </LI>
<LI> MSI KT3 Ultra2 KT333 MS-6380E alaplap </LI>
<LI> 512 MB PC2100 DDR-266MHz DIMM RAM </LI>
<LI> 40GB Seagate 7200rpm ATA/100 merevlemez </LI>
<LI> Asus 52X CD-A520 INT IDE cdrom </LI>
<LI> 1.44 MB floppy meghajtó </LI>
<LI> ATI Expert 2000 Rage 128 32mb monitorvezérlõ kártya </LI>
<LI> 3 Intel Pro/1000T Gigabit Server ethernet kártya </LI>
<LI> 4U Black Rackmount acél ház </LI>
</UL>
</P>
<H2><A NAME="ss2.5">2.5 Egyéb, kiegészítõ hardverek</A>
</H2>

<P> Biztonsági mentés:</P>
<P>
<UL>
<LI> 2 Sony 20/40 GB DSS4 SE LVD DAT drives </LI>
</UL>
</P>
<P> Monitorok:</P>
<P>
<UL>
<LI> 2 17" Viewsonic VE700 LCD monitor </LI>
<LI> 1 20.1" Viewsonic VP201M LCD monitor </LI>
<LI> 1 22" Viewsonic P220F 0.25-0.27m monitor </LI>
<LI> 4 21" Sony CPD-G500 .24mm monitor </LI>
<LI> 2 18" Viewsonic VP181 LCD monitor </LI>
<LI> 1 17" Viewsonic VE170 LCD monitor </LI>
<LI> 2 Sun monitors </LI>
</UL>
</P>
<P> Nyomtatók: </P>
<P>
<UL>
<LI> HP colour laserject 4600dn </LI>
</UL>
</P>
<H2><A NAME="ss2.6">2.6 "Kössünk össze mindent egymással" hardverek</A>
</H2>

<P> KVM monitor kapcsolókat használunk egy olcsó monitorral,
hogy "lássuk" az összes gépet.</P>
<P>
<UL>
<LI> 15" .28dp XLN CTL Monitor </LI>
<LI> 3 Belkin Omniview 16-Port Pro Switches </LI>
<LI> Belkin Omniview 2-Port Switch </LI>
<LI> APC AR203 netshelter rack unit </LI>
</UL>
</P>
<P> Ez egy jó megoldás, de azt hiszem nem feltétlenül szükséges.
Amire szükségünk van, az egy kis hordozható monitor amely a PC hátára csatlakoztatható
(stylus-al mûködik, mint a Palm).
Nem tervezem több monitorkapcsoló illetve KVM kábelt használatát.</P>
<P> A hálózat fontos:</P>
<P>
<UL>
<LI> 2 Netgear FS750NA 48 port/1 git network switch </LI>
<LI> 1 Netgear FSM750S 48 port/2 git network switch </LI>
<LI> 1 Netgear FS517TS 16 port/1 git network switch </LI>
<LI> 1 Netgear FS750NA 48 port network switch </LI>
<LI> 1 Netgear FS524 24 port network switch </LI>
<LI> 1 Cisco Catalyst 3448 XL Enterprise Edition 48 port network switch </LI>
<LI> 1 Netgear ME102NA Wireless Access Point </LI>
<LI> 1 Netgear MA401NA Wireless PCMCIA  </LI>
</UL>
</P>
<H2><A NAME="ss2.7">2.7 Költségek</A>
</H2>

<P> A mi szállítónk a Hard Drives Northwest (
<A HREF="http://www.hdnw.com">http://www.hdnw.com</A>).
Minden számítási csomópontért a fürtünkben (a két processzort is beleértve)
körülbelül 1500-2000 USD-t fizettünk adóval együtt. Az általános célunk az volt,
hogy a költség 1000 USD alatt legyen processzoronként (beleértve az egyéb alkatrészek árát is). </P>
<H2><A NAME="s3">3. Szoftver</A></H2>

<H2><A NAME="ss3.1">3.1 Operációs rendszer: természetesen Linux!</A>
</H2>

<P> Az alábbi kerneleket és disztribúciókat használjuk:</P>
<P>
<UL>
<LI> Kernel 2.2.16-22, KRUD 7.0 disztribúció</LI>
<LI> Kernel 2.4.9-7, KRUD 7.2 disztribúció</LI>
<LI> Kernel 2.4.18-10, KRUD 7.3 disztribúció</LI>
<LI> Kernel 2.4.20-13.9, KRUD 9.0 disztribúció</LI>
</UL>
</P>
<P>Ezek a disztribúciók jól mûködnek mióta a frissítéseket CD-n küldik
és nem kell megbízni a külsõ hálózatban a frissítések beszerzéséhez.
"Tisztábbnak" tûnnek mint a szokásos Red Hat disztribúciók és
a beállítása nagyon stabil. </P>
<H2><A NAME="ss3.2">3.2 Hálózati szoftver</A>
</H2>

<P> A Shorewall 1.3.14a programot (
<A HREF="http://www.shorewall.net">http://www.shorewall.net</A>) használjuk tûzfalnak. </P>
<H2><A NAME="ss3.3">3.3 Párhuzamos feldolgozó szoftver</A>
</H2>

<P> Mi a saját szoftverünket használjuk alkalmazások párhuzamosítására,
de vannak tapasztalataink PVM-el és MPI-al. Szerintem ezeknek az elõre
csomagolt programoknak az többletterhelése túl nagy.
Azt ajánlom írjál alkalmazás specifikus kódot a feladatodhoz
(magánvélemény). </P>
<H2><A NAME="ss3.4">3.4 Költségek</A>
</H2>

<P>A Linux és a legtöbb szoftver ami Linux rendszeren fut ingyen másolható. </P>
<H2><A NAME="s4">4. Telepítés, beállítás és üzemeltetés</A></H2>

<H2><A NAME="ss4.1">4.1 A merevlemez beállítása</A>
</H2>

<P> Ez a fejezet a merevlemez-partícionálási stratégiát írja le. </P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
fürtözött gépek:

hda1 - swap   (2 * RAM)
hda2 - /      (maradék hely)
hdb1 - /maxa  (teljes lemez)

asztali számítógép (windows nélkül):

hda1 - swap   (2 * RAM)
hda2 - /      (4 GB)
hda3 - /spare (maradék hely)
hdb1 - /maxa  (teljes lemez)
hdd1 - /maxb  (teljes lemez)

asztali számítógép (windows-szal):

hda1 - /win   (teljes disk)
hdb1 - swap   (2 * RAM)
hdb2 - /      (4 GB)
hdb3 - /spare (maradék hely)
hdd1 - /maxa  (teljes lemez)

laptop-ok (egy lemez):

hda1 - /win   (a teljes lemezméret fele)
hda2 - swap   (2 * RAM)
hda3 - /      (maradék hely)
</PRE>
</CODE></BLOCKQUOTE>
</P>
<H2><A NAME="ss4.2">4.2 Csomagok beállítása</A>
</H2>

<P> A fürt gépeire a csomagok minimális halmazát telepítettük.
A felhasználóknak megengedtük, hogy úgy konfigurálják az asztali számítógépeket,
ahogy akarják. </P>
<H2><A NAME="ss4.3">4.3 Operációs rendszer telepítése és karbantartása</A>
</H2>

<H3>Csomagok klónozása és karbantartása</H3>

<H3>FAI</H3>

<P>Az FAI (
<A HREF="http://www.informatik.uni-koeln.de/fai/">http://www.informatik.uni-koeln.de/fai/</A>) egy automatizált
rendszer, amely Debian GNU/Linux operációs rendszer telepítésére használható PC fürtökön.
Veszel egy vagy több szûz PC-t, bekapcsolod és néhány perc múlva a Linux
fel van telepítve és be van állítva, futtatása az egész fürtön semmilyen beavatkozást nem igényel.</P>
<H3>SystemImager</H3>

<P>A SystemImager (
<A HREF="http://systemimager.org">http://systemimager.org</A>) egy szoftver, ami automatizálja a
Linux és szoftverek telepítését és a termelés beindítását. </P>
<H3>Egyéni klónozási stratégia</H3>

<P> Van egy teljesen elosztott rendszerünk. Ezt azt jelenti, hogy minden gép
az operációs rendszer egy példányát tartalmazza. Az operációs rendszert
minden gépre manuálisan telepíteni kényelmetlen. A telepítés
optimalizálásához elõször egy gépet telepítettem és állítottam be pontosan
úgy, ahogy akartam. Aztán készítettem egy tömörített tar állományt az egész
rendszerrõl amit egy CD-ROM-on helyeztem el. Végül errõl klónoztam
minden gépet a fürtben. </P>
<P> A tar állomány készítésére az alábbi utasítást használtam:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
tar -czvlps --same-owner --atime-preserve -f /maxa/slash.tgz /
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P> Egy <CODE>go</CODE> nevû szkriptet használok, ami veszi a hosztnevet és az
IP címet mint argumentumot, és kicsomagolja a <CODE>slash.tgz</CODE> állományt
a CD-ROM-ról, majd lecseréli a hosztnevet és az IP címet a megfelelõ helyeken.
A <CODE>go</CODE> szkript és bemeneti állományai elérhetõek a
<A HREF="http://www.ram.org/computing/linux/cluster/">http://www.ram.org/computing/linux/linux/cluster/</A> címen.
Ezt a szkriptet módosítani kell a TE fürtöd felépítésednek megfelelõen. </P>
<P>A Tom's Root Boot csomagot is használom (
<A HREF="http://www.toms.net/rb/">http://www.toms.net/rb/</A>) arra, hogy
indítsam a gépet és klónozzam a rendszert.
A <CODE>go</CODE> szkriptet el lehet helyezni a CD-ROM-on vagy egy floppy lemezen
ami a Tom's Root Boot csomagot is tartalmazza.
(törölhetsz néhány programot ebbõl a csomagból, ha kifutsz a floppy lemez
kapacitásából). </P>
<P> Még kényelmesebb, ha készítesz egy indító CD-ROM-ot ami a
Tom's Root Boot csomagot és a <CODE>go</CODE> szkriptet, valamint
a klónozni kívánt rendszer tar állományát tartalmazza.
Módosíthatod a Tom's Root Boot csomag inicializáló szkriptjét, hogy a
<CODE>go</CODE> szkriptet futtassa
(mindig be kell majd állítanod az IP címet, ha nem használsz DHCP szolgáltatást).</P>
<P> Egy alternatív lehetõség, hogy készítesz egy saját indító lemezt
(mint egy mentõ lemez), amely tetszésed szerinti kernelt és programokat tartalmaz.
Számos dokumentum létezik, ami leírja ezek készítésének módját.
A Linux Bootdisk HOWTO (
<A HREF="http://www.linuxdoc.org/HOWTO/Bootdisk-HOWTO/">http://www.linuxdoc.org/HOWTO/Bootdisk-HOWTO/</A>) is tartalmaz
hivatkozásokat más elõre gyártott boot/root lemezekre. </P>
<P> Így kifejleszthetsz egy rendszert ahol az összes dolog amit tenned kell
csak annyi, hogy behelyezed a CD-ROM-ot bekapcsolod a gépet, veszel egy
csésze kávét (vagy sütit) és visszajössz megnézni a kész klónt.
Ezt az eljárást ismételheted annyiszor, ahány géped van.
Ez az eljárás nagyon jól mûködik nekem és ha van valaki aki
beteszi és kiveszi a CD-ROM-okat akkor még jobb. </P>
<P> Rob Fantini (
<A HREF="mailto:rob@fantinibakery.com">rob@fantinibakery.com</A>) módosította a fenti szkriptet, Mandrake 8.2
rendszer klónozásához. Ez elérhetõ a 
<A HREF="http://www.ram.org/computing/linux/cluster/fantini_contribution.tgz">http://www.ram.org/computing/linux/cluster/fantini_contribution.tgz</A>
címen.</P>
<P> Jelenleg egy olyan rendszeren dolgozok, amelyikben minden
egy CD lemezre van felrakva, errõl indul a gép és könnyen klónozható.
A közeljövõben közzéteszem a módszert. </P>
<H3>DHCP vagy beégetett IP cím?</H3>

<P> Ha van egy mûködõ DHCP szolgáltatásod, akkor nem szükséges újra beállítanod az IP címet
és ezt a részt törölheted a <CODE>go</CODE> szkriptbõl. </P>
<P> A DHCP elõnye, hogy nem kell vacakolnod az IP címekkel mert
a megfelelõen beállított DHCP szerver szolgáltatja azokat.
Egy hátránya, hogy egy központi szerveren van megvalósítva (és ahogy mondtam
azon vagyok hogy elosszam a dolgokat amennyire csak lehet).
Az IP címek hardver ethernet címekhez való kötése is kellemetlen lehet,
amennyiben a gépet vagy a hosztnév cserét a szokásos módon kívánod
végrehajtani. </P>
<H2><A NAME="known_hardware_issues"></A> <A NAME="ss4.4">4.4 Ismert hardver problémák </A>
</H2>

<P> A hardverek általában tényleg igazán jól mûködtek. Specifikus kérdéseket az alábbiakban sorolunk fel:</P>
<P>Az AMD dual 1.2 GHz gépek igazán melegszenek mûködés közben. Kettõ már érezhetõen növeli
a szoba hõmérsékletét. Míg jók lehetnek asztali számítógépekhez, de a hûtés és az
energia fogyasztás megfontolandó, amikor nagy fürtök részeként használjuk õket.
A korábban bemutatott AMD Palmino konfiguráció igazán jól mûködik,
de azt ajánlom vegyél két ventilátort minden esetben,
ez megoldotta az összes instabilitás problémánkat.</P>
<H2><A NAME="known_software_issues"></A> <A NAME="ss4.5">4.5 Ismert szoftver problémák </A>
</H2>

<P> Néhány tar program nem úgy készíti el a tar állományt, ahogy azt elvárnánk
(különösen a szimbolikus hivatkozások visszafejtésében mutatkozik ez meg).
A megoldás, hogy használj olyan tar programot, ami jól csinálja, például
a Red Hat 7.0 disztribúcióban lévõt. </P>
<H2><A NAME="s5">5. Feladat végrehajtás a fürtön</A></H2>

<P> Ez a fejezet úgy fejlõdik ahogy a fürtöm használata alakul.
Eddig azon voltam, hogy megírjam a saját üzenet küldõ eljárásaimat,
amellyel különbözõ gépeken futó processzek kommunikálnak egymással.</P>
<P>Sok alkalmazás - különösen a számítógépes genomika területén - masszívan és
könnyen párhuzamosítható. Ez azt jelenti, hogy jó elosztás érhetõ el
azáltal, hogy azonos feladatokat szórunk szét a gépek között (például
amikor a teljes genomot analizáljuk azt a technikát használjuk, ami
egy génen, proteinen dolgozik és minden processzor egy génen, proteinen
dolgozhat idõben, függetlenül a többi processzortól).</P>
<P> Eddig nem kellet használunk profi queue rendszereket, de ez nyilvánvalóan
erõsen függ a futtatni kívánt alkalmazástól.</P>
<H2><A NAME="ss5.1">5.1 Durva teljesítményteszt</A>
</H2>

<P> Egyszerûen a legfontosabb programot futtattuk (a mi <I>ab initio</I>
protenin folding szimulációs programunkat) egy Pentium 3 1GHz processzoros gépen
referenciának. A következõ eredmények születtek:</P>

<P>
<BLOCKQUOTE><CODE>
<PRE>
Athlon 1.2 GHz processzor körülbelül 16% gyorsabb
Xeon   1.7 GHz processzor körülbelül 27% gyorsabb
Athlon 1.5 GHz processzor körülbelül 38% gyorsabb
Athlon 1.7 GHz processzor körülbelül 46% gyorsabb
Xeon   2.4 GHz processzor körülbelül 62% gyorsabb
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Igen, az Athlon 1.5 GHz gyorsabb, mint
a Xeon 1.7-es mivel a Xeon csak hat utasítás per órajelet (IPC), míg az Athlon
kilenc órajelet futtat (számolj!).</P>
<H2><A NAME="ss5.2">5.2 Folyamatos üzemidõ (uptime)</A>
</H2>

<P> A gépek, mind hardver, mind szoftver tekintetben hihetetlenül
stabilnak bizonyultak. Egyszer lettek debuggolva
(rendszerint az új gépek közül néhány hardver problémával érkezik)
folyamatosan nagyon nagy terhelés alatt.
Egy példa látható alul.
Újraindítások általában akkor történnek, amikor elektromos zavar keletkezik.
<BLOCKQUOTE><CODE>
<PRE>
  2:29pm  up 495 days,  1:04,  2 users,  load average: 4.85, 7.15, 7.72
</PRE>
</CODE></BLOCKQUOTE>
</P>
<H2><A NAME="s6">6. Köszönetnyilvánítás</A></H2>

<P> A következõ személyek segítettek ennek a HOGYANnak az elkészítésében:</P>
<P>
<UL>
<LI> Michael Levitt (
<A HREF="mailto:michael.levitt@stanford.edu">Michael Levitt</A>)</LI>
</UL>
</P>
<H2><A NAME="references"></A> <A NAME="s7">7. Irodalomjegyzék</A></H2>

<P> Az alábbi dokumentumok hasznosak lehetnek - ezek referenciák olyan
forrásokra, amelyek a nagy teljesítményû fürtök használatával foglalkoznak:</P>
<P>
<UL>
<LI> 
<A HREF="http://www.ram.org/computing/rambin/rambin.html">RAMBIN web page</A>
</LI>
<LI> 
<A HREF="http://www.ram.org/computing/ramp/ramp.html">RAMP web page</A>
</LI>
<LI> 
<A HREF="http://www.ram.org/research/research.html">Ram Samudrala's research page</A> (ebben a HOGYANban leírt fürttel elért néhány kutatási eredményt ír le)</LI>
</UL>
</P>
<H2><A NAME="s8">8. Magyar fordítás</A></H2>

<P>A magyar fordítást
<A HREF="mailto:szferi@angel.elte.hu_NO_SPAM">Szalai Ferenc</A> készítette (2003.05.19).
A lektorálást
<A HREF="mailto:dacas@freemail.hu_NO_SPAM">Daczi László</A> végezte el (2003.05.21).
Bármilyen fordítással kapcsolatos észrevételt a
<A HREF="mailto:linuxhowto@sch.bme.hu_NO_SPAM">linuxhowto@sch.bme.hu</A> címre küldjetek.
Eme dokumentum legfrissebb változata megtalálható a
<A HREF="http://tldp.fsf.hu/index.html">Magyar Linux Dokumentációs Projekt</A> honlapján.
A fordítás javítva 2003.05.26.-án.</P>
</BODY>
</HTML>
