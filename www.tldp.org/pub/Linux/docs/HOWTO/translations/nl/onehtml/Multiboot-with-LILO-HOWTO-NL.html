<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>Win95 + WinNT + Linux multiboot met LILO mini-HOWTO</TITLE>


</HEAD>
<BODY>
<H1>Win95 + WinNT + Linux multiboot met LILO mini-HOWTO</H1>

<H2>Renzo Zanelli, <CODE>rzanelli@southeast.net</CODE> Vertaling: Jasper Aukes, <CODE>jasper@nl.linux.org</CODE></H2>v1.0, 26 Maart 1998, vertaling 12 April 1999
<P><HR>
<EM>Dit document beschrijft hoe Windows 95, Windows NT en Linux in een multiboot
omgeving te gebruiken zijn.</EM>
<HR>
<H2><A NAME="s1">1. Inleiding</A></H2>

<P>Er is een aantal documenten beschikbaar die in detail beschrijven hoe een
willekeurig aantal OS'sen te gebruiken is met gebruikmaking van NT's OS loader.
Toen ik eindelijk Windows NT kocht, had ik al Windows 95 en Linux op mijn
systeem geinstalleerd en gebruikte ik LILO om tussen beiden te kiezen. Ik
koos ervoor om Windows NT aan LILO toe te voegen in plaats van NT's OS loader te
gebruiken.
<P>Oorspronkelijk had ik Windows 95 op mijn eerste IDE disk en Linux op mijn tweede
IDE disk. De Linux disk werd mijn derde IDE drive en ik plaatste een nieuwe IDE
disk voor Windows NT als tweede drive. Ook al heb ik geen andere configuraties
getest, ik ga er van uit dat de volgorde waarin ieder OS geinstalleerd wordt of
op welke disk er niet toe doet.
<P>Vergeet gewoon niet de nood opstart floppies aan te maken wanneer elk OS er je
om vraagt!
<P>Omdat ik Gilles Vollant's BootPart utitily gebruik en BootPart slechts drives
ondersteunt met een grootte tot 4GB, zou dit eventueel niet kunnen werken als je
drives gebruikt die groter zijn. Als je met drives moet werken die groter zijn
dan 4GB, neem dan contact op met Gilles (zie BootPart documentatie voor Gilles'
email adres).
<H2><A NAME="s2">2. De Besturingssystemen Installeren</A></H2>

<P>Als je de OSsen installeert, let er dan op dat ze allemaal geinstalleerd worden
op partities waarvan kan worden opgestart. Ik heb zowel Windows 95 als
Windows NT op Fat 16 partities geinstalleerd, dus deze procedure werkt met Fat
16 disks. Als je besluit Fat32 voor Windows 95 en NTFS voor Windows NT te
gebruiken, controleer dan of jouw versie van Linux dat ondersteunt en in welke
mate.
<H2>2.1 Windows 95 Installeren</H2>

<P>Installeer Windows 95 op je eerste drive. Dit zal je C: drive worden. Denk er
aan om Windows 95 opstart schijven aan te maken als je er om gevraagd wordt.
<P>Ik merkte dat het beter is als de Linux drive van het systeem verwijderd is als
je Windows 95 installeert, zodat deze nooit gedetecteerd wordt en voor zover
het Windows 95 aangaat, niet bestaat.
<P>Op dit moment zou je, als je alles goed hebt gedaan, Windows 95 moeten kunnen
opstarten.
<H2>2.2 Windows NT 4.0 Installeren</H2>

<P>Installeer Windows NT 4.0 op je tweede drive. Maak de partitie die je creeert
op deze drive bootable. Niet alle versies van Linux ondersteunen NTFS, dus heb
ik een FAT16 partitie aangemaakt om veilig te zitten en omdat ik gegevens uit
wilde wisselen tussen de Windows drives.
<P>Als Windows NT zichzelf installeert, zal het de aanwezigheid van Windows 95
opmerken en er een optie voor in de NT OS loader neerzetten. Je moet drie opties
in het OS loader menu kunnen zien:
<BLOCKQUOTE><CODE>
<PRE>
Windows NT Workstation Version 4.00
Windows NT Workstation Version 4.00 [VGA mode]
Microsoft Windows
</PRE>
</CODE></BLOCKQUOTE>
<P>Nu zou je, als je alles goed hebt gedaan, moeten kunnen kiezen tussen opstarten
met Windows NT en Windows 95.
<H2>2.3 Linux Installeren</H2>

<P>Installeer Linux op je derde drive. Toen ik Linux installeerde had ik alleen
Windows 95 geinstalleerd dus voegde ik de Windows 95 partitie toe aan Lilo. Je
kunt rustig alle OSsen als optie installeren als je LILO installeert, maar je
kunt ook het Lilo configuratie bestand later aanpassen. Ik zal laten zien hoe
het /etc/lilo.conf bestand er uit moet zien in het volgende deel. Wanneer Linux
geinstalleerd is, zou je met Linux moeten kunnen opstarten.
<H2><A NAME="s3">3. Het Linux gedeelte</A></H2>

<P>Dit gaat over het aanpassen van /etc/lilo.conf en het herinstalleren van LILO.
Het volgende zou al aanwezig moeten zijn in /etc/lilo.conf:
<BLOCKQUOTE><CODE>
<PRE>
boot=/dev/hda
</PRE>
</CODE></BLOCKQUOTE>
<P>De Linux strofe zou ook al aanwezig moeten zijn:
<BLOCKQUOTE><CODE>
<PRE>
# Linux strofe
image=/vmlinuz
root=/dev/hdc1
label=Linux
# Einde Linux strofe
</PRE>
</CODE></BLOCKQUOTE>
<P>Voeg nu de Windows 95 strofe toe:
<BLOCKQUOTE><CODE>
<PRE>
# Windows 95 strofe
other=/dev/hda1
table=/dev/hda
label=Windows95
# Einde Windows 95 strofe
</PRE>
</CODE></BLOCKQUOTE>
<P>Voeg nu de Windows NT strofe toe:
<BLOCKQUOTE><CODE>
<PRE>
# Windows NT strofe
other=/dev/hdb1
table=/dev/hda
loader=/boot/any_d.b
label=WindowsNT
# Einde Windows NT strofe
</PRE>
</CODE></BLOCKQUOTE>
<P>Draai LILO nog een keer. Nou zou je, als alles goed is, keuzes voor Windows 95,
Windows NT en Linux moeten hebben voor LILO. Je zou Linux en Windows 95 moeten
kunnen opstarten (de laatste geeft je de Windows NT boot loader). Om de optie
Windows NT te laten werken, moet je nog wat doen aan de Windows NT kant.
<H2><A NAME="s4">4. Het Windows NT gedeelte</A></H2>

<P>Voor je door kan gaan, moet je eerst twee dingen doen.
<P>Ten eerste moet je Gilles Vollant's BootPart utility downloaden en uitpakken
Dit pakket is te vinden op 
<A HREF="http://www.winimage.com/bootpart.htm">http://www.winimage.com/bootpart.htm</A>, er
staat ook wat informatie bij over het gebruik ervan.
<P>Vervolgens moet je de volgende files naar de root directory van Windows NT
kopieren (gooi ze nog niet weg!)
<BLOCKQUOTE><CODE>
<PRE>
Boot.ini
Bootsect.dos
Ntdetect.com
Ntldr
</PRE>
</CODE></BLOCKQUOTE>

Deze files vormen de Windows NT loader. Ze staan in de root van de Windows 95
disk en zijn daar neergezet door Windows NT toen je het installeerde.
<P>Als dit is gebeurd, boot Windows 95 in DOS prompt mode (druk op Shift+F5 als
Windows 95 aan het opstarten is) en geef het volgende commando:
<P>
<BLOCKQUOTE><CODE>
<PRE>
BOOTPART WINNT BOOT:D:
</PRE>
</CODE></BLOCKQUOTE>

Pas nu Boot.ini van je Windows NT root directory aan. Je moet 3 regels
aanpassen, een in het [boot loader] gedeelte en twee in het [operating systems]
gedeelte.
<P>Dit is de originele Boot.ini:
<BLOCKQUOTE><CODE>
<PRE>
[boot loader]
timeout=30
default=multi(0)disk(0)rdisk(1)partition(1)\WINNT
[operating systems]
multi(0)disk(0)rdisk(1)partition(1)\WINNT="Windows NT Workstation Version 4.00" 
multi(0)disk(0)rdisk(1)partition(1)\WINNT="Windows NT Workstation Version 4.00 [VGA mode]" /basevideo /sos
C:\ = "Microsoft Windows"
</PRE>
</CODE></BLOCKQUOTE>
<P>Dit is de nieuwe Boot.ini:
<BLOCKQUOTE><CODE>
<PRE>
[boot loader]
timeout=30
default=multi(0)disk(0)rdisk(0)partition(1)\WINNT
[operating systems]
multi(0)disk(0)rdisk(0)partition(1)\WINNT="Windows NT Workstation Version 4.00" 
multi(0)disk(0)rdisk(0)partition(1)\WINNT="Windows NT Workstation Version 4.00 [VGA mode]" /basevideo /sos
</PRE>
</CODE></BLOCKQUOTE>

Merk op dat alle voorkomens van rdisk(1) veranderd zijn in rdisk(0) en dat de
regel die naar Windows 95 verwees verwijderd is.
<P>Nadat je Boot.ini hebt bewaard zou je, als je alles goed hebt gedaan, Windows NT
moeten kunnen opstarten vanuit LILO.
<H2><A NAME="s5">5. Het Windows 95 gedeelte</A></H2>

<P>Maak een DOS opstart floppy vanuit de Windows 95 DOS prompt (druk op Shift+F5
tijdens het opstarten van Windows 95). Het is belangrijk dat deze floppy op de
DOS prompt wordt aangemaakt en niet vanuit een DOS window binnen Windows 95!
Start niet op met Windows 95 totdat deze stap afgerond is! Kopieer het bestand
C:\WINDOWS95\COMMAND\SYS.COM naar de floppy (vervang je Windows 95 pad als dat
anders is). Start nu op met de floppy en geef het commando:
<BLOCKQUOTE><CODE>
<PRE>
SYS C:
</PRE>
</CODE></BLOCKQUOTE>

Dit zou de Windows NT OS loader hebben moeten verwijderen en je zou nu in staat
moeten zijn om vanuit LILO direct Windows 95 op te starten.
<P>Nu kun je de NT loader files verwijderen:
<BLOCKQUOTE><CODE>
<PRE>
Boot.ini
Bootsect.dos
Ntdetect.com
Ntldr
</PRE>
</CODE></BLOCKQUOTE>
<H2><A NAME="s6">6. Referenties</A></H2>

<P>De volgende mensen worden bedankt (in willekeurige volgorde):
<P>James C. Bevier &amp; D. Michael McFarland.  In een mail conversatie op de
redhat-lijst hebben ze me informatie gegeven over hoe NT op te starten was
vanuit Linux.
<P>Gilles Vollant.  BootPart is een erg handige utility en Gilles stelt het gratis
beschikbaar met mooie documentatie. Bedankt Gilles.
<P>Mike Harlan. Na het lezen van zijn 'Linux-DOS-Win95-OS2' mini-HOWTO kon ik
aannames doen over het gedrag van LILO.
</BODY>
</HTML>
