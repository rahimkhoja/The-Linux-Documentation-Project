<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>Off line Proxy Sever</TITLE>


</HEAD>
<BODY>
<H1>Off line Proxy Sever</H1>

<H2>
<A HREF="http://people.zeelandnet.nl/reggye">Reggy Ekkebus</A>, 
<A HREF="mailto:reggy@zeelandnet.nl">reggy@zeelandnet.nl</A> <BR></H2>v0.2, 21 januari 2000
<P><HR>
<EM> Dit document beschrijft hoe je een Offline-Proxy-Sever installeert
en een basis setup. </EM>
<HR>
<H2><A NAME="s1">1. Introductie</A></H2>

<P>Het belangrijkste doel van dit document is dat de mensen WWWoffle 
leren kennen en gebruiken.
<H2>1.1  Nieuwe versies van dit document</H2>

<P>Nieuwe versies van dit document zullen te vinden zijn tussen de
nederlandse howto's op 
<A HREF="http://www.nl.linux.org/doc/HOWTO/">http://www.nl.linux.org/doc/HOWTO/</A>.
<H2>1.2 Feedback</H2>

<P>Ik verwelkom beslist elke feedback over deze WWWoffle basics mini-Howto.
Het zou leuk zijn als je een mailtje stuurde als je kritiek hebt,
suggesties, verbeteringen, etc.
Ik hoop dat ik mensen kan helpen met deze WWWoffle installatie mini-Howto 
en als ik dat deed stuur me dan een mailtje 
<A HREF="mailto:reggy@zeelandnet.nl">reggy@zeelandnet.nl</A><H2>1.3  Standaard Disclaimer</H2>

<P>Er kan geen aansprakelijkheid voor de inhoud van dit document worden
geaccepteerd. Alles mag gebruikt worden, maar op eigen risico.
Ik neem hiervoor geen verantwoordelijkheid.
<H2>1.4  Copyright Informatie</H2>

<P>Dit document valt onder het copyright (c)1999 Reggy Ekkebus en
wordt onder de volgende voorwaarden gedistribueerd:
<P>Dit document mag geheel of gedeeltelijk worden gedistributeerd
en gereproduceerd, via elektronisch of fysiek medium, zolang de copyright
vermelding op alle kopie&euml;n behouden blijft. Voor vragen mail:
<CODE>
<A HREF="mailto:reggy@zeelandnet.nl">reggy@zeelandnet.nl</A></CODE>
<H2><A NAME="s2">2.  Wat is een Proxy-Server?</A></H2>

<P>Een proxyserver is een programma dat geraadpleegde internetbestanden lokaal opslaat. Als voor 
een tweede maal dezelfde bestanden of html-pagina's opgevraagd worden, zorgt de 
proxy-programmatuur ervoor dat deze van je eigen, lokale server komen, i.p.v. het trage
internet. Met een proxy-server duurt het opvragen van een gecachete pagina 
slechts een seconde, ipv enkele tientallen.
<P>Het meest gebruikte proxy-programma is SQUID, echter hievoor moet je een
vaste internet  verbinding hebben en die heeft niet iedereen.
Met WWWoffle is dit niet nodig, je kunt hem zowel off- als on-line gebruiken
door  simpel een paar regels in je ip-up en ip-down te zetten.
<P>Wwwoffle is een goede off-line proxy-server, die als je off-line bent en een
pagina opzoekt die niet in z'n cache staat, vraagt of hij hem moet downloaden
zodra je de volgende keer on-line gaat. Je kunt ook pagina's laten monitoren
als je wilt dat ze up-to-date blijven. Dit alles is gemakkelijk in te stellen
met een zelf meegeleverde html interface.
<H2><A NAME="s3">3.  De installatie</A></H2>

<H2>3.1 Downloaden en uitpakken</H2>

<P>Installeer de RPM van wwwoffle of compileer deze. De thuisbasis is 
<A HREF="http://www.gedanken.demon.co.uk/wwwoffle/">www.gedanken.co.uk</A>.<BR> 
Een RPM is o.a. te halen bij 
<A HREF="http://www.freshmeat.net/">freshmeat</A>.
<P>Als je de RPM heb opgehaald kun je deze installeren met:
<P><CODE>rpm -i wwwoffle.xxx.rpm</CODE>
<P>Als je de sourcecode hebt gedownload, moet je eerst root worden.
Eerst moet de .tar.gz file uitgepakt worden.
<P>
<BLOCKQUOTE><CODE>
<PRE>

#tar xfvz wwwoffle.xxx.tar.gz
of     
#gunzip wwwoffle.xxx.tar.gz &amp;&amp; tar xfv wwwoffle.xxx.tar
</PRE>
</CODE></BLOCKQUOTE>
<H2>3.2 Het compileren en installeren</H2>

<P>
<BLOCKQUOTE><CODE>
<PRE>
Ga naar de directory waar wwwoffle is uitgepakt.
   
#cd wwwoffle-xxx


dan:


#./configure
   
Als dit gedaan is gaan we het zaakje compileren:

# make

dan het laatste commando en wwwoffle is geinstalleerd:
    
# make install
</PRE>
</CODE></BLOCKQUOTE>
<H2><A NAME="s4">4. WWWoffle configureren</A></H2>

<P>Onderstaand is een voorbeeld configuratie, waarbij alleen de veranderingen van de 
originele wwwoffle.conf vermeld zijn:
<P>
<P>Het aanpassen van <CODE>/etc/wwwoffle.conf</CODE>:
<P>
<BLOCKQUOTE><CODE>
<PRE>

[LocalNet Section]

#### Example ####
# Hier je eigen lokaal domain invullen

mijn.linuxdoos.nl


[AllowedConnectHosts Section]

#### Example ####
# Enkel vertrouwde hosts die de proxyserver mogen gebruiken.

192.168.X.X
192.168.X.X


[DontCache Section]

#### Example ####
# Geen gzipped of tar files Cachen.
 
*://*/*.gz
*://*/*.tar
 
# Je eigen site hoeft natuurlijk niet gecached te worden
 
*://*.mijn.linuxdoos.nl/ 


[Proxy Section]

#### Example ####
# Hier kun je je eigen ISP ook nog als je online bent als proxy-server gebruiken.
# in mijn geval is dit zeelandnet.nl
 
http://*    =  cache.zeelandnet.nl:800


[Purge Section]

#### Example ####
# ftp files houd ik 7 dagen en http files 14 dagen

ftp://* = 7
http://* = 14

#
# De maximum grootte van de cache file
#
 
max-size = 10

</PRE>
</CODE></BLOCKQUOTE>
<H2><A NAME="s5">5. WWWoffle Starten</A></H2>

<P>Als je WWWoffle een Rpm is, kun je 'm simpelweg als root starten met:
<P>
<BLOCKQUOTE><CODE>
<PRE>

# /etc/rc.d/init.d/wwwoffled start
</PRE>
</CODE></BLOCKQUOTE>
<P>Als je WWWoffle een tar.gz is, kun je 'm simpelweg als root starten met:
<P>
<BLOCKQUOTE><CODE>
<PRE>

# /usr/local/sbin/wwwoffled
</PRE>
</CODE></BLOCKQUOTE>
<P>Doe nu <CODE>'/usr/local/bin/wwwoffle -config'</CODE> om het nieuwe config file
opnieuw te laten inlezen.
<H2><A NAME="s6">6. WWWoffle klaar voor gebruik maken</A></H2>

<P>Ook moeten er nog twee regels aan ip-up en ip-down worden toegevoegd om het
e.e.a. te automatiseren. Dit kan door een paar regels aan je ip-up/down toe
te voegen:
<P>
<BLOCKQUOTE><CODE>
<PRE>

ip-up:
#Vertel de proxyserver: we are online!

/usr/local/bin/wwwoffle -online

ip-down:
#vertel de proxyserver: we are offline!

/usr/local/bin/wwwoffle -offline
</PRE>
</CODE></BLOCKQUOTE>
<P>
<P>Tip van Paul Slootman over het ip-down gedeelte:
<P>Bij diald of ISDN is 'wwwoffle -autodial' misschien beter op z'n
plaats. wwwoffle gaat dan gewoon een verbinding opzetten om iets op
te halen i.p.v. "recorded for download" te geven. 
<P>Ook moet er nog een regel in de crontab toevoegd worden om de cache-file op
gewenste grootte te houden. Elke nacht om half vijf wordt de cachefile
gepurged.
<P>
<BLOCKQUOTE><CODE>
<PRE>

$crontab -e
&lt;b>
30 4 * * * /usr/local/bin/wwwoffle -purge  
</PRE>
</CODE></BLOCKQUOTE>
<H2><A NAME="s7">7. WWWoffle testen</A></H2>

<P>Het testen van een offline-proxy-server kun je met de volgende url doen:
<A HREF="http://localhost:8080">http://localhost:8080</A>. En als het goed is meldt hij zich
zelf:-). Vanaf hier kun je wwwoffle ook helemaal in html naar eigen wensen
configureren.
<H2><A NAME="s8">8. Je Browser instellen</A></H2>

<P>WWWoffle is nu klaar voor gebruik. Kies de volgende instellingen in Netscape om je 
proxy-server te gebruiken:
<P>menu edit-> preferences-> proxies-> manual proxy configuration
<P>Met de instellingen:
<P>HTTP-proxy: IP van je eigen server (in mijn geval 192.168.1.100 = gateway) en 
als port de in wwwoffle.conf opgegeven port 8080.
Bij 'no proxys for' je eigen.localdomain.nl invullen.
Stel Netscape even tijdelijk voor een test in zonder memory- en disk-caching, in de preferences. 
<H2><A NAME="s9">9. Aanvullende Tips</A></H2>

<P>Als je nog een tip hebt, twijfel dan niet om hem op te sturen, zodat
de howto verder aangevuld kan worden.
</BODY>
</HTML>
