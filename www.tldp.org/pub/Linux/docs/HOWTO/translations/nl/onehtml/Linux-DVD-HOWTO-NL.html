<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>DVD Playing HOWTO</TITLE>


</HEAD>
<BODY>
<H1>DVD Playing HOWTO</H1>

<H2>Nathan Rowlan, nkr@helo.org, <BR>
Vertaald door: Ellen Bokhorst</H2>v0.1.8 5 juni 2000
<P><HR>
<EM>Een (hopelijk) eenvoudig te volgen uitleg over DVD movie playback onder
Linux.</EM>
<HR>
<H2><A NAME="Introduction"></A> <A NAME="s1">1. Introductie</A></H2>

<H2>1.1 Goal</H2>

<P>Het doel hiervan is te voorzien in stap-voor-stap instructies om DVD films
onder Linux af te spelen. Ik zal proberen zo duidelijk mogelijk te zijn, maar
als iets verwarrend of onjuist is, laat me dit dan alsjeblieft weten want
dan zal ik het corrigeren. Als je vragen hebt, kun je je inschrijven op de
livid-dev mailinglist door het verzenden van een lege email naar
livid-dev-subscribe@linuxvideo.org.
<H2>1.2 Nieuwe versies</H2>

<P>Deze howto is in veel formaten beschikbaar, waaronder html en tex.
De nieuwste versie kan altijd worden opgehaald vanaf mijn site op
<A HREF="http://helo.org/dvd/howto/">http://helo.org/dvd/howto/</A>. 
Het is van harte aan te bevelen dat je de meest recente versie ophaalt,
aangezien deze howto tamelijk vaak wordt bijgewerkt.
<H2>1.3 Copyrights en Handelsmerken</H2>

<P>Deze handleiding mag geheel of gedeeltelijk worden gereproduceerd,
zonder dat er voor moet worden betaald, onderworpen aan de volgende
beperkingen:
<P>
<UL>
<LI>De copyrightmelding hierboven en deze permissievermelding moet
volledig op alle gehele of gedeeltelijke kopi&euml;en behouden blijven.</LI>
<LI>Een eventuele vertaling of afgeleide werk moet door de auteur zijn
goedgekeurd voor distributie.</LI>
<LI>Als je dit werkstuk gedeeltelijk distribueert, moeten instructies
voor het verkrijgen van de gehele versie van deze handleiding worden
opgenomen, en een middel voor het verkrijgen van een volledige versie.</LI>
<LI>Kleine delen mogen worden gereproduceerd als
illustraties voor voorbeschouwingen of citaten in andere werken zonder deze
permissievermelding als de juiste eervolle vermelding wordt gegeven.</LI>
</UL>
<P>Uitzonderingen op deze regels kunnen voor academische doeleinden worden
toegestaan: Schrijf de auteur en vraag erom. Deze beperkingen zijn hier
om ons als auteurs te beschermen, niet om jullie als leerlingen en
leraren te beperken. Enige broncode (de SGML terzijde waarin dit document
werd geschreven) in dit document is geplaatst onder het GNU General Public
License, beschikbaar via anonymous FTP vanaf 
<A HREF="ftp://ftp.gnu.org/GNU/COPYING">het GNU archief</A>.
<H2>1.4 Met dank aan</H2>

<P>Met dank aan de auteurs van oms en de rest van de LiViD ontwikkelaars, die
het project veel van hun tijd en werk hebben geschonken, en ook de 
individuen die me feedback gaven ter verbetering van deze HOWTO.
<P>Veel van de layout van deze HOWTO werd verkregen van de HOWTO-HOWTO, 
geschreven door Mark F. Komarinski. Het is te vinden op
<A HREF="http://www.linuxdoc.org/">http://www.linuxdoc.org/</A>.
<H2>1.5 Vertalingen</H2>

<P>Alle vertalingen die ik van dit document ontvang gaan naar 
<A HREF="http://helo.org/dvd/howto/trans/">http://helo.org/dvd/howto/trans/</A>. Als je deze howto graag zou willen vertalen, email me dan alsjeblieft
via nkr@helo.org.
<H2><A NAME="Requirements"></A> <A NAME="s2">2. Benodigdheden</A></H2>

<P>  
In deze HOWTO wordt ervan uitgegaan dat je in het bezit bent van:
<UL>
<LI> Linux > v2.2.0 </LI>
<LI> XFree86 3.3.X </LI>
<LI> Een DVD-ROM/RAM/RW drive ondersteund onder Linux (de meeste worden
ondersteund)</LI>
<LI> Een behoorlijke kennis van bash en de Engelse taal</LI>
<LI> Een master's degree in Nuclear Engineering</LI>
</UL>
<H2><A NAME="Files"></A> <A NAME="s3">3. Bestanden</A></H2>

<P>Je moet ervoor zorgen dat je een kernel hebt met MTRR (hierover later meer)
en ondersteuning voor DVD ioctl. Ondanks dat MTRR's sinds versie 2.2.11 
zijn opgenomen (corrigeer me als dit niet klopt), zal je waarschijnlijk je
kernel bij moeten werken om DVD ioctls te verkrijgen.
Er zijn twee manieren om dit varkentje te wassen, je kunt
&oacute;f een ontwikkelaarskernel downloaden (v2.3.x), &oacute;f een patch
toepassen op een stabiele kernel (v2.2.x), de patches zijn te vinden op
<A HREF="http://www.kernel.dk/">http://www.kernel.dk/</A>, 
en de kernel is te vinden op je favoriete mirror of
<A HREF="ftp://ftp.kernel.org">ftp://ftp.kernel.org/</A>.
<P>Vervolgens heb je de LiViD utility's nodig. Hier zijn twee manieren voor:
<P>
<UL>
<LI> Haal de LiViD utility's op via CVS, zodat je het kan
bijwerken zoals bijgewerkt door de ontwikkelaars (aan te bevelen).</LI>
</UL>
<P>
<PRE>
 
       Met de volgende opdrachten worden ze opgehaald:
   
       # mkdir ~/livid
       # cd ~/livid
       # export CVSROOT=:pserver:anonymous@cvs.linuxvideo.org:/cvs/livid
       # cvs login
       (Inloggen als anonymous@cvs.linuxvideo.org)
       CVS password:
        
       Er is geen wachtwoord voor anonymous, druk gewoon op enter.
         
       # cvs -z3 co -P ac3dec oms mpeg2dec mgadvd

       De bestanden zouden moeten worden gedownload in de juiste directory's.
</PRE>
<P> 
<UL>
<LI>     
Als je CVS niet prettig vindt (freak!), kun je de meest recente tarball
van LiViD 's nachts downloaden. Hierin zit meer dan je nodig hebt, maar
als je om een of andere reden echt geen gebruik wilt maken van CVS,
maak het jezelf dan gemakkelijk.</LI>
</UL>

<PRE>
       Het is te vinden op:

       http://linuxvideo.org/developer/data/livid.tar.gz
</PRE>
<H2><A NAME="Installation"></A> <A NAME="s4">4. Installatie</A></H2>

<H2>4.1 Kernel</H2>

<P>Als je een ontwikkelaarskernel hebt (2.3.x), zou je de ondersteuning voor
DVD ioctl reeds moeten hebben, dus hoef je je er slechts van te verzekeren
dat je de MTRR ondersteuning in de kernelconfiguratie hebt geactiveerd,
en kan het dan net als anders compileren en installeren.
<P> 
Als je de patch toe wilt passen op een bestaande kernel, ga dan eerst naar
<PRE>
 
        http://www.kernel.dk/
</PRE>

en download de juiste patch voor je kernel.
<P>
<P>Als je niet weet hoe je kernel te patchen of installeren, zou je de
Kernel HOWTO op:
<PRE>
        
        http://howto.tucows.com/LDP/HOWTO/Kernel-HOWTO.html
</PRE>
        
moeten lezen.
<H2>4.2 LiViD Utility's</H2>

<P>Voor het installeren van de LiViD utility's, moet je controleren of je
/usr/local/lib ergens in /etc/ld.so.conf hebt.
<P>De volgende opdrachten zouden de LiViD utility's op je systeem moeten
compileren en installeren. Lees alsjeblieft de sectie "Problemen" door als
je hierbij problemen ondervindt.
<P>
<PRE>
 
      ac3dec:
    
        # cd ~/livid/ac3dec
        # ./autogen.sh
        # make
        # make install          
   
      mpeg2dec:
    
        # cd ~/livid/mpeg2dec
        # ./autogen.sh
        # make
        # make install
        
      oms:
      
        # cd ~/livid/oms
        # ./autogen.sh
        # ./configure
        # make
        # make install
</PRE>
<P>Nu zouden de benodigde LiViD utility's moeten zijn ge&iuml;nstalleerd.
Voor oms zijn een aantal speciale fifo pipes nodig die moeten worden
aangemaakt via welke de DVD gegevens gaan. Deze kunnen met de volgende
opdrachten worden aangemaakt (als ze niet reeds voorkomen):
<P>
<PRE>
 
        # mkfifo /tmp/video
        # mkfifo /tmp/audio
</PRE>
<P>     
Nog een laatste stap. Oms heeft /dev/dvd nodig als symlink naar je DVD drive,
zoals /dev/hdb1 of /dev/scd0. Als het /dev/cdrom is, zou je de link
aanmaken door het typen van:
<P>
<PRE>
        # ln -s /dev/cdrom /dev/dvd
</PRE>
<P>Je kunt beter geen symblink naar een symlink aanmaken,
omdat het onnodige I/O toevoegt. Vervang /dev/cdrom door het juiste
device waar je dvd drive zich op bevindt.
<H2><A NAME="Playing"></A> <A NAME="s5">5. Afspelen</A></H2>

<P>
<P>Om een DVD af te spelen, moet je X in 16-bit kleurenmodus draaien. Typ met
de DVD in de drive:
<P>
<PRE>
 
        # ac3dec /tmp/audio&amp; mpeg2dec /tmp/video&amp; oms
</PRE>
<P>     
Als alles goed is gegaan, zal er wat tekst voorbijgaan, gevolgd door de vraag
of je de naam van de disk in de DVDDB op wilt zoeken. Het is veilig hier 'yes'
op te antwoorden. Vervolgens zal het oms panel tevoorschijn komen. Klik op
de knop play en dan zou het videovenster moeten verschijnen en beginnen af
te spelen.
<H2><A NAME="Additional Stuff"></A> <A NAME="s6">6. Extra's</A></H2>

<H2>6.1 MTRR's instellen</H2>

<P>
<PRE>
        
                ** Opmerking voor bezitters van een Matrox videokaart **
                
                Als je matroxfb in de kernel hebt gecompileerd, bestaat
                de kans dat je MTRR's reeds zijn ingesteld. Je kunt deze
                sectie waarschijnlijk gewoon overslaan.
</PRE>
<P>Het instellen van MTRR's kan de performance in een aantal gevallen
aanzienlijk verbeteren, dus het is een goed idee om het te doen.
Als eerste moet je je ervan verzekeren dat je MTRR ondersteuning
in je kernel hebt, door het typen van:
<P>
<PRE>
           
           # ls /proc/mtrr
</PRE>
<P>                
Als het je aangeeft dat er niet zoiets is als /proc/mtrr, moet je
je kernel hercompileren met MTRR ondersteuning (te vinden onder
"Processor type and features" in menuconfig).
<P>     
Zodra je weet dat MTRR werkt, moet je het basisgeheugenadres van je
videokaart weten, hoeveel video ram het heeft. De eenvoudigste manier
om dit te doen is naar de uitvoer van X te kijken wanneer het opstart.
Omdat de uitvoer gewoonlijk van het scherm scrollt en verloren gaat
zodra het naar een andere tty overschakelt, moet je de uitvoer van X
naar een bestand (xoutput) omleiden, zodat je het voor de benodigde
waarde hierin op kunt zoeken. Dit kan door het typen van:
<P>
<PRE>
    
           # startx 2> xoutput
</PRE>
<P>     
De regel met de benodigde informatie is waarschijnlijk ergens
in het midden van xoutput te vinden, en zou er ongeveer zo uit
moeten zien:
<P>
<PRE>
     
           (--) SVGA: PCI: NVidia Riva TNT2 rev 17, Memory @ 0xee000000, 0xe2000000
</PRE>
<P>           
Zodra je dat hebt gevonden, schrijf je het laatste geheugenadres op,
in dit geval is dat 0xe2000000.  
Afhankelijk van je hardware, kan het zijn dat er meerdere 
geheugenadressen worden getoond, dus maak je geen zorgen als je uitvoer
er iets anders uitziet. Je kunt xoutput nu verwijderen.
<P>     
Vervolgens moet je een nieuwe MTRR aanmaken. Om dat te kunnen doen,
moet je weten hoeveel ram in hex je videokaart heeft. Hier zijn een
aantal veel voorkomende waarden:
<P>
<PRE>
        
           4MB  -- 0x400000
           8MB  -- 0x800000
           16MB -- 0x1000000
           32MB -- 0x2000000
</PRE>
<P>        
Typ voor het toevoegen van de MTRR:
<P>
<PRE>
        
           # echo "base=0xe2000000 size=0x2000000 type=write-combining" >| /proc/mtrr
</PRE>
<P>        
Vervang "0xe2000000" en "0x2000000" door het basisadres en de hoeveelheid
videogeheugen welke specifiek is voor je systeem.
<P>     
Nu zou MTRR moeten zijn ingesteld. Je kunt dit controleren door het typen van:
<P>
<PRE>
        
           # cat /proc/mtrr
</PRE>
<P>        
De uitvoer die je krijgt zou er ongeveer zo uit moeten zien:
<P>
<PRE>
        
           reg00: base=0x00000000 (   0MB), size= 128MB: write-back, count=1
           reg01: base=0xe2000000 (3616MB), size=  32MB: write-combining, count=1
</PRE>
<P>     
Nogmaals, het aantal regels zal waarschijnlijk anders zijn dan die hier
getoond.
<H2><A NAME="Problems"></A> <A NAME="s7">7. Problemen</A></H2>

<H2><A NAME="Run time erors"></A> 7.1 Fouten tijdens de uitvoering</H2>

<P>Dit is een (beknopte) lijst met bekende fouten die gedurende de uitvoering
op kunnen treden.
<H3>Illegal Instruction Error</H3>

<P>Als je geen Intel chip (in het bijzonder een K6) gebruikt, en je krijgt deze
foutmelding wanneer je mpeg2video probeert te draaien, probeer dan de regels
129 en 130 van nist/configure.in te wijzigen:
<P>
<PRE>
        
               CFLAGS="$CFLAGS -DHAVE_MMX -DLINUX -march=i686 -fschedule-insns2 -malign-doub
               CXXFLAGS="$CXXFLAGS -DHAVE_MMX -DLINUX -march=i686 -fschedule-insns2 -malign- 
</PRE>
<P>     
vervang "-march=i686" in beide regels door "-march=i586", en voer vervolgens
een hercompilatie en herinstallatie uit.
<H2><A NAME="Compilation errors"></A> 7.2 Foutmeldingen tijdens de compilatie</H2>

<P>Dit is een lijst met veel voorkomende compilatiefouten waarvan correcties
bekend zijn.
<H3>`dvd_struct' undeclared...</H3>

<P>Het vaakst voorkomende probleem waar mensen mee worden geconfronteerd ontstaat
wanneer oms op de verkeerde plaats zoekt naar de kernelheaders,
wanneer wordt geprobeerd deze utility's te compileren.
Standaard wordt gebruik gemaakt van /usr/include/[linux|asm], maar die
headers zijn afkomstig van een stabiele kernel, zodat wanneer je een
gewoon programma compileert, het stabiele headers zal gebruiken.
oms heeft niet stabiele (of gepatchte) kernelheaders nodig,
dus wanneer oms probeert te compileren, zijn veel zaken niet gedeclareerd en
mislukt de compilatie.
De beste manier om dit te corrigeren is door het wijzigen van oms Makefile
en -I/usr/src/linux/include van de CFLAGS en CXXFLAGS. 
(met dank aan Adam Powell voor deze info)
<P>
<PRE>
        Met deze opdrachten zou het moeten lukken:
        
        # mkdir /usr/include/old
        # mv /usr/include/linux /usr/include/old/linux
        # mv /usr/include/asm /usr/include/old/asm
        # mv /usr/include/scsi /usr/include/old/scsi
        # ln -s /usr/src/linux/include/linux /usr/include/linux
        # ln -s /usr/src/linux/include/scsi /usr/include/scsi
        # ln -s /usr/src/linux/include/asm /usr/include/asm
</PRE>
<H3>can't determine absolute dir of '../../../../src/plugin/codec/mpeg2dec/.libs'</H3>

<P>Een ander veel voorkomende fout is met de directory
oms/src/plugin/codec/mpeg2dec/.libs.
Om een of andere reden bestaat deze directory niet en het is nodig
voor de compilatie. Maak gewoon de directory aan om dit te corrigeren:
<P>
<PRE>
        # mkdir src/plugin/codec/mpeg2dec/.libs
</PRE>
<H2><A NAME="Broken stuff"></A> 7.3 Niet werkende zaken</H2>

<P>Mogelijkheden die thans niet werken zoals ze zouden moeten werken:
<UL>
<LI> Geen van de chapter seek knoppen werkt erg goed (crash).</LI>
<LI> Zodra be&euml;indigd, heeft het problemen met het nogmaals opstarten (crash).</LI>
<LI> Audio/video slaan ongeveer iedere seconde een keer over.</LI>
<LI> Extreme vertragingen aan het begin van chapters met mpeg2dec.</LI>
<LI> Soms sluit ac3dec niet goed, en moet worden gekild met "killall ac3dec".</LI>
</UL>
<H2><A NAME="Other errors"></A> 7.4 Andere fouten</H2>

<P>Als je probleem hier niet wordt weergegeven, dan bevat de 
huidige CVS code waarschijnlijk een bug. Het beste wat je
kunt doen is een paar dagen te wachten, en het dan vanuit
CVS opnieuw te updaten. Er is een mailinglist waar je je
vragen kunt stellen, stuur voor het aanmelden een lege
email naar livid-dev-subscribe@linuxvideo.org.
<H2><A NAME="To Do"></A> <A NAME="s8">8. Nog te doen</A></H2>

<P>
<UL>
<LI> Zorg dat iemand met een Matrox kaart me een lijst stuurt met
hetgeen ze deden om de performance te verbeteren.
(dent!!!)</LI>
<LI> Makefile opties (HAVE_MMX, HAVE_3Dnow, enz)</LI>
<LI> -march=k6 voor mpeg2dec</LI>
<LI> voeg eenvoudig MTRR stuff (framebuffer) toe</LI>
<LI> toevoeging nodig voor region coding om op de meeste drives te worden
ingesteld: www.linuxtv.org/dvd</LI>
</UL>
</BODY>
</HTML>
