<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>Oracle 8i/Linux Install</TITLE>


</HEAD>
<BODY>
<H1>Oracle 8i/Linux Install</H1>

<H2>Ger Strikwerda, 
<A HREF="mailto:g.strikwerda@ufb.rug.nl">g.strikwerda@ufb.rug.nl</A></H2>v0.1 maart 2000
<P><HR>
<EM>In dit document zal worden beschreven hoe Oracle 8.1.5 op een Intel Linux platform kan worden ge&iuml;nstalleerd.</EM>
<HR>
<H2><A NAME="s1">1. Introductie</A></H2>

<P>Het doel van deze documentatie is op een heldere en simpele
manier een Oracle database onder Linux aan de praat te krijgen.
Veel van wat in dit document staat komt rechtstreeks uit een .pdf
bestand van Oracle, waarin wordt beschreven hoe het &eacute;&eacute;n en ander 
ge&iuml;nstalleerd dient te worden. Toch leek het me een goed idee om
hier een verbeterde en Nederlandse versie van te maken. Aan 
het einde van dit document zal ik nog wat tips geven over het 
backuppen/starten van een database.
<H2>1.1 Nieuwe versies van dit documentatie</H2>

<P>Nieuwe versies van dit document zullen te vinden zijn bij 
<A HREF="http://nl.linux.org/doc/HOWTO/">de Nederlandse HOWTO's</A>.
<H2>1.2 Feedback</H2>

<P>Elke vorm van feedback is uiteraad welkom op het e-mailadres
van de auteur. Ook is het leuk te weten of het &eacute;&eacute;n en ander
is gelukt. 
<H2>1.3 Standaard Disclaimer</H2>

<P>Er kan geen aansprakelijkheid voor de inhoud van dit document
worden geaccepteerd. Alles wat hierin staat mag op eigen risico worden
gebruikt. Ik zal ook niet garanderen dat alles wat hierin beschreven staat
bij iedereen zal werken.
<H2>1.4 Copyright informatie</H2>

<P>Dit document valt onder het copyright (c) 2000 Ger Strikwerda en 
wordt onder de volgende voorwaarden gedistribueerd:
<P>Dit document mag geheel of gedeeltelijk worden gedistributeerd en 
gereproduceerd, via elektronisch of fysiek medium. Zolang de copy-
right vermelding op alle kopie&euml;n maar behouden blijft.
<H2><A NAME="s2">2. Wat is een Oracle database?</A></H2>

<P>Een database is een bestand waarbij het mogelijk is data op zo'n wijze
in op te slaan, dat het makkelijk is deze data tot duidelijke
informatie te groeperen. Zo'n relationele database wordt beheerd met
een RDBMS. Deze afkorting staat voor Relational DataBase Management System.
Een voorbeeld van een RDBMS is Oracle. Oracle behoort tot &eacute;&eacute;n
van de krachtigste en stabielste databases ter wereld. Tevens is het van
Oracle bekend dat ze erg positief staan t.o.v. Linux. Midden vorig jaar kwam
er dan ook eindelijk een Oracle versie specifiek voor Intel/Linux op de markt.
Voor zover ik weet, is het gebruik met niet-commerci&euml;el gebruik van dit
produkt gratis. Wanneer dit product voor commerci&euml;le doelen wordt
gebruikt moet er betaald worden. Het laatste nieuws is dat RedHat in 
samenwerking met Oracle een speciale e-commerce versie van hun distributie
gaat maken. 
<H2><A NAME="s3">3. Door wie wordt Oracle gebruikt</A></H2>

<P>Elk zichzelf respecterend groot bedrijf bewaart zijn gegevens in een 
Oracle database. De systemen waarop deze databases draaien zijn bijvoor-
beeld HP900 of AIX systemen. Het is natuurlijk best wel interessant om eens
een Oracle database draaiend te zien op een Celeron 300, waarop natuur-
lijk Linux draait!!
<H2><A NAME="s4">4. Oracle 8i </A></H2>

<P>Deze versie is &eacute;&eacute;n van de nieuwste en bezit ondermeer:
<P>JDBC drivers waardoor het redelijk simpel is om een webpagina
frontend, gekoppeld aan een Oracle database, te bouwen. Een beschrijving
hiervoor stond kort geleden nog in de 
<A HREF="http://www.ct.nl">c't van januari/februari 2000</A> (nummer 1/2).
<P>Het mag duidelijk zijn dat Oracle met deze nieuwe versie mikt op de
hype dat elke website gekoppeld kan worden aan een database. Hiervoor 
heeft Oracle SQL-J ontwikkeld. Met deze java routines moet het simpeler
worden om gegevens te exporten naar het internet. Een vertaalslag, zoals
dat bijvoorbeeld met JDBC moet, is daarmee overbodig geworden.
<P>Een dbassist wizard (!) waardoor het simpel is om een nieuwe
database aan te passen of een bestaande database aan te passen.
<P>Een hele lading drivers om databases te kunnen koppelen aan andere
applicaties. Bijvoorbeeld odbc drivers.
<H2><A NAME="s5">5. Installatie </A></H2>

<P>Helaas is het installeren van Oracle 8 niet erg goed gedocumenteerd. Sinds
kort is dat veranderd en is er een beperkt installatie document beschik-
baar waarin het &eacute;&eacute;n en ander wordt behandeld. Dit document is
als .pdf bestand beschikbaar op 
<A HREF="http://technet.oracle.com">de technet website van Oracle</A>. 
Om dit document te downloaden is het wel weer noodzakelijk om lid te worden
van Technet Oracle. Dit is verder kosteloos. Veel van 'mijn' documentatie is ookgebaseerd op dit .pdf document. Toch zaten er nog een paar valkuilen tussen die
ik er zal proberen uit te halen. 
<P>Bij het programma zelf zit uiteraad ook documentatie. Een administratie
handleiding van 282! pagina's en een installatie handleiding van 72 pagina's.
<H2><A NAME="s6">6. Systeemvereisten</A></H2>

<P>Oracle staat bekend als log en geheugenintensief RDMS. En daarom zijn de
systeemvereisten onder Linux ook niet niks. Oracle zelf adviseert minimaal
256 Mb geheugen te gebruiken en het dubbele aantal Mb's aan swap. Ik kan 
uit ervaring echter vermelden dat het makkelijk en redelijk vlot draait onder
128 Mb RAM. Deze configuratie draait 1 Oracle database met maximaal 2 gebruikers
tegelijk online. 
<P>Een nadeel van Oracle onder Linux is dat Linux niet bestanden aankan die 
groter zijn dan 2Gb. Hoogstwaarschijnlijk zal dit wel een tijdelijks iets zijn
wat in volgende kernelupdates wordt veranderd.
<P>Wanneer alle produkten die ge&iuml;nstalleerd kunnen ook daadwerkelijk worden
ge&iuml;nstalleerd, kost dit zo'n 800 Mb harde schijfruimte. Let op! Hier komt
de ruimte die de databases nodig hebben nog bij! Wanneer er een testdatabase
wordt aangemaakt met bijvoorbeeld 3 tabellen (naam, adres, woonplaats) levert
dit al 10 Mb data op. 
<P>Verder is het noodzakelijk om softwarematig aan een paar vereisten te voldoen:
<P>
<UL>
<LI>Linux kernel versie 2.2.10 of hoger</LI>
<LI>glibc 2.1 of hoger</LI>
<LI>Er moet een JRE (Java Runtime Enviroment) ge&iuml;nstalleerd zijn. Let op!
De installatie werkt niet wanneer er een JDK draait. De installatie wordt
uitgevoerd d.m.v. een wizard (De eerste die ik zag onder Linux!!) </LI>
<LI>Een werkende X-server. Uiteraad kan de installatie op de server ook
plaatsvinden via een workstation met X.</LI>
<LI>De configuratie waar ik het heb getest, draaide onder RedHat 6.1, maar ik
mag aannemen dat het moet werken onder elke 'nieuwe' distributie. Zolang er
maar voldaan wordt aan de vereiste glibc versie.</LI>
</UL>
<H2><A NAME="s7">7. Oracle 8.1.5 downloaden</A></H2>

<P>Als eerste kan er begonnen worden om Oracle 8.1.5 te downloaden. Dit kan
gedaan worden via 
<A HREF="http://technet.oracle.com">de Oracle technet site</A>. 
Kijk op deze site naar Favourite Top Ten Download. Het kan niet missen dat
Oracle 8.1.5 er niet tussen staat. Het .tgz-bestand opzich is goed voor
262 Mb. De patches die ook noodzakelijk zijn, zijn goed voor 8 Mb. Wanneer
dit te veel is, ben ik opzich bereid om deze bestanden voor kostprijs op
een cd'tje te kopi&euml;ren.
<H2><A NAME="s8">8. Eventueel andere software downloaden</A></H2>

<P>Een JRE kan gedownload worden vanaf 
<A HREF="http://www.blackdown.org">http://www.blackdown.org</A>.
Dit is zo'n beetje DE site voor Java onder Linux benodigdheden.
Gelukkig staat er op deze site ook een link naar een Nederlandse mirror.
<P>Naam bestand: 1.1.6-v5-glibc.x86.tar.gz (6 Mb)
<P>Om Oracle Intelligent Manager te kunnen gebruiken (nodig voor Oracle
Enterprise Manager) is het noodzakelijk om TCL 7.5 te downloaden
<P>Downloaden vanaf 
<A HREF="http://www.scriptics.com">http://www.scriptics.com</A><P>Naam bestand: /pub/tcl/tcl_5/tcl7.5.tar.Z (3.71 Mb)
<P>Als laatste dient er de recenste patchset van Oracle opgehaald te worden.
Deze kan worden gedownload vanaf: 
<A HREF="http://technet.oracle.com/support/tech/linux/support_index.html">http://technet.oracle.com/support/tech/linux/support_index.html</A><H2><A NAME="s9">9. Het installeren van de software</A></H2>

<P>Het installeren van de JRE is een eitje. Gewoon de tar.gz uitpakken in een directory en ervoor zorgen dat deze directory in de PATH variabelen wordt opgenomen.
Zodat het mogelijk is om in elke directory jre op te kunnen starten.
<H2><A NAME="s10">10. Het opzetten van de Oracle directory structuur</A></H2>

<P>Het is het beste om de directory structuur van Oracle zelf aan te houden.
Oracle noemt dit een Optimal Flexible Architecture (OFA).
In mijn geval heb ik Oracle geinstalleerd op mijn /usr2 partitie:
<P>
<BLOCKQUOTE><CODE>
<PRE>
#mkdir /usr2/local/oracle
#cd /usr2/local/oracle
#mkdir u01
#mkdir u02
#mkdir u03
#mkdir u04
</PRE>
</CODE></BLOCKQUOTE>
<P>De u.. directory's zullen de directory's worden waar in de databases
geplaatst kunnen worden. Om deze databases te kunnen beheren moet er een
speciale Oracle group en user aangemaakt worden die rechten krijgen in deze
u.. directory's.
<P>
<BLOCKQUOTE><CODE>
<PRE>
#groupadd oinstall
#useradd oracle8i -g oinstall
#passwd oracle8i
#chown oracle8i.oinstall *
</PRE>
</CODE></BLOCKQUOTE>
 
<P>Nu dient er als de oracle8i gebruiker ingelogt te worden. Nu kan X worden 
opgestart. Anders is het niet mogelijk om de grafische wizard te starten om 
Oracle te kunnen installeren.
<P>De omgevingsvariabelen van de oracle gebruiker staan nog niet goed.
Dit moet er
allemaal aangepast worden in de .bash_profile van de oracle8i gebruiker:
<P>
<BLOCKQUOTE><CODE>
<PRE>
ORACLE_HOME=/usr2/local/oracle/8i/u01/app/oracle/product/8.1.5
ORACLE_BASE=/usr2/local/oracle/8i/u01/app/oracle
export ORACLE_HOME ORACLE_BASE
NLS_LANG='english_united kingdom.we8iso8859p1'
ORA_NLS33=$ORACLE_HOME/ocommon/nls/admin/data
ORACLE_TERM=vt100
LD_LIBRARY_PATH=$ORACLE_HOME/lib
PATH=$PATH:$ORACLE_HOME/bin
export NLS_LANG ORA_NLS33 PATH LD_LIBRARY_PATH
export JAVA_HOME=/usr/local/jre
export PATH=$JAVA_HOME/bin:$PATH
</PRE>
</CODE></BLOCKQUOTE>
<P>Hierbij ben ik ervan uitgegaan dat Oracle wordt ge&iuml;nstalleerd in de 
/usr2/local/oracle/8i/u01/app/oracle/product/8.1.5 directory en dat
de JRE in de /usr/local/jre directory staat.
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ ./.bash_profile
</PRE>
</CODE></BLOCKQUOTE>
<P>Dit maakt de gemaakte variabelen actief. Dit kun je eventueel checken met:
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ env
</PRE>
</CODE></BLOCKQUOTE>
<H2><A NAME="s11">11. Het installeren van de Oracle software</A></H2>

<P>Voordat dit gebeurt moeten de permissies goed staan van de bestanden en 
directory's die straks worden aangemaakt. 
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ umask 022
</PRE>
</CODE></BLOCKQUOTE>
<P>Dit zal ervoor zorgen dat elk bestand/directory wordt aangemaakt met
permissie 0644 of te wel:
<P>
<BLOCKQUOTE><CODE>
<PRE>
rw-r--r--
</PRE>
</CODE></BLOCKQUOTE>
<P>Het .tgz-bestand kun je het  beste uitpakken in /tmp:  
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ cd /tmp
$ gzip -dc oracle.tgz | tar xfB -
</PRE>
</CODE></BLOCKQUOTE>
<P>Daarna kan de installer gestart worden. Om &eacute;&eacute;n of andere 
werkwaardige bug draait de installer die in de root van de distributie staat
niet. Gelukkig is er een andere installer beschikbaar..
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ cd /tmp/oracle/install/linux
$ ./runIns.sh 
</PRE>
</CODE></BLOCKQUOTE>
<P>Als het goed is, wordt nu de installer gestart. Gaat het niet goed dan
ligt de fout 99,9% bij een foute of verkeerde JRE.
<P>Tijdens het doorlopen van de wizard moet er goed op de volgende zaken gelet
worden:
<P>selecteer oinstall als de group die de Oracle mag beheren. Hierna wordt er 
gevraagd om het /tmp/orainstall/oraInstall.sh script als root-gebruiker te
starten. Dit script zorgt ervoor dat alle permissies goed komen te staan op de
directory's. 
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ su - root
# cd /tmp/orainstall
# ./oraInstall.sh
</PRE>
</CODE></BLOCKQUOTE>
<P>De volgende valkuil:
<P>Selecteer bij "Installation Types" Custom. Wanneer er een ander wordt gekozen
zal de installer niet meer werken!
<P>Bij Aviable Product Components kan er alles geselecteerd worden behalve
Intermedia. Deze module is (nog) niet beschikbaar in deze versie van Oracle.
Met deze module moet het mogelijk worden om (grote) multimedia gegevens zoals
videoclips in een Oracle database te plaatsen. 
<P>Om de bestandspermissies nog &eacute;&eacute;n keer goed te zetten
moet na het einde van de installatie het $ORACLE_HOME/root.sh gedraaid worden.
Helaas is dit script niet executable dit kan als volgt worden opgelost:
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ su - root
# cd $ORACLE_HOME
# sh ./root.sh
</PRE>
</CODE></BLOCKQUOTE>
<P>Wanneer er weer teruggekeerd wordt naar de installer, wordt er gevraagd of
er een database aangemaakt moet worden. Ongeacht wat het antwoord is zal er
een database Assistent Wizard gestart worden, die je gelijk weer moet afsluiten.
Het is beter om nog geen databases aan te maken zolang er nog geen patches
zijn ge&iuml;nstalleerd.
<P>Als laatste mag er nog een keer een script gedraaid worden om de bestands-
permissies goed te zetten. Onder andere voor listener en andere Oracle 
programma's. Als je deze stap vergeet, zullen deze programma's het dan ook niet
doen.
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ cd $ORACLE_HOME/install/utl
$ ./linux.sh
</PRE>
</CODE></BLOCKQUOTE>
<P>Nu kunnen de patches er over heen ge&iuml;nstalleerd worden. Mocht dit mis
gaan dan staat in in 9 van de 10 keer je $ORACLE_HOME of $ORACLE_BASE
verkeerd, en zal het script je oracle directory dus niet kunnen vinden.
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ cd /tmp
$ tar xvfz linux_815pathes.tgz
$ cd linux_815patches
$ ./linux_815pathes.sh
</PRE>
</CODE></BLOCKQUOTE>
<P>Nog &eacute;&eacute;n ding en dan is het klaar. Als laatste (en meest
belangrijke) variabele moet het ORACLE_SID nog bekend gemaakt worden aan het
systeem. Dit kan op de volgende manier:
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ vi .bash_profile

ORACLE_SID=v8i815
export ORACLE_SID
</PRE>
</CODE></BLOCKQUOTE>
<P>Hier ga ik ervan uit dat tijdens de installatie is gekozen voor deze
ORACLE_SID dit hoeft natuurlijk niet altijd hetzelfde te zijn. Om de variabele
actief te maken nog even .bash_profile runnen:
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ ~/.bash_profile 
</PRE>
</CODE></BLOCKQUOTE>
<P>Klaar!! Op dit moment zijn Oracle en de patches ge&iuml;nstalleerd. Het is nu
tijd om een Oracle database aan te maken.
<H2><A NAME="s12">12. Een database aanmaken</A></H2>

<P>Dat kan het simpelste met het volgende commando:
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ dbassist &amp;
</PRE>
</CODE></BLOCKQUOTE>
<P>Met deze wizard kan er een database gemaakt of aangepast worden. Ook is het 
mogelijk om tal van variabelen (grootte,aantal users) op te geven of aan te
passen. Dit aanmaken van een database duurt op een Compaq EP 300 met 128 Mb
geheugen ongeveer een half uur!!
<H2><A NAME="s13">13. De database testen</A></H2>

<P>De SQL tool onder Oracle is uiteraad sqlplus. Wanneer deze tool wordt gestart,
zal er om een gebruiker en wachtwoord gevraagd worden. De standaardgebruiker
is system en het wachtwoord van system is manager. Sqlplus zal nu proberen 
contact te maken met de database. Als dit lukt, kom je op een soort command
prompt terecht waarbij je verschillende commando's kan ingeven om je database
te bewerken zoals:
<P>
<BLOCKQUOTE><CODE>
<PRE>
create table adressen (id integer primary key, naam varchar(30),adres 
varchar(30),woonplaats varchar(30));
</PRE>
</CODE></BLOCKQUOTE>
<P>Dit commando maakt een adressen tabel aan met een id dat altijd uniek
moet zijn, en naam- adres- en woonplaatsrijen. Vergeet vooral aan het einde
van de opdracht regel de ; niet. 
<P>De tabel kan op de volgende manier bevolkt worden:
<P>
<BLOCKQUOTE><CODE>
<PRE>
insert into adressen values('1','Ger','Paardebloem 4a','Damwoude'); 
</PRE>
</CODE></BLOCKQUOTE>
<P>Een overzicht van de tabel verschijnt op de volgende manier:
<P>
<BLOCKQUOTE><CODE>
<PRE>
select * from adressen;
</PRE>
</CODE></BLOCKQUOTE>
<P>Dit zal een lijstje generen met als inhoud, de inhoud van de tabel adressen.
Tot zover deze korte cursus SQL voor beginners.
<H2><A NAME="s14">14. Handige dingen om te weten </A></H2>

<P>
<DL>
<DT><B>Indeling geheugen</B><DD><P>Oracle gebruikt bepaalde termen voor het indelen van het geheugen van de 
database. Het is altijd handig om te weten wat ze ongeveer bedoelen:
</DL>
<P>
<DL>
<DT><B>Tablespace</B><DD><P>Dit zijn ruimtes waarin een database gebruiker tabellen mag aanmaken. Verder 
dient een tablespace altijd een verwijzing te hebben naar een bestand.
</DL>
<P>
<DL>
<DT><B>datafile</B><DD><P>Datafiles zijn bestanden waarin een stukje van de database zijn opgeslagen.
Alle datafiles bijelkaar vormen de database. 
</DL>
<P>
<DL>
<DT><B>segment</B><DD><P>Segmenten zijn logische entiteiten in een database. Deze entiteiten zijn van
het type tabel of index. Een gebruiker mag zelf meestal meerdere segmenten 
aanmaken en beheren. Een segment wordt weer opgeslagen in een tablespace en 
bestaat minimaal uit 1 extent
</DL>
<P>
<DL>
<DT><B>extent</B><DD><P>Een extent is een stukje ruimte waarvan de eenheid wordt gevormt door het 
aanmaken van een segment. Een extent is altijd maar van een bepaalde grootte
wanneer de extent vol is, wordt automatisch een nieuw extent aangemaakt. 
Meestal mogen er niet te veel extents aangemaakt worden. Een vaak voorkomend
aantal is 91. DE manier om je extents laag te houden is om je tabellen te
exporteren en weer te importeren in de database. Na zo'n actie staan de 
extents weer op 1.
</DL>
<P>
<DL>
<DT><B>blocks</B><DD><P>Extents zijn natuurlijk ook weer van een bepaalde grootte. Zijn opgebouwd
uit blocks die bijvoorbeeld een grootte hebben van 4 Kbytes.
</DL>
<P>Korter de bocht om:
<P>Een database bestaat uit tablespaces die weer opgebouwd zijn uit segmenten,
deze segmenten bestaan weer uit extents, en extents bestaan weer uit blocks!
<H2><A NAME="s15">15. Hoe maak ik een backup van een oracle database?</A></H2>

<P>Daar zijn 2 manieren voor. Je kunt kiezen voor een online backup (de database
blijft draaien) of een offline backup (de database moet down). Meestal is het
het veiligst om toch voor de tweede optie te kiezen. Deze is ook het simpelste.
<H2><A NAME="s16">16. Offline backup</A></H2>

<P>Breng eerst de database down. De gebruikers dienen uiteraad eerst uit te loggen!
Dit down brengen van de database kan heel simpel met het commando dbshut.
Nu is het alleen nog maar een kwestie om de goede directory's op tape te 
kopieren en de database weer up te brengen. Dit omhoog brengen van de database
kan weer met het dbstart commando.
<H2><A NAME="s17">17. Online backup</A></H2>

<P>Toch kiezen sommige organisaties voor deze methode. Vooral nu in deze e-commerce
tijden waarbij systemen en dus ook databases zo weinig mogelijk down mogen.
Het idee is dat de tabellen in de actieve database worden geexporteerd naar 
bestanden die op tape worden gezet. Wanneer er gegevens weer terug moeten gezet
dan kunnen deze bestanden weer geimporteerd worden in de database. Hier zit wel een groot risico factor in. Crasht je hele database, dan  heb je er ook niks aanwanneer je de tabellen niet terug kan zetten omdat je database opbouw in puin is
Ook kan het gebeuren dat bepaalde rechten of tabellen (per ongeluk) verwijdert 
worden. Ook dan moet je weer terug vallen op je laatste offline backup.
<P>Deze import/export truuk wordt ook vaak toegepast om een test database te
maken.
Exporteer je tabellen van je productie database, maak een nieuwe (lege) database
aan en importeer in deze testdatabase je gegevens van je productiedatabase.
<H2><A NAME="s18">18. Tijd voor een demonstratie:</A></H2>

<P>exporteren van tabellen uit een draaiende database:
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ exp system/manager file=export.dmp tables=adressen compress=y
</PRE>
</CODE></BLOCKQUOTE>
<P>Exporteer de tabel adressen en zet de data in het bestand export.dmp,
doe dit als gebruiker system met als wachtwoord manager.
<P>importeren van tabellen in een draaiende database:
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ imp system/manager file=export.dmp commit-y full=y
</PRE>
</CODE></BLOCKQUOTE>
<P>Deze opdracht importeert de tabellen die in het export.dmp bestand staan
in de database.
<P>Let op: Deze methode is alleen maar ideaal als backup/restore mogelijkheid
als de database om wat voor reden dan ook niet down mag.
<H2><A NAME="s19">19. Hoe stop en start ik mijn database automatisch bij het opstarten/afsluiten van de computer?</A></H2>

<P>Uiteraard kan dit met de bekende start en stop scripts. &Eacute;&eacute;n van
de belangrijkste initialisatie bestanden van Oracle is /etc/oratab. In dit
bestand staan regels bestaande uit ORACLE_SID met een Y of N erachter. Wanneer
er een Y achter staat zorgt dat ervoor, dat bij het geven van een dbstart
commando, de database wordt gestart. En wanneer er een N achterstaat zal dit
er dus voor zorgen dat een database afgesloten wordt bij het geven van het
dbshut commando.
<P>Voor de volledigheid volgt hier een start/stop-scriptje:
<P>
<BLOCKQUOTE><CODE>
<PRE>
/etc/rc.d/init.d/oracle

#!/bin/sh
.. /etc/rc.d/init.d/functions
RETVAL=0
PATH=$PATH:/usr/local/sbin
case "$1" in
   start)
         echo -n "Opstarten Oracle 8.1.5:"
         su -c oracle8i dbstart &amp;
         RETVAL=$?
         echo 
         [ $RETVAL -eq 0 ] &amp;&amp; touch /var/lock/subsys/oracle
         ;;
  stop)
        echo -n "Stoppen Oracle 8.1.5: "
        su -c oracle8i dbshut &amp;
        RETVAL=$?
        echo 
        [ RETVAL -eq 0 ] &amp;&amp; rm -f /var/lock/subsys/oracle
        ;;
     *)
       exit 1
esac

exit $RETVAL
</PRE>
</CODE></BLOCKQUOTE>
<P>Dit scriptje even symlinken naar de runlevels:
<P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
ln -s /etc/rc.d/init.d/oracle /etc/rc.d/rc3.d/S40oracle
ln -s /etc/rc.d/init.d/oracle /etc/rc.d/rc0.d/K99oracle
</PRE>
</CODE></BLOCKQUOTE>
<P>Dit voorbeeld gaat ervan uit dat opgestart wordt in runlevel 3!
Start je systeem op in runlevel 5 (grafische login) maak dan een link naar rc5:
<P>
<BLOCKQUOTE><CODE>
<PRE>
ln -s /etc/rc.d/init.d/oracle /etc/rc.d/rc5.d/S40oracle
</PRE>
</CODE></BLOCKQUOTE>
<P>Het afsluiten in runlevel 0 (wanneer het systeem uitgaat) lukte bij
mijn configuratie niet. Halverwege het script wordt het systeem uitgezet,
en dus krijgt Oracle de kans niet om de database netjes af te sluiten.
Volgens kun je dat het snelste oplossen door de &amp; achter dbshut weg te halen.
Hierdoor blijft het systeem net zolang wachten totdat de database down is.
Dit heb ik zelf nog niet getest. Mocht er iemand een betere oplossing hebben
dan hoor ik dat graag.
<H2><A NAME="s20">20. Zijn er ook tools om Oracle databases te beheren?</A></H2>

<P>Yep. Kijk maar eens op deze site: 
<A HREF="http://www.orasoft.org/om/">http://www.orasoft.org/om/</A>.
Onder andere kun je hier een objectmanager downloaden waarmee je al de
objecten van je database kunt beheren. Ook een SQL-client is op deze
site te vinden. Deze tools zijn echt een aanrader. Vergeet niet de bijhorende
libraries te downloaden. 
<H2><A NAME="s21">21. Afsluiting</A></H2>

<P>Dit is het einde van mijn Oracle op linux installatie handleiding. Het was voor mij mijn eerste handleiding die ik mocht schrijven. Val me er dus niet op aan, als er te veel fouten in staan. Over het algemeen wil ik opmerken
dat het redelijk makkelijk is om een Oracle Database te installeren onder Linux.Het installeren viel bij mij erg mee, en de eerste keer liep alles gelijk goed.
Ik hoop dat ik deze ervaring kan delen met meer mensen. Succes!
</BODY>
</HTML>
