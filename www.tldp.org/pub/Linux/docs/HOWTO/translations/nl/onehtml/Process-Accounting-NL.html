<HTML
><HEAD
><TITLE
>Activeren van Proces Accounting onder Linux HOWTO</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"></HEAD
><BODY
CLASS="ARTICLE"
BACKGROUND="../IMAGES/back.gif"
LINK="#000099"
><DIV
CLASS="ARTICLE"
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="TITLE"
><A
NAME="AEN2"
></A
>Activeren van Proces Accounting onder Linux HOWTO</H1
><H3
CLASS="AUTHOR"
><A
NAME="AEN4"
>Albert M.C. Tam</A
></H3
><DIV
CLASS="AFFILIATION"
><DIV
CLASS="ADDRESS"
><P
CLASS="ADDRESS"
><TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:bertie@scn.org"
>bertie@scn.org</A
>&#62;</TT
></P
></DIV
></DIV
><H3
CLASS="AUTHOR"
><A
NAME="AEN10"
>Vertaald door: Ellen Bokhorst</A
></H3
><DIV
CLASS="AFFILIATION"
><DIV
CLASS="ADDRESS"
><P
CLASS="ADDRESS"
><TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:bokkie@nl.linux.org"
>bokkie@nl.linux.org</A
>&#62;</TT
></P
></DIV
></DIV
><P
CLASS="PUBDATE"
>09-02-2001<BR></P
><DIV
CLASS="REVHISTORY"
><TABLE
WIDTH="100%"
BORDER="0"
><TR
><TH
ALIGN="LEFT"
VALIGN="TOP"
COLSPAN="3"
><B
>Wijzigingen</B
></TH
></TR
><TR
><TD
ALIGN="LEFT"
>Herziening 1.1</TD
><TD
ALIGN="LEFT"
>09-02-2001</TD
><TD
ALIGN="LEFT"
>Herzien door: KET</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
></TD
></TR
><TR
><TD
ALIGN="LEFT"
>Herziening 1.0</TD
><TD
ALIGN="LEFT"
>08-08-1997</TD
><TD
ALIGN="LEFT"
>Herzien door: AMCT</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
></TD
></TR
></TABLE
></DIV
><DIV
><DIV
CLASS="ABSTRACT"
><A
NAME="AEN16"
></A
><P
></P
><P
>Beschrijft de basis van het activeren van procesaccounting onder
Linux.</P
><P
></P
></DIV
></DIV
><HR></DIV
><DIV
CLASS="TOC"
><DL
><DT
><B
>Inhoudsopgave</B
></DT
><DT
><A
HREF="#PREAMBLE"
>Inleiding</A
></DT
><DT
><A
HREF="#INTRODUCTION"
>Introductie</A
></DT
><DT
><A
HREF="#PA"
>Wat is proces accounting?</A
></DT
><DT
><A
HREF="#CURRENTSTATUS"
>Huidige status van procesaccounting onder Linux</A
></DT
><DT
><A
HREF="#REQUIREMENTS"
>Benodigdheden voor procesaccounting onder Linux</A
></DT
><DT
><A
HREF="#PASETUP"
>Processaccounting setup onder Linux</A
></DT
><DT
><A
HREF="#MISCCOMMANDS"
>Diverse procesaccounting opdrachten</A
></DT
></DL
></DIV
><DIV
CLASS="SECT1"
><H2
CLASS="SECT1"
><A
NAME="PREAMBLE"
></A
>Inleiding</H2
><P
>Dit document is copylefted door Albert M.C. Tam
(<A
HREF="mailto:bertie@scn.org"
TARGET="_top"
>bertie@scn.org</A
>). Het is hierbij
toegestaan dit document voor niet commerci&euml;le doeleinden te
gebruiken, kopi&euml;ren, op voorwaarde dat de naam van de auteur/editor
en deze vermelding in alle kopie&euml;n verschijnt en/of in alle 
ondersteunende documenten en op voorwaarde dat dit document niet wordt
aangepast. Dit document wordt gedistribueerd in de hoop dat het van nut
zal zijn, maar ZONDER ENIGE GARANTIE noch uitdrukkelijk noch impliciet.
Ondanks dat alle moeite is genomen om de accuraatheid van de informatie in
dit document te verzekeren, aanvaardt de auteur/editor/beheerder GEEN
AANSPRAKELIJKHEID voor fouten, of voor beschadigingen resulterend uit het
gebruik van de informatie in dit document.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="INTRODUCTION"
></A
>Introductie</H2
><P
>In dit document wordt beschreven hoe systeemproces accounting onder
een Linux host te activeren en wordt het gebruik van diverse procesaccounting
opdrachten behandeld. Het is bedoeld voor gebruikers met kernelversies 
groter dan of gelijk aan 1.3.73 (getest onder RedHat&trade; 4.1 kernel 2.0.27). 
Voor kernels ouder dan 1.3.73 is wellicht een patch nodig om de proces
accounting feature te kunnen gebruiken.</P
><P
>Stuur gerust feedback of commentaar naar 
<A
HREF="bertie@scn.org"
TARGET="_top"
>bertie@scn.org</A
> als je een fout aantreft
of er informatie ontbreekt. Ik waardeer dat.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PA"
></A
>Wat is proces accounting?</H2
><P
>Proces accounting is een methode om onder Linux uitgevoerde opdrachten
op te nemen en op te sommen. De moderne Linux kernel kan procesaccounting
records voor de uitgevoerde opdrachten bijhouden, de gebruiker die de
opdracht uitvoerde, de CPU tijd en nog veel meer dan dat.</P
><P
>Procesaccounting biedt je de mogelijkheid gedetailleerde accounting
informatie over de gebruikte systeembronnen bij te houden, 
de toewijzing tussen gebruikers en systeemmonitoring. </P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="CURRENTSTATUS"
></A
>Huidige status van procesaccounting onder Linux</H2
><P
>Ondersteuning voor procesaccounting is in de nieuwere kernels
(versie &gt;= 1.3.73) ge&iuml;ntegreerd. Als je een oudere kernel draait,
heb je wellicht wat patch files nodig. De patches zijn beschikbaar vanaf
<A
HREF="ftp://iguana.hut.fi/pub/linux/Kernel/process_accounting"
TARGET="_top"
>ftp://iguana.hut.fi/pub/linux/Kernel/process_accounting</A
></P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="REQUIREMENTS"
></A
>Benodigdheden voor procesaccounting onder Linux</H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="KERNEL"
></A
>Kernel</H3
><P
>Een Linux kernelversie gelijk aan of groter dan versie 1.3.73 is 
nodig, en ik raad je versie 2.x aan. De kernel source is beschikbaar vanaf
<A
HREF="http://sunsite.unc.edu/pub/Linux/kernel/v2.0"
TARGET="_top"
>http://sunsite.unc.edu/pub/Linux/kernel/v2.0</A
></P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PASOFTWARE"
></A
>Procesaccounting Software</H3
><P
>Afhankelijk van de in gebruik zijnde Linux distributie, is het 
procesaccouting softwarepackage wel of niet op het systeem ge&iuml;nstalleerd.
Probeer het package te downloaden vanaf
<A
HREF="http://sunsite.unc.edu/pub/Linux/system/admin/quota-acct-modified.tgz"
TARGET="_top"
>http://sunsite.unc.edu/pub/Linux/system/admin/quota-acct-modified.tgz</A
>
als je het niet hebt.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PASETUP"
></A
>Processaccounting setup onder Linux</H2
><P
></P
><OL
TYPE="1"
><LI
><P
>Compileer en installeer de procesaccounting software.</P
><P
>Het procesaccounting softwarepackage is beschikbaar vanaf
<A
HREF="http://sunsite.unc.edu/pub/Linux/system/admin/quota-acct-modified.tgz"
TARGET="_top"
>http://sunsite.unc.edu/pub/Linux/system/admin/quota-acct-modified.tgz</A
></P
></LI
><LI
><P
>Pas het initscript op je systeem aan om de procesaccounting
tijdens de systeemstart te activeren:</P
><P
>Hier is een voorbeeld</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="SCREEN"
># Activeer procesaccounting.
if [ -x /sbin/accton ]
then 
/sbin/accton /var/log/pacct 
echo "Procesaccounting geactiveerd." 
fi</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Maakt een accounting record bestand <TT
CLASS="FILENAME"
>"pacct."</TT
> aan</P
><P
>Standaard zal de procesaccounting software alle uitgevoerde opdrachten 
opslaan in het bestand <TT
CLASS="FILENAME"
>/var/log/pacct</TT
>. </P
><P
>Voor het aanmaken van het accounting record bestand, geef je de opdracht:
<TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="SCREEN"
>touch /var/log/pacct</PRE
></TD
></TR
></TABLE
> </P
><P
>De eigenaar van dit record bestand is root, en het heeft voor root
read-write permissies ingesteld en voor alle andere alleen read permissie:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="SCREEN"
>chown root /var/log/pacct
chmod 0644 /var/log/pacct</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Reboot.</P
><P
>Start je systeem nu opnieuw op om de wijzigingen te activeren.</P
></LI
></OL
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MISCCOMMANDS"
></A
>Diverse procesaccounting opdrachten</H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><B
CLASS="COMMAND"
>ac</B
></DT
><DD
><P
><B
CLASS="COMMAND"
>ac</B
> drukt statistieken af over verbindingstijden
van gebruikers in uren gebaseerd op de logins en logouts in het huidige
<TT
CLASS="FILENAME"
> /var/log/wtmp</TT
> bestand. <B
CLASS="COMMAND"
>ac</B
> kan ook
totalen in tijd afdrukken voor elke dag (optie -d) en voor elke gebruiker
(optie -p).</P
></DD
><DT
><B
CLASS="COMMAND"
>accton</B
></DT
><DD
><P
><B
CLASS="COMMAND"
>accton</B
> wordt gebruikt om procesaccounting aan- of
uit te zetten. Dit bestand wordt normaal gesproken tijdens de systeemstart
of -shutdown uitgevoerd via systeem initscripts.</P
></DD
><DT
><B
CLASS="COMMAND"
>last</B
></DT
><DD
><P
><B
CLASS="COMMAND"
>last</B
> doorloopt het
<TT
CLASS="FILENAME"
>/var/log/wtmp</TT
> bestand en drukt informatie af over
verbindingstijden van gebruikers.</P
></DD
><DT
><B
CLASS="COMMAND"
>sa</B
></DT
><DD
><P
><B
CLASS="COMMAND"
>sa</B
> 
geeft een opsomming van accounting informatie van eerder uitgevoerde
opdrachten, software I/O bewerkingstijden, en CPU tijden,
zoals opgenomen in het accounting record bestand
<TT
CLASS="FILENAME"
> /var/account/pacct</TT
>. </P
></DD
><DT
><B
CLASS="COMMAND"
>lastcomm</B
></DT
><DD
><P
><B
CLASS="COMMAND"
>lastcomm</B
> drukt alle informatie af over alle
eerder uitgevoerde opdrachten, opgenomen in
<TT
CLASS="FILENAME"
>/var/account/pacct</TT
>. </P
></DD
></DL
></DIV
></DIV
></DIV
></BODY
></HTML
>