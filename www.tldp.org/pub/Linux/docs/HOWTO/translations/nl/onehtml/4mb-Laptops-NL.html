<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>4mb Laptop HOWTO</TITLE>


</HEAD>
<BODY>
<H1>4mb Laptop HOWTO</H1>

 
<H2>Bruce Richardson &lt;brichardson@lineone.net&gt;<BR>
Vertaald door: Ellen Bokhorst</H2>25 maart 2000
 
<P><HR>
<EM>Hoe een "volwassen" Linux distributie op een small-spec (4mb RAM, &lt;=200mb hard disk) laptop te plaatsen.
 </EM>
<HR>
<H2><A NAME="s1">1. Introductie</A></H2>

<H2>1.1 Waarom dit document werd geschreven</H2>

<P>Ik wist twee oudere laptops te bemachtigen, beiden met slechts 4mb RAM en
kleine (&lt;=200mb) harddisks. Ik wilde hierop Linux installeren. 
De documentatie voor dergelijke laptops raadt altijd aan een mini-Linux of
een oude (en daardoor compacte) versie van &eacute;&eacute;n van de 
professionele distributies te installeren. Ik wilde een up-to-date 
professionele distributie installeren.
<H2><A NAME="sec:whatuse"></A> 1.2 Wat voor nut heeft een kleine laptop?</H2>

<P>Volop. Hierop zal geen X worden gedraaid en het zal geen ontwikkelaarsbox
worden 
(zie 
<A HREF="#sec:whichcomponents">Welke componenten installeren?</A>),
maar als je je goed voelt bij de console dan heb je een machine waarmee
je kunt e-mailen, netwerken, schrijven, enz. Laptops kunnen ook uitstekend
dienst doen voor diagnostische/reparatie tools en de utility's daarvoor zullen
makkelijk op kleine laptops passen.
<H2>1.3 Waarom de laptop niet gewoon upgraden?</H2>

<P>Het upgraden van oude laptops is niet veel goedkoper dan het upgraden van
nieuwere modellen. Dat is nogal veel geld voor een oude machine, vooral
in aanmerking genomen dat de fabrikant het niet meer ondersteunt en 
losse onderdelen moeilijk zijn te vinden.
<H2>1.4 Hoe zit het met 4mb desktop machines?</H2>

<P>De procedure beschreven in dit document zal zeer goed werken op een desktop PC.
Aan de andere kant is het upgraden van een desktop veel makkelijker en
goedkoper dan het upgraden van een laptop. Zelfs als je niet kiest voor
upgraden dan nog zijn er eenvoudiger opties. Je kunt er nog altijd de
harddisk uithalen, deze in een krachtiger machine plaatsen, er Linux op
installeren, het zodanig inkrimpen dat het op de harddisk past om de harddisk
vervolgens terug te plaatsen in de oude machine.
<H2>1.5 Waar dit document niet voor is</H2>

<P>Dit document is geen algemene HOWTO over het installeren van Linux op laptops
of ook maar een specifieke HOWTO voor &eacute;&eacute;n van de twee machines 
die hier worden genoemd. Hierin
wordt simpelweg een manier beschreven om een omvangrijke Linux distributie
samen te persen in een zeer kleine ruimte, waarbij twee specifieke machines 
als voorbeeld worden genomen.
<H2>1.6 Waar dit document is te vinden.</H2>

<P>De laatste kopie van dit document is in verscheidene formaten te vinden op
<A HREF="http://website.lineone.net/~brichardson/linux/4mb_laptops/">http://website.lineone.net/~brichardson/linux/4mb_laptops/</A>.
<H2>1.7 Copyright</H2>

<P>Dit document is auteursrechtelijk beschermd (c) door Bruce Richardson 2000. 
Het mag onder voorwaarden uiteengezet in de LDP-licentie op
sunsite.unc.edu/LDP/COPYRIGHT.html gedistribueerd.
<P>Deze HOWTO is vrije documentatie; je kunt het onder de voorwaarden van de
LDP licentie redistribueren en/of wijzigen. Dit document wordt gedistribueerd
in de hoop dat het van nut zal zijn, maar zonder enige garantie; zelfs zonder
de impliciete garantie van verkoopbaarheid of geschiktheid voor een bepaald
doel. Zie de LDP licentie voor meer details.
<P>Toshiba en T1910 zijn handelsmerken van Toshiba Corporation. Compaq en Contura
Aero zijn handelsmerken van Compaq Computer Corporation.
<H2><A NAME="s2">2. De Laptops</A></H2>

<P>In deze sectie worden de laptops beschreven waarop ik deze procedure heb
toegepast, de problemen die ik tegenkwam tijdens het installeren van Linux
op deze laptops en de oplossingen voor deze problemen (in grote lijnen).
<H2>2.1 Basisspecificaties</H2>

<H3>Compaq Contura Aero</H3>

<P>
<UL>
<LI>25MHz 486SX CPU</LI>
<LI>4mb RAM</LI>
<LI>170mb Hard Disk</LI>
<LI>1 PCMCIA Type II slot</LI>
<LI>Extern PCMCIA 3.5" diskettestation
<BLOCKQUOTE>Het PCMCIA diskettestation heeft een eigen interface welke deels wordt
bestuurd door Aero's unieke BIOS.
De Linux PCMCIA drivers kunnen er niet mee overweg. Volgens de
PCMCIA-HOWTO zal het als een standaardstation functioneren als het
station is verbonden wanneer de laptop boot en de Card Services zullen
de socket negeren, maar het is niet hot-swappable. 
Ik bemerkte echter dat het station ontoegankelijk werd zodra 
de Card Services opstartte, tenzij er zich een gemounte disk in het station
bevond. Dit heeft implicaties voor het installatieproces - deze worden
behandeld op relevante momenten.  </BLOCKQUOTE>
</LI>
</UL>
<H3>Toshiba T1910</H3>

<P>
<UL>
<LI>33MHz 486SX CPU</LI>
<LI>4mb RAM</LI>
<LI>200 mb Hard Disk</LI>
<LI>Intern 3.5" diskettestation</LI>
<LI>1 PCMCIA Type II/III slot</LI>
</UL>
<H2>2.2 Het probleem</H2>

<P>De kleine harddisks en het gebrek aan een intern diskettestation op de Aero
maken dat de installatie wat lastiger verloopt dan normaal, maar het
werkelijke probleem wordt gevormd door het RAM. Geen van de huidige
distributies biedt een installatiedisk waarmee in 4mb geboot kan worden,
zelfs niet als de gehele harddisk is geformatteerd als swappartitie.
<P>De standaardinstallatie maakt gebruik van een bootdisk om een rootpartitie
image te decomprimeren (of van een tweede diskette of vanaf CD-ROM) naar
een ramdisk. De rootimage heeft bij benadering een omvang van 4mb. In dit
scenario is dat alle beschikbare RAM. Probeer het en het loopt vast
tijdens het uitpakken van het rootimage.
<H2>2.3 De oplossing</H2>

<P>Het antwoord is het elimineren van de ramdisk. Als je root op een fysieke
partitie kunt mounten, dan heb je voldoende geheugen om de installatie
uit te voeren. Aangezien de ongecomprimeerde ramdisk te groot is voor
een diskette, is de enige plaats die overblijft op de harddisk van de
laptop. De stappen zijn:
<P>
<OL>
<LI>Zoek naar iets dat in 4mb ram boot en waarmee ook ext2 partities kunnen
worden aangemaakt.</LI>
<LI>Gebruik het om een swappartitie en een kleine ext2 partitie
op de harddisk van de laptop aan te maken.</LI>
<LI>Decomprimeer de installatie root-image en kopieer het naar de ext2 partitie.</LI>
<LI>Boot de laptop van de installatie bootdisk, het verwijzend naar de
ext2 partitie op de harddisk.</LI>
<LI>Vanaf hier zou de installatie min of meer normaal moeten verlopen.</LI>
</OL>
<P>De enige vraag was of een distributie (onder normale omstandigheden)
niet kon worden ge&iuml;nstalleerd op de laptops er wel op zou kunnen
draaien. Het beknopte antwoord is "Ja".
<P>Als je een oude Linux goeroe bent, dan is dat alles wat je moet weten.
Zo niet, lees dan verder - een aantal eerder genoemde stappen zijn
niet zo simpel als ze eruitzien.
<H2><A NAME="s3">3. Gemaakte keuzes</A></H2>

<P>In deze sectie worden de beschikbare keuzes beschreven, welke opties
praktisch zijn, welke ik heb gekozen en waarom.
<H2>3.1 Wat te gebruiken om de initi&euml;le rootpartitie aan te maken?</H2>

<P>Het beste hulpmiddel hiervoor is een mini-Linux. 
Er is een brede keuze aan kleine Linux distributies op het Net, maar de
meeste daarvan kunnen niet in 4mb RAM worden geboot. Ik vond er twee
die dit wel doen:
<P>
<P>
<DL>
<DT><B>SmallLinux  
<A HREF="http://smalllinux.netpedia.net/">http://smalllinux.netpedia.net/</A></B><DD><P>SmallLinux boot in slechts 2mb RAM, maar de rootdisk
kan niet uit het diskettestation worden genomen, wat jammer is, omdat het
verder alles biedt wat we nodig hebben (d.w.z. fdisk, mkswap en mkfs.ext2).
SmallLinux kan de benodigde partities aanmaken, maar het kan niet worden
gebruikt om de rootpartitie te kopi&euml;ren.
</DL>
<P>
<DL>
<DT><B>muLinux
<A HREF="http://sunsite.auc.dk/mulinux/">http://sunsite.auc.dk/mulinux/</A></B><DD><P>muLinux boot wel in 4mb, maar slechts in de beperkte
single-user modus. In deze modus zijn fdisk en mkswap beschikbaar, maar
mkfs.ext2 en de library's die nodig zijn, staan in de /usr partitie die
in de onderhoudsmodus niet beschikbaar is. Voor het gebruik van muLinux
voor de gehele voorinstallatieprocedure moeten de bestanden die nodig 
zijn om ext2 bestandssystemen aan te maken, worden ge&euml;xtraheerd uit 
de usr diskimage en naar diskette worden gekopieerd.
</DL>
<P>Dit geeft de keuze uit of het gebruik van SmallLinux om de partities aan
te maken en muLinux om de rootpartitie te kopi&euml;ren of het gebruik van
muLinux voor het uitvoeren van de gehele taak. Aangezien ik twee laptops
had, probeerde ik beiden.
<H2>3.2 De distributie</H2>

<P>De keuze voor Slackware nam niet veel tijd in beslag. Afgezien van het feit
dat ik het prettig vind, het nog niet zoveel heb gebruikt en er meer van wil
leren, nam ik de volgende punten in overweging:
<P>
<UL>
<LI>Slackware is &eacute;&eacute;n van de meest flexibele distributies. Het wordt
geleverd met een brede vari&euml;teit aan bootdiskkernels geschikt voor
veel verschillende machines. Dit maakt het heel goed geschikt voor het soort
hacken wat in dit scenario nodig is.</LI>
<LI>Slackware ondersteunt alle methoden opgesomd in 
<A HREF="#sec:whichmethod">Welke installatiemethode te gebruiken?</A>.</LI>
<LI>Slackware is een distributie die door &eacute;&eacute;n persoon is ontworpen.
Ik ben er zeker van dat Patrick Volkerding er geen bezwaar tegen heeft als
ik zeg dat dit betekent dat configuratietools eenvoudiger en beter
gestroomlijnd zijn. Naar mijn mening maakt dit de taak de installatie
in te krimpen dat het past makkelijker.</LI>
</UL>
<P>Versie 7.0 was de laatste versie toen ik dit probeerde, dus die gebruikte ik.
<H3>Maar ik vind Slackware maar niks!</H3>

<P>Je hoeft het niet te gebruiken. Ik kan geen antwoord geven voor alle
distributies, maar ik weet dat Debian, Red Hat en SuSE een breed bereik aan
installatiemethoden bieden en een "expert" installatieprocedure bevatten
<BLOCKQUOTE>Doet Debian het ook nog anders?  </BLOCKQUOTE>

welke hier kan worden gebruikt. De meeste stappen die in dit document
worden beschreven kunnen zonder wijzigingen op andere distributies worden
toegepast.
<P>Als je de expert methode van je voorkeursdistributie nog niet eerder 
gebruikte, voer dan een testrun uit op een simpele desktopcomputer
om er aan te wennen en de opties die het biedt te onderzoeken.
<H2><A NAME="sec:whichmethod"></A> 3.3 Welke installatiemethode te gebruiken?</H2>

<P>
<DL>
<DT><B>Floppy Install</B><DD><P>Dit betekent 15 diskettes, wat je slechts een absoluut
minimale installatie geeft en een tweede fase vereist om de applicaties
te verkrijgen die je hebben wilt. Het is ook <EM>erg</EM> langzaam op 
dergelijke low-spec computers. Dit is een laatste redmiddel als je het via
de anderen methoden niet voor elkaar krijgt.
</DL>
<P>
<DL>
<DT><B>Parallel-port Install</B><DD><P>Waarbij op de parallelle poort een IDE device,
parallelle kabel of pocket ethernetadaptor is
<BLOCKQUOTE>Een pocket lan adaptor installatie zal op deze computers <EM>erg</EM>
langzaam zijn.  </BLOCKQUOTE>

aangesloten. Dit zou een goede keus zijn voor de Aero, waarbij
het PCMCIA slot vrij blijft voor het diskettestation.
</DL>
<P>
<DL>
<DT><B>PCMCIA Install</B><DD><P>Als bovenstaand, dit zou een CD-ROM of netwerkinstallatie
kunnen zijn. Dit zou de beste methode kunnen zijn voor de T1010, voor de
Aero is het wat lastiger.
</DL>

<DL>
<DT><B>ISA/PCI Ethernet Install</B><DD><P>Geen optie voor de laptops natuurlijk,
maar opgenomen voor het geval je doelcomputer een desktop-PC is.
</DL>
<P>
<BLOCKQUOTE>
De tools die ik ter hand had dicteerde een PCMCIA netwerkinstallatie.
Ik zal aangeven waar de stappen verschillen voor de andere methoden. 
Welke methode je ook kiest, je hebt een higher-spec computer beschikbaar nodig, zelfs als je alleen de
diskettes maar hoeft aan te maken voor een installatie via diskettes.
</BLOCKQUOTE>
<H2><A NAME="sec:partitionlayout"></A> 3.4 Partitielay-out</H2>

<H3>Basisbenodigdheden</H3>

<P>Voor deze procedure zijn minstens twee Linux native partities nodig in 
aanvulling op een swappartitie. 
Aangezien &eacute;&eacute;n van de ext2 partities tijdens de installatie
in gebruik zal zijn als een tijdelijke root zal het niet beschikbaar zijn
als een doelpartitie en zou deze klein moeten zijn, alhoewel niet kleiner
dan 5mb. Het is verstandig deze partitie aan te maken die je als /home
zult hergebruiken als de installatie eenmaal is voltooid. Een andere optie
zou kunnen zijn het opnieuw als een DOS-partitie aan te maken zodat je
naderhand een dual-boot laptop hebt.
<H3>Hoe complex wordt de lay-out?</H3>

<P>Er is geen ruimte om al te slimme truuken uit te halen hier. Er is een
argument voor een enkele ext2 partitie en het gebruik van een swapbestand
om een verspilling van ruimte te voorkomen, maar ik raad je toch ten zeerste
een aparte partitie aan voor /usr. Als je slechts &eacute;&eacute;n partitie
hebt en er iets mee misgaat, dan wordt je wellicht geconfronteerd met een
volledige herinstallatie. Een aparte /usr en kleine partitie voor /
geeft een herstelactie een beter vooruitzicht. Op beide machines maakte
ik in totaal 4 partities aan:
<P>
<OL>
<LI>Een swap partitie -- 16mb op de T1910, 20 op de Aero 
(het is waarschijnlijker dat ik het geheugen op de Aero zal upgraden).</LI>
<LI>/home (tijdelijke root tijdens de installatie) -- 10mb</LI>
<LI>/ -- 40mb op de T1910, 30mb op de Aero.</LI>
<LI>/usr -- De rest.</LI>
</OL>
<P>Daarbovenop gebruikt de Aero hda3 voor een DOS-partitie van 2mb met
configuratie-utility's. Zie de Aero FAQ's voor details.
<H2><A NAME="sec:whichcomponents"></A> 3.5 Welke componenten installeren?</H2>

<P>De volledige glibc library's alleen al zou de harddisks volledig opvullen,
dus er kan geen sprake zijn van het bouwen van een ontwikkelaarsmachine.
Het ziet ernaar uit dat een minimale X-installatie wel zou passen, maar
ik ben er zeker van dat het heel traag zou zijn en ik wil het hoe dan ook
toch niet.
Ik besloot het volgende te installeren (zie voor een volledige opsomming
<A HREF="#sec:appendixA">Appendix A</A>):
<P>
<UL>
<LI>De core Linux utility's</LI>
<LI>Gemengde tekstapplicaties vanuit de ap1 bestandsset:</LI>
<LI>Info/FAQ/HOWTO documentatie</LI>
<LI>Basisnetwerkutility's</LI>
<LI>De BSD spellen</LI>
</UL>
<P>Deze selectie komt overeen met het soort computer dat is beschreven in
<A HREF="#sec:whatuse">Wat voor nut heeft een kleine laptop?</A>.
<H2><A NAME="s4">4. De voorinstallatieprocedure</A></H2>

<P>In deze sectie wordt het aanmaken van een swappartitie en een tijdelijke
rootpartitie op de harddisk van de laptop behandeld. Niets hier is
specifiek voor Slackware.
<H2><A NAME="sec:mulinuxprep"></A> 4.1 muLinux voorbereiding</H2>

<P>Als je alleen muLinux gaat gebruiken voor deze procedure, dan hoef je alleen
een disk voor te bereiden met hierop mkfs.ext2 en ondersteunende library's.
Decomprimeer USR.bz2 van de muLinux setupbestanden en mount het als een
loop file-system. Als je je bevindt in dezelfde directory als het USR bestand
en je het wilt mounten als /tmpusr dan bestaat de reeks hiervoor uit:
<P>
<HR>
<PRE>
losetup /dev/loop0 USR
mount -t ext2 /dev/loop0 /tmpusr
 
</PRE>
<HR>
<P>>Kopieer van daaruit mkfs.ext2, libext2fs.so.2, libcomerr.so.2 en libuuid.so.1
naar een diskette.
<H2><A NAME="sec:preproot"></A> 4.2 Bereid de installatierootbestanden voor.</H2>

<P>Kies de rootdisk die je wilt. Ik gebruikte het color rootbestand zonder
problemen, maar het text rootbestand zou iets sneller kunnen zijn bij deze
lage geheugenwaarden. Decomprimeer het image en mount het als een loopdevice.
De procedure is hetzelfde als in bovenstaande sectie, maar het rootdiskimage
is nu een minix bestandssysteem.
<P>Vervolgens heb je 3 1722 diskettes nodig of 4 1440 diskettes met 
ext2 bestandssysteem, 1722 diskettes is beter, aangezien je dan niet de
/lib directory hoeft op te splitsen. Geef een diskette tweemaal het 
standaardaantal inodes zodat er de /dev directory oppast.
Dat is 432 nodes voor een 1722 disk of 368 voor een 1440. Als je
/dev/fd0H1722 of /dev/fd0H1440 opgeeft, dan hoeft je verder geen andere
parameters op te geven, dus geef voor een 1722 disk op:
<P>
<HR>
<PRE>
mke2fs -N 432 /dev/fd0H1722
 
</PRE>
<HR>
<P>Al je het rootimage als /tmproot hebt gemount en de doeldiskette als
/floppy dan cd je naar /tmproot. Voor het kopi&euml;ren van de directory
dev is de opdracht:
<P>
<HR>
<PRE>
cp -dpPR dev/* /floppy/
 
</PRE>
<HR>
<P>Voor de andere directory's met bestanden (in bin, etc, lib, mnt, sbin, usr,
var) is het
<P>
<HR>
<PRE>
cp -dpPr naam_directory/* /floppy/
 
</PRE>
<HR>
<P>Laat de lege directory's voor wat ze zijn (floppy, proc, root, tag, tmp),
omdat je deze simpelweg op de laptop aan kunt maken. boot en cdrom zijn
softlinks respectievelijke verwijzend naar /mnt/boot en /var/log/mount, ook
die kun je op de laptop aanmaken.
<H2>4.3 Maak de partities aan</H2>

<H3>Een mini-Linux en een ext2 bestandssysteem - een belangrijke noot.</H3>

<P>Om ruimte te besparen, maken ontwerpers van kleine Linux distributies
soms gebruik van oudere libc5 library's en daar waar ze gebruik maken
van up-to-date libc6, laten ze veel van de opties gecompileerd in volledige
distributies weg, waaronder een aantal optionele features van het ext2
bestandssysteem. Dit heeft twee consequenties:
<P>
<UL>
<LI>Een ext2 disk proberen te mounten met een modern Linux systeem kan
foutmeldingen geven als je het read-write mount. Zorg dat je de optie -r 
gebruikt wanneer je diskettes op de laptops mount.</LI>
<LI>Het is niet verstandig mkfs.ext2 te gebruiken dat wordt geleverd met
de mini-Linux om bestandssystemen aan te maken op de partities waarop
Slackware zal worden ge&iuml;nstalleerd. Het zou alleen moeten worden
gebruikt om het bestandssysteem op de tijdelijke rootpartitie aan te maken.
Zodra de installatie compleet is, kan deze partitie opnieuw worden
geformatteerd en worden hergebruikt.</LI>
</UL>
<H3>Procedure</H3>

<P>Als je de installatie uitvoert op een Aero, zorg dan dat het diskettestation
is ingevoegd voordat je het systeem aanzet en verwijder deze niet.
<P>
<OL>
<LI>Boot vanaf de mini-Linux  
<BLOCKQUOTE>Wacht bij muLinux totdat het bootproces een foutmelding geeft over te
weinig geheugenruimte en de optie biedt je in een shell te droppen, neem
die optie en werk in de beperkte single-user modus die het je geeft.</BLOCKQUOTE>
</LI>
<LI>Gebruik fdisk om de partitie aan te maken.</LI>
<LI>Reboot bij het verlaten van fdisk (bij muLinux kun je nu simpelweg de computer
uit en weer aanzetten).</LI>
<LI>Pas mkswap toe op de swappartitie en activeer het vervolgens (dit maakt
muLinux heel wat gelukkiger).</LI>
<LI>Mount bij gebruik van muLinux de extra diskette aangemaakt in
<A HREF="#sec:mulinuxprep">muLinux Preparation</A>, kopieer mkfs.ext2
naar /bin en de library's naar /lib.</LI>
<LI>Gebruik mkfs.ext2 om het bestandssysteem op de tijdelijke rootpartitie
aan te maken.</LI>
<LI>Als je tot nu toe gebruik maakte van SmallLinux, sluit dan nu af en
herstart met behulp van muLinux. Vergeet niet de swappartitie weer te
activeren.</LI>
<LI>muLinux zal de bootdiskette hebben gemount op /startup, unmount het om
het diskettestation vrij te maken.</LI>
<LI>Mount nu de tijdelijke rootpartitie en kopieer hierop de inhoud van de
disks die je aanmaakte in
<A HREF="#sec:preproot">Bereid de installatierootbestanden voor</A>. 
Wees niet gealarmeerd door de foutmeldingen: als je bijvoorbeeld usr vanaf
de diskette naar de tijdelijke rootpartitie kopieert door het intikken van
"cp -dpPr usr/* /tmproot/" dan krijg je de foutmelding "cp: sr: no such
file or directory". Negeer dit, er is niets mis.</LI>
<LI>cd naar de tijdelijke rootpartitie en maakt de lege folders aan
(floppy, proc, root, tag, tmp) en de softlinks boot (verwijzend naar mnt/boot) 
en cdrom (naar var/log/mount).</LI>
<LI>Unmount de tijdelijke rootpartitie, dit synchroniseert de disk.</LI>
<LI>Je kunt de machine nu simpelweg uitzetten.</LI>
</OL>
<H2><A NAME="s5">5. De installatie</A></H2>

<P>In deze sectie worden niet veel details verstrekt over het Slackware
installatieproces. In feite wordt verondersteld dat je er bekend mee bent.
In plaats daarvan ligt de nadruk op die onderdelen waarvoor speciale
aandacht of ongebruikeljke stappen nodig zijn.
<H2>5.1 Boot de machine</H2>

<P>Maak een bootdisk van &eacute;&eacute;n van de images.
Ik raad je aan gebruik te maken van bareapm.i op een laptop en
bare.i op een desktop, tenzij je een parallelle poort IDE device
(pportide.i) hebt. Boot hier de laptop van. Wanneer de boot: prompt 
verschijnt, typ je
"mount root=/dev/hdax" waarbij x de tijdelijke rootpartitie i. Log in
als root. Activeer vervolgens de swappartitie.
<H2>5.2 Floppy/Parport CD-ROM installatie</H2>

<P>In beide gevallen, zou geen extra werk nodig moeten zijn om de media
te benaderen. Start simpelweg setup.
<H2>5.3 Network/PCMCIA installatie</H2>

<P>Slackware heeft hier aanvullende disks met tools voor en instructies
voor hun gebruik groeten je wanneer je inlogt. Gebruik de netwerkdisk op een
desktop-PC met ethernetkaart of een laptop met pocket ethernet adaptor.
Gebruik de PCMCIA disk voor een PCMCIA installatie. Start setup zodra je
netwerkadapter/PCMCIA socket is ge&iuml;dentificeerd.
<H3>PCMCIA installatie op de Aero</H3>

<P>Het Slackware installatieproces voert de PCICIA-drivers uit vanaf de
aanvullende diskette. Omdat de Aero een PCMCIA diskettestation heeft, 
betekent dit dat je het diskettestation niet kunt verwijderen om de
PCMCIA CD-ROM/ethernetkaart in te voegen. De oplossing is simpel: de
PCMCIA setuproutine van Slackware maakt /pcmcia aan en mount hieraan de
aanvullende disk, dus
<P>
<OL>
<LI>Maak de /pcmcia directory zelf aan</LI>
<LI>Mount de aanvullende disk op /mnt. Zorg dat je het type opgeeft als vfat,
als je dit niet doet, dan zal het onjuist worden ge&iuml;dentificeerd als
UMSDOS en zullen lange bestandsnamen niet goed worden gekopieerd.</LI>
<LI>cd /mnt;cp -dpPr ./* /pcmcia/</LI>
<LI>Ontkoppel de diskette.</LI>
<LI>Start pcmcia. Wanneer het script een foutmelding geeft over dat er zich
geen disk in het station bevindt, druk dan simpelweg op Enter: de Card
Service zullen starten. Verbindt je PCMCIA device en druk op Enter.</LI>
<LI>Start setup</LI>
</OL>
<H2>5.4 Set-up</H2>

<P>Het setupprogramma van Slackware is recht-door-zee. Start met de
Keymap sectie en het zal je stap-voor-stap verder brengen.
<H3>AddSwap</H3>

<P>Je moet deze stap uitvoeren, zodat het 't juiste record in fstab kan
plaatsen, maar zorg ervoor dat mkswap niet wordt uitgevoerd, je maakt reeds
gebruik van de partitie.
<H3>Target</H3>

<P>In deze sectie vraagt Slackware welke partities zullen worden gemount als wat
en formatteert ze dan als je dit wilt.
<P>Het veiligste hier is je tijdelijke partitie in het geheel weg te laten
en fstab gewoon later te wijzigen zodra je weet dat je het niet meer
nodig heb voor tijdelijke doeleinden. Als je het als /home gaat hergebruiken
dat is het OK het toe te kennen als /home, uiteraard moet je het nu niet
formatteren! Als je van plan bent het als een deel van de directorystructuur
te gaan hergebruiken waarin bestanden zullen worden geplaatst tijdens de
installatie (zoals bijvoorbeeld /var) dan moet je het in deze stap absoluut
negeren: als de installatie eenmaal is voltooid, dan kun de de bestanden
ernaar verplaatsen.
<H3>Kiezen</H3>

<P>Hier kies je welke algemene categori&euml;n software te installeren. Ik koos
als volgt:
<P>
<UL>
<LI>A - Basis Linux Systeem</LI>
<LI>AP -Niet-X toepassingen</LI>
<LI>F - FAQ's en HOWTO's</LI>
<LI>N - Netwerktools en applicaties</LI>
<LI>Y - BSD spellenverzameling</LI>
</UL>
<P>Ik zou je niet aan willen raden hier nog iets aan toe te voegen, als er iets
is, houd het dan bij A, AP en N. Dat geeft je een core Linux setup waaraan
je naar behoeften toe kunt voegen.
<H3><A NAME="sec:installpackages"></A> Installatie</H3>

<P>Kies de Expert installatiemethode. Hiermee kun je bij het installeren
individuele packages selecteren/verwerpen uit de categori&euml;n die je
kiest in de selectiestap. In 
<A HREF="#sec:appendixA">Appendix A</A> worden
de keuzes die ik maakte doorlopen.
<P>Dit onderdeel duurt ongeveer 3 uur bij een PCMCIA netwerkinstallatie.
Je wordt gevraagd individuele packages te selecteren voor de installatie
van elke categorie, dus je kunt gewoon weglopen terwijl het wordt
doorlopen.
<H3>Configuratie</H3>

<P>Zodra de packages zijn ge&iuml;nstalleerd, wordt je gevraagd om de 
uiteindelijke configuratie voor je machine uit te voeren. Dit bedekt de
onderdelen als netwerken, Lilo, het kiezen van een kernel, enz.
Een aantal punten waar je op moet letten:
<P>
<UL>
<LI>Als je een PCMCIA-installatie uitvoerde, accepteer dan niet het aanbod om
je netwerk met netconfig te configureren. Dit zal je pcmcia-netwerk
ru&iuml;neren. Wacht totdat je het systeem hebt herstart en bewerk dan het
bestand /etc/pcmcia/network.opts</LI>
<LI>Dit is het moment waarop je een kernel zou moeten installeren. Voor een
laptop is de bareapm kernel het beste, voor een desktop simpelweg de
bare kernel.</LI>
</UL>
<H3>Exit</H3>

<P>Het setupproces is klaar, maar jij nog niet.
<B> Herstart je systeem nog niet! </B>
Er is nog een ander te voltooien stap.
<H2><A NAME="sec:prebootconfig"></A> 5.5 Configuratie voor de herstart</H2>

<P>Op een normale machine zou je eenvoudigweg rebooten zodra de installatie
is voltooid.
Als je dat hier doet, dan zul je wellicht 6 of 8 uur moeten wachten tot er een 
loginprompt verschijnt en nog eens een half uur tot je de opdrachtprompt
krijgt. Voor het opnieuw booten moet je de elementen wijzigen of verwijderen
die deze vertraging veroorzaken. Hiervoor moet je configuratiebestanden
bewerken, dus je moet bekend zijn met vi, ed of sed.
<P>In deze fase is je toekomstige rootpartitie nog steeds gemount als /mnt
dus denk eraan dat aan de hier gegeven paden toe te voegen.
<P>
<P>
<DL>
<DT><B>/etc/passwd</B><DD><P>Wijzig dit om de loginshell van root te wijzigen in ash.
ash is echt de enige praktische loginshell voor 4mb RAM. 
</DL>

<DL>
<DT><B>/etc/rc.d/rc.modules</B><DD><P>Plaats een commentaarteken voor de regel
'depmod -a'. Je hoeft de module-afhankelijkheden alleen bij te werken
als je je module-configuratie hebt gewijzigd (zoals bijvoorbeeld bij een
hercompilatie of het toevoegen van nieuwe modules). Op een standaardsysteem
duurt het slechts &eacute;&eacute;n of twee seconden, dus doet het er niet
toe dat het elke keer onnodig wordt uitgevoerd. Op een laptop met 4mb kan
het wel 8 uur duren. Wanneer je de modulesetup wijzigt, kun je het
commentaarteken voor deze regel simpelweg verwijderen en je systeem
herstarten. Als alternatief kun je dit deel van het script zodanig 
herschrijven dat het alleen wordt uitgevoerd, wanneer je achter de bootprompt
een parameter opgeeft. Bijvoorbeeld:
<HR>
<PRE>
if [ "NEWMODULES" == "1" ] ; then 
    depmod -a
fi
  
</PRE>
<HR>
</DL>
<P>
<DL>
<DT><B>/etc/rc.d/rc.inet2</B><DD><P>Dit script start de netwerkservices zoals nfs.
Je hebt ze waarschijnlijk niet nodig en zeker niet bij het opstarten.
Hernoem dit script in iets als RC.inet2, hiermee zal worden voorkomen
dat het tijdens het booten zal worden uitgevoerd en je kunt het handmatig
starten wanneer je het nodig hebt.
</DL>
<P>
<DL>
<DT><B>/etc/rc.d/rc.pcmcia</B><DD><P>Op de Aero zou je dit script ook moeten hernoemen,
anders verlies je het gebruik van je diskettestation bij het opstarten.
Het is tevens waard het voor andere kleine laptops in overweging te nemen,
je kunt het altijd handmatig uitvoeren voordat je een kaart invoegt.
</DL>
<P>Zodra deze wijzigingen zijn aangebracht, ben je zover je systeem te
herstarten.
<H2>5.6 Configuratie na de herstart.</H2>

<P>Als je de wijzigingen aanbevolen in sectie 
<A HREF="#sec:prebootconfig">configuratie voor de herstart</A> hebt aangebracht, dan zal het bootproces slechts
een paar minuten duren, in tegenstelling tot verscheidene uren. Login als
root en controleer of alles goed functioneert.
<H3>Hergebruik de tijdelijke root</H3>

<P>Zodra je er zeker van bent dat de installatie degelijk is, dan kun je de
partitie terugwinnen die je als tijdelijke root gebruikte. Verwijder niet
zomaar de inhoud, herformatteer het bestandssysteem. Denk eraan dat het
programma mke2fs dat werd geleverd bij de mini-Linux verouderd is.
<P>Als je van plan bent deze partitie als /home te gaan gebruiken, denk er dan
aan nog geen gebruikeraccounts aan te maken totdat je deze stap hebt voltooid.
<H3>Andere configuratie fijnafstemmingen</H3>

<P>In een dergelijke kleine ruimte aan RAM, helpt elk klein beetje. Doorloop
de initscripts van SlackWare in de stijl van BSD in /etc/rc.d en
plaats een commentaarteken voor alles wat je niet nodig hebt. Kijk eens
in de Small Memory mini-HOWTO 
<A HREF="http://eddie.cis.uoguelph.ca/~tburgess/">http://eddie.cis.uoguelph.ca/~tburgess/</A> van Todd Burgess voor
meer idee&euml;n.
<H2><A NAME="s6">6. Conclusie</A></H2>

<P>Dat was het dan. Je hebt nu een laptop met kernutility's en 50 tot 70mb
vrij voor wat voor extra's je dan ook nog nodig hebt. 
Maak er geen rommeltje van, want het is veel gemakkelijker om een bestaande
installatie aan te passen op dergelijke volgepropte oude machines
dan het is om helemaal weer overnieuw te beginnen.
<H2><A NAME="sec:appendixA"></A> <A NAME="s7">7. Appendix A: </A></H2>

<P>In deze appendix staat een opsomming van de packages (als die er zijn)
uit elke categorie die kunnen zijn opgenomen in de installatie en geeft
mijn redenen voor het opnemen of achterwege laten ervan. Ik ondernam geen
poging om X te installeren, dus die categorie&euml;n werden genegeerd.
<P>Alhoewel deze appendix in het bijzonder refereert naar de Slackware distributie
kan het worden gebruikt als een leidraad voor een van de andere grote
distributies.
<H2>7.1 A - Basis Linux systeem</H2>

<P>De meeste packages in deze categorie zijn essentieel, zelfs die niet zijn
opgesomd als vereist door het setupprogramma van Slackware.
Daarom heb ik die packages vermeld die redelijkerwijs konden worden 
weggelaten in plaats van alle niet-verplichte packages die ik installeerde.
<H3>Packages overwogen om weg te laten:</H3>

<P>
<DL>
<DT><B>kernels (ide, scsi etc.)</B><DD><P>Het is niet nodig hier iets van te installeren,
je krijg aan het einde van het installatieproces de kans een kernel te
selecteren.
</DL>
<P>
<DL>
<DT><B>aoutlibs</B><DD><P>Dit is alleen nodig als je van plan bent uitvoerbare
bestanden te draaien die zijn gecompileerd in het oude a.out formaat.
Het achterwege laten bespaart een hoop ruimte. Achterwege gelaten.
</DL>
<P>
<DL>
<DT><B>bash1</B><DD><P>Bash2 (simpelweg bash genaamd in de lijst met packages onder
Slackware ) is nodig voor de configuratiescripts van Slackware, maar er
zijn heel veel scripts waarvoor bash1 nodig is. Ik nam het op.
</DL>
<P>
<P>
<DL>
<DT><B>getty</B><DD><P>agetty is de standaardgetty van Slackware, dit package bevat
getty en uugetty als alternatieven. Neem het alleen op als je de extra
functionaliteit nodig hebt. Achterwege gelaten.
</DL>
<P>
<DL>
<DT><B>gpm</B><DD><P>Persoonlijk vind ik dit onder console erg handig (en de trackball
van Aero is erg handig), maar het is niet essentieel. Opgenomen.
</DL>
<P>
<DL>
<DT><B>icbs2</B><DD><P>Niet nodig. Achterwege gelaten.
</DL>

<DL>
<DT><B>isapnp</B><DD><P>Niet nodig hier. Achterwege gelaten.
</DL>
<P>
<DL>
<DT><B>loadlin</B><DD><P>Niet nodig voor de hier beschreven setup, tenzij je oude
laptop wat eigenaardigheden heeft waardoor een DOS-driver is vereist om
wat van zijn devices te initialiseren. Achterwege gelaten.
</DL>
<P>
<DL>
<DT><B>lpr</B><DD><P>Je zou kunnen beargumenteren dat je de afdrukken op een dichtbijzijnde
desktop maakt, maar ik vind het altijd handig om afdrukmogelijkheden op
een laptop te hebben. Opgenomen.
</DL>

<DL>
<DT><B>minicom</B><DD><P>Geen verplichte opname, maar ik wil de laptop een inbelverbinding laten maken. Erg handig. Opgenomen.
</DL>
<P>
<DL>
<DT><B>pciutils</B><DD><P>Niet nodig op deze oude laptops. Achterwege gelaten.
</DL>
<P>
<DL>
<DT><B>quota</B><DD><P>Niet noodzakelijk, maar het kan worden gebruikt om limieten 
in te stellen die je beletten dat de beperkte beschikbare ruimte op
deze laptops overstroomt. Opgenomen.
</DL>
<P>
<DL>
<DT><B>tcsh</B><DD><P>Ik raad het gebruik van ash aan als je loginshell. Neem het alleen
op als je het nodig hebt voor scripts. Achterwege gelaten.
</DL>
<P>
<DL>
<DT><B>umsprogs</B><DD><P>Je kunt dit weglaten en nog steeds UMSDOS diskettes kunnen
benaderen. Achterwege gelaten.
</DL>

<DL>
<DT><B>scsimods</B><DD><P>Heeft geen nut op deze laptops. Achterwege gelaten.
</DL>
  
<P>
<DL>
<DT><B>sysklogd</B><DD><P>Dit kan storen met apmd, maar het voorziet in essenti&euml;le
informatie. Opgenomen.
</DL>
<H3>Ge&iuml;nstalleerde packages:</H3>

<P>aaa_base, bash, bash1, bin, bzip2, cpio, cxxlibs, devs, e2fsprog, elflibs,
elvis, etc, fileutils, find, floppy, fsmods, glibcso, gpm, grep, gzip, hdsetup,
infozip, kbd, ldso, less, lilo, man, modules, modutils, pcmcia, sh_utils, shadow,
sudo, sysklogd, sysvinit, tar, txtutils, util, zoneinfo
<P>Totale omvang: 33.4
<H2>7.2 AP - Niet-X applicaties</H2>

<P>Geen van deze packages zijn strict genomen essentieel - alhoewel ash
echt nodig is voor een zinvolle werking in 4mb. Ze alleen achterwege
laten kan je de benodigde ruimte besparen om je favoriete applicatie
op te nemen. Ik koos voor een minimale set tools waar ik niet graag
zonder doe.
<H3>Packages overwogen om op te nemen:</H3>

<P>
<DL>
<DT><B>apsfilter</B><DD><P>Het heeft niet veel zin de mogelijkheid tot afdrukken te
hebben als je slechts tekstbestanden kunt afdrukken.
Opgenomen.
</DL>
<P>
<DL>
<DT><B>ash</B><DD><P>Dit is <EM>de</EM> shell voor computers met weinig geheugen, slechts
60k in beslag nemend. Gebruik het als de standaardloginshell tenzij je
het prettig vindt om elke keer weer 10 seconden te moeten wachten op de
opdrachtprompt. Opgenomen.
</DL>
<P>
<DL>
<DT><B>editors (jed, joe jove vim)</B><DD><P>elvis is de standaardeditor voor Slackware 
en een vereist deel van de installatie. Als je net als ik een fan bent van
vi dan is dat alles wat je nodig hebt: de installatie van vim zou een
verspillende duplicatie zijn gegeven de ruimtebeperkingen. Als je vi niet
uit kunt staan en eerder een editor in de stijl van DOS nodig hebt, dan is
joe een kleine editor.
Emacs fans met enige zelfdiscipline zouden jed of jove kunnen overwegen
in plaats van het enorme complete beest. Achterwege gelaten.
</DL>
<P>
<DL>
<DT><B>enscript</B><DD><P>Als je apsfilter reeds hebt, dan heb je deze niet echt nodig.
Achterwege gelaten.
</DL>
<P>
<DL>
<DT><B>ghostscript</B><DD><P>Met opname van de fonts komt dit ongeveer uit op 7.5mb. 
Een om achterwege te laten tot na de kerninstallatie, overweeg dan nog of
je het nodig hebt. Achterwege gelaten.
</DL>
<P>
<DL>
<DT><B>groff</B><DD><P>Nodig voor de manpages. Opgenomen.
</DL>

<DL>
<DT><B>ispell</B><DD><P>Niet essentieel, maar erg handig voor de overenthousiaste
typist(e).  Opgenomen.
</DL>
<P>
<DL>
<DT><B>manpages</B><DD><P>Opgenomen.
</DL>
<P>
<DL>
<DT><B>mc</B><DD><P>Slackware biedt een lichtgewicht compilatie aan van mc, maar
ik ben gelukkiger achter de opdrachtprompt. Achterwege gelaten.
</DL>
<P>
<DL>
<DT><B>quota</B><DD><P>Niet nodig op wat geen multi-user machine is, maar je kunt net
als ik het handig vinden om jezelf te beletten te vergeten de weinig ruimte
die je hebt te verspillen. Opgenomen.
</DL>
<P>
<DL>
<DT><B>rpm</B><DD><P>Laat dit voor wat het is. Als je een rpm hebt die je graag op wilt
nemen, gebruik dan rpm2tgz op een desktop machine om het om te zetten in
een tgz package. Dan kun je de standaard Slackware installatietools
gebruiken. Achterwege gelaten.
</DL>
<P>
<DL>
<DT><B>sc</B><DD><P>Een bruikbare kleine spreadsheet zeer klein verpakt. Opgenomen.
</DL>
<P>
<DL>
<DT><B>sudo</B><DD><P>Niet essentieel, maar ik vind het hier erg handig: het is een
volgepropte omgeving en een lastige herinstallatie als je er een rommel
van maakt, sudo helpt bij het aanmaken van gebruikersprofielen met de
kracht om dingen te doen die je nodig hebt zonder onzorgvuldig je disk
om zeep te helpen. Opgenomen.
</DL>
<P>
<DL>
<DT><B>texinfo</B><DD><P>Info documentatie. Opgenomen.
</DL>
<P>
<DL>
<DT><B>zsh</B><DD><P>Laat dit weg, tenzij je eraan bent verslaafd of scripts hebt die
het moeten gebruiken. Achterwege gelaten.
</DL>
<H3>Ge&iuml;nstalleerde packages:</H3>

<P>apsfilter,ash, diff, groff, ispell, manpages, quota, sc, sudo, texinfo
<P>Totale omvang: 8.1 mb
<H2>7.3 D - Ontwikkeltools</H2>

<P>Je zou C of C++ in deze ruimte kunnen plaatsen, maar het glibc library
package is te groot, dus zou het nodig zijn om het een en ander in te krimpen.
Doe als eerste de hoofdinstallatie en probeer het dan.
<P>Er is ruimte voor Perl en Python.
<H3>Ge&iuml;nstalleerde packages:</H3>

<P>Geen
<H2>7.4 E - Emacs</H2>

<P>Ik maak geen gebruik van Emacs waardoor ik mezelf wat ruimte bespaarde.
Als je aan de andere kant wel een fan bent van Emacs dan gebruik je het
waarschijnlijk voor e-mail, news en coderen, dus zul je wat van die
ruimte terug claimen door andere packages weg te laten.
<P>Als je gebruik wilt maken van Emacs, dan kan het een idee zijn om dit
tijdens de core installatie weg te laten. Zodra de laptop draait, kun je
naar wens proberen erop te pasen wat je wilt/nodig.
<H3>Ge&iuml;nstalleerde packages:</H3>

<P>Geen.
<H2>7.5 F - FAQ's en HOWTO's</H2>

<P>Als je alles al weet, dan heb je deze niet nodig. Ik installeerde er
erg veel van.
<H3>Ge&iuml;nstalleerde packages:</H3>

<P>howto, manyfaqs, mini
<P>Totale omvang: 12.4 mb
<H2>7.6 K - Kernel Source</H2>

<P>Je kunt het installeren. Als je als enige de broncode wilt lezen, ga dan
je gang.
<H3>Ge&iuml;nstalleerde packages:</H3>

<P>Geen
<H2>7.7 N - Netwerktools en applicaties</H2>

<P>Deze packages werden geselecteerd om in de core netwerktools, inbelmogelijkheden
, e-mail, web en news te voorzien.
<H3>Ge&iuml;nstalleerde packages:</H3>

<P>dip, elm, fetchmail, mailx, lynx, netmods, netpipes, ppp, procmail, trn,
tcpip1, tcpip2, uucp, wget
<P>Totale omvang: 15.1 mb
<H2>7.8 Tetex</H2>

<P>Een andere set die ternauwernood zal passen. Ik weet niet hoe het
in de beschikbare ruimte zou draaien.
<H3>Ge&iuml;nstalleerde packages:</H3>

<P>Geen
<H2>7.9 Y - BSD spellenverzameling</H2>

<P>Aan een aantal hiervan ben ik verslaafd. 
Als ik die laatste 5mb echt nodig heb, dan kunnen deze weg.
<H3>Ge&iuml;nstalleerde packages:</H3>

<P>bsdgames 
<P>Totale omvang: 5.4 mb
<H2>7.10 Eindresultaat</H2>

<P>In totaal namen de ge&iuml;nstalleerde packages ongeveer 75mb diskruimte
in beslag waarvan 19.5mb op de rootpartitie en 55.5 in /usr. Op de Aero
bleef daardoor in /usr 39mb over en 74mb op de T1910.
<H2><A NAME="sec:resourcesrelevant"></A> <A NAME="s8">8. Appendix B: Bronnen relevant voor deze HOWTO</A></H2>

<P>
<DL>
<DT><B>Linux Laptop HOWTO</B><DD><P>
<A HREF="http://www.snafu.de/~wehe/Laptop-HOWTO.html">http://www.snafu.de/~wehe/Laptop-HOWTO.html</A></DL>

<DL>
<DT><B>Small Memory mini-HOWTO</B><DD><P>
<A HREF=" http://eddie.cis.uoguelph.ca/~tburgess/"> http://eddie.cis.uoguelph.ca/~tburgess/</A></DL>

<DL>
<DT><B>Linux on Laptops</B><DD><P>
<A HREF="http://www.cs.utexas.edu/users/kharker/linux-laptop/">http://www.cs.utexas.edu/users/kharker/linux-laptop/</A>
HOWTO's en installatie FAQ's voor een breed bereik aan
computers.
</DL>

<DL>
<DT><B>Linux T1910 FAQ</B><DD><P>
<A HREF="http://members.tripod.com/~Cyberpvnk/linux.htm">http://members.tripod.com/~Cyberpvnk/linux.htm</A></DL>
<P>
<DL>
<DT><B>Linux Contura Aero FAQ</B><DD><P>
<A HREF="http://domen.uninett.no/~hta/linux/aero-faq.html">http://domen.uninett.no/~hta/linux/aero-faq.html</A></DL>
<P>
<DL>
<DT><B>Contura Aero FAQ</B><DD><P>
<A HREF=" http://www.reed.edu/~pwilk/aero/aero.faq"> http://www.reed.edu/~pwilk/aero/aero.faq</A>
Uitgebreide FAQ over alle aspecten van de Contura
Aero samengesteld door de moderators van de Aero mailing list. 
Prima Linux-sectie.
</DL>
</BODY>
</HTML>
