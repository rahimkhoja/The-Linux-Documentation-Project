<HTML
><HEAD
><TITLE
>DHCP mini-HOWTO</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"></HEAD
><BODY
CLASS="ARTICLE"
BACKGROUND="../IMAGES/back.gif"
LINK="#000099"
><DIV
CLASS="ARTICLE"
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="TITLE"
><A
NAME="AEN2"
></A
>DHCP mini-HOWTO</H1
><DIV
CLASS="AUTHORGROUP"
><A
NAME="AEN4"
></A
><H3
CLASS="AUTHOR"
><A
NAME="AEN5"
>Vladimir Vuksan</A
></H3
><DIV
CLASS="AFFILIATION"
><DIV
CLASS="ADDRESS"
><P
CLASS="ADDRESS"
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:vuksan@veus.hr"
>vuksan@veus.hr</A
>&#62;</TT
><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P
></DIV
></DIV
><H3
CLASS="AUTHOR"
><A
NAME="AEN11"
>Vertaald door: Ellen Bokhorst</A
></H3
><DIV
CLASS="AFFILIATION"
><DIV
CLASS="ADDRESS"
><P
CLASS="ADDRESS"
><TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:bokkie@nl.linux.org"
>bokkie@nl.linux.org</A
>&#62;</TT
></P
></DIV
></DIV
></DIV
><DIV
CLASS="REVHISTORY"
><TABLE
WIDTH="100%"
BORDER="0"
><TR
><TH
ALIGN="LEFT"
VALIGN="TOP"
COLSPAN="3"
><B
>Wijzigingen</B
></TH
></TR
><TR
><TD
ALIGN="LEFT"
>Herziening v4.12</TD
><TD
ALIGN="LEFT"
>22 oktober 2000</TD
><TD
ALIGN="LEFT"
>Herzien door: vv</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
></TD
></TR
></TABLE
></DIV
><DIV
><DIV
CLASS="ABSTRACT"
><A
NAME="AEN22"
></A
><P
></P
><P
>      In dit document wordt getracht basisvragen te beantwoorden over hoe
      je Linux box op te zetten dat het dient als een DHCP server of een
      DHCP client.
      </P
><P
></P
></DIV
></DIV
><HR></DIV
><DIV
CLASS="TOC"
><DL
><DT
><B
>Inhoudsopgave</B
></DT
><DT
><A
HREF="#AEN24"
>Introductie</A
></DT
><DT
><A
HREF="#AEN76"
>DHCP protocol</A
></DT
><DT
><A
HREF="#AEN81"
>Client Setup</A
></DT
><DT
><A
HREF="#AEN376"
>DHCP Server Setup</A
></DT
></DL
></DIV
><DIV
CLASS="SECT1"
><H2
CLASS="SECT1"
><A
NAME="AEN24"
></A
>Introductie</H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="AEN26"
></A
>Standaard Disclaimer</H3
><P
>Voor de inhoud van dit document kan geen aansprakelijkheid worden aanvaard.
Gebruik de concepten, voorbeelden en andere inhoud op eigen risico.
Aangezien dit een nieuwe editie van dit document is, kunnen er fouten en
onzurgvuldigheden in staan, die schade aan je systeem zouden kunnen veroorzaken.
Vervolg met de nodige voorzichtigheid, en alhoewel het zeer onwaarschijnlijk
is, neem ik er geen enkele verantwoordelijkheid voor.</P
><P
>Onthoud ook dat dit <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>GEEN</I
></SPAN
> offici&euml;e informatie is.
Veel van de inhoud van dit document is gebaseerd op veronderstellingen,
welke voor mensen schijnen te werken. Gebruik de informatie op eigen risico.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN31"
></A
>Nieuwe versies van dit document</H3
><P
>Nieuwe versies van dit document zijn beschikbaar vanaf</P
><P
><A
HREF="http://www.oswg.org/oswg-nightly/DHCP.html"
TARGET="_top"
>http://www.oswg.org/oswg-nightly/DHCP.html</A
></P
><P
>De volgende vertalingen van de DHCP mini-HOWTO zijn beschikbaar:</P
><P
></P
><UL
><LI
><P
>Chinees - <A
HREF="http://www.linux.org.tw/CLDP/mini/DHCP.html"
TARGET="_top"
>http://www.linux.org.tw/CLDP/mini/DHCP.html</A
></P
></LI
><LI
><P
>Japans - <A
HREF="http://www.linux.or.jp/JF/JFdocs/DHCP.html"
TARGET="_top"
>http://www.linux.or.jp/JF/JFdocs/DHCP.html</A
></P
></LI
><LI
><P
>Spaans - <A
HREF="ftp://cuates.pue.upaep.mx/pub/linux/LuCAS/DHCP-mini-Como/"
TARGET="_top"
>ftp://cuates.pue.upaep.mx/pub/linux/LuCAS/DHCP-mini-Como/</A
></P
></LI
></UL
><P
>Het is hierbij alle individuen die het document willen vertalen in hun
moedertaal toegestaan dit te doen. Ik vraag je alleen een link naar dit
document op te nemen en me de URL te geven van je vertaling, zodat ik
er een verwijzing naar op kan nemen.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN48"
></A
>Feedback</H3
><P
>Feedback is voor dit document zeer zeker welkom.
Zonder jullie bijdragen en inbreng, zou dit document niet bestaan.
Dus stuur alsjeblieft jullie aanvullingen, opmerkingen en kritiek op naar
<TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:vuksan-feedback@veus.hr"
>vuksan-feedback@veus.hr</A
>&#62;</TT
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN52"
></A
>Medewerkers</H3
><P
>Dit document is een aangepaste versie van het oorspronkelijke document
geschreven door Paul Makeev.</P
><P
>De volgende mensen hebben aan deze mini-HOWTO een bijdrage geleverd:</P
><P
></P
><UL
><LI
><P
>Heiko Schlittermann</P
></LI
><LI
><P
>Jonathan Smith</P
></LI
><LI
><P
>Dan Khabaza</P
></LI
><LI
><P
>Hal Sadofsky</P
></LI
><LI
><P
>Henrik Stoerner</P
></LI
><LI
><P
>Paul Rossington</P
></LI
><LI
><P
>ontelbare anderen</P
></LI
></UL
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN71"
></A
>Copyright Informatie</H3
><P
>Dit document is auteursrechtelijk beschermd (c) 1998 Vladimir Vuksan en
gedistribueerd onder de voorwaarden van de OpenContent License (OPL). De
volledige tekst van de licentie is te vinden op</P
><P
> 
<A
HREF="http://www.opencontent.org/opl.shtml"
TARGET="_top"
>http://www.opencontent.org/opl.shtml</A
></P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="AEN76"
></A
>DHCP protocol</H2
><P
>DHCP staat voor het Dynamic Host Configuration Protocol. Het wordt gebruikt
om vitale netwerkparameters van hosts (actieve clients) met de hulp van een
server te besturen.  DHCP is backward compatibel met 
BOOTP. Zie voor meer informatie RFC 2131 (oude RFC 1541) en anderen. 
(Zie de sectie Internetbronnen aan het einde van dit document). Je kunt 
ook het document
<A
HREF="http://web.syr.edu/~jmwobus/comfaqs/dhcp.faq.html"
TARGET="_top"
>http://web.syr.edu/~jmwobus/comfaqs/dhcp.faq.html</A
> doorlezen.</P
><P
>In deze mini-HOWTO worden zowel de DHCP _SERVER_ daemon als de DHCP
_CLIENT_ daemon behandeld. De meeste mensen hebben de client daemon nodig
die op werkstations wordt gebruikt om netwerkinformatie van een remote server
te verkrijgen. De serverdaemon wordt door systeembeheerders gebruikt om
netwerkinformatie naar clients te distribueren, dus als je een reguliere
gebruiker bent, dan heb je de _CLIENT_ daemon nodig.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="AEN81"
></A
>Client Setup</H2
><P
>Thans bestaan er drie veschillende DHCP clientprogramma's voor Linux,
dhcpcd, pump en dhclient. Deze mini-HOWTO gaat primair over dhcpcd.</P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN84"
></A
>Downloaden van de client daemon (dhcpcd)</H3
><P
>Afhankelijk van je distributie, moet je wellicht de DHCP clientdaemon
downloaden. Als je het vanuit de broncode wilt compileren, dan heb je
het dhcpcd package nodig waarvan de huidige versie, versie 1.3.18 is.
Het wordt onderhouden door Sergei Viznyuk <TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:sergei@phystech.com"
>sergei@phystech.com</A
>&#62;</TT
> en
tegenwoordig wordt het bij de meeste distributies als een binair package
meegeleverd.</P
><P
>De broncode van dhcpcd kan worden gedownload vanaf de volgende lokaties:</P
><P
></P
><UL
><LI
><P
><A
HREF="ftp://ftp.phystech.com/pub/"
TARGET="_top"
>ftp://ftp.phystech.com/pub/</A
> (Primary site)</P
></LI
><LI
><P
><A
HREF="http://www.cps.msu.edu/~dunham/out/"
TARGET="_top"
>http://www.cps.msu.edu/~dunham/out/</A
></P
></LI
></UL
><P
>Volg dan de instructies hieronder. Ze zouden hetzelfde moeten zijn:</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="SLACKWARE"
></A
>Slackware</H3
><P
>Je kunt de laatste kopie downloaden van DHCPcd vanaf elke Metalab mirror
of vanaf:</P
><P
></P
><UL
><LI
><P
><A
HREF="ftp://metalab.unc.edu/pub/Linux/system/network/daemons"
TARGET="_top"
>ftp://metalab.unc.edu/pub/Linux/system/network/daemons</A
></P
></LI
><LI
><P
><A
HREF="ftp://ftp.phystech.com/pub/"
TARGET="_top"
>ftp://ftp.phystech.com/pub/</A
> (Primary site)</P
></LI
></UL
><P
>Download de laatste versie van <TT
CLASS="FILENAME"
>dhcpcd.tar.gz</TT
>. </P
><P
></P
><UL
><LI
><P
>Pak het uit</P
><P
><B
CLASS="COMMAND"
>tar -zxvf dhcpcd-1.3.18pl1.tar.gz</B
></P
></LI
><LI
><P
>ga naar die directory en maak dhcpcd:</P
><P
><B
CLASS="COMMAND"
>cd dhcpcd-1.3.18pl1</B
></P
><P
><B
CLASS="COMMAND"
>make</B
></P
></LI
><LI
><P
>Installeer het (je moet de volgende opdracht als root uitvoeren)</P
><P
><B
CLASS="COMMAND"
>make install</B
></P
></LI
></UL
><P
>Hiermee zal de directory /etc/dhcpc worden aangemaakt waar DHCPcd de DHCP
informatie zal opslaan en het dhcpcd bestand zal worden gekopieerd naar 
/usr/sbin.</P
><P
>Typ om het systeem te initialiseren met DHCP tijdens het booten:</P
><P
><B
CLASS="COMMAND"
>cd /etc/rc.d</B
></P
><P
><B
CLASS="COMMAND"
>mv rc.inet1 rc.inet1.OLD</B
></P
><P
>Hierdoor zal het oude netwerkinitialisatiescript worden hernoemd in
<TT
CLASS="FILENAME"
>rc.inet1.OLD</TT
>.
Je moet nu het nieuwe <TT
CLASS="FILENAME"
>rc.inet1</TT
> script aanmaken.
De volgende code is alles wat je nodig hebt:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>#!/bin/sh
#
# rc.inet1      Dit shellscript boot het basis INET systeem.

HOSTNAME=`cat /etc/HOSTNAME` #Dit is waarschijnlijk niet nodig, maar ik
                             # laat het voor wat het is

# Koppel het loopback device aan.
/sbin/ifconfig lo 127.0.0.1
/sbin/route add -net 127.0.0.0 netmask 255.0.0.0 lo

# ALS JE EEN ETHERNET CONNECTIE HEBT, gebruik je de regels hieronder om de
# eth0 interface te configureren. Gebruik je alleen loopback of SLIP, voeg
# de rest van de regels dan niet in, in dit bestand.

/usr/sbin/dhcpcd</PRE
></TD
></TR
></TABLE
><P
>Sla het op en reboot je computer.</P
><P
>Ga naar de <A
HREF="#NAMESERVER"
>laatste stap</A
> zodra je klaar bent.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="REDHAT6"
></A
>RedHat 6.x en Mandrake 6.x</H3
><P
>De configuratie van DHCPcd onder RedHat 6.0+ is echt makkelijk. Je hoeft
alleen het Control Panel op te starten door te typen 
<B
CLASS="COMMAND"
>control-panel</B
>.</P
><P
></P
><UL
><LI
><P
>Selecteer "Network Configuration"</P
></LI
><LI
><P
>Klik op Interfaces</P
></LI
><LI
><P
>Klik op Add</P
></LI
><LI
><P
>Selecteer Ethernet</P
></LI
><LI
><P
>In de Edit Ethernet/Bus Interface selecteer "Activate
interface at boot time" als ook "DHCP" en "Interface
configuration protocol"</P
></LI
></UL
><P
>In RedHat 6.x heeft RedHat als standaard en DHCP client opgenomen genaamd
pump in plaats van de bovengenoemde dhcpcd. Op de CD-ROM staat wel een 
dhcpcd RPM, dus probeer dhcpcd als je geen gelukt hebt met pump.
Nadat je dhcpcd hebt ge&iuml;nstalleerd
(b.v. <B
CLASS="COMMAND"
>rpm -i dhcpcd-1.3.17pl2-1.i386.rpm</B
>)  dan moet je
wat  <A
HREF="#LINUXPPC-RH6"
>wijzigingen</A
> aanbrengen.</P
><P
>Aanvullende notities van Alexander Stevenson
<TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:alexander.stevenson@home.com"
>alexander.stevenson@home.com</A
>&#62;</TT
>:</P
><P
>Ik had geen geluk met DHCPcd. Wat uiteindelijk werkte was "pump", wat wordt
meegeleverd met Linux Mandrake 6.0 (en dus veronderstel ik dat het ook
is opgenomen in RedHat). De opdracht die ik gebruikte was:</P
><P
><B
CLASS="COMMAND"
>pump -i eth0 -h hostname</B
></P
><P
>Het deed er niet toe wat "hostname" was, maar zonder dat, reageerde de
server niet.</P
><P
>Ik wijzigde toen de regel in mijn <TT
CLASS="FILENAME"
>/sbin/ifup</TT
> script om de wijziging te
weerspiegelen; de standaardversie heeft geen -h switch, en dus werkte
niet voor mijn.</P
><P
>Probeer "<B
CLASS="COMMAND"
>-h hostname</B
> toe te voegen aan de pump regel in het
<TT
CLASS="FILENAME"
>/sbin/ifup</TT
> script als je gebruik maakt van linuxconf
en het na het instellen van de adapter op "DHCP" nog steeds niet werkt.
Mijn script ziet er nu ongeveer zo uit:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>...
if [ -n "$PUMP" ]; then
    echo -n "Vaststellen van IP informatie voor $DEVICE..."
    if /sbin/pump -i $DEVICE -h hostname; then
        echo " klaar."
    else
        echo " mislukt."
        exit 1
    fi
else ...</PRE
></TD
></TR
></TABLE
><P
>Een andere elegantere manier om het hostname veld toe te voegen wordt
geleverd door Aad van der Klaauw:</P
><P
>Thans ben ik thuis een gateway systeem aan het configureren, 
nodig om het MAC adres in te stellen en de '-h hostname' workaround te
gebruiken.
Dus besloot ik het script *niet* te wijzigen, maar het configure bestand
te gebruiken.
In mijn /etc/sysconfig/network-scripts/ifcfg-eth0 heb ik het volgende
toegevoegd:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>DEVICE="eth0"
MACADDR="00:11:22:33:44:55"
DHCP_HOSTNAME="trigger_for_terayon"</PRE
></TD
></TR
></TABLE
><P
> het is imho een "zuiverder" manier.</P
><P
>Dat is het. Reboot je machine of tik op de opdrachtregel in 
<B
CLASS="COMMAND"
>/sbin/ifup eth0</B
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN173"
></A
>RedHat 5.x</H3
><P
>De configuratie van DHCPcd onder RedHat 5.0+ is echt makkelijk. Je hoeft
alleen het Control Panel op te starten door te typen
<B
CLASS="COMMAND"
>control-panel</B
>.</P
><P
></P
><UL
><LI
><P
>Selecteer "Network Configuration"</P
></LI
><LI
><P
>Klik op Interfaces</P
></LI
><LI
><P
>Klik Add</P
></LI
><LI
><P
>Selecteer Ethernet</P
></LI
><LI
><P
>In de Edit Ethernet/Bus Interface selecteer je "Activate
interface at boot time" als ook "DHCP" en "Interface
configuration protocol"</P
></LI
></UL
><P
>Ga naar de <A
HREF="#NAMESERVER"
>laatste stap</A
> zodra je klaar bent. </P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN190"
></A
>RedHat 4.x en Caldera OpenLinux 1.1/1.2</H3
><P
>DHCPcd is opgenomen in de standaard RedHat distributie als een RPM en je
kunt het vinden op de CD-ROM van je distributie in de directory RPMS of
je kunt het downloaden vanaf:</P
><P
><A
HREF="ftp://ftp.redhat.com/pub/redhat/redhat-4.2/i386/RedHat/RPMS/dhcpcd-0.6-2.i386.rpm"
TARGET="_top"
>ftp://ftp.redhat.com/pub/redhat/redhat-4.2/i386/RedHat/RPMS/dhcpcd-0.6-2.i386.rpm</A
></P
><P
>Installeer het met <B
CLASS="COMMAND"
>rpm -i dhcpcd-0.6-2.i386.rpm</B
>.</P
><P
>Als alternatief kun je je eigen versie compileren door de stappen te volgen
uiteengezet in de
<A
HREF="#SLACKWARE"
><I
>Slackware</I
></A
>.</P
><P
>De volgende informatie werd geleverd door nothing
<TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:nothing@cc.gatech.edu"
>nothing@cc.gatech.edu</A
>&#62;</TT
>.</P
><A
NAME="AEN201"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>Mijn statische ip en naam verwijderd uit
<TT
CLASS="FILENAME"
>/etc/resolv.conf</TT
>. Ik liet echter de search regel
staan en mijn twee nameserver regels (om een of andere reden maakt
mijn dhcpcd nooit een <TT
CLASS="FILENAME"
>/etc/dhcpc/resolv.conf</TT
> aan, 
dus moet ik een statisch <TT
CLASS="FILENAME"
>/etc/resolv.conf</TT
> gebruiken).</P
><P
>In <TT
CLASS="FILENAME"
>/etc/sysconfig/network</TT
> verwijderde ik de HOSTNAME
en GATEWAY entry's. Ik liet de andere entry's zoals ze waren (NETWORKING,
DOMAINNAME, GATEWAYDEV).</P
><P
>In <TT
CLASS="FILENAME"
>/etc/sysconfig/network-scripts/ifcfg-eth0</TT
> verwijderde
ik de IPADDR, NETMASK, NETWORK, en BROADCAST entry's. Ik liet
DEVICE en ONBOOT zoals ze waren. Ik wijzigde de BOOTPROTO regel in
BOOTPROTO=dhcp.</P
><P
>Sla het bestand op. Reboot je computer.</P
></BLOCKQUOTE
><P
>Ga wanneer je klaar bent naar de <A
HREF="#NAMESERVER"
>laatste stap</A
>. </P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="DEBIAN"
></A
>Debian</H3
><P
>Er bestaat een deb package van DHCPcd (zorgt dat het begint met dhcpcd) op:</P
><P
><A
HREF="http://ftp.debian.org/debian/dists/slink/main/binary-i386/net/"
TARGET="_top"
>http://ftp.debian.org/debian/dists/slink/main/binary-i386/net/</A
></P
><P
>Of volg de <A
HREF="#SLACKWARE"
><I
>Slackware</I
></A
> 
installatie instructies op.</P
><P
>Pak het deb package uit door in te tikken: <B
CLASS="COMMAND"
>dpkg -i /where/ever/your/debian/packages/are/dhcpcd*deb</B
>.</P
><P
>Het schijnt dat het configureren van DHCPcd niet nodig is, omdat:</P
><A
NAME="AEN223"
></A
><TABLE
BORDER="0"
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
CLASS="BLOCKQUOTE"
><TR
><TD
WIDTH="10%"
VALIGN="TOP"
>&nbsp;</TD
><TD
WIDTH="80%"
VALIGN="TOP"
><P
>Het dhcpcd package installeert zijn opstartscript zoals gewoonlijk voor
debian packages in
<TT
CLASS="FILENAME"
>/etc/init.d/<TT
CLASS="REPLACEABLE"
><I
>package_name</I
></TT
></TT
>,
hier als <TT
CLASS="FILENAME"
>/etc/init.d/dhcpcd</TT
>,
en linkt dit naar de diverse <TT
CLASS="FILENAME"
>/etc/rc?.d/</TT
> directory's.  </P
></TD
><TD
WIDTH="10%"
VALIGN="TOP"
>&nbsp;</TD
></TR
><TR
><TD
COLSPAN="2"
ALIGN="RIGHT"
VALIGN="TOP"
>--<SPAN
CLASS="ATTRIBUTION"
>From: Heiko Schlittermann
<TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:heiko@os.inf.tu-dresden.de"
>heiko@os.inf.tu-dresden.de</A
>&#62;</TT
></SPAN
></TD
><TD
WIDTH="10%"
>&nbsp;</TD
></TR
></TABLE
><P
>De inhoud van de <TT
CLASS="FILENAME"
>/etc/rc?.d/</TT
> dirs 
wordt dan tijdens het booten uitgevoerd.</P
><P
>Als je het systeem na de installatie niet opnieuw opstart, dan zou je
kunnen overwegen de daemon handmatig te starten:
<B
CLASS="COMMAND"
>/etc/init.d/dhcpcd start</B
>.</P
><P
>Ga naar de <A
HREF="#NAMESERVER"
>laatste stap</A
> zodra je klaar bent. </P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN237"
></A
>LinuxPPC en MkLinux</H3
><P
>De volgende sectie is geschreven door R. Shapiro </P
><P
>Sinds de "1999" (R5) release, is Linuxppc nu bijna volledig compatibel met
Redhat 6, met &eacute;&eacute;n voorbehoud (zie hieronder). Over het algemeen
zijn de instructies exact hetzelfde als voor de huidige release van
<A
HREF="#REDHAT6"
><I
>RedHat 6.x en Mandrake 6.x</I
></A
>.</P
><P
>Een probleem dat overblijft is dat Redhat 6 standaard gebruik maakt van 
de 'pump' client voor dhcp, en 'pump' werkt niet betrouwbaar onder Linuxppc.
<A
NAME="LINUXPPC-RH6"
></A
>Om dit te omzeilen zou je de laatste dhcpcd van
Sergei Viznyuk moeten downloaden, en dan 
<TT
CLASS="FILENAME"
>/sbin/ifup</TT
> moeten bewerken dat het
<B
CLASS="COMMAND"
>dhcpcd</B
> gebruikt in plaats van <B
CLASS="COMMAND"
>pump</B
>. </P
><P
>Wijzig</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>if [ "$BOOTPROTO" = bootp -o "$BOOTPROTO" = dhcp ]; then
     PUMP=true
 fi

 if [ -n "$PUMP" ]; then</PRE
></TD
></TR
></TABLE
><P
>in</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
> if [  "$BOOTPROTO" = bootp ]; then
       echo " klaar."
     else
       echo " mislukt."
       exit 1
     fi
 elif [ "$BOOTPROTO" = dhcp ]; then
     echo -n "IP informatie vaststellen voor $DEVICE..."
     if /sbin/dhcpcd -d $DEVICE ; then
       if [ -f /etc/dhcpc/dhcpcd-${DEVICE}.exe ]; then
           /etc/dhcpc/dhcpcd-${DEVICE}.exe
       fi</PRE
></TD
></TR
></TABLE
><P
>en corresponderende wijzigingen voor <B
CLASS="COMMAND"
>ifdown</B
>. Wijzig</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>if [ "$BOOTPROTO" = bootp -o "$BOOTPROTO" = dhcp ]; then
....
fi</PRE
></TD
></TR
></TABLE
><P
>in</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>if [ "$BOOTPROTO" = bootp ]; then
fi

if [ "$BOOTPROTO" = dhcp ]; then
      if [ -f /var/run/dhcpcd-${DEVICE}.pid ]; then
              kill `cat /var/run/dhcpcd-${DEVICE}.pid`
              rm -f /var/run/dhcpcd-${DEVICE}.pid
      fi
fi</PRE
></TD
></TR
></TABLE
><P
>Een werkende ppc rpm voor dhcpcd is opgenomen op de Linuxppc 1999 cd; een
iets latere rpm is beschikbaar in de contrib directory op
<A
HREF="ftp://ftp.linuxppc.org/"
TARGET="_top"
>ftp://ftp.linuxppc.org/</A
>.
Broncode, welke kant-en-klaar onder Linux ppc 1999 compileert, is beschikbaar
vanaf <A
HREF="ftp://ftp.phystech.com/pub/dhcpcd-1.3.17-pl9.tar.gz"
TARGET="_top"
>ftp://ftp.phystech.com/pub/dhcpcd-1.3.17-pl9.tar.gz</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="NAMESERVER"
></A
>Alles samengenomen</H3
><P
>Nadat je machine opnieuw is opgestart, zou je netwerkinterface moeten zijn
geconfigureerd.
Typ: <B
CLASS="COMMAND"
>ifconfig</B
>.</P
><P
>Je zou iets moeten krijgen als:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>          lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Bcast:127.255.255.255  Mask:255.0.0.0
          UP BROADCAST LOOPBACK RUNNING  MTU:3584  Metric:1
          RX packets:302 errors:0 dropped:0 overruns:0 frame:0
          TX packets:302 errors:0 dropped:0 overruns:0 carrier:0 coll:0

eth0      Link encap:Ethernet  HWaddr 00:20:AF:EE:05:45
          inet addr:24.128.53.102  Bcast:24.128.53.255  Mask:255.255.254.0
          ^^^^^^^^^^^^^^^^^^^^^^^
          UP BROADCAST NOTRAILERS RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:24783 errors:1 dropped:1 overruns:0 frame:1
          TX packets:11598 errors:0 dropped:0 overruns:0 carrier:0 coll:96
          Interrupt:10 Base address:0x300 </PRE
></TD
></TR
></TABLE
><P
>Als je onder <TT
CLASS="LITERAL"
>inet addr</TT
> een normaal nummer ziet, dan ben
je klaar.
Wanhoop niet als je 0.0.0.0 te zien krijgt, dit is een tijdelijke 
instelling voor <B
CLASS="COMMAND"
>dhcpcd</B
> het IP-adres verwerft.
Als je zelfs na een paar minuten nog 0.0.0.0 ziet, kijk dan alsjeblieft in
<A
HREF="#TROUBLESHOOTING"
><I
>Probleemoplossing</I
></A
>.  DHCPcd is een daemon en die
zal blijven draaien zolang je machine aanstaat. Elke drie uur, zal het
contact opnemen met de DHCP server en proberen het IP-adres te vernieuwen.
Het zal alle berichten in de syslog loggen (onder Slackware
<TT
CLASS="FILENAME"
>/var/adm/syslog</TT
>, RedHat/OpenLinux
<TT
CLASS="FILENAME"
>/var/log/syslog</TT
>).</P
><P
>Nog iets als laatste. Je moet je nameserver opgeven. Er zijn twee manieren
om dit te doen, je kunt of je provider vragen je de adressen van je
nameserver aan te leveren en die dan plaatsen in het bestand
<TT
CLASS="FILENAME"
>/etc/resolv.conf</TT
> of DHCPcd zal de lijst verkrijgen
van de DHCP server en zal een
<TT
CLASS="FILENAME"
>resolv.conf</TT
> in <TT
CLASS="FILENAME"
>/etc/dhcpc</TT
> samenstellen.</P
><P
>Ik besloot gebruik te maken van DHCPcd's <TT
CLASS="FILENAME"
>resolv.conf</TT
> 
door het volgende te doen:</P
><P
>Maak een backup van je oude <TT
CLASS="FILENAME"
>/etc/resolv.conf</TT
>: 
<B
CLASS="COMMAND"
>mv /etc/resolv.conf /etc/resolv.conf.OLD</B
></P
><P
>Als de directory <TT
CLASS="FILENAME"
>/etc/dhcpc</TT
> nog niet
bestaat, maak deze dan aan:
<B
CLASS="COMMAND"
>mkdir /etc/dhcpc</B
></P
><P
>Maak een link van <TT
CLASS="FILENAME"
>/etc/dhcpc/resolv.conf</TT
> naar
<TT
CLASS="FILENAME"
>/etc/resolv.conf</TT
>: <B
CLASS="COMMAND"
>ln -s
/etc/dhcpc/resolv.conf /etc/resolv.conf</B
></P
><P
>Probeer als dat niet werkt (correctie aanbevolen door
<TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:nothing@cc.gatech.edu"
>nothing@cc.gatech.edu</A
>&#62;</TT
> met wat informatie van Henrik
Stoerner): </P
><A
NAME="ERROR3"
></A
><P
>Deze laatste stap moest ik alleen uitvoeren omdat mijn dhcpcd geen
<TT
CLASS="FILENAME"
>/etc/dhcpc/resolv.conf</TT
> aanmaakt. In <TT
CLASS="FILENAME"
>/etc/sysconfig/network-scripts/ifup</TT
> bracht ik
de volgende wijzigingen aan (een erg armzalige hack, maar het werkt):</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>elif [ "$BOOTPROTO" = dhcp -a "$ISALIAS" = no ]; then
    echo -n "Using DHCP for ${DEVICE}... "
    /sbin/dhcpcd -c /etc/sysconfig/network-scripts/ifdhcpc-done ${DEVICE}
    echo "echo \$$ &#62; /var/run/dhcp-wait-${DEVICE}.pid; exec sleep 30" | sh

    if [ -f /var/run/dhcp-wait-${DEVICE}.pid ]; then
	^^^^
        echo "failed."
        exit 1</PRE
></TD
></TR
></TABLE
><P
>Wijzigde ik in:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>elif [ "$BOOTPROTO" = dhcp -a "$ISALIAS" = no ]; then
    echo -n "Using DHCP for ${DEVICE}... "
    /sbin/dhcpcd
    echo "echo \$$ &#62; /var/run/dhcp-wait-${DEVICE}.pid; exec sleep 30" | sh

    if [ ! -f /var/run/dhcp-wait-${DEVICE}.pid ]; then
	^^^^^^
       echo "failed."
       exit 1</PRE
></TD
></TR
></TABLE
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="/IMAGES//note.gif"
HSPACE="5"
ALT="Opmerking"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Let op de ! (bang) in <TT
CLASS="LITERAL"
>if [ ! -f
/var/run/dhcp-wait-${DEVICE}.pid ];</TT
></P
></TD
></TR
></TABLE
></DIV
><P
>Leun nu lekker achterover en geniet ervan :-)</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN300"
></A
>Diverse notities</H3
><P
>De volgende stappen zijn niet nodig, maar wellicht dat ze voor een aantal
mensen van nut zijn:</P
><P
></P
><OL
TYPE="a"
><LI
><P
>Als je slechts zo nu en dan netwerkconnectiviteit nodig hebt, dan kun je
<B
CLASS="COMMAND"
>dhcpcd</B
> vanaf de opdrachtregel starten (je moet hier
root voor zijn) met: <B
CLASS="COMMAND"
>/usr/sbin/dhcpcd</B
>.</P
><P
>Wanneer je het netwerk down wilt brengen, typ je:
<B
CLASS="COMMAND"
>/usr/sbin/dhcpcd -k</B
>.</P
></LI
></OL
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="TROUBLESHOOTING"
></A
>Probleemoplossing</H3
><P
>Als je de hierboven uiteengezette stappen hebt opgevolgd en niet in
staat bent het netwerk te benaderen dan zijn hier verscheidene mogelijke
redenen voor:</P
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="AEN313"
></A
>Je netwerkkaart is niet goed geconfigureerd</H4
><P
>Tijdens het bootproces probeert Linux je netwerkkaart en zou iets kunnen
melden als:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>eth0: 3c509 at 0x300 tag 1, 10baseT port, address  00 20 af ee 11 11, IRQ 10.
3c509.c:1.07 6/15/95 becker@cesdis.gsfc.nasa.gov</PRE
></TD
></TR
></TABLE
><P
>Als een dergelijke melding niet verschijnt, dan wordt je ethernetkaart
wellicht niet door je Linux systeem herkend. Als je een generic 
ethernetkaart hebt (een NE2000 kloon) dan zou je een disk moeten hebben
ontvangen met DOS-utility's die je kunt gebruiken om de kaart in te stellen.
Probeer de IRQ's uit totdat Linux je kaart herkent (IRQ 9, 10 en 12 zijn
gewoonlijk goed).</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="AEN318"
></A
>Je DHCP server ondersteunt RFC 1541/Mijn DHCP server is Windows NT</H4
><P
>Probeer <B
CLASS="COMMAND"
>dhcpcd</B
> uit te voeren door het typen van
<B
CLASS="COMMAND"
>dhcpcd -r</B
>.</P
><P
>Gebruik <B
CLASS="COMMAND"
>ifconfig</B
> om te controleren of je netwerkinterface
is geconfigureerd (wacht een paar seconden voor het configuratieproces
initieel zal aankomen met <TT
CLASS="LITERAL"
>Inet.addr=0.0.0.0</TT
>)</P
><P
>Als dit je probleem oplost, voegt dan de vlag "r" toe aan de opstartscripts,
dwz: in plaats van <B
CLASS="COMMAND"
>/sbin/dhcpcd</B
> krijg je
<B
CLASS="COMMAND"
>/sbin/dhcpcd -r</B
>.</P
><P
>Bewerk bijvoorbeeld onder RedHat het script
<TT
CLASS="FILENAME"
>/etc/sysconfig/network-scripts/ifup</TT
>
en wijzig het volgende:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>        IFNAME=$[ {DEVICE} \
        "/sbin/dhcpcd -r -c /etc/"- etc etc.    </PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="AEN332"
></A
>Tijdens het booten krijg ik de foutmelding "Using DHCP for eth0 ...
failed" maar mijn systeem werkt prima.</H4
><P
>Je maakt naar alle waarschijnlijkheid gebruik van RedHat en hebt de
instructies niet zorgvuldig opgevolgd :-)  In &eacute;&eacute;n van de
if statements ontbreekt de ! (bang).
Spring <A
HREF="#ERROR3"
>hier</A
> naar toe en controleer hoe het
te corrigeren.</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="AEN336"
></A
>Mijn netwerk werkt een paar minuten en reageert dan niet meer</H4
><P
>Er zijn meldingen over gated (gateway daemon) die de routing op Linux boxen
verknalt wat resulteert in het hierboven beschreven probleem. Controleer of
gate wordt uitgevoerd met:
<B
CLASS="COMMAND"
>ps -auxww | grep gate</B
>.</P
><P
>Als dit zo is, probeer het dan te verwijderen met RedHat's RPM manager of
verwijder de entry in
<TT
CLASS="FILENAME"
>/etc/rc.d/</TT
>.</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="AEN342"
></A
>Mijn ethernetkaart wordt tijdens het booten herkend, maar ik krijg
nog steeds een "NO DHCPOFFER" melding in mijn logs. 
Ik heb een PCMCIA ethernetkaart.</H4
><P
>Je moet ervoor zorgen dat de 10BaseT poort ("phone" plug) op je netwerkkaart
is geactiveerd. De beste manier om dit te verifi&euml;ren is te controleren
voor welk soort connector je kaart is geconfigureerd tijdens het booten, b.v.</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>eth0: 3c509 at 0x300 tag 1, 10baseT port, address  00 20 af ee 11 11, IRQ 10.
		            ^^^^^^^^^^^^
3c509.c:1.07 6/15/95 becker@cesdis.gsfc.nasa.gov</PRE
></TD
></TR
></TABLE
><P
>Ik heb meldingen ontvangen van laptopgebruikers die dit soort problemen
hebben door de PCMCIA utility's (in het bijzonder ifport) die het connector
type zouden instellen op 10Base2 (thinnet). Je moet er zeker van zijn dat
je 10BaseT gebruikt voor je connectie. Als dit niet zo is, dan moet je
de kaart herconfigureren en de computer herstarten.</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="AEN347"
></A
>Mijn DHCP client broadcast verzoeken, maar niemand antwoordt
(Aangeleverd door Peter Amstutz)</H4
><P
>Op een aantal systemen, moet je een hostnaam voor je machine als onderdeel
van het verzoek opnemen. Doe dit met dhcpcd met <B
CLASS="COMMAND"
>dhcpcd -h
<TT
CLASS="REPLACEABLE"
><I
>foohost</I
></TT
></B
>
Waarschijnlijk zal de gewenste hostnaam je gebruikersaccountnaam op 
het netwerk zijn.</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="AEN352"
></A
>Ik heb alle stappen opgevolgd, maar nog steeds is mijn machine
niet in staat een verbinding te leggen</H4
><P
>De kabelmodem zal gewoonlijk het ethernetadres van je netwerkkaart
onthouden, dus als je een nieuwe computer verbindt, of de netwerkkaarten
verwisselt, dan zul je op een of andere manier je kabelmodem moeten "leren"
de nieuwe computer/kaart te herkennen. Gewoonlijk kun je het modem uitschakelen
en het weer inschakelen als de computer aan staat of je zult de technische
ondersteuning in moeten schakelen en ze vertellen dat je de netwerkkaart in
de computer hebt verwisseld.</P
><P
>Je hebt firewall rules (ipfwadm rules) die geen poort 67/68 verkeer toestaan
gebruikt door DHCP om configuratie informatie te distribueren. Controleer
zorgvuldig je firewall rules.</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="AEN356"
></A
>Ik heb MediaOne Express service en ik kan nog steeds geen verbinding maken.</H4
><P
>Het schijnt dat MediaOne wat dingen heeft toegevoegd aan DHCP die er niet in
horen. Vermoedelijk is dit geen probleem meer, maar als je moeilijkheden
ondervindt, controleer dan op deze zaken. Als je het (on)geluk hebt Windows
NT op je machine te hebben ge&iuml;nstalleerd, en de Event Viewer 
activeert, dan zul je waarschuwing te zien krijgen als:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>DHCP received an unknown option 067 of length 005. The raw option data is 
given  below.

0000: 62 61 73 69 63            basic</PRE
></TD
></TR
></TABLE
><P
>Als dit het probleem is ga dan naar
<A
HREF="ftp://vanbuer.ddns.org/pub/"
TARGET="_top"
>ftp://vanbuer.ddns.org/pub/</A
>
en download een binary of haal de broncode op voor de wijziging.</P
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN362"
></A
>Alternatieve DHCP client (ISC dhclient)</H3
><P
>Als je geen succes had met het verkrijgen van je Linux connectie draaiend
met dhcpcd, dan wil je wellicht de ISC dhclient proberen. dhclient wordt
me de DHCP distributie van ISC geleverd, waarin zowel een DHCP client
als een DHCP server is opgenomen. Instructies hoe de DHCP distributie
te verkrijgen en compileren zijn te <A
HREF="#DHCPSERVER"
>hier</A
>
te vinden. Wanneer je er klaar mee bent, keer dan naar deze sectie terug
om de client te configuren.</P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="/IMAGES//note.gif"
HSPACE="5"
ALT="Opmerking"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>De volgende informatie is aangeleverd door
Ted Lemon <TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:mellon@isc.org"
>mellon@isc.org</A
>&#62;</TT
>
&eacute;&eacute;n van de auteurs van dhclient.</P
></TD
></TR
></TABLE
></DIV
><P
>Met de huidige versie van de DHCP client, heb je feitelijk geen
<TT
CLASS="FILENAME"
>dhclient.conf</TT
> nodig. Het enige dat je hoeft te doen
is het aanroepen van dhclient b.v.: <B
CLASS="COMMAND"
>/sbin/dhclient</B
>.</P
><P
>Hiermee zullen alle broadcast interfaces worden geconfigureerd. Als dit niet
werkt, of als je slechts &eacute;&eacute;n interface wilt, dan maak je een
<TT
CLASS="FILENAME"
>/etc/dhclient.conf</TT
> bestand aan met deze
voorbeeldconfiguratie:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>interface "eth0" {
  send dhcp-client-identifier 1:xx:xx:xx:xx:xx:xx;
  send dhcp-lease-time 86400;
}</PRE
></TD
></TR
></TABLE
><P
>Hier veronderstellen we dat de ethernet interface eth0 is. Zo niet dan
overeenkomstig wijzigen. Vervang bovendien
xx:xx:xx:xx:xx door je ethernetadres.
Deze dhclient.conf laat de client meer op een Win95 client lijken.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="AEN376"
></A
>DHCP Server Setup</H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="DHCPSERVER"
></A
>DHCP server voor UNIX</H3
><P
>Er zijn verscheidene DHCP servers beschikbaar voor U*X-achtige OS'sen,
zowel commercieel als gratis. Een van de populairdere vrije DHCP servers
is Paul Vixie/ISC DHCPd. Thans is de laatste versie 2.0 (aanbevolen voor
de meeste gebruikers), maar 3.0 is in beta testfase. Je kunt het ophalen
vanaf</P
><P
><A
HREF="ftp://ftp.isc.org/isc/dhcp/"
TARGET="_top"
>ftp://ftp.isc.org/isc/dhcp/</A
></P
><P
>Een aantal distributies voorzien in binaire packages voor dhcpd, dus
sla de volgende sectie over als je het op die manier installeerde.</P
><P
>Pak het uit nadat je het hebt gedownload. Daarna ga je naar de distributiedirectory en typt: <B
CLASS="COMMAND"
>./configure</B
></P
><P
>De configure fase duurt even. Daarna tik je in:
<B
CLASS="COMMAND"
>make</B
> en <B
CLASS="COMMAND"
>make install</B
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN389"
></A
>DHCP server configuratie</H3
><P
>Typ na de installatie <B
CLASS="COMMAND"
>ifconfig -a</B
>. Je krijgt iets
te zien als:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>eth0      Link encap:10Mbps Ethernet  HWaddr 00:C0:4F:D3:C4:62
          inet addr:183.217.19.43  Bcast:183.217.19.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:2875542 errors:0 dropped:0 overruns:0
          TX packets:218647 errors:0 dropped:0 overruns:0
          Interrupt:11 Base address:0x210</PRE
></TD
></TR
></TABLE
><P
>Als er geen MULTICAST is weergegeven, dan moet je de kernel opnieuw
configureren en ondersteuning voor multicast opnemen. Op de meeste systemen
zul je dit niet hoeven doen.</P
><P
>De volgende stap bestaat uit het toevoegen van de route voor 255.255.255.255. 
Aangehaald uit de DHCPd README:</P
><A
NAME="AEN396"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>"Voor de juiste werking van dhcpd met lastige DHCP clients (b.v. Windows 95),
moet het in staat zijn pakketjes met het IP doeladres 255.255.255.255 te
verzenden. Helaas staat Linux erop 255.255.255.255 in het lokale subnet
broadcastadres te wijzigen (hier is dat 192.5.5.223). Dit resulteert in
een overtreding van het DHCP protocol, en ondanks dat veel DHCP clients
het probleem niet opmerken, doen een aantal (b.v. alle Microsoft DHCP clients)
dit wel. Clients die dit probleem hebben, lijken de DHCPOFFER meldingen van
de server niet te zien."</P
></BLOCKQUOTE
><P
>Typ: <B
CLASS="COMMAND"
>route add -host 255.255.255.255 dev eth0</B
></P
><P
>Als je de melding "<TT
CLASS="LITERAL"
>255.255.255.255: Unknown host</TT
>" krijgt,
dan zou je moeten proberen de volgende entry aan het bestand
<TT
CLASS="FILENAME"
>/etc/hosts</TT
> toe te voegen:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>255.255.255.255 all-ones</PRE
></TD
></TR
></TABLE
><P
>Probeer daarna:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>route add -host all-ones dev eth0</PRE
></TD
></TR
></TABLE
><P
>of</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>route add 255.255.255.0 dev eth0</PRE
></TD
></TR
></TABLE
><P
><TT
CLASS="LITERAL"
>eth0</TT
> is uiteraard de naam van het netwerkdevice dat je
gebruikt. Als het verschilt, wijzig dit dan overeenkomstig.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN410"
></A
>Opties voor DHCPd</H3
><P
>Nu moet je DHCPd nog configureren. Hiervoor moet je het bestand
<TT
CLASS="FILENAME"
>/etc/dhcpd.conf</TT
> aanmaken of bewerken. Er bestaat
onder KDE een grafische interface voor de configuratie van dhcpd.
( <A
HREF="http://www.kde.org/"
TARGET="_top"
>http://www.kde.org/</A
> ) genaamd 
kcmdhcpd dat veel lijkt op de DHCP configurator onder Windows NT.
Wanneer KDE 2.0 uitkomt, zal het met kcmdhcpd worden meegeleverd, of kun
je het direct ophalen vanaf:</P
><P
><A
HREF="ftp://ftp.us.kde.org/pub/kde/unstable/apps/network/"
TARGET="_top"
>ftp://ftp.us.kde.org/pub/kde/unstable/apps/network/</A
></P
><P
>Volg onderstaande instructies op als je het met de hand wilt configureren:</P
><P
>Het meest gebruikelijke dat je zult willen is het willekeurig toekennen
van IP-adressen. Dit kan met instellingen als volgt worden gedaan:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
># Voorbeeld /etc/dhcpd.conf
# (voeg hier je opmerkingen toe) 
default-lease-time 600;
max-lease-time 7200;
option subnet-mask 255.255.255.0;
option broadcast-address 192.168.1.255;
option routers 192.168.1.254;
option domain-name-servers 192.168.1.1, 192.168.1.2;
option domain-name "mydomain.org";

subnet 192.168.1.0 netmask 255.255.255.0 {
   range 192.168.1.10 192.168.1.100;
   range 192.168.1.150 192.168.1.200;
}</PRE
></TD
></TR
></TABLE
><P
>Dit zal resulteren in een DHCP server die een client een IP-adres in
het bereik 192.168.1.10-192.168.1.100 of 192.168.1.150-192.168.1.200 toekent.
Het zal voor 600 seconden een IP-adres verstrekken als de client niet vraagt
om een speciek tijdsfragment. Anders zal de maximaal (toegestande) tijd
7200 seconden zijn. De server zal de client ook "adviseren" dat het 255.255.255.0
als subnetmask gebruikt, 192.168.1.255 als het broadcastadres,
192.168.1.254 als de router/gateway en 192.168.1.1 en
192.168.1.2 als DNS servers.</P
><P
>Als je een WINS server voor je Windows clients op moet geven, dan zul je
de optie <TT
CLASS="LITERAL"
>netbios-name-servers</TT
> op moeten nemen, b.v.:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>option netbios-name-servers 192.168.1.1;</PRE
></TD
></TR
></TABLE
><P
>Je kunt ook specifieke IP-adressen toekennen gebaseerd op het ethernetadres
van de client, b.v.:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>host haagen {
   hardware ethernet 08:00:2b:4c:59:23;
   fixed-address 192.168.1.222;
}</PRE
></TD
></TR
></TABLE
><P
>Dit zal IP-adres 192.168.1.222 toekennen aan een client met het
ethernetadres 08:00:2b:4c:59:23.</P
><P
>Je kunt ook mengen en matchen, b.v. je kunt bepaalde clients "statisch"
IP-adressen (b.v. servers) toekennen en anderen dynamische IP's (b.v.
mobiele gebruikers met laptops). Er zijn een aantal andere opties, b.v.
nis server adressen, time server adressen enz., mocht je een van die
opties nodig hebben, lees dan alsjeblieft de manpage van
<TT
CLASS="FILENAME"
>dhcpd.conf</TT
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN429"
></A
>De server starten</H3
><P
>Voor het starten van de server moet er nog &eacute;&eacute;n ding worden
gedaan. In de meeste gevallen maakt de DHCP installatie geen 
<TT
CLASS="FILENAME"
>dhcpd.leases</TT
> bestand aan. Dit bestand wordt door
DHCPd gebruikt om informatie over huidige leases op te slaan.
Het is in gewoon tekstformaat, dus je kunt het gedurende de werking van
DHCPd bekijken. Typ voor het aanmaken van <TT
CLASS="FILENAME"
>dhcpd.leases</TT
>:

<TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>touch /var/state/dhcp/dhcpd.leases</PRE
></TD
></TR
></TABLE
>&#13;</P
><P
>Hiermee zal een leeg bestand (bestandsomvang = 0) worden aangemaakt. 
Een aantal van de oudere versies van dhcpd 2.0 plaatste het bestand in
<TT
CLASS="FILENAME"
>/etc/dhcpd.leases</TT
>.  Je hoeft geen wijzigingen aan te
brengen aan het leases bestand, het zal worden gemanipuleerd door dhcpd.
Als je een melding krijgt waarin wordt aangegeven dat het bestand bestaat,
dan kun je dit simpelweg negeren en verder gaan met de volgende stap.</P
><P
>Je kunt nu de DHCP server aanroepen. Typ simpelweg (of neem het op in de
opstartscripts):</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>/usr/sbin/dhcpd</PRE
></TD
></TR
></TABLE
><P
>Hiermee zal dhcpd met het eth0 device worden aangeroepen. Als je het wilt
aanroepen met een ander device, dan kun je dit simpelweg op de opdrachtregel
opgeven, b.v.:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>/usr/sbin/dhcpd eth1</PRE
></TD
></TR
></TABLE
><P
>Ter verificatie dat alles prima werkt, zou je als eerste de debugging modus
aan moeten zetten en de server in de voorgrond plaatsen. Je kunt dit doen met:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>/usr/sbin/dhcpd -d -f</PRE
></TD
></TR
></TABLE
><P
>Start dan &eacute;&eacute;n van de clients en bekijk de console van je server.
Je zult een aantal debugging meldingen tevoorschijn zien komen. Als alles
prima werkt, dan ben je klaar :-). Verlaat dhcpd en start het zonder de
<B
CLASS="COMMAND"
>-d</B
> en <B
CLASS="COMMAND"
>-f</B
> argumenten. Als je wilt
dat dhcpd tijdens het booten opstart, neem dhcpd dan op in b.v.:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>/etc/rc.d/rc.local</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN447"
></A
>Andere interessante documenten</H3
><P
>Linux Magazine heeft een tamelijk goed artikel in hun uitgave van april
genaamd
<A
HREF="http://www.linux-mag.com/2000-04/networknirvana_01.html"
TARGET="_top"
>Network
Nirvana: How to make Network Configuration as easy as DHCP</A
> waarin
de setup voor DHCP wordt besproken.</P
></DIV
></DIV
></DIV
></BODY
></HTML
>