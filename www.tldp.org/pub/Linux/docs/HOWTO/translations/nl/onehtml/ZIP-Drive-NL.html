<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>Zip Drive Mini-HOWTO</TITLE>


</HEAD>
<BODY>
<H1>Zip Drive Mini-HOWTO</H1>

<H2>Kyle Dansie, <CODE>  dansie@ibm.net</CODE><BR>
Vertaald door: Ellen Bokhorst <CODE> bokkie@nl.linux.org</CODE></H2>v2.5, 07 mrt 2002
<P><HR>
<EM>Dit document voorziet in een snelle referentiegids voor het instellen en
gebruiken van de Iomega ZIP-drive onder Linux.</EM>
<HR>
<H2><A NAME="s1">1. Introductie</A></H2>

<P>De Iomega ZIP-drive is een populaire, verwijderbare media disk-drive.
Hij is beschikbaar in diverse varianten.
<UL>
<LI> Parallelle Poort</LI>
<LI> SCSI</LI>
<LI> IDE - ATAPI</LI>
<LI> Plus</LI>
</UL>
<P>De populairste lijkt de Parallelle-poortversie te zijn. Hij is al een
lange tijd in omloop en goedkoop.
De SCSI-versie is ook al een tijdje in omloop maar heeft een scsi-kaart
nodig die de meeste mensen niet al hebben, en is daarom niet zo heel
erg populair.
De ATAPI-versie schijnt nu meer beschikbaar te zijn.
De Plus is de nieuwere versie van de ZIP-drive.
Deze heeft de mogelijkheid om te detecteren op wat voor soort poort
het is aangesloten, scsi of parallel.
Dit document zal zich concentreren op de Parallelle-poortversie,
maar biedt ook een aantal tips voor andere versies.
<P>Dit document verenigt informatie die door anderen is verzameld en
gepubliceerd, dit zijn in het bijzonder:
<UL>
<LI> Grant Guenther, grant@torque.net</LI>
<LI> Scot Wilcoxon, sewilco@fielday.mn.org</LI>
<LI> Joe Mack, mack@ncifcrf.gov</LI>
<LI> Byron Jeff, byron@cc.gatech.edu</LI>
</UL>
<P>Ik dank hun voor hun belangrijke contributies, en accepteer
de verantwoordelijkheid voor enige fouten die ik heb ge&iuml;ntroduceerd.
<P>Een speciaal bedankje aan Grant Guenther die de 0.26 versie van het
ppa-programma en ook de oorspronkelijke versie van deze HOWTO schreef.
Als je enige fouten of vergissingen in dit document tegenkomt,
laat me dit dan alsjeblieft weten.
<A HREF="mailto:dansie@ibm.net">dansie@ibm.net</A><H2>1.1 Home van dit document</H2>

<P>De recentste versie van dit document staat op
<A HREF="http://www.njtcom.com/dansie/zip-drive.html">http://www.njtcom.com/dansie/zip-drive.html</A><H2><A NAME="s2">2. Snelle Start</A></H2>

<P>OK, dus je hebt een nieuwe zip-drive gekocht, en nu wil je hem gebruiken.
Een aantal distributies heeft de modules reeds gebouwd.
Om te beginnen kun je de opdracht `insmod ppa' proberen.
(Zorg dat je 'm hebt aangesloten en er een disk in hebt gedaan).
Als het ppa-programma er niet is, configureer dan de kernel.
Mijn computer heeft 2 parallelle poorten, &eacute;&eacute;n voor de zip
en &eacute;&eacute;n voor de printer.
Dit maakt het makkelijk, geen verwisseling van kabels.
<P>Configureren van de kernel:
<UL>
<LI> cd /usr/src/linux</LI>
<LI> make xconfig</LI>
<LI> scsi support = Y  </LI>
<LI> scsi disk support = Y</LI>
<LI> Iomega zip support als een module </LI>
<LI> printer support ook als een module </LI>
<LI> opslaan en exit</LI>
<LI> make dep</LI>
<LI> make clean</LI>
<LI> make zImage of zlilo of zdisk </LI>
<LI> make modules</LI>
<LI> make modules_install</LI>
</UL>
<P>Nu het gebruiken van de drive:
<UL>
<LI> laad de module <CODE>insmod ppa</CODE></LI>
<LI> genereer een mountpoint. <CODE>mkdir /zip</CODE></LI>
<LI> doe een voorgeformatteerde windows-type disk in de drive.</LI>
<LI> mount de disk.  <CODE>mount -t vfat /dev/sda4 /zip</CODE></LI>
<LI> gebruik wat standaard bestandsopdrachten zoals in <CODE> l /zip, ls /zip, df, cp,</CODE></LI>
<LI> als je klaar bent <CODE> umount /zip </CODE></LI>
</UL>
<P>Zie de volgende secties voor meer gedetailleerde instructies,
als je problemen had met &eacute;&eacute;n van de voorgaande stappen.
<H2><A NAME="s3">3. Configureren van een kernel voor de ZIP drive</A></H2>

<P>Om de ZIP-drive onder Linux te kunnen gebruiken, moet je een kernel
hebben geconfigureerd met ondersteuning voor het SCSI-systeem, ondersteuning
voor SCSI-disks, en ondersteuning voor de hostadapter die je gebruikt.
Als je niet bekend bent met het bouwen van een kernel, zou je ter informatie
de 
<A HREF="http://metalab.unc.edu/mdw/HOWTO/Kernel-HOWTO.html">Linux Kernel HOWTO</A> moeten lezen.
<P>Je moet het proces van het bouwen van een kernel beginnen met de
configuratie-stap.
Hier identificeer je de specifieke kernelcomponenten die je nodig hebt.
Eerste stap <CODE> cd /usr/src/linux</CODE>. Er zijn in feite
verscheidene manieren om de configuratie uit te voeren.
Onder X-Window gebruik ik <CODE>make xconfig</CODE>. Er is ook nog
<CODE>make menuconfig</CODE>
of <CODE>make config</CODE> voor opdrachtregel prompts. De makkelijkste
manier is met xconfig.
<P>In het deel <B>SCSI Support</B> stel je in <B>SCSI support = Y</B>.
Stel ook <B>SCSI disk support = Y</B> in.
<P>In het deel <B>SCSI low-level drivers</B> wil je instellen
<B>IOMEGA Parallel Port ZIP drive SCSI support = M</B>. De M
staat voor modules.
<P>Zoek en stel in de sectie <B>Character Devices</B> naar
<B>Parallell Printer support = M</B>.
<P>Als je hier wat onzeker over bent, gebruik dan zdisk voor het aanmaken
van de make stap. Hiermee zal de kernel worden gebouwd en op een diskette
worden ge&iuml;nstalleerd.
Als je het op &eacute;&eacute;n of andere manier verknoeit, heb je op 
de harddisk nog steeds een goed opstartbaar systeem.
<P>Bouw de kernel nu met deze stappen:
<UL>
<LI> make dep</LI>
<LI> make clean</LI>
<LI> make zImage of zlilo of zdisk</LI>
<LI> make modules</LI>
<LI> make modules_install</LI>
</UL>
<P><B>hint</B> als je een uitvoerlog wilt genereren van de make zImage
stap, kun je de volgende opdracht gebruiken:
<BLOCKQUOTE><CODE>
<PRE>
make zImage 2>&amp;1 | tee zImage.out
</PRE>
</CODE></BLOCKQUOTE>
<P>Dit is echt goed om te doen, als je compileerfouten of andere
conflicten hebt in de configuratie,
heb je nu een bestand met de foutmeldingen of
compileerfouten. Dit maakt het vragen om hulp veel makkelijker.
<P>Je zult ook de modules ergens moeten laden. Op mijn systeem voegde ik gewoon
een aantal regels toe aan het bestand boot.local.
<P>
<UL>
<LI> insmod ppa</LI>
<LI> insmod lp</LI>
</UL>
<P>Mijn systeem is Suse 5.3 en dit bestand staat in /etc/rc.d. De lokatie van
dit bestand zal per distributie anders zijn, maar
er zal zich ergens een bestand bevinden, voor de lokale wijzigingen
die tijdens het opstarten worden gemaakt.
Je zou het bestand dat toepasbaar is voor je distributie moeten gebruiken.
<P><CODE>shutdown en reboot</CODE> nu je computer.
<P>Je kunt alles of een deel van het SCSI-systeem ook als modules bouwen.
Als je dit doet, zorg er dan voor dat je scsi.o laadt, vervolgens sd.o
en als laatste de driver voor
je hostadapter, voordat je de ZIP-drive probeert te benaderen.
<H2>3.1 SCSI-versie</H2>

<P>Als je reeds een SCSI-disk in je systeem hebt en de ZIP-drive aan dezelfde
controller verbindt, is er geen aanvullende kernelconfiguratie vereist.
Anders is het zeer waarschijnlijk dat je een nieuwe kernel moet bouwen.
<P>Als je een kernel bouwt om de SCSI-versie van de ZIP-drive te ondersteunen,
zou je `SCSI support' en `SCSI disk support' moeten selecteren.
Je moet ook een driver selecteren voor de interface-kaart, die je zult gaan
gebruiken. Als je een ZIP Zoom hebt, selecteer dan de aha152x driver.
<P>Wees er zeker van dat je de documentatie voor de adapter in de SCSI HOWTO
en enige README bestanden in de drivers/scsi subdirectory van de Linux
source tree leest.
Schenk aandacht aan de opdrachtregelparameters, die je misschien zal moeten
gebruiken om de kernel te helpen je adapter te initialiseren.
<P>Als je bijvoorbeeld gebruik maakt van de ZIP Zoom kaart, zul je iets toe
moeten voegen als:
<P>
<BLOCKQUOTE><CODE>
<PRE>
          aha152x=0x340,11,7,1
</PRE>
</CODE></BLOCKQUOTE>
<P>aan de bootopdracht (of voeg het toe aan je bestand /etc/lilo.conf in een
append clausule). Hiermee wordt aan de driver het poortadres en de IRQ van
je ZIP Zoom kaart kenbaar gemaakt
- zorg dat je de nummers gebruikt, die met de
manier waarop je jumpers zijn ingesteld, corresponderen.
<P>Je zou ook de
<A HREF="http://metalab.unc.edu/mdw/HOWTO/BootPrompt-HOWTO.html">BOOTPROMPT HOWTO</A> van Paul Gortmaker moeten lezen voor
informatie over het configureren van de kernel met LILO of LOADLIN.
<H2><A NAME="s4">4. De ZIP-drive</A></H2>

<P>Er zijn minstens vijf of zes versies van de Iomega ZIP 100 drive.
<P>De Iomega page voor deze drives is te vinden op
<A HREF="http://www.iomega.com/product/zip/">http://www.iomega.com/product/zip/</A>
Ze accepteren allen speciale cartridges die lijken op een
3.5" floppy-disk waarop 100 megabytes gegevens passen.
De disks kunnen eigenlijk 96 cylinders met 2048 sectoren met ieder
512 bytes bevatten.
Dit zou normaal gesproken 96 Megabytes worden genoemd.
<P>De externe drive komt in deze types voor:
<UL>
<LI> Parallelle poort</LI>
<LI> SCSI</LI>
<LI> Plus</LI>
</UL>
<P>De interne drive komt in deze types voor:
<UL>
<LI> SCSI</LI>
<LI> IDE</LI>
<LI> ATAPI</LI>
</UL>
<P>De interne versies kunnen in 3.5 of 5.25 drive-slots worden gemount.
De externe versies bestaan in kleine blauwe plastic behuizingen,
die worden gevoed door een extern wandcontact.
<P>Alle drives beschikken aan de voorkant van de
drive over een grote drukknop. Deze wordt gebruikt om de disk uit te werpen.
Linux sluit de opening af als het de drive gebruikt,
maar als de knop wordt ingedrukt op het moment dat de opening is afgesloten,
zal de ZIP-drive dit onthouden, en de disk uitwerpen zodra de software
het vrij geeft.
<H2>4.1 Parallelle poort versie Zip100</H2>

<P>Deze drive is beschreven op
<A HREF="http://www.iomega.com/product/zip/zippp.html">http://www.iomega.com/product/zip/zippp.html</A><P>De Linux-driver is er in een paar verschillende versies. De versie 0.26
van het ppa.c programma wordt standaard met de 2.0.x kernels meegeleverd.
Als je een oudere kernel hebt dan 2.0.35 dan heb je het <B>OUDE</B>
programma. Kijk op
<P>
<A HREF="http://www.torque.net/~campbell/">David Campbell's page</A>
voor de recentere versie van dit programma. Tijdens dit schrijven is de
huidige versie 1.42.
<P>De auto configuratie faciliteiten van het 1.4x programma zijn erg fraai.
Je hoeft het programma niet te laten weten wat het base adres van de
parallelle poort is. Het programma zal het standaardadres voor de
parallelle poorten en de drive koppelen als het ze vindt.
<P>Het meest voorkomende probleem is om de lp-printer module voor het
ppa-programma te laden. Het ppa-programma moet voor de lp-module geladen zijn. 
De lp-module zal de poort verbinden, die de zipdrive nodig heeft, daarom moet 
het ppa programma als eerste worden geladen.
<P>Wees er zeker van dat alle kabels stevig zijn aangesloten.
<P>Als je alles goed hebt gedaan :) zul je tijdens de systeemstart
vergelijkbare meldingen als deze te zien krijgen:
<P>
<PRE>
VFS: Mounted root (ext2 filesystem) readonly.
Adding Swap: 102528k swap-space (priority -1)
  ppa: Version 1.42
  ppa: Probing port 03bc
  ppa: Probing port 0378
  ppa:     SPP port present
  ppa:     EPP 1.9 with hardware direction protocol
  ppa: Found device at ID 6, Attempting to use EPP 32 bit
  ppa: Communication established with ID 6 using EPP 32 bit
  ppa: Probing port 0278
  ppa:     SPP port present
  scsi0 : Iomega parport ZIP drive
  scsi : 1 host.
    Vendor: IOMEGA    Model: ZIP 100           Rev: D.09
    Type:   Direct-Access                      ANSI SCSI revision: 02
  Detected scsi removable disk sda at scsi0, channel 0, id 6, lun 0
  SCSI device sda: hdwr sector= 512 bytes. Sectors= 196608 [96 MB] [0.1 GB]
  sda: Write Protect is off
    sda: sda4
  lp2 at 0x0278, (polling)
  
</PRE>
<P>Je kunt deze meldingen bekijken met dmesg | more.
Je kunt de meldingen in een bestand opslaan met dmesg > dmesg.txt.
Dit is vaak handig als je probeert om fouten bij de installatie op te sporen.
<P>Zie ook sectie 
<A HREF="#sec-more-info">Verkrijgen van meer informatie</A><H2>4.2 SCSI externe versie</H2>

<P>Deze drive is beschreven bij
<A HREF="http://www.iomega.com/product/zip/zipscsi.html">http://www.iomega.com/product/zip/zipscsi.html</A><P>De externe SCSI-versie van de ZIP-drive heeft twee DB25F verbindingen,
en twee configuratie-switches. &Eacute;&eacute;n switch
selecteert het target adres van de drive.
De keuze is beperkt tot target 5 of 6. De andere switch
activeert een interne afsluitweerstand, voor het geval de drive als laatste
in een keten voorkomt.
De 25 pin SCSI verbindingen maken gebruik van de bekende Macintosh stijl
bedrading.
De drive wordt met een Macintosh type kabel meegeleverd, maar standaardkabels
en converters kunnen makkelijk worden verkregen als je een host-adapter met
een Centronics met hoge-dichtheid verbinding gebruikt.
<P>Ik heb geen interne SCSI-drive gezien, maar ik zou verwachten dat het is
uitgerust met een standaard 50 pin DIP header SCSI-verbinding en dezelfde
twee switches.
<P>Zorg dat het targetadres dat je kiest niet in conflict komt met
enige andere SCSI devices, die je op dezelfde bus zou kunnen hebben.
Zorg er ook voor dat van de fysiek laatste drive in een keten
de be&euml;indiging is geactiveerd, of er een externe afsluitweerstand is
ge&iuml;nstalleerd.
<P>Als je een interne SCSI-disk of CD-rom hebt en je je ZIP-drive aan een
bestaande adapter verbindt, kun je beter controleren of er zich
enige afsluitweerstanden op de kaart bevinden, die moeten worden verwijderd.
Alleen de twee uiterste einden van de SCSI-bus zouden moeten worden
afgesloten. Als je bus gedeeltelijk intern en gedeeltelijk extern is,
zou er &eacute;&eacute;n afsluitweerstand op de laatste externe
device moeten zijn en &eacute;&eacute;n op het laatste interne device, maar geen afsluitweerstanden op de adapterkaart zelf.
<P>Wees er zeker van dat alle kabels stevig zijn aangesloten.
<P>De kernel configuratie is bijna hetzelfde als voor de interne versie. Zie
de volgende sectie SCSI Interne versie voor een voorbeeldconfiguratie.
<H3>De ZIP ZOOM host adapter</H3>

<P>Iomega verkoopt een SCSI host adapter onder de naam ZIP Zoom. Deze is
feitelijk gebaseerd op het ontwerp van de <B>Adaptec AHA1520</B> verwante
adapters. Het heeft een extern Macintosh type DB25F verbinding,
compatibel met de kabel die met de ZIP-drive wordt meegeleverd.
<P>Linux ondersteunt deze adapter met de <B>aha152x</B> driver.
<H2>4.3 De SCSI Interne versie</H2>

<P>  
Installeer de hardware zoals staat beschreven in de
"Installatie en Referentie Gids"
erop lettende welke SCSI ID, IRQ en I/O Poort Adres er wordt gebruikt.
(Je zult deze info later nodig hebben).
Het zal wat soepeler verlopen als de drive en adapterkaart
verschillende SCSI ID's gebruiken.
<P><B>Let op</B> De zip zoom kaart is hard-wired voor scsi ID nummer 7.
Het scsi id in de opdrachtregel hieronder is voor de kaart, niet voor de
drive. 
<P>De kaart en de drive moeten verschillende scsi id nummers gebruiken.
Als de kaart bijvoorbeeld 7 gebruikt, gebruik dan 5 of een ander nummer voor
de drive.
<P>Compileer de kernel opnieuw nadat je het zo hebt geconfigureerd dat het
'SCSI', 'SCSI disk' en 'AHA152X/2825' ondersteuning bevat.
INSTALLEER DE NIEUWE KERNEL :-(
<P>Stel vast wat de opdrachtregel voor je kernel is:
<P><CODE> aha152x=[I/O Port][,IRQ][,SCSI ID][,RECONNECT][,PARITY] </CODE>
<P>Bijvoorbeeld : <CODE>  aha152x=0x140,10,7,1 </CODE>
<P>Als je LILO gebruikt, voeg de opdrachtregel voor je kernel dan toe aan
het bestand lilo.conf door gebruik te maken van de opdracht append.
<P>(bv. append = "aha152x=0x140,10,7,1")
<P>Als je LOADLIN gebruikt, voeg de opdrachtregel voor je kernel dan toe
aan de opdracht die je gebruikt om loadlin te initialiseren.
<P>
<PRE>
(bv. loadlin c:\vmlinuz root=/dev/hda3 aha152x=0x140,10,5,1 ro)
</PRE>
<H2>4.4 De ZIP Plus - IMM driver</H2>

<P>Deze drive is beschreven bij
<A HREF="http://www.iomega.com/product/zip/zipplus.html">http://www.iomega.com/product/zip/zipplus.html</A><P>Dit is een <B>nieuwere</B> versie van de externe Zip-drive. De
<B>Zip Plus</B> maakt geen gebruik van de ppa-driver, in plaats
daarvan gebruikt het de <B>imm</B> driver.
<A HREF="mailto:Philippe_Andersson@ste.scitex.com">Philippe Andersson</A>
zond deze uitstekende sectie in over de imm-driver voor de Zip Plus.
Bedankt Philippe.
<P>Bouw als eerste opnieuw je kernel met daarin de volgende items ingesloten:
<P>
<UL>
<LI>modules ondersteuning</LI>
<LI>SCSI ondersteuning</LI>
<LI>SCSI Disk ondersteuning</LI>
<LI>lp als een module (als je het nodig hebt)</LI>
</UL>
<P>Het zal je zijn opgevallen dat we geen SCSI low-level driver selecteerde.
Dat is ok -- we zullen het later apart bouwen.
<P>Vervolgens hebt je de source-code van de driver nodig vanaf de home page van
Dave Campbell (
<A HREF="http://www.torque.net/~campbell/imm.tar.gz">http://www.torque.net/~campbell/imm.tar.gz</A>). Versie 0.18 is
de huidige versie op het moment van schrijven (Aug. 98). Unzip en untar
het ergens (onder <CODE>/usr/src</CODE>, bijvoorbeeld). Start dan
<CODE>make</CODE> op. Je zult de module krijgen die je nodig hebt
(<CODE>imm.o</CODE>). Kopieer het naar <CODE>/lib/modules/$(uname -r)/scsi</CODE>.
<P>Als je lp-module was geladen (controleer dit met <B>lsmod</B>(1)),
unload het dan (<CODE>rmmod lp</CODE>), en laadt dan <CODE>imm.o</CODE>
(<CODE>insmod imm</CODE>) en je hebt alle basis ingesteld.
<P>Als de ZIP-drive niet was aangesloten en op dat moment niet van stroom was
voorzien, zal je de melding "init_module: Device or resource busy" krijgen,
en de module zal niet worden geladen.
(Tussen haakjes, het lijkt erop dat het niet nodig is om je PC uit te zetten
om de ZIP te verbinden
-- zorg er gewoon voor dat de module niet is geladen en de
drive uit is, plug het dan in, zet de drive aan, en laad de module.)
<P>Als de ZIP was aangesloten en van stroom was voorzien, maar er zat
geen disk in, zal de module wel goed worden geladen, maar je zal de melding
krijgen dat het de diskpartitietabel niet kan lezen.
Dat is ok, aangezien de partitietabel
automatisch zal worden ingelezen als je er een ZIP-disk in doet.
<P>Als er al een ZIP-disk inzat, zal de volledige informatie worden getoond,
waaronder een op de disk gedefinieerde lijst met partities en
zijn Write Protect status. Hier is een voorbeeldmelding zoals die bij het
laden wordt weergegeven:
<P>
<PRE>
vger:~# insmod imm
imm: Version 0.18
imm: Probing port 03bc
imm: Probing port 0378
imm:     SPP port present
imm:     ECP with a 16 byte FIFO present
imm:     PS/2 bidirectional port present
imm:     Passed Intel bug check.
imm: Probing port 0278
scsi0 : Iomega ZIP Plus drive
scsi : 1 host.
  Vendor: IOMEGA    Model: ZIP 100 PLUS      Rev: J.66
  Type:   Direct-Access                      ANSI SCSI revision: 02
Detected scsi removable disk sda at scsi0, channel 0, id 6, lun 0
SCSI device sda: hdwr sector= 512 bytes. Sectors= 196608 [96 MB] [0.1 GB]
sda: Write Protect is off
 sda: sda1
vger:~#
</PRE>
<P>Een laatste opmerking is, dat deze versie van de driver ook de drive-opening
afsluit, als de disk is gemount. Als er in deze situatie op de uitwerpknop wordt
gedrukt, gebeurt er niets, maar de drive "onthoudt" het, en werpt de
disk uit zodra de disk niet meer is gemount.
<H2>4.5 ATAPI versie</H2>

<P>Deze drive is beschreven op
<A HREF="http://www.iomega.com/product/zip/zipatapi.html">http://www.iomega.com/product/zip/zipatapi.html</A><P>Er werd een tijdje een IDE-versie van de drive geproduceerd.
Ik denk dat het voor het overgrote deel is vervangen door de
ATAPI versie.
<P>Donald Stidwell zond deze opmerkingen in over de ATAPI-versie. Bedankt Don.
<P>Ik gebruik een ATAPI Zip drive en het werkt met zowel 2.0.32 als 2.0.33
kernels. Ik heb het zowel onder RH 5.0 als OpenLinux 1.2 (mijn huidige
distibutie) gebruikt.
Om het onder OpenLinux werkend te krijgen, activeerde ik gewoon de 
<B>ATAPI floppy support</B> in de kernel.
OpenLinux heeft deze ondersteuning niet standaard meegecompileerd.
<P>Er zijn geen andere drivers nodig. Het kan als een extended partitie
worden gemount op partitie 4.
De mijne mount b.v. op HDB4. Ik mount het onder /mnt/zip als
noauto, alhoewel ik veronderstel dat er geen echte problemen zouden optreden
met het automatisch mounten. Ik vraag me 't alleen af over het uitwerpen
van disks. Ik unmount de drive altijd voor het uitwerpen van een cartridge.  
<P>Er staan meer gedetailleerde instructies voor de ATAPI installatie in
de Linux Gazette uitgave van Mei 1998. Zie de 2 cent tip sectie.
<P>
<PRE>
&lt;url url="http://www.linuxgazette.com/issue28/lg_tips28.html#atapi">
</PRE>
<H2>4.6 IDE versie</H2>

<P>  
Ik heb de IDE-versie niet gebruikt. Eric Backus heeft deze opmerkingen
ingezonden. Bedankt Eric.
<P>Ik heb er zo &eacute;&eacute;n.
Het zat een jaar geleden bij mijn Gateway 2000 computer.
Ik denk dat de meeste hiervan door grote OEM bedrijven, zoals deze,
werden geleverd, nog voordat de ATAPI-versie van de ZIP-drive beschikbaar werd.
<P>Het goede nieuws over deze drive: er zijn geen kernelmodules of aanpassingen
nodig om het te ondersteunen. Voor de kernel lijkt het op een IDE harddisk.
Bij mij werkte het zonder moeite met 2.0.31 en 2.0.32.
<P>Het slechte nieuws over deze drive: omdat het geen gebruik maakt van ATAPI,
kun je de SCSI-naar-ATAPI vertaling niet gebruikien,
wat betekent dat je mtools niet kunt
gebruiken om de disk voor schrijven te beveiligen (of om ze uit te werpen,
wat dat betreft).
<H2>4.7 USB versie</H2>

<P>Deze drive wordt beschreven op
<A HREF="http://www.iomega.com/product/zip/imac.html">http://www.iomega.com/product/zip/imac.html</A><P>Deze drives zien er erg gaaf uit en de USB interface ziet er ook goed uit.
Het enige probleem is dat de USB-interface voor Linux op dit moment nog 
steeds in ontwikkeling is.
Dus voor het moment is de drive nog niet bruikbaar onder Linux.
Kijk op dit adres voor updates.
<P>
<A HREF="http://peloncho.fis.ucm.es/~inaky/USB/news.html">http://peloncho.fis.ucm.es/~inaky/USB/news.html</A><H2>4.8 ZIP250 versie</H2>

<P>Deze drive staat beschreven op
<A HREF="http://www.iomega.com/product/zip/zip250.html">http://www.iomega.com/product/zip/zip250.html</A><P>Deze drive is nieuw met ingang van Januari 1999. 
Ik heb er pas &eacute;&eacute;n van gekocht en het werkt onder Linux
erg goed. Gebruik gewoon de IMM-driver vanaf
<A HREF="http://www.torque.net/~campbell/imm.tar.gz">http://www.torque.net/~campbell/imm.tar.gz</A>
Stel de driver op dezelfde wijze in als de zip plus. 
Hoofdzakelijk het downloaden van de driver, het uitpakken en make uitvoeren.
Kopieer het uitvoerbare bestand imm.o naar de modules directory.
Bijvoorbeeld /lib/modules/2.0.35/scsi (De 2.0.35 is je kernelversie).
Als je niet zeker bent van het versienummer doe uname -r.
<H2><A NAME="s5">5. Installatieproblemen oplossen</A></H2>

<P>Als je foutmeldingen krijgt, wanneer je de opdracht 
<CODE>insmod ppa</CODE> geeft, zoals hieronder weergegeven:
<HR>
<PRE>
root# insmod ppa
Using /lib/modules/version/kernel/drivers/scsi/ppa.o
/lib/modules/version/kernel/drivers/scsi/ppa.o: unresolved symbol parport_register_device_Rf274b881/lib/modules/version/kernel/drivers/scsi/ppa.o: unresolved symbol parport_unregister_device_Rb0814cd3
/lib/modules/version/kernel/drivers/scsi/ppa.o: unresolved symbol parport_release_Rf8ec22de
/lib/modules/version/kernel/drivers/scsi/ppa.o: unresolved symbol parport_claim_R4c7222c6
/lib/modules/version/kernel/drivers/scsi/ppa.o: unresolved symbol parport_enumerate_Rbc847709
/lib/modules/version/kernel/drivers/scsi/ppa.o: Note: modules without a GPL compatible license cannot use GPLONLY_ symbols
</PRE>
<HR>
<P>Het probleem is dat je geen printer aan je systeem toevoegde in de
'Printer Configuratie'. Voor je 'insmod ppa' uitvoert, moet je een printer
toevoegen. Klik op KDE-Start-Button->System->Printer-Config en voeg een
printer toe aan de hand van de naam 'eentestprinter' met gebruik making van
/dev/lp0 (of lp1, lp2 controleer de uitvoer van dmesg | more).
Test nu de printer die je zojuist hebt toegevoegd door op te geven:
<I><CODE>/etc/rc.d/init.d/lpd restart </CODE></I>. Als de lpd daemon
start, dan is de printer juist geconfigureerd.
Probeer nu
<P>
<HR>
<PRE>
bash# insmod ppa
bash# insmod lp
</PRE>
<HR>

Je zult geen foutmeldingen mogen krijgen.
<H2><A NAME="s6">6. Gebruiken van de ZIP-drive</A></H2>

<P>Als je alle vereiste componenten hebt gebouwd, zou de kernel je adapter
en drive tijdens opstarten van het systeem moeten herkennen.
Als je gebruik maakt van een laadbare module voor je driver,
gelden de volgende besprekingen zodra die module is geladen.
<P>Voor het overgrote deel, gedragen de SCSI en parallelle versies van de drive
zich identiek, behalve dat de parallelle versie wat langzamer is.
<H2>6.1 Fdisk, mke2fs, mount, enz.</H2>

<P>Zodra je de naam van de drive voor je ZIP-drive kent, ben je klaar. Je kunt
de drive manipuleren met de gewone Linux diskmanagement opdrachten.
<CODE>fdisk</CODE> (of misschien <CODE>cfdisk</CODE>) wordt gebruikt om de
partitietabellen op de disk te manipuleren.
<CODE>mke2fs</CODE> kan worden gebruikt om een partitie met
het ext2 bestandssysteem te formatteren - degene die het meest wordt
gebruikt onder Linux.
<CODE>mount</CODE> wordt gebruikt om een geformatteerde partitie aan je directory-
hierarchie te verbinden.
<P>Je zou de manual pages voor deze tools moeten bestuderen als je er niet
bekend mee bent.
Wees gewaarschuwd dat er nu verscheidene zeer verschillende versies
van het <CODE>fdisk</CODE> programma zijn - wees voorzichtig.
<P>Ik zal twee algemene scenario's beschrijven.
<H2>6.2 Een bestaande DOS geformatteerde disk</H2>

<P>Als je een ZIP-disk met een DOS bestandsstructuur hebt, die oorspronkelijk
met de tools van Iomega werd aangemaakt, zou de partitie-scan weer moeten
geven dat de disk &eacute;&eacute;n partitie heeft, <CODE>/dev/sda4</CODE>.
<P>Je zou een plaats moeten maken om de disk te mounten, laten we zeggen
<CODE>/zip</CODE>, en het dan als een MS-DOS bestandssysteem mounten:
<P>
<BLOCKQUOTE><CODE>
<PRE>
mkdir /zip
mount -t vfat /dev/sda4 /zip
</PRE>
</CODE></BLOCKQUOTE>
<P>Je kunt in plaats van msdos ook vfat gebruiken. vfat ondersteunt lange
bestandsnamen terwijl msdos dat niet doet.
Nu zouden de bestanden op de disk in /zip moeten verschijnen. Zolang de
disk is gemount, zul je het niet kunnen verwijderen.
Als je klaar bent met de disk, kun je het unmounten om het vrij te geven,
en het te ontkoppelen van je directory hierarchie.
<P>
<BLOCKQUOTE><CODE>
<PRE>
       umount /zip
</PRE>
</CODE></BLOCKQUOTE>
<P>Als je &eacute;&eacute;nmaal het mountpoint /zip hebt aangemaakt - is het
niet nodig dat je dit nogmaals doet, dus je zou er later naar terug kunnen
gaan en er iets anders mounten.
<H2>6.3 Herformatteren van een native Linux-disk</H2>

<P>
<P>Als je de inhoud van een ZIP-disk wilt verwijderen en er een Linux native
bestandssysteem op aan wilt maken. Je zou fdisk op de volledige disk
toe moeten passen:
<P>
<BLOCKQUOTE><CODE>
<PRE>
fdisk /dev/sda
</PRE>
</CODE></BLOCKQUOTE>
<P>en alle bestaande parities verwijderen (met de opdracht <CODE>d</CODE>).
Maak vervolgens een nieuwe partitie aan met de opdracht
<CODE>n</CODE>, maak er een primaire partitienummer 1 van, gebruik
<CODE>w</CODE> om de partitietabel naar disk weg te schrijven, en ga er uit
met <CODE>q</CODE>.
<P>Formatteer de partitie
<P>
<BLOCKQUOTE><CODE>
<PRE>
mke2fs /dev/sda1
</PRE>
</CODE></BLOCKQUOTE>
<P>(De 1 is het nummer dat je deze partitie met <CODE>fdisk</CODE>)
hebt gegeven.  Nu kun je de disk mounten:
<P>
<BLOCKQUOTE><CODE>
<PRE>
       mount -t ext2 /dev/sda1 /zip
</PRE>
</CODE></BLOCKQUOTE>
<P>(waarbij we het mountpoint dat we eerder aanmaakte, opnieuw gebruiken).
<H2>6.4 fstab gegevens</H2>

<P>Het bestand /etc/fstab staat je toe de mount opdracht te configureren. 
Ik wil de zipdisk graag, vanuit iedere login id, op het systeem kunnen
mounten en beschrijven.
Ik heb 2 regels aan het einde van het bestand fstab toegevoegd die
er zo uitzien:
<P>
<PRE>
/dev/sda1   /zip        ext2            noauto,rw,user,nosuid,sync
/dev/sda4   /zipdos     vfat            noauto,rw,user,nosuid,sync,mode=0777
   
</PRE>
<P>Deze gegevens gaan ervan uit dat je een /zip en een /zipdos directory
hebt. Als je wilt dat alle user id's kunnen lezen en schrijven, zorg er dan
voor dat je de permissies instelt.
Bijvoorbeeld <B> chmod 666 /zip </B>. Je moet het chmod als root
toepassen.
De fstab gegevens gaan er ook vanuit dat de dos-disks als 4 zijn 
gepartitioneerd
(sda4 in mijn geval), en de ext2(linux) disks zijn gepartitioneerd als 
1 (sda1).
Je kunt meer over opties van fstab lezen met <B>man mount</B>
<P>Met de fstab gegevens zoals hierboven, kun je een dos-disk mounten met
<B> mount /zipdos </B>
Als je een linux ext2 disk gebruikt, dan gebruik je de opdracht
<B> mount /zip </B>
<H2>6.5 De ZIP Tools disk</H2>

<P>Er is wat extra werk te doen als je de disk die met de ZIP-drive
wordt meegeleverd, wilt gebruiken. Zoals geleverd,
is de software bestuurde schrijfbeveiliging geactiveerd. 
De meeste mensen hebben de vergrendeling op de disk onder DOS verwijderd,
voordat ze het ooit onder Linux probeerde te gebruiken. Linux
kan een vergrendelde disk niet benaderen, 
en de vergrendeling moet ongedaan worden gemaakt met de tools van Iomega.
<P>Een native Linux programma om de schrijfbeveiligings faciliteit te beheren,
wordt, onder andere, spoedig beschikbaar verwacht.
<H2><A NAME="s7">7. Performance</A></H2>

<P>
<P>Met de standaardversie van de 2.0.x kernels krijg je de 0.26 versie van
het ppa.c programma. Dit is een zeer betrouwbaar en eenvoudig programma. 
Het is al veel gebruikt en misbruikt en heeft zich goed staande weten
Het enige dat slecht is aan dit programma is dat het niet erg snel is.
Op mijn computer heb ik kernelversie 2.0.30 en 2 parallelle poorten.
Dit is ook een low-buck computer pentium 133 - 16 meg memory, 5 gig 
maxtor eide harddisk. De computer kostte me
500. U.S. Dollars en de disk was 250. Ik ben goedkoop uit, maar wat dan nog.
<P>Ik had de ZIP-drive op de tweede poort en de printer op de eerste poort.
De tweede poort was een oude add in kaart, geen epp mode.
Dit zorgde dat de driver in 4 bit mode draaide.
<P>Om de performance vast te stellen, kopieerde ik het netscape tar-bestand 
vanaf de harddisk naar de zip-drive.
Dit bestand is ongeveer 10.6 meg.
Tijd 7 minuten 15 seconden. Vanaf de zip-drive naar de harddisk
was ongeveer gelijk aan 7 minuten. 
<P>Ik bracht toen 2 wijzigingen aan. Ik sloot de ZIP-drive eerst aan op
de eerste poort en ging naar de bios en stelde de EPP-mode in voor de eerste
poort. Tegelijkertijd hing ik de printer aan de 2e poort.
<P>De tweede verandering die ik aanbracht was dat ik de nieuwe versie van het
programma downloadde vanaf
<A HREF="http://www.torque.net/~campbell/">David Campbells page</A>
Vervolgens installeerde ik dit programma. Bekijk het ingesloten readme
bestand.
<P>Vervolgens draaide ik dezelfde test die bestond uit het kopie&euml;ren van
het Netscape tar-bestand naar en vanaf de ZIP-drive nogeens.
Het kopie&euml;ren naar de C-drive duurde 1:55 seconden. Vanaf de harddisk
naar de ZIP-drive duurde precies 1 minuut.
Dit vergeleken met 7:15 en 7:00
met het oude programma. Dit was een belangrijke verbetering ten opzichte van
het 0.26 programma. Dit was ook door gebruik te maken van de zip-drive
als een vfat bestandstype.
<P>Vervolgens formatteerde ik een zipdrive in ext2-formaat. Draaide dezelfde
test nogeens. Het kopie&euml;ren naar de harddisk duurde slechts 50
seconden. Het kopie&euml;ren vanaf de harddisk naar de Zip-drive duurde
slechts 40 seconden.
<P><B> Performance Samenvatting </B>
<P>Voor dit testgeval waarbij een bestand van 10.6 meg werd verplaatst,
is de 4-bit standaardpoortmode en programma versie 0.26 het 
langzaamste op 7:00 en 7:15.
<P>Het nieuwe programma (1.41) en EPP mode met ext2 bestandstypes is de
snelste met 50 seconden en 40 seconden.
<H2><A NAME="s8">8. Veelgestelde Vragen</A></H2>

<P>Dit zijn een aantal veel gestelde vragen. Lees alsjeblieft
de antwoorden voordat je nog eens gaat vragen !
<H2>8.1 Kan ik een printer in de parallelle ZIP-drive pluggen?</H2>

<P>Ja, maar... Op dit moment is het niet mogelijk zowel de lp- als de
ppa-drivers op dezelfde parallelle poort actief te hebben.
Er is een resource sharing protocol ontworpen
en is in de eerste fasen van implementatie, maar zal
niet beschikbaar zijn voordat Linux 2.0 is uitgegeven.
<P>Als je 't leuk vindt op zaken vooruit te lopen, haal dan de 2.1.x kernel
op en en je kunt poorten delen. Zie
<A HREF="http://www.cyberelk.demon.co.uk/parport.html">http://www.cyberelk.demon.co.uk/parport.html</A><P>Een makkelijke manier om dit met 2.0.x kernels te doen, is met 2 parallelle
poorten. Ik kocht een tweede voor ongeveer 15 dollar en het werkt geweldig.
Je kunt er &eacute;&eacute;n voor het afdrukken en &eacute;&eacute;n voor
je ZIP-drive gebruiken.
Bouw gewoon een kernel met zowel de lp- als de ppa-drivers als
modules. Ik gebruik de nieuwere (1.41) versie
ppa, dus ik laad gewoon eerst ppa (insmod ppa). Het vindt de zip-drive dan
op de eerste poort. Vervolgens laad ik lp
(insmod lp) en het wijs de printer toe aan de tweede poort.
<P>Als je versie 0,26 van het programma gebruikt, upgrade dan naar 1.41 of
nieuwer. Het enige antwoord dat je op vragen zult krijgen, is deze driver
te upgraden.
<H2>8.2 Ben je van plan om EPP/ECP poorten in PPA te gaan ondersteunen?</H2>

<P>
<P>Versie 0.26 van het programma ondersteunt geen EPP. Versie 1.41 <B>doet</B>
dit wel. Dit programma is ook veel sneller. Zie de sectie performance voor
meer details.
<H2>8.3 Kan ik Linux vanaf een ZIP-drive draaien?</H2>

<P>Er zijn mensen die dit voor elkaar hebben gekregen.
Het lijkst me dat dit zou kunnen zijn voor grote rescue-disk of een manier om
een installatie te testen.
<P>
<A HREF="http://metalab.unc.edu/LDP/HOWTO/mini/ZIP-Install.html">http://metalab.unc.edu/LDP/HOWTO/mini/ZIP-Install.html</A><H2>8.4 Kan ik vanaf de ZIP-drive booten?</H2>

<P>Dit is afhankeljk van de hostadapter die je gebruikt. Als je host adapter
een BIOS ROM met code heeft waarmee van target 5 of 6 geboot kan worden,
dan kan er inderdaad vanaf de SCSI ZIP-drive geboot worden. 
Je kunt niet vanaf een parallelle poort drive booten.
<P>Als DOS op je harddisk voorkomt, en je wilt Linux vanaf een ZIP-disk booten,
dan kun je dit doen door de LOADLIN boot-loader te gebruiken.
Je kernel-image moet ergens op de DOS-disk voorkomen, maar de rest van je
Linux-systeem zou op de ZIP kunnen staan.
Zorg dat de kernel die je gebruikt de juiste drivers heeft ingebouwd.
<P>Zover als ik me bewust ben, bestaan er geen installatie opstartdiskettes voor
&eacute;&eacute;n van de populaire distributies waarop de parallelle 
ZIP-driver voorkomt.
<H2>8.5 Waarom gebruikt Iomega partitie-nummer 4 ?</H2>

<P>Dit is &eacute;&eacute;n van de populairste vragen, maar ik denk niet
dat iemand een definitief antwoord heeft op deze vraag.
Het kan zijn dat ze hun hoofd er niet bijhadden.
Misschien is er geen reden.
<H2>8.6 Hoe kan ik zorgen dat de disk tijdens de systeemstart wordt gemount?</H2>

<P>Het enige dat je hoeft te doen, is een regel aan het bestand
<CODE>/etc/fstab</CODE> toevoegen. Als je bijvoorbeeld altijd een DOS-disk
in de drive hebt als je opstart, zou je
<P>
<BLOCKQUOTE><CODE>
<PRE>
/dev/sda4   /zip  vfat  defaults  0 0
</PRE>
</CODE></BLOCKQUOTE>
<P>in <CODE>fstab</CODE> kunnen plaatsen. Afhankelijk van je distributie,
kan het zijn dat
de initialisatie-scripts proberen om fsck op de partities die in je fstab
staan opgesomd, uit te voeren.
Denk erom dat dit problemen kan veroorzaken als je vergeet de disk in de
drive te plaatsen als je boot, of er de verkeerde disk in hebt.
<H2>8.7 Wat gebeurt er als er geen disk in zit als ik boot?</H2>

<P>De kernel zal de partitietabel proberen te lezen, maar de
bewerking zal een time-out genereren. Het is niets om je zorgen over te maken.
Zodra je er een disk in hebt gedaan, en er iets mee probeert te doen
zal de kernel merken, dat er nu een disk in zit, en de partitietabel opnieuw
scannen.
<P>HINT: als je van disks verwisselt, is het een goed idee om altijd fdisk
te gebruiken om de partitie-structuur van de nieuwe disk te controleren.
<P>De BIOS van een aantal SCSI hostadapters zal gedurende de systeemboot
proberen om de partitietabel op je disk te lezen.
Als je deze controle niet kunt de-activeren, kan het zijn dat je
gedwongen wordt altijd met een disk in de drive te booten.
<H2>8.8 Kan ik de parallelle drive als een echte SCSI disk gebruiken ?</H2>

<P>De PPA-3 parallel-naar-SCSI adapter is als een enkele ASIC
chip ge&iuml;mplementeerd, die Iomega een VP10 noemt. 
Het is ingebouwd op de controllerkaart van de ZIP drive. 
Er is een echte SCSI bus aanwezig, maar niet in een bruikbare vorm.
<P>Alhoewel ik niet heb geprobeerd de twee kaarten te vergeljken, lijkt
het me logisch dat de VPI0 de conventionele electrische buffering circuits
vervangt, die vereist zouden zijn als de SCSI bus
zich buiten het pakket had bevonden.
<H2>8.9 Kan PPA worden gebruikt met Iomega's parallelle poort tape-drives ?</H2>

<P>Nee.  Deze drives zijn floppy-tape drives. Er is geen SCSI bij betrokken.
<P>Verscheidene mensen hebben aangegeven belangstelling te hebben voor
het toepassen van mijn methoden om te proberen het protocol vast te
stellen en een driver voor deze tapes te ontwikkelen.
De eerste stap in dat proces is de DOS-driver onder DOSemu werkend te
krijgen. Ik heb nog niet gehoord dat iemand hier succes mee had.
<H2>8.10 Zal PPA werken met de parallelle poort SyQuest EZ135 ?</H2>

<P>Nee. De EZ135 is een IDE drive met een ingebouwde converter van
ShuttlePort parallel naar IDE.
<P>Er is echter wat werk verricht aan deze driver. Bekijk dit op:
<P>
<A HREF="http://www.torque.net/linux-pp.html">http://www.torque.net/linux-pp.html</A><H2><A NAME="sec-more-info"></A> <A NAME="s9">9. Verkrijgen van actuele informatie </A></H2>

<P>
<P>Actuelere versies van het parallelle poort zipdrive (ppa.c) programma en
actuele technische informatie over de driver kan worden gevonden bij
<P>
<A HREF="http://www.torque.net/~campbell/">http://www.torque.net/~campbell/</A><P>Informatie over vele parallelle poort externe device-drivers kan worden
gevonden bij:
<P>
<A HREF="http://www.torque.net/linux-pp.html">http://www.torque.net/linux-pp.html</A><P>Parallelle Poort sharing via through-port informatie is te vinden bij:
<P>
<A HREF="http://www.cyberelk.demon.co.uk/parport.html">http://www.cyberelk.demon.co.uk/parport.html</A><P>Installeren van Linux vanaf een zipdrive (voor computers zonder een CD) 
<P>
<A HREF="http://metalab.unc.edu/mdw/HOWTO/mini/Install-From-ZIP.html">http://metalab.unc.edu/mdw/HOWTO/mini/Install-From-ZIP.html</A><P>Een X-frontend naar het ziptool-programma kan worden gevonden bij
<P>
<A HREF="http://www.scripps.edu/~jsmith/jazip/">http://www.scripps.edu/~jsmith/jazip/</A><P>Informatie over het configureren van Lilo kan worden gevonden bij
<P>
<A HREF="http://metalab.unc.edu/mdw/HOWTO/mini/LILO.html">http://metalab.unc.edu/mdw/HOWTO/mini/LILO.html</A><P>Informatie over het gebruiken van bootprompts kan worden gevonden bij
<P>
<A HREF="http://metalab.unc.edu/mdw/HOWTO/BootPrompt-HOWTO.html">http://metalab.unc.edu/mdw/HOWTO/BootPrompt-HOWTO.html</A><P>Als je het Linux OS op een Zip Drive wilt installeren en het OS vanaf de
Zipdrive wilt draaien
<P>
<A HREF="http://metalab.unc.edu/LDP/HOWTO/mini/ZIP-Install.html">http://metalab.unc.edu/LDP/HOWTO/mini/ZIP-Install.html</A><P>De webpagina's van Iomega zijn te vinden op:
<P>
<A HREF="http://www.iomega.com/">http://www.iomega.com/</A>.
<P>En als je op zoek bent naar algemene informatie over het programmeren van
de parallelle poort voor de PC, zou je
<P>
<A HREF="http://www.lvr.com/parport.htm">http://www.lvr.com/parport.htm</A><P>kunnen bezoeken.
</BODY>
</HTML>
