<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>Casema kabelmodem mini HOWTO</TITLE>


</HEAD>
<BODY>
<H1>Casema kabelmodem mini HOWTO</H1>

<H2>Jasper Aukes, <CODE>jasper@nl.linux.org</CODE></H2>v1.1, 26 Mei 1999
<P><HR>
<EM>Een beknopte beschrijving van het opzetten van een ppp-verbinding onder Linux
met een Casema kabelmodemabonnement.</EM>
<HR>
<H2><A NAME="s1">1. Inleiding</A></H2>

<P>Veel Casema kabelmodemgebruikers worstelen met het opzetten van een ppp
verbinding onder Linux. Omdat ik het jammer zou vinden als deze mensen
daardoor hun interesse in Linux verliezen en het opzetten van zo'n verbinding
al met al niet zo heel erg moeilijk is heb ik besloten dit document op te
stellen.
<H2><A NAME="s2">2. PPP support in de Kernel</A></H2>

<P>Als uw kernel geen ppp support heeft, zult u een nieuwe kernel moeten maken
die dat wel heeft. Omdat dit document niet als doel heeft u het maken van een
nieuwe kernel bij te brengen verwijs ik graag naar de Kernel-HOWTO (zie
hiervoor ook het stukje <EM>Referenties</EM>
Mocht u al wel beschikken over de juiste modules, dan kunt u met
<BLOCKQUOTE><CODE>
<PRE>
insmod ppp
</PRE>
</CODE></BLOCKQUOTE>

de ppp module inschakelen.
<H2><A NAME="s3">3. De benodigde files</A></H2>

<P>Voor het inbellen is een aantal files noodzakelijk. Ik zal ze hieronder
opsommen. Door op een filenaam te klikken met SHIFT ingedrukt zal uw browser u
vragen waar de file bewaard kan worden. Het is aan te raden zelf een directory
te maken in bijvoorbeeld /usr/src genaamd 'etc' met daarin een directory
genaamd 'ppp' door middel van het volgende commando:
<P>
<BLOCKQUOTE><CODE>
<PRE>
mkdir -p /usr/src/etc/ppp
</PRE>
</CODE></BLOCKQUOTE>
<P>U kunt er dan voor kiezen de files in die directories te bewaren en ze later
met de hand naar /etc te verplaatsen.
<P>Als u dit echter een overbodige stap lijkt (en u weet wat u doet) kunt u er
ook voor kiezen de files direct in de juiste directory te bewaren. U moet
hiervoor wel als <EM>root</EM> werken.
<P>
<UL>
<LI>In de directory <B>/etc/</B>:
<UL>
<LI>
<A HREF="ftp://ftp.nl.linux.org/pub/HOWTO-NL/files/casema-kabelmodem/hosts">hosts</A></LI>
<LI>
<A HREF="ftp://ftp.nl.linux.org/pub/HOWTO-NL/files/casema-kabelmodem/resolv.conf">resolv.conf</A></LI>
</UL>
</LI>
<LI>In de directory <B>/etc/ppp/</B>:
<UL>
<LI>
<A HREF="ftp://ftp.nl.linux.org/pub/HOWTO-NL/files/casema-kabelmodem/ppp-on-dialer">ppp-on-dialer</A></LI>
<LI>
<A HREF="ftp://ftp.nl.linux.org/pub/HOWTO-NL/files/casema-kabelmodem/chatscript">chatscript</A></LI>
<LI>
<A HREF="ftp://ftp.nl.linux.org/pub/HOWTO-NL/files/casema-kabelmodem/ppp-on">ppp-on</A></LI>
<LI>
<A HREF="ftp://ftp.nl.linux.org/pub/HOWTO-NL/files/casema-kabelmodem/pap-secrets">pap-secrets</A></LI>
<LI>
<A HREF="ftp://ftp.nl.linux.org/pub/HOWTO-NL/files/casema-kabelmodem/hangup">hangup</A></LI>
<LI>
<A HREF="ftp://ftp.nl.linux.org/pub/HOWTO-NL/files/casema-kabelmodem/options">options</A></LI>
</UL>
</LI>
<LI>In de directory <B>/usr/sbin/</B>:
<UL>
<LI>pppd</LI>
</UL>
</LI>
</UL>
<P><EM>NB: De file <B>/usr/sbin/pppd</B> bestaat al op uw systeem en kan
onveranderd blijven.</EM>
<H2>3.1 Aanpassingen in de files</H2>

<P>In de files <B>options</B> en <B>pap-secrets</B> wordt gebruik gemaakt van
de termen <B>yourlogin</B> en <B>yourpassword</B> Het moge duidelijk zijn
dat u die woorden moet vervangen door de voor u van toepassing zijnde waarden.
U kunt voor het aanpassen van de files een editor naar keuze gebruiken. Waar u
wel op moet letten is dat de files als platte tekstfile moet worden bewaard.
(veel DOS en Windows programma's plakken vieze tekens achter elke regel, als u
een editor als <B>vi</B> of <B>pico</B> gebruikt is er niets aan de hand)
<P>U kunt nu de files copieren van de tijdelijke locatie naar de overeenkomstige
locatie onder /etc en er dan voor gaan zorgen dat de permissies van alle files
goed staan:
<H2>3.2 Permissies</H2>

<P>Ieder file heeft zogenaamde <EM>permissies</EM> die de toegangsrechten voor de
eigenaar, de groep en de rest van de wereld vastleggen. Door een directory op
te vragen met: 
<BLOCKQUOTE><CODE>
<PRE>
ls -al 
</PRE>
</CODE></BLOCKQUOTE>

krijgt men een uitgebreide lijst van de files met onder andere die permissies
te zien. 
De permissies worden aangegeven door de eerste rij tekens (Zie 'man chmod'
voor meer informatie) 
<P>
<BLOCKQUOTE><CODE>
<PRE>
(cwd=/etc)
-rw-r--r--   1 root     root          246 Mar 22 23:25 hosts
-rw-r--r--   1 root     root           87 Jan 21 21:23 resolv.conf

(cwd=/etc/ppp)
drwxr-x---   3 root     pppusers     1024 Feb 18 21:12 ./
drwxr-xr-x  32 root     root         3072 Mar 15 00:26 ../
-rwxr-x---   1 root     pppusers      191 Oct  4 11:02 ppp-on-dialer*
-rw-------   1 root     root          491 Oct  4 11:03 chatscript
-rwxr-x---   1 root     pppusers       72 Oct  4 11:25 ppp-on*
-rw-------   1 root     root          116 Dec 10 17:22 pap-secrets
-rwxr-x---   1 root     pppusers       71 Jan  3 09:47 hangup*
-rw-r-----   1 root     pppusers      152 Mar 15 17:48 options

(cwd=/usr/sbin)
-rwsr-xr-x   1 root     root       106876 Jun  8  1998 pppd*
</PRE>
</CODE></BLOCKQUOTE>
<P>Om de files in voor de ppp-verbinding goed te zetten moet u het volgende doen
(als root): 
<P>
<BLOCKQUOTE><CODE>
<PRE>
cd /etc/ppp 
chmod 750 ppp-on ppp-on-dialer . 
chmod 600 chatscript pap-secrets 
chmod 640 options 
chmod u+s /usr/sbin/pppd 
chmod 644 /etc/hosts /etc/resolv.conf 
</PRE>
</CODE></BLOCKQUOTE>
<H2><A NAME="s4">4. Voorbereidingen</A></H2>

<P>Nu bent u bijna zover dat u kunt inbellen. Nog een aantal voorbereidingen is
nodig, danwel handig.
<H2>4.1 Groep pppusers</H2>

<P>Om niet iedereen het recht te geven om in te bellen dient u dit voor te
behouden aan een speciale groep gebruikers; de <EM>pppusers</EM>. Om uzelf (en
eventuele anderen) aan deze groep toe te voegen moet u hetvolgende doen:
<P>Met het commando 'chgrp' kunt u files van groep-eigenaar laten veranderen (in
dit geval <EM>pppusers</EM>): 
<P>
<BLOCKQUOTE><CODE>
<PRE>
chgrp pppusers /etc/ppp/ppp-on 
</PRE>
</CODE></BLOCKQUOTE>
<P>In de file <B>/etc/groups</B> staat wie lid zijn van welke groepen. 
Zoek daarin de regel met 'pppusers' en voeg de users toe die u in staat wilt
stellen een ppp-verbinding op te zetten: (Geen spaties) 
<P>
<BLOCKQUOTE><CODE>
<PRE>
pppusers:x:230:bart,henk,jasper 
</PRE>
</CODE></BLOCKQUOTE>
<H2>4.2 Modem device</H2>

<P>In de file <B>options</B> wordt gebruik gemaakt van /dev/modem. Zorg dat dit
een link is naar uw echte modem.
<P>Ieder stuk hardware dat op uw computer is aangesloten moet in de /dev directory
zijn opgenomen om door Linux te kunnen worden benaderd. In mijn
<B>options</B> file wordt gebruik gemaakt van /dev/modem. Zelf dient u nog
zorg te dragen voor het aanbrengen van de link naar het echte device. Deze
link kunt u zelf aanmaken door de volgende opdracht te geven:
<P>
<BLOCKQUOTE><CODE>
<PRE>
ln -s DEVICE /dev/modem
</PRE>
</CODE></BLOCKQUOTE>
<P>Wat u voor <B>DEVICE</B> moet invullen ziet u in de volgende tabel:
<P>
<BLOCKQUOTE><CODE>
<PRE>
Com
1       /dev/ttyS0
2       /dev/ttyS1
3       /dev/ttyS2
4       /dev/ttyS3
</PRE>
</CODE></BLOCKQUOTE>
<P>Eventueel kunt u gebruik maken van 'modemtool' om deze link te zetten
<P>Na afloop is de situatie bijvoorbeeld:
<P>
<PRE>
jasper@ja ~# ls -al /dev/modem 
lrwxrwxrwx   1 root     root           10 Dec 30 14:42 /dev/modem -> /dev/ttyS0
</PRE>
<H2>4.3 Nog meer links</H2>

<P>U kunt, nadat de permissies goed gezet zijn, connectie maken door
<B>/etc/ppp/ppp-on</B> te typen, of met <B>call</B> als u de juiste links
aanmaakt.
<P>Omdat de directory waarin zich de scripts bevinden waarmee de verbinding wordt
gemaakt en wordt verbroken (/etc/ppp) zich hoogstwaarschijnlijk niet in uw
zoekpad zal bevinden, dient er een link aangemaakt te worden in een directory
die wel in uw zoekpad voorkomt.
<P>Dat aanmaken van de links gaat alsvolgt: (als root)
<P>
<BLOCKQUOTE><CODE>
<PRE>
ln -s /etc/ppp/ppp-on /usr/bin/call
ln -s /etc/ppp/hangup /usr/bin/hangup
</PRE>
</CODE></BLOCKQUOTE>
<P>Nu kunt u het commando <B>call</B> gebruiken om in te bellen en
<B>hangup</B> om de verbinding te verbreken. (Het is wel nodig om even een
nieuwe xterm te openen of, als u de tcsh gebruikt een <B>rehash</B> opdracht
te geven) 
<H2><A NAME="s5">5. De logfiles</A></H2>

<P>Als je problemen ondervindt met het inbellen, is het altijd nuttig om eerst
zelf even onderzoek te doen naar mogelijke fouten. Heel belangrijk is het
daarbij om de file <B>/var/log/messages</B> in de gaten te houden.
<P>U kunt dit doen door voordat u gaat inbellen in een aparte xterm hetvolgende
commando te geven:
<P>
<BLOCKQUOTE><CODE>
<PRE>
tail -f /var/log/messages
</PRE>
</CODE></BLOCKQUOTE>
<P>Mocht u er zelf niet uitkomen, stuur dan een bericht naar de in <EM>Tips</EM>
genoemde nieuwsgroepen. Neem in uw bericht de relevante informatie uit de
logfile exact over.
<H2><A NAME="s6">6. Tips</A></H2>

<P>
<UL>
<LI>Voor vragen over het inbellen of de scripts zelf verwijs ik u graag naar
de nieuwsgroepen 
<A HREF="news:casema.linux">casema.linux</A> en 
<A HREF="news:nl.comp.os.linux.installatie">nl.comp.os.linux.installatie</A>.
Ik zal ze daar dan proberen te beantwoorden. </LI>
<LI>Mail voor commentaar, aanvullingen en suggesties <B>over deze pagina</B>
naar 
<A HREF="mailto:jasper@nl.linux.org?Subject=Je Casema HOWTO">jasper@nl.linux.org</A></LI>
</UL>
<H2><A NAME="s7">7. Bekende problemen en oplossingen</A></H2>

<P>
<UL>
<LI>Uw modem doet helemaal niets: U heeft waarschijnlijk de verkeerde link
aangemaakt waar /dev/modem naar verwijst (zie eerder in dit document)</LI>
<LI>Uw modem doet helemaal niets: U bedoelt echt helemaal niets... Raadpleeg
de 
<A HREF="mailto:helpdesk@casema.net">Casema helpdesk</A>.</LI>
<LI>Uw modem heeft het 'Netwerk' lampje branden of knipperen. Er zijn
problemen met het Casema netwerk. Raadpleeg de 
<A HREF="mailto:helpdesk@casema.net">Casema helpdesk</A>.</LI>
<LI>U krijgt vreemde foutmeldingen: Heeft u wel een kernel met PPP support?</LI>
<LI>U ziet in /var/log/messages dingen als: Permission denied: Heeft u het
stuk over permissies wel goed doorgenomen en gecontroleerd?</LI>
</UL>
<H2><A NAME="s8">8. Referenties</A></H2>

<P>Zie voor meer informatie over PPP de 
<A HREF="http://www.linux-howto.com/LDP/HOWTO/PPP-HOWTO.html">PPP-HOWTO</A>, voor meer
informatie over het maken van een nieuwe kernel de 
<A HREF="http://www.linux-howto.com/LDP/HOWTO/Kernel-HOWTO.html">Kernel-HOWTO</A>, voor vragen
waarvan u denkt dat ze al eens gesteld zijn verwijs ik graag naar 
<A HREF="http://www.deja.com/">Dejanews</A> en voor meer informatie over Linux
naar 
<A HREF="http://www.nl.linux.org/">www.nl.linux.org</A>
Op 
<A HREF="http://www.casema.net/~cvgennip/kabelmodem/">Chel van Gennip's</A> pagina kun je zien hoe je
een verbinding realiseert met gebruikmaking van een grafische tool onder
RedHat Linux.
</BODY>
</HTML>
