<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>Linux Security HOWTO</TITLE>


</HEAD>
<BODY>
<H1>Linux Security HOWTO</H1>

<H2>Kevin Fenzi, <CODE>kevin@tummy.com</CODE> &amp; Dave Wreski, <CODE>dave@linuxsecurity.com</CODE> <BR> Vertaald door Nine Matthijssen, <CODE>smurfin@nl.linux.org</CODE></H2>v1.1.1, 17 maart 2000
<P><HR>
<EM> Dit document is een algemeen overzicht van beveiligingskwesties waar een
beheerder van Linux systemen mee geconfronteerd wordt. Het behandelt een
algemene beveiligingsfilosofie en een aantal specifieke voorbeelden van hoe je
je Linux-systeem beter tegen indringers kunt beveiligen. Ook zijn er
verwijzingen naar materiaal en programma's die betrekking hebben op
beveiliging. Verbeteringen, constructieve kritiek, toevoegingen en correcties
worden dankbaar geaccepteerd. Stuur je reactie alsjeblieft naar beide auteurs,
met "Security HOWTO" als onderwerp. </EM>
<HR>
<H2><A NAME="s1">1. Inleiding</A></H2>

<P> Dit document behandelt enkele van de belangrijkste kwesties die
betrekking hebben op beveiliging in Linux. Algemene filosofie en via het
netwerk ontstane middelen worden besproken.
<P> In een aantal andere HOWTO documenten worden ook beveiligingskwesties
behandeld en naar deze documenten wordt verwezen als dat nodig is.
<P> Dit document kan <EM>niet</EM> zo bijgewerkt zijn dat alle nieuwe
beveiligingslekken erin genoemd worden, aangezien er voortdurend nieuwe
beveiligingslekken worden ontdekt. Dit document zal je vertellen waar je
moet zoeken naar dergelijke up-to-date informatie en zal je enkele algemene
methoden geven om te voorkomen dat zulke beveiligingslekken plaats hebben.
<H2>1.1 Nieuwe versies van dit document</H2>

<P> Nieuwe versies van dit document zullen periodiek worden gestuurd naar
<I>comp.os.linux.answers</I>. Ze zullen ook worden toegevoegd aan de
diverse sites die zulke informatie archiveren, waaronder:
<P><CODE>
<A HREF="http://www.linuxdoc.org/">http://www.linuxdoc.org/</A></CODE>
<P> Bovendien zul je normaal gesproken dit document ook moeten kunnen vinden 
op de Linux World Wide Web home page via:
<P> <CODE>
<A HREF="http://metalab.unc.edu/mdw/linux.html">http://metalab.unc.edu/mdw/linux.html</A></CODE>
<P> Tot slot zou de meest recente versie van dit document ook in
verschillende formaten beschikbaar moeten zijn op:
<P> <CODE>
<A HREF="http://scrye.com/~kevin/lsh/">http://scrye.com/~kevin/lsh/</A></CODE>
<P> of 
<P> <CODE>
<A HREF="http://www.linuxsecurity.com/docs/Security-HOWTO">http://www.linuxsecurity.com/Security-HOWTO</A></CODE>
<P> of 
<P><CODE>
<A HREF="http://www.tummy.com/security-howto">http://www.tummy.com/security-howto</A></CODE>
<H2>1.2 Reacties</H2>

<P> Alle opmerkingen, foutmeldingen, aanvullende informatie en alle  
mogelijke vormen van kritiek kunnen worden gestuurd naar: 
<P> <CODE>
<A HREF="mailto:kevin@tummy.com">kevin@tummy.com</A></CODE>
<P> en 
<P> <CODE>
<A HREF="mailto:dave@linuxsecurity.com">dave@linuxsecurity.com</A></CODE>
<P> <EM>Let op</EM>: Stuur je reactie alsjeblieft naar <EM>beide</EM>  
auteurs. Ook moet je voor de zekerheid "Linux", "security" of "HOWTO" in  
het onderwerp zetten om Kevin's spamfilter te ontwijken.
<H2>1.3 Disclaimer</H2>

<P> Voor de inhoud van dit document kan geen aansprakelijkheid worden  
geaccepteerd. Gebruik de begrippen, voorbeelden en andere inhoud op eigen  
risico. Bovendien is dit een concept, mogelijk met veel  
onnauwkeurigheden of fouten. 
<P> Voor een aantal voorbeelden en beschrijvingen wordt gebruik gemaakt van de  
RedHat(tm) pakket-layout en systeemsetup. De weg die jij moet bewandelen
om zover te komen kan anders zijn. 
<P> Voor zover we weten worden er alleen programma's beschreven die onder  
bepaalde voorwaarden mogen worden gebruikt of ge&euml;valueerd voor  
persoonlijke doeleinden. De meeste programma's zijn beschikbaar, compleet met  
broncode, onder 
<A HREF="http://www.gnu.org/copyleft/gpl.html">GNU</A>  
voorwaarden.
<H2>1.4 Copyright informatie</H2>

<P> Dit document is auteursrechtelijk beschermd (c)1998-2000 Kevin Fenzi  
en Dave Wreski en wordt verspreid onder de volgende voorwaarden: 
<P> 
<UL>
<LI> Linux HOWTO documenten mogen worden gereproduceerd en in z'n geheel of  
in gedeelten, in elk medium, fysiek of electronisch worden verspreid, als
deze   copyright-vermelding maar behouden blijft op alle copie&euml;n.   
Commerci&euml;le herverspreiding is toegestaan en wordt aangemoedigd; echter,  
de auteurs willen graag op de hoogte gesteld worden van zulke distributies.</LI>
<LI> Alle vertalingen, afgeleide werken of verzamelde werken die  
te maken hebben met enige Linux HOWTO documenten moeten deze 
copyright-vermelding bevatten. Dat houdt in dat je geen afgeleid werk van een 
HOWTO mag maken en aanvullende beperkingen op de distributie mag opleggen.  
Uitzonderingen op deze regels kunnen onder bepaalde voorwaarden toegestaan  
worden; neem alsjeblieft contact op met de Linux HOWTO co&ouml;rdinator op  
het onderstaande adres. </LI>
<LI> Als je vragen hebt, neem dan alsjeblieft contact op met Tim Bynum, de  
Linux HOWTO co&ouml;rdinator, op </LI>
</UL>
<P> <CODE>
<A HREF="mailto:tjbynum@metalab.unc.edu">tjbynum@metalab.unc.edu</A> </CODE> 
<H2><A NAME="s2">2. Overzicht</A></H2>

<P> Dit document zal enkele procedures en veelgebruikte software om je  
te helpen je Linux systeem veiliger te maken proberen uit te leggen. Het is  
belangrijk om, voordat we beginnen, eerst enkele basisbegrippen te  
bespreken en een basisbeveiliging te cre&euml;ren. 
<H2>2.1 Wat is het nut van beveiliging?</H2>

<P> In de altijd veranderende wereld van globale datacommunicatie, goedkope  
Internetverbindingen en het hoge tempo van software ontwikkeling, wordt  
beveiliging een steeds belangrijker onderwerp. Beveiliging is nu een  
basisvereiste, omdat globale informatica inherent onveilig is. Als je 
gegevens bijvoorbeeld van punt A naar B op het Internet gaan, zou het 
onderweg via diverse andere punten kunnen gaan, hetgeen andere gebruikers de  
gelegenheid geeft het te onderscheppen en het zelfs te wijzigen. Zelfs andere  
gebruikers op je systeem kunnen opzettelijk jouw gegevens veranderen in 
iets dat je niet bedoelde. Onbevoegde toegang tot je systeem kan verkregen 
worden door indringers, ook bekend als "crackers", die dan geavanceerde
kennis gebruiken om zich als jou voor te doen, informatie van je te stelen of
je  zelfs de toegang tot je eigen middelen te ontzeggen. Als je je afvraagt
wat  het verschil is tussen een "Hacker" en een "Cracker", bekijk dan Eric 
Raymond's document "How to Become A Hacker", beschikbaar op 
<A HREF="http://www.netaxs.com/~esr/faqs/hacker-howto.html">http://www.netaxs.com/~esr/faqs/hacker-howto.html</A>. 
<H2>2.2 Hoe veilig is veilig?</H2>

<P> Houd allereerst in gedachten dat geen enkel computersysteem ooit  
volledig veilig kan zijn. Je kunt het alleen maar steeds moeilijker voor  
iemand maken om je systeem in gevaar te brengen. Voor de gemiddelde Linux  
thuisgebruiker is er niet veel nodig om de terloopse cracker buiten de deur
te houden. Voor professionele Linux gebruikers (banken,
telecommunicatie-bedrijven enz.) is echter veel meer werk vereist. 
<P> Een andere factor om rekening mee te houden is dat hoe veiliger je  
systeem is, hoe indringeriger je beveiliging wordt. Je moet een balans zien
te vinden zodat je systeem nog steeds bruikbaar is en toch veilig voor jouw
doeleinden. Je kunt bijvoorbeeld verlangen dat iedereen die op je systeem
inbelt een 'call-back modem' gebruikt om ze terug te kunnen bellen op hun
nummer thuis. Dit is veiliger, maar als iemand niet thuis is, wordt het
moeilijk voor hen om in te loggen. Je kunt je Linux systeem ook instellen
zonder netwerk of verbinding met het Internet, maar dit beperkt zijn
bruikbaarheid. 
<P> Als het een gemiddeld tot grote site betreft, zul je een  
beveiligingsbeleid moeten vaststellen, waarin staat hoeveel beveiliging voor  
jouw site vereist is en op welke wijze dit gecontroleerd wordt. Je kunt een  
voorbeeld van een welbekend beveiligingsbeleid vinden op 
<A HREF="http://www.faqs.org/rfcs/rfc2196.html">http://www.faqs.org/rfcs/rfc2196.html</A>. Het is recent bijgewerkt en  
bevat een goede opzet om een beveiligingsbeleid voor jouw bedrijf vast te  
kunnen stellen. 
<H2>2.3 Wat probeer je te beschermen?</H2>

<P> Voordat je probeert je systeem te beveiligen, moet je vaststellen tegen  
welk niveau van bedreiging je je moet beschermen, welke risico's je wel of  
niet moet nemen en hoe kwetsbaar je systeem als gevolg hiervan is. Je  
moet je systeem analiseren om te weten wat je beschermt, waarom je het  
beschermt, welke waarde het heeft en wie de verantwoording voor je data en  
andere bezittingen heeft. 
<P>  
<UL>
<LI> Een <EM>risico</EM> is de mogelijkheid dat een indringer succesvol kan
zijn in zijn pogingen om toegang tot je computer te krijgen. Kan een indringer
bestanden lezen of schrijven of programma's uitvoeren die schade kunnen
veroorzaken? Kan hij kritieke data verwijderen? Kan hij voorkomen dat jij of 
jouw bedrijf belangrijk werk gedaan krijgt? Vergeet niet: iemand die zich
toegang verschaft tot jouw account of jouw systeem kan zich ook als jou
voordoen. Bovendien kan het hebben van &eacute;&eacute;n onveilig
account erin resulteren dat je hele netwerk in gevaar komt. Als je een
enkele gebruiker toestaat om in te loggen middels een <CODE>.rhosts</CODE> file
of door gebruik te maken van een onveilige service als <CODE>tftp</CODE>,
riskeer je dat een indringer 'zijn voet tussen de deur krijgt'. Als de
indringer eenmaal een gebruikersaccount op jouw of iemand anders z'n systeem
heeft, kan het gebruikt worden om toegang tot een ander systeem of account
te verkrijgen.</LI>
<LI> Een <EM>bedreiging</EM> vormt iemand die gemotiveerd is om onbevoegd  
toegang tot je netwerk of computer te krijgen. Je moet vaststellen wie je  
vertrouwt om toegang tot je systeem te hebben en welke bedreiging ze kunnen  
vormen. </LI>
<LI>Er zijn verschillende typen indringers en het is handig om hun  
verschillende karakteristieken in gedachten te houden als je je systemen gaat  
beveiligen.
  
<UL>
<LI><B> De Nieuwsgierige</B> - Dit type indringer is voornamelijk  
ge&iuml;nteresseerd in het uitvinden wat voor type systeem en gegevens je  
hebt.</LI>
<LI><B> De Kwaadwillige</B> - Dit type indringer is erop uit  
om je systemen ten val te brengen, je webpagina te ontsieren  
of je op een andere manier te dwingen om geld en tijd te spenderen aan  
het herstellen van de schade die hij heeft aangebracht. </LI>
<LI><B> De Geavanceerde</B> - Dit type indringer probeert je  
systeem te gebruiken om populair en berucht te worden. Hij kan je systeem  
gebruiken om aandacht te vragen voor zijn bekwaamheden. </LI>
<LI><B> De Concurrentie</B> - Dit type indringer is ge&iuml;nteresseerd in  
wat voor gegevens je op je systeem hebt. Het kan iemand zijn die denkt dat je  
iets hebt waarvan hij kan profiteren, financieel of anderszins. </LI>
<LI><B> De Lener</B> - Dit type indringer is ge&iuml;nteresseerd in het  
`winkelen' op je systeem om de daarbij verkregen middelen voor eigen  
doeleinden te gebruiken. Het typeert hem om chat of irq servers te draaien,  
porno archiefsites of zelfs DNS servers. </LI>
<LI><B> Haasje-over</B> - Dit type indringer is alleen  
ge&iuml;nteresseerd in je systeem om het te gebruiken om andere systemen   
binnen te dringen. Als je systeem voorzien is van veel verbindingen of een  
poort is naar een aantal interne hosts, zou je dit type tegen kunnen komen om  
te proberen je systeem te beschadigen.</LI>
</UL>
</LI>
<LI> <EM>Kwetsbaarheid</EM> beschrijft hoe goed beveiligd je computer is  
vanaf een ander netwerk en de mogelijkheid die iemand heeft om onbevoegd  
toegang te verkrijgen.   
Wat staat er op het spel als iemand inbreekt in je systeem? Natuurlijk  
zullen de zorgen van een dynamische PPP thuisgebruiker verschillen van die  
van een bedrijf die zijn machine met het Internet of een ander groot  
netwerk heeft verbonden.  
Hoeveel tijd zal het in beslag nemen om alle gegevens die verloren zijn
gegaan te herstellen/opnieuw aan te maken? Nu wat tijd investeren kan tien
keer zoveel tijd later besparen als je de gegevens die verloren zijn gegaan
opnieuw aan moet maken. Heb je je back-up strategie gecontroleerd en je
gegevens recentelijk geverifieerd?</LI>
</UL>
<H2>2.4 Een beveiligingsbeleid ontwikkelen</H2>

<P> Cre&euml;er een eenvoudig, algemeen beleid voor je systeem dat je  
gebruikers gemakkelijk kunnen begrijpen en volgen. Het moet zowel de  
gegevens als de privacy van de gebruikers beschermen. Enkele dingen die je  
kunt overwegen om toe te voegen zijn: wie heeft toegang tot het systeem  
(Kan mijn vriend mijn account gebruiken?), wie is er bevoegd om  
software op het systeem te installeren, wie bezit welke gegevens, herstel  
na een ramp en passend gebruik van het systeem. 
<P> Een algemeen geaccepteerd beveiligingsbeleid begint met  
de zin:   
<P>
<BLOCKQUOTE>
<B> Dat wat niet toegestaan is, is verboden.</B> 
</BLOCKQUOTE>
 
<P> Dit betekent dat, tenzij je een gebruiker toegang tot een dienst toestaat,
die gebruiker geen gebruik mag maken van die dienst totdat je toegang
toestaat. Verzeker jezelf ervan dat het beleid werkt op je reguliere  
gebruikersaccount. Zeggen "Ach, ik word geen wijs uit dat permissie-probleem, 
ik doe het wel als root", kan leiden tot beveiligingslekken die erg voor de  
hand liggend zijn, zelfs degenen die nog niet misbruikt zijn.
<P>
<A HREF="ftp://www.faqs.org/rfcs/rfc1244.html">rfc1244</A> is een  
document dat beschrijft hoe je je eigen netwerk beveiligingbeleid moet  
cre&euml;ren. 
<P> 
<A HREF="ftp://www.faqs.org/rfcs/rfc1281.html">rfc1281</A> is een  
document dat een voorbeeld van een beveiligingsbeleid laat zien met een  
gedeta&iuml;lleerde beschrijving van elke stap. 
<P> Tot slot zou je het COAST-beleid archief op   
<A HREF="ftp://coast.cs.purdue.edu/pub/doc/policy">ftp://coast.cs.purdue.edu/pub/doc/policy</A> kunnen bekijken om na te gaan  
hoe een beveiligingsbeleid er in werkelijkheid uitziet. 
<H2>2.5 Manieren om je site te beveiligen</H2>

<P> Dit document zal verschillende manieren bespreken waarop je de  
dingen waar je hard voor hebt gewerkt kunt beveiligen: je lokale  
machine, je gegevens, je gebruikers, je netwerk en zelfs je reputatie. Wat zou  
er gebeuren met je reputatie als een indringer enkele gegevens van je  
gebruikers zou wissen? Of je website zou ontsieren? Of het collectieve project  
plan van je bedrijf voor het komend kwartaal zou publiceren? Als je een  
netwerkinstallatie overweegt, zijn er vele factoren waar je rekening
mee moet houden alvorens een enkele machine aan je netwerk toe te voegen.
<P>Zelfs als je een enkel dialup PPP account hebt of slechts een kleine site,
houdt dit niet in dat indringers niet in jouw systemen ge&iuml;nteresseerd
zijn. Grote geavanceerde sites zijn niet de enige doelen -- veel indringers
willen simpelweg zoveel mogelijk sites binnendringen, ongeacht hun grootte.
Bovendien kunnen ze een beveiligingslek in jouw site gebruiken om toegang te
verkrijgen tot andere sites waarmee je bent verbonden. 
<P> Indringers hebben heel veel tijd en kunnen het gokken hoe je je systeem  
verduisterd hebt voorkomen door gewoon alle mogelijkheden te proberen. Er zijn  
ook een aantal redenen waarom een indringer in jouw systeem  
ge&iuml;nteresseerd zou kunnen zijn, welke we later zullen bespreken.
<H3>Beveiliging van de host</H3>

<P> Het gebied van beveiliging waar beheerders zich het meest op  
concentreren is wellicht de host-gebaseerde beveiliging. Dit houdt
kenmerkend in het ervoor zorgen dat je eigen systeem veilig is en
het hopen dat iedereen op je netwerk hetzelfde doet. Goede wachtwoorden
kiezen, de lokale netwerkdiensten van je host beveiligen, de
account-bestanden goed bijhouden en programma's met bekende
beveiligingslekken verbeteren, zijn onder andere de dingen die onder de
verantwoordelijkheid vallen van de lokale beveiligingsbeheerder. Hoewel dit
absoluut noodzakelijk is, kan het een ontmoedigende taak worden als je
systeem groter wordt dan een paar machines. 
<H3>Beveiliging van het lokale netwerk</H3>

<P> Beveiliging van het netwerk is net zo belangrijk als beveiliging  
van de lokale host. Met honderden, duizenden of meer computers op  
hetzelfde netwerk kun je er niet op vertrouwen dat al deze systemen  
veilig zijn. Je ervan verzekeren dat alleen geautoriseerde gebruikers je  
netwerk kunnen gebruiken, firewalls bouwen, een hoge mate van  
versleuteling gebruiken en zeker weten dat er geen "louche" (dus onveilige)  
machines met je netwerk verbonden zijn, maakt allemaal deel uit van de taken  
van de beveiligingsbeheerder van een netwerk. 
<P> Dit document behandelt enkele van de technieken die worden gebruikt om je
site te beveiligen en zal je hopelijk enkele manieren laten zien om te
voorkomen dat een indringer toegang krijgt tot wat je probeert te
beschermen.
<H3>Beveiliging door onduidelijkheid</H3>

<P> Een soort beveiliging die besproken moet worden is "beveiliging door  
onduidelijkheid". Dit betekent bijvoorbeeld het verplaatsen van een dienst die  
bekende beveiligingskwetsbaarheden heeft naar een niet-standaard poort in de  
hoop dat aanvallers het niet in de gaten hebben en het dus niet misbruiken.  
Wees gerust dat ze kunnen vaststellen dat het er is en dat ze het zullen  
misbruiken. Beveiliging door onduidelijkheid is helemaal geen beveiliging.  
Simpelweg omdat het feit dat je een kleine site hebt of niet te veel  
opvalt niet inhoudt dat een indringer niet ge&iuml;nteresseerd zal zijn in  
wat je hebt. We zullen bespreken wat je beschermt in de volgende paragrafen.  
<H2>2.6 Organisatie van dit document</H2>

<P> Dit document is verdeeld in een aantal paragrafen. Ze behandelen  
verscheidene algemene beveiligingskwesties. De eerste, 
<A HREF="#fysieke-beveiliging">Fysieke beveiliging</A>, behandelt hoe je je  
fysieke machine moet beschermen tegen geknoei. De tweede, 
<A HREF="#lokale-beveiliging">Lokale beveiliging</A>, beschrijft hoe je je
systeem moet beschermen tegen geknoei van lokale gebruikers. De derde, 
<A HREF="#bestands-beveiliging">Beveiliging van bestanden en   bestandssystemen</A>, laat zien hoe je bestandssystemen en permissies op  
bestanden moet instellen. De volgende, 
<A HREF="#wachtwoord-beveiliging">Wachtwoordbeveiliging en -versleuteling</A>, bespreekt hoe je
versleuteling kunt gebruiken om je  machine en netwerk beter te beveiligen.
<A HREF="#kernel-beveiliging">Beveiliging van de kernel</A> bespreekt
welke kernelopties je moet instellen of je bewust van moet zijn voor een
veiliger systeem. 
<A HREF="#netwerk-beveiliging">Beveiliging van het netwerk</A> beschrijft hoe je je Linux systeem beter kunt beveiligen tegen
netwerkaanvallen. 
<A HREF="#beveiligings-voorbereidingen">Beveiligingsvoorbereidingen</A> bespreekt hoe je je machine(s) moet  
voorbereiden voor je ze on-line brengt. De volgende, 
<A HREF="#na-inbraak">Wat te doen tijdens en na een inbraak</A>, bespreekt wat te doen als je  
een aanval op je systeem constateert of ontdekt dat dit recentelijk is
gebeurd. In 
<A HREF="#bronnen">Bronnen</A> worden enkele primaire bronnen
opgesomd waar je meer over beveiliging kunt vinden. In de V en A paragraaf
<A HREF="#v-en-a">Veel gestelde vragen</A> worden enkele veel
gestelde vragen beantwoord en tot slot volgt een conclusie in 
<A HREF="#conclusie">Conclusie</A>.
<P> De twee belangrijkste punten die je je moet realiseren als je dit document  
leest, zijn:  
<UL>
<LI> Wees je bewust van je systeem. Controleer systeemlogs zoals  
<CODE>/var/log/messages</CODE>, houd een oogje op je systeem en </LI>
<LI> Houd je systeem up-to-date door je ervan te verzekeren dat je de meest  
recente software versies hebt ge&iuml;nstalleerd en verbeteringen hebt  
aangebracht bij beveiligingswaarschuwingen. Dit gewoonweg doen zal helpen om  
je systeem merkbaar veiliger te maken. </LI>
</UL>
<H2><A NAME="fysieke-beveiliging"></A> <A NAME="s3">3. Fysieke beveiliging </A></H2>

<P> De eerste laag van beveiliging waar je rekening mee moet houden is de  
fysieke beveiliging van je computersystemen. Wie heeft directe fysieke  
toegang tot je machine? Zouden ze dat ook moeten hebben? Kun je je machine  
beschermen tegen hun geknoei? Zou je dat ook moeten doen? 
<P> Hoeveel fysieke beveiliging je nodig hebt op je systeem is erg  
afhankelijk van je situatie en/of budget.
<P> Als je een thuisgebruiker bent, zul je waarschijnlijk niet veel nodig  
hebben (alhoewel je misschien je machine wilt beschermen tegen het geknoei  
van kinderen of hinderlijke familieleden). Als je in een laboratorium bent,  
zul je aanzienlijk meer nodig hebben, maar gebruikers moeten wel hun werk  
kunnen doen op hun machines. Veel van de volgende paragrafen bieden  
uitkomst. Als je in een kantoor bent, kun je wel of niet je machine  
beveiligen na kantoortijd of als je weg bent. Bij sommige bedrijven leidt het  
onbeveiligd achterlaten van je computer tot ontslag.
<P> Voor de hand liggende fysieke beveiligingsmethoden als sloten op  
deuren, kabels, afgesloten kasten en videobewaking zijn allemaal goede  
idee&euml;n, maar vallen buiten de strekking van dit document. :)
<H2>3.1 Computersloten</H2>

<P> Veel moderne PC-kasten bieden een voorziening om ze "op slot te doen".  
Gewoonlijk zal dit een socket aan de voorkant van de kast zijn, waarmee je met  
een bijgeleverd sleuteltje de computer op slot kunt zetten of van het slot  
kunt halen. Kastsloten kunnen helpen voorkomen dat iemand je PC steelt of de  
kast opent en je hardware rechtstreeks manipuleert/steelt. Soms kunnen ze ook  
voorkomen dat iemand je computer opnieuw opstart vanaf z'n eigen floppy of  
andere hardware. 
<P> Deze kastsloten doen verschillende dingen al naar gelang de  
ondersteuning in het moederbord en de wijze waarop de kast is gemaakt. Op veel  
PC's is het zo gemaakt dat je de kast moet openbreken om hem open te krijgen.  
Op enkele andere laten ze je geen nieuwe toetsenborden of muizen aansluiten.  
Raadpleeg de voorschriften van je moederbord of kast voor meer informatie. Dit  
kan soms een erg bruikbare voorziening zijn, ondanks dat de sloten gewoonlijk  
van erg lage kwaliteit zijn en makkelijk kunnen worden gesloopt door  
aanvallers met slotenmakersgereedschap.
<P> Sommige machines (voornamelijk SPARC's en Mac's) hebben een oog  
aan de achterkant waar je een kabel door kunt halen, zodat aanvallers de kabel  
moeten doorknippen of de kast moeten slopen om erin te kunnen komen. Een  
hangslot of een combinatieslot erdoor is een afschrikwekkend middel voor  
iemand die je machine wil stelen. 
<H2>3.2 Beveiliging van de BIOS</H2>

<P> De BIOS is het laagste niveau van software dat je x86-gebaseerde hardware  
configureert of manipuleert. LILO en andere Linux bootmethodes benaderen de  
BIOS om vast te stellen hoe je Linux machine opgestart moet worden. Andere  
hardware waar Linux op draait heeft vergelijkbare software (OpenFirmware op  
Mac's en nieuwe Sun's, Sun boot PROM, enz...). Je kunt je BIOS gebruiken om  
te voorkomen dat aanvallers je machine opnieuw opstarten en je Linux systeem  
manipuleren. 
<P> In de BIOS van veel PC's kun je een boot wachtwoord instellen. Dit  
verschaft niet zo heel veel beveiliging (de BIOS kan worden gereset of  
verwijderd als iemand in de kast kan komen), maar het kan een goed  
afschrikwekkend middel zijn (d.w.z. het kost tijd en laat sporen van  
geknoei na). Op dezelfde wijze kan op S/Linux (Linux voor SPARC(tm) processor  
machines) je EEPROM worden ingesteld om een boot-wachtwoord te vereisen.  
Dit kan vertragend werken voor aanvallers. 
<P> Veel x86 BIOS'sen staan je ook toe om diverse andere goede  
beveiligingsinstellingen te specificeren. Raadpleeg je BIOS handleiding of  
bekijk het de volgende keer als je opstart. Sommige BIOS'sen staan  
bijvoorbeeld het opstarten vanaf floppy drives niet toe en sommigen vereisen  
wachtwoorden om toegang te krijgen tot enkele BIOS voorzieningen.
<P> <EM> Let op</EM>: Als je een server machine hebt en je stelt een boot  
wachtwoord in, zal je machine niet onbeheerd opstarten. Houd in gedachten  
dat je in geval van een stroomstoring moet komen opdagen om het wachtwoord  
in te toetsen. ;( 
<H2>3.3 Beveiliging van de Boot Loader</H2>

<P> In de verschillende Linux boot loaders kan ook een wachtwoord  
ingesteld worden. LILO heeft bijvoorbeeld <CODE>password</CODE> en  
<CODE>restricted</CODE> instellingen; <CODE>password</CODE> vereist een  
wachtwoord bij het opstarten, terwijl <CODE>restricted</CODE> alleen een  
wachtwoord bij het opstarten vereist als je opties specificeert  
(zoals <CODE>single</CODE>) bij de <CODE>LILO</CODE> prompt. 
<P> Uit de lilo.conf man pagina:  
<BLOCKQUOTE><CODE>
<PRE>
   
password=password              
              The per-image option `password=...' (see below) applies to all images. 
restricted                 
              The per-image option `restricted' (see below) applies to all images.
             
       password=password                 
              Protect the image by a password.     

       restricted  
              A password is only required to boot the image if  
              parameters are specified  on  the  command  line   
              (e.g. single).  
</PRE>
</CODE></BLOCKQUOTE>
<P> Houd in gedachten dat wanneer je al deze wachtwoorden instelt, je ze  
ook moet onthouden. :) Onthoud ook dat deze wachtwoorden de vastbesloten  
aanvaller louter zullen vertragen. Ze kunnen niet voorkomen dat iemand  
opstart vanaf een floppy en je root partitie mount. Als je beveiliging  
samen met een boot loader gebruikt, kun je net zo goed het opstarten vanaf  
een floppy uitschakelen in de BIOS van je computer en de BIOS met een  
wachtwoord beschermen. 
<P> Als iemand beveiligingsgerelateerde informatie van een andere boot  
loader heeft, zouden we dat graag willen horen. (<CODE>grub</CODE>,
<CODE>silo</CODE>, <CODE>milo</CODE>, <CODE>linload</CODE>, enz.)
<P><EM>Let op</EM>: Als je een server machine hebt en je stelt een boot  
wachtwoord in, zal je machine <EM>niet</EM> onbeheerd opstarten. Houd in  
gedachten dat je in geval van een stroomstoring moet komen opdagen om het  
wachtwoord in te toetsen. ;( 
<H2>3.4 xlock en vlock</H2>

<P> Als je af en toe van je machine afdwaalt, is het wel aardig dat je de  
mogelijkheid hebt om je console te "vergrendelen" zodat niemand je werk kan  
verknoeien of bekijken. Twee programma's die dat doen zijn <CODE>xlock</CODE>  
en <CODE>vlock</CODE>. 
<P> <CODE>xlock</CODE> is een X beeldschermvergrendeling. Het zou bij elke Linux  
distributie moeten zitten die X ondersteunt. Bekijk hiervoor de man pagina voor  
meer opties, maar in het algemeen kun je <CODE>xlock</CODE> draaien vanaf elke  
xterm op je console en het zal het beeldscherm vergrendelen en om een  
wachtwoord vragen om te ontgrendelen. 
<P> <CODE>vlock</CODE> is een simpel klein programma waarmee je enkele of alle
virtuele consoles op je Linux box kunt vergrendelen. Je kunt alleen
degene waarop je aan het werk bent vergrendelen, of allemaal. Als je er maar
&eacute;&eacute;n afsluit, kunnen anderen binnenkomen en de console
gebruiken; ze kunnen alleen niet jouw virtuele console gebruiken totdat je
hem ontgrendelt. <CODE>vlock</CODE> wordt geleverd bij Redhat Linux, maar de  
weg die jij moet bewandelen om zover te komen kan anders zijn.
<P> Natuurlijk zal het vergrendelen van je console iemand ervan weerhouden om  
met je werk te knoeien, maar het zal ze niet beletten om je machine opnieuw  
op te starten of anderszins je werk te verstoren. Het weerhoudt ze ook niet om  
je machine te benaderen vanaf een andere machine op het netwerk en problemen  
te veroorzaken. 
<P> Maar belangrijker, het weerhoudt iemand niet om het X Window systeem  
geheel te verlaten en naar een normale virtuele login prompt te gaan of  
naar de virtuele console waarvan X11 is opgestart en het op non-actief te  
zetten om zodoende jouw privileges te verkrijgen. Om deze reden zou je moeten  
overwegen om het alleen in combinatie met xdm te gebruiken. 
<H2>3.5 Fysieke beveiligingsgevaren opsporen</H2>

<P> Het eerste waar je altijd op moet letten is of je machine opnieuw is  
opgestart. Omdat Linux een robuust en stabiel besturingssysteem is, zijn de  
enige keren dat het opnieuw opgestart moet worden, de keren dat <EM>jij</EM>  
het buiten gebruik stelt voor upgrades van het besturingssysteem, wisseling  
van hardware of iets dergelijks. Als je machine opnieuw is opgestart buiten  
jouw medeweten, kan dat een teken zijn dat een indringer je systeem in gevaar  
brengt. Veel van de manieren waarop je machine in gevaar kan worden gebracht,  
vereisen dat de indringer je machine opnieuw opstart of hem uitschakelt. 
<P> Controleer op tekenen van geknoei met de kast of de omgeving van de  
computer. Hoewel veel indringers hun sporen in de logbestanden verwijderen,   
is het een goed idee om ze te controleren en enige discrepantie op te merken.  
<P> Het is ook een goed idee om loggegevens op een veilige plaats op te
slaan, bijvoorbeeld op een toegewijde log server op je goed beschermde
netwerk. Als een machine eenmaal te maken heeft gehad met een aanval, zijn
loggegevens van weinig nut meer, omdat ze hoogstwaarschijnlijk ook zijn
aangepast door de indringer. 
<P> De syslog daemon kan zo worden ingesteld dat hij loggegevens automatisch  
naar een centrale syslog server stuurt, maar dit wordt kenmerkend
ongecodeerd gedaan, zodat een indringer de mogelijkheid heeft om de
gegevens te bekijken terwijl ze worden verzonden. Dit kan informatie
over je netwerk blootgeven, waarvan het niet de bedoeling is dat het
openbaar wordt. Er zijn syslog daemons beschikbaar die de gegevens
coderen terwijl ze worden verzonden. 
<P> Wees je ook bewust dat het namaken van syslogberichten gemakkelijk
is   -- met een speciaal programma dat reeds gepubliceerd is. Syslog
accepteert   zelfs net log entries die het doen voorkomen alsof ze van de
lokale host   afkomstig zijn, zonder enige aanwijzing over hun ware herkomst.
<P> Enkele dingen die je moet controleren in je logs:  
<UL>
<LI> korte of onvolledige logs </LI>
<LI> logs die vreemde tijdstippen bevatten </LI>
<LI> logs met verkeerde permissies of eigendomsrecht </LI>
<LI> registraties van het opnieuw opstarten van het systeem of diensten  </LI>
<LI> ontbrekende logs </LI>
<LI> <CODE>su</CODE> entries of logins vanaf vreemde plaatsen </LI>
</UL>
  
<P> We zullen systeemloggegevens 
<A HREF="#logs">later</A> in  
deze HOWTO bespreken. 
<H2><A NAME="lokale-beveiliging"></A> <A NAME="s4">4. Lokale beveiliging</A></H2>

<P> Het volgende waar we naar gaan kijken is de beveiliging van je systeem  
tegen aanvallen van lokale gebruikers. Zeiden we zojuist <EM>lokale</EM>  
gebruikers? Ja! 
<P> Toegang verkrijgen tot een lokaal gebruikersaccount is een van de  
eerste dingen die indringers op een systeem proberen op hun weg naar het  
misbruiken van het root account. Met een lakse lokale beveiliging kunnen  
ze hun normale gebruikerstoegang "upgraden" naar een roottoegang door  
gebruik te maken van een verscheidenheid aan bugs en minnetjes
ingestelde lokale diensten. Als je ervoor zorgt dat je lokale beveiliging  
waterdicht is, zal de indringer nog een hindernis moeten nemen. 
<P> Lokale gebruikers kunnen ook een hoop schade aanrichten op je systeem,  
zelfs (juist) als ze inderdaad diegene zijn die ze zeggen dat ze zijn. Het  
verstrekken van accounts aan mensen die je niet kent of van wie je geen  
achtergrondinformatie hebt, is een erg slecht idee. 
<H2>4.1 Nieuwe accounts aanmaken</H2>

<P> Je moet ervan overtuigd zijn dat je gebruikersaccounts verschaft met  
slechts de minimale vereisten voor de taak die ze moeten doen. Als je je zoon  
(10 jaar) een account verschaft, zul je wellicht willen dat hij alleen toegang  
heeft tot een tekstverwerker of tekenprogramma, maar geen gegevens kan  
verwijderen die niet van hem zijn. 
<P> Enkele goede vuistregels als je andere mensen rechtmatige toegang tot je  
Linux-machine toestaat:
<P>
<UL>
<LI> Geef ze het minimale aantal privileges dat ze nodig hebben.</LI>
<LI> Weet wanneer/waar vandaan ze inloggen of waar vandaan ze zouden moeten  
inloggen.</LI>
<LI> Verwijder niet gebruikte accounts.</LI>
<LI> Het gebruik van hetzelfde gebruikers ID op alle computers en  
netwerken is aan te raden om het onderhoud van accounts te vereenvoudigen. Ook  
staat het een eenvoudigere analyse van loggegevens toe.</LI>
<LI> Het aanmaken van groeps-gebruiker ID's zou absoluut verboden moeten zijn.  
Gebruikersaccounts zorgen ook voor verantwoordelijkheid en dit is bij  
groepsaccounts niet mogelijk.</LI>
</UL>
<P> Veel lokale gebruikersaccounts die gebruikt worden bij een aanval zijn  
in geen maanden of jaren meer gebruikt. Omdat niemand ze gebruikt,
zorgen ze voor een ideaal aanvalsvoertuig.
<H2><A NAME="root-beveiliging"></A> 4.2 Root beveiliging</H2>

<P> Het meest gewilde account op je machine is het root (superuser) account.  
Dit account heeft zeggenschap over de gehele machine, wat ook zeggenschap kan  
inhouden over andere machines op het netwerk. Onthoud dat je het root account  
alleen moet gebruiken voor hele korte specifieke taken en dat het meestal
uitgevoerd moet worden als een normale gebruiker. Zelfs kleine foutjes als
je ingelogd bent als root kunnen problemen veroorzaken. Hoe korter je
ingelogd bent met root privileges, hoe veiliger het is.
<P> Enkele trucks om te voorkomen dat je je computer overhoop haalt als root:  
<P>
<UL>
<LI> Als je bezig bent met een complex commando, probeer het dan eerst op  
een niet-destructieve manier ... vooral commando's die wildcards gebruiken:  
als je bijvoorbeeld <CODE> "rm foo*.bar"</CODE> wilt doen, doe dan eerst <CODE>"ls foo*.bar"</CODE> om zeker te weten dat je de bestanden verwijdert die je wilde  
verwijderen. Het gebruik van <CODE>echo</CODE> in plaats van destructieve  
commando's werkt soms ook. </LI>
<LI> Voorzie je gebruikers van een standaard alias voor het rm commando om  
een bevestiging te vragen voordat ze bestanden verwijderen. </LI>
<LI> Wordt alleen root om enkele specifieke taken uit te voeren. Als je
jezelf erop betrapt dat je probeert uit te vinden hoe iets werkt, ga dan
eerst terug naar de gewone gebruiker-shell, totdat je <CODE>zeker</CODE> weet
wat er als root gedaan moet worden. </LI>
<LI> Het command path voor de root gebruiker is erg belangrijk. Het command  
path (dat wil zeggen de <CODE>PATH</CODE> omgevingsvariabele) specificeert de  
directory's waarin de shell zoekt naar programma's. Probeer het command path  
voor de root gebruiker zoveel mogelijk te beperken en zet <EM>nooit</EM>  
een <CODE>.</CODE> (hetgeen betekent "de huidige directory") in je PATH. Zorg er  
bovendien voor dat je nooit directory's met schrijfpermissie in je zoekpad  
hebt, omdat dit aanvallers toestaat om bestaande binary's aan te passen of  
nieuwe binary's aan je zoekpad toe te voegen, hetgeen hen toestaat als root te  
opereren de volgende keer dat je dat commando uitvoert. </LI>
<LI> Gebruik nooit de rlogin/rsh/rexec tools (genaamd de r-utility's) als  
root. Ze zijn onderhevig aan vele soorten aanvallen en zijn ronduit gevaarlijk  
als je ze uitvoert als root. Maak nooit een <CODE>.rhosts</CODE> bestand aan voor  
root. </LI>
<LI> Het <CODE>/etc/securetty</CODE> bestand bevat een lijst met terminals  
waarop root in kan loggen. Standaard (onder Red Hat Linux) is dit ingesteld
op   alleen de lokale virtuele consoles (vty's). Wees erg voorzichtig met het  
toevoegen van iets anders aan dit bestand. Je zou indirect op je normale    
gebruikersaccount in moeten kunnen loggen en vervolgens <CODE>su</CODE> als dat  
nodig is (hopelijk via <CODE>
<A HREF="#ssh">ssh</A></CODE> of een ander  
versleuteld kanaal), zodat er geen reden is waarom je direct als root in zou  
moeten loggen. </LI>
<LI> Wees altijd langzaam en weloverwogen als je bezig bent als root. Je  
acties kunnen een heleboel dingen be&iuml;nvloeden. Denk na voordat je typt!  </LI>
</UL>
 
<P> Als het absoluut noodzakelijk is om iemand (hopelijk erg vertrouwd)
roottoegang tot je machine toe te staan, zijn er een aantal tools
die kunnen helpen. <CODE>sudo</CODE> staat gebruikers toe hun wachtwoord te
gebruiken om toegang te krijgen tot een beperkte set commando's als root.
Zodoende kun je, bijvoorbeeld, een gebruiker in staat stellen om verwijderbare
media uit te  werpen en te mounten op je Linux box, maar verder geen andere
root privileges te hebben. <CODE>sudo</CODE> houdt ook een log bij van alle
geslaagde en mislukte sudo pogingen, zodat je uit kunt zoeken wie welk
commando gebruikte om wat te doen. Om deze reden werkt <CODE>sudo</CODE> zelfs
goed op plaatsen waar een aantal mensen root toegang hebben, omdat het je
helpt om aangebrachte wijzigingen bij te houden. 
<P> Hoewel <CODE>sudo</CODE> gebruikt kan worden om bepaalde gebruikers bepaalde
privileges voor bepaalde taken te geven, heeft het een aantal tekortkomingen.
Het moet alleen gebruikt worden voor een beperkt takenpakket, zoals een
server opnieuw opstarten of nieuwe gebruikers toevoegen. Elk programma
waarbij het uitwijken naar een shell mogelijk is, zal root toegang  
verschaffen aan een gebruiker die het aanroept via <CODE>sudo</CODE>. Dit omvat de
meeste tekstverwerkers bijvoorbeeld. Ook een programma zo onschadelijk als 
<CODE>/bin/cat</CODE> kan worden gebruikt om bestanden te overschrijven, waarmee 
het mogelijk zou kunnen worden om root te misbruiken. Beschouw <CODE>sudo</CODE> 
als een middel voor het toekennen van verantwoordelijkheden en verwacht niet 
dat het de root gebruiker kan vervangen en tevens veilig is. 
<H2><A NAME="bestands-beveiliging"></A> <A NAME="s5">5. Beveiliging van bestanden en bestandssystemen</A></H2>

<P> Een paar minuten van voorbereiding en planning vooraf, voordat je je  
systemen online zet, kan helpen ze (en de gegevens die erop opgeslagen zijn)  
te beschermen.
<P>
<UL>
<LI>Er zou nooit een reden mogen zijn om toe te staan dat
SUID/SGID programma's uitgevoerd mogen worden vanuit de home directory's van
gebruikers. Gebruik de <CODE>nosuid</CODE> optie in <CODE>/etc/fstab</CODE> voor
partities die beschrijfbaar zijn door anderen dan root. Je wilt misschien ook
<CODE>nodev</CODE> en <CODE>noexec</CODE> toepassen op de home partities van
gebruikers, evenals op <CODE>/var</CODE>, dus het uitvoeren van programma's is
verboden, net als het cre&euml;ren van character of block devices, wat
trouwens toch nooit noodzakelijk zou moeten zijn.</LI>
<LI> Als je bestandssystemen exporteert middels NFS, let er dan op dat je
<CODE>/etc/exports</CODE> instelt met de meest beperkte toegang mogelijk. Dit  
houdt in dat je geen gebruik moet maken van wildcards, geen root  
schrijfpermissie toestaat en waar mogelijk read-only exporteert. </LI>
<LI> Stel de bestandsaanmaak <CODE>umask</CODE> van je gebruikers zo beperkt  
mogelijk in. Zie 
<A HREF="#umask">umask instellingen</A>.</LI>
<LI> Als je gebruik maakt van een netwerk bestandssysteem zoals NFS om  
bestandssystemen te mounten, let er dan op dat je <CODE>/etc/exports</CODE>  
instelt met geschikte beperkingen. Kenmerkend is het gebruik van 'nodev',  
`nosuid' en misschien `noexec' wenselijk.</LI>
<LI> Stel limieten in voor het bestandssysteem in plaats van het
toestaan van <CODE>unlimited</CODE>, wat standaard is. Je kunt de limieten per
gebruiker beheren door gebruik te maken van de resource-limits PAM module en
<CODE>/etc/pam.d/limits.conf</CODE>. De limieten voor de groep <CODE>users</CODE>  
kunnen er bijvoorbeeld zo uit zien:      
  
<BLOCKQUOTE><CODE>
<PRE>
@users     hard  core    0        
@users     hard  nproc   50       
@users     hard  rss     5000
</PRE>
</CODE></BLOCKQUOTE>
     
  
Dit zegt: verbied het cre&euml;ren van core bestanden, beperk het aantal  
processen tot 50 en beperk het geheugengebruik tot 5M per gebruiker.</LI>
<LI> De <CODE>/var/log/wtmp</CODE> en <CODE>/var/run/utmp</CODE> bestanden  
bevatten de login records van alle gebruikers op je systeem. Hun zuiverheid  
moet behouden blijven, omdat ze gebruikt kunnen worden om te bepalen wanneer  
en waar vandaan een gebruiker (of een mogelijke indringer) je systeem is  
binnengekomen. Deze bestanden moeten ook <CODE>644</CODE> permissies hebben,  
zonder dat het invloed heeft op het normale systeemgebruik.</LI>
<LI> Het onveranderlijke bit kan gebruikt worden om te voorkomen dat een
bestand dat beschermd moet worden per ongeluk verwijderd of overschreven
wordt. Het voorkomt ook dat iemand een symbolische link aanmaakt naar het
bestand (zulke symbolische links zijn de bron geweest van aanvallen die
betrekking hadden op het verwijderen van <CODE>/etc/passwd</CODE> of  
<CODE>/etc/shadow</CODE>). Zie de <CODE>chattr</CODE>(1) man pagina voor informatie  
over het onveranderlijke bit.</LI>
<LI> SUID en SGID bestanden op je systeem vormen een mogelijk  
beveiligingsrisico en zullen nauwgezet in de gaten gehouden moeten worden.  
Omdat deze programma's speciale privileges toekennen aan de gebruiker die ze  
uitvoert, is het noodzakelijk om je ervan te verzekeren dat er geen onveilige  
programma's ge&iuml;nstalleerd zijn. Een favoriet trucje van crackers is om   
SUID-root programma's te misbruiken en dan een SUID programma achter te laten  
als een achterdeur om de volgende keer binnen te komen, zelfs als het  
oorspronkelijke gat is gedicht.

<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>

       
Zoek alle SUID/SGID programma's op je systeem en houd bij wat ze
zijn, zodat je je bewust bent van enige veranderingen die kunnen duiden op
een mogelijke indringer. Gebruik het volgende commando om te zoeken naar
alle SUID/SGID programma's op je systeem:
  
<BLOCKQUOTE><CODE>
<PRE>
root#  find / -type f \( -perm -04000 -o -perm -02000 \)
</PRE>
</CODE></BLOCKQUOTE>

  
De Debian distributie voert elke nacht een taak uit om te bepalen welke  
SUID programma's er bestaan. Het vergelijkt het dan met de uitvoer van de  
vorige nacht. Je kunt kijken in <CODE>/var/log/setuid*</CODE> voor deze log.
    
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>


Je kunt de SUID of SGID permissies op een verdacht programma verwijderen  
met <CODE>chmod</CODE> en ze dan terugzetten als je denkt dat dat absoluut nodig  
is.</LI>
<LI> Bestanden met schrijfpermissie voor iedereen, in het bijzonder  
systeembestanden, kunnen een beveiligingslek zijn als een cracker toegang  
krijgt tot je systeem en ze aanpast. Directory's met schrijftoegang voor  
iedereen zijn bovendien gevaarlijk, omdat ze een cracker toestaan om naar wens  
bestanden toe te voegen of te verwijderen. Om alle bestanden met  
schrijfpermissie voor iedereen op je systeem te vinden, gebruik je het  
volgende commando:      
  
<BLOCKQUOTE><CODE>
<PRE>
root# find / -perm -2 ! -type l -ls
</PRE>
</CODE></BLOCKQUOTE>
    
  
en verzeker je ervan dat je weet waarom deze bestanden schrijfpermissie  
hebben. Bij normaal gebruik zullen verscheidene bestanden schrijfpermissie  
voor iedereen hebben, inclusief enkele van <CODE>/dev</CODE> en symbolische links,  
dus middels <CODE>! -type l</CODE> worden deze niet meegenomen door het voorgaande  
<CODE>find</CODE> commando.</LI>
<LI> Bestanden die niemand toebehoren kunnen ook een indicatie zijn dat  
een indringer je systeem is binnengedrongen. Je kunt bestanden op je systeem  
die geen eigenaar hebben of tot geen enkele groep behoren, vinden met het  
commando:       
  
<BLOCKQUOTE><CODE>
<PRE>
root# find / -nouser -o -nogroup -print
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> Het zoeken naar <CODE>.rhosts</CODE> bestanden zou onderdeel uit moeten
maken van je vaste systeembeheertaken, omdat deze bestanden
niet   toegestaan zouden mogen zijn op je systeem. Onthoud, een cracker heeft  
slechts &eacute;&eacute;n onveilig account nodig om mogelijk toegang tot je  
gehele netwerk te verkrijgen. Je kunt alle <CODE>.rhosts</CODE> bestanden op je  
systeem vinden met het volgende commando:         
<BLOCKQUOTE><CODE>
<PRE>
root# find /home -name .rhosts -print
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> Tot slot, voordat je de permissies op welke systeembestanden dan  
ook gaat wijzigen, moet je je ervan verzekeren dat je begrijpt wat je aan het  
doen bent. Verander nooit de permissies van een bestand, omdat het de  
makkelijkste manier lijkt om dingen werkend te krijgen. Bepaal altijd waarom  
het bestand die permissie heeft alvorens het te veranderen.</LI>
</UL>
<H2><A NAME="umask"></A> 5.1 Umask instellingen</H2>

<P> Het <CODE>umask</CODE> commando kan gebruikt worden om de standaard manier  
waarop bestanden op je systeem aangemaakt worden te bepalen. Het is de achtste  
aanvulling van de gewenste bestandsmodus. Als bestanden worden aangemaakt
zonder te letten op hun permissie-instellingen, kan de gebruiker onbewust
lees- of schrijfpermissie geven aan iemand die deze permissie niet mag
hebben. Kenmerkende <CODE>umask</CODE> instellingen bevatten <CODE>022</CODE>,
<CODE>027</CODE> en <CODE>077</CODE> (welke de meest beperkte is). Normaal
gesproken wordt umask ingesteld in  <CODE>/etc/profile</CODE>, zodat het van
toepassing is op alle gebruikers op het systeem. Het bestandsaanmaak-mask
kan worden berekend door de gewenste waarde af te trekken van 777. Met
andere woorden, een umask van 777 heeft tot gevolg dat nieuw aangemaakte
bestanden voor niemand lees-, schrijf- of uitvoerpermissies bevatten. Een
mask van 666 heeft tot gevolg dat nieuw aangemaakte bestanden een mask van
111 hebben. Je kunt bijvoorbeeld een regel hebben die er zo uitziet:
<P>
<BLOCKQUOTE><CODE>
<PRE>
# Set the user's default umask 
  umask 033
</PRE>
</CODE></BLOCKQUOTE>
<P> Let erop dat je de umask van root <CODE>077</CODE> maakt, wat lees-, schrijf  
en uitvoerpermissie voor andere gebruikers uitschakelt, tenzij het expliciet  
is gewijzigd met <CODE>chmod</CODE>. In dit geval zullen nieuw aangemaakte  
directory's 744 permissies hebben, verkregen door 033 af te trekken van 777.  
Nieuw aangemaakte bestanden die gebruik maken van de 033 umask, zullen   
permissies van 644 hebben. 
<P> Als je Red Hat gebruikt en je houdt aan hun gebruiker- en groep-ID  
aanmaakschema (User Private Groups), is het alleen noodzakelijk om  
<CODE>002</CODE> voor een <CODE>umask</CODE> te gebruiken. Dit komt door het feit dat  
de standaard instelling &eacute;&eacute;n gebruiker per groep is. 
<H2>5.2 Bestandspermissies</H2>

<P> Het is belangrijk om je ervan te verzekeren dat je systeembestanden niet  
open staan voor aanpassingen door gebruikers en groepen die zulk  
systeemonderhoud niet zouden moeten doen. 
<P> Unix scheidt toegangsbeheer op bestanden en directory's volgens drie  
kenmerken: eigenaar, groep en anderen. Er is altijd exact &eacute;&eacute;n  
eigenaar, een willekeurig aantal leden van de groep en alle anderen.
<P> Een korte uitleg van Unix permissies:
<P> Eigendom   - Welke gebruiker(s) en groep(en) heeft/hebben het beheer over  
de permissie-instellingen van de node en parent van de node. 
<P> Permissies - Bits die kunnen worden ingesteld of opnieuw ingesteld kunnen  
worden om bepaalde soorten toegang tot ze te kunnen verlenen. Permissies voor  
directory's kunnen een andere betekenis hebben dan dezelfde set permissies  
voor bestanden. 
<P><B>Lezen:</B>      
<UL>
<LI> De mogelijkheid hebben om de inhoud van een bestand te kunnen lezen</LI>
<LI> De mogelijkheid hebben om een directory te kunnen lezen</LI>
</UL>
<P><B>Schrijven:</B>    
<UL>
<LI> De mogelijkheid hebben om een bestand te kunnen toevoegen of wijzigen</LI>
<LI> De mogelijkheid hebben om bestanden in een directory te kunnen
verwijderen of verplaatsen </LI>
</UL>
<P><B>Uitvoeren:</B>    
<UL>
<LI> De mogelijkheid hebben om een binair programma of shell script uit te kunnen  
voeren </LI>
<LI> De mogelijkheid hebben om in een directory te kunnen zoeken, gecombineerd met  
leestoegang </LI>
</UL>
 
<P>
<DL>
<DT><B> Save Text attribuut: (Voor directory's)</B><DD><P>Het "sticky bit" heeft ook een andere betekenis als het toegepast wordt op  
directory's dan wanneer het toegepast wordt op bestanden. Als het "sticky  
bit" wordt ingesteld op een directory, mag een gebruiker alleen bestanden  
verwijderen die zijn eigendom zijn of waarvoor hem expliciet  
schrijfpermissie is verleend, zelfs wanneer hij schrijfpermissie heeft  
voor de directory. Dit is ontworpen voor directory's als <CODE>/tmp</CODE>, die  
schrijfpermissie voor iedereen hebben, maar waar het misschien niet  
wenselijk is dat elke gebruiker naar wens bestanden kan verwijderen. Het  
"sticky bit" is te zien als een <CODE>t</CODE> in een lange directory  
opsomming.
</DL>
<P>
<DL>
<DT><B> SUID attribuut: (Voor bestanden) </B><DD><P>Dit beschrijft set-uder-id permissies op het bestand. Als de set-user-ID 
access mode is ingesteld in de eigendomsrechten en het bestand is executable, 
zullen processen die het uitvoeren toegang verkrijgen tot systeembronnen, 
gebaseerd op de gebruiker die eigenaar van het bestand is, in tegenstelling 
tot de gebruiker die het proces heeft aangemaakt. Dit is de oorzaak van de
vele "buffer overflow" misbruiken.
</DL>
<P>
<DL>
<DT><B> SGID attribuut: (Voor bestanden)</B><DD><P>Indien ingesteld in de groeppermissies, beheert deze bit de "set-group-ID" 
status van een bestand. Dit gaat op dezelfde manier als SUID, behalve dat het 
nu op de groep betrekking heeft. Het bestand moet executable zijn voordat dit
enig effect kan hebben.
</DL>
<P>
<DL>
<DT><B> SGID attribuut: (Voor directory's)</B><DD><P>Als je het SGID bit op een directory instelt (met <CODE>chmod g+s <I>directory</I></CODE>), hebben bestanden die in die directory aangemaakt 
zijn hun groep ingesteld op de groep van de directory. 
</DL>
 
<P> Jij - De eigenaar van het bestand
<P> Groep - De groep waar je toe behoort
<P> Iedereen - Iedereen op het systeem die niet de eigenaar is en geen 
deel uitmaakt van de groep
<P><B>Bestandsvoorbeeld:</B>
<P>
<BLOCKQUOTE><CODE>
<PRE>
  
       -rw-r--r--  1 kevin  users                 114 Aug 28  1997 .zlogin     
       1e bit - directory?                      (nee)            
        2e bit - lezen door eigenaar?            (ja, door kevin)       
         3e bit - schrijven door eigenaar?        (ja, door kevin)          
          4e bit - uitvoeren door eigenaar?        (nee)        
           5e bit - lezen door groep?               (ja, door users)      
            6e bit - schrijven door groep?           (nee)          
             7e bit - uitvoeren door groep?           (nee)           
              8e bit - lezen door iedereen?            (ja, door iedereen)    
               9e bit - schrijven door iedereen?        (nee)    
                10e bit - uitvoeren door iedereen?       (nee)    
</PRE>
</CODE></BLOCKQUOTE>
<P> De volgende regels zijn voorbeelden van de minimale set van permissies 
die vereist zijn voor de beschreven toegang. Misschien wil je meer permissies 
geven dan hetgeen hier opgesomd is, maar dit zou moeten beschrijven wat deze 
minimale permissies op bestanden doen:
<P>
<BLOCKQUOTE><CODE>
<PRE>
     
-r-------- Staat leestoegang op het bestand toe aan de eigenaar. 
--w------- Staat het de eigenaar toe om het bestand aan te passen of te
           verwijderen.(Merk op dat iedereen met schrijfpermissie op de
           directory waar het bestand zich in bevindt, het kan overschrijven
           en dus verwijderen.)     
---x------ De eigenaar kan dit programma uitvoeren, maar geen shell scripts  
           waarvoor ook nog leestoegang nodig is.     
---s------ Uitvoeren is mogelijk met een effectieve User-ID = naar eigenaar.  
--------s- Uitvoeren is mogelijk met een effectieve Group-ID = naar groep. 
-rw------T Geen update van "last modified time". Wordt meestal gebruikt voor  
           swap bestanden.     
---t------ Geen effect.(voorheen sticky bit)  
</PRE>
</CODE></BLOCKQUOTE>
<P><B>Directoryvoorbeeld:</B>
<P>
<BLOCKQUOTE><CODE>
<PRE>
     
       drwxr-xr-x  3 kevin  users                   512 Sep 19 13:47 .public_html/                 
       1e bit - directory?                        (ja, het bevat veel bestanden)                     
        2e bit - lezen door eigenaar?              (ja, door kevin) 
         3e bit - schrijven door eigenaar?          (ja, door kevin)   
          4e bit - uitvoeren door eigenaar?          (ja, door kevin)         
           5e bit - lezen door groep?                 (ja, door users)   
            6e bit - schrijven door groep?             (nee)          
             7e bit - uitvoeren door groep?             (ja, door users)      
              8e bit - lezen door iedereen?              (ja, door iedereen)                   
               9e bit - schrijven door iedereen?          (nee)    
                10e bit - uitvoeren door iedereen?         (ja, door iedereeen)     
</PRE>
</CODE></BLOCKQUOTE>
<P> De volgende regels zijn voorbeelden van de minimale set van permissies 
die vereist zijn voor de beschreven toegang. Misschien wil je meer permissies 
geven dat hetgeen hier opgesomd is, maar dit zou moeten beschrijven wat deze 
minimale permissies op directory's doen:
<P>
<BLOCKQUOTE><CODE>
<PRE>
    
dr-------- De inhoud kan opgesomd worden, maar bestandsattributen kunnen niet 
           gelezen worden.    
d--x------ De directory is toegankelijk en kan in opdrachten worden verwerkt
           waarin het directorypad wordt gebruikt.   
dr-x------ Bestandsattributen kunnen gelezen worden door de eigenaar 
d-wx------ Bestanden kunnen worden aangemaakt/verwijderd, zelfs als de 
           directory niet de huidige is.   
d------x-t Voorkomt dat bestanden worden verwijderd door anderen met 
           schrijftoegang. Wordt gebruikt bij /tmp.   
d---s--s-- Geen effect.    
</PRE>
</CODE></BLOCKQUOTE>
<P> Systeemconfiguratie bestanden (meestal in <CODE>/etc</CODE>) zijn meestal 
modus <CODE>640</CODE> (<CODE>-rw-r-----</CODE>) en eigendom van root. Afhankelijk van 
de beveiligingsvereisten van je site kun je dit aanpassen. Laat nooit enige 
systeembestanden beschrijfbaar zijn voor een groep of iedereen. Sommige 
configuratiebestanden, waaronder <CODE>/etc/shadow</CODE>, zouden alleen leesbaar 
voor root moeten zijn en directory's in <CODE>/etc</CODE> zouden op z'n minst niet 
toegankelijk voor anderen moeten zijn.
<P>
<DL>
<DT><B> SUID shell scripts</B><DD><P>SUID shell scripts vormen een serieus beveiligingsrisico en om deze reden zal 
de kernel ze niet toejuichen. Ongeacht hoe veilig je denkt dat een shell 
script is, het kan worden misbruikt om een cracker een root shell te 
geven.
</DL>
<H2>5.3 Controle op integriteit</H2>

<P> Een andere zeer goede manier om lokale (en ook netwerk) aanvallen op je 
systeem op te sporen is het uitvoeren van een "integrity checker" zoals 
<CODE>Tripwire</CODE>, <CODE>Aide</CODE> of <CODE>Osiris</CODE>.  Deze "Integrity 
checkers" voeren een aantal controles uit op al je belangrijke binary's en 
configuratiebestanden en vergelijkt ze met een database van eerdere, 
goed-bewezen waarden als een naslagwerk. Kortom, alle veranderingen in de 
bestanden zullen genoteerd worden.
<P> Het is een goed idee om dit soort programma's op een floppy te 
installeren en dan het floppy tegen schrijven te beveiligen. Op deze manier 
kunnen indringers niet knoeien met de "Integrity checker" of de database 
veranderen. Als je zoiets eenmaal hebt ingesteld, is het een goed idee om het 
uit te voeren als een onderdeel van je normale beveiligingsbeheertaken  om te
zien of er iets is veranderd. 
<P> Je kunt zelfs een <CODE>crontab</CODE> entry toevoegen om het 
controleprogramma vanaf je floppy elke nacht uit te voeren en de resultaten 
in de ochtend per e-mail te krijgen. Iets als:     
<P>
<BLOCKQUOTE><CODE>
<PRE>
        
                        # set mailto 
                          MAILTO=kevin 
                        # run Tripwire   
                          15 05 * * * root /usr/local/adm/tcheck/tripwire   
</PRE>
</CODE></BLOCKQUOTE>
     
<P>zal je elke morgen om 5.15 uur een verslag mailen.
<P> "Integrety checkers" kunnen een uitkomst zijn om indringers op te sporen 
voordat je ze op een andere manier in de gaten krijgt. Omdat er op een 
doorsnee systeem veel bestanden wijzigen, moet je voorzichtig zijn in het 
bepalen van wat het werk van een cracker is en wat je zelf gedaan hebt.
<P> Je kunt de open source versie van <CODE>Tripwire</CODE> vinden op 
<A HREF="http://www.tripwire.org">http://www.tripwire.org</A>, zonder kosten. 
Handleidingen en ondersteuning kunnen aangeschaft worden.
<P><CODE>Aide</CODE> vind je op 
<A HREF="http://www.cs.tut.fi/~rammer/aide.html">http://www.cs.tut.fi/~rammer/aide.html</A>.
<P><CODE>Osiris</CODE> vind je op 
<A HREF="http://www.shmoo.com/osiris/">http://www.shmoo.com/osiris/</A>.
<H2>5.4 Trojan Horses</H2>

<P> "Trojan Horses" zijn genoemd naar de fabelachtige tactische zet in 
Homer's "Iliad".  Het idee is dat een cracker een programma of binary dat er 
goed uitziet verspreidt en andere mensen aanmoedigt het te downloaden en het 
uit te voeren als root. Het programma kan vervolgens schade aanrichten op hun 
systeem als ze niet opletten. Terwijl ze denken dat de binary die ze zojuist 
hebben verkregen iets doet (en dat is wellicht ook zo), schaadt het ook hun 
beveiliging. 
<P> Je moet voorzichtig zijn welke programma's je installeert op je computer. 
Red Hat levert MD5 checksums en PGP signatures op zijn RPM bestanden, zodat je 
kunt verifi&euml;ren dat je het origineel installeert. Andere distributies 
hebben soortgelijke methoden. Je moet nooit enige onbekende binary, waarvan je 
de source niet hebt, als root uitvoeren! Er zijn maar weinig aanvallers bereid 
om source code vrij te geven, zodat het in het openbaar aan een nauwkeurig
onderzoek kan worden onderworpen.
<P> Hoewel het veelomvattend kan zijn, vergewis je er dan van dat je
de  source van een programma van de originele distributie site afhaalt. Als
het  programa uitgevoerd gaat worden als root, zorg dan dat of jij of iemand
die je  vertrouwt de source heeft bekeken en geverifieerd heeft.
<H2><A NAME="wachtwoord-beveiliging"></A> <A NAME="s6">6. Wachtwoordbeveiliging en -versleuteling</A></H2>

<P> Wachtwoorden zijn &eacute;&eacute;n van de belangrijkste 
beveiligingsmogelijkheden die vandaag de dag gebruikt worden. Het is 
belangrijk voor zowel jezelf als je gebruikers om veilige, niet te raden, 
wachtwoorden te hebben. Het merendeel van de meer recente Linux distributies 
levert <CODE>passwd</CODE> programma's die het je niet toestaan om een makkelijk 
te raden wachtwoord in te stellen. Zorg dat je <CODE>passwd</CODE> programma up to 
date is en deze mogelijkheden heeft.
<P> Een diepgaande verhandeling over versleuteling valt buiten de strekking 
van dit document, maar een inleiding is op z'n plaats. Versleuteling is erg 
nuttig, waarschijnlijk zelfs noodzakelijk tegenwoordig. Er zijn veel 
verschillende methoden om gegevens te versleutelen, elk met zijn eigen 
kenmerken.
<P> De meeste Unix systemen (en Linux is geen uitzondering) gebruiken primair
een  eenrichtingsverkeer versleutelingsalgoritme, genaamd DES (Data Encryption
Standard)  om wachtwoorden te versleutelen. Dit versleutelde wachtwoord wordt
dan  opgeslagen in  (gebruikelijk) <CODE>/etc/passwd</CODE> (of minder
gebruikelijk)  <CODE>/etc/shadow</CODE>. Als je probeert in te loggen wordt het
wachtwoord dat je  intypt opnieuw versleuteld en vergeleken met de entry in
het bestand waarin je wachtwoorden worden opgeslagen. Als ze overeenkomen
moet het wel hetzelfde wachtwoord  zijn en word je toegang verleend. Hoewel
DES een tweerichtingsverkeer  versleutelingsalgoritme is (je kunt een bericht
coderen en decoderen, op  voorwaarde dat je de juiste sleutels hebt), is de
variant die de meeste  Unix systemen gebruiken de "one-way". Dit betekent dat
het niet mogelijk is om de  versleuteling om te keren om zodoende het
wachtwoord te verkrijgen vanuit de  inhoud van <CODE>/etc/passwd</CODE> (of
<CODE>/etc/shadow</CODE>).
<P>Aanvallen met brute kracht, zoals "Crack" of "John the Ripper" (zie paragraaf 
<A HREF="#crack">crack</A>
) kunnen vaak wachtwoorden raden, tenzij je wachtwoord 
afdoende willekeurig is. PAM modules (zie hieronder) staan je toe om een 
andere versleutelingsroutine voor je wachtwoorden te gebruiken. (MD5 of iets 
dergelijks). Je kunt tevens Crack in je voordeel gebruiken. Overweeg het 
periodiek uitvoeren van Crack op je wachtwoord database om onveilige 
wachtwoorden te vinden. Neem vervolgens contact op met de overtredende 
gebruiker en vertel hem dat hij zijn wachtwoord moet veranderen.
<P>Kijk op 
<A HREF="http://consult.cern.ch/writeup/security/security_3.html">http://consult.cern.ch/writeup/security/security_3.html</A> voor 
informatie over het kiezen van een goed wachtwoord.
<H2>6.1 PGP en Public-Key versleuteling</H2>

<P> Public-key versleuteling, zoals dat gebruikt wordt voor PGP, 
gebruikt een sleutel voor het coderen en een sleutel voor het decoderen. 
Traditionele versleuteling gebruikt echter dezelfde sleutel voor het coderen 
en decoderen; deze sleutel moet bekend zijn bij beide partijen en zal dus op 
de een af andere wijze veilig van de een naar de ander overgebracht moeten 
worden. 
<P> Om de noodzaak van het veilig overbrengen van de coderingssleutel te 
verlichten, gebruikt public-key versleuteling twee afzonderlijke sleutels: een 
publieke sleutel en een persoonlijke sleutel. Ieders publieke sleutel is
beschikbaar voor iedereen om de codering uit te voeren, terwijl 
tegelijkertijd iedereen zijn of haar persoonlijke sleutel heeft om 
berichten, die gecodeerd zijn met de juiste publieke sleutel, te 
decoderen.
<P> Zowel public-key als private-key versleuteling hebben hun voordelen en je 
kunt over deze verschillen lezen in 
<A HREF="http://www.rsa.com/rsalabs/newfaq/">The RSA Cryptography FAQ</A>, 
genoemd aan het eind van deze paragraaf.
<P> PGP (Pretty Good Privacy) wordt goed ondersteund onder Linux. De versies 
2.6.2 en 5.0 staan er bekend om dat ze goed werken. Voor een goed 
eerste-beginselen-boekje over PGP en hoe het te gebruiken, kun je de PGP FAQ 
bekijken: 
<A HREF="http://www.pgp.com/service/export/faq/55faq.cgi">http://www.pgp.com/service/export/faq/55faq.cgi</A>.
<P> Let erop dat je de versie gebruikt die geschikt is voor het land waar je 
woont. Als gevolg van exportbeperkingen door de regering van de VS, is het 
verboden om sterke versleuteling in elektronische vorm de landsgrenzen over te 
brengen. 
<P> Exportcontroles worden nu beheerd door EAR (Export Administration 
Regulations). Ze worden niet langer bepaald door ITAR.
<P> Er is ook een stap-voor-stap gids voor het instellen van PGP onder Linux, 
beschikbaar op 
<A HREF="http://mercury.chem.pitt.edu/~angel/LinuxFocus/English/November1997/article7.html">http://mercury.chem.pitt.edu/~angel/LinuxFocus/English/November1997/article7.html</A>. 
Het is geschreven voor de internationale versie van PGP, maar het is 
makkelijk aan te passen aan de versie voor de Verenigde Staten. Je hebt 
mogelijk ook een patch nodig voor de recente versies van Linux; de patch is 
beschikbaar op 
<A HREF="ftp://metalab.unc.edu/pub/Linux/apps/crypto">ftp://metalab.unc.edu/pub/Linux/apps/crypto</A>.
<P> Er is een project waar gewerkt wordt aan een gratis re-implementatie van 
PGP met open source. GnuPG is een complete en gratis vervanging van PGP. Omdat 
het geen IDEA of RSA gebruikt, kan het zonder enige beperkingen gebruikt 
worden. GnuPG komt bijna overeen met 
<A HREF="http://www.faqs.org/rfcs/rfc2440.html">OpenPGP</A>. Zie de GNU 
Privacy Guard webpagina voor meer informatie: 
<A HREF="http://www.gnupg.org">http://www.gnupg.org/</A>.
<P> Meer informatie over versleuteling kan gevonden worden in "The RSA 
cryptography FAQ", beschikbaar op 
<A HREF="http://www.rsa.com/rsalabs/newfaq/">http://www.rsa.com/rsalabs/newfaq/</A>. Hier vind je informatie over 
begrippen als "Diffie-Hellman", "public-key cryptography", "digital 
certificates", enz.
<H2>6.2 SSL, S-HTTP, HTTPS en S/MIME</H2>

<P> Gebruikers vragen vaak naar de verschillen tussen de diverse 
beveiligings- en versleutelingsprotocollen en hoe ze gebruikt moeten worden. 
Hoewel dit geen document over versleuteling is, is het een goed idee om kort 
uit te leggen wat elk protocol inhoudt en waar meer informatie te vinden is. 
<P>
<UL>
<LI><B>SSL:</B> - SSL, of Secure Sockets Layer, is een 
versleutelingsmethode die ontwikkeld is door Netscape om in beveiliging over 
het Internet te voorzien.  Het ondersteunt diverse verschillende 
versleutelingsprotocollen en voorziet in client en server authenticatie. SSL 
opereert op de transportlaag, cre&euml;ert een veilig versleuteld kanaal
met  gegevens en kan dus naadloos vele soorten gegevens versleutelen. Dit is
in de meeste gevallen te zien wanneer een veilige site wordt benaderd om een
veilig online  document te bekijken met Communicator en dient als de basis voor
veilige  communicatie met Communicator, net als vele andere  Netscape
Communications  gegevensversleuteling. Meer informatie kan worden gevonden op 
<A HREF="http://www.consensus.com/security/ssl-talk-faq.html">http://www.consensus.com/security/ssl-talk-faq.html</A>.  Informatie over 
Netscape's andere beveiligingsimplementaties en een goed startpunt voor deze 
protocollen is beschikbaar op 
<A HREF="http://home.netscape.com/info/security-doc.html">http://home.netscape.com/info/security-doc.html</A>.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI><B>S-HTTP:</B> - S-HTTP is een ander protocol dat voorziet in 
beveiligingsdiensten over het Internet. Het is ontworpen om te voorzien in 
vertrouwelijkheid, authenticatie, integriteit en niet afwijzend te zijn
[kan niet aangezien worden voor iemand anders] terwijl het meerdere
sleutelbeheertechnieken en cryptografische algoritmen ondersteunt via
onderhandeling over de mogelijkheden tussen de betrokken partijen in iedere
transactie. S-HTTP is beperkt tot de specifieke software die het
uitvoert en versleutelt elk bericht individueel. [Uit de RSA
Cryptography FAQ, pagina 138.]
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI><B>S/MIME:</B> - S/MIME, of Secure Multipurpose Internet Mail  
Extension, is een versleutelingsstandaard die gebruikt wordt om e-mail en 
andere soorten berichten op het Internet te versleutelen. Het is een open 
standaard, ontwikkeld door RSA, dus het is waarschijnlijk dat we het 
binnenkort onder Linux tegenkomen. Meer informatie over S/MIME kan worden 
gevonden op 
<A HREF="http://home.netscape.com/assist/security/smime/overview.html">http://home.netscape.com/assist/security/smime/overview.html</A>.</LI>
</UL>
<H2>6.3 Linux IPSEC uitvoeringen</H2>

<P> Afgezien van CIPE en andere vormen van gegevensversleuteling, zijn er
ook  diverse andere uitvoeringen van IPSEC voor Linux. IPSEC is een poging van
de IETF om cryptografisch-veilige communicaties op het IP netwerkniveau te  
cre&euml;ren en om te voorzien in authenticatie, integriteit, toegangscontrole
en vertrouwelijkheid. Informatie over IPSEC en ontwerpen voor Internet kan
gevonden worden op 
<A HREF="http://www.ietf.org/html.charters/ipsec-charter.html">http://www.ietf.org/html.charters/ipsec-charter.html</A>. Je kunt er ook
verwijzingen naar andere protocollen betreffende sleutelbeheer vinden en een 
IPSEC mailing list en archieven.
<P> De x-kernel Linux uitvoering, die ontwikkeld wordt op de Universiteit 
van Arizona, gebruikt een object-gebaseerde opzet voor het uitvoeren van
netwerkprotocollen genaamd x-kernel en kan worden gevonden op 
<A HREF="http://www.cs.arizona.edu/xkernel/hpcc-blue/linux.html">http://www.cs.arizona.edu/xkernel/hpcc-blue/linux.html</A>. Simpel
gezegd is de x-kernel een methode om berichten op het kernelniveau door
te geven, wat zorgt voor een gemakkelijkere uitvoering.  
<P> Een andere vrij verkrijgbare IPSEC uitvoering is de Linux FreeS/WAN  
IPSEC.  Hun webpagina verklaart:      
<P>
<BLOCKQUOTE>
"Met deze diensten kun je veilige tunnels door niet vertrouwde
netwerken bouwen. Alles wat door het niet vertrouwde net gaat wordt
gecodeerd door de IPSEC gateway machine en gedecodeerd door de gateway aan de
andere kant. Het resultaat is Virtual Private Network of VPN. Dit is een
netwerk dat effectief priv&eacute; is, ondanks dat het machines op
verschillende sites omvat die zijn verbonden door het onveilige
Internet."
</BLOCKQUOTE>
<P> Het is beschikbaar om te downloaden vanaf
<A HREF="http://www.xs4all.nl/~freeswan/">http://www.xs4all.nl/~freeswan/</A>  en heeft op het moment van dit
schrijven juist versie 1.0 bereikt. 
<P>Net als bij andere vormen van versleuteling wordt het niet verspreid met
de kernel vanwege exportbeperkingen.
<H2><A NAME="ssh"></A> 6.4 <CODE>ssh</CODE> (Secure Shell) en <CODE>stelnet</CODE></H2>

<P> <CODE>ssh</CODE> en <CODE>stelnet</CODE> zijn programma's die het mogelijk maken 
om in te loggen op remote systemen middels een versleutelde verbinding.
<P> <CODE>openssh</CODE> is een serie programma's die gebruikt wordt als een 
veilige vervanging voor <CODE>rlogin</CODE>, <CODE>rsh</CODE> en <CODE>rcp</CODE>. Het 
gebruikt public-key versleuteling zowel om communicatie tussen twee hosts te 
versleutelen als wel het authenticeren van gebruikers. Het kan gebruikt 
worden om veilig in te loggen op een remote host of voor het copi&euml;ren van
gegevens tussen hosts, terwijl "man-in-het-midden aanvallen" (sessie-kaping) en
DNS spoofing voorkomen worden. Het voert gegevenscompressie op je
verbindingen uit en zorgt voor veilige X11 communicatie tussen hosts. 
<P> Er zijn tegenwoordig diverse ssh uitvoeringen. De originele 
commerci&euml;le uitvoering van Data Fellows kan gevonden worden op 
<A HREF="http://www.datafellows.com">http://www.datafellows.com</A>. De 
<CODE>ssh</CODE> homepage kan worden gevonden op 
<A HREF="http://www.cs.hut.fi/ssh/">http://www.cs.hut.fi/ssh/</A>. 
<P> De uitstekende Openssh uitvoering is gebaseerd op een vroege versie van 
ssh van Data Fellows en is geheel bewerkt zodat het geen enkel patent of 
eigendomsdelen bevat. Het is gratis en onder een BSD licentie. Het kan 
worden gevonden op: 
<A HREF="http://www.openssh.com">http://www.openssh.com</A>. 
<P> Er is ook een open source project om ssh van de grond af te 
re-implementeren, genaamd "psst...". Voor meer informatie zie: 
<A HREF="http://www.net.lut.ac.uk/psst/">http://www.net.lut.ac.uk/psst/</A><P> Je kunt ook <CODE>ssh</CODE> gebruiken vanaf je Windows werkstation naar je 
Linux <CODE>ssh</CODE> server. Er zijn diverse gratis verkrijgbare Windows client  
uitvoeringen, inclusief degene op 
<A HREF="http://guardian.htu.tuwien.ac.at/therapy/ssh/">http://guardian.htu.tuwien.ac.at/therapy/ssh/</A> als ook een 
commerci&euml;le uitvoering van Data Fellows 
<A HREF="http://www.datafellows.com">http://www.datafellows.com</A>. 
<P> SSLeay is een gratis uitvoering van Netscape's Secure Sockets
Layer protocol, ontwikkeld door Eric Young. Het bevat diverse applicaties
zoals een veilig telnet, een module voor Apache, diverse databases en ook
diverse algoritmes inclusief DES, IDEA en Blowfish.
<P> Door gebruik te maken van deze library werd een veilige telnet vervanging 
gecre&euml;erd die versleutelt over een telnet-verbinding. In tegenstelling 
tot SSH gebruikt stelnet SSL, het Secure Sockets Layer protocol, ontwikkeld 
door Netscape.  Je kunt Secure telnet en Secure FTP vinden door te beginnen 
met de  SSLeay FAQ, beschikbaar op 
<A HREF="http://www.psy.uq.oz.au/~ftp/Crypto/">http://www.psy.uq.oz.au/~ftp/Crypto/</A>.
<P> SRP is een andere veilige telnet/ftp implementatie. Uit hun 
webpagina:
<P>
<BLOCKQUOTE>
"Het SRP project ontwikkelt veilige Internet software voor gratis
wereldwijd gebruik. Beginnend met een volledig veilig Telnet en FTP
distributie, hopen we de zwakke netwerk authenticatie systemen te verdringen
met sterke vervangers die gebruikersvriendelijkheid niet opofferen voor
beveiliging. Beveiliging moet standaard zijn, geen optie!"
</BLOCKQUOTE>
<P> Ga voor meer informatie naar 
<A HREF="http://srp.stanford.edu/srp">http://srp.stanford.edu/srp</A>.
<H2>6.5 PAM - Pluggable Authentication Modules</H2>

<P>Recente versies van de Red Hat Linux distributie komen met een uniform 
authenticatie schema, genaamd "PAM". PAM maakt het mogelijk dat je je 
authenticatiemethoden en vereisten in &eacute;&eacute;n keer verandert en alle
lokale authencatiemethoden kort samenvat zonder dat je enige binary's hoeft
te recompileren. Configuratie van PAM ligt buiten de strekking van dit
document, maar neem  zeker eens een kijkje op de PAM website voor meer
informatie. 
<A HREF="http://www.kernel.org/pub/linux/libs/pam/index.html">http://www.kernel.org/pub/linux/libs/pam/index.html</A>.
<P>Gewoon een paar dingen die je met PAM kunt doen:
<P>
<UL>
<LI> Gebruik versleuteling anders dan DES voor je wachtwoorden. (Het maakt 
het moeilijker ze met brute kracht te decoderen.)</LI>
<LI> Stel resource limits voor al je gebruikers in, zodat ze geen 
denial-of-service aanvallen kunnen uitvoeren (hoeveelheid processen, 
hoeveelheid geheugen enz.) </LI>
<LI> Schakel shadow passwords (zie hieronder) in &eacute;&eacute;n keer
in.</LI>
<LI> Zorg ervoor dat bepaalde gebruikers alleen kunnen inloggen op 
bepaalde tijden vanaf bepaalde plaatsen.</LI>
</UL>
<P> Binnen een paar uur, nodig voor het installeren en configureren van je 
systeem, kun je veel aanvallen op voorhand voorkomen. Gebruik bijvoorbeeld PAM
om het systeemwijd gebruik van <CODE>.rhosts</CODE> bestanden in home directory's
van gebruikers uit te schakelen door het toevoegen van deze regels aan 
<CODE>/etc/pam.d/rlogin</CODE>:  
<BLOCKQUOTE><CODE>
<PRE>
 
           #                  
           # Disable rsh/rlogin/rexec for users                               
           # 
           login auth required pam_rhosts_auth.so no_rhosts  
</PRE>
</CODE></BLOCKQUOTE>
<H2>6.6 Cryptographic IP Encapsulation (CIPE)</H2>

<P> Het primaire doel van deze software is te voorzien in een
faciliteit voor een veilige (tegen het afluisteren of aftappen van
berichten, inclusief het analyseren van het netwerkverkeer en faked message
injection) subnetwerk interconnectie over een onveilig packet netwerk zoals
het Internet.
<P> CIPE versleutelt de gegevens op het netwerk niveau. Pakketten die 
reizen tussen hosts op het netwerk worden versleuteld. Het 
versleutelingsmechanisme is dichtbij het stuurprogramma geplaatst dat 
de pakketten verstuurt en ontvangt.
<P> Dit werkt in tegenstelling tot SSH, dat de gegevens per verbinding
versleutelt, op het socket niveau. Een logische verbinding tussen programma's
die op  verschillende hosts uitgevoerd worden wordt versleuteld.
<P> CIPE kan gebruikt worden bij "tunnelling" om een Virtual Private 
Network aan te maken. Low-level versleuteling heeft het voordeel dat 
het zo gemaakt kan worden dat het transparant werkt tussen de twee 
netwerken verbonden in het VPN, zonder enige wijziging aan 
applicatie-software. 
<P> Samengevat uit de CIPE documentatie:
<P>
<BLOCKQUOTE>
 De IPSEC normen defini&euml;ren een set protocollen die
gebruikt kunnen worden (onder andere) om versleutelde VPN's te bouwen.
IPSEC is echter een zware en gecompliceerde set van protocollen met
een heleboel opties. Uitvoeringen van de volledige set protocollen
worden nog zelden gebruikt en sommige geschilpunten (zoals sleutelbeheer) zijn
nog niet volledig opgelost. CIPE gebruikt een eenvoudigere benadering,
waarbij veel dingen die in parameters vastgelegd kunnen worden (zoals de
keuze van het actuele versleutelingsalgoritme wat gebruikt wordt) een keuze
is die tijdens de installatie gemaakt moet worden. Dit beperkt de
flexibiliteit, maar zorgt voor een eenvoudige (en derhalve effici&euml;nte,
makkelijk te debuggen...) uitvoering. 
</BLOCKQUOTE>
<P> Verdere informatie kan worden gevonden op 
<A HREF="http://www.inka.de/~bigred/devel/cipe.html">http://www.inka.de/~bigred/devel/cipe.html</A><P> Net als met andere vormen van versleuteling wordt het niet standaard met 
de kernel meegeleverd wegens exportbeperkingen.
<H2>6.7 Kerberos</H2>

<P>  Kerberos is een authenticatiesysteem, ontwikkeld door het Athena Project
op MIT. Als een gebruiker inlogt, authenticeert Kerberos deze gebruiker 
(gebruik makend van een wachtwoord) en voorziet de gebruiker in een manier
om zijn identiteit te bewijzen aan andere servers en hosts verspreid over het 
netwerk. 
<P> Deze authenticatie wordt dan gebruikt door programma's zoals 
<CODE>rlogin</CODE> om het de gebruiker mogelijk te maken op andere hosts in te 
loggen zonder wachtwoord (in plaats van het <CODE>.rhosts</CODE> bestand). Deze  
authenticatiemethode kan ook gebruikt worden door het mailsysteem om te 
garanderen dat de mail is aangeleverd bij de juiste persoon, evenals het 
garanderen dat de afzender is wie hij beweert te zijn.
<P>  Kerberos en de andere programma's die erbij geleverd worden, voorkomen 
dat gebruikers het systeem "spoofen" en zodoende laten geloven dat ze  iemand
anders zijn. Helaas is het installeren van Kerberos erg indringend, omdat het
het aanpassen of vervangen van vele standaard programma's vereist.
<P> Je kunt meer informatie over Kerberos vinden door te kijken op 
<A HREF="http://www.cis.ohio-state.edu/hypertext/faq/usenet/kerberos-faq/general/faq.html">the kerberos FAQ</A> en de code kan worden gevonden op 
<A HREF="http://nii.isi.edu/info/kerberos/">http://nii.isi.edu/info/kerberos/</A>.
<P> [Van: Stein, Jennifer G., Clifford Neuman en Jeffrey L. Schiller.  
"Kerberos: Een Authenticatie Service voor Open Netwerk Systemen." USENIX   
Conference Proceedings, Dallas, Texas, Winter 1998.]
<P> Kerberos zou niet je eerste stap moeten zijn in het verbeteren van de 
beveiliging van je host. Het is nogal ingewikkeld en wordt niet zo veel 
gebruikt als bijvoorbeeld SSH.
<H2>6.8 Shadow Passwords</H2>

<P> Shadow passwords is een manier om je gecodeerde wachtwoordinformatie 
geheim te houden voor normale gebruikers. Recente versies van zowel Red 
Hat als Debian Linux maken standaard gebruik van shadow passwords, maar op 
andere systemen worden gecodeerde wachtwoorden opgeslagen in het 
<CODE>/etc/passwd</CODE> bestand, dat iedereen kan lezen. Iedereen kan 
hier vervolgens programma's op loslaten die wachtwoorden kunnen raden en 
zodoende proberen vast te stellen wat ze zijn. Shadow passwords daarentegen 
worden opgeslagen in <CODE>/etc/shadow</CODE>, dat alleen door bevoegde
gebruikers kan worden gelezen. Om shadow passwords te kunnen gebruiken, moet
je je  ervan vergewissen dat al je voorzieningen die toegang nodig hebben tot 
wachtwoordinformatie opnieuw zijn gecompileerd om het te ondersteunen. PAM 
(hierboven) biedt je de mogelijkheid om simpelweg een shadow module te 
plaatsen; het vereist geen hercompilatie van executables. Je kunt een beroep 
doen op de Shadow-Password HOWTO voor meer informatie als dat nodig is. Het is 
beschikbaar op 
<A HREF="http://metalab.unc.edu/LDP/HOWTO/Shadow-Password-HOWTO.html">http://metalab.unc.edu/LDP/HOWTO/Shadow-Password-HOWTO.html</A>  Het is nu  
behoorlijk gedateerd en niet nodig voor distributies die PAM ondersteunen. 
<H2><A NAME="crack"></A> 6.9 "Crack" en "John the Ripper"</H2>

<P> Als om wat voor reden dan ook je <CODE>passwd</CODE> programma geen moeilijk 
te raden wachtwoorden afdwingt, zul je wellicht een programma willen uitvoeren 
dat wachtwoorden kraakt om je zodoende ervan te kunnen vergewissen dat de
wachtwoorden van je gebruikers veilig zijn.
<P> Programma's die wachtwoorden kraken zijn gebaseerd op een simpel idee: ze 
proberen elk woord in het woordenboek en vervolgens variaties op deze woorden, 
coderen ze allemaal en vergelijken ze met je gecodeerde wachtwoord. Als dit 
tot een treffer leidt, weten ze wat je wachtwoord is.
<P> Er zijn een aantal van deze programma's in omloop ... waarvan de twee meest 
opvallende "Crack" en "John the Ripper" zijn (
<A HREF="http://www.false.com/security/john/index.html">http://www.false.com/security/john/index.html</A>). Ze nemen een hoop 
van je CPU tijd in beslag, maar je zou wel moeten kunnen vertellen of een 
aanvaller binnen zou kunnen komen middels deze programma's, door ze eerst zelf 
uit te voeren en gebruikers met zwakke wachtwoorden op de hoogte te stellen. 
Houd in de gaten dat een aanvaller eerst een ander lek moet gebruiken om je 
<CODE>/etc/passwd</CODE> bestand te kunnen lezen, maar zulke lekken komen vaker 
voor dan je denkt.
<P> Omdat beveiliging slechts zo krachtig is als je meest onveilige host, is 
het de moeite waard te vermelden dat als je enige Windows machines op je 
netwerk hebt, je eens L0phtCrack, een Crack implementatie voor Windows, zou 
moeten proberen. Het is beschikbaar op 
<A HREF="http://www.l0pht.com">http://www.l0pht.com</A> 
<H2>6.10 CFS - Cryptographic File System en TCFS - Transparent Cryptographic File System</H2>

<P> CFS is een manier om hele directorystructuren te coderen en gebruikers 
de mogelijkheid te geven om gecodeerde bestanden hierin op te slaan. Het 
maakt gebruik van een NFS server die draait op de lokale machine. RPM's zijn 
beschikbaar op 
<A HREF="http://www.zedz.net/redhat/">http://www.zedz.net/redhat/</A> en meer informatie over hoe het werkt 
staat op 
<A HREF="ftp://ftp.research.att.com/dist/mab/">ftp://ftp.research.att.com/dist/mab/</A>.
<P> TCFS overtreft CFS doordat er meer integratie met het bestandssysteem is 
toegevoegd, zodat het duidelijker voor de gebruikers is dat het 
bestandssysteem gecodeerd is. Meer informatie staat op 
<A HREF="http://edu-gw.dia.unisa.it/tcfs/">http://edu-gw.dia.unisa.it/tcfs/</A>. 
<P> Het hoeft ook niet gebruikt te worden op gehele bestandssystemen, het
werkt  ook op directorystructuren.
<H2>6.11 X11, SVGA en beeldschermbeveiliging</H2>

<H3>X11</H3>

<P> Het is belangrijk dat je je grafische beeldscherm beveiligt om 
te voorkomen dat aanvallers je wachtwoord inpikken terwijl je het intypt, 
documenten of andere informatie die op je scherm staat lezen of zelfs een
lek gebruiken om root toegang te verkrijgen. Het uitvoeren  van remote X
applicaties over het netwerk kan ook vol gevaar zijn, doordat het snuffelaars
mogelijk wordt gemaakt om al je interactie met het remote systeem te zien.
<P> X heeft een aantal manieren voor toegangsbeheer. De eenvoudigste van deze 
is host-gebaseerd: je gebruikt <CODE>xhost</CODE> om alle hosts die toegang mogen 
hebben tot je beeldscherm te specificeren. Dit is absoluut niet veilig, want 
als iemand toegang heeft tot je machine, kan het commando <CODE>xhost + <I>hun machine</I></CODE> gegeven worden en men komt gemakkelijk binnen.
Bovendien, als  je toegang vanaf een niet vertrouwde machine toe moet staan,
kan iedereen daar  je beeldscherm compromitteren.
<P> Als je <CODE>xdm</CODE> (X Display Manager) gebruikt om in te loggen, krijg 
je een veel betere toegangsmethode: MIT-MAGIC-COOKIE-1. Een 128-bit "cookie" 
wordt gegenereerd en opgeslagen in je <CODE>.Xauthority</CODE> bestand. Als je 
een remote machine toegang moet verschaffen tot je beeldscherm, kun je het 
<CODE>xauth</CODE> commando en de informatie in je <CODE>.Xauthority</CODE> bestand 
gebruiken om toegang te verschaffen voor alleen die verbinding. Zie de 
Remote-X-Apps mini-HOWTO, beschikbaar op 
<A HREF="http://metalab.unc.edu/LDP/HOWTO/mini/Remote-X-Apps.html">http://metalab.unc.edu/LDP/HOWTO/mini/Remote-X-Apps.html</A>. 
<P> Je kunt ook <CODE>ssh</CODE> gebruiken (zie 
<A HREF="#ssh">ssh</A>
, hierboven) om 
veilige X verbindingen mogelijk te maken. Dit heeft als voordeel dat het 
ook duidelijk is voor de eindgebruiker en houdt in dat er geen 
ongecodeerde gegevens over het netwerk verzonden worden. 
<P> Bekijk de <CODE>Xsecurity</CODE> man pagina voor meer informatie over X  
beveiliging. De meest veilige gok is het gebruik van <CODE>xdm</CODE> om in te 
loggen op je console en vervolgens <CODE>ssh</CODE> te gebruiken om naar remote 
sites te gaan waarop je X programma's wilt uitvoeren. 
<H3>SVGA</H3>

<P> SVGAlib programma's zijn kenmerkend SUID-root, ten einde al de video 
hardware van je Linux machines te kunnen benaderen. Dit maakt ze erg 
gevaarijk. Als ze crashen, zul je kenmerkend je machine opnieuw moeten 
opstarten om een bruikbare console terug te krijgen. Let er op dat elk SVGA 
programma dat je uitvoert authentiek en op z'n minst enigszins vertrouwd is. 
Nog beter, voer ze helemaal niet uit. 
<H3>GGI (Generic Graphics Interface project)</H3>

<P> Het Linux GGI project probeert verschillende van de problemen met video 
interfaces onder Linux op te lossen. GGI zal een klein stukje van de video 
code naar de Linux kernel verplaatsen en vervolgens de toegang tot het 
videosysteem beheren. Dit betekent dat GGI in staat is om op elk moment je 
console in een bekende, goede staat te herstellen. Het voorziet ook in een 
beveiligings-waarschuwingssleutel, zodat je zeker weet dat er geen Trojan 
horse <CODE>login</CODE> programma op je console draait.
<A HREF="http://synergy.caltech.edu/~ggi/">http://synergy.caltech.edu/~ggi/</A><H2><A NAME="kernel-beveiliging"></A> <A NAME="s7">7. Beveiliging van de kernel</A> </H2>

<P> Dit is een beschrijving van de opties voor het configureren van de 
kernel die met beveiliging te maken hebben, een beschrijving van wat ze doen 
en hoe je ze moet gebruiken.
<P> Omdat de kernel het gebruik van je computer op het netwerk beheert, is het 
belangrijk dat deze erg veilig is en niet in gevaar gebracht kan worden. Om 
enkele van de meest recente netwerkaanvallen te voorkomen, moet je proberen om 
je kernelversie actueel te houden. Je kunt nieuwe kernels vinden op 
<A HREF="ftp://ftp.kernel.org">ftp://ftp.kernel.org</A> of bij de leverancier van je distributie.
<P> Er is ook een internationale groep die een afzonderlijke uniforme 
coderingspatch verschaft voor de conventionele Linux kernel. Deze patch 
verschaft ondersteuning voor een aantal cryptografische subsystemen en 
zaken die niet kunnen worden toegevoegd aan de conventionele kernel vanwege 
exportbeperkingen. Voor meer informatie kun je hun webpagina bezoeken op: 
<A HREF="http://www.kerneli.org">http://www.kerneli.org</A><H2>7.1 Opties om 2.0 kernels te compileren</H2>

<P> De volgende opties zijn voor 2.0.x kernels van toepassing. Je zou deze 
opties moeten kunnen zien tijdens het configuratieproces van de kernel. Veel
van de  opmerkingen hier komen uit
<CODE>./linux/Documentation/Configure.help</CODE>. Dit  is hetzelfde document als
waarnaar verwezen wordt wanneer de Help faciliteit  aangeroepen wordt
tijdens de <CODE>make config</CODE> fase van het compileren  van de kernel.
<P>
<UL>
<LI> Netwerk Firewalls (CONFIG_FIREWALL) 
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
 
Deze optie moet ingeschakeld zijn als je van plan bent om enige 
firewalling of masquerading op je Linux machine uit te voeren. Als het 
slechts gaat om een gewone client machine, is het veilig deze optie niet in 
te schakelen.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> IP: forwarding/gatewaying (CONFIG_IP_FORWARD)
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
 
Als je IP forwarding inschakelt, wordt je Linux box wezenlijk een router. 
Als je machine aangesloten is op een netwerk, kun je gegevens doorsturen van 
het ene netwerk naar het andere en wellicht een firewall ondermijnen die daar 
was geplaatst om dit te voorkomen. Gewone dial-up gebruikers zullen dit uit 
willen schakelen en andere gebruikers moeten zich concentreren op de 
beveiligingsimplicaties als ze dit doen. Firewall machines zullen dit 
ingeschakeld willen hebben en samen met firewall software gebruiken.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
 
Je kunt IP forwarding dynamisch inschakelen door gebruik te maken van 
het volgende commando:
 
<BLOCKQUOTE><CODE>
<PRE>
root#  echo 1 > /proc/sys/net/ipv4/ip_forward
</PRE>
</CODE></BLOCKQUOTE>

   
en het uitschakelen met het commando: 
 
<BLOCKQUOTE><CODE>
<PRE>
root#  echo 0 >/proc/sys/net/ipv4/ip_forward
</PRE>
</CODE></BLOCKQUOTE>
  

Houd in gedachten dat de bestanden in /proc "virtuele" bestanden zijn 
en de getoonde omvang van het bestand wellicht niet overeenkomt met de 
gegevensuitvoer hiervan. 
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> IP: syn cookies (CONFIG_SYN_COOKIES) 
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
 
Een "SYN Attack" is een "denial of service" (DoS) aanval die alle 
hulpbronnen op je machine verbruikt en je dwingt om opnieuw op te 
starten. We kunnen geen reden bedenken waarom je dit niet gewoon 
inschakelt. In de 2.2.x kernel series staat deze configuratieoptie alleen 
syn cookies toe, maar schakelt ze niet in. Om ze in te schakelen, moet je 
het volgende commando geven:
 
<BLOCKQUOTE><CODE>
<PRE>
root# echo 1 >
/proc/sys/net/ipv4/tcp_syncookies
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> IP: Firewalling (CONFIG_IP_FIREWALL)
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
    
Deze optie is noodzakelijk als je je machine gaat configureren als een 
firewall, aan masquerading gaat doen of je dial-up werkstation wil 
beschermen tegen het binnendringen van iemand via je PPP dial-up 
interface.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> IP: firewall packet logging (CONFIG_IP_FIREWALL_VERBOSE) 
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
 
Deze optie geeft je informatie over de pakketten die je firewall 
ontvangt, zoals afzender, ontvanger, poort enzovoorts.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> IP: Drop source routed frames (CONFIG_IP_NOSR) 
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
 
Deze optie moet ingeschakeld worden. Source routed frames bevatten 
het gehele pad tot hun bestemming binnenin het pakket. Dit betekent dat 
de routers waar het pakket doorheen gaat het niet hoeven te inspecteren en het 
gewoon doorsturen. Dit kan ertoe leiden dat er gegevens je systeem binnenkomen 
die een potentieel beveilingslek kunnen zijn.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> IP: masquerading (CONFIG_IP_MASQUERADE) 
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
 
Als een van de computers op je lokale netwerk, waarvoor je Linux box als 
een firewall optreedt, iets wil versturen naar buiten, kan jouw box zich 
vermommen (masquerade) als die host. Dat wil zeggen, het stuurt het 
verkeer door naar de bedoelde bestemming, maar laat het eruitzien alsof 
het komt van de firewall box zelf. Zie 
<A HREF="http://www.indyramp.com/masq">http://www.indyramp.com/masq</A> 
voor meer informatie.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> IP: ICMP masquerading (CONFIG_IP_MASQUERADE_ICMP)
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
 
Deze optie voegt ICMP masquerading toe aan de vorige optie, waarbij alleen 
masquerading van TCP of UDP verkeer plaatvindt.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> IP: transparent proxy support (CONFIG_IP_TRANSPARENT_PROXY)
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
 
Hiermee kan je Linux firewall elk netwerkverkeer dat van het lokale
netwerk afkomstig is en bestemd is voor een remote host transparant omleiden
naar een lokale server, genaamd een "transparent proxy server". Dit zorgt
ervoor dat de lokale computers denken dat ze praten tegen het remote eind,
terwijl ze in feite verbonden zijn met de lokale proxy. Zie de IP-Masquerading
HOWTO en 
<A HREF="http://www.indyramp.com/masq">http://www.indyramp.com/masq</A> voor meer informatie.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> IP: always defragment (CONFIG_IP_ALWAYS_DEFRAG)
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>

Gewoonlijk is deze optie uitgeschakeld, maar als je een firewall of een
masquerading host aan het bouwen bent, zul je dit in willen schakelen. Wanneer
gegevens van de ene host naar de andere worden gestuurd, wordt het niet altijd
verstuurd als een enkel gegevenspakket, maar eerder wordt het gefragmenteerd
in verschillende stukken. Het probleem hierbij is dat de poortnummers alleen
in het eerste fragment opgeslagen zijn. Dit betekent dat iemand informatie aan
de overblijvende pakketten kan toevoegen die daar niet hoort te zijn. Het kan
ook een "teardrop attack" voorkomen tegen een interne host die hier zelf nog
niet tegen gepatched is.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> Packet Signatures (CONFIG_NCPFS_PACKET_SIGNING)
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>

Dit is een optie, beschikbaar in de 2.2.x kernel series, die NCP pakketten zal
voorzien van een kenmerk voor een betere beveiliging.
Normaal kun je het uit laten staan, maar het is er als je het toch nodig hebt.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI>IP: Firewall packet netlink device (CONFIG_IP_FIREWALL_NETLINK)    
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>

Dit is een erg aardige optie waarmee je de eerste 128 bytes van de
pakketten van een user-space programma kan analyseren, om zodoende te bepalen
of je, gebaseerd op zijn deugdelijkheid, het pakket wilt accepteren of
afwijzen. </LI>
</UL>
<H2>7.2  Opties om 2.2 kernels te compileren</H2>

<P> Voor 2.2.x kernels zijn veel van de opties hetzelfde, maar er zijn ook
een paar nieuwe ontwikkeld. Veel van de opmerkingen hier komen van   
<CODE>./linux/Documentation/Configure.help</CODE>, wat hetzelfde document is
waarnaar verwezen wordt als je de Help faciliteit gebruikt tijdens de
<CODE>make config</CODE> fase bij het compileren van de kernel. Alleen de nieuw
toegevoegde opties worden hieronder opgesomd. Raadpleeg de 2.0 beschrijving
voor een lijst met andere noodzakelijke opties. De meest opmerkelijke
verandering in de 2.2 kernel series is de  IP firewalling code. Het
<CODE>ipchains</CODE> programma wordt nu gebruikt om IP  firewalling te
installeren, in plaats van het <CODE>ipfwadm</CODE> programma dat gebruikt werd in
de 2.0 kernel.
<P>
<UL>
<LI> Socket Filtering  (CONFIG_FILTER)    
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>

Voor de meeste mensen is het veilig om nee te zeggen tegen deze optie.
Met deze optie kun je een userspace filter verbinden met elke socket en
vaststellen of pakketten moeten worden toegestaan of afgewezen. Zeg nee,
tenzij je een erg specifieke noodzaak hebt en in staat bent om zo'n filter te
programmeren. Houd ook in de gaten dat ten tijde van dit schrijven alle
protocollen behalve TCP ondersteund werden.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> Port Forwarding    
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>

Port Forwarding is een aanvulling op Masquerading, dat enige doorzending
van pakketten van buiten naar binnenin een firewall op vastgestelde poorten
toestaat. Dit kan nuttig zijn als je, bijvoorbeeld, een webserver achter een
firewall of masquerading host wil draaien en die webserver toegankelijk moet
zijn vanaf de buitenwereld. Een externe client stuurt een verzoek naar poort
80 van de firewall, de firewall stuurt dit verzoek door naar de webserver, de
webserver behandelt het verzoek en de resultaten worden via de firewall naar
de originele client verstuurd. De client denkt dat de firewall machine zelf de
webserver draait. Dit kan ook gebruikt worden voor het verdelen van de
belasting als je een heleboel identieke webservers achter de firewall hebt.
Informatie over deze voorziening is beschikbaar op   
http://www.monmouth.demon.co.uk/ipsubs/portforwarding.html (om op het WWW te
surfen heb je toegang tot een machine op het Internet nodig, die een programma
als lynx of Netscape heeft). Voor algemene informatie kun je kijken op
ftp://ftp.compsoc.net/users/steve/ipportfw/linux21/
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> Socket Filtering  (CONFIG_FILTER)
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>

Bij gebruik van deze optie kunnen user-space programma's een filter aan
elke socket verbinden en daardoor de kernel vertellen dat bepaalde soorten
gegevens wel of niet door de socket mogen gaan. Linux socket filtering werkt
voorlopig op alle soorten sockets behalve TCP. Zie het
tekstbestand <CODE>./linux/Documentation/networking/filter.txt</CODE> voor meer
informatie.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> IP: Masquerading    
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>

De 2.2 kernel masquerading is verbeterd. Het verschaft aanvullende
ondersteuning voor het vermommen (masquerading) van speciale protocollen etc.
Lees de IP Chains HOWTO voor meer informatie. </LI>
</UL>
<H2>7.3  Kernel Devices</H2>

<P> Er zijn een paar block en character devices beschikbaar onder Linux die
je ook behulpzaam kunnen zijn met de beveiliging.
<P> De twee devices <CODE>/dev/random</CODE> en <CODE>/dev/urandom</CODE> worden
verschaft door de kernel om op elk tijdstip te kunnen voorzien in willekeurige
gegevens.
<P> Zowel <CODE>/dev/random</CODE> als <CODE>/dev/urandom</CODE> zouden veilig genoeg
moeten zijn om te gebruiken voor het genereren van PGP sleutels, het aanroepen
van <CODE>ssh</CODE> en andere applicaties waar veilige, willekeurige nummers
vereist zijn. Voor aanvallers moet het onmogelijk zijn het volgende nummer te
voorspellen gezien elke aanvangsvolgorde van nummers van deze bronnen. Er is
een hoop moeite voor gedaan om zeker te stellen dat de nummers die je van deze
bronnen krijgt, willekeurig in elke betekenis van het woord zijn.
<P> Het enige verschil tussen de twee devices, is dat <CODE>/dev/random</CODE> door
zijn voorraad willekeurige bytes heen raakt en je laat wachten tot er weer een
voorraad is aangemaakt. Merk op dat het op sommige systemen een blokkade voor
lange tijd kan opwerpen doordat er gewacht wordt op het invoegen van nieuwe
door de gebruiker gegenereerde entropie in het systeem.
Je moet voorzichtigheid betrachten voordat je <CODE>/dev/random</CODE> gebruikt.
(Wellicht is het beste wat je kunt doen, het te gebruiken wanneer je
gevoelige sleutelinformatie aan het genereren bent en je de gebruiker vertelt
herhaaldelijk op het toetsenbord te slaan totdat je de melding "OK, genoeg"
geeft).
<P><CODE>/dev/random</CODE> is hoge kwaliteit entropy, gegenereerd door het meten
van de interrupt tijden etc. Het blokkeert totdat er voldoende bits met
willekeurige gegevens beschikbaar zijn.
<P><CODE>/dev/urandom</CODE> is vergelijkbaar, maar wanneer de opslag van entropie
op een laag pitje staat, zal het een cryptografisch sterk mengelmoesje van wat
er is terugsturen. Dit is niet zo veilig, maar het is voldoende voor de meeste
applicaties.
<P> Je kunt de devices raadplegen door iets dergelijks te gebruiken:
<P>
<BLOCKQUOTE><CODE>
<PRE>
   root#  head -c 6 /dev/urandom | mimencode
</PRE>
</CODE></BLOCKQUOTE>
        
Dit zal acht regels willekeurige karakters op de console afdrukken, geschikt
voor wachtwoordgeneratie. Je kunt <CODE>mimencode</CODE> in het <CODE>metamail</CODE>
package vinden.
<P> Zie <CODE>/usr/src/linux/drivers/char/random.c</CODE> voor een beschrijving
van het algoritme.
<P> Met dank aan Theodore Y. Ts'o, Jon Lewis en anderen van Linux-kernel die
mij (Dave) hiermee geholpen hebben.
<H2><A NAME="netwerk-beveiliging"></A> <A NAME="s8">8.  Beveiliging van het netwerk</A></H2>

<P> Netwerkbeveiliging wordt steeds belangrijker omdat mensen steeds langer
verbonden zijn met het netwerk. De beveiliging van het netwerk in gevaar
brengen is vaak veel eenvoudiger dan het in gevaar brengen van de fysieke of
lokale beveiliging en wordt steeds alledaagser.
<P> Er zijn een aantal goede tools die hulp bieden bij netwerkbeveiliging en
steeds meer daarvan worden geleverd bij Linux distributies.
<H2>8.1 Packet Sniffers</H2>

<P> Een van de meest gebruikte manieren waarop indringers zich toegang tot
meer systemen op je netwerk verschaffen is door het gebruik van een "packet
sniffer" op een reeds in gevaar gebrachte host. Deze "sniffer" luistert 
op de Ethernet poort slechts naar dingen als <CODE>passwd</CODE>, <CODE>login</CODE>
en <CODE>su</CODE> in de pakkettenstroom en logt dan het verkeer dat volgt. Op
deze manier verkrijgen aanvallers wachtwoorden voor systemen waarop ze niet
eens probeerden in te breken. Wachtwoorden die uit platte tekst bestaan zijn
erg kwetsbaar voor deze aanval.
<P> Voorbeeld: Host A is gecompromitteerd. Aanvaller installeert een sniffer.
Sniffer pikt een beheerder logging op naar host B, afkomstig van host C.
Het verkrijgt het persoonlijke wachtwoord van de beheerder zodra er
ingelogd wordt op B. Dan doet de beheerder een <CODE>su</CODE> om een probleem
op te lossen. Ze hebben nu het root wachtwoord voor host B. Later laat de
beheerder iemand <CODE>telnet</CODE> uitvoeren vanaf zijn account naar host Z
op een andere site. Nu heeft de aanvaller een wachtwoord/login op host Z.
<P> Tegenwoordig hoeft de aanvaller niet eens meer een systeem te
compromitteren om dit te doen: ze kunnen ook een laptop of pc het gebouw
binnenbrengen en het systeem aftappen. 
<P> Het gebruik van <CODE>ssh</CODE> of andere methoden om wachtwoorden te
coderen dwarsboomt deze aanval. Zaken als APOP voor POP accounts kunnen deze
aanval ook voorkomen. (Normale POP logins zijn hier erg kwetsbaar voor, zoals
alles dat platte-tekst wachtwoorden over het netwerk verstuurt).
<H2>8.2 Systeemdiensten en tcp-wrappers</H2>

<P> Het eerste waar je naar moet kijken, voordat je je Linux systeem op
<EM>ENIG</EM> netwerk aansluit, is wat voor diensten je moet bieden. Diensten
die je niet hoeft te bieden moeten uitgeschakeld worden, zodat je
&eacute;&eacute;n ding minder hebt om je zorgen over te maken en aanvallers
een plek minder hebben om te zoeken naar een lek.
<P> Er zijn een aantal manieren om diensten onder Linux uit te schakelen. Je
kunt kijken naar je <CODE>/etc/inetd.conf</CODE> bestand om te zien welke diensten
worden aangeboden door je <CODE>inetd</CODE>. Schakel degenen die je niet nodig
hebt uit door een <CODE>#</CODE> aan het begin van de regel te plaatsen en
vervolgens je inetd proces een SIGHUP te sturen.
<P> Je kunt ook diensten uit je <CODE>/etc/services</CODE> bestand verwijderen (of
een <CODE>#</CODE> aan het begin van de regel plaatsen). Dit heeft tot
gevolg dat lokale clients de dienst ook niet kunnen vinden (als je
bijvoorbeeld <CODE>ftp</CODE> verwijdert en probeert te ftp-en naar een remote
site vanaf die machine, zal dat mislukken en de boodschap "unknown service"
zal getoond worden). Het is meestal de moeite niet waard om diensten te
verwijderen uit <CODE>/etc/services</CODE>, omdat het geen aanvullende beveiliging
verschaft. Als een lokale persoon <CODE>ftp</CODE> zou willen gebruiken ondanks
het feit dat je een <CODE>#</CODE> aan het begin van de regel hebt geplaatst,
maken ze hun eigen client aan die de gebruikelijke FTP poort gebruikt en nog
prima werkt. 
<P> Enkele diensten die je wellicht ingeschakeld zou willen laten zijn:
<P>
<UL>
<LI><CODE>ftp</CODE></LI>
<LI><CODE>telnet</CODE> (of <CODE>ssh</CODE>)</LI>
<LI>mail, zoals <CODE>pop-3</CODE> of <CODE>imap</CODE></LI>
<LI><CODE>identd</CODE></LI>
</UL>
<P> Als je weet dat je een bepaald pakket niet gaat gebruiken, kun je het ook
helemaal verwijderen. <CODE>rpm -e <I>naam van het pakket</I></CODE> onder de
Red Hat distributie zal het gehele pakket verwijderen. Onder Debian doet
<CODE>dpkg --remove</CODE> hetzelfde.
<P> Bovendien moet je echt de rsh/rlogin/rcp utility's uitschakelen en tevens
voorkomen dat login (gebruikt door <CODE>rlogin</CODE>), shell (gebruikt door
<CODE>rcp</CODE>) en exec (gebruikt door <CODE>rsh</CODE>) worden gestart in
<CODE>/etc/inetd.conf</CODE>. Deze protocollen zijn extreem onveilig en zijn in
het verleden het doel geweest van misbruik.
<P> Je moet <CODE>/etc/rc.d/rc[0-9].d</CODE> (op Red Hat;
<CODE>/etc/rc[0-9].d</CODE> op Debian) controleren om te zien of er servers in
deze directory's gestart worden die niet nodig zijn. De bestanden in deze
directory's zijn eigenlijk symbolische links naar bestanden in de directory
<CODE>/etc/rc.d/init.d</CODE> (op Red Hat; <CODE>/etc/init.d</CODE> op Debian). Het
hernoemen van de bestanden in de <CODE>init.d</CODE> directory schakelt alle
symbolische links uit die naar dat bestand verwijzen. Als je een dienst
slechts voor een bepaald run level uit wilt schakelen, hernoem dan de
desbetreffende symbolische link door de hoofdletter  <CODE>S</CODE> te vervangen
door een kleine letter <CODE>s</CODE>, zoals dit:
<P>
<BLOCKQUOTE><CODE>
<PRE>
      
                          root#  cd /etc/rc6.d 
                          root#  mv S45dhcpd s45dhcpd  
</PRE>
</CODE></BLOCKQUOTE>
<P> Als je <CODE>rc</CODE> bestanden in BSD-stijl hebt, moet je <CODE>/etc/rc*</CODE>
controleren op programma's die je niet nodig hebt.
<P> Bij de meeste Linux distributies worden tcp_wrappers geleverd die al je
TCP diensten "wrappen". Een tcp_wrapper (<CODE>tcpd</CODE>) wordt aangeroepen door
<CODE>inetd</CODE> in plaats van de echte server. <CODE>tcpd</CODE> controleert dan de
host die om de dienst verzoekt en start ofwel de echte server op of weigert
toegang vanaf die host. Met <CODE>tcpd</CODE> kun je de toegang tot je TCP
diensten beperken. Je moet een <CODE>/etc/hosts.allow</CODE> aanmaken en alleen
toevoegen in de hosts die toegang tot de diensten van je machine nodig hebben.
<P> Als je een dialup thuisgebruiker bent, stellen we voor dat je ze ALLEMAAL
weigert. <CODE>tcpd</CODE> logt ook mislukte pogingen om toegang tot diensten te
krijgen, dus dit kan je waarschuwen als je aangevallen wordt. Als je nieuwe
diensten toevoegt, moet je je ervan overtuigen dat je ze zo configureert dat
ze tcp-verbindingen gebruiken als ze zijn gebaseerd op TCP. Een
normale dialup gebruiker kan bijvoorbeeld voorkomen dat buitenstaanders
verbinding maken met zijn machine en toch de mogelijkheid hebben om post te
ontvangen en netwerkverbindingen naar het Internet te maken. Om dit te doen,
moet je het volgende aan je <CODE>/etc/hosts.allow</CODE> toevoegen:
<P> ALL: 127.
<P> En natuurlijk bevat /etc/hosts.deny:
<P> ALL: ALL
<P> wat externe verbindingen naar je machine voorkomt en je toch toestaat om
van binnenuit een verbinding te maken met servers op het Internet. 
<P> Houd in gedachten dat tcp_wrappers alleen diensten die uitgevoerd worden
door <CODE>inetd</CODE> beschermt en een bepaald aantal anderen. Het is heel goed
mogelijk dat er ook andere diensten op je machine draaien. Je kunt <CODE>netstat
-ta</CODE> gebruiken om een lijst te zoeken met alle diensten die je machine
aanbiedt. 
<H2>8.3 Verifieer je DNS informatie</H2>

<P> Het up-to-date houden van DNS informatie van alle hosts op je netwerk kan
helpen op de beveiliging te vergroten. Als een ongeautoriseerde host
verbinding krijgt met je netwerk, kun je dat herkennen door het ontbreken van
een DNS entry. Veel diensten kunnen zo worden ingesteld dat ze geen
verbindingen toestaan van hosts die geen geldige DNS entry hebben.
<H2>8.4 <CODE>identd</CODE></H2>

<P> <CODE>identd</CODE> is een klein programma dat als kenmerk heeft dat het
buiten je <CODE>inetd</CODE> server om draait. Het houdt bij welke gebruiker welke
TCP dienst uitvoert en rapporteert dit vervolgens aan een ieder die hierom
verzoekt.
<P> Veel mensen onderschatten de bruikbaarheid van <CODE>identd</CODE> en
schakelen het dus uit of blokkeren alle verzoeken van de site hiervoor.
<CODE>identd</CODE> is er niet om remote sites van dienst te zijn. Er is geen
enkele manier om erachter te komen of de gegevens die je ontvangt van de
remote <CODE>identd</CODE> al dan niet correct zijn. Er vindt geen verificatie
plaats van <CODE>identd</CODE> verzoeken.
<P> Waarom zou je het dan willen draaien? Omdat het <EM>jou</EM> van nut is
en het extra gegevens kan opleveren als je iemand moet traceren. Als je
<CODE>identd</CODE> niet is gecompromitteerd, weet je dat het remote sites
de gebruikersnaam of gebruikers-id van mensen die TCP diensten gebruiken
vertelt. Als de beheerder op een remote site je aanspreekt en je vertelt
dat gebruiker die-en-die heeft geprobeerd om hun site te "hacken", kun je
gemakkelijk actie ondernemen tegen die gebruiker. Als je geen <CODE>identd</CODE>
draait, zul je een heleboel logs moeten bekijken om uit te vinden wie er op
dat moment online was en normaal gesproken veel meer tijd nodig hebben om die
gebruiker op te sporen.
<P> Aan de <CODE>identd</CODE> die geleverd wordt bij de meeste distributies is
meer in te stellen dan de meeste mensen denken. Je kunt het voor bepaalde
gebruikers uitschakelen (ze kunnen een <CODE>.noident</CODE> bestand aanmaken), je
kunt alle <CODE>identd</CODE> verzoeken loggen (we raden dit aan), je kunt zelfs
identd een uid in plaats van een gebruikersnaam of zelfs NO-USER laten
terugsturen. 
<H2>8.5 SATAN, ISS en andere netwerkscanners</H2>

<P> Er zijn een aantal verschillende softwarepakketten die doen aan poort-
en dienst-gebaseerd scannen van machines of netwerken. SATAN, ISS, SAINT en
Nessus zijn enkele van de meer bekende. Deze software maakt verbinding met de
doelmachine (of al de doelmachines op een netwerk) op alle mogelijke poorten
en probeert uit te vinden welke dienst daar draait. Gebaseerd op deze
informatie kun je zeggen of de machine kwetsbaar is voor een bepaald soort
misbruik op die server. 
<P> SATAN (Security Administrator's Tool for Analyzing Networks) is een
poortscanner met een webinterface. Het kan ingesteld worden om lichte, medium
of zware controles op een machine of een computernetwerk uit te voeren.
Het is een goed idee om SATAN te downloaden en je machine of netwerk te
scannen en de problemen die het vindt op te lossen. Download SATAN vanaf 
<A HREF="http://metalab.unc.edu/pub/packages/security/Satan-for-Linux/">metalab</A> of vanaf een goed bekend staande FTP of website. Er is een
trojaanse copie van SATAN verspreid over het net: 
<A HREF="http://www.trouble.org/~zen/satan/satan.html">http://www.trouble.org/~zen/satan/satan.html</A>. Merk op dat SATAN al
geruime tijd niet meer is bijgewerkt en enkele van de andere tools hieronder
wellicht beter werken. 
<P> ISS (Internet Security Scanner) is een andere poort-gebaseerde
scanner. Het is sneller dan SATAN en dus wellicht beter voor grotere
netwerken. Echter, SATAN heeft de eigenschap dat het meer informatie
verschaft.
<P> Abacus bestaat uit een set tools om te voorzien in host-gebaseerde
beveiliging en inbraakdetectie. Neem een kijkje op de homepage op het web voor
meer informatie. 
<A HREF="http://www.psionic.com/abacus">http://www.psionic.com/abacus/</A><P> SAINT is een bijgewerkte versie van SATAN. Het is web-gebaseerd en
heeft veel meer up-to-date tests dan SATAN. Je kunt hier meer over te weten
komen op:  
<A HREF="http://www.wwdsi.com/saint">http://www.wwdsi.com/~saint</A><P> Nessus is een gratis beveiligingsscanner. Het is gemakkelijk in gebruik
dankzij een GTK grafische interface. Het is ook uitgerust met een erg aardige
plugin setup voor nieuwe poort-scan testen. Kijk voor meer informatie
op: 
<A HREF="http://www.nessus.org/">http://www.nessus.org</A><H3>Poortscans detecteren</H3>

<P> Er zijn enkele tools ontworpen om je te waarschuwen voor poortscans door
SATAN, ISS en andere scansoftware. Echter, als je tcp_wrappers ruimdenkend
gebruikt en regelmatig je logbestanden nakijkt, zullen je deze poortscans
wel opvallen. Zelfs met de meest minimale instelling laat SATAN sporen na
in de logs op een Red Hat systeem.   
<P> Er zijn ook "stealth" poort scanners. Een pakket waarop het TCP ACK bit
ingesteld is (zoals dat gedaan wordt wanneer de verbindingen tot stand zijn
gebracht) zal waarschijnlijk wel door een firewall komen die
pakketten filtert. Het RST pakket dat teruggestuurd wordt vanaf een poort
die <EM>_geen tot stand gebrachte sessie had_</EM> kan worden gezien als
bewijs dat er leven is op die poort. Ik denk niet dat tcp_wrappers dit zal
detecteren.
<H2>8.6 <CODE>sendmail</CODE>, <CODE>qmail</CODE> en MTA's</H2>

<P> Een van de belangrijkste diensten die je aan kan bieden is een
mailserver. Helaas is het ook de meest kwestbare voor aanvallen, wat te wijten
is aan het aantal taken dat het uit moet voeren en de privileges die het
kenmerkend nodig heeft.
<P> Als je <CODE>sendmail</CODE> gebruikt, is het erg belangrijk dat je de meest
recente versie gebruikt. <CODE>sendmail</CODE> heeft een heel lange
geschiedenis van misbruik op het gebied van beveiliging. Let erop dat
je altijd de meest recente versie vanaf 
<A HREF="http://www.sendmail.org/">http://www.sendmail.org</A> gebruikt.
<P> Houd in gedachten dat sendmail niet hoeft te draaien om mail te kunnen
versturen. Als je een thuisgebruiker bent, kun je sendmail helemaal
uitschakelen en gewoon je mail client gebruiken om mail te versturen. Je kunt
er ook voor kiezen om de "-bd" flag uit het sendmail startup bestand te
verwijderen en daarbij inkomende verzoeken om mail uit te schakelen. Met
andere woorden, je kunt sendmail opstarten vanuit je startup script door
daarvoor in de plaats het volgende te gebruiken:  
<P>
<BLOCKQUOTE><CODE>
<PRE>
        #  /usr/lib/sendmail -q15m  
</PRE>
</CODE></BLOCKQUOTE>
<P>Dit zorgt ervoor dat sendmail de berichtenlijst elke vijftien minuten nazoekt
op berichten die bij de eerste poging niet met succes konden worden
overgebracht. 
<P> Veel beheerders kiezen ervoor om sendmail niet te gebruiken en
kiezen in plaats daarvan voor een van de andere mailtransport middelen. Je zou
kunnen overwegen om over te stappen op <CODE>qmail</CODE>. <CODE>qmail</CODE> is vanaf
het eerste begin ontworpen met beveiliging in gedachten. Het is snel, stabiel
en veilig. Qmail kan worden gevonden op 
<A HREF="http://www.qmail.org">http://www.qmail.org</A><P> Een directe concurrent van qmail is "postfix", geschreven door Wietse
Venema, de auteur van tcp_wrappers en andere beveiligingstools. Vroeger
heette het vmailer, werd gesponsord door IBM en is ook een mailtransport
middel dat vanaf het eerste begin geschreven is met beveiliging in het
achterhoofd. Je kunt meer informatie over postfix vinden op 
<A HREF="http:/www.postfix.org">http://www.postfix.org</A><H2>8.7 Denial of Service aanvallen</H2>

<P> Een "Denial of Service" (DoS) aanval is er een waar de aanvaller
probeert om enkele bronnen zo overbelast te maken dat ze geen rechtmatige
verzoeken meer kunnen beantwoorden of rechtmatige gebruikers de toegang
tot hun machine ontzeggen. 
<P> Denial of service aanvallen zijn in de aflopen jaren sterk in aantal
toegenomen. Enkele van de meer populaire en recente zijn hieronder opgesomd.
Merk op dat er steeds weer nieuwe verschijnen, dus dit zijn slechts een paar
voorbeelden. Lees de Linux security lists, de bugtraq list en archieven
voor meer recente informatie.
<P>
<UL>
<LI><B>SYN Flooding</B> - SYN flooding is een denial of
service aanval op het netwerk. Het maakt misbruik van een "loophole" in de
manier waarop TCP verbindingen tot stand gekomen zijn. De nieuwere Linux
kernels (2.0.30 en hoger) hebben diverse in te stellen opties om te
voorkomen dat SYN flood aanvallen mensen de toegang tot hun machine of
diensten ontzeggen. Zie 
<A HREF="#kernel-beveiliging">Kernel beveiliging</A> voor opties om de kernel juist te beveiligen.</LI>
<LI><B>Pentium "F00F" Bug</B> - Het is recentelijk ontdekt dat een
serie assembleercodes die gestuurd wordt naar een echte Intel
Pentium processor de machine opnieuw op zal starten. Dit heeft betrekking op
elke machine met een Pentium processor (geen klonen, geen Pentium Pro of PII),
ongeacht op welk besturingssysteem het draait. Linux kernels 2.0.32 en hoger
bevatten een handigheid om deze bug te omzeilen en zodoende te voorkomen dat
het je machine "op slot zet". Kernel 2.0.33 heeft een verbeterde versie van
deze kernel fix en wordt aangeraden vanaf versie 2.0.32. Als je draait op een
Pentium, moet je deze upgrade nu uitvoeren!</LI>
<LI><B>Ping Flooding</B> - Ping flooding is een eenvoudige denial of
service aanval met brute kracht. De aanvaller stuurt een stroom (flood) van
ICMP pakketten naar je machine. Als ze dit doen vanaf een host met een
grotere bandbreedte dan die van jou, zal je machine niet in staat zijn
om ook maar iets over het netwerk te versturen. Een variatie op deze aanval,
genaamd "smurfing", stuurt ICMP pakketten naar een host met het return IP
van <EM>jouw</EM> machine's, hetgeen ze toestaat om je minder traceerbaar te
"flooden". Je kunt meer informatie over de "smurf" aanval vinden op 
<A HREF="http://www.quadrunner.com/~chuegen/smurf.txt">   http://www.quadrunner.com/~chuegen/smurf.txt</A>
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>

Als je ooit te maken krijgt met een ping flood aanval, gebruik dan
een tool als <CODE>tcpdump</CODE> om te bepalen waar de pakketten vandaan komen
(of vandaan schijnen te komen) en neem vervolgens contact op met je provider
om deze informatie door te geven. Ping floods kunnen het eenvoudigst tot
staan worden gebracht op het router niveau of door gebruik te maken van
een firewall.</LI>
<LI><B>Ping o' Death</B> -  De Ping o' Death aanval stuurt ICMP ECHO
REQUEST pakketten die te groot zijn om te passen in de kernel
gegevensstructuren die bedoeld zijn om ze op te slaan. Omdat het sturen van
een enkel, groot (65,510 bytes) "ping" pakket naar veel systemen erin zal
resulteren dat ze "hangen" of zelfs crashen, werd dit probleem al snel de
"Ping  o' Death" genoemd. Dit probleem is al lang geleden opgelost en is niet
langer iets waar je je druk over hoeft te maken. </LI>
<LI><B>Teardrop / New Tear</B> - Een van de meest recente misbruiken
heeft te maken met een bug die aanwezig is in de IP fragmentatie code op Linux
en Windows platformen. Het is opgelost in kernel versie 2.0.33 en het is niet
meer nodig om tijdens het compileren van de kernel een optie te
selecteren om gebruik te maken van deze oplossing. Linux is blijkbaar niet
kwetsbaar voor het "newtear" misbruik. </LI>
</UL>
<P>Je kunt de code van de meeste misbruiken en een meer diepgaande
beschrijving van hoe ze werken, vinden op 
<A HREF="http://www.rootshell.com">http://www.rootshell.com</A> door
gebruik te maken van hun zoekmachine.
<H2>8.8 NFS (Network File System) beveiliging</H2>

<P> NFS is een veelgebruikt protocol om bestanden te delen. Het staat
servers toe om <CODE>nfsd</CODE> en <CODE>mountd</CODE> te draaien om gehele
bestandssystemen te "exporteren" naar andere machines door gebruik te
maken van de ondersteuning van het NFS bestandssysteem dat is ingebouwd
in hun kernels (of een andere client ondersteuning als het geen Linux
machines zijn). <CODE>mountd</CODE> houdt de gemounte bestandssystemen bij in
<CODE>/etc/mtab</CODE> en kan ze tonen met <CODE>showmount</CODE>.
<P> Veel sites gebruiken NFS om gebruikers te voorzien van een home directory,
zodat ze, ongeacht vanaf welke machine in het cluster ze inloggen, allemaal
hun eigen bestanden hebben.
<P> Er is maar een kleine hoeveelheid beveiliging toegestaan bij het
exporteren van bestandssystemen. Je kunt je <CODE>nfsd</CODE> de remote root
gebruiker (uid=0) laten omzetten naar de <CODE>nobody</CODE> gebruiker,
waardoor totale toegang tot de bestanden die worden ge&euml;xporteerd wordt
ontzegt. Omdat individuele gebruikers echter toegang hebben tot hun eigen
bestanden (of op z'n minst met hetzelfde uid), kan de remote root gebruiker
inloggen (of <CODE>su</CODE> gebruiken om in te loggen) op hun account en totale
toegang hebben tot hun bestanden. Dit is slechts een kleine hindernis voor een
aanvaller die toegang heeft om je remote bestandssystemen te mounten. 
<P> Als je NFS moet gebruiken, wees er dan zeker van dat je alleen exporteert
naar die machines waarnaar het echt nodig is. Exporteer nooit je gehele root
directory; exporteer alleen directory's die je moet exporteren.
<P> Bekijk de NFS HOWTO voor meer informatie over NFS, beschikbaar op
<A HREF="http://metalab.unc.edu/mdw/HOWTO/NFS-HOWTO.html">http://metalab.unc.edu/mdw/HOWTO/NFS-HOWTO.html</A><H2>8.9 NIS (Network Information Service) (voorheen YP)</H2>

<P> Network Information Service (voorheen YP) is een manier waarop informatie
verspreid wordt naar een groep machines. De NIS beheerder beheert de
informatietabellen en converteert ze naar NIS map bestanden. Deze mappen
worden dan op het netwerk gezet, waar ze NIS client machines toestaan om
login, wachtwoord, home directory en shell informatie te verkrijgen (alle
informatie in een standaard <CODE>/etc/passwd</CODE> bestand). Dit staat
gebruikers toe om eenmalig hun wachtwoord te veranderen, waarna dit zijn
uitwerking heeft op alle machines in het NIS domein.
<P> NIS is helemaal niet veilig. Dit was ook nooit de bedoeling. Het was
bedoeld om handig en nuttig te zijn. Iedereen die de naam van je NIS domein
kan raden (waar dan ook op het net), kan in het bezit komen van een kopie
van je passwd bestand en gebruik maken van "crack" en "John the Ripper"
om de wachtwoorden van je gebruikers te kraken. Ook is het mogelijk om
NIS te "spoofen" en allerlei soorten nare trucks uit te halen.Als je NIS moet
gebruiken, wees je dan bewust van de gevaren.
<P> Er is een veel veiligere vervanging voor NIS, genaamd NIS+. Bekijk de NIS
HOWTO voor meer informatie: 
<A HREF="http://metalab.unc.edu/mdw/HOWTO/NIS-HOWTO.html">http://metalab.unc.edu/mdw/HOWTO/NIS-HOWTO.html</A><H2>8.10 Firewalls</H2>

<P> Firewalls zijn bedoeld om te controleren welke informatie je lokale
netwerk binnenkomt en uitgaat. De firewall host is kenmerkend
verbonden met het Internet en je lokale LAN en de enige toegang vanaf je LAN
naar het Internet is via de firewall. Op deze manier kan de firewall in de
gaten houden wat naar en vanaf het Internet en je lokale LAN wordt
gestuurd.
<P> Er zijn een aantal soorten firewalls en manieren om ze op te zetten. Op
Linux machines kunnen erg goede firewalls gemaakt worden. Firewall code kan
rechtstreeks in 2.0 en hogere kernels ingebouwd worden. De user-space tools
<CODE>ipfwadm</CODE> voor 2.0 kernels en <CODE>ipchains</CODE> voor 2.2 kernels staan
je toe om direct de soorten netwerkverkeer die je toestaat te veranderen. Je
kunt ook bepaalde soorten netwerkverkeer loggen.
<P> Firewalls zijn een erg nuttige en belangrijke techniek om je netwerk
te beveiligen. Denk echter nooit dat omdat je een firewall hebt, je je
machines die erachter hangen niet hoeft te beveiligen. Dit is een fatale fout.
Bekijk de erg goede <CODE>Firewall-HOWTO</CODE> op je meest recente metalab
archief voor meer informatie over firewalls en Linux. 
<A HREF="http://metalab.unc.edu/mdw/HOWTO/Firewall-HOWTO.html">http://metalab.unc.edu/mdw/HOWTO/Firewall-HOWTO.html</A><P> Meer informatie kan ook gevonden worden in de IP-Masquerade mini-howto: 
<A HREF="http://metalab.unc.edu/mdw/HOWTO/mini/IP-Masquerade.html">http://metalab.unc.edu/mdw/HOWTO/mini/IP-Masquerade.html</A><P> Meer informatie over <CODE>ipfwadm</CODE> (de tool waarmee je de instellingen
voor je firewall kan veranderen) kan worden gevonden op:
<A HREF="http://www.xos.nl/linux/ipfwadm/">http://www.xos.nl/linux/ipfwadm/</A>   
<P>  Als je geen ervaring met firewalls hebt en van plan bent er een op te
zetten voor meer dan slechts een simpel beveiligingsbeleid, is het "Firewalls
book" door O'Reilly and Associates of een ander online firewall document
verplicht leesvoer. Bekijk 
<A HREF="http://www.ora.com">http://www.ora.com</A> voor meer informatie. Het National Institute of
Standards and Technology heeft een uitstekend document over firewalls
samengesteld. Hoewel het stamt uit 1995, is het nog steeds behoorlijk goed. Je
kunt het vinden op 
<A HREF="http://csrc.nist.gov/nistpubs/800-10/main.html">http://csrc.nist.gov/nistpubs/800-10/main.html</A>. Ook interessant:
<P>
<UL>
<LI> The Freefire Project -- een lijst van vrij verkrijgbare
firewall tools, beschikbaar op 
<A HREF="http://sites.inka.de/sites/lina/freefire-l/index_en.html">http://sites.inka.de/sites/lina/freefire-l/index_en.html</A></LI>
<LI> SunWorld Firewall Design -- geschreven door de auteurs van het
O'Reilly book. Dit verschaft een globale introductie tot de verschillende
soorten firewalls. Het is beschikbaar op 
<A HREF="http://www.sunworld.com/swol-01-1996/swol-01-firewall.html">http://www.sunworld.com/swol-01-1996/swol-01-firewall.html</A></LI>
<LI> Mason - de geautomatiseerde firewall bouwer voor Linux. Dit is een
firewall script dat je al doende de dingen leert die je moet doen op je
netwerk. Meer informatie op: 
<A HREF="http://www.pobox.com/~wstearns/mason/">http://www.pobox.com/~wstearns/mason/</A></LI>
</UL>
<H2>8.11 IP Chains - Linux Kernel 2.2.x Firewalling</H2>

<P>Linux IP Firewalling Chains is een update naar de 2.0 Linux firewalling  
code voor de 2.2 kernel. Het heeft veel meer voorzieningen dan voorgaande
uitvoeringen, inclusief:
<P>
<UL>
<LI> Meer flexibele pakketmanipulaties</LI>
<LI> Complexere accounting</LI>
<LI> Eenvoudige beleidswijzigingen zijn mogelijk op detail-niveau</LI>
<LI> Fragmenten kunnen expliciet worden geblokkeerd, geweigerd etc.</LI>
<LI> Logt verdachte pakketten</LI>
<LI> Kan omgaan met protocollen anders dan ICMP/TCP/UDP.</LI>
</UL>
<P>Als je nu <CODE>ipfwadm</CODE> op je 2.0 kernel gebruikt, zijn er scripts
beschikbaar om het <CODE>ipfwadm</CODE> commando formaat te converteren naar het
formaat dat <CODE>ipchains</CODE> gebruikt.
<P> Lees de IP Chains HOWTO voor verdere informatie. Het is beschikbaar op 
<A HREF="http://www.rustcorp.com/linux/ipchains/HOWTO.html">http://www.rustcorp.com/linux/ipchains/HOWTO.html</A><H2>8.12 VPN's - Virtual Private Networks</H2>

<P> VPN's zijn een manier om een "virtueel" netwerk tot stand te brengen
bovenop een reeds bestaand netwerk. Dit virtuele netwerk is vaak gecodeerd
en stuurt het verkeer alleen naar en van enkele bekende entiteiten die deel
uitmaken van het netwerk. VPN's worden vaak gebruikt om iemand die
thuis werkt via het publieke Internet te verbinden met het interne
bedrijfsnetwerk.
<P> Als je een Linux masquerading firewall draait en je moet MS PPTP
(Microsoft's VPN point-to-point product) pakketten omzeilen, is er een Linux
kernel patch uitgekomen om juist dat te doen. Zie: 
<A HREF="ftp://ftp.rubyriver.com/pub/jhardin/masquerade/ip_masq_vpn.html">ip-masq-vpn</A>.
<P> Er zijn diverse Linux VPN oplossingen beschikbaar: 
<P>
<UL>
<LI> vpnd. Zie de 
<A HREF="http://sunsite.auc.dk/vpnd/">http://sunsite.auc.dk/vpnd/</A>.</LI>
<LI> Free S/Wan, beschikbaar op 
<A HREF="http://www.xs4all.nl/~freeswan/">http://www.xs4all.nl/~freeswan/</A></LI>
<LI> ssh kan worden gebruikt om een VPN te construeren. Zie de VPN
mini-howto voor meer informatie.</LI>
<LI> vps (virtual private server) op 
<A HREF="http://www.strongcrypto.com">http://www.strongcrypto.com</A>.</LI>
</UL>
<P> Zie ook de paragraaf over IPSEC voor aanwijzingen en meer informatie.
<H2><A NAME="beveiligings-voorbereidingen"></A> <A NAME="s9">9. Beveiligingsvoorbereidingen (voordat je on-line gaat)</A></H2>

<P> Ok, dus je hebt je systeem gecontroleerd en bevonden dat het zo veilig 
mogelijk is en je bent klaar om het on-line te zetten. Er zijn een aantal
dingen die je nu moet doen om je voor te bereiden op een aanval, zodat je de
indringer snel kan uitschakelen, de zaak herstelt en weer draait.
<H2>9.1 Maak een volledige backup van je machine</H2>

<P> Een discussie over backupmethodes en opslag valt buiten de strekking van
dit document, maar hier zijn een paar woorden over backups en beveiliging:
<P>Als je minder dan 650 mb aan gegevens op een partitie op te slaan hebt, is
een kopie van je gegevens op een CD-R een goede manier (omdat het moeilijk is
om er later mee te knoeien en het een hele tijd meegaat mits het juist wordt
bewaard). Tapes en andere herschrijfbare media moeten gelijk tegen schrijven
worden beveiligd zodra je backup klaar is en vervolgens worden geverifieerd
om geknoei te voorkomen. Let erop dat je je backups bewaart op een veilige
off-line lokatie. Een goede backup verzekert je ervan dat je je systeem
kunt herstellen vanaf een bekend goed punt.
<H2>9.2 Het kiezen van een goed backupschema</H2>

<P> Een cyclus van zes tapes is makkelijk te onderhouden. Dit houdt in: vier
tapes voor door de week, een tape voor de even vrijdagen en een tape voor de
oneven vrijdagen. Voer elke dag een backup uit van alleen de gegevens die er
op die dag bijgekomen zijn en zet op de desbetreffende vrijdagtape een
volledige backup. Als je bepaalde belangrijke wijzigingen aanbrengt of enkele
belangrijke gegevens aan je systeem toevoegt, zal een volledige backup op zijn
plaats zijn.
<H2>9.3 Maak een backup van je RPM of Debian File Database</H2>

<P> In het geval dat je systeem binnengedrongen wordt, kun je je RPM database
gebruiken zoals je <CODE>tripwire</CODE> zou gebruiken, maar alleen als je er
zeker van kan zijn dat het niet ook is aangepast. Je moet de RPM database
kopi&euml;ren naar een diskette en deze kopie ten alle tijden off-line
bewaren. De Debian distributie heeft waarschijnlijk iets dergelijks.
<P> De bestanden <CODE>/var/lib/rpm/fileindex.rpm</CODE> en  
<CODE>/var/lib/rpm/packages.rpm</CODE> zullen waarschijnlijk niet op een enkele
diskette passen. Maar gecomprimeerd zal elk wel op een enkele diskette
passen.
<P> Nu, als je systeem in gevaar is gebracht, kun je het volgende commando
gebruiken:
<P>
<BLOCKQUOTE><CODE>
<PRE>
                root#  rpm -Va   
</PRE>
</CODE></BLOCKQUOTE>
<P> om elk bestand op je systeem te verifi&euml;ren. Zie de <CODE>rpm</CODE> man
pagina, want er zijn een paar andere opties die kunnen worden meegegeven om
het minder verbose (uitgebreid) te maken. Denk eraan dat je er ook
zeker van moet zijn dat je RPM binary niet in gevaar is gebracht.
<P> Dit betekent dat elke keer dat een RPM wordt toegevoegd aan het systeem,
de RPM database opnieuw moet worden gearchiveerd. Je moet de voordelen
afwegen tegen de nadelen. 
<H2><A NAME="logs"></A> 9.4 Houd je systeemlog gegevens bij</H2>

<P> Het is erg belangrijk dat de informatie die afkomstig is van
<CODE>syslog</CODE> niet gecompromitteerd is. De bestanden in <CODE>/var/log</CODE>
lees- en schrijfbaar maken voor slechts een beperkt aantal gebruikers is
een goed begin.
<P> Houd een oogje op wat er daar weggeschreven wordt, speciaal onder de 
<CODE>auth</CODE> faciliteit. Veelvuldig mislukte logins bijvoorbeeld, kunnen
een indicatie zijn voor een poging tot inbraak.
<P> Waar je je logbestand moet zoeken hangt af van je distributie. Onder een
Linux systeem dat in overeenstemming is met de "Linux Filesystem Standard",
zoals Red Hat, moet je kijken in <CODE>/var/log</CODE> en <CODE>messages</CODE>,  
<CODE>mail.log</CODE> en anderen controleren.
<P> Je kunt uitzoeken waar je distributie de logs wegschrijft door te kijken
naar je <CODE>/etc/syslog.conf</CODE> bestand. Dit is een bestand dat
<CODE>syslogd</CODE> (de systeem logging daemon) vertelt waar de diverse
berichten moeten worden gelogd.
<P> Misschien wil je ook je log-rotating script of daemon zo instellen dat ze
de logs langer bewaren, zodat je de tijd hebt om ze te onderzoeken. Bekijk
het <CODE>logrotate</CODE> pakket op recente Red Hat distributies. Andere
distributies hebben waarschijnlijk een soortgelijk proces.
<P> Als er met je logbestanden is geknoeid, kijk dan of je kan bepalen wanneer
het geknoei is begonnen en met wat voor soort dingen geknoeid is. Zijn er
grote periodes van tijd die niet gelogd zijn? Het zoeken op je backup tapes
(als je die hebt) naar logbestanden waar niet mee geknoeid is, is een goed
idee.
<P> Indringers staan er bekend om dat ze logbestanden aanpassen om hun sporen
uit te wissen, maar ze moeten toch worden gecontroleerd op vreemde
gebeurtenissen. Je kunt de indringer in de gaten krijgen als hij probeert
toegang te verkrijgen of een programma misbruikt om het root account te pakken
te krijgen. Misschien zie je wel log entries voordat de indringer tijd heeft
om ze aan te passen.
<P> Je moet ook de <CODE>auth</CODE> faciliteit scheiden van andere
loggegevens, evenals pogingen om van gebruiker te wisselen door gebruik te
maken van <CODE>su</CODE>, login pogingen en andere loginformatie van
gebruikers.
<P> Stel, indien mogelijk, <CODE>syslog</CODE> zo in dat het een kopie van de
belangrijkste gegevens stuurt naar een veilig systeem. Dit voorkomt dat een
indringer zijn sporen uit kan wissen door het verwijderen van zijn login/su/ftp/etc
pogingen. Zie de <CODE>syslog.conf</CODE> man pagina en ga naar de <CODE>@</CODE>
optie.
<P> Er zijn diverse meer geavanceerde <CODE>syslogd</CODE> programma's
beschikbaar. Neem een kijkje op 
<A HREF="http://www.core-sdi.com/ssyslog/">http://www.core-sdi.com/ssyslog/</A> voor Secure Syslog. Met Secure Syslog
kun je je syslog entries versleutelen om zeker te weten dat er niemand mee
heeft geknoeid. 
<P> Een andere <CODE>syslogd</CODE> met meer mogelijkheden is 
<A HREF="http://www.balabit.hu/products/syslog-ng.html">syslog-ng</A>.
Hiermee heb je meer flexibiliteit in je logging en het kan ook voorkomen dat
er met je remote syslog stromen wordt geknoeid.
<P> Tot slot, logbestanden zijn veel minder bruikbaar als niemand ze leest.
Maak zo af en toe eens wat tijd vrij om je logbestanden te bekijken om een
indruk te krijgen hoe ze er op een gewone dag uitzien. Dit kan helpen om
alles wat ongebruikelijk is te onderscheiden.
<H2>9.5 Maak gebruik van alle nieuwe systeem updates</H2>

<P> De meeste Linux gebruikers installeren vanaf een CD-ROM. Doordat het tempo
waarop beveiligingsfixes uitkomen hoog is, worden er altijd nieuwe
(gecorrigeerde) programma's uitgegeven. Voordat je je machine verbindt
met het netwerk, is het een goed idee om op de ftp site van je distributie te
kijken en alle bijgewerkte pakketten, vanaf het moment dat je de CD-ROM van je
distributie hebt ontvangen, te downloaden. Vaak bevatten deze pakketten
belangrijke beveiligingsfixes, dus het is een goed idee om ze te
installeren.
<H2><A NAME="na-inbraak"></A> <A NAME="s10">10. Wat te doen tijdens en na een inbraak</A></H2>

<P> Dus je hebt enkele van de adviezen hier (of ergens anders) opgevolgd en
een inbraak geconstateerd? Het eerste dat je moet doen is kalm blijven.
Overhaaste acties kunnen meer schade aanrichten dan de aanvaller zou hebben
gedaan.
<H2>10.1 Een aanval op de beveiliging is aan de gang</H2>

<P> Het in de gaten krijgen van een aanval op de beveiliging die aan de gang
is, kan een gespannen onderneming zijn. De manier waarop je reageert kan
grote gevolgen hebben.
<P> Als de aanval die je ziet een fysieke is, bestaat de kans dat je iemand
hebt opgemerkt die heeft ingebroken in je huis, kantoor of laboratorium. Je zou
de plaatselijke autoriteiten in moeten lichten. In een laboratorium kun je
misschien iemand opgemerkt hebben die probeerde een kast te openen of een
machine opnieuw op te starten. Afhankelijk van je autoriteit en procedures
kun je hem vragen daarmee te stoppen of contact opnemen met lokale
beveiligingsmensen.
<P> Als je hebt geconstateerd dat een lokale gebruiker je beveiliging in gevaar
tracht te brengen, is het eerste dat je moet doen je ervan vergewissen dat het
inderdaad de persoon is die je denkt dat het is. Controleer de site waar vanaf
hij inlogt. Is het de site waar vanaf hij normaal gesproken inlogt? Nee?
Gebruik dan een niet-elektronische manier om contact te maken. Bel hem
bijvoorbeeld op of loop naar zijn kantoor/huis en praat met hem. Als hij
bevestigt dat hij verbinding heeft, kun je hem vragen om uit te leggen
wat hij aan het doen was of hem vertellen dat hij ermee op moet houden. Als
hij geen verbinding heeft en ook geen idee heeft waar je het over hebt,
bestaat de kans dat dit incident verder uitgezocht moet worden. Bestudeer
zulke incidenten en verzamel genoeg informatie voordat je enige beschuldiging
uit.
<P> Als je een aanval via het netwerk hebt geconstateerd, is het eerste dat
je moet doen (als je daartoe de mogelijkheid hebt) het verbreken van de
verbinding met het netwerk. Als ze verbonden zijn met een modem, haal de
stekker van het modem er dan uit; als je verbonden zijn via Ethernet, haal dan
de Ethernet kabel los. Dit voorkomt dat ze nog meer schade aanrichten. Ze
zullen het waarschijnlijk als een netwerkprobleem zien en niet als een signaal
dat ze opgemerkt zijn.
<P> Als je de verbinding met het netwerk niet kunt verbreken (als je een
drukke site hebt of je hebt geen fysieke controle over je machines), is de
volgende stap om iets als <CODE>tcp_wrappers</CODE> of <CODE>ipfwadm</CODE> te
gebruiken om toegang vanaf de site van de indringer te weigeren.
<P> Als je niet alle mensen vanaf dezelfde site als de indringer de toegang
kunt weigeren, zal afsluiten van het gebruikersaccount de oplossing zijn.
Houd er rekening mee dat het afsluiten van een account niet gemakkelijk is.
Denk aan de <CODE>.rhosts</CODE> bestanden, FTP toegang en een host met
mogelijke achterdeuren.
<P> Als je een van de bovenstaande dingen hebt gedaan (het netwerk afgesloten, 
toegang vanaf hun site geweigerd en/of hun account uitgeschakeld), moet je
al hun gebruikersprocessen afsluiten en ze uitloggen.
<P> Je moet je site de komende paar minuten goed in de gaten houden, want de
aanvaller probeert om weer binnen te komen. Misschien door gebruik te maken van
een ander account en/of vanaf een ander netwerkadres.
<H2>10.2 Een aanval heeft reeds plaatsgevonden</H2>

<P> Dus je hebt ofwel een aanval opgemerkt die reeds heeft plaatsgevonden
of je hebt het opgemerkt en (hopelijk) de overtredende aanvaller buiten je
systeem gesloten. Wat nu?
<H3>Het gat dichten</H3>

<P> Als het gelukt is om vast te stellen op welke manier de aanvaller je
systeem is binnengedrongen, moet je proberen dat gat te dichten. Misschien zie
je bijvoorbeeld diverse FTP entries net voordat de gebruiker inlogte. Schakel
de FTP service uit en kijk of er een bijgewerkte versie van is of dat een van
de mailing lists iets weet over een fix.
<P> Controleer al je logbestanden en breng een bezoek aan je beveiligings
lists en pagina's om te kijken of er een fix is voor nieuwe algemene
misbruiken. Je kunt beveiligingsfixes voor Caldera vinden op 
<A HREF="http://www.caldera.com/tech-ref/security/">http://www.caldera.com/tech-ref/security/</A>. Red Hat heeft zijn
beveiligingsfixes nog niet gescheiden van zijn bug fixes, maar hun
distributie errata is beschikbaar op 
<A HREF="http://www.redhat.com/errata">http://www.redhat.com/errata</A>.
<P> Debian heeft nu een mailing list over beveiliging en een webpagina. Zie:
<A HREF="http://www.debian.org/security/">http://www.debian.org/security/</A> voor meer informatie.
<P> Het is erg waarschijnlijk dat als de ene distributeur een
beveiligingsupdate heeft uitgegeven, de meeste andere Linux distributeurs dit
ook zullen doen.
<P> Er is nu een project dat de beveiliging onder Linux doorlicht. Ze gaan
systematisch door alle user-space voorzieningen en kijken naar mogelijke
beveiligingslekken en overflows. Uit hun aankondiging:
<P>
<BLOCKQUOTE>
"We proberen de Linux bronnen systematisch door te lichten
teneinde net zo veilig te zijn als OpenBSD. We hebben reeds enkele problemen
ontdekt (en opgelost), maar meer hulp is welkom. De lijst staat open voor
iedereen en is tevens een bruikbaar hulpmiddel voor algemene
discussies over beveiliging. Het adres van de lijst is:
security-audit@ferret.lmh.ox.ac.uk. Stuur, om je in te schrijven, een e-mail
naar: security-audit-subscribe@ferret.lmh.ox.ac.uk" 
</BLOCKQUOTE>
<P> Als je de aanvaller niet buitensluit, komt hij waarschijnlijk terug.
Niet alleen terug op je machine, maar terug ergens op je netwerk. Als hij een 
packet sniffer draaide, is de kans groot dat hij toegang heeft tot andere
lokale machines.
<H3>De schade opnemen</H3>

<P> Het eerste dat je moet doen is de schade opnemen. Waar is mee geknoeid? 
Als je een integrity checker zoals <CODE>Tripwire</CODE> draait, kun je die
gebruiken om een integriteitscontrole uit te voeren; het helpt je met het
bepalen waarmee is geknoeid. Zo niet, dan zul je al je belangrijke gegevens
moeten nakijken.
<P> Omdat Linux systemen steeds eenvoudiger te installeren zijn, kun je
overwegen om je configuratiebestanden op te slaan, je disk(s) schoon te vegen,
opnieuw te installeren en je gebruikersbestanden en configuratiebestanden vanaf
backups terug te zetten. Zo ben je ervan verzekerd dat je een nieuw, schoon
systeem hebt. Als je bestanden moet terugplaatsen vanaf een gecompromitteerd
systeem, wees dan vooral voorzichtig met enige binary's die je terug plaatst,
omdat het Trojan horses kunnen zijn die daar neergezet zijn door de
indringer. 
<P> Als een indringer root toegang heeft verkregen, moet je opnieuw
installeren. Bovendien wil je alle bewijs dat er is graag bewaren, dus het
hebben van een reserve disk in de kluis is zinvol.
<P> Vervolgens moet je je druk maken over hoe lang geleden het gebeurd is en
of de backups beschadigd werk bevatten. Meer over backups volgt later.
<H3>Backups, backups, backups!</H3>

<P> Het hebben van regelmatig gemaakte backups is een uitkomst voor
beveiligingsaangelegenheden. Als je systeem gecompromitteerd is, kun je de
gegevens die je nodig hebt herstellen vanaf de backups. Natuurlijk zijn
sommige gegevens ook voor de aanvaller waardevol. Ze zullen ze niet alleen
vernietigen, ze zullen ze stelen en er kopie&euml;n voor henzelf van maken;
maar je hebt in ieder geval de gegevens nog.
<P> Je moet diverse eerdere backups controleren voordat je een bestand
herstelt waarmee geknoeid is. De indringer kan je bestanden al lang geleden
hebben gecompromitteerd en je kunt veel succesvolle backups gemaakt hebben van
het gecompromitteerde bestand. 
<P> Natuurlijk kleven er ook een aantal beveiligingsbezwaren aan backups.
Zorg ervoor dat je ze op een veilige plaats bewaart. Weet wie er toegang toe
heeft. (Als een indringer je backups te pakken kan krijgen, heeft hij toegang
tot al je gegevens zonder dat je het ooit te weten komt.)
<H3>De indringer traceren</H3>

<P> Ok, je hebt de indringer buitengesloten en je systeem hersteld, maar je
bent nog niet helemaal klaar. Hoewel het onwaarschijnlijk is dat de meeste
indringers ooit worden opgepakt, moet je aangifte doen van de aanval.
<P> Je moet de aanval rapporteren aan de beheerder van de site vanwaar de
aanvaller je systeem heeft aangevallen. Je kunt deze beheerder opzoeken
met <CODE>whois</CODE> of de Internic database. Je zou hem een e-mail kunnen
sturen met alle van toepassing zijnde log entries, datums en tijden. Als je
iets anders opmerkerkelijks over je indringer is opgevallen, moet je dat ook
melden. Na de e-mail verstuurd te hebben, zou je dit (mocht je daartoe geneigd
zijn) moeten laten volgen door een telefoontje. Als die beheerder op zijn beurt
je aanvaller in de gaten krijgt, kan contact worden opgenomen met de
beheerder van de site waar de aanvaller vandaan komt enzovoort.
<P> Goede crackers gebruiken vaak veel bemiddelende systemen. Sommige (of
veel) daarvan weten wellicht niet eens dat ze zijn gecompromitteerd. Proberen
om het spoor van een cracker terug te volgen naar zijn eigen systeem kan
moeilijk zijn. Wees beleefd tegen de beheerders waar je mee praat, ze
kunnen je een heel eind op weg helpen.
<P> Je moet ook de beveiligingsorganisaties waar je deel van uitmaakt
op de hoogte stellen (
<A HREF="http://www.cert.org/">CERT</A> of
soortgelijk), evenals de verkoper van je Linux systeem.
<H2><A NAME="bronnen"></A> <A NAME="s11">11. Bronnen</A></H2>

<P>Er zijn VEEL goede sites over de beveiliging van Unix in het algemeen
en over de beveiliging van Linux in het bijzonder. Het is erg belangrijk om je
te abonneren op een (of meer) van de beveiligings mailing lists en bij te
blijven op het gebied van beveiligingsfixes. De meeste van deze lists zijn
klein van omvang en erg informatief.
<H2><A NAME="ftpsites"></A> 11.1 FTP Sites</H2>

<P>CERT is het Computer Emergency Response Team. Ze versturen vaak
waarschuwingen voor recente aanvallen en fixes. Zie 
<A HREF="ftp://ftp.cert.org">ftp://ftp.cert.org</A> voor meer informatie.
<P>ZEDZ (voorheen Replay) (
<A HREF="http://www.zedz.net">http://www.zedz.net</A>) heeft archieven van vele beveiligingsprogramma's.
Omdat ze zich buiten de VS bevinden, hoeven ze zich niet te houden aan de
coderingsbeperkingen van de VS.
<P>Matt Blaze is de auteur van CFS en een goede beveiligingsadvocaat. Matt's
archief is beschikbaar op 
<A HREF="ftp://ftp.research.att.com/pub/mab">ftp://ftp.research.att.com/pub/mab</A><P><CODE>tue.nl</CODE> is een goede Nederlandse FTP site over beveiliging. 
<A HREF="ftp://ftp.win.tue.nl/pub/security/">ftp.win.tue.nl</A><H2><A NAME="websites"></A> 11.2 Websites</H2>

<P>
<UL>
<LI>The Hacker FAQ is een FAQ over hackers: 
<A HREF="http://www.solon.com/~seebs/faqs/hacker.html">The Hacker   FAQ</A></LI>
<LI>Het COAST archief heeft een groot aantal beveiligingsprogramma's en
informatie voor Unix: 
<A HREF="http://www.cs.purdue.edu/coast/">COAST</A></LI>
<LI>SuSe Security Page: 
<A HREF="http://www.suse.de/security/">http://www.suse.de/security/</A></LI>
<LI>Rootshell.com is een goede site om te zien welke soorten misbruik er
tegenwoordig worden gepleegd door crackers: 
<A HREF="http://www.rootshell.com/">http://www.rootshell.com/</A></LI>
<LI>BUGTRAQ geeft advies over beveiligingsonderwerpen: 
<A HREF="http://www.netspace.org/lsv-archive/bugtraq.html">BUGTRAQ   archives</A></LI>
<LI>CERT, het Computer Emergency Response Team, geeft advies over
algemene aanvallen op Unix platvormen:
<A HREF="http://www.cert.org/">CERT home</A></LI>
<LI>Dan Farmer is de auteur van SATAN en vele andere
beveiligingstools. Zijn eigen site bevat een handig overzicht met
beveiligingsinformatie, evenals beveiligingstools: 
<A HREF="http://www.trouble.org">http://www.trouble.org</A></LI>
<LI>De Linux security WWW is een goede site voor infomatie over de
beveiliging van Linux: 
<A HREF="http://www.aoy.com/Linux/Security/">Linux Security WWW</A></LI>
<LI>Infilsec heeft een kwetsbaarheidsengine die je kan vertellen welke
kwetsbaarheden betrekking hebben op een bepaald platform: 
<A HREF="http://www.infilsec.com/vulnerabilities/">http://www.infilsec.com/vulnerabilities/</A></LI>
<LI>CIAC verstuurt periodieke beveiligingsbulletins over algemeen
misbruik: 
<A HREF="http://ciac.llnl.gov/cgi-bin/index/bulletins">http://ciac.llnl.gov/cgi-bin/index/bulletins</A></LI>
<LI>Een goed startpunt voor Linux Pluggable Authentication modules kan
worden gevonden op 
<A HREF="http://www.kernel.org/pub/linux/libs/pam/">http://www.kernel.org/pub/linux/libs/pam/</A>.</LI>
<LI>Het Debian project heeft een webpagina voor hun beveiligingsfixes en
informatie. Het staat op 
<A HREF="http://www.debian.com/security/">http://www.debian.com/security/</A>.</LI>
<LI> WWW Security FAQ, geschreven door Lincoln Stein, is een goed naslagwerk
over web beveiliging. Je kunt het vinden op 
<A HREF="http://www.w3.org/Security/Faq/www-security-faq.html">http://www.w3.org/Security/Faq/www-security-faq.html</A></LI>
</UL>
<H2>11.3 Mailing Lists</H2>

<P>Bugtraq: Voor een abonnement op bugtraq stuur je een e-mail naar
listserv@netspace.org, waarbij in de inhoud van het bericht "subscribe bugtraq"
staat. (Zie de verwijzingen hierboven voor archieven).
<P>CIAC: Stuur een e-mail naar majordomo@tholia.llnl.gov. Zet in de INHOUD
(niet onderwerp) van het bericht "subscribe ciac-bulletin".
<P>Red Hat heeft een aantal mailing lists, waarvan de belangrijkste de
redhat-announce list is. Je kunt er lezen over beveiligings (en andere)
fixes zodra ze uitkomen. Stuur een e-mail naar
redhat-announce-list-request@redhat.com met als onderwerp "Subscribe". Zie
<A HREF="http://www.redhat.com/mailing-lists/redhat-announce-list/">http://www.redhat.com/mailing-lists/redhat-announce-list/</A> voor
meer informatie en archieven.
<P>Het Debian project heeft een beveiligings mailing list die hun
beveiligingsfixes behandelt. Zie 
<A HREF="http://www.debian.com/security/">http://www.debian.com/security/</A> voor meer informatie.
<H2>11.4 Boeken - Gedrukt materiaal</H2>

<P> Er zijn een aantal goede boeken over beveiliging in omloop. Deze paragraaf
somt een klein aantal hiervan op. In aanvulling op de boeken die specifiek over
beveiliging gaan, wordt beveiliging behandeld in een aantal andere boeken
over systeembeheer.
<P> Building Internet Firewalls door D. Brent Chapman &amp; Elizabeth D.
Zwicky<BR>
1e druk september 1995<BR>
ISBN: 1-56592-124-0
<P> Practical UNIX &amp; Internet Security, 2e druk door Simson
Garfinkel &amp; Gene Spafford<BR>
2e druk april 1996<BR>
ISBN: 1-56592-148-8
<P>Computer Security Basics By Deborah Russell &amp; G.T. Gangemi, Sr.<BR>
1e druk juli 1991<BR>
ISBN: 0-937175-71-4
<P>Linux Network Administrator's Guide door Olaf Kirch<BR>
1e druk januari 1995<BR>
ISBN: 1-56592-087-2
<P>PGP: Pretty Good Privacy door Simson Garfinkel<BR>
1e druk december 1994<BR>
ISBN: 1-56592-098-8
<P>Computer Crime A Crimefighter's Handbook door David Icove, Karl Seger
&amp; William VonStorch (Consulting Editor Eugene H. Spafford)<BR>
1e druk augustus 1995<BR>
ISBN: 1-56592-086-4
<P>Linux Security door John S. Flowers<BR>
New Riders<BR>
ISBN: 0735700354<BR>
maart 1999
<P>Maximum Linux Security : A Hacker's Guide to Protecting Your Linux  
Server and Network<BR>
Anoniem<BR>
Paperback - 829 pages<BR>   
Sams<BR>   
ISBN: 0672313413<BR>  
juli 1999
<P>Intrusion Detection door Terry Escamilla<BR>
Paperback - 416 pagina's (September 1998)<BR>
John Wiley and Sons<BR>   
ISBN: 0471290009
<P>Fighting Computer Crime<BR>
Donn Parker<BR>   
Paperback - 526 pagina's (September 1998)<BR>  
John Wiley and Sons<BR>   
ISBN: 0471163783
<H2><A NAME="s12">12. Verklarende woordenlijst</A></H2>

<P>
<UL>
<LI><B> authenticatie:</B> 
Het te weten komen of de ontvangen gegevens hetzelfde zijn als de verzonden
gegevens en of de beweerde afzender inderdaad de werkelijke afzender
is.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI><B> bastion host:</B>
Een computersysteem dat zwaar beveiligd moet zijn, omdat het kwetsbaar is voor
aanvallen, meestal omdat het is blootgesteld aan het Internet en een
belangrijk contactpunt is voor gebruikers van internationale netwerken. Het
dankt zijn naam aan de geavanceerde verdedigingsprojecten op de buitenmuren
van middeleeuwse kastelen. Bastions overzien kritieke verdedigingsgebieden,
hebben meestal sterke muren, ruimte voor extra mankracht en het soms nuttige
vat met kokend hete olie om aanvallers te ontmoedigen.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI><B> buffer overloop:</B>
De algemene coderingsstijl is om nooit buffers die groot genoeg zijn toe te
wijzen en niet te controleren op overlopen. Als zulke buffers overlopen, kan
het uitvoerende programma (daemon of set-uid programma) worden verlokt tot het
doen van andere dingen. Gewoonlijk gebeurt dit door het overschrijven van het
retouradres van een functie om naar een andere locatie te verwijzen.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI><B>denial of service:</B> Een aanval die de hulpbronnen op je computer
gebruikt voor dingen die het niet zou moeten doen en zodoende het normale
gebruik van je netwerkbronnen voor legitieme doeleinden verhindert.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI><B>dual-homed host:</B> Een computersysteem voor algemene doeleinden
dat op z'n minst twee netwerk interfaces heeft.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI><B>firewall:</B> Een component of set van componenten dat de toegang
beperkt tussen een beveiligd netwerk en het Internet of tussen andere
netwerken.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
   </LI>
<LI><B>host:</B> Een computersysteem dat aangesloten is op een netwerk.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI><B>IP spoofing:</B> IP Spoofing is een complexe technische aanval die
bestaat uit diverse onderdelen. Het is een beveiligingslek dat werkt door
computers in een vertrouwensrelatie te laten denken dat je iemand bent die je
in werkelijkheid niet bent. Er is een uitgebreid stuk geschreven over
deamon9, route en infinity in Volume Zeven, uitgave 48 van Phrack Magazine.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
 </LI>
<LI><B>non-repudiation:</B> De mogelijkheid die een ontvanger heeft om te
kunnen bewijzen dat de afzender van bepaalde gegevens inderdaad de gegevens
verstuurd heeft, zelfs wanneer de afzender later ontkent dat hij het ooit
verstuurd heeft.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI><B>pakket:</B> Het basisonderdeel van communicatie op het
Internet.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI><B>pakket filtering:</B> De actie die een apparaat onderneemt om
selectief de gegevensstroom naar en vanaf een netwerk te beheren.
Pakketfilters staan pakketten toe of blokkeren ze, gewoonlijk terwijl ze ze
routen van het ene netwerk naar het andere (veelal vanaf het Internet naar een
intern netwerk en vice versa). Om pakketfiltering tot stand te brengen, stel
je regels op die bepalen welke soorten pakketten (degenen naar of vanaf een
bepaald IP adres of poort) worden toegestaan en welke soorten geblokkeerd
worden.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI><B> perimeter netwerk:</B> Een netwerk dat toegevoegd is tussen een
beschermd netwerk en een extern netwerk, bedoeld om te voorzien in een
aanvullende beveiligingslaag. Een perimeter netwerk wordt soms een DMZ
genoemd. 
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI><B>proxy server:</B> Een programma dat de externe servers beheert
ten behoeve van interne clients. Proxy clients communiceren met
proxy servers, wiens relais clientverzoeken aan echte servers goedkeurt waarna
het relais antwoord terug geeft aan clients.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI><B>superuser:</B> Een informele naam voor <CODE>root</CODE>.</LI>
</UL>
<H2><A NAME="v-en-a"></A> <A NAME="s13">13. Veel gestelde vragen</A></H2>

<P>  
<OL>
<LI> Is het veiliger om ondersteuning van stuurprogramma's direct in de  
kernel te compileren, in plaats van het een module te maken?   
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
 
 
Antwoord: Sommige mensen denken dat het beter is om de mogelijkheid  
tot het laden van stuurprogramma's voor apparaten middels modules  
uit te schakelen, omdat een indringer een Trojan module of een module die  
invloed kan hebben op de beveiliging van het systeem kan laden.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>


Maar om modules te kunnen laden moet je root zijn. De module object  
bestanden zijn ook alleen beschrijfbaar door root. Dit betekent dat een  
indringer roottoegang nodig heeft om een module te plaatsen. Als de indringer  
roottoegang verkrijgt, zijn er meer serieuze zaken om je zorgen over te maken   
dan of hij al of niet een module kan laden.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>

  
Modules zijn bedoeld voor het dynamisch laden van ondersteuning voor een  
bepaald apparaat dat zelden gebruikt wordt. Op server machines of firewalls  
bijvoorbeeld, is het erg onwaarschijnlijk dat dit gebeurt. Om deze reden heeft  
het meer zin om ondersteuning voor machines die opereren als een server direct  
in de kernel te compileren.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> Waarom mislukt het inloggen als root vanaf een remote machine altijd? 
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>

  
Antwoord: Zie 
<A HREF="#root-beveiliging">Root beveiliging</A>.   
Dit is bewust gedaan om te voorkomen dat gebruikers via <CODE>telnet</CODE> een  
verbinding als root tot stand proberen te brengen, hetgeen een ernstige  
beveiligingskwetsbaarheid is, omdat dan het root wachtwoord, in  
leesbare tekst, verzonden zou worden over het netwerk. Vergeet niet: mogelijke  
indringers hebben de tijd en kunnen programma's uitvoeren die automatisch  
naar je wachtwoord zoeken.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> Hoe schakel ik "shadow passwords" op mijn Red Hat 4.2 of 5.x Linux  
box uit? 
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>

  
Antwoord: Om "shadow passwords" uit te schakelen, voer je <CODE>pwconv</CODE>  
uit als root. Nu zou <CODE>/etc/shadow</CODE> moeten bestaan en worden  
gebruikt door applicaties. Als je Red Hat 4.2 of hoger gebruikt, zullen de PAM  
modules zich automatisch aanpassen aan de verandering van het gebruik van  
het normale <CODE>/etc/passwd</CODE> naar "shadow passwords" zonder enige  
andere wijziging.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>

  
Een stukje achtergrondinformatie: "shadow passwords" is een techniek om je  
wachtwoord in een bestand, anders dan het normale <CODE>/etc/passwd</CODE>  
bestand, op te slaan. Dit heeft verscheidene voordelen. Het eerste is  
dat het schaduw bestand, <CODE>/etc/shadow</CODE>, alleen leesbaar is voor root, in  
tegenstelling tot <CODE>/etc/passwd</CODE>, wat leesbaar moet blijven voor  
iedereen. Het andere voordeel is dat je als beheerder accounts kan vrijgeven  
af afsluiten, zonder dat iedereen de status van andere gebruikersaccounts  
weet.  
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>


Het <CODE>/etc/passwd</CODE> bestand wordt dan gebruikt om gebruiker- en  
groepsnamen in op te slaan, die worden gebruikt door programma's als  
<CODE>/bin/ls</CODE> om het gebruikers ID naar de juiste gebruikersnaam om te  
zetten in een directoryweergave.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>


Het <CODE>/etc/shadow</CODE> bestand bevat dan alleen de gebruikersnaam en  
zijn/haar wachtwoord en misschien informatie over het account, zoals wanneer  
het account vervalt e.d. 
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>

 
Om "shadow passwords" in te schakelen, voer je <CODE>pwconv</CODE> uit als  
root. Nu zou <CODE>/etc/shadow</CODE> moeten bestaan en worden gebruikt door  
applicaties. Omdat je Red Hat 4.2 of hoger gebruikt, zullen de PAM modules  
zich automatisch aanpassen aan de verandering van het gebruik van het normale  
<CODE>/etc/passwd</CODE> naar "shadow passwords" zonder enige andere wijziging.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>

 
Omdat je ge&iuml;nteresseerd bent in het beveiligen van je  
wachtwoorden, zul je wellicht ook ge&iuml;nteresseerd zijn in de  
totstandkoming van goede wachtwoorden op zich. Hiervoor kun je de  
<CODE>pam_cracklib</CODE> module gebruiken, die onderdeel uitmaakt van PAM. Het  
kijkt of je wachtwoord voortkomt in de "Crack libraries", om je te helpen met  
de beslissing of het te gemakkelijk te raden is door programma's die  
wachtwoorden kunnen kraken.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> Hoe kan ik de Apache SSL extensies inschakelen?
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>

 
Antwoord:   
<OL>
<LI> Haal SSLeay 0.8.0 of hoger op vanaf 
<A HREF="ftp://ftp.psy.uq.oz.au/pub/Crypto/SSL">ftp://ftp.psy.uq.oz.au/pub/Crypto/SSL</A>.</LI>
<LI> Bouw, test en installeer het! </LI>
<LI> Haal de Apache 1.2.5 source op. </LI>
<LI> Haal de Apache SSLeay extensies op vanaf 
<A HREF="ftp://ftp.ox.ac.uk/pub/crypto/SSL/apache_1.2.5+ssl_1.13.tar.gz">here</A>.</LI>
<LI> Pak het uit in de apache-1.2.5 source directory en patch Apache  
zoals beschreven in README.</LI>
<LI> Configureer en bouw het. 
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
</OL>

  
Je kunt ook 
<A HREF="http://www.zedz.net">ZEDZ net</A>  
proberen, dat veel kant en klare pakketten heeft en zich buiten de Verenigde  
Staten bevindt.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> Hoe kan ik gebruikersaccounts bewerken en toch de beveiliging  
behouden? 
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>


Antwoord: De Red Hat distributie, speciaal Red Hat 5.0, bevat een  
groot aantal tools om de eigenschappen van gebruikersaccounts te  
veranderen.
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>

<UL>
<LI> De <CODE>pwconv</CODE> en <CODE>unpwconv</CODE> programma's kunnen gebruikt  
worden om te wisselen tussen "shadow" en "non-shadowed" wachtwoorden.</LI>
<LI> De <CODE>pwck</CODE> en <CODE>grpck</CODE> programma's kunnen gebruikt worden  
om te verifi&euml;ren of de <CODE>passwd</CODE> en <CODE>group</CODE> bestanden  
juist ingedeeld zijn. </LI>
<LI> De <CODE>useradd</CODE>, <CODE>usermod</CODE> en <CODE>userdel</CODE> programma's  
kunnen gebruikt worden om gebruikersaccounts toe te voegen, te verwijderen en  
aan te passen. De <CODE>groupadd</CODE>, <CODE>groupmod</CODE> en <CODE>groupdel</CODE>  
programma's doen hetzelfde voor groepen.</LI>
<LI> Wachtwoorden voor groepen kunnen met behulp van <CODE>gpasswd</CODE>  
aangemaakt worden.   </LI>
</UL>
 
 
Al deze programma's zijn "shadow-aware" -- dat houdt in dat als je
"shadow" inschakelt, ze <CODE>/etc/shadow</CODE> zullen gebruiken voor
wachtwoordinformatie, anders doen ze dat niet.      
Zie de respectieve man pagina's voor aanvullende informatie. </LI>
<LI> Hoe kan ik met behulp van Apache bepaalde HTML documenten met een
wachtwoord beveiligen?
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>


Ik wed dat je niet wist van het bestaan van 
<A HREF="http://www.apacheweek.com">http://www.apacheweek.org</A> of wel?
<BLOCKQUOTE><CODE>
<PRE>
</PRE>
</CODE></BLOCKQUOTE>


Je kunt informatie over het authenticeren van gebruikers vinden op  
<A HREF="http://www.apacheweek.com/features/userauth">http://www.apacheweek.com/features/userauth</A> evenals andere web
server beveiligingstips van 
<A HREF="http://www.apache.org/docs/misc/security_tips.html">http://www.apache.org/docs/misc/security_tips.html</A></LI>
</OL>
<H2><A NAME="conclusie"></A> <A NAME="s14">14. Conclusie</A></H2>

<P> Door je in te schrijven op de mailing lists voor  
beveiligingswaarschuwingen en bij te blijven, kun je een hoop doen met het  
oog op beveiliging van je machine. Als je je logbestanden in de gaten houdt  
en iets als <CODE>tripwire</CODE> regelmatig uitvoert, kun je zelfs nog meer  
doen.
<P> Een verstandig niveau van computerbeveiliging is niet moeilijk te  
onderhouden op een machine voor thuisgebruik. Meer moeite is vereist bij  
zakelijke machines, maar Linux kan zeker een veilig platform zijn. Dankzij
het karakter van de ontwikkeling van Linux, komen beveiligingsoplossingen
vaak veel sneller uit dan die voor commerci&euml;le besturingssystemen, wat
Linux een ideaal platform maakt als beveiliging een vereiste is.
<H2><A NAME="s15">15. Dankbetuigingen</A></H2>

<P> De informatie hier is verzameld uit vele bronnen. Dank aan de  
volgenden die zowel indirect als direct hebben bijgedragen:
<P>Rob Riggs 
<A HREF="mailto:rob@DevilsThumb.com">rob@DevilsThumb.com</A><P>S. Coffin 
<A HREF="mailto:scoffin@netcom.com">scoffin@netcom.com</A><P>Viktor Przebinda 
<A HREF="mailto:viktor@CRYSTAL.MATH.ou.edu">viktor@CRYSTAL.MATH.ou.edu</A><P>Roelof Osinga 
<A HREF="mailto:roelof@eboa.com">roelof@eboa.com</A><P> Kyle Hasselbacher 
<A HREF="mailto:kyle@carefree.quux.soltec.net">kyle@carefree.quux.soltc.net</A><P> David S. Jackson 
<A HREF="mailto:dsj@dsj.net">dsj@dsj.net</A><P> Todd G. Ruskell 
<A HREF="mailto:ruskell@boulder.nist.gov">ruskell@boulder.nist.gov</A> 
<P> Rogier Wolff 
<A HREF="mailto:R.E.Wolff@BitWizard.nl">R.E.Wolff@BitWizard.nl</A><P> Antonomasia 
<A HREF="mailto:ant@notatla.demon.co.uk">ant@notatla.demon.co.uk</A> 
<P> Nic Bellamy 
<A HREF="mailto:sky@wibble.net">sky@wibble.net</A> 
<P> Eric Hanchrow 
<A HREF="mailto:offby1@blarg.net">offby1@blarg.net</A> 
<P> Robert J. Berger
<A HREF="mailto:rberger@ibd.com">rberger@ibd.com</A> 
<P> Ulrich Alpers 
<A HREF="mailto:lurchi@cdrom.uni-stuttgart.de">lurchi@cdrom.uni-stuttgart.de</A> 
<P> David Noha 
<A HREF="mailto:dave@c-c-s.com">dave@c-c-s.com</A> 
<P> Pavel Epifanov 
<A HREF="mailto:epv@ibm.net">epv@ibm.net</A><P> Joe Germuska 
<A HREF="mailto:joe@germuska.com">joe@germuska.com</A><P> Franklin S. Werren 
<A HREF="mailto:fswerren@bagpipes.net">fswerren@bagpipes.net</A> 
<P> Paul Rusty Russell 
<A HREF="mailto:Paul.Russell@rustcorp.com.au">&lt;Paul.Russell@rustcorp.com.au></A> 
<P> Christine Gaunt 
<A HREF="mailto:cgaunt@umich.edu">&lt;cgaunt@umich.edu></A> 
<P> lin 
<A HREF="mailto:bhewitt@refmntutl01.afsc.noaa.gov">bhewitt@refmntutl01.afsc.noaa.gov</A> 
<P> A.Steinmetz 
<A HREF="mailto:astmail@yahoo.com">astmail@yahoo.com</A> 
<P> Jun Morimoto 
<A HREF="mailto:morimoto@xantia.citroen.org">morimoto@xantia.citroen.org</A> 
<P> Xiaotian Sun 
<A HREF="mailto:sunx@newton.me.berkeley.edu">sunx@newton.me.berkeley.edu</A> 
<P> Eric Hanchrow 
<A HREF="mailto:offby1@blarg.net">offby1@blarg.net</A> 
<P> De volgende personen hebben deze HOWTO vertaald in verschillende andere  
talen!
<P> Speciale dank aan hen allemaal voor hun hulp bij het verspreiden
van het Linux woord .... 
<P> Pools: Ziemek Borowski 
<A HREF="mailto:ziembor@FAQ-bot.ZiemBor.Waw.PL">ziembor@FAQ-bot.ZiemBor.Waw.PL</A> 
<P> Japans: FUJIWARA Teruyoshi 
<A HREF="mailto:fjwr@mtj.biglobe.ne.jp">fjwr@mtj.biglobe.ne.jp</A> 
<P> Indonesisch: Tedi Heriyanto 
<A HREF="mailto:22941219@students.ukdw.ac.id">22941219@students.ukdw.ac.id</A> 
<P> Koreaans: Bume Chang 
<A HREF="mailto:Boxcar0001@aol.com">Boxcar0001@aol.com</A> 
<P> Spaans: Juan Carlos Fernandez 
<A HREF="mailto:piwiman@visionnetware.com">piwiman@visionnetware.com</A><P> Nederlands: Nine Matthijssen 
<A HREF="mailto:smurfin@nl.linux.org">smurfin@nl.linux.org</A> 
</BODY>
</HTML>
