
                               TkRat mini-HOWTO

Dave Whitinger, dave@linuxtoday.com
Version française : Philippe Martin, feloy@wanadoo.fr

   v1.2, 15 Septembre 1999
     _________________________________________________________________

   _Voici le TkRat mini-HOWTO. Ce document est destiné à quiconque
   voudrait utiliser Linux pour envoyer et recevoir des messages
   électroniques par l'Internet. _
     _________________________________________________________________

1. Introduction

   Ce document est maintenu par Dave Whitinger ( dave@linuxtoday.com).
   Merci de me contacter pour toutes questions ou idées relatives à cet
   HOWTO.

   Ce document va tenter de décrire comment :

    1. Installer le programme de messagerie TkRat,
    2. Récupérer ses messages chez un Fournisseur de Services Internet
       (_FSI_),
    3. Lire, stocker et envoyer des messages,
    4. Trier ses messages dans différents classeurs.

   Ce document suppose que vous utilisez Linux avec le système X Window,
   avez déjà établi une connexion avec votre Fournisseur de Services
   Internet, et avez un compte POP chez ce fournisseur.

   Responsabilités : Toutes responsabilités habituelles s'appliquent.
   L'auteur ne peut en aucun cas être tenu responsable d'une (mauvaise)
   utilisation des informations données ici. Ce document ne tente en
   aucun cas de faire autorité. L'auteur a volontairement créé ce
   document séparément de toute entité avec laquelle il pourrait être
   impliqué. En lisant ce document, vous acceptez de ne créer à l'auteur
   ni ennuis ni griefs. :)

2. Installer TkRat

   Je voudrais souligner qu'il existe un grand nombre d'excellents
   programmes de messagerie disponibles sous Linux. C'est toujours une
   question de goût personnel que de choisir lequel utiliser.

   Cela dit, je dois vous avouer que j'utilise un programme appelé TkRat
   depuis plus de deux ans maintenant -- et je l'adore. C'est un
   programme avec une interface graphique qui a toutes les
   caractéristiques que vous attendez d'un programme de messagerie de
   qualité : il est simple d'apprentissage, il est puissant, et il est
   libre. Pour ces raisons, cet HOWTO ne traitera que de TkRat.

   La première chose à faire est de récupérer TkRat. Vous pouvez soit
   obtenir les sources que vous compilerez, soit obtenir les exécutables.

   Voici quelques URL pour le logiciel :

     * ftp://ftp.md.chalmers.se/pub/tkrat/tkrat-2.0b3.tar.gz
       (Téléchargement via ftp)
     * http://www.dtek.chalmers.se/~maf/ratatosk/tkrat-2.0b3.tar.gz
       (Téléchargement via http)
     * http://www.dtek.chalmers.se/~maf/ratatosk/download.html (Page de
       téléchargement - vérifiez la dernière version !)

   Lorsque vous avez téléchargé l'archive, vous êtes prêt à l'installer
   sur votre système.

   Pour installer les sources tar.gz, utilisez les commandes :
     _________________________________________________________________

          tar -zcvpf tkrat-2.0b3.tar.gz
          cd tkrat-2.0b3
          ./configure
          make
          make install
     _________________________________________________________________

   Si quelque chose échoue, consultez les fichiers INSTALL et README se
   trouvant dans le répertoire tkrat-2.0b3. Notez que vous aurez besoin
   d'une version de tcl supérieure à 8.1 pour compiler. Vous pouvez
   obtenir la dernière version de tcl depuis scriptics.com.

   Bravo - TkRat devrait être installé sur votre système maintenant.

3. Récupérer vos messages

   Afin de lire vos messages, le mieux est généralement d'utiliser le
   programme appelé fetchmail. Les instructions suivantes sont réputées
   marcher parfaitement pour la version 2.2 de fetchmail -- bien qu'elles
   doivent être applicables à d'autres versions.

   (Note : fetchmail est très certainement déjà installé sur votre
   système, celui-ci étant inclus dans toutes les distributions Linux que
   je connaisse - si tel n'est pas le cas, prière de me le faire savoir
   !)

   Exécutez les étapes suivantes :
     _________________________________________________________________

          echo "server pop.fr protocol pop3 username dave password xxxxx" > ~/.
fetchmailrc
     _________________________________________________________________

   (N'oubliez pas de remplacer _pop.fr_ par le nom du serveur POP de
   votre FSI. Remplacez _dave_ par votre identifiant de messagerie et
   _xxxxx_ par votre mot de passe associé.)

   À partir de maintenant, chaque fois que vous voulez voir si vous avez
   des messages, tapez juste fetchmail sur la ligne de commande.
   fetchmail va partir récupérer tous vos messages et les stocker dans
   votre classeur de messages local.

4. Configurer TkRat

   Depuis la ligne de commande, tapez tkrat suivi d'_Entrée_.
   Cliquez sur Create.
   Lisez le message qu'il vous présente, puis cliquez sur Continue.

   À ce point, vous êtes amené au programme principal de TkRat. La
   première chose à faire est de l'adapter à votre système local.

    1. Allez dans le menu Admin, et choisissez Preferences,
    2. Cliquez sur Sending,
    3. Entrez votre adresse électronique dans le champ Default Reply-To,
    4. Entrez votre adresse électronique, suivie de votre nom entre
       parenthèses dans le champ Use from address, par exemple
       dave@linuxtoday.com (Dave Whitinger)
    5. Entrez votre nom de domaine dans le champ Domain. Si votre adresse
       électronique est utilisateur@xyz.fr, entrez xyz.fr
    6. Cliquez sur Apply,
    7. Cliquez sur Method,
    8. Pour Send Via, sélectionnez SMTP,
    9. Dans le champ SMTP host, entrez l'adresse du serveur SMTP de votre
       FSI (ils devraient être capable de vous fournir cette
       information),
   10. Cliquez sur Apply, puis sur Dismiss.

5. Utiliser TkRat

   Au démarrage de TkRat, vous noterez que vous êtes dans un classeur
   appelé INBOX. Utilisez fetchmail pour récupérer vos messages. Si vous
   en avez, ils apparaîtront dans le classeur INBOX.

   TkRat a une interface intuitive. La moitié supérieure de l'écran
   montre la liste des messages que vous avez reçus (chaque ligne étant
   un message différent). La moitié inférieure montre le contenu du
   message sélectionné.

   Vous pouvez lire un message en cliquant simplement sur ce message dans
   la liste.

   Lorsque vous avez fini de lire un message, vous pouvez aller voir un
   autre message, répondre à ce message, écrire un nouveau message, ou
   déplacer ce message vers un autre classeur.

   Les Folders sont un moyen de stocker vos messages électroniques dans
   différents _classeurs_. Ainsi, vous pouvez conserver plusieurs
   classeurs, chacun contenant les messages sur un certain sujet.

   Exécutez les instructions suivantes pour créer des classeurs :
    1. Choisissez le menu Admin, puis New/Edit Folders
    2. Vous voyez une boîte avec un classeur INBOX. Cliquez (avec le
       bouton gauche) sur cette boîte.
    3. Il vous est alors présenté un menu, sélectionnez-y New File
       Folder.
    4. Il vous sera présenté une boîte de dialogue vous demandant des
       informations.
    5. Dans le premier champ, entrez un nom pour le classeur.
    6. Dans le second, entrez le nom de fichier qui sera utilisé pour y
       stocker les messages.
       Un petit conseil : utilisez quelque chose comme
       /home/utilisateur/mail/nom_du_classeur. Par exemple, si le premier
       champ est _Personnel_, le second serait quelque chose comme
       home/dave/mail/personnel (en supposant que votre nom d'utilisateur
       soit _dave_.)
    7. Cliquez sur OK. Vous noterez que votre nouveau classeur apparaît
       maintenant dans la liste des classeurs. Allez alors dans Window,
       puis Close.

   Vous pouvez maintenant déplacer vos messages vers le nouveau classeur
   - et basculer vers ce classeur en sélectionnant son nom sous le menu
   Folders.

   Envoyer des messages est aussi simple. Cliquez sur Compose, tapez
   l'adresse électronique du destinataire, le sujet, puis le message.

   Lorsque vous avez terminé, cliquez sur Send.

6. Tri automatique des messages dans les classeurs

   Si vous êtes comme moi, vous recevez près de 3500 messages par jour.
   Chaque fois que vous allez chercher vos messages (Note : _fetch mail
   en anglais_), vous devez parcourir tous vos messages pour trouver ceux
   qui vous intéressent.

   Ce n'est plus un problème, grâce à Procmail.

   Procmail fonctionne ainsi :

   Procmail examine chaque message au moment où il est récupéré, et
   exécute une série de tâches fondées sur certaines règles que vous lui
   avez spécifiées.

   Disons, par exemple, que je reçoive 200 messages par jour d'une
   certaine liste (prenons ici la liste _linux-machin_). Plutôt que de
   voir tous ces messages partir directement dans mon classeur INBOX, je
   préfère qu'ils soient automatiquement filtrés et dirigés dans un
   classeur appelé _liste-machin_.

   La première chose à faire est de prendre quelques exemples de messages
   provenant de cette liste et d'en examiner les entêtes.

   Je commence à discerner un motif répétitif. Chaque message provenant
   de cette liste contient une ligne disant :

          Sender: owner-linux-machin@bidule.chouette.fr

   Je peux maintenant dire à procmail de placer chaque message contenant
   cette ligne dans un certain classeur.

   Je peux le préciser à procmail à travers un fichier .procmailrc.

   Je vais utiliser mon éditeur de texte préféré pour créer un fichier
   texte dans mon répertoire racine, appelé .procmailrc.

   Ce fichier ressemblera à :
     _________________________________________________________________

          LOGFILE=$HOME/.pmlog
          MAILDIR=$HOME/mail
          VERBOSE

          # liste linux-machin
          :0 Hw
          * ^.*[Ss]ender: owner-linux-machin@bidule.chouette.fr
          liste-machin

          # S'il arrive ici, l'envoyer dans mon classeur 'nouveaux'
          :0 Hw
          nouveaux

     _________________________________________________________________

   Examinez la ligne [Ss]ender. Vous noterez que cette ligne est ce que
   tous les messages provenant de cette liste ont en commun.

   Cette section dit à procmail de placer les messages arrivant avec une
   entête comme celle-ci dans le classeur _liste-machin_.

   La section suivante dit que si le message ne correspond à aucune règle
   précédente, alors il faut le placer dans le classeur _nouveaux_.

   Maintenant, disons que je veuille que les messages de la part de mon
   ami _EJ_ aillent dans un classeur nommé _EJ_.

   Il suffit de rajouter une section à mon fichier .procmailrc :
     _________________________________________________________________

          LOGFILE=$HOME/.pmlog
          MAILDIR=$HOME/mail
          VERBOSE

          # liste linux-machin
          :0 Hw
          * ^.*[Ss]ender: owner-linux-machin@bidule.chouette.fr
          liste-machin

          # Message de E.J. !
          :0 Hw
          * ^.*[Ff]rom: ej@monpote.fr
          ej

          # S'il arrive ici, l'envoyer dans mon classeur 'nouveaux'
          :0 Hw
          nouveaux
     _________________________________________________________________

   Remarquez la nouvelle section pour _EJ_. Lorsqu'un message y arrive
   avec son adresse dans le champ From, il sera automatiquement placé
   dans mon classeur ej.

   Maintenant, disons qu'il y ait un boiteux par-là qui tienne à
   m'écrire. Je ne veux pas entendre parler de lui, mais il insiste.
   Encore une fois - procmail à la rescousse.

   Disons alors que ne ne veuille recevoir aucun message de _Bill Gates_.
   Je peux définir un expéditeur dont tous les messages seront effacés.
   Voyez alors mon nouveau .procmailrc :
     _________________________________________________________________


          LOGFILE=$HOME/.pmlog
          MAILDIR=$HOME/mail
          VERBOSE

          # Provient-il de Bill Gates?  Si oui, A LA POUBELLE !!!
          :0 Hw
          * ^.*[Ff]rom: bgates@microsoft.com
          /dev/null

          # liste linux-machin
          :0 Hw
          * ^.*[Ss]ender: owner-linux-machin@bidule.chouette.fr
          liste-machin

          # Message de EJ !
          :0 Hw
          * ^.*[Ff]rom: ej@monpote.fr
          ej

          # S'il arrive ici, l'envoyer dans mon classeur 'nouveaux'
          :0 Hw
          nouveaux
     _________________________________________________________________

   Maintenant, j'ai un fichier .procmailrc plutôt bien. Examinons ce que
   procmail va faire de chaque message qu'il reçoit.

   Premièrement, il regarde si ce message provient de
   _bgates@microsoft.com_. Si oui, il l'efface et c'est fait.

   Si le message est passé à travers la première vérification, procmail
   regarde s'il contient _owner-linux-machin@bidule.chouette.fr_ dans
   l'entête. Si oui, il le dépose dans le classeur liste-machin, et
   voilà.

   Si le message est aussi passé à travers celle-là, il regarde s'il
   provient d'_EJ_. Si oui, il le place dans le classeur ej.

   Maintenant, si le message est passé à travers tous ces tests, alors il
   le place dans le classeur nouveaux.

   Une fois ces classeurs mis en place et procmail filtrant correctement
   vos messages, vous pouvez aller dans TkRat, Admin - New/Edit Folder et
   créer les classeurs pour chaque fichier. Ils seront placés dans
   /home/utilisateur/mail/nom_classeur

7. Copyright

   Ce HOWTO est Copyright 1998, 1999 par Dave Whitinger, et c'est un
   document libre. Vous pouvez le redistribuer et/ou le modifier sous les
   termes de la GPL (GNU General Public License) publiée par la FSF (Free
   Software Foundation) ; soit la version 2 de la Licence, soit une
   version ultérieure.

8. Remerciements

   Je remercie tout particulièrement Martin Forsse'n
   (_maf@dtek.chalmers.se_) pour avoir créé l'_agent utilisateur de
   messagerie_ TkRat.

   Je remercie également le _North Texas Linux User's Group_ (Dallas,
   Texas), pour qui j'ai à l'origine écrit ce document début 1998.
   Aujourd'hui aucun remerciement ne va plus à aucun groupe
   d'utilisateurs, car je vis dans les montagnes de l'Est du Tennessee,
   où je pense être le seul utilisateur de Linux (ou même utilisateur
   d'un ordinateur) à 50 miles à la ronde.

   Notez aussi : Nic Bernstein a fait bifurquer le code de TkRat pour
   créer un agent de messagerie appelé Postilion. Il semble être un
   excellent agent de messagerie avec un grand nombre de nouvelles
   fonctionnalités qui ne sont pas dans TkRat, mais, néammoins, je
   continue à utiliser TkRat.
