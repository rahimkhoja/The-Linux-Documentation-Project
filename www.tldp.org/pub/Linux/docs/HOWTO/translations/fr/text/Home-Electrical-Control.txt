 Contrôler les appareils électriques de votre domicile (Guide pratique)

  Traduction française du Home Electrical Device Control HOWTO

  Rui Li

   <ruili CHEZ worldnet POINT att POINT net>

   Conversion au format SGML DocBook v4.1 : Joy Yokley

   Adaptation française: Joan Goutte

   Relecture de la version française: Claude Thomassin

   Préparation de la publication de la v.f.: Jean-Philippe Guérard

   Version : 0.008.fr.1.0

   2004-05-16

   +----------------------------------------------------------------+
   | Historique des versions                                        |
   |----------------------------------------------------------------|
   | Version 0.008.fr.1.0          | 2004-05-16    | JG, CT, JPG    |
   |----------------------------------------------------------------|
   | Première adaptation française.                                 |
   |----------------------------------------------------------------|
   | Version 0.008                 | 2003-02-08    | Goldencat      |
   |----------------------------------------------------------------|
   | Conversion de la version originale du format LinuxDoc au       |
   | format SGML DocBook 4.1.                                       |
   |----------------------------------------------------------------|
   | Version 0.007                 | 2002-02-12    | RL             |
   |-------------------------------+---------------+----------------|
   | Version 0.006                 | 2001-06-27    | JEY            |
   |-------------------------------+---------------+----------------|
   | Version 0.005                 | 2001-06-13    | RL             |
   |-------------------------------+---------------+----------------|
   | Version 0.004                 | 2001-06-12    | JEY            |
   +----------------------------------------------------------------+

   Résumé

   Ce guide va vous expliquer comment utiliser Linux pour contrôler
   vos appareils électriques domestiques. Grâce à un montage très
   simple, vous pourrez contrôler presque n'importe quel appareil
   électrique via un ordinateur sous Linux.

   -------------------------------------------------------------------

   Table des matières

   1. Introduction

   2. Configuration recommandée

   3. Le montage électronique

   4. Exemples de relais

   5. Remerciements particuliers

   6. Droits d'utilisation

1. Introduction

   On m'a souvent demandé : « Est-il possible de contrôler du
   matériel électrique (comme les lumières, la radio, la
   télévision...) en utilisant un ordinateur personnel ? » La réponse
   est oui. Le procédé permettant de le faire est très simple et tout
   le monde peut le faire.

   Après avoir lu le « Petit guide de la machine à café » (Coffee
   Machine Mini-HOWTO), j'ai eu l'idée d'une façon de contrôler les
   appareils électriques de mon domicile. J'ai fait quelques
   modifications sur le montage présenté dans ce petit guide et écrit
   un petit programme. Le montage peut commander de nombreux petits
   dispositifs électriques. Vous pouvez utiliser crontab pour allumer
   vos lumières automatiquement ou pour mettre en marche votre
   climatiseur. Je l'utilise pour contrôler mon magnétoscope et mon
   lecteur de disques vidéo (ces deux derniers nécessiteront encore
   quelques modifications). En écrivant un petit programme, vous
   pourrez tout contrôler via internet. Vous pourrez aussi vous
   connecter via telnet ou SSH et votre ligne téléphonique pour
   contrôler tous les appareils que vous avez connecté au système.

   Le montage est très simple. Même si vous n'y connaissez rien en
   électronique, vous pourrez réaliser ce montage.

2. Configuration recommandée

   Prenez n'importe quel ordinateur sous Linux et un port parallèle
   qui marche ;) J'utilise un 386DX avec 4 Mo de RAM et 40 Mo de
   disque dur. Vous devrez récupérez gcc pour compiler le programme.
   Si vous voulez utiliser telnet ou SSH, vous aurez aussi besoin de
   telnetd ou sshd. Vous pouvez écrire votre propre programme en
   utilisant ioperm et outb. Si vous comptez utiliser mon programme,
   vous aurez besoin de g++.

   Cliquez le lien suivant pour télécharger mon programme. Vous aurez
   besoin de g++ pour le compiler :
   http://edc.sourceforge.net/paralle.tar.gz
   [http://edc.sourceforge.net/paralle.tar.gz].

3. Le montage électronique

   La ligne de données du port parallèle peut fournir entre 0 et
   5 Volts, nous pouvons l'utiliser pour commander un relais et faire
   contrôler un appareil électrique par ce relais.

   Utilisez les broches 2 à 9 pour avoir le +5 V

   Utilisez les broches 18 à 25 comme terre (la masse)

            ____________________________________________________________
           /                                                            \
           \     13  12  11  10   9   8   7   6   5   4   3   2   1     /
            \                                                          /
             \     25  24  23  22  21  20  19  18  17  16  15  14     /
              \______________________________________________________/


                                           | Vcc du relais
                                           |
                                           |
                                   / ------+--------| |--------|
 P données           4.7K       B /  c     | 1N4002 |_|        |-------
 -----------/\/\/\/\--------+----| NPN   _____        | relais |Appareils
                            |    \   e    /_\       |-|        |électriques
                  LED       X     \        +--------| |        |-------
 P Masse                    |      |       |          |--------|
 ---------------------------+------+-------+
 Masse du relais                           |
 ------------------------------------------+

   Voici la légende du schéma ci-dessus :

 P données        ligne de données du port parallèle (broches 2 à 9,
                  utilisez n'importe laquelle)
 P Masse          Masse du port parallèle (broches 18 à 25, utilisez
                  n'importe laquelle)
 Vcc              Dépend du type de votre relais. J'utilise du 12 VDC
 Masse du relais  La masse pour du 12VDC
 4.7k             Résistance de 4.7Ke
 NPN              Transistor NPN C2235
 1N4002           Diode 1N4002
 LED              LED ;)
 relais           Relais a bobine (coil relay)

   Le +5 Volts du port parallèle allume le relais. Une fois le relais
   allumé, l'appareil branché sur ce relais sera en marche. Quand les
   données du port parallèle repassent à 0, le relais s'éteindra et
   l'appareil s'arrêtera.

4. Exemples de relais

   Les schémas ci-dessous sont là pour expliquer comment les relais
   fonctionnent.

   Le relais lui-même est juste un interrupteur comme nous le voyons
   dans le schéma suivant :

   Relais éteint                       Relais allumé

        |3                                    |3
        |                                     |
        |                                     |
        o                                     o
         \                                    |
        o \                                   o
        |                                     |
        |                                     |
        |                                     |
        |4                                    |4


   Le schéma suivant montre le fonctionnement d'un relais à 4 bornes.

       _____________________________
       |                           |
   1   |                           |  3
  -----|---------s     o-----------|-------
       |  Bobine s      \  inter-  |
   2   |         s       \ rupteur |  4
  -----|---------s     o- \--------|-------
       |                           |
       |                           |
       |                           |
       |___________________________|

   Dans le schéma ci-dessus, les bornes 3 et 4 ne sont pas reliées
   par défaut. Quand vous envoyez du +12 V entre les bornes 1 et 2,
   ça déclenchera l'interrupteur, et les broches 3 et 4 seront
   reliées.

   Le suivant est un relais à 5 broches :

            _______________________________
            |                             |
      1     |                             |       5
   ---------|---+            o------------|----------------
            |   |-----------/---- s       |
            |              /      s       |
      3     |             /       s       |
   ---------|-----------o/ Bobine s       |       4
            |                 o---s-------|----------------
            |                     |       |
            |                     |       |
      2     |                     |       |
  ----------|---------------------+       |
            |_____________________________|

   Dans le schéma ci-dessus la broche 3 est connectée a la broche 5,
   par défaut. En envoyant +12V entre les broches 1 et 2, vous
   allumerez le commutateur. Les broches 3 et 5 seront déconnectées
   et les broches 5 et 4 seront reliées.

   Relais éteint                       Relais allumé

      |5                                  |5
      |                                   |
      |                                   |
      o                                   o
       \                                  |
      o \                                 o  o
      |  o                                |  |
      |  |                                |  |
      |  |                                |  |
     4|  |3                              4|  |3

   Certains relais ont plus de 5 broches. Un plus grand nombre de
   broches correspond simplement à un plus grand nombre de
   commutateurs.

   J'ai écris un petit programme qui peut commander 8 relais. Le
   programme est disponible a l'adresse suivante et nécessite g++
   pour fonctionner : http://edc.sourceforge.net/paralle.tar.gz
   [http://edc.sourceforge.net/paralle.tar.gz]

   Un montage complet peut commander jusqu'à 8 relais. Autrement dit,
   8 appareils électriques différents. Vous aurez besoin d'un
   connecteur DB25. Pour relier cette carte relais à votre
   ordinateur, utilisez un câble parallèle pour commutateur. J'ai mis
   la carte relais dans une boite et je la relie à ma machine Linux
   avec un câble parallèle de commutateur (i.e. câble parallèle
   DB25-DB25).

 Façade: LED, Interrupteur   Dos: connecteur DB25

   Ci-dessous un exemple de la façon de relier une carte relais a vos
   appareils électriques :

 CARTE RELAIS CONNECTÉE

                    +-----+ Prise de courant
 1 ________3        |   __|________             ||   ||
 --|      |---------+  |  |       |             ||   ||
 2 |relais|4           | (o) (o)  |            _||___||__
 --|______|----+       |------|---|            |        |
               |              |                |        |
               | +------------+                |        | Prise
         terre | | courant                     |        |
               | |                             |        |
             __|_|__                           |        |
             | | | |                           |________|
             | | | | Prise
             | | | |
             |_|_|_| (Je sais que ça ne ressemble pas à une prise,
              || ||   mais c'est une prise :-) )
              || ||

   Pour brancher le système, branchez juste votre appareil électrique
   à la prise de courant. C'est tout ! Vous n'avez pas besoin de
   bricoler votre appareil électrique. Et vous pouvez relier
   n'importe quel genre d'appareils à cette prise de courant.
   Branchez cette prise de courant sur une prise murale.

   Pour voir les photos du produit fini, allez sur les sites suivants
   :

     o http://edc.sourceforge.net/p1.jpg
       [http://edc.sourceforge.net/p1.jpg]

     o http://edc.sourceforge.net/p2.jpg
       [http://edc.sourceforge.net/p2.jpg]

     o http://edc.sourceforge.net/p3.jpg
       [http://edc.sourceforge.net/p3.jpg]

   L'URL suivante montre un circuit électronique complet (qui
   commande 8 appareils) : http://edc.sourceforge.net/01.png
   [http://edc.sourceforge.net/01.png]

5. Remerciements particuliers

   Un grand MERCI à Rufus Chang <rufus CHEZ chu POINT url POINT com
   POINT tw>

   Un grand MERCI à Chih-Wei Huang <cwhuang CHEZ linux POINT org
   POINT tw>

6. Droits d'utilisation

   Copyright © Rui Li 2000-2001.

   Copyright © 2003-2004 Joan Goutte, Claude Thomassin et
   Jean-Philippe Guérard pour la version française.

   Ce document est distribué selon les termes de la Licence publique
   générale GNU (GPL), avec la condition supplémentaire que le nom et
   l'adresse électronique de l'auteur soient conservée sur toutes les
   copies. S'il vous plaît, conservez mon nom et mon adresse
   électronique lorsque vous copiez ce guide.

