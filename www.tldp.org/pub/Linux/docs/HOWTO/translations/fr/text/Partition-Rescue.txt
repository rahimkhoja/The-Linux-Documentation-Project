
                Mini-Howto sur la récupération d'une partition

AUTEUR Rolf Klausen, rolfk@romsdal.vgs.no

   v1.1, 22 Octobre 1997
     _________________________________________________________________

   _Ce document décrit comment récupérer une partition détruite par
   MS-DOG_
     _________________________________________________________________

1. INTRODUCTION

   _Introduction_ J'ai installé Linux sur mon ordinateur et je l'utilise
   depuis un an maintenant, et je pense que c'est le meilleur OS jamais
   créé. J'ai aussi MS-DOG ET Windows NT 4.0 installé sur mon ordinateur.
   La raison pour laquelle j'utilise MS-DOG est très simple, car comme
   l'a écrit Lars Wirzenius une fois :" MS-DOS - you can't live with it,
   you can't live without it " (MS-dos - vous ne pouvez ni vivre avec, ni
   vivre sans). Je l'utilise pour les jeux, les démos, et aussi pour le
   travail. Mais cela suffit. J'ai deux partitions DOS, une partition
   primaire et un disque logique (je suppose que vous savez ce que c'est,
   sinon lisez le mini-HOWTO sur la Partition. On peut le trouver à
   sunsite.unc.edu et sans doute dans d'autres endroits). Mes partitions
   ont à peu près 500 MB chacun (j'ai un disque dur de 3.2 GB et un autre
   de 1.2 GB). Ma partition Linux est de 1200 MB. J'ai un espace libre
   d'environ 800 MB dont je ne sais pas quoi faire pour l'instant, et je
   me demandais comment je m'y prendrais si j'avais besoin de plus
   d'espace pour DOS (un jeu important ou autre chose), parceque je ne
   savais pas combien de disques logiques DOS pouvait gérer en tout. Je
   ne sais pas pourquoi mais je pensais que DOS ne pouvait en avoir qu'un
   (en plus de sa partition primaire). Aussi je voulais vérifier que DOS
   pouvait accèder à plusieurs disques logiques. Je démarrais fdisk (DOS)
   et utilisais le menu pour créer un disque logique DOS. J'en créais un
   de 100 MB. Puis je le formattais et tout marchait parfaitement.Pensée
   très agréable ! Et alors je connus ça! En realité je n'avais pas
   besoin de ce disque et je décidais donc de le détruire. J'utilisais de
   nouveau fdisk, choisissais dans le menu "delete DOS primary partition
   or logical drive"(détruire une partition primaire ou un disque logique
   ou quelque chose de ce genre), sélectionnais le disque E: pour le
   détruire, tapais le label du volume (en réalité il n'y en avait pas
   donc je tapais enter), et fdisk m'avertit que le disque avait été
   détruit avec succès. Puis je redémarrais. Sur mon ordinateur j'utilise
   un programme appelé System Commander. C'est un bon programme qui
   propose un menu sympa (comme le Boot Manager d'OS/2) avec icônes et
   quelques outils intéressants. Il détecte automatiquement les OS.

   Mais quand je redémarrais, Linux avait disparu du menu. Je démarrais
   DOS, tapais e: suivi d'ENTER, et tout restait calme. Je redémarrais
   fdisk, choisissais d'afficher la table des partitions, mon disque E: y
   était présent et là où se trouvait ma partition Linux il n'y avait
   plus qu'un espace libre! CHOC! HORREUR! je commençais à suer et
   trembler. Que pouvais-je faire! Je ne pouvais pas simplement tout
   réinstaller. Il devait y avoir un moyen pour tout récuperer.Et, oui,
   il y en avait un! Merci mon Dieu (même si je ne crois pas en lui) il y
   en avait un. J'avais un tas d'informations utiles et de programmes sur
   cette partition! Avant je me demandais comment récuperer ma partition,
   je souhaitais que Bill Gates ne fut jamais né! Avez-vous déjà vécu la
   même chose récemment ? Ne soyez pas effrayé! La solution est là! lisez
   juste encore un peu plus loin...! Oh, en raison du fait que je vis en
   Norvège, mon anglais n'est probablement pas très bon, mais j'espère
   que vous comprendrez quand même.

1.1 Déclaration

   _Déclaration_ Ce mini-howto est Copyright (C) 1997 Rolf Klausen. Tous
   droits réservés. Vous pouvez faire tout ce que vous voulez avec (enfin
   presque). Cela m'est égal. Seulement gardez mon nom intact. Je
   souhaite simplement que cela soit utile aux utilisateurs de la
   communauté Linux. Mais, s'il-vous-plaît, lisez la section suivante.

   _IMPORTANT!!!_

   Je ne suis pas responsable des dommages causés à un ordinateur
   resultant de la lecture de ce HOWTO. Si vous causez des dommages, cela
   sera votre faute, pas la mienne! Soyez prudent quand vous partitionnez
   des disques, ne faites pas d'erreur, car cela peut être fatal.
   Sauvegardez vos données importantes et vérifiez que tout ce que vous
   faites est correct. Ce qui est décrit ici marche avec mon ordinateur,
   mais il peut ne pas marcher avec le vôtre. Normalement, il devrait
   marcher pour tout le monde mais je ne peux rien garantir. C'est le
   dernier avertissement que vous lirez :_ SAUVEGARDER VOS DONNEES
   IMPORTANTES!_ ou pour résumer, faite l'usage de ce HOWTO à vos propres
   risques.

1.2 Copyright

   _Copyright_ Sauf indication contraire, les droits d'auteur des HOWTO
   Linux sont détenus par leurs auteurs respectifs. Les HOWTO Linux
   peuvent être reproduits et distribués, en totalité ou en partie, sur
   tout media physique ou électronique dans la mesure où ce copyright est
   preservé dans chaque copie. La distribution commerciale en est
   autorisée et encouragée. L'auteur apprécierait toutefois qu'on lui
   notifie individuellement ce genre de distribution.

   Le présent copyright doit couvrir toute traduction, compilation et
   autre travail dérivé des HOWTO Linux. C'est-à-dire qu'il est interdit
   d'imposer des restrictions de diffusion allant au delà du présent
   copyright à des ouvrages inspirés, ou incorporant des passages, de
   HOWTO Linux. Sous certaines conditions, des exceptions à ces règles
   seront tolérées : contactez le coordinateur des HOWTO à l'adresse
   donnée ci-dessous ou le coordinateur des traductions francaises, à
   l'adresse mailto:dumas@Linux.EU.ORG.

   Pour résumer, nous souhaitons une diffusion aussi large que possible
   de ces informations. Néanmoins, nous entendons garder la propriété
   intellectuelle (copyright) des HOWTO, et apprécierions d'être informés
   de leur redistribution.

   Si vous avez des questions, contactez Greg Hankins le coordinateur des
   documents HOWTO de Linux, par e-mail gregh@sunsite.unc.edu par
   téléphone +1 404 853 9989 ou Tim Bynum à l'adresse électronique
   suivante tjbynum@sunsite.unc.edu

2. PREPARATIONS ET BESOINS

2.1 Ce dont vous avez besoin

   _VOS BESOINS_ Donc, MS-dog a détruit votre partition Linux? Voilà ce
   dont vous avez besoin pour le ramener d'entre les morts :
     * une installation MS-DOS en état de marche, de préférence sur un
       disque dur( peut-être que cela marche aussi avec une disquette, je
       ne sais pas)
     * un programme sous Dos appelé Magique Partition (magic partition).

2.2 Je suppose que ...

   _Si vous êtes dans se cas_, alors votre chance de récupérer votre
   partition est élevée!

3. JE VEUX RETROUVER MA PARTITION!

   _Le sauvetage _OK! Soyez prêt à sauver...attrapez une tasse de café,
   relaxez-vous. Tout va bien aller - Pouvez-vous imaginer ce que j'ai
   ressenti quand MaSsy-DOS a détruit ma partition? Je n'ai jamais été
   aussi en colère de toute ma vie (enfin presque). Mais j'ai trouvé un
   moyen de récupérer la partition, soit ...

3.1 Le programme _Partition Magique_

   Récuperer le programme_ magique partition_ (partition magic program)
   sur internet. Le démarrer et vous aurez une jolie interface
   utilisateur ressemblant à win95. C'est très facile à utiliser et si
   vous utilisez windoze95, vous n'aurez pas de problème. Cliquez sur le
   bouton OK, une représentation graphique de votre disque apparaîtra sur
   votre écran. Les différentes partitions et systemes de fichiers sont
   representés par des couleurs différentes. J'ai une partition primaire
   DOS, et vous aussi, je suppose. Ma partition Linux se trouve sur un de
   mes disques logiques. Où là il était avant, maintenant il y a
   seulement une barre grise d'espace libre. A gauche ou à droite de
   cette barre vous devez avoir un petit disque logique qui est votre
   partition Linux Swap. Maintenant cliquez avec le bouton droit sur
   l'espace libre et sélectionner créer ou choisissez à partir du menu.
   Vous devriez être capable de comprendre comment ça marche. Comme dit
   précedemment, c'est très facile d'utiliser l'interface. Quand la boîte
   de dialogue _creation_ apparait, vous pouvez choisir entre _FAT HPFS_
   et _Unformatted _, sélectionner _unformatted_. Si vous choisissez FAT
   ou HPFS, un système de fichiers FAT ou HPFS sera cree sur la partition
   et votre système de fichiers Linux sera dètruit, aussi soyez certain
   de faire le bon choix. Ensuite sélectionnez OK et votre partition sera
   créée. Mais votre partition est marquée comme une partition DOS FAT16
   (dans la table de partition, chaque partition a une marque (un nombre
   héxadecimal) qui montre à quel OS la partition appartient). Que
   faites-vous maintenant ? Continuez sur la section suivante.

3.2 Changer la partition en partition Linux native

   _Vous avez besoin_ maintenant des deux disquettes boot et root, aussi
   j'espère que vous les avez. Il est aussi possible d'utiliser loadlin.
   Soyez simplement sûr de pouvoir démarrer Linux et de lancer fdisk à
   partir de lui. Premiere chose à faire est de login(ouvrir un session),
   démarrer fdisk en tapant fdisk au prompt du shell. Si vous avez plus
   d'une partition, vérifiez que fdisk choisit bien la bonne. Tapez "p"
   (simplement la lettre p) et ENTER. Vous devriez avoir maintenant
   l'affichage de la table de partition. Il y a normalement plus d'un
   "DOS 16-BIT >=32M". Cherchez celle qui correspond à votre partition
   Linux (regardez la taille... etc) et notez son nombre (exemple le mien
   est /dev/hda6, ainsi je dois me rappeler le nombre 6 ). Maintenant
   tapez "t" et ENTER pour changer le type de la partition, ou ID comme
   c'est nommè dans fdisk de Linux (je ne suis pas sûur de celui qui est
   correct, type ou ID mais j'utilise le mot type). Maintenant tapez le
   nombre que vous avez mémorisé et ENTER. Maintenant il vous faut taper
   le code hexadécimal correspondant à l'OS auquel appartient votre
   partition. Quand vous avez fait tout cela et sans erreur, votre
   partition devrait être OK! OUI! C'EST VRAI! Cela a marché pour moi, et
   devrait marcher pour vous aussi! Il ne reste plus qu'une chose à
   faire.

3.3 La touche finale

   _Il reste encore quelques détails_. Avant tout redémarrez Linux comme
   vous le faites habituellement (LILO, etc) et regardez si tout marche.
   Si cela ne marche pas, soit vous vous êtes trompé, soit ma méthode de
   récupération ne marche pas pour vous (mais si cela démarre
   correctement, félicitations! Vous avez fait tout correctement!
   Maintenant fsck va vérifier votre systhème de fichier une fois (il
   vérifiait le mien deux fois, je ne sais pas pourquoi). Et tout
   marchera bien de nouveau! Si ce n'est pas le cas, ne me blamez pas.
   Comme je l'ai dit, cela a marché pour moi, pas forcèment pour vous. Si
   j'ai sauvé votre partition, m'envoyez un e-mail serait très sympa.

4. CONTRIBUTIONS

   _Contributions et remerciements_

4.1 Auteurs

   _AUTEURS _il n'y en a qu'un et c'est moi : Rolf Klausen.

     _E-mail_ : rolkf@romsdal.vgs.no _WWW _:
     http://www2.romsdal.vgs/no/ rolfk/ _courrier_ : Rolf Klausen
     Neptunvn 10 6400 Molde NORWAY

4.2 Remerciements

   _Mes remerciements vont à _:
     * Eivind Stormyr (eivind@ardata.no) pour m'avoir fait connaître
       Linux, le meilleur OS jamais créé et m'avoir appris un tas de
       choses sur les ordinateurs
     * Bjorn Olav Stormyr (bjorn@ardata.no)pour m'avoir fourni de grands
       morceaux de mon ordinateur. Sans lui je n'aurais pas pu avoir
       d'ordinateur personnel
     * chaque autre membre de la communaute de Linux et chaque personne
       qui soutient Linux, écrit de la documentation et des programmes
       pour Linux et tous les auteurs de LDP et virtuellement toute
       personne ayant quelque chose à voir avec Linux.
     * particulièrement Linux B. Thorvalds -c'est le ROI
     * et bien sûr, Tone B. Skjoelsvik qui est la plus belle fille du
       monde.

4.3 Mes remerciements ne vont pas à ...

   _Je ne remercie pas ..._ Bill Gates (htt://Bill.gates@microsoft.com
   (?)) pour avoir créé le système d'exploitation le plus affreux qui
   soit sur terre et pour avoir détruit ma partition Linux (Oui, je le
   blâme. S'il n'était pas né, alors ma partition n'aurait pas été
   détruite, je n'aurai pas eu à la sauver et je n'aurai jamais écrit ce
   mini HOWTO).
