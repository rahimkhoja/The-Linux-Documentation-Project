<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
  "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
<!ENTITY howto      "http://www.traduc.org/docs/howto/lecture/">
<!ENTITY guide      "http://www.traduc.org/docs/guides/lecture/">
]>

<!--
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Changelog:
        31122001: Very start
        30032002: Last correction, french translation
 -->

<article lang="fr">

<articleinfo>

<title>

Guide pratique d'utilisation de la carte mère Elite K7s5a sous Linux

</title>

<author>
  <firstname>Sebfrance</firstname>
  <email>rf POINT eerf CHEZ otwohecnarfbes</email>
</author>

<othercredit role="publication" class="copyeditor">
  <firstname>Jean-Philippe</firstname>
  <surname>Guérard</surname>
  <contrib>Préparation de la publication de la v.f.</contrib>
  <email>fevrier CHEZ tigreraye POINT org</email>
</othercredit>

<releaseinfo>Version&nbsp;: 1.1</releaseinfo>
<pubdate>30 mars 2002</pubdate>

</articleinfo>

<sect1>
<title>Introduction</title>

<important><para>

La version française de ce document est largement dépassée. 
Reportez-vous à l'original anglais... <ulink 
url="http://seb.france.free.fr/linux/K7S5A/en/K7s5a-HOWTO.html"/>.

</para></important>

<para>

J'ai eut cette carte pour noël 2001, et après quelques recherches, j'ai 
compris que le chipset sis735 n'était pas reconnu par <ulink 
url="http://www.mandrake.com">mandrake</ulink> 8.0, <ulink 
url="http://www.opensound.com">OSS</ulink> avait des pilotes qui 
fonctionnait bien mais je ne voulais pas les payer, donc j'ai été voir 
sur le cvs d'alsa et ai découvert qu'ils avait quelque chose pour le sis 
7012 et plus tard, ai aussi trouveé les pilotes pour les capteurs de 
températures de la carte.

</para>

</sect1>

<sect1>
<title>La carte son intégrée</title>

<sect2>
<title>Obtention des pilotes</title>

<para>

Donc nous allons compiler les sources récentes d'alsa, qui devrait 
fonctionner de la même manière sur les autres distrib... Seulement les 
sources du noyau changeront puisque mandrake a ses propres patches. Vous 
pouvez obtenir ces sources sur le cd ou un ftp de votre distribution ou 
de <ulink 
url="http://www.kernel.org/pub/linux/kernel/">http://www.kernel.org</ulink>. 
Ici, on pourra trouver les sources du noyau Mandrake utilisé sous 
8.0&nbsp;: <ulink 
url="ftp://ftp.univ-savoie.fr/pub/Linux/Mandrake/8.0/i586/Mandrake/RPMS/kernel-source-2.4.3-20mdk.i586.rpm"/>

</para>

<para>

il vous faudra aussi les pilotes d'alsa&nbsp;: <ulink 
url="ftp://ftp.alsa-project.org/pub/driver/alsa-driver-0.9.0beta10.tar.bz2"/>.

</para>

</sect2>

<sect2>
<title>Installation</title>

<para>

Installez vos sources du noyau, dans mon cas&nbsp;:

</para>

<programlisting>
rpm -ivh kernel-source-2.4.3-20mdk.i586.rpm
</programlisting>

<para>

Puis décompressez les pilotes alsa&nbsp;:

</para>

<programlisting>
bzip2 -d alsa-driver-0.9.0beta10.tar.bz2 &amp;&amp; \
    tar -xvf alsa-driver-0.9.0beta10.tar
</programlisting>

<para>

les compiler, les installer, et créer les fichiers de périphériques dans 
<filename>/dev</filename>.

</para>

<programlisting>
cd alsa-driver-0.9.0beta10 &amp;&amp; \
    make install &amp;&amp; ./snddevices
</programlisting>

<para>

Éditez /etc/modules.conf pour tout régler en y ajoutant ces 
lignes&nbsp;:

</para>

<programlisting>
alias char-major-116 snd
alias char-major-14 soundcore
alias sound-slot-0 snd-card-0
alias sound-service-0-0 snd-mixer-oss
alias sound-service-0-1 snd-seq-oss
alias sound-service-0-3 snd-pcm-oss
alias sound-service-0-8 snd-seq-oss
alias sound-service-0-12 snd-pcm-oss
alias snd-card-0 snd-card-intel8x0
</programlisting>

</sect2>

</sect1>

<sect1>

<title>Les capteurs de la carte mère</title>

<sect2>

<title>Obtention des pilotes</title>

<para>

Il est <emphasis>impératif</emphasis> de prendre lm&lowbar;sensors 2.6.2 
ou plus récent&nbsp;: <ulink 
url="http://www.lm-sensors.nu/archive/lm_sensors-2.6.2.tar.gz"/>

</para>

<para>

Il vous faudra aussi les sources du noyau voir la rubrique 
<quote>Obtention des pilotes</quote> pour <quote>la carte son 
intégrée</quote>

</para>

</sect2>

<sect2>
<title>Installation</title>

<programlisting>
tar -xzvf i2c-2.6.2.tar.gz
cd i2c-2.6.2
make &amp;&amp; make install
</programlisting>

<para>

Ensuite, j'ai eut un problème en faisant 
<literal>make&nbsp;install</literal>, donc si cela ne marche pas pour 
vous non plus, faites les commandes suivantes&nbsp;:

</para>

<programlisting>
cp kernel/i2c-core.o /lib/modules/`uname -r`/misc/i2c-core.o
cp kernel/i2c-proc.o /lib/modules/`uname -r`/misc/i2c-proc.o
cp kernel/chips/it87.o /lib/modules/`uname -r`/misc/it87.o
</programlisting>

<para>

ok, maintenant copie du programme sensors&nbsp;:

</para>

<programlisting>
cp prog/sensors/sensors /usr/bin/sensors
</programlisting>

<para>

Éditez alors <filename>/etc/modules.conf</filename> et ajoutez lui ces 
lignes&nbsp;:

</para>

<programlisting>
alias char-major-89 i2c-dev
options it87 temp&lowbar;type=0x31
</programlisting>

<para>
effectuez alors&nbsp;:
</para>

<programlisting>
modprobe i2c-proc
modprobe it87
modprobe i2c-isa
sensors
</programlisting>

<para>

Et là, miracle&nbsp;! Ça devrait fonctionner.

</para>

<para>

Sous le compte root, vous devriez éditer le 
<filename>/etc/sensors.conf</filename> la ligne contenant&nbsp;: 
<literal>chip "it87-*"</literal> et les suivantes permettent de modifier 
les réglages pour obtenir les bons résultats, voici une copie de cette 
partie modifiée de mon fichier (temp1 ne correspond à rien de précis, 
seul temp2 et temp3 fonctionnent).

</para>

<programlisting>
chip "it87-*"
&num; The values below have been tested on Asus CUSI, CUM motherboards.
&num; Voltage monitors as advised in the It8705 data sheet
label in0 "VCore"
label in1 "Vcc2.5v"
label in2 "Vcc5v"
label in3 "+5V"
label in4 "+12V"
label in5 "-12V"
label in6 "-5V"
label in7 "SB 5V"
label in8 "V battery"
set in0&lowbar;min 1.5 * 0.95
set in0&lowbar;max 1.5 * 1.05
set in1&lowbar;min 2.4
set in1&lowbar;max 2.6
set in2&lowbar;min 3.3 * 0.95
set in2&lowbar;max 3.3 * 1.05
set in3&lowbar;min 5.0 * 0.95
set in3&lowbar;max 5.0 * 1.05
set in4&lowbar;min 12 * 0.95
set in4&lowbar;max 12 * 1.05
set in5&lowbar;min -12 * 0.95
set in5&lowbar;max -12 * 1.05
set in6&lowbar;min -5 * 0.95
set in6&lowbar;max -5 * 1.05
set in7&lowbar;min 5 * 0.95
set in7&lowbar;max 5 * 1.05
&num; vid not monitored by IT8705F
ignore  vid
&num; For this family of chips the negative voltage equation is different from
&num; the lm78.  The chip uses two external resistor for scaling but one is
&num; tied to a positive reference voltage.  See ITE8705/12 datasheet (SIS950
&num; data sheet is wrong)
&num; Vs = (1 + Rin/Rf) * Vin - (Rin/Rf) * Vref.
&num; Vref = 4.096 volts, Vin is voltage measured, Vs is actual voltage.
compute in2 (1 + 1)*@ ,       @/(1 + 1)
compute in3 ((6.8/10)+1)*@ ,  @/((6.8/10)+1)
compute in4 ((30/10) +1)*@  , @/((30/10) +1)
&num; The next two are negative voltages (-12 and -5).
&num; The following formulas must be used. Unfortunately the datasheet
&num; does not give recommendations for Rin, Rf, but we can back into
&num; them based on a nominal +2V input to the chip, together with a 4.096V Vref.
&num; Formula:
&num;    actual V = (Vmeasured * (1 + Rin/Rf)) - (Vref * (Rin/Rf))
&num;    For -12V input use Rin/Rf = 6.68
&num;    For -5V input use Rin/Rf = 3.33
&num; Then you can convert the forumula to a standard form like&nbsp;:
compute in5 (7.67 * @) - 27.36  ,  (@ + 27.36) / 7.67
compute in6 (4.33 * @) - 13.64  ,  (@ + 13.64) / 4.33
&num;
compute in7 ((6.8/10)+1)*@ ,  @/((6.8/10)+1)
&num; Temperature
label temp3       "Processor"
set   temp3&lowbar;over  40
set   temp3&lowbar;hyst  20
label temp2       "Mainboard"
set   temp2&lowbar;over  45
set   temp2&lowbar;hyst  25
ignore temp1
&num; Fans
label fan1"Processor's Fan"
set fan1&lowbar;min 2000
ignore fan3
ignore fan2
</programlisting>

</sect2>

</sect1>

</article>
