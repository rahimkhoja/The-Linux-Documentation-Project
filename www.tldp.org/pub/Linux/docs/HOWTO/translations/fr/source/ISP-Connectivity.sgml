<!doctype linuxdoc system>
<article>
<title>
ISP-Connectivity-mini-HOWTO
<author>Michael Strates, <tt>mstrates@croftj.net</tt>
<date>v2.0, 6 Novembre 1997
<abstract>
Ce document décrit comment configurer une liaison PPP, se connecter à
son Fournisseur d'Accès Internet (F.A.I.), configurer le courrier et
les news, obtenir une adresse IP statique (si cela est possible), 
obtenir un nom de domaine et avoir un système sérieux tournant en un
peu plus de trente minutes.
</abstract>
<toc>
<p>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<sect> Introduction
<p>
Le but principal de ce document est, évidemment, de familiariser
un nouvel utilisateur avec tout ce qui concerne la connexion d'un
PC Linux à Internet, l'obtention d'adresses IP, de noms de domaines,
et la configuration des différentes parties. Ce guide est
destiné à un utilisateur moyen, bien que les débutants
intelligents ne devraient pas, non plus, avoir de problèmes.
<p>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<sect1> Nouvelles versions de ce document
<p>
Les nouvelles versions de ce document seront périodiquement postées
dans <it>comp.os.linux.answers</it> (NDT : les versions françaises
des Howtos et Mini-Howtos sont postées tous les mois dans 
<it/fr.comp.os.linux.annonces/). Elles seront aussi placées sur les
différents sites FTP anonymes qui archivent les informations sur Linux.
Parmi ceux-ci&nbsp;:
<p>
<tt>
<htmlurl url="ftp://sunsite.unc.edu/pub/Linux/docs/HOWTO"
name="ftp://sunsite.unc.edu/pub/Linux/docs/HOWTO">
</tt>
<p>
Vous trouverez aussi ce document sur la page du « Linux Documentation Project »&nbsp;:
<p>
<tt>
<htmlurl url="http://sunsite.unc.edu/LDP/"
name="http://sunsite.unc.edu/LDP/">
</tt>
<p>
La version française est disponible sur le site&nbsp:
<p>
<tt>
<htmlurl url="ftp://ftp.lip6.fr/pub/linux/french/docs/HOWTO"
name="ftp://ftp.lip6.fr/pub/linux/french/docs/HOWTO">
</tt>
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<sect1> Commentaires
<p>
J'apprécierais tout commentaire sur ce HOWTO, fautes d'orthographes, 
comment il fonctionne, remerciements et critiques. J'espère avoir
aider certaines personnes avec ce HOWTO, et, si je l'ai fait, je
serais heureux de vous l'entendre dire.
<p>
<tt>
<htmlurl url="mailto:mstrates@croftj.net"
name="mstrates@croftj.net">
</tt>
<p>
<tt>
<htmlurl url="http://linloft.home.ml.org/"
name="http://linloft.home.ml.org/">
</tt>
<p>
Les remarques concernant la traduction française peuvent 
être envoyées à <em/Éric Jacoboni/&nbsp;:
<p>
<tt>
<htmlurl url="mailto:jaco@mail.dotcom.fr"
name="jaco@mail.dotcom.fr">
</tt>
<p>
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<sect1> Termes d'utilisation
<p>
Aucune responsabilité quant au contenu de ce document ne peut
être acceptée. L'utilisation des concepts, exemples et autres
sont fait à vos propres risques. Comme il s'agit d'une nouvelle
édition de ce document, celle-ci peut contenir des erreurs et
des imprécisions qui peuvent porter préjudice à votre système.
Procédez avec précaution et bien que qu'il y ait de fortes 
chances pour que cela ne soit pas nécessaire, je décline toute
responsabilité pour tout dommage.
<p>
Il y a, bien sûr, probablement de meilleures façons de faire
les choses décrites dans ce document. Il y a toujours un
autre chemin dans le monde Linux. C'est la voie que j'ai
suivie, et c'est celle-ci que je vous présente dans ce HOWTO. 
<p>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<sect1> Informations de Copyright
<p>
Ce document est copyright (c)1997 Michael Strates et distribué 
sous les termes suivants&nbsp;:
<p> <itemize>
<item> Les documents HOWTOs Linux peuvent être reproduits et
distribués dans leur intégralité ou en partie, sur tout
support physique ou électronique, à condition que cette note
de copyright soit présente sur toutes les copies. Une
redistribution commerciale est autorisée et encouragée ; 
cependant, l'auteur souhaiterai en être averti.
<item> Toute traduction ou travail incluant des documents HOWTOs 
Linux doit être couvert par cette notice. Vous ne pouvez donc 
produire un travail dérivé d'un HOWTO et imposer des restrictions
supplémentaires sur sa distribution. Des exceptions à ces règles 
peuvent être accordées sous certaines conditions ; contactez le
coordinateur des HOWTOs Linux à l'adresse donnée ci-dessous.
<item> Si vous avez des questions, contactez Greg Hankins, le 
coordinateur des HOWTOs Linux à&nbsp;:
</itemize>
<p>
<tt>
<htmlurl url="mailto:gregh@sunsite.unc.edu"
name="gregh@sunsite.unc.edu">
</tt>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<sect> Se connecter au monde extérieur.
<p>
Dans ce document, nous expliquerons comment le faire en utilisant
PPP (Point to Point Protocol), un protocole presque toujours utilisé
sur Internet. Il permet à votre modem de <tt>parler</tt> au monde extérieur.
C'est ce que font des applications comme Trumpet Winsock sous Windows
3.x, et beaucoup d'autres programmes que vous n'avez probablement jamais
vus.
<p>
Sous Linux, nous utilisons quelque chose appelé <tt/chat/ pour réaliser l'appel
téléphonique du F.A.I., puis nous utilisons un outil nommé <tt/pppd/ pour
« utiliser » cette connexion. Dans un sens, <tt/chat/ est celui qui
appelle, et <tt/pppd/ est notre protocole. Nous décrirons plus loin comment
les configurer. 
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<sect1> Parler et communiquer avec <tt/pppd/ et <tt/chat/.
<p>
La façon probablement la plus facile de faire les choses est de créer un
script shell nommé <tt/ppp-connect/ dans le répertoire de <tt/root/, et
d'invoquer ce script à chaque fois que vous voulez établir votre 
connexion. Nous décrirons cette méthode.
<p>
En tant que <tt/root/, ouvrez votre éditeur de texte favori sur 
<tt>~/ppp-connect</tt>. Vous devez maintenant choisir vos
paramètres.
<p>
<it>pppd connect 'chat -v "" "votre_chaîne-init" "" ATDTnuméro_fai
CONNECT "" ogin: votre_username word: votre_mot_de_passe' /dev/tty(0/1/2) vitesse
modem</it>
<p>
Sur mon système, <tt/pppd/ invoque <tt>/usr/sbin/pppd</tt>, puis lance <tt/chat/ 
pour réaliser l'appel téléphonique. <tt/chat/ envoie <it/votre_chaîne-init/
puis appelle <it/numéro_fai/. Il attend alors CONNECT, puis attend <tt/ogin:/ (le caractère
`l' est omis car le premier caractère est quelquefois perdu), envoie
<it/votre_mot_de_passe/, <tt/chat/ se termine alors et rend la main à <tt/pppd/.
<p>
La fin de la commande spécifie votre port modem (le mien est <tt>/dev/ttyS1</tt>). Dans la plupart
des cas, ce sera <tt/ttyS1/ (<tt/COM2/ sous DOS), <tt/ttyS0/ (<tt/COM1/ sous DOS), ou, si
vous utilisez la Slackware, <tt/cua1/ ou <tt/cua0/. La vitesse est celle du modem. J'utilise
115200 pour le mien (un 33.6k). Si vous avez une machine relativement récente, 
disposant d'une UART 16550, alors n'allez pas en dessous de 57600.
Ou, pour un 14.4k&nbsp;: 38400. <it/modem/ indique simplement à <tt/pppd/ qu'il s'agit d'une connexion
série/modem. Otez l'option <tt/-v/ si vous ne souhaitez pas avoir de longs messages dans vos fichiers logs.
<p>
Le scénario ci-dessous est celui utilisé pour appeler un F.A.I. qui lance automatiquement PPP, ie. qu'il
n'y a pas réellement de lancement d'un shell. Voici sa commande dans son <tt>~/ppp-connect</tt>&nbsp;:
<p>
<it>pppd connect 'chat "" "ATZ" "" ATDT555-1800
CONNECT "" ogin: johnny word: blackjak' /dev/ttyS1 115200
modem</it>
<p>
Cependant, pour certains, il y a des F.A.I. qui lancent un shell et ne lancent pas automatiquement PPP. Cela 
peut être un problème. Heureusement, <tt/chat/ peut gérer cela aussi. Il suffit d'ajouter une
autre commande à votre script de chat. Ci-dessous, par exemple, <it/johnny/ utilise un F.A.I. qui lui
retourne un shell lui demandant de taper <tt/ppp/ pour obtenir une connexion ppp. Son invite de
shell se termine par &dollar;.
<p>
<it>pppd connect 'chat "" "ATZ" "" ATDT555-1800
CONNECT "" ogin: johnny word: blackjak &dollar; ppp' /dev/ttyS1 115200
modem</it>
<p>
S'il y a plus d'un mot, entourez les de quotes. J'espère que vous avez compris
toutes ces implications et que vous êtes capables de créer votre propre script
convenant à votre connexion. Modifiez simplement le premier ou le deuxième script
ci-dessus pour l'ajuster à votre port, serveur, etc. puis, sauvez ce fichier.
<p>
Maintenant que le fichier est créé, il faut s'assurer que seul <tt/root/ puisse
le lancer, le lire ou y écrire. Ceci est très important. Assurez-vous aussi que personne
ne puisse lire vos fichiers logs, si vous avez décidé de garder l'option <tt/-v/, car votre
mot de passe est clairement lisible dans ceux-ci (je ne vois pas beaucoup d'utilité
à l'option <tt/-v/, ôtez-la si vous n'en avez pas un besoin express).
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<sect1> Adresses IP, Noms de domaines et sous-réseaux.
<p>
Pour la plupart de ceux qui utilisent les options décrites ci-dessus, le
fait qu'une adresse IP change ne les gênera pas. Les utilisateurs de base, 
ceux qui veulent un accès simple, qui n'ont que des comptes accessibles
par liaison téléphonique et qui ne sont pas spécialement motivés par la
technique, tous ceux-la peuvent survoler cette section. J'y aborderai les
aspects importants pour configurer correctement votre système. Les débutants,
sautez les parties concernant les adresses IP fixes, les noms de domaines, 
les sous-réseaux et ne lisez que la dernière partie de cette section.<p>

Disposer d'une adresse IP fixe est peut-être une option gratuite pour votre F.A.I. : demandez-lui en cas
de doute. Personnellement, je dois payer pour avoir une adresse IP fixe. Cela permet d'envoyer
du courrier en utilisant une adresse IP, un domaine, etc. uniques. Si vous désirez avoir
une adresse permanente, envoyez un courrier à votre fournisseur d'accès et demandez-lui
s'il peut le faire.
<p>
Lorsque vous avez une adresse IP fixe, faites un <tt/grep/ dans votre répertoire <it>/etc</it> pour retrouver les
fichiers contenant vos anciennes adresses IP. J'ai dû modifier des fichiers dans mon répertoire <it/sendmail/ et
dans <it>/etc/hosts</it>.Il y a d'autres fichiers importants que vous ne retouverez qu'avec <tt/grep/. 
Ouvrez <tt>/etc/hosts</tt> et ajoutez votre nouvelle adresse IP au format standard. Relancez votre
machine, vous devriez être prêt à continuer.
<p>
Vous devez maintenant changer votre script <tt/chat/ pour répercuter votre
nouvelle configuration. Si PPP est lancé dès que vous vous connectez, vous
devez informer l'administrateur système de votre F.A.I. pour qu'il s'assure que
leur système PPP reconnaisse que vous avez une adresse IP fixe et vous l'attribue
plutôt que de vous en donner une autre. Si vous vous retrouvez devant une invite shell,
et qu'il vous faut taper <tt/ppp/ ou autre pour lancer la connexion, plutôt que
de le faire, modifiez votre script <tt>~/ppp-connect</tt> pour envoyer ceci
à la place de <tt/ppp/ ou autre lorsqu'il voit un &dollar; ou autre prompt shell. 
<p>
<it>/usr/sbin/pppd :Votre_Adresse_IP</it>
<p>
Remplacez <it>Votre_Adresse_IP</it> par l'adresse que votre F.A.I. vous a donnée. 
Assurez vous de l'entourer de " " lorsque vous la placez dans votre script <tt/chat/.
Si cela ne fonctionne pas, contactez votre F.A.I. pour lui demander où se 
trouve  votre serveur PPP et demandez-lui la commande à donner. Essayex pour voir
si le serveur vous reconnaît et vous donne votre adresse correctement.
<p>
La prochaine chose à faire est probablement d'obtenir un nom de domaine. Je sais qu'en Australie, 
<tt/.asn.au/ et <tt/.org.au/ sont gratuits. Aux États-Unis, vous pouvez obtenir un domaine
<tt/.us/ gratuitement, mais cela prend du temps. Si vous habitez l'Australie, allez sur
<htmlurl url="http://www.aunic.net/" name="http://www.aunic.net/">
pour enregistrer vos domaines. Aux États-Unis, c'est 
<htmlurl url="http://www.internic.net/" name="http://www.internic.net/"> .
<p>
Pour enregistrer les domaines, vous devez fournir des services DNS et autres trucs pointus. 
Si votre F.A.I. ne peut les fournir, balancez par la fenêtre les domaines <tt/.asn.au/ et
autres et prenez un domaine Internet <tt/Monolith/.
<p>
<tt/Monolith/ offre des domaines gratuits à tout le monde. Tout est fait sans intervention humaine, via une
interface web que vous accédez avec votre navigateur. Votre domaine est de la forme
<tt/Votre_Choix.ml.org/. <tt/Monolith/ hébergera alors localement le DNS pour vous. Si
vous voulez envoyer et recevoir du courrier de ce domaine, demandez à votre F.A.I. de
se transformer en passeur de courrier pour vous.
<p>
Allez voir sur
<htmlurl url="http://www.ml.org/" name="http://www.ml.org/">
et remplissez le formulaire. Entrez dans NIC avec votre identifiant et votre mot de passe, et creez un
domaine GRATUIT. Vous devrez entrer votre adresse IP. Votre domaine sera dans le DNS dans quelques jours.
<p>
Ok, nous allons passer maintenant à la partie pour les débutants ou pour ceux qui ne peuvent avoir d'adresse IP
ou de domaine fixe. Tout ce que vous avez à faire est d'éditer <tt>/etc/hosts</tt> sous le compte <tt/root/, 
nommer votre site avec un nom qui ne posera pas de problème, lui donner une adresse IP 10.10.10 ou
quelque chose comme ça et redémarrer votre machine.
<p>
Maintenant, vous n'avez qu'à configurer votre machine avec <tt/pppd/ et <tt/chat/. 
Cela ne prend que 10 minutes. Passons à la section suivante, qui traite du courrier
électronique.

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<sect> Courrier électronique sur votre machine Linux
<p>
L'un des aspects les plus importants de l'Internet est la possibilité
d'envoyer et de recevoir du courrier de par le monde. Linux dispose
de très nombreux paquetages de courriers utilisables en mode console.
Celui que nous allons décrire s'appelle <tt/Pine/ (programe pour
le courrier et les news Internet) de l'Université de Washington. 
Pour récupérer le courrier, le programme s'appelant <tt/Fetchmail/, 
écrit par <it/Eric S. Raymond/ devrait aussi faire partie de votre
distribution Linux.
<p>
<tt/Fetchmail/ est un programme qui récupère votre couurier sur votre serveur en utilisant
le protocole POP. Il transfère ce courrier sur votre machine, puis le détruit du serveur, 
comme le font des programmes comme <tt/Eudora/ ou <tt/Microsoft Exchange/. Pour configurer
et automatiser <tt/fetchmail/, on utilise un fichier <tt/.fetchmailrc/ dans le répertoire de base.
Ouvrez simplement <tt>~/.fetchmailrc</tt> (faites-le sous votre compte, pas sous <tt/root/) avec
votre éditeur favori et observez les options décrites ci-dessous&nbsp;:
<p>
<EM>poll mail.votre_fai proto pop3 user votre_login password votre_passwd</EM>
<p>
<EM>user votre_login with pass votre_passwd is votre_login here</EM>
<p>
Tout ce que vous avez à faire est de remplacer <EM>mail.votre_fai</EM> par le nom
du serveur de courrier de votre F.A.I., <EM>votre_passwd</EM> par votre mot de passe, et
<EM>votre_login</EM> par votre identifiant.
<p>
Point important à noter : pour que <tt/Pine/ et cette procédure fonctionnent correctement,
votre identifiant doit correpondre à celui que vous utilisez pour votre F.A.I. Ceci veut dire
que votre identifiant local doit correspondre à celui que vous utilisez sur le serveur, et
à votre adresse e-mail.
<p>
Ensuite, assurez-vous que <tt/.fetchmailrc/ possède les permissions correctes
(lecture/écriture pour user). <tt/Fetchmail/ peut être lancé de deux façons&nbsp;:
en mode standard (où il récupère les messages du serveur et se termine), ou en mode
serveur (où il reste actif et vérifie/récupère le courrier toutes les x secondes).
Pour utiliser le mode serveur, tapez
<it>fetchmail -a -d(Secondes entre les vérifications)</it>. <tt/-a/ assure qu'il 
récupèrera tous les courriers. Pour utiliser le mode standard, tapez simplement
<it>fetchmail -a</it>.
<p>
Vous devez maintenant configurer <tt/Pine/. Lancez <tt/Pine/ en tapant <tt/pine/ au prompt.
Choisissez <tt/Setup - Configuration/. Configurez votre domaine utilisateur comme le
domaine qui est dans votre adresse e-mail. Par exemple, pour <tt/jack@linux.org/, ce serait <tt/linux.org/. 
Puis, configurez <tt/smtp-server/ comme votre serveur de courrier POP (le même que celui que
vous avez utilisé dans la configuration de <tt/fetchmail/). Pour le même exemple, nous
entrerions <tt/mail.linux.org/. Si vous désirez les forums Usenet, configurez votre
serveur nntp avec le serveur de news de votre F.A.I.
<p>
Bon, on a fini. Tout devrait fonctionner correctement maintenant. Pour vous connecter à votre F.A.I., lancez
<tt>~/ppp-connect</tt> sous le compte <tt/root/. Pour recevoir votre courrier, lancez
<tt/fetchmail -a/ sous votre compte. Pour parcourir votre courrier et les forums Usenet, utilisez <tt/Pine/.
Si vous voulez naviguer sur le web, installez un navigateur en mode texte comme <tt/Lynx/. 
<p>
<it>Envoyez tous commentaires et suggestions à&nbsp:
mstrates@croftj.net</it>
<p>
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
</article>
