<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
  "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
<!ENTITY howto      "http://www.traduc.org/docs/howto/lecture/">
<!ENTITY guide      "http://www.traduc.org/docs/guides/lecture/">
]>

<article lang="fr">
<articleinfo>

<title>
Petit guide d'amorçage multi-système avec GRUB
</title>

<subtitle>
    
Version française du <foreignphrase lang="en">Multiboot 
with GRUB Mini-HOWTO</foreignphrase>
                
</subtitle>

<releaseinfo>Version&nbsp;: 1.0.fr.1.1</releaseinfo>  

<pubdate>16 juin 2005</pubdate>

<author>
     <firstname>Ivan</firstname>
     <surname>Kanis</surname>
     <email>ivank CHEZ juliva POINT com</email>
</author>

<othercredit role="traduction" class="translator">
     <firstname>Simon</firstname>
     <surname>Depiets</surname>
     <contrib>Adaptation française</contrib>
     <email>2df CHEZ tuxfamily POINT org</email>
 </othercredit>

<othercredit role="relecture" class="translator">
    <firstname>Loïs</firstname>
    <surname>Di Qual</surname>
    <contrib>Relecture de la version française</contrib>
    <email>kmeleon3 CHEZ free POINT fr</email>
</othercredit>

<othercredit role="publication" class="copyeditor">
    <firstname>Jean-Philippe</firstname>
    <surname>Guérard</surname>
    <contrib>Préparation de la publication de la v.f.</contrib>
    <email>fevrier CHEZ tigreraye POINT org</email>
</othercredit>

<abstract><para>

Ce document décrit comment installer Windows 98, Windows 2000, DOS et
Linux en utilisant GRUB.

</para></abstract>

  <!-- Historique des révisions -->

  <revhistory>

    <revision>
      <revnumber>1.0.fr.1.1</revnumber>
      <date>2005-06-16</date>
      <authorinitials>LDQ, JPG</authorinitials>
      <revremark>Version relue.</revremark>
    </revision>

    <revision>
      <revnumber>1.0.fr.1.0</revnumber>
      <date>2005-01-22</date>
      <authorinitials>SD, JPG</authorinitials>
      <revremark>Première traduction française.</revremark>
    </revision>

    <revision>
      <revnumber>1.0</revnumber>
      <date>2001-01-15</date>
      <authorinitials>IK</authorinitials>
    </revision>

  </revhistory>

</articleinfo>

<sect1>
  <title>
      Commentaires et corrections
  </title>

  <para>

       Merci de faire parvenir en anglais à l'auteur vos questions
       et commentaires relatifs à la version originale de ce
       document à l'adresse

       <email>ivank CHEZ juliva POINT com</email>.

  </para>
  <para>

      N'hésitez pas à faire parvenir tout commentaire relatif à
      la version française de ce document à

      <email>commentaires CHEZ traduc POINT org</email>

      en précisant son titre, sa date et sa version.

  </para>
</sect1>

<sect1>

  <title>
      Nouvelles versions de ce document
  </title>

  <para>

      Vous trouverez la plus récente version française de ce document à
      l'adresse&nbsp;: <ulink url="&howto;Multiboot-with-GRUB.html"/>.

  </para>

  <para>
      
      La plus récente version originale de ce document est disponible à
      l'adresse&nbsp;: <ulink
      url="http://www.tldp.org/HOWTO/Multiboot-with-GRUB"/>.
  
  </para>
</sect1>

<sect1>
	<title>
		Pourquoi&nbsp;?
	</title>

	<para>
		J'ai voulu avoir la possibilité de faire démarrer tous les systèmes d'exploitations
		de mon ordinateur sans avoir à passer par plusieurs menus consécutifs. Je sais que
		je peux installer NT par dessus win9x, lui-même installé par dessus DOS.
		J'aurais alors besoin de passer par le menu NT puis le menu win9x pour démarrer DOS.
		J'ai donc voulu rendre simple le démarrage de tous ces systèmes.
	</para>
	<para>
		Ceci devint un obstacle car le problème avec les systèmes d'exploitation Microsoft, 
		c'est qu'ils veulent tous démarrer depuis la partition primaire. C'est ici que 
		GRUB intervient, car il peut cacher les partitions primaires. Vous pouvez utiliser 
		jusqu'à trois partitions pour installer les systèmes d'exploitation Microsoft. 
		GRUB cachera les 2 autres partitions afin que les systèmes d'exploitation
		ne les voient pas. Cela signifie que vous aurez besoin d'une autre partition 
		pour partager les données entre DOS, Win9x et Windows 2000. La quatrième 
		partition est utilisée dans ce but.
	</para>
	<para>
		J'ai aussi voulu un système de menu et GRUB nous en propose un. 
	</para>
	<para>
		Une autre fonctionnalité pratique de GRUB est qu'il supporte le système de fichier
		reiserfs, je n'ai donc pas besoin de garder mon fichier /boot sur une partition ext2
		séparée.
	</para>
</sect1>
<sect1>
	<title>
		Procédure d'installation
	</title>

	<sect2>
		<title>
			Préparer des disquettes de démarrage
		</title>
		<para>
			Vous aurez besoin de 3 disquettes de démarrage. Faites de la première
			disquette une disquette de démarrage DOS. Copiez les fichiers fdisk.exe
			et sys.exe sur cette disquette.
		</para>
<synopsis>
FORMAT /S A:
COPY FDISK.EXE A:
COPY SYS.EXE A:
</synopsis>
		<para>
			Utilisez votre seconde disquette pour créer un disque de récupération de
			Windows 98. Vous utiliserez la troisième disquette pour GRUB dans peu de
			temps.
		</para>
	</sect2>

	<sect2>
		<title>
			Installer Linux
		</title>
	
		<para>
			Installez votre distribution Linux favorite, vous pouvez utiliser l'outil 
			de partitionnement de celle-ci ou fdisk pour partitionner votre disque dur. 
		</para>
		<para>
			Voici comment j'ai partitionné mon disque dur&nbsp;:
		</para>
<synopsis>
Périphérique   Début       Fin     Blocs   Id  Système
/dev/hda1          1         6     48163+  16  FAT16 Caché
/dev/hda2          7        19    104422+  16  FAT16 Caché
/dev/hda3         20       593   4610655   1b  Win95 FAT32 Caché
/dev/hda4        594      3737  25254180    5  Ext
/dev/hda5        594       848   2048256    6  FAT16
/dev/hda6        849      2123  10241406    7  HPFS/NTFS
/dev/hda7       2124      2140    136521   82  Linux swap
/dev/hda8       2141      2523   3076416   83  Linux
</synopsis>
		<para>
		
			Ma première partition sert à démarrer Windows
			2000 (10&nbsp;Mo devraient largement suffire). 
			La partition ne contiendra que les fichiers
			nécessaires à faire démarrer NT comme boot.ini,
			ntldr, ntdetect.com, et cætera. NT résidera sur
			la partition 6 dans mon exemple. Cette partition
			est cachée, et formatée en FAT16
		
		</para>
		<para>
			La seconde partition est destinée à DOS. J'estime que 100 Mo suffisent. Elle est aussi en FAT16.
		</para>
		<para>
			La troisième partition est destinée à Win9x. Je lui ai attribué 5Go. Elle est en FAT32 pour les performances de ce type de système de fichiers.
		</para>
		<para>
			Puis créez la partition ext. C'est la partition 4 sur fdisk.
		</para>
		<para>
			Créez une partition de 2Go. Cette partition est utilisée pour partager les données
			entre tous les systèmes d'exploitation. Assurez vous que la somme de toutes les partitions 
			ci-dessus est inférieure à 8Go. C'est une limitation imposée par DOS.
		</para>
		<para>
			Puis créez la partition Windows 2000. Je lui ait donné 10Go étant donné que cette version
			de Windows est un "énorme cochon bien gras". J'en ai fait une partition HPFS/NTFS pour sa 
			vitesse.
		</para>
		<para>
			Ensuite ajoutez votre partition swap et Linux. Assurez-vous que vous n'avez pas une 
			partition séparée pour /boot. Ça se passera mieux dans GRUB si vous gardez /boot dans 
			la partition racine.
		</para>
		<para>
			Après avoir installé Linux continuez en formatant les partitions FAT16:
		</para>
<synopsis>
mkdosfs /dev/hda1
mkdosfs /dev/hda2
mkdosfs /dev/hda6
</synopsis>
	</sect2>
	<sect2>
		<title>
			Installer GRUB
		</title>
		<para>
			Assurez-vous de posséder la dernière version de GRUB. J'utilise la version 0.5.96.1. 
			La version contenue dans ma distribution était dépassée et m'a causé beaucoup de 
			problèmes. Vous pouvez télécharger la dernière version sur http://www.gnu.org/software/grub/
		</para>
		<para>
			Maintenant vous devez installer GRUB sur la disquette. Vous ne pouvez pas encore
		       	l'installer sur votre disque dur car Windows 2000 l'écraserait.
		</para>
<synopsis>
grub-install '(fd0)'
</synopsis>
		<para>
			Créez le menu.lst suivant pour GRUB. Ce fichier est dans /boot/grub.
		</para>
<synopsis>
#
# Exemple de fichier de configuration du menu du démarrage
#

# Démarrer automatiquement après une minute.
timeout 60

# Par défaut, démarrer la seconde entrée (0 étant la première).
default 1

# Positionnement sur la première entrée.
fallback 0

title Windows 2000
unhide (hd0,0)
hide (hd0,1)
hide (hd0,2)
rootnoverify (hd0,0)
chainloader +1
makeactive

# Pour démarrer Linux
title  Linux
root (hd0,7)
kernel /boot/vmlinuz-2.X.xx root=/dev/hda8 video=matrox:vesa:261
	
title Windows 98
hide (hd0,0)
hide (hd0,1)
unhide (hd0,2)
rootnoverify (hd0,2)
chainloader +1
makeactive
	
title DOS 6.22
hide (hd0,0)
unhide (hd0,1)
hide (hd0,2)
rootnoverify (hd0,1)
chainloader +1
makeactive
	
# Pour démarrer Linux
title  Linux (simple utilisateur)
root (hd0,7)
kernel /boot/vmlinuz-2.X.xx root=/dev/hda8 video=matrox:vesa:261 single
	
title Partition 2 (disquette)
hide (hd0,0)
unhide (hd0,1)
hide (hd0,2)
chainloader (fd0)+1
	
title Partition 3 (disquette)
hide (hd0,0)
hide (hd0,1)
unhide (hd0,2)
chainloader (fd0)+1
</synopsis>

		<para>
			Vérifiez que vous pouvez bien démarrer Linux avec la disquette. Si vous avez des problèmes
			vous pouvez entrer en passant par la ligne de commande de GRUB et observer ce 
			qu'il se passe. La documentation de GRUB est très bien fournie en informations, il
			vous suffit de la consulter pour résoudre	un éventuel problème.
		</para>
	</sect2>
	
	<sect2>
		<title>
			Installer Windows 2000&nbsp;:
		</title>
		<para>
			J'ai du initialiser la première partition avant d'installer Windows 2000. 
			Insérez la disquette de démarrage DOS et redémarrez votre ordinateur. 
			Une fois que l'invite de commande DOS s'affiche, saisissez ce qui suit&nbsp;:
		</para>
<synopsis>
FDISK /MBR
SYS C:
</synopsis>
		<para>
			Maintenant vous pouvez continuer et installer Windows 2000. Windows 
			2000 vous demandera sur quelle partition le système doit être installé. La partition
			que vous avez créée avec fdisk doit s'afficher comme endommagée ou non formatée,
			sélectionnez-là.
		</para>
		<para>
			Pour cacher le menu Windows 2000 éditez un fichier appelé boot.ini qui doit 
			se situer dans le disque C:\ . Changez la valeur du timeout de 30 à 0.
		</para>
<synopsis>
[boot loader]
timeout=0
default=multi(0)disk(0)rdisk(1)partition(1)\WINNT
[operating systems]
...
</synopsis>
	</sect2>
	
	<sect2>
		<title>
			Installer DOS.
		</title>
		<para>
			Insérez la disquette GRUB. Lorsque vous verrez le menu, insérez la disquette
			de démarrage DOS. Sélectionnez la partition 2 (disquette) depuis le menu. 
			Appuyez sur Entrée. Ceci démarrera sur la disquette et cachera les partitions 1 et 3.
		</para>
		<para>
			Lancez FDISK et vérifiez que le disque C: est bien la partition 2. Puis installez DOS&nbsp;:
		</para>
<synopsis>
SYS C:
</synopsis>
	</sect2>
	<sect2>
		<title>
			Installer Windows 98
		</title>
		<para>
			Insérez la disquette GRUB. Quand vous voyez le menu insérez la disquette de 
			récupération Windows 98. Sélectionnez la partition 3 (disquette) depuis le menu. 
			Appuyez sur Entrée. Cela démarrera la disquette et cachera les partitions 1 et 2.
		</para>
		<para>
			Lancez FDISK et vérifiez que le disque C: est bien la partition 3. Puis installez Windows 98&nbsp;:
		</para>
<synopsis>
SYS C:
</synopsis>
	</sect2>
	<sect2>
		<title>
			La touche finale
		</title>
		<para>
			Testez que tout fonctionne depuis le menu de GRUB&nbsp;:
		</para>
		<para>
			Vous devriez pouvoir démarrer sur les 4 systèmes d'exploitation depuis la disquette de 
			démarrage GRUB.
		</para>
		<para>
			Si tout semble bon vous pouvez continuer et installer GRUB sur votre disque dur.
			Dans un terminal, sous Linux, saisissez&nbsp;:
		</para>
<synopsis>
grub-install /dev/hda
</synopsis>
		<para>
			Vous devriez maintenant pouvoir démarrer les 4 systèmes d'exploitation depuis le menu GRUB. 
			Respirez&nbsp;!
		</para>
	</sect2>
</sect1>
<sect1>
	<title>
		Références
	</title>
	<para>
		J'ai trouvé ces liens utiles lorsque j'ai mis en place mon système&nbsp;:
	</para>
	<itemizedlist>
	<listitem><para>
	
	<ulink url="http://www.gnu.org/software/grub/grub.html">GNU
	GRUB</ulink>
		
	</para></listitem>
	
	<listitem><para>
	
	<ulink url="http://tldp.org/HOWTO/Multiboot-with-GRUB.html">Le
	Petit guide Linux-DOS-Win95-OS2</ulink>
	
	</para></listitem>
	</itemizedlist>
</sect1>
</article>
