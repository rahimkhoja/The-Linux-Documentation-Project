<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd">
<article lang="fr">
  <articleinfo>
    <title>g4u — Un cloneur d'image système pour PC</title>

    <subtitle>Version française de <foreignphrase> <ulink
    url="http://www.feyrer.de/g4u/">g4u — Harddisk Image Cloning for
    PCs</ulink></foreignphrase></subtitle>

    <releaseinfo>Version&nbsp;: 2.2.fr.0.3</releaseinfo>

    <pubdate>5 octobre 2006</pubdate>

    <author>
      <firstname>Hubert</firstname>

      <surname>Feyrer</surname>

      <affiliation>
        <address><email>hubert CHEZ feyrer POINT de</email></address>
      </affiliation>
    </author>

    <othercredit class="translator" role="traduction">
      <firstname>Joseph</firstname>

      <surname>Boiteau</surname>

      <contrib>Adaptation française</contrib>

      <email>josephboiteau CHEZ gmail POINT com</email>
    </othercredit>

    <othercredit class="translator" role="relecture">
      <firstname>François-Xavier</firstname>

      <surname>Detournière</surname>

      <contrib>Relecture de la version française</contrib>

      <email>fx POINT detourniere CHEZ wanadoo POINT fr</email>
    </othercredit>

    <othercredit class="copyeditor" role="publication">
      <firstname>Jean-Philippe</firstname>

      <surname>Guérard</surname>

      <contrib>Préparation de la publication de la v.f.</contrib>

      <email>fevrier CHEZ tigreraye POINT org</email>
    </othercredit>

    <revhistory>
      <revision>
        <revnumber>2.2.fr.0.3</revnumber>

        <date>14-09-2006</date>

        <authorinitials>JB,FXD</authorinitials>

        <revremark>Mises à jour du document (formatage) et
        relecture</revremark>
      </revision>

      <revision>
        <revnumber>2.2.fr.0.2</revnumber>

        <date>24-07-2006</date>

        <authorinitials>JB</authorinitials>

        <revremark>Première publication en français</revremark>
      </revision>

      <revision>
        <revnumber>2.2</revnumber>

        <date>31-05-2006</date>

        <authorinitials>HF</authorinitials>
      </revision>
    </revhistory>

    <abstract>
      <para>Ce document décrit la configuration et l'exploitation du logiciel
      libre g4u, un programme permettant de sauvegarder, sur un serveur FTP,
      une image disque de la machine locale. Simple, robuste et efficace,
      cette application ne manquera pas de séduire bon nombre
      d'administrateurs.</para>
    </abstract>
  </articleinfo>

  <note>
    <para>Traduction en français basée sur la <ulink
    url="http://www.feyrer.de/g4u/#history">version 2.2</ulink> de <ulink
    url="http://www.feyrer.de/g4u/">la documentation officielle</ulink></para>
  </note>

  <section id="whatisit">
    <title>Qu'est ce que c'est&nbsp;?</title>

    <para>g4u (<quote>ghost for unix</quote>) est un système à base NetBSD,
    amorçable (disquette/cdrom), qui permet de cloner facilement des images
    disques, permettant ainsi de déployer un même système sur de multiples
    machines via FTP. Le support amorçable offre 2 options&nbsp;: l'une est de
    remonter, compressée, l'image d'une machine locale via FTP, l'autre est la
    restauration via FTP, suivi d'une décompression et d'un remplacement du
    disque original. La configuration réseau se fait via DHCP. L'exploitation
    du disque se faisant comme une image, tout système de fichier ou
    d'exploitation peut être déployé en utilisant g4u. Le clonage des disques
    et partitions locales est tout aussi facilement possible.</para>

    <para>Pour les impatients curieux, quelques captures d'écran sont
    disponibles&nbsp;:</para>

    <orderedlist>
      <listitem>
        <para><ulink
        url="http://www.feyrer.de/g4u/screenshot1-booting.gif">Démarrage de
        g4u dans bochs</ulink></para>
      </listitem>

      <listitem>
        <para><ulink
        url="http://www.feyrer.de/g4u/screenshot2-devices.gif">Détection de
        périphériques</ulink></para>
      </listitem>

      <listitem>
        <para><ulink
        url="http://www.feyrer.de/g4u/screenshot3-welcome.gif">Bienvenue dans
        g4u&nbsp;!</ulink></para>
      </listitem>

      <listitem>
        <para><ulink
        url="http://www.feyrer.de/g4u/screenshot4-commands.gif">Quelques
        commandes g4u</ulink></para>
      </listitem>

      <listitem>
        <para><ulink
        url="http://www.feyrer.de/g4u/screenshot5-uploaddisk.gif">Envoi d'une
        image avec uploaddisk</ulink></para>
      </listitem>

      <listitem>
        <para><ulink
        url="http://www.feyrer.de/g4u/screenshot6-slurpdisk.gif">Restauration
        avec slurpdisk</ulink></para>
      </listitem>
    </orderedlist>
  </section>

  <section id="badalternatives">
    <title>Pourquoi pas une des alternatives existantes&nbsp;?</title>

    <itemizedlist>
      <listitem>
        <para>La partie serveur est souvent prévue pour être sous DOS/Windows.
        Je voulais utiliser un serveur de type Unix.</para>
      </listitem>

      <listitem>
        <para>Les systèmes de fichiers supportés comptent tous ceux de
        Microsoft, mais les autres sont mal supportés (Solaris/x86, NetBSD, et
        cætera.)</para>
      </listitem>

      <listitem>
        <para>Je n'ai pas envie de m'infliger (plus jamais) la mise en place
        d'une disquette de boot DOS qui configure le réseau via DHCP.</para>
      </listitem>

      <listitem>
        <para>Je me suis amusé à faire un déploiement multiple avec IMM, mais
        cela fut trop lent, j'ai donc décidé d'aller plus loin.</para>
      </listitem>
    </itemizedlist>
  </section>

  <section id="reqs">
    <title>Prérequis &amp; téléchargement</title>

    <itemizedlist>
      <listitem>
        <para>Trois disquettes vierges 1.44MB, ou un CD-R/RW vierge</para>
      </listitem>

      <listitem>
        <para>Un serveur FTP avec quelques Giga de libres</para>
      </listitem>

      <listitem>
        <para>Un serveur DHCP</para>
      </listitem>
    </itemizedlist>

    <para>Ajouté à ça, vous pourriez avoir besoin des éléments
    suivants&nbsp;:</para>

    <itemizedlist>
      <listitem>
        <para>Les images disquettes g4u 2.2 (<ulink
        url="http://www.feyrer.de/g4u/g4u-2.2.fs.zip">zippées</ulink> / non
        compressées&nbsp;: <ulink
        url="http://www.feyrer.de/g4u/g4u-2.2-1.fs">disquette une</ulink>,
        <ulink url="http://www.feyrer.de/g4u/g4u-2.2-2.fs">disquette
        deux</ulink> et <ulink
        url="http://www.feyrer.de/g4u/g4u-2.2-3.fs">disquette
        trois</ulink>)</para>
      </listitem>

      <listitem>
        <para>L'image ISO CD g4u 2.2 (<ulink
        url="http://www.feyrer.de/g4u/g4u-2.2.iso.zip">zippée</ulink> / <ulink
        url="http://www.feyrer.de/g4u/g4u-2.2.iso">non
        compressée</ulink>)</para>
      </listitem>

      <listitem>
        <para><ulink url="http://www.feyrer.de/g4u/g4u-2.2.tgz">Le code
        source</ulink> de g4u 2.2</para>

        <para>Les checksums MD5 associés&nbsp;:</para>

        <screen>MD5 (g4u-2.2-1.fs) = 195d8e8efe4a5ae30ab9c3f9c4714927
MD5 (g4u-2.2-2.fs) = b0244439fb3f3826a8915d27fc9008e3
MD5 (g4u-2.2-3.fs) = aac41da46ee3f3c420eea5cdf45877d6
MD5 (g4u-2.2.iso) = f0e884c04b332e0b029b1a7b2ed98f2c
MD5 (g4u-2.2.tgz) = f3e05d5953c4b43f37812362665fcdae
MD5 (g4u-2.2.fs.zip) = 3de640a7c53704980f416b740512ddf6
MD5 (g4u-2.2.iso.zip) = 5b0252a83fb432e51d2fbdf3bcc310d8    </screen>
      </listitem>
    </itemizedlist>

    <para>D'anciennes versions sont également disponibles&nbsp;:</para>

    <itemizedlist>
      <listitem>
        <para>Image disquette g4u 1.17 (<ulink
        url="http://www.feyrer.de/g4u/g4u-1.17.fs.zip">zippée</ulink> / <ulink
        url="http://www.feyrer.de/g4u/g4u-1.17.fs">non
        compressées</ulink>)</para>
      </listitem>

      <listitem>
        <para>ISO du CD g4u 1.17 (<ulink
        url="http://www.feyrer.de/g4u/g4u-1.17.iso.zip">zippée</ulink> /
        <ulink url="http://www.feyrer.de/g4u/g4u-1.17.iso">
        compressées</ulink>)</para>
      </listitem>

      <listitem>
        <para><ulink url="http://www.feyrer.de/g4u/g4u-1.17.tgz">Les sources
        g4u 1.17</ulink></para>
      </listitem>
    </itemizedlist>

    <para>Vous pouvez aussi télécharger une image d'un de ces
    miroirs&nbsp;:</para>

    <itemizedlist>
      <listitem>
        <para><ulink
        url="http://planetmirror.com/pub/g4u/">Australie</ulink></para>
      </listitem>

      <listitem>
        <para><ulink url="http://theatomicmoose.ca/g4u/">Canada</ulink></para>
      </listitem>
    </itemizedlist>
  </section>

  <section id="using">
    <title>L'utiliser</title>

    <section id="prep">
      <title>Préparations</title>

      <itemizedlist>
        <listitem>
          <para>En utilisant les images disquettes&nbsp;:</para>

          <orderedlist>
            <listitem>
              <para><link linkend="reqs">Téléchargez</link> les images
              disquettes, g4u-2.2-1.fs, g4u-2.2-3.fs et g4u-2.2-3.fs ou
              g4u-2.3.fs.zip, qui contient ces fichiers.</para>
            </listitem>

            <listitem>
              <para>Si vous avez téléchargé le fichier g4u-2.1.fs.zip,
              décompressez le, vous obtiendrez les 2 fichiers g4u-2.1-1.fs et
              g4u-2.1-2.fs</para>
            </listitem>

            <listitem>
              <para>Mettez chacune de ces images sur des disquettes
              distinctes. Sur un système Unix, un simple <quote>cat
              g4u-2.2-1.fs &gt;/dev/diskette</quote> fera l'affaire (et de
              même pour -2.fs). Le chemin du lecteur de disquette devrait vous
              être familier, les chemins courants sont&nbsp;:</para>

              <itemizedlist>
                <listitem>
                  <para>NetBSD&nbsp;: /dev/fd0a</para>
                </listitem>

                <listitem>
                  <para>Solaris&nbsp;: /dev/diskette</para>
                </listitem>

                <listitem>
                  <para>Linux&nbsp;: /dev/fd0</para>
                </listitem>
              </itemizedlist>

              <para>Il en va de même pour les périphériques USB (clés et
              autres mémoires flash), mais vous devrez y mettre l'image g4u.fs
              venant de l'ISO&nbsp;:</para>

              <itemizedlist>
                <listitem>
                  <para>NetBSD&nbsp;: /dev/sd0d</para>
                </listitem>

                <listitem>
                  <para>Linux&nbsp;: /dev/sd0</para>
                </listitem>
              </itemizedlist>

              <para>Si vous utilisez Microsoft Windows ou DOS, utilisez <ulink
              url="ftp://ftp.netbsd.org/pub/NetBSD/NetBSD-1.6.2/i386/installation/misc/rawrite.exe">rawrite.exe</ulink>.
              Il y a aussi un programme Windows appelé <ulink
              url="ftp://ftp.netbsd.org/pub/NetBSD/NetBSD-1.6.2/i386/installation/misc/rawr32.zip">rawr32.zip</ulink>
              qui vous le permettra.</para>
            </listitem>
          </orderedlist>
        </listitem>

        <listitem>
          <para>Utilisation de l'image CDROM de g4u&nbsp;:</para>

          <orderedlist>
            <listitem>
              <para><link linkend="reqs">Téléchargez</link> l'image CD,
              g4u-2.2.iso ou g4u-2.2.iso.zip</para>
            </listitem>

            <listitem>
              <para>Si vous téléchargez le fichier g4u-2.1.iso.zip,
              décompressez le pour avoir g4u-2.1.iso.</para>
            </listitem>

            <listitem>
              <para>Référez vous au manuel de votre logiciel de gravure (Nero,
              DiskJuggler, WinOnCD, cdrecord, et cætera), pour réussir votre
              coup. Notez bien que l'image est amorçable.</para>
            </listitem>
          </orderedlist>
        </listitem>

        <listitem>
          <para>Sur le serveur FTP de votre choix, créez un compte utilisateur
          appelé <varname>install</varname>, et protégez-le d'un mot de passe.
          Vérifiez que l'utilisateur « install » puisse se connecter via
          ftp.</para>

          <para>Si vous voulez utiliser un compte différent, vous pouvez
          spécifier <parameter>login@server</parameter> pour slurpdisk,
          uploaddisk, et cætera.</para>
        </listitem>

        <listitem>
          <para>Assurez vous d'avoir un service DHCP fonctionnel vous
          permettant d'accéder par la suite au serveur ftp (name server,
          netmask, default gateway). Dans le cas contraire vous pourrez
          toujours <link linkend="ifconfig">faire un paramétrage manuel de
          l'IP</link>.</para>
        </listitem>
      </itemizedlist>
    </section>

    <section id="imgcreate">
      <title>Création de l'image</title>

      <itemizedlist>
        <listitem>
          <para>Démarrez sur la machine à cloner à l'aide du CD ou des
          disquettes g4u. Vous verrez le noyau se charger depuis le support,
          puis la liste des périphériques trouvés sur la machine. Ensuite
          l'appel au DHCP (veillez bien à ce que celui-ci soit correctement
          configuré&nbsp;!). A la fin, une brève description des commandes
          disponibles est affichée et un shell est à disposition.</para>
        </listitem>

        <listitem>
          <para>Tout le disque&nbsp;:</para>

          <para>Tapez <command>uploaddisk adresse.serveur.ftp
          nomdefichier.gz</command> pour opérer une copie intégrale du disque,
          et la mettre sur le compte "install" de votre serveur ftp sous le
          nomdefichier donné. L'image disque est compressée (avec gzip -9), il
          est donc usuel d'apposer l'extension ".gz" au fichier
          concerné&nbsp;; mais pas obligatoire&nbsp;:). Avant que l'envoi des
          données ne se fasse, le mot de passe du compte « install » vous sera
          demandé.</para>

          <para>Si vous voulez cloner le disque secondaire, ajoutez son nom
          sur la ligne de commande d'uploaddisk&nbsp;: "uploaddisk
          adresse.serveur.ftp nomdefichier.gz wd1". De la même manière vous
          pourrez utilisez des disques SCSI&nbsp;: <command>uploaddisk
          adresse.serveur.ftp nomdefichier.gz sd0</command>.</para>

          <para>Si vous avez préféré utiliser un nom de compte différent du
          compte "install", faites-en précédé le nom du serveur, tel que
          <command>moncompte@adresse.serveur.ftp</command> pour chaque
          commande, uploaddisk et slurpdisk.</para>
        </listitem>

        <listitem>
          <para>Seulement une partition&nbsp;:</para>

          <para>Affichez la liste des différents disques identifiés par g4u
          via la commande <command>disks</command>, la liste des partitions
          d'un disque est disponible via la commande <command>parts
          disk</command>, où disk est le nom du disque à afficher tel que wd0,
          wd1, sd0, et cætera. Les partitions sont numérotées avec des lettres
          commençant à 'a', où les partitions de a à d sont communément
          prédéfinies, avec vos propres partitions commençant à 'e'. Ces
          partitions sont de type BSD, qui ont quelques similitudes avec les
          partitions DOS [dixit l'auteur]. Pour spécifier une partition,
          utilisez "wd0e" ou "sd0f"&nbsp;: <command>uploadpart
          adresse.serveur.ftp nomdefichier.gz wd0e</command>. Lancez
          "uploadpart" sans options pour faire afficher détails et exemples
          sur la commande.</para>
        </listitem>

        <listitem>
          <para>Suite au traitement (ignorez les erreurs&nbsp;:-), vous devez
          retrouver le shell. Selon vos capacités réseau, CPU, disques et le
          contenu, la création et l'envoi de l'image peut durer plusieurs
          heures&nbsp;!</para>
        </listitem>

        <listitem>
          <para>Vous pouvez éteindre la machine à l'aide de la commande
          <command>halt</command> ou simplement en pressant le bouton
          reset/power - aucun système de fichier n'étant monté, aucun dommage
          ne peut être occasionné.</para>
        </listitem>

        <listitem>
          <para>Vérifiez que le compte "install" de votre serveur FTP a reçu
          le(s) fichier(s) image.</para>
        </listitem>
      </itemizedlist>
    </section>

    <section id="imgdeploy">
      <title>Déploiement de l'image</title>

      <itemizedlist>
        <listitem>
          <para>Amorcez la machine à l'aide des disquette ou du CD, puis, au
          prompt, effetuez l'une des actions suivantes&nbsp;:</para>
        </listitem>

        <listitem>
          <para>Pour un disque complet&nbsp;:</para>

          <para>Tapez la commande <command>slurpdisk adresse.serveur.ftp
          nomdefichier.gz</command>. Celle-ci va se connecter au serveur ftp,
          compte <varname>install</varname>, vérifier le mot de passe,
          récupérer l'image, la décompresser et la remettre en place sur
          /dev/rwd0d.</para>

          <para>Si vous voulez restaurer une image sur un disque SCSI, ajouter
          son nom à la commande, comme suit&nbsp;: <command>slurpdisk
          adresse.serveur.ftp nomdefichier.gz sd0</command>.</para>

          <para>Voir plus haut pour l'utilisation d'un compte FTP autre que
          <varname>install</varname>.</para>
        </listitem>

        <listitem>
          <para>Une partition&nbsp;:</para>

          <para>Utilisez <command>slurppart yadresse.serveur.ftp
          nomdefichier.gz wd0e</command> ou toute valeur passée précédement à
          uploadpart. Notez bien que l'information du positionnement de la
          partition vient du MBR, qui devra être la même qu'au moment de la
          création de l'image - attendez vous à quelques surprises si la table
          de partitionnement a été modifiée entre la création de l'image et la
          restauration. Dans le cas de modifications à ce niveau, vérifiez le
          secteur de début ainsi que la taille de la partition (commande
          <command>parts</command>). Pour une image disque complète, pas de
          soucis, faites une restauration complète avec
          <command>uploaddisk</command> (le MBR étant inclus).</para>

          <para>Redémarrez la machine (commande <command>reboot</command> ou
          bouton reset), et votre machine est comme avant (elle le doit en
          tout cas).</para>
        </listitem>
      </itemizedlist>
    </section>

    <section id="copydisk">
      <title>Copier un disque localement</title>

      <para>Si vous souhaitez simplement copier un disque local vers un autre
      (ce qui correspond aux commandes <command>uploaddisk</command> et
      <command>slurpdisk</command>, au FTP près), vous pouvez le faire avec la
      commande <command>copydisk</command>. La commande prend les noms des 2
      disks en paramètres, la source puis la cible, et copie les données de
      l'une à l'autre. Si par exemple l'on veut copier le premier disque
      <quote>wd0</quote> vers le deuxième <quote>wd1</quote>&nbsp;:</para>

      <screen>copydisk wd0 wd1</screen>

      <para>De même pour des disques SCSI&nbsp;: <command>copydisk sd0
      sd1</command>, et cætera.</para>

      <warning>
        <title>Attention&nbsp;!</title>

        <para>Toutes les données du disque cible seront écrasées&nbsp;!</para>
      </warning>

      <para>Je rappelle que la liste des disques est disponible avec la
      commande <command>disks</command>.</para>
    </section>

    <section id="copypart">
      <title>Copier une partition localement</title>

      <para>De même qu'avec la copie locale de disques, si vous souhaitez
      simplement copier une partition locale vers une autre, vous pouvez le
      faire avec la commande <command>copypart</command>. La commande prend
      les 2 noms des partitions en paramètres, la source puis la cible, et
      copie les données de l'une à l'autre. Si par exemple l'on veut copier la
      première partition <quote>wd0e</quote> vers la seconde
      <quote>wd0f</quote>, faites&nbsp;:</para>

      <screen>copypart wd0e wd0f</screen>

      <para>Encore une fois, la liste des disques est disponible via la
      commande <command>disk</command>, et la liste des partitions d'un disk
      via la commande <command>parts</command>. Les noms de partitions sont de
      la forme <quote>wd0d</quote>, <quote>w1e</quote>, <quote>sd1f </quote>
      (système BSD)&nbsp;; <quote>hda1</quote>, <quote>hda2</quote>,
      <quote>sda1</quote> (linux), et cætera.</para>

      <para>Attention à ce que les partitions source et cible aient la même
      taille (en nombre de secteurs), sinon de drôles de choses peuvent
      arriver. En copiant une partition trop grande pour la partition cible,
      g4u ne va pas écraser les données suivants la petite partition, mais la
      copie restera partielle. Gardez l'idée en tête, cela arrive dans ce
      genre de copie et ne pose d'ailleurs pas de problème à l'inverse en
      copiant une petite partition dans une plus grande&nbsp;!</para>
    </section>
  </section>

  <section id="hints">
    <title>FAQ et autres détails sur le clonage de disque</title>

    <section id="filesystems">
      <title>Systèmes de fichiers supportés</title>

      <para>L'une des questions des plus courantes&nbsp;: <quote>quels
      systèmes de fichiers supporte g4u</quote>. La réponse est&nbsp;:
      <quote>tous</quote>. g4u lit le disque bit à bit, du premier au dernier.
      Ceci inclut le MBR, la table de partition ainsi que les partitions
      elles-mêmes sans même aller voir ce qu'il se trouve dans
      celles-ci.</para>
    </section>

    <section id="oss">
      <title>Systèmes d'exploitations supportés</title>

      <para>La liste des systèmes d'exploitation supportés par g4u se
      rapproche de la liste précédente, TOUS. Encore une fois, étant donné
      l'approche <quote>image</quote> de g4u, tout système peut être
      copié.</para>

      <para>En plaçant un disque dur <quote>conteneur</quote> dans un PC, g4u
      peut même copier/déployer un système d'exploitation non-PC sur ce
      périphérique. Des systèmes tels que HP-UX, Irix, Solaris, AIX par
      exemple.</para>
    </section>

    <section id="hw">
      <title>Matériel supporté</title>

      <para>Le système utilisant g4u peut avoir des disques de type IDE, SATA,
      SCSI ou RAID avec de multiples contrôleurs (Adaptec, et cætera). Il en
      est de même pour bon nombre de cartes PCMCIA, Cardbus, ISA et autres
      cartes PCI. Jetez un oeil à <ulink
      url="http://www.feyrer.de/g4u/G4U-KERNEL-2.2">la configuration du noyau
      de g4u</ulink> pour une liste plus complète du matériel supporté.</para>

      <para>Pour vous assurer le bon support d'un type matériel, il vous
      suffit d'amorcer votre système avec g4u et de vérifier avec la commande
      <command>ifconfig -a</command> que votre carte réseau est listée et donc
      reconnue, et de même pour les disques avec la commande <command>disks
      </command>. Dans le cas contraire, un long périple peut vous être
      nécessaire pour arriver à vos fins... analysez la sortie de <command>
      dmesg</command> (sous g4u&nbsp;;touche espace pour faire défiler
      l'affichage). Si besoin, <link linkend="support">demandez de l'aide
      </link>. Voyez la partie <quote><link linkend="bugreporting">Retour
      d'erreurs</link></quote> pour plus d'informations à ce sujet.</para>
    </section>

    <section id="disks">
      <title>Un mot sur les disques de différentes tailles</title>

      <para>A la question <quote>comment g4u gère les disques de différentes
      tailles</quote>, qui d'ailleurs revient souvent aussi, la réponse est
      que g4u travaille avec des disques de tailles et de géométries
      identiques. Mettre une image d'un petit disque sur un disque plus grand
      est possible&nbsp;; c'est l'inverse qui pause problème.</para>

      <para>Si vous ne pouvez faire autrement que de préparer un système sur
      un gros disque qui sera amené à être re-déployé vers un disque plus
      petit, assurez-vous que l'espace excédentaire sur le gros disque n'est
      pas occupé par une partition ou un système de fichier actif&nbsp;; ou
      des données seront perdues.</para>

      <para>Si vous déployez une petite image sur un plus gros disque,
      l'espace non exploité par g4u peut être exploité par une autre
      partition, un autre système de fichier. Vous aurez en revanche à le
      faire en utilisant vos outils / votre système d'exploitation.</para>
    </section>

    <section id="gzip">
      <title>Changer le niveau de compression</title>

      <para>Par défaut, les images disques remontées sur le serveur FTP sont
      compressées avec <command>gzip -9</command>. Ceci permet d'économiser de
      l'espace disque mais rallonge l'opération, plusieurs heures de
      traitement est chose courante. Vous pouvez réduire le niveau de
      compression de gzip lors du <command>uploaddisk</command> avec la
      variable d'environnement correspondante&nbsp;:</para>

      <screen># GZIP=-1</screen>

      <para>Vous pouvez modifier le niveau de compression allant de 1 (rapide
      mais faible taux de compression) à 9 (lent mais taux intéressant). Le
      reste des options de la commande uploaddisk restant évidemment
      inchangées.</para>
    </section>

    <section id="knowndisks">
      <title>Liste des disques reconnus</title>

      <para>Pendant le démarrage de g4u, tous les périphériques reconnus sont
      listés&nbsp;; mais très vite. Pour obtenir à tout moment cette liste des
      disques, utilisez la commande <command>disks</command>&nbsp;:</para>

      <screen># disks
wd0 at pciide0 channel 0 drive 0:
wd0: drive supports 16-sector pio transfers, lba addressing
wd0: 6149 MB, 13328 cyl, 15 head, 63 sec, 512 bytes/sect x 12594960 sectors
wd0: 32-bit data port
wd0: drive supports PIO mode 4, DMA mode 2, Ultra-DMA mode 2
wd0(pciide0:0:0): using PIO mode 4, Ultra-DMA mode 2 (using DMA data transfers)   </screen>

      <para>Cet exemple liste un disque dur de 6Giga.</para>
    </section>

    <section id="linux2gb">
      <title>Problèmes avec les images de 2 giga-octets</title>

      <para>Vous avez expérimenté un g4u qui plante lors du transfert ftp
      d'une image dépassant les 2 giga&nbsp;? Ce problème ne vient pas de g4u
      mais de votre serveur FTP. D'anciennes distributions Linux sont connues
      pour n'accepter que des fichiers de taille inférieure à 2 giga, et si ce
      Linux a un kernel 2.4, rien n'est garantit. Assurez-vous d'avoir un
      démon FTP à jour et installez un système d'exploitation décent (dixit
      l'auteur, le rustre&nbsp;!).</para>

      <para>Sinon, jusqu'ici, quel que soit le serveur FTP employé (NetBSD,
      Solaris and Windows 2000), aucun problème n'a été répertorié.</para>
    </section>

    <section id="xxx">
      <title>Pouvez-vous ajouter une fonctionnalité XXX&nbsp;?</title>

      <para>J'ai des demandes pour ajouter certaines fonctionnalités à
      g4u&nbsp;:</para>

      <itemizedlist>
        <listitem>
          <para>l'utilisation de TFTP</para>
        </listitem>

        <listitem>
          <para>l'utilisation de SSH/scp</para>
        </listitem>

        <listitem>
          <para>l'utilisation de NFS</para>
        </listitem>

        <listitem>
          <para>l'ajout d'une interface X ou de type
          <quote>curses</quote></para>
        </listitem>

        <listitem>
          <para>l'écriture des images vers CDROM / un déploiement depuis un
          CDROM</para>
        </listitem>

        <listitem>
          <para>la compression bzip2</para>
        </listitem>
      </itemizedlist>

      <para>Après avoir migré vers une gestion de boot g4u en 2 disquettes,
      certaines de ces fonctionnalités seront ajoutés, mais d'autres (X, et
      cætera) n'ont que peu de chances d'être intégrées. Tenez-vous au courant
      des prochaines mises à jour&nbsp;!</para>
    </section>

    <section id="perf">
      <title>Problèmes de performance réseau</title>

      <para>Si les performances réseaux sont faibles (moins de 5 Mo/s via un
      switch ethernet 100BaseT par exemple) malgré un processeur rapide, un
      disque qui ne sature pas et un taux de compression faible, doutez de
      votre configuration réseau&nbsp;! Un problème courant sur les réseaux
      switchés est une discordance de duplex entre la carte réseau et le
      switch. Sous NetBSD, par défaut, les vitesses et le duplex sont négociés
      automatiquement mais peuvent l'être manuellement.</para>

      <para>Forcer un 100BaseTX/Full-duplex&nbsp;:</para>

      <screen># ifconfig fxp0 media 100BaseTX mediaopt Full-duplex
# ifconfig -a
    fxp0: flags=[...]
        media: Ethernet 100baseTX full-duplex</screen>

      <para>Utiliser l'auto-négociation (par défaut)&nbsp;:</para>

      <screen># ifconfig fxp0 media auto
# ifconfig -a
    fxp0: flags=[...]
        media: Ethernet autoselect (100baseTX)</screen>

      <para>Pour plus d'informations à ce sujet, voyez les pages de manuels de
      <ulink
      url="http://netbsd.gw.com/cgi-bin/man-cgi?ifconfig++NetBSD-current">
      ifconfig(8)</ulink> ou encore le document <ulink
      url="http://www.cisco.com/warp/public/473/46.html#auto_neg_valid">
      Auto-Negotiation Valid Configuration Table</ulink> à l'étape <quote>Why
      Is It That the Speed and Duplex Cannot Be Hardcoded on Only One Link
      Partner&nbsp;?</quote>.</para>
    </section>

    <section id="shrinking">
      <title>Réduire la taille de l'image</title>

      <para>Des gens se plaignent de la taille trop importante des images
      créées par g4u. Ces tailles de fichiers sont normales, elles sont dues
      au fait que g4u clone tout le disque, tous les blocs, sans se soucier de
      savoir si ils contiennent une quelconque donnée. Pour différencier un
      bloc utilisé d'un non utilisé, g4u devrait connaître le système de
      fichier employé - Windows FAT, Linux Ext2/3/ReiserFS/et cætera, BSD FFS,
      Solaris UFS, et cætera. Etant donnée la faible capacité d'une disquette,
      et le nombre d'implémentations nécessaires pour couvrir différents
      systèmes de fichiers, il est peu probable qu'un tel tri soit ajouté aux
      fonctionnalités de g4u.</para>

      <para>Malgré tout il y a un moyen plutôt simple de contourner le
      problème&nbsp;: utiliser le système d'exploitation d'origine afin
      d'optimiser l'occupation du système de fichiers. Il suffit de faire en
      sorte que les blocs non utilisés / vides ne soient pas remplis de
      données aléatoires, mais au contraire de valeurs facilement
      compressibles par g4u. Ceci donnant lieu à des images disques plus
      petites.</para>

      <para>En clair, remplacez les blocs non-utilisés de votre disque avec
      des octets à 0. Ouvrez un fichier et remplissez-le d'octets à 0 jusqu'à
      ce que le disque soit plein, puis fermez le fichier et effacez le. Le
      résultat est que tous les blocs non utilisés contiennent maintenant des
      données que g4u peut facilement compresser. En toute logique le système
      d'exploitation marque juste les blocs inutilisés comme 'inutilisés' mais
      ne modifie en rien leur contenu.</para>

      <para>L'utilisation de cette technique sur un disque de 20Go avec un
      système Solaris 8/x86 de 6Go et le reste en Windows 2000 Workstation a
      permis de diminuer l'image compressée de ~6Go à ~2Go. Vous imaginez bien
      sûr le gain de temps au déploiement.&nbsp;:)</para>

      <para>Pour effectuer le remplissage des blocs non utilisés avec des
      octets à 0, il y a plusieurs méthodes, dépendant du système
      d'exploitation de la machine et des logiciels disponibles&nbsp;:</para>

      <itemizedlist>
        <listitem>
          <para>Unix standard&nbsp;: (fonctionne sur toutes les variantes
          Unix&nbsp;: Linux, NetBSD, Solaris, et cætera.)&nbsp;:</para>

          <screen># dd if=/dev/zero of=/0bits bs=20971520 # bs=20m
# rm /0bits     </screen>
        </listitem>

        <listitem>
          <para>Solution Perl pour Windows&nbsp;: Ceci nécessite <ulink
          url="http://www.activestate.com/Products/ActivePerl/"> perl</ulink>
          d'installé. Dans un shell, tapez&nbsp;:</para>

          <screen>cd /d c:\
c:\win-preclone.pl c:     </screen>

          <para>Cliquez <ulink url="http://www.feyrer.de/g4u/win-preclone.pl">
          ici</ulink> pour télécharger le script perl win-preclone.pl.</para>
        </listitem>

        <listitem>
          <para>Une solution en Pascal pour Windows&nbsp;:</para>

          <para>Ce programme en pascal est une contribution de Matthias Jordan
          [mjordan CHEZ code TIRET fu POINT de]&nbsp;:</para>

          <itemizedlist>
            <listitem>
              <para><ulink
              url="http://www.feyrer.de/g4u/nullfile-1.02.exe">nullfile-1.02.exe</ulink></para>
            </listitem>

            <listitem>
              <para><ulink
              url="http://www.feyrer.de/g4u/nullfile-1.02.pas">nullfile-1.02.pas</ulink></para>
            </listitem>
          </itemizedlist>

          <para>Ce programme est fourni sans aucune garantie.</para>
        </listitem>

        <listitem>
          <para>La solution Windows 64bit&nbsp;:</para>

          <para>Dominic Leelodharry [dominic CHEZ authorsoftware POINT com] a
          envoyé à l'auteur une version 64bit pour Windows&nbsp;:</para>

          <itemizedlist>
            <listitem>
              <para><ulink
              url="http://www.feyrer.de/g4u/nullfile-1.01_64bit.exe">nullfile-1.01_64bit.exe</ulink></para>
            </listitem>
          </itemizedlist>

          <para>Ce programme est fourni sans aucune garantie.</para>
        </listitem>

        <listitem>
          <para>Windows <quote>Erasor</quote>&nbsp;:</para>

          <para>Ce programme freeware peut effacer votre disque de manière
          sûre, mais il est aussi capable de remplir le disque de
          <quote>0-bits</quote>. Téléchargeable sur <ulink
          url="www.heidi.ie/eraser">www.heidi.ie/eraser</ulink>. Merci à
          Stephen Krans [s040 CHEZ krans POINT org] pour le
          tuyau&nbsp;!</para>
        </listitem>

        <listitem>
          <para>Soluce Windows embarquée&nbsp;:</para>

          <para>Apparemment Windows XP fournit un outil d'encryption de disque
          permettant l'écriture d'octets à 0. Pour se faire, lancez la
          commande&nbsp;: <emphasis>cipher /W:C:</emphasis> (pour le lecteur
          C:). Vous devrez quitter l'opération (Control+C) après la première
          opération, sinon des données aléatoires seront écrites suites au
          remplissage de <quote>0-bytes</quote>.</para>
        </listitem>
      </itemizedlist>

      <para>Lancez l'une de ces commandes avant d'éteindre le système
      d'exploitation, puis créez une image avec g4u, vous verrez une nette
      différence de taille d'image.</para>
    </section>

    <section id="ifconfig">
      <title>Paramétrer l'IP manuellement</title>

      <para>Vous voudrez ou devrez parfois vous passez d'un DHCP. Dans ce cas,
      une configuration manuelle du réseau est aussi possible&nbsp;:</para>

      <orderedlist>
        <listitem>
          <para>Regardez si votre interface réseau est reconnue, et sous quel
          nom, avec la commande&nbsp;:</para>

          <screen># ifconfig -a</screen>

          <para>Le nom de l'interface sera du type <quote>ex0</quote>,
          <quote>tlp0</quote>, et cætera. (Contrairement à Linux, les
          interfaces réseaux NetBSD ne s'appellent pas
          <quote>eth0</quote>&nbsp;!)</para>
        </listitem>

        <listitem>
          <para>Ensuite configurez l'IP et le masque réseau de cette
          interface. J'utiliserai ici la dénomination xx0 pour l'interface
          réseau, et la machine devrait porter l'IP 1.2.3.4 et le masque
          réseau 255.255.255.0&nbsp;:</para>

          <screen># ifconfig xx0 1.2.3.4 netmask 255.255.255.0     </screen>
        </listitem>

        <listitem>
          <para>Enfin, vous pouvez spécifier le router par défaut, si votre
          serveur FTP est sur un sous-réseau IP différent de celui où se
          trouve la machine g4u. Spécifions une IP router 2.3.4.5, voici la
          commande à saisir&nbsp;:</para>

          <screen>route add default 2.3.4.5</screen>
        </listitem>
      </orderedlist>

      <para>C'est tout&nbsp;? Simple, non&nbsp;? Rappelez-vous que nous
      traitons de l'Unix&nbsp;! Après ces quelques étapes, vous pouvez
      utiliser g4u comme s'il utilisait un DHCP.</para>
    </section>

    <section id="kernel">
      <title>Extraire le noyau g4u</title>

      <para>On m'a demandé comment démarrer depuis le disque dur (en utilisant
      grub par exemple). L'idée est d'extraire le noyau de la disquette de
      démarrage, et de l'associer à grub (ou n'importe quel autre bootloader -
      voyez peut-être avec <link linkend="netboot">PXE to netboot g4u</link>).
      Voici comment extraire le noyau, appelé
      <quote>netbsd</quote>&nbsp;:</para>

      <screen>% ( cat g4u-2.2-1.fs | dd bs=512 skip=16 ; \
? cat g4u-2.2-2.fs | dd bs=512 skip=16 \
? ) | tar vxf -
-r--r--r-- 1 feyrer netbsd 53948 Nov 3 23:08 boot
-rw-rw-r-- 1 feyrer netbsd 1479905 Nov 3 23:08 netbsd   </screen>

      <para>Notez que le noyau à ce niveau (<quote>netbsd</quote>) est
      toujours compressé, ce qui va très bien à un bootloader comme grub, mais
      au cas où vous voudriez le décompresser&nbsp;:</para>

      <screen>% file netbsd
netbsd: gzip compressed data, was "netbsd-INSTALL_G4U", from Unix
% mv netbsd netbsd.gz
% gunzip netbsd.gz
% ls -la netbsd
-rw-rw-r-- 1 feyrer wheel 5523084 Dec 7 18:08 netbsd
% file netbsd
netbsd: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), statically linked, stripped   </screen>
    </section>

    <section id="netboot">
      <title>Boot réseau de g4u via PXE</title>

      <para>Afin de faire un boot réseau de g4u via PXE, vous devrez d'abord
      <link linkend="kernel">extraire le noyau des disquettes</link> , puis
      suivre les étapes qui décrivent un boot réseau, dit <quote>diskless
      boot</quote> (sans disquette), voir <ulink
      url="http://www.netbsd.org/Documentation/network/netboot/intro.i386.html">
      la documentation NetBSD pour les nombreux moyens de réaliser une telle
      chose</ulink>.</para>

      <para>Un condensé des étapes nécessaires à g4u est disponible dans les
      archives, soit <ulink
      url="http://sourceforge.net/mailarchive/message.php?msg_id=13050093"> en
      français</ulink> par Jean-Christophe Guis ou <ulink
      url="http://sourceforge.net/mailarchive/message.php?msg_id=13051496">
      une traduction en anglaise</ulink> de Steve Clement.</para>

      <para>Un autre petit rapport sur <ulink
      url="http://www.tuxdocs.net/wiki/index.php/G4u_configure_for_pxe_boot">
      Comment configurer une Fedora Core 5 en tant que serveur PXE</ulink> de
      Aaron Axelsen est disponible en anglais.</para>
    </section>

    <section id="ftpd">
      <title>Quel serveur FTP utiliser&nbsp;?</title>

      <para>Lorsque vous récupérez ou envoyez des images sur votre serveur FTP
      et que vous voyez une ligne du style&nbsp;:</para>

      <screen>553 Cannot send file larger than 4 gigabytes   </screen>

      <para>vous pouvez être sûr que cette ligne (ou tout autre ligne avec un
      numéro en entête) vient de votre serveur FTP, et de la même manière, que
      ce n'est pas g4u qui a un problème mais le serveur FTP.</para>

      <para>Quelques programmes connus de serveurs FTP&nbsp;:</para>

      <itemizedlist>
        <listitem>
          <para>ftpd(8) de <ulink url="http://www.netbsd.org/"> NetBSD</ulink>
          qui est disponible sur une installation par défaut.</para>
        </listitem>

        <listitem>
          <para>GuildFTPd pour Windows XP.</para>
        </listitem>

        <listitem>
          <para>Le service FTP de Microsoft Windows 2000 et 2003 Server (à
          savoir qu'il existe quelques soucis avec les services FTP des
          versions MS Windows non serveur.).</para>
        </listitem>

        <listitem>
          <para>Le démon vsftp de votre distribution Linux favorite (reconnu
          fonctionnel sur Fedora 2 et Debian Sarge).</para>
        </listitem>

        <listitem>
          <para><ulink url="http://www.cerberusftp.com/">Cerberus
          FTP.</ulink></para>
        </listitem>

        <listitem>
          <para>Le service FTP de Novell Netware (reconnu fonctionnel sur
          Netware 6).</para>
        </listitem>

        <listitem>
          <para>TYPSoft FTP Server sur une clé USB avec Windows XP.</para>
        </listitem>

        <listitem>
          <para>Filezilla Server sur Windows 98SE et XP.</para>
        </listitem>

        <listitem>
          <para>Le démon FTP de Mac OS X et Mac OS X Server.</para>
        </listitem>

        <listitem>
          <para>(D'autres&nbsp;? Faites m'en part&nbsp;!).</para>
        </listitem>
      </itemizedlist>
    </section>
  </section>

  <section id="support_and_pr">
    <title>Aide et rapports d'erreurs</title>

    <section id="support">
      <title>Aide</title>

      <para>Voici la liste des éléments permettant d'obtenir de
      l'aide&nbsp;:</para>

      <itemizedlist>
        <listitem>
          <para>Liste de diffusion&nbsp;: <email>g4u TIRET announce CHEZ
          feyrer POINT de</email></para>

          <para>Cette liste contient seulement les annonces faites à propos de
          g4u.</para>

          <itemizedlist>
            <listitem>
              <para>Inscriptions et configuration <ulink
              url="http://lists.sourceforge.net/mailman/listinfo/g4u-announce">
              via web</ulink> , ou</para>
            </listitem>

            <listitem>
              <para>Envoyez un email nommé <quote>subscribe
              yourpassword</quote> à l'adresse <email>g4u TIRET announce TIRET
              request CHEZ feyrer POINT de</email> pour vous inscrire. S'il
              vous plait, remplacez <varname>yourpassword</varname> par un mot
              de passe personnel, votre mot de passe secret pour cette liste
              de diffusion.</para>
            </listitem>

            <listitem>
              <para>Les archives&nbsp;: <ulink
              url="http://sourceforge.net/mailarchive/forum.php?forum_id=43206">g4uannounce
              list archive</ulink>.</para>
            </listitem>
          </itemizedlist>
        </listitem>

        <listitem>
          <para>Liste de diffusion&nbsp;: <email>g4u TIRET help CHEZ feyrer
          POINT de</email></para>

          <para>Cette liste contient les questions et réponses faites à propos
          de g4u.</para>

          <itemizedlist>
            <listitem>
              <para>Inscriptions et configuration <ulink
              url="http://lists.sourceforge.net/mailman/listinfo/g4u-help">
              via web</ulink> , ou</para>
            </listitem>

            <listitem>
              <para>Envoyez un email nommé <quote>subscribe
              yourpassword</quote> à l'adresse <email>g4u TIRET help TIRET
              request CHEZ feyrer POINT de</email> pour vous inscrire. S'il
              vous plait, remplacez <varname>yourpassword</varname> par un mot
              de passe personnel, votre mot de passe secret pour cette liste
              de diffusion.</para>
            </listitem>

            <listitem>
              <para>Les archives&nbsp;: <ulink
              url="http://sourceforge.net/mailarchive/forum.php?forum_id=43203">g4u-help
              list archive</ulink>.</para>
            </listitem>
          </itemizedlist>
        </listitem>

        <listitem>
          <para>Communauté Orkut <quote>g4u</quote>&nbsp;:</para>

          <para>Il existe une communauté <quote>g4u</quote> sur Orkut qui a
          créé un forum pour g4u. Comme Orkut a beaucoup ralenti aujourd'hui,
          je ne suis plus vraiment sur ce forum&nbsp;; je vous conseille plus
          vivement d'utiliser les listes de diffusion précédentes.</para>
        </listitem>

        <listitem>
          <para>Optionnel&nbsp;(!) une licence commerciale est disponible,
          regardez la page <quote><ulink
          url="http://www.feyrer.de/g4u/commercial.html">Commercial
          licence</ulink></quote> pour plus d'informations.</para>
        </listitem>
      </itemizedlist>
    </section>

    <section id="bugreporting">
      <title>Rapport d'erreur</title>

      <para>Si vous avez des problèmes avec g4u et que vous souhaitez les
      remonter, S'IL VOUS PLAIT précisez les informations suivantes. Il est
      impossible de vous aider sans savoir de quel système/configuration l'on
      parle.</para>

      <itemizedlist>
        <listitem>
          <para>Quelle version de g4u utilisez-vous&nbsp;?</para>
        </listitem>

        <listitem>
          <para>Quelles commandes exactement avez-vous utilisées&nbsp;?</para>
        </listitem>

        <listitem>
          <para>Quelle sortie précise avez-vous eu du programme (précise, sans
          aucune modification, oeil pour oeil, dent pour dent de votre
          part)&nbsp;?</para>
        </listitem>

        <listitem>
          <para>Si le système bloque au démarrage, quelles sont les 3
          dernières lignes affichés à l'écran (toujours copie conforme
          svp)</para>
        </listitem>

        <listitem>
          <para>Que donne la commande <quote>disks</quote>&nbsp;? la commande
          <quote>parts</quote>&nbsp;?</para>
        </listitem>

        <listitem>
          <para>Si vous avez des soucis liés à un périphérique (carte réseau
          ou disque dur)&nbsp;; ajoutez s'il vous plait les lignes relatives
          venant de la sortie de la commande <quote>dmesg</quote></para>
        </listitem>

        <listitem>
          <para>Quel système d'exploitation, système de fichiers et service
          FTP utilisez-vous coté serveur FTP&nbsp;?</para>
        </listitem>
      </itemizedlist>

      <para>Envoyez vos rapports d'erreurs à la liste de diffusion <ulink
      url="http://www.feyrer.de/g4u/#support">g4u-help</ulink>.</para>
    </section>

    <section id="blog">
      <title>Blog</title>

      <para>Suivant la mode du moment, j'ai créé un <ulink
      url="http://www.feyrer.de/NetBSD/blog.html?-tags=g4u">blog g4u</ulink>
      pour les gens s'intéressant de près à l'actualité des développements.
      Celui-ci fait partie de <ulink
      url="http://www.feyrer.de/NetBSD/blog.html">mon blog
      NetBSD</ulink>.</para>

      <para>Et pour ceux que ça intéresse, il y a aussi le <ulink
      url="http://www.feyrer.de/NetBSD/bx/blosxom.cgi/index.rss?-tags=g4u">
      feed RSS de la partie g4u</ulink> de disponible (en addition au <ulink
      url="http://www.feyrer.de/NetBSD/blog-rss.xml">feed RSS complet de mon
      blog NetBSD</ulink> ).</para>
    </section>
  </section>

  <section>
    <title>Recompiler depuis les sources</title>

    <para>G4u est construit sur les bases de la disquette de démarrage NetBSD.
    Un noyau ainsi qu'une disquette de boot personnalisés, tous deux ramenés à
    la taille minime de 3 disquettes de 1.44Mo ou un cdrom.</para>

    <para>Pour recompiler ces images&nbsp;:</para>

    <itemizedlist>
      <listitem>
        <para>Il est à noter que la compilation depuis les sources ne
        nécessite pas les droits 'root'. Ci-dessous, les actions précédées du
        prompt <quote>#</quote> sont à exécuter en tant que root, celles
        précédées de <quote>%</quote> sont les commandes à exécuter en tant
        que simple utilisateur.</para>
      </listitem>

      <listitem>
        <para>Munissez-vous d'une machine i386/PC sous <ulink
        url="ftp://ftp.netbsd.org/pub/NetBSD/NetBSD-3.0/">NetBSD 3.0</ulink>.
        Tout autre système d'architecture Unix-like devrait faire l'affaire
        aussi, ceci restant non testé à ma connaissance.</para>
      </listitem>

      <listitem>
        <para>Installez mkisofs (contenu dans le package cdrecord), via le
        paquet de binaires&nbsp;:</para>

        <screen># PKG_PATH=ftp://ftp.NetBSD.org/pub/NetBSD/packages/3.0/i386/All
# export PKG_PATH
# pkg_add -v cdrecord</screen>

        <para>ou, si vous avez pkgsrc d'installé&nbsp;:</para>

        <screen># cd /usr/pkgsrc/sysutils/cdrecord
# make install    </screen>
      </listitem>

      <listitem>
        <para>Récupérez les sources NetBSD-current (~23 mai 2006) dans
        /usr/src&nbsp;:</para>

        <screen>% su
# mkdir /usr/cvs
# chown $USER /usr/cvs
# ln -s cvs/src /usr/src
# exit
% cd /usr/cvs
% env CVS_RSH=ssh cvs -d anoncvs@anoncvs.netbsd.org:/cvsroot co -D 20060523 src    </screen>
      </listitem>

      <listitem>
        <para>Pour être sûr de votre coup, recompilez complètement la version
        (afin d'exécuter les tests de régression et autres)&nbsp;:</para>

        <screen>% ./build.sh -N 1 -U release</screen>
      </listitem>

      <listitem>
        <para>Rappelez-vous où récupérer le nouveau compilateur - ajustez si
        nécessaire&nbsp;:</para>

        <screen>% setenv T /usr/src/obj.i386/tooldir.NetBSD-3.0-i386/bin    </screen>
      </listitem>

      <listitem>
        <para>Récupérez les <ulink
        url="http://www.feyrer.de/g4u/g4u-2.2.tgz">source de g4u
        2.2</ulink></para>
      </listitem>

      <listitem>
        <para>Décompressez-les&nbsp;:</para>

        <screen>% cd /usr/src
% tar plzvxf .../g4u-2.2.tgz    </screen>
      </listitem>

      <listitem>
        <para>Appliq<varname>uez les patch</varname>es&nbsp;:</para>

        <screen>% cd /usr/src/sys/dev/ata
% patch &lt;wd.c.patch-g4u
% cd /usr/src/sys/dev/scsipi
% patch &lt;sd.c.patch-g4u
% cd /usr/src/sys/kern
% patch &lt;subr_prf.c.patch-g4u    </screen>
      </listitem>

      <listitem>
        <para>Compilez les images disquettes et ISO de G4U&nbsp;:</para>

        <screen>% cd /usr/src/distrib/i386/floppies/g4u
% $T/nbmake-i386    </screen>
      </listitem>

      <listitem>
        <para>Après ça, vous devrez trouver les fichiers images
        <quote>g4u1.fs</quote>, <quote>g4u1.fs</quote> et
        <quote>g4u.iso</quote> dans le répertoire
        /usr/src/distrib/i386/floppies/g4u&nbsp;:</para>

        <screen>% pwd /usr/cvs/src/distrib/i386/floppies/g4u
% ls -l g4u.*
-rw-rw-r-- 1 feyrer netbsd 3309568 Nov 3 23:09 g4u.iso
-rw-rw-r-- 1 feyrer netbsd 1474560 Nov 3 23:08 g4u1.fs
-rw-rw-r-- 1 feyrer netbsd 1474560 Nov 3 23:08 g4u2.fs    </screen>
      </listitem>
    </itemizedlist>
  </section>

  <section id="links">
    <title>Liens &amp; Ressources (en langue anglaise)</title>

    <itemizedlist>
      <listitem>
        <formalpara>
          <title>Un tutoriel pour installer M0n0wall avec g4u</title>

          <para>Pereyra a fournit <ulink
          url="http://contenidosonline.blogspot.com/2006/05/tutorial-for-installing-m0n0wall-with.html">les
          instructions</ulink> pour installer <ulink
          url="http://m0n0.ch/wall/">M0n0wall</ulink> firewall avec
          g4u.</para>
        </formalpara>
      </listitem>

      <listitem>
        <formalpara>
          <title>Récolter les GUIDs / UUIDs afin de procéder à une
          installation distante (RIS) des comptes utilisateurs</title>

          <para><quote>Une activité coûteuse en terme de temps, et qui de
          surcroît se veut extrêmement répétitive lorsque vous avez un parc
          d'un grand nombre de machines, c'est d'avoir à gérer le remplacement
          des anciennes machines ainsi que de commander des nouvelles. La
          méthode traditionnelle consiste à noter la MAC adresse et le nom de
          la machine, envoyer via email les données à quelqu'un d'autre,
          mettre à jour les données du serveur DHCP, et cætera, et cætera. Ce
          projet cherche à minimiser le temps d'intervention humain nécessaire
          à mettre une machine en place.</quote> Et en plus, ceci est basé sur
          du NetBSD&nbsp;!&nbsp;:)[<ulink
          url="http://user.dtcc.edu/~ctribo/guid.html">le lien du site
          d'origine (en anglais)</ulink>].</para>
        </formalpara>
      </listitem>

      <listitem>
        <formalpara>
          <title>MIDS - g4u avec un menu</title>

          <para>Rob Bennett a modifié g4u afin que celui-ci charge du code
          additionnel depuis un serveur FTP, et d'implémenter une interface
          graphique (des boîtes de dialogues de type 'curses'). Comme le but
          premier de g4u est de tenir sur une disquette, cette extension
          <ulink url="http://www.robbennett.co.uk/mids/">mérite d'y jetter un
          oeil&nbsp;!</ulink></para>
        </formalpara>
      </listitem>

      <listitem>
        <formalpara>
          <title>La page iR110/150 (sparc64) dd Network Backup&nbsp;:</title>

          <para>Des gens cherchaient une version UltraSPARC (sparc64) based de
          g4u. Eh bien messieurs, elle existe&nbsp;: <ulink
          url="http://www.digitalissues.co.uk/html/hardware/bw/ir110-dd-backup.html">The
          iR110/150 dd Network Backup Page</ulink> vous donnera les scripts
          vous permettant de faire les sauvegardes des disques d'un UltraSPARC
          sur un serveur NFS distant. Bravo à l'auteur&nbsp;!</para>
        </formalpara>
      </listitem>

      <listitem>
        <formalpara>
          <title>Yet Another Ghost Installer (YAGI)&nbsp;:</title>

          <para><ulink url="http://dan.deam.org/code/yagi.pdf">La
          thèse</ulink> de Daniel Ettle, que l'auteur a supervisé, porte sur
          un <ulink url="http://dan.deam.org/yagi.php">installeur
          réseau</ulink> au Toshiba Regensburg Operations.</para>
        </formalpara>
      </listitem>

      <listitem>
        <formalpara>
          <title>Symantec Ghost</title>

          <para><ulink url="http://www.symantec.com/sabu/ghost/">La solution
          commerciale</ulink> qui ne faisait pas ce dont j'avais besoin et qui
          m'a poussé à créer g4u. Essayez-le si vous ne voulez pas d'un
          système de sauvegarde à images. Et si vous le trouvez trop cher,
          dites-vous bien que <link linkend="copying"> moi-même je ne
          souhaites pas mourir de faim</link>.&nbsp;:)</para>
        </formalpara>
      </listitem>
    </itemizedlist>
  </section>

  <section id="history">
    <title>Historique</title>

    <para><ulink url="http://www.feyrer.de/g4u/#history">Voir l'historique de
    l'auteur (anglais)</ulink></para>
  </section>

  <section id="copying">
    <title>Copies, licences &amp; donations</title>

    <para>Aucune licence n'est nécessaire, excepté pour le domaine militaire
    et usages associés, un <ulink
    url="http://www.feyrer.de/g4u/commercial.html">licence commerciale</ulink>
    est disponible, et les donations sont toujours les bienvenues&nbsp;! Vous
    pouvez envoyer de l'argent via <ulink
    url="https://www.paypal.com/affil/pal=paypal%40feyrer.de"> paypal</ulink>
    ou m'acheter un livre depuis <ulink
    url="http://www.amazon.de/exec/obidos/redirect?path=registry/RN1HSNXQBSE6">
    ma liste de souhaits Amazon</ulink>, comme tous <ulink
    url="http://www.feyrer.de/g4u/donations.html">les gens qui ont déjà tant
    donné</ulink> - Merci beaucoup&nbsp;!</para>

    <para>g4u est distribué sous la licence <quote>standard BSD
    license</quote>&nbsp;:</para>

    <screen>/*
 * Copyright (c) 1999-2006
 * Hubert Feyrer &lt;hubert CHEZ feyrer POINT de&gt;.  All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met&nbsp;:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 * This product includes software developed for g4u by 
 * Hubert Feyrer &lt;hubert CHEZ feyrer POINT de&gt;.
 * 4. Neither the name of the author nor the names of its contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 */  </screen>

    <para>et voici une version française <quote>non-officielle</quote> de la
    licence BSD&nbsp;:</para>

    <screen>
   Copyright © 1999-2006 Hubert Feyrer &lt;hubert CHEZ feyrer POINT 
   de&gt;. Tous droits réservés.
   
   La redistribution du code source, modifié ou non, sous forme de binaire
   est soumise aux conditions suivantes&nbsp;:
        * Le copyright ci-dessus, la présente liste des conditions et
   l'avertissement qui la suit doivent figurer dans le code source.
        * La documentation et/ou les fichiers accompagnant le code source 
   distribué sous forme de binaire doivent faire apparaître le copyright 
   ci-dessus, la présente liste des conditions et l'avertissement qui la suit.
        * Tout produit incluant tout ou partie du code de ce programme doit
   comporter la mention&nbsp;: Ce produit s'inspire d'un programme développé par
   l'université de Californie Berkeley et ses collaborateurs.
        * Le nom de la dite université, pas plus que ceux de ses collaborateurs,
   ne sauraient être utilisés dans le but de promouvoir ou de légitimer un
   produit dérivé de ce programme sans autorisation écrite préalable à cette
   effet.

    CE PROGRAMME EST FOURNI « TEL QU'EN L'ÉTAT » PAR LES MEMBRES DU CONSEIL 
    D'ADMINISTRATION ET LEURS COLLABORATEURS ET IL N'EST DONNÉ AUCUNE GARANTIE,
    IMPLICITE OU EXPLICITE, QUANT À SON UTILISATION COMMERCIALE, PROFESSIONNELLE 
    OU AUTRE. LES MEMBRES DU CONSEIL D'ADMINISTRATION ET LEURS COLLABORATEURS NE 
    PEUVENT EN AUCUN CAS ÊTRE TENUS POUR RESPONSABLES DE QUELQUE DOMMAGE OU 
    PRÉJUDICE DIRECT, INDIRECT, SECONDAIRE OU ACCESSOIRE (Y COMPRIS LES PERTES
    FINANCIÈRES DUES AU MANQUE À GAGNER, À L'INTERRUPTION D'ACTIVITÉS, OU 
    LA PERTE D'INFORMATIONS ET AUTRES) DÉCOULANT DE L'UTILISATION DU PROGRAMME,
    OU DE L'IMPOSSIBILITÉ D'UTILISER CELUI-CI, ET DONT L'UTILISATEUR ACCEPTE 
    L'ENTIÈRE RESPONSABILITÉ.</screen>
  </section>
</article>