<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
  "http://www.docbook.org/xml/4.3/docbookx.dtd" [
<!ENTITY howto         "http://www.traduc.org/docs/HOWTO/lecture/">
<!ENTITY mini-howto    "http://www.traduc.org/docs/HOWTO/mini/lecture/">
<!ENTITY gfdl-vo       "http://www.gnu.org/copyleft/fdl.html">
<!ENTITY gfdl-vf       "http://cesarx.free.fr/gfdlf.html">
<!ENTITY origine       "http://linuxelectronique.free.fr/doc/promiseraid/">
<!ENTITY traduc        "http://www.traduc.org">
]>

<article id="Linux-ATA-RAID-HOWTO" lang="fr">

<!-- Header -->


<articleinfo>

		<!-- Red Hat Linux ATA RAID Setup with Promise FastTrak HOWTO -->

	<title>Guide pratique du RAID ATA sous Linux</title>
	<subtitle>Version française du <foreignphrase>Linux ATA RAID HOWTO</foreignphrase></subtitle>

	<author>
		<firstname>Murty</firstname>
		<surname>Rompalli</surname>
		<affiliation>
			<address>
				<email>murty CHEZ solar POINT murty POINT net</email>
			</address>
		</affiliation>
	</author>

	<othercredit role="traduction">
		<firstname>Alain</firstname>
		<surname>Portal</surname>
		<contrib>Traduction française</contrib>
		<affiliation>
			<address>
				<email>aportal CHEZ univ TIRET montp2 POINT fr</email>
			</address>
		</affiliation>
	</othercredit>

	<othercredit role="relecture">
		<firstname>Frédéric</firstname><surname>Bothamy</surname>
		<contrib>Relecture de la version française</contrib>
		<affiliation>
			<address>
				<email>fbothamy CHEZ mail POINT dotcom POINT fr</email>
			</address>
		</affiliation>
	</othercredit>

	<othercredit role="publication">
		<firstname>Jean-Philippe</firstname><surname>Guérard</surname>
		<contrib>Préparation de la publication de la version française</contrib>
		<affiliation>
			<address>
				<email>jean-philippe CHEZ laposte POINT fr</email>
			</address>
		</affiliation>
	</othercredit>

	<releaseinfo>Version 2.1.fr.1.0</releaseinfo>
	<pubdate>1<superscript>er</superscript> avril 2003</pubdate>

	<revhistory>
		<revision>
			<revnumber>2.1.fr.1.0</revnumber>
			<date>2003-04-01</date>
			<authorinitials>ap</authorinitials>
			<revremark>
				Traduction de la version 2.1 du «&nbsp;Linux ATA RAID HOWTO&nbsp;»
			</revremark>
		</revision>

		<revision>
			<revnumber>2.1</revnumber>
			<date>2002-09-07</date>
			<authorinitials>mr</authorinitials>
			<revremark>
				Enrichissements mineurs <emphasis>(Minor enhancements)</emphasis>
			</revremark>
		</revision>

		<revision>
			<revnumber>2.0.fr.1.0</revnumber>
			<date>2003-06-03</date>
			<authorinitials>ap</authorinitials>
			<revremark>
				Traduction de la version 2.0 du «&nbsp;Linux ATA RAID HOWTO&nbsp;»
			</revremark>
		</revision>

		<revision>
			<revnumber>2.0</revnumber>
			<date>2002-05-10</date>
			<authorinitials>mr</authorinitials>
			<revremark>
				Enrichissements majeurs <emphasis>(Major enhancements)</emphasis>
			</revremark>
		</revision>

		<revision>
			<revnumber>1.3</revnumber>
			<date>2002-05-07</date>
			<authorinitials>jyg</authorinitials>
			<revremark>
				Corrections de format <emphasis>(Format fixes)</emphasis>
			</revremark>
		</revision>

		<revision>
			<revnumber>1.2</revnumber>
			<date>2002-04-30</date>
			<authorinitials>mr</authorinitials>
			<revremark>
				Changements mineurs <emphasis>(Minor enhancements)</emphasis>
			</revremark>
		</revision>

		<revision>
			<revnumber>1.1</revnumber>
			<date>2002-04-28</date>
			<authorinitials>ldl</authorinitials>
			<revremark>
				Quelques changements mineurs et améliorations SGML <emphasis>(Some
				minor changes and sgml-improvement)</emphasis>
			</revremark>
		</revision>

		<revision>
			<revnumber>1.0</revnumber>
			<date>2002-04-26</date>
			<authorinitials>mr</authorinitials>
			<revremark>
				Publication initiale <emphasis>(Initial Release)</emphasis>
			</revremark>
		</revision>

      <!-- Additional (*earlier*) revision histories go here -->
	</revhistory>

		<indexterm>
			<primary>ataraid</primary>
		</indexterm>

	<abstract>
		<para>
			Ce guide pratique explique comment installer la distribution Red Hat
			Linux 7.3 sur un PC compatible Intel Pentium possédant un contrôleur
			Promise FastTrak ATA RAID. Il pourra être toutefois profitable si vous
			avez une autre distribution que la Red Hat. Une annexe aborde succintement
			l'installation avec le contrôleur RAID HighPoint HPT.
		</para>
	</abstract>
</articleinfo>

<!-- Section1: intro -->
<sect1 id="intro">
	<title>Introduction</title>

	<indexterm>
		<primary>ataraid!introduction</primary>
	</indexterm>

	<para>
		Le RAID ne se limite pas seulement à de coûteux disques SCSI, et beaucoup
		de constructeurs de cartes mères ont introduit des cartes mères possédant
		un support RAID, pour des disques IDE moins chers, connu sous le nom de
		RAID ATA. Promise Technology et HighPoint sont les deux fabriquants qui
		dominent ce marché RAID ATA. Ce guide pratique explique comment installer
		Linux sur un ordinateur compatible Intel Pentium possédant un contrôleur
		RAID ATA (que ce soit avec un circuit monté sur la carte mère ou bien une
		carte séparée), mono- ou multiprocesseurs, et au moins deux disques durs.
		Pour le moment, ce document couvre seulement l'installation de la
		distribution Red Hat Linux 7.3 avec le contrôleur Promise FastTrak ATA RAID.
		Un appendice, à la fin de ce document, explique brièvement comment installer
		sur un système avec le contrôleur RAID HighPoint HPT au lieu du contrôleur
		Promise FastTrak ATA RAID.
		</para>

	<para>
		L'objectif est de configurer le RAID&nbsp;1 (mirroring) avec les deux
		disques durs et d'installer le système d'exploitation Red Hat Linux
		amorçable sur le RAID. Ce document discute de deux méthodes pour parvenir à
		cet objectif&nbsp;: 1. En utilisant le pilote fourni par Promise; 2. En
		utilisant le RAID Linux natif. Si vous choisissez la première méthode
		(pilote Promise), vous devrez utiliser le noyau qui est fourni avec la
		Red Hat 7.3. Si vous choisissez la seconde, vous pourrez mettre à jour votre
		noyau vers le dernier noyau stable. Ce document ne discute pas du RAID 0
		(striping) ou de toute autre configuration de disque, bien que l'auteur
		pense que ce document puisse vous aider à mettre en place ces
		configurations. Ce document ne couvre pas encore&nbsp;: 1. L'installation en
		utilisant GRUB au lieu de LILO et 2. L'installation avec les derniers noyaux
		de développement (2.5.x). Bien que ce document se concentre sur le RAID
		Promise FastTrak, un appendice à la fin de ce document explique brièvement
		comment utiliser ce document pour installer la Red Hat Linux sur des
		ordinateurs avec le contrôleur RAID HighPoint HPT.
	</para>

	<para>
		Avant tout, un brin de législation. De récents évènements ont montré que
		c'était important.
	</para>


<!-- Section2: droits -->

	<sect2 id="droits">
		<title>Droits d'utilisation</title>

		<important>
			<para>
				Le texte ci-dessous est la version française de la licence de ce
				document. Seule la version originale de cette licence, présentée
				dans la section suivante, fait foi.
			</para>
		</important>

		<para>
			L'auteur de ce document est Murty Rompalli. Première publication 2002.
			Ce document est distribué selon les termes de la
			<ulink url="http://www.gnu.org/copyleft/fdl.txt">GNU Free Documentation
			License</ulink> et des termes additionnels décrits ci-dessous.
		</para>

		<para>
			Ce guide pratique peut être reproduit et distribué en tout ou
			partie, sur tout support physique ou électronique, tant que cette
			licence d'utilisation est présente sur chacune des copies.
			La redistribution commerciale est autorisée et encouragée&nbsp;;
			toutefois, l'auteur aimerait être averti de telles distributions.
		</para>

		<para>
			Toutes les traductions, travaux dérivés, ou travaux globaux incorporant
			ce guide pratique doivent être couverts par cette notification de
			copyright. Aussi, vous ne pouvez pas produire un travail dérivé de ce
			guide pratique et imposer des restrictions additionnelles sur sa
			distribution. Des exceptions à ces règles peuvent être octroyées sous
			certaines conditions&nbsp;; veuillez contacter, en anglais, le
			coordinateur à cette adresse <email>linux-howto@metalab.unc.edu</email>.
		</para>

		<para>
			Pour faire court, l'auteur souhaite promouvoir la propagation de cette
			information par le biais du plus grand nombre de canaux possibles mais
			souhaite conserver les droits d'auteurs sur ce guide pratique, et aimerait
			être informé de toute intention de redistribution de celui-ci.
		</para>

		<para>
			La version française de document a été réalisée par Alain Portal et
			Frédéric Bothamy. La version française de ce guide pratique est publiée
			en accord avec les termes de la licence de documentation libre GNU
			(GFDL)&nbsp; sans section invariante, sans texte de première de couverture
			ni texte de quatrième de couverture. Une copie de la licence est
			disponible sur <ulink url="&gfdl-vo;"></ulink>. Une version française non
			officielle de cette licence est disponible sur
			<ulink url="&gfdl-vf;"></ulink>.
		</para>

	</sect2>


<!-- Section2: copyright -->

  <sect2 id="copyright">
   <title>Copyright Information</title>

		<important>
			<para>
				Le texte ci-dessous est la licence de ce document. Ce texte fait foi.
				Il est composé de la licence en anglais du document orignal, suivi de
				la licence en français de sa traduction.
			</para>
		</important>

		<para>&#169; 2002 Murty Rompalli</para>

		<para>
			This document is copyrighted &#169; 2002 Murty Rompalli and is distributed
			under the terms of the <ulink url="&gfdl-vo;">GNU Free Documentation
			License</ulink> and additional terms described below.
		</para>

		<para>
			This Linux HOWTO document may
			be reproduced and distributed in whole or in part, in any medium physical
			or electronic, as long as this copyright notice is retained on all copies.
			Commercial redistribution is allowed and encouraged; however, the author
			would like to be notified of any such distributions.
		</para>

		<para>
			All translations, derivative works, or aggregate works
			incorporating this Linux HOWTO document must be covered under this
			copyright notice. That is, you may not produce a derivative work
			from this HOWTO document and impose additional restrictions on its
			distribution. Exceptions to these rules may be granted under
			certain conditions; please contact the Linux HOWTO coordinator at
			this address <email>linux-howto@metalab.unc.edu</email>.
		</para>

		<para>
			In short, the author wishes to promote dissemination of this
			information through as many channels as possible but
			wish to retain copyright on this HOWTO document, and would like to
			be notified of any plans to redistribute this HOWTO document.
		</para>

		<para>
			La version française de document a été réalisée par Alain Portal et
			Frédéric Bothamy. La version française de ce guide pratique est publiée
			en accord avec les termes de la licence de documentation libre GNU
			(GFDL)&nbsp; sans section invariante, sans texte de première de couverture
			ni texte de quatrième de couverture. Une copie de la licence est
			disponible sur <ulink url="&gfdl-vo;"></ulink>.
		</para>
  </sect2>

<!-- Section2: disclaimer -->

	<sect2 id="engarde">
		<title>Mise en garde</title>

		<important>
			<para>
				Le texte ci-dessous est la version française de la mise en garde de ce
				document. Seule la version originale de cette mise en garde, présentée
				dans la section suivante, fait foi.
			</para>
		</important>

		<para>
			Aucune responsabilité pour le contenu de ces documents ne pourra être
			acceptée. Utilisez les concepts, exemples et autre contenu à vos propres
			risques. Comme c'est une nouvelle édition de ce document, il peut y avoir
			des erreurs et des imprécisions, qui peuvent bien entendu endommager votre
			système. Procédez avec précaution, et bien que ce soit hautement
			improbable, l'auteur n'en acceptera aucune responsabilité.
		</para>

		<para>
			Tous les droits d'auteur sont détenus par leurs propriétaires respectifs,
			sauf mention contraire expresse. L'utilisation d'un terme dans ce document
			ne doit pas être vue comme affectant la valeur d'une marque de fabrique ou
			d'une marque de service.
		</para>

		<para>
			La mention de produits particuliers ou de marques ne doit pas être
			considérée comme un acte d'approbation.
   </para>

		<para>
			Il vous est fortement recommandé d'effectuer une sauvegarde de votre
			système avant toute installation majeure, de même que des sauvegardes à
			intervalles de temps réguliers.
		</para>

	</sect2>


<!-- Section2: disclaimer -->

	<sect2 id="disclaimer">
		<title>Disclaimer</title>

		<important>
			<para>
				Le texte ci-dessous est la mise en garde de ce document.
				Ce texte fait foi.
			</para>
		</important>

		<para>
			No liability for the contents of this documents can be accepted. Use the
			concepts, examples and other content at your own risk. As this is a new
			edition of this document, there may be errors and inaccuracies, that may
			of course be damaging to your system. Proceed with caution, and although
			this is highly unlikely, the author does not take any responsibility for
			that.
		</para>

		<para>
			All copyrights are held by their respective owners, unless specifically
			noted otherwise.  Use of a term in this document should not be regarded as
			affecting the validity of any trademark or service mark.
		</para>

		<para>
			Naming of particular products or brands should not be seen as
			endorsements.
		</para>

		<para>
			You are strongly recommended to take a backup of your system before major
			installation and backups at regular intervals.
   </para>

	</sect2>


<!-- Section2: newversions-->

	<sect2 id="newversions">
		<title>Nouvelles versions</title>

		<indexterm>
			<primary>ataraid!news</primary>
		</indexterm>

		<para>
			Les nouvelles versions de ce guide pratique seront toujours disponible sur
			mon site web <ulink url="http://www.murty.net/ataraid/"></ulink>, ou vous
			pouvez me contacter directement, en anglais,
			à <email>murty CHEZ solar POINT murty POINT net</email>
			<footnote>
				<para>
					NdT&nbsp;: c'est volontairement que les adresses e-mail situées sur ce
					document n'apparaissent pas clairement. En effet aujourd'hui, des
					utilitaires indélicats sont capables d'explorer les pages web à la
					recherche d'adresses e-mail qu'ils arroseront de 
					<foreignphrase>spam</foreignphrase>. Pour plus
					d'informations sur les <foreignphrase>spams</foreignphrase>, 
					on pourra se reporter au site <ulink 
					url="http://caspam.org/">http://caspam.org/</ulink>. Si vous
					souhaitez envoyer un e-mail à l'auteur, cliquez sur le lien (votre
					éditeur de courrier devrait s'ouvrir), enlevez les espaces dans
					l'e-mail et remplacez CHEZ par @ et POINT par un point (et TIRET par
					un tiret dans les autres adresses).
				</para>
			</footnote>
			pour vérifier si une nouvelle version est disponible.
		</para>

	</sect2>

<!-- Section2: print-->
<sect2 id="print"><title>Versions agréables à imprimer</title>

		<para>
			Actuellement, ce document est disponible dans les formats suivants
			<footnote><para>NdT&nbsp;: Pour la version française de ces documents,
			se reporter à la section Traductions</para></footnote>&nbsp;:
		</para>
		<itemizedlist>
			<listitem>
				<para>
					<ulink url="http://www.murty.net/ataraid/ataraid.html">HTML</ulink>
				</para>
			</listitem>

			<listitem>
				<para>
					<ulink url="http://www.murty.net/ataraid/ataraid.txt">Texte</ulink>.
				</para>
			</listitem>

			<listitem>
				<para>
					<ulink url="http://www.murty.net/ataraid/ataraid.pdf">Adobe
					PDF</ulink>.
				</para>
			</listitem>

			<listitem>
				<para>
					<ulink url="http://www.murty.net/ataraid/ataraid.ps.gz">Postscript
					gzippé (format US letter)</ulink>.
				</para>
			</listitem>

			<listitem>
				<para>
					<ulink url="http://www.murty.net/ataraid/ataraid.sgml">Source
					SGML</ulink>.
				</para>
			</listitem>

		</itemizedlist>

		<para>
			Notez que la taille du papier varie de part le monde, les formats A4 et
			US letter diffèrent de façon significative. Vous pourriez aussi vouloir
			considérer l'utilisation du format <emphasis>universel</emphasis>
			(8.27x11in; 210x279mm).
		</para>

	</sect2>


<!-- Section2: credits -->

	<sect2 id="credits">
		<title>Remerciements</title>

	<sect3 id="author">
		<title>de l'auteur</title>

		<para>
			<emphasis>Votre nom ici si vous contribuez&nbsp;:)</emphasis>
		</para>

		<para>
			Luc de Louw &lt;luc CHEZ delouw POINT ch&gt; a corrigé les erreurs de mon
			source SGML.
		</para>

		<para>
			Joy Y Goodreau &lt;joyg CHEZ us POINT ibm POINT com&gt; a corrigé les
			erreurs de mon source SGML.
		</para>

		<para>
			Dans cette version, j'ai le plaisir d'exprimer ma reconnaissance à&nbsp;:
		</para>

		<para>
			Alain Portal <email>aportal CHEZ univ TIRET montp2 POINT fr</email>,
			Service Commun de Microscopie Électronique pour une lecture approfondie
			et la correction d'erreurs.
		</para>

	</sect3>

	<sect3 id="translator">
		<title>du traducteur</title>
		<para>
			Le traducteur remercie <ulink url="mailto:fbothamy CHEZ mail POINT dotcom
			POINT fr">Frédéric Bothamy</ulink> pour la relecture approfondie de cette
			traduction et pour la correction d'erreurs, ainsi que
			<ulink url="mailto:jean-philippe CHEZ laposte POINT fr
			POINT fr">Jean-Philippe Guérard</ulink> pour l'aide apportée à la
			publication de cette nouvelle version.
		</para>
	</sect3>

	</sect2>


<!-- Section2: feedback -->

	<sect2 id="feedback">
		<title>Commentaires</title>

		<para>
			Les commentaires concernant ce document sont les bienvenus. Sans vos
			soumissions, ce document n'existerait pas. SVP, envoyez vos ajouts,
			commentaires et critiques, en anglais, à l'adresse suivante&nbsp;:
			<email>murty CHEZ solar POINT murty POINT net</email>.
		</para>
		<para>
			N'hésitez pas à faire parvenir tout commentaire relatif à la version
			française de ce document à <ulink url="mailto:aportal CHEZ univ TIRET
			montp2 POINT fr?subject=À propos du « Guide pratique du RAID ATA sous
			Linux »">aportal CHEZ univ TIRET montp2 POINT fr</ulink>
			ou bien à <ulink url="mailto:commentaires@traduc.org?subject=ATA-RAID-HOWTO">commentaires@traduc.org</ulink>
		</para>	</sect2>


<!-- Section2: translations -->

	<sect2 id="translations">
		<title>Traductions</title>

		<para>
			S'il vous plaît, aidez les utilisateurs internationaux qui ne parlent pas
			anglais. Je vous encourage à traduire ce document dans une langue
			étrangère. Prévenez l'auteur si vous avez traduit ou souhaitiez traduire
			ce document dans une langue étrangère.
		</para>

		<itemizedlist>

			<listitem>
				<para>
					<ulink url="&origine;index.html">Version française</ulink>&nbsp;:
				</para>
				<para>
					Cette version a été réalisée dans le cadre du projet
					<ulink url="http://www.traduc.org">traduc.org</ulink>. Ce document est
					également disponible dans les formats suivants&nbsp;:
				</para>

				<itemizedlist>
					<listitem>
						<para>
							<ulink url="&origine;Linux-ATA-RAID-HOWTO.html">HTML, fichier
							unique</ulink>&nbsp;;
						</para>
					</listitem>

					<listitem>
						<para>
							<ulink url="&origine;Linux-ATA-RAID-HOWTO.pdf">Adobe PDF</ulink>&nbsp;;
						</para>
					</listitem>

					<listitem>
						<para>
							<ulink url="&origine;Linux-ATA-RAID-HOWTO.ps.tar.gz">Postscript targzippé
							(format A4)</ulink>&nbsp;;
						</para>
					</listitem>

					<listitem>
						<para>
							<ulink url="&origine;Linux-ATA-RAID-HOWTO.sgml">Source SGML</ulink>.
						</para>
					</listitem>

				</itemizedlist>

				<para>
					D'autres formats sont disponible sur le site <ulink url="&traduc;"></ulink>.
				</para>

			</listitem>

		</itemizedlist>


	</sect2>

</sect1>

<!-- Section1: intro: END -->


<!-- Section1: requirements  -->

<sect1 id="requirements">
	<title>Exigences</title>
		<para>
			Cette section liste tout ce dont vous avez besoin avant de débuter
			l'installation de votre ordinateur.
		</para>

		<itemizedlist>

			<listitem>
				<para>
					Deux disquettes vierges formatées DOS. Sur un ordinateur travaillant
					sous Linux, vous pouvez formater ces disquettes en tapant la commande
					<command>mkfs.msdos /dev/fd0</command>
				</para>
			</listitem>

			<listitem>
				<para>
					Les CD 1, 2 et 3 de Red Hat Linux 7.3 (les CD 4 et 5 contiennent les
					SRPMS et ne sont pas nécessaires).
				</para>
			</listitem>

			<listitem>
				<para>
					Une connexion Internet disponible.
				</para>
			</listitem>

			<listitem>
				<para>
					Votre ordinateur avec un lecteur CD, un lecteur de disquette et une
					carte Ethernet 10/100, le tout en état de fonctionnement.
				</para>
			</listitem>

			<listitem>
				<para>
					De la patience
				</para>
			</listitem>

		</itemizedlist>


</sect1>


<!-- Section1: préparation -->

<sect1 id="preparation">
	<title>Préparer la disquette du pilote Promise</title>

	<para>
		<orderedlist>
			<listitem>
				<para>
					Téléchargez le fichier zip combiné à partir du lien suivant. Vous
					pouvez le faire à partir de n'importe quel ordinateur connecté à
					Internet. Ce fichier comporte deux fichiers zip&nbsp;: un pour les
					ordinateurs multiprocesseur (rhsmp.zip) et un autre pour les
					ordinateurs monoprocesseur (rhup.zip). Prenez le bon fichier pour
					votre machine et enregistrez-le sur une disquette formatée dos.
				</para>
					<itemizedlist>

					<listitem>
						<para>
							<ulink url="http://www.promise.com/support/file/T-FTS-02-RHD73.zip">Fichier
							combiné zip pour Promise  FastTrak</ulink>
						</para>
					</listitem>

				</itemizedlist>
			</listitem>

			<listitem>
				<para>
					Insérez cette disquette dans un ordinateur tournant sous Linux et
					tapez les commandes suivantes&nbsp;:
				</para>

				<screen>mount /dev/fd0 /mnt/floppy
cd /mnt/floppy
mv rhsmp-ftb22.zip /tmp
unzip /tmp/rhsmp-ftb22.zip
cd /
umount /mnt/floppy</screen>
				<note><title>NOTE</title>
					<para>
						Les commandes précédentes sont pour des ordinateurs
						multiprocesseurs. Ajuster ces commandes en remplaçant rhsmp
						par rhup si votre ordinateur a seulement un processeur unique.
					</para>
				</note>

			</listitem>

			<listitem>
				<para>
					Étiquetez la disquette «&nbsp;Pilote Promise FastTrak&nbsp;» et mettez-la de côté
					en sécurité.
				</para>
			</listitem>

		</orderedlist>
	</para>

</sect1>


<!-- Section1: Preparing Red Hat 7.3 CD -->

<sect1 id="preparing">
	<title>Préparer les CD Red Hat Linux 7.3</title>

	<note><title>NOTE</title>
		<para>
			Si vous avez déjà les CD de Red Hat Linux, sautez cette étape. Sinon,
			lisez-la pour voir comment les récupérer gratuitement.
		</para>
	</note>

	<para>
		<orderedlist>

			<listitem>
				<para>
					Installez-vous sur un ordinateur Windows équipé d'un graveur de CD
					et configurez-le correctement. Insérez un CD-R vierge dans le graveur
				</para>
			</listitem>

			<listitem>
				<para>
					Allez sur le site ftp de Red Hat à l'adresse
					<ulink url="ftp://ftp.redhat.com/pub/redhat/linux/7.3/en/iso/i386/"></ulink>.
				</para>
			</listitem>

			<listitem>
				<para>
					Naviguez et localisez le fichier <filename>disc1.iso</filename>
					(le nom réel du fichier peut être
					<emphasis>quelque_chose</emphasis><filename>-disc1.iso</filename>),
					et enregistrez-le sur le bureau Windows.
				</para>
			</listitem>

			<listitem>
				<para>
					Puis faites un clic droit sur l'image iso créée sur le bureau et
					choisissez «&nbsp;Enregistrez sur un CD&nbsp;». Cela gravera 
					l'image iso sur
					votre CD-R et créera le disk-1.
				</para>
			</listitem>

			<listitem>
				<para>
					Recommencez la procédure pour les deuxième et troisième fichiers iso
					(<emphasis>quelque_chose</emphasis><filename>-disc2.iso</filename>,
					<emphasis>quelque_chose</emphasis><filename>-disc3.iso</filename>)
					à l'adresse <ulink url="ftp://ftp.redhat.com/pub/"></ulink>.
				</para>
			</listitem>

			<listitem>
				<para>
					Vérifiez que vos CD-Rs sont vraiment lisibles. Si vous cliquez sur
					«&nbsp;Poste de travail&nbsp;» puis sur Graveur CD, vous devriez
					pouvoir naviguer à travers le contenu des CD-Rs.
				</para>
			</listitem>

			<listitem>
				<para>
					Étiquetez proprement les CD-R&nbsp;: disc-1, disc-2
					<emphasis>etc</emphasis>.
				</para>
			</listitem>

		</orderedlist>
	</para>

</sect1>


<!-- Section4: Installing Red Hat 7.3 -->

<sect1 id="installing">
	<title>Installer Red Hat</title>

	<para>
		Maintenant que vous avez créé vos CD, vous êtes prêt à installer la Red Hat
		sur votre ordinateur.
		<orderedlist>

			<listitem>
				<para>
					Redémarrez votre ordinateur et appuyez sur la combinaison de touche
					<keycombo action="simul"><keycap>CTRL</keycap><keycap>F</keycap></keycombo>
					lorsque vous voyez apparaître à l'écran l'invite FastTrak BIOS. Vous
					entrez alors dans le BIOS FastTrak de Promise.
				</para>
			</listitem>

			<listitem>
				<para>
					Dans ce BIOS, choisissez successivement «&nbsp;Delete Array&nbsp;»,
					«&nbsp;Define Array&nbsp;», «&nbsp;Mirror&nbsp;».
				</para>
			</listitem>

			<listitem>
				<para>
					Appuyez sur la combinaison de touche
					<keycombo action="simul"><keycap>CTRL</keycap><keycap>Y</keycap></keycombo>
					pour enregistrer la configuration,
				</para>
			</listitem>

			<listitem>
				<para>
					Choisissez «&nbsp;Create Only&nbsp;» et appuyez sur la touche
					<keycap>ESC</keycap> pour redémarrer. Au redémarrage, vous pouvez
					constater que le BIOS Promise FastTrak a défini «&nbsp;1x2 RAID
					Mirror&nbsp;» sur vos deux disques durs connectés au contrôleur
					FastTrak.
				</para>
			</listitem>

			<listitem>
				<para>
					Introduisez le CD «&nbsp;RH 7.2 disc-1&nbsp;» dans votre lecteur
					CD-ROM et relancez l'ordinateur.
				</para>
			</listitem>

			<listitem>
				<para>
					À l'invite de démarrage, tapez la commande&nbsp;:
				</para>
				<screen>linux noprobe</screen>
			</listitem>

			<listitem>
				<para>
					Maintenant, l'installation commence. Choisissez «&nbsp;Add
					device&nbsp;». Puis déroulez la liste des pilotes disponibles pour voir
					si le pilote Promise FastTrak y est listé. Si ce n'est pas le cas,
					appuyez sur la touche <keycap>F2</keycap> pour charger un pilote
					externe à partir d'une disquette. Insérez alors votre disquette
					«&nbsp;Pilote Promise FastTrak&nbsp;» et validez.
				</para>
			</listitem>

			<listitem>
				<para>
					Continuez l'installation. Pour le moment, choisissez uniquement des
					partitions de type ext3. Vous pourrez faire des partitions ext2 à la
					fin si vous en avez réellement besoin. Mais pour le moment,
					tenez-vous en au type ext3 car cela vous facilitera la vie.
				</para>
			</listitem>

			<listitem>
				<para>
					Quand il vous est demandé de créer une disquette de démarrage, insérez
					une disquette vierge. Le programme d'installation Red Hat créera cette
					disquette de démarrage.
				</para>
				<note><title>NOTE</title>
					<para>
						S'il vous plaît, ne cliquez pas sur «&nbsp;Ignorez la création
						d'une disquette de démarrage&nbsp;». Si vous ignorez cette étape
						et que vous ne créiez pas cette disquette de démarrage, vous le
						regretteriez amèrement plus tard.
					</para>
				</note>
			</listitem>

			<listitem>
				<para>
					Ensuite, lorsqu'il vous est demandé de choisir la configuration du
					chargeur automatique, SVP choisissez «&nbsp;LILO seul&nbsp;». Ne
					choisissez pas «&nbsp;GRUB&nbsp;» comme chargeur automatique.
				</para>
				<para>
					Quand l'installation est finie, vous pouvez voir à l'écran
					«&nbsp;Félicitations&nbsp;».
				</para>
			</listitem>

			<listitem>
				<para>
					À ce moment, appuyez sur la combinaison de touche
					<keycombo action="simul"><keycap>CTRL</keycap><keycap>ALT</keycap><keycap>F2</keycap></keycombo>
					pour basculer vers <filename>tty2</filename>.
				</para>
			</listitem>

			<listitem>
				<para>
					À l'invite de commande, tapez la commande&nbsp;:
				</para>
				<screen>cd /mnt/sysimage/lib/modules/2.4.18-3/kernel/drivers/scsi</screen>
			</listitem>

			<listitem>
				<para>
					Tapez la commande <command>ls</command> pour vérifier que le fichier
					<filename>ft.o</filename> existe. Si ce n'est pas le cas, vous allez
					devoir installer manuellement le module <filename>ft.o</filename>
					comme suit&nbsp;:
					<orderedlist numeration="loweralpha">
						<listitem>
							<para>
								Assurez-vous que votre lecteur de disquette est monté, allez sur
								la disquette et tapez les commandes&nbsp;:
							</para>
							<screen>mv module.cgz /tmp
cd /tmp
gzip -dc module.cgz | cpio -idumv</screen>
						</listitem>

						<listitem>
							<para>
								Maintenant, vous pouvez voir un tas de répertoires créés sous
								<filename class="directory">/tmp</filename>.
							</para>
							<screen>cd /tmp/`uname -r`
cp ft.o /mnt/sysimage/lib/modules/`uname -r`/kernel/drivers/scsi</screen>
						</listitem>

						<listitem>
							<para>
								À l'invite shell, tapez la commande&nbsp;:
							</para>
							<screen>less /mnt/sysimage/etc/lilo.conf</screen>
							<para>
								Vérifiez que le fichier <filename>lilo.conf</filename> vous
								semble bon. Tout spécialement, il devrait y avoir une ligne
								<filename>initrd=</filename> et le fichier
								<filename>initrd.img</filename> correspondant doit exister dans
								<filename>/mnt/sysimage/boot</filename>. Si ce n'est pas le cas,
								vous allez devoir le créer manuellement comme suit&nbsp;:
							</para>
							<screen>/mnt/sysimage/usr/sbin/chroot /mnt/sysimage /sbin/mkinitrd \
--preload jbd \
--preload ext3 \
--preload scsi_mod \
--with ft \
/boot/initrd.img 2.4.18-3</screen>
						</listitem>

					</orderedlist>
				</para>
			</listitem>

			<listitem>
				<para>
					Maintenant, retirez disquette et CD et relancez l'ordinateur. À cet
					instant, priez pour que votre ordinateur démarre sans problème.
				</para>
			</listitem>

			<listitem>
				<para>
					S'il ne démarre pas, introduisez votre disquette de démarrage
					<footnote>
						<para>
							Parce que vous l'avez faite, N'EST-CE PAS&nbsp;?
						</para>
					</footnote>
					 , relancez, connectez-vous et réparez comme suit&nbsp;:
					<orderedlist numeration="loweralpha">
						<listitem>
							<para>
								Assurez-vous que <filename>/boot/initrd.img</filename> existe.
								Assurez-vous que
								<filename>/lib/modules/2.4.18-3/kernel/drivers/scsi/ft.o</filename>
								existe (si ce n'est pas le cas, vous devez résoudre ce problème
								comme expliqué plus haut).
							</para>
						</listitem>
						<listitem>
							<para>
								Tapez la commande <command>/sbin/lilo</command>
							</para>
						</listitem>
						<listitem>
							<para>
								Retirez alors la disquette et relancez. Votre ordinateur doit
								maintenant démarrer dans un nouvel environnement utilisant le
								pilote Promise
							</para>
						</listitem>
					</orderedlist>
				</para>
			</listitem>
			<listitem>
				<para>
					Tapez la commande <command>df -k</command> et vous devriez voir vos
					disques durs comme <filename>/dev/sdaX</filename> au lieu de
					<filename>/dev/hdaX</filename>. Ceci parce que votre pilote Promise
					utilise en réalité un type spécial d'émulation RAID logicielle, et pas
					vraiment un RAID matériel. (Le RAID Promise travaille grâce à une
					bidouille du BIOS).
				</para>
			</listitem>
		</orderedlist>
	</para>

	<para>
		Si votre machine est SMP (multiprocesseurs), vous devrez créer manuellement
		le fichier <filename>initrdsmp.img</filename>, puis démarrer sur le noyau
		monoprocesseur comme décrit plus haut, et éditer le fichier
		<filename>/etc/lilo.conf</filename> et enfin tester pour voir si vous pouvez
		démarrer sur un système SMP.
		<orderedlist>
			<listitem>
				<para>
					Démarrez votre machine sur le noyau monoprocesseur
					<filename>2.4.18-3</filename>, tapez la commande suivante pour
					fabriquer le fichier <filename>initrdsmp.img</filename> qui sera
					utilisé pour le noyau 2.4.18-3smp&nbsp;:
				</para>
				<screen>/sbin/mkinitrd \
--preload jbd \
--preload ext3 \
--preload scsi_mod \
--with ft \
/boot/initrdsmp.img 2.4.18-3smp</screen>
				<note><title>NOTE</title>
					<para>
						Si vous êtes fatigué de retenir cette commande pour créer les
						fichiers initrd, téléchargez mon script
						<ulink url="http://www.murty.net/ataraid/files/geninitrd.txt">geninird</ulink>
						et conservez-le à portée de main).
					</para>
				</note>
			</listitem>
			<listitem>
				<para>
					Ajustez votre fichier <filename>/etc/lilo.conf</filename> en
					conséquence pour le noyau 2.4.18-3smp (la section noyau SMP), tapez la
					commande <command>/sbin/lilo</command> et relancez la machine sur le
					noyau SMP. Voici à quoi devrait ressembler le fichier
					<ulink url="http://www.murty.net/ataraid/files/lilo.conf.txt"><filename>/etc/lilo.conf</filename></ulink>.
				</para>
			</listitem>
		</orderedlist>
	</para>

	<para>
		À cet instant, vous avez une machine tournant avec la Red Hat et le support
		SMP, si cela est applicable à votre cas. Si vous êtes content avec le fait
		que vous tourniez avec un RAID matériel bidouillé de Promise utilisant
		l'émulation SCSI et que cela ne vous dérange pas, alors n'en lisez pas plus.
	</para>

	<para>
		Parce que le pilote Promise est une émulation SCSI, il représente une charge
		importante pour la (les) CPU(s). Lisez plus loin si vous souhaitez activer
		le vrai RAID Linux natif et vous débarrasser de cette émulation SCSI de
		Promise.
  </para>


</sect1>


<!-- Section1: Installing Native Linux RAID -->

<sect1 id="nativeraid">
	<title>Installer le RAID Linux natif</title>

	<para>
		En premier lieu, configurez votre accès réseau et connectez votre ordinateur
		à Internet, ordinateur qui tourne toujours avec le pilote d'émulation SCSI
		Promise. Ensuite, vous installerez le RAID Linux natif.
	</para>

	<para>
		<orderedlist>
			<listitem>
				<para>
					Connectez vous en tant que root. Allez sur
					<ulink url="http://www.kernel.org">www.kernel.org</ulink> et
					téléchargez le dernier noyau stable
					<filename>2.4.19.tar.gz</filename> dans <filename>/root</filename>.
				</para>
			</listitem>
			<listitem>
				<para>
					Configurez votre noyau&nbsp;:
				</para>
				<screen>cd /usr/src/
tar xvzf linux-2.4.19.tar.gz
cd linux-2.4.19          # Aller dans le répertoire des sources du noyau créé par tar
cp config.txt .config    #(Voir la NOTE ci-dessous pour voir où récupérer config.txt)
make menuconfig</screen>
				<note><title>NOTE</title>
					<para>
						Vous pouvez télécharger un fichier <filename>.config</filename> à l'URL
						<ulink url="http://www.murty.net/ataraid/files/config.txt"></ulink>.
						C'est un fichier de configuration noyau générique avec toutes les
						options nécessaires configurées pour les RAID Promise FastTrak et
						HighPoint HPT. Vous pouvez, bien entendu, le modifier suivant vos
						besoins, soit directement avec un éditeur de texte, soit en tapant
						la commande <command>make&nbsp;menuconfig</command> comme expliqué
						ci-dessous. Il est très facile de commettre des erreurs en éditant
						le fichier <filename>.config</filename> avec vi ou emacs. C'est
						pourquoi il est recommandé d'utiliser l'interface de configuration
						en tapant la commande <command>make&nbsp;menuconfig</command>.
					</para>
				</note>
			</listitem>
			<listitem>
				<para>
					Validez tout ce qui suit de façon statique au noyau (PAS sous forme
					de modules)&nbsp;:
				</para>
				<screen>
  Code maturity level options ---&gt;
	[*] Prompt for development and/or incomplete code/drivers
  ATA/IDE/MFM/RLL Support ---&gt;
	&lt;*&gt; ATA/IDE/MFM/RLL Support
	IDE/ATA/ATAPI Block Devices ---&gt;
	&lt;*&gt;    Enhanced ATA/IDE/MFM/RLL disk/cdrom/tape/floppy support
	&lt;*&gt;        Include IDE/ATA-2 Disk Support
	[*]            Use multi-mode by default
	&lt;*&gt;        Include IDE/ATAPI CDROM support
	[*]        Generic PCI IDE chipset support
	[*]            Sharing PCI IDE interrupt support
	[*]            Generic PCI Bus master DMA support
	[*]                Use PCI DMA by default when available
	[*]            Intel PIIXn chipset support
	[*]                PIIXn tuning support
	[*]            Promise PDC202{46|62|65|67|68} support
	[*]                Special UDMA Feature
	[*]                Special FastTrak Feature
	[*]            VIA 82CXXX chipset support
	&lt;*&gt;    Support for IDE RAID controllers
	&lt;*&gt;        Support Promise software RAID (Fasttrak(tm))</screen>
			</listitem>
			<listitem id="tag1">
				<para>
					Après avoir validé ces caractéristiques statiques comme décrit
					ci-dessus, faites toutes les autres modifications que vous souhaitez
					pour les adapter à votre environnement.
				</para>
			</listitem>
			<listitem>
				<para>
					Enregistrez la configuration de votre noyau. Elle est sauvegardée
					dans le fichier <filename>.config</filename> situé dans le répertoire
					courant. Faites une copie de sauvegarde de ce fichier. Si vous ne le
					faisiez pas, vous auriez sans doute à le regretter plus tard. Copiez
					le fichier <filename>.config</filename> sur une disquette vierge ou
					dans <filename>/root</filename>.
				</para>
			</listitem>
			<listitem>
				<para>
					Maintenant, construisez et installez votre noyau comme vous le faites
					habituellement, en tapant les commandes&nbsp;:
				</para>
				<screen>make dep ; make clean ; make &amp;&amp; make install
make modules &amp;&amp; make modules_install</screen>
			</listitem>
		</orderedlist>
	</para>
	<para>
		Jetez un coup d'&oelig;il au fichier <filename>/etc/lilo.conf</filename> pour
		être sûr que de nouvelles lignes ont été ajoutées pour charger votre nouveau
		noyau 2.4.19. Notez simplement qu'il ne devrait pas y avoir de ligne
		<filename>initrd=</filename> pour ce nouveau noyau dans le fichier
		<filename>/etc/lilo.conf</filename>. Ceci étant, votre nouveau noyau se
		charge tout seul sans dépendre d'un fichier <filename>initrd.img</filename>
		contrairement à votre noyau courant 2.4.18-3.
	</para>
	<para>
		Maintenant, ajustez le fichier <filename>/etc/lilo.conf</filename> comme
		suit&nbsp;:
		<orderedlist>
			<listitem>
				<para>
					Localisez la ligne <filename>root=/dev/sdaX</filename> pour le nouveau
					noyau dans <filename>/etc/lilo.conf</filename>. Changez-la en
					<filename>root=/dev/ataraid/d0pX</filename> où <filename>X</filename>
					est un nombre de <filename>1</filename> à <filename>16</filename>.
					Enregistrez les modifications.
				</para>
			</listitem>
			<listitem>
				<para>
					Tapez la commande&nbsp;:
				</para>
				<screen>/sbin/lilo</screen>
			</listitem>

			<listitem>
				<para>
					Maintenant, si vous avez choisi des partitions ext2 pendant
					l'installation, vous devez les décommenter maintenant dans le fichier
					<filename>/etc/fstab</filename>. (La meilleure chose est d'oublier le
					type ext2 pendant tout le processus).
				</para>
			</listitem>
			<listitem>
				<para>
					Retirez disquette et CD, et relancez l'ordinateur en tapant
					la commande&nbsp;:
				</para>
				<screen>sync;sync;reboot</screen>
			</listitem>
			<listitem>
				<para>
					À l'invite LILO, choisissez votre nouvelle étiquette nouveau noyau
					correspondant à <filename>2.4.19</filename>.
					Votre ordinateur chargera alors votre nouveau noyau.
				</para>
				<note><title>NOTE</title>
					<para>S'il ne démarre pas, alors insérez la disquette de démarrage
						(celle que vous avez créée pendant le processus d'installation)
						et relancez. Votre ordinateur devrait alors démarrer sur votre
						vieille configuration RAID émulée SCSI. Identifiez-vous sur votre
						machine Linux et déterminez votre <emphasis>Append Line</emphasis>,
						voir la <link linkend="determine">Section 7.2</link>. Ensuite,
						modifiez votre fichier<filename>/etc/lilo.conf</filename> pour y
						inclure l'<emphasis>Append Line</emphasis> comme illustré dans
						<link linkend="tag2">l'étape 2 de la Section 7.2</link>.
						Finalement, activez les changements en tapant la commande
						<command>/sbin/lilo</command> et relancez en tapant la commande
						<command>sync;sync;reboot</command>. Au l'invite LILO,
						sélectionnez votre nouvelle étiquette noyau correspondant au
						<filename>2.4.19</filename>.
					</para>
				</note>
			</listitem>
			<listitem>
				<para>
					Connectez-vous en tant que root et tapez la commande
					<command>df -k</command> pour vous assurez de voir les entrées
					<filename>/dev/ataraid/d0X</filename> au lieu des entrées
					<filename>/dev/sdaX</filename>.
				</para>
				<note><title>NOTE</title>
					<para>
						Vous pourrez sans doute constater des erreurs relatives au montage
						d'espace SWAP au moment du chargement du nouveau noyau. Elles sont
						inoffensives. Mais vous devriez éditer votre fichier
						<filename>/etc/fstab</filename> pour modifier chaque entrée
						<filename>sdaX</filename> en une entrée
						<filename>ataraid/d0pX</filename>.
					</para>
				</note>
			</listitem>
			<listitem>
				<para>
					Maintenant, connectez-vous à Internet et téléchargez
					<filename>lilo-22.tar.gz</filename> (la dernière version du programme
					lilo).
				</para>
			</listitem>
			<listitem>
				<para>
					Retirez le programme lilo existant en tapant la commande
					<command>rpm -e --nodeps lilo</command>.
				</para>
			</listitem>
			<listitem>
				<para>
					Installez la nouvelle version de lilo comme suit&nbsp;:
				</para>
				<screen>tar xvzf lilo-22.tar.gz
cd lilo-22   # Allez dans le répertoire source lilo créé par tar
./QuickInst.sh</screen>
			</listitem>
			<listitem>
				<para>
					Répondez OUI aux questions posées.
				</para>
			</listitem>
			<listitem>
				<para>
					Ignorez les erreurs excepté si le fichier
					<filename>/sbin/lilo</filename> n'est pas créé.
				</para>
			</listitem>
			<listitem>
				<para>
					Maintenant, ajustez <filename>/etc/lilo.conf</filename> comme
					suit&nbsp;:
				</para>
				<itemizedlist>
					<listitem>
						<para>
							Remplacez <filename>linear</filename> par
							<filename>lba32</filename>
						</para>
					</listitem>

					<listitem>
						<para>
							Effacez la ligne «&nbsp;<filename>compact</filename>&nbsp;»
						</para>
					</listitem>

					<listitem>
						<para>
							Modifiez la ligne <filename>vga=</filename> en
							<filename>vga=normal</filename>
						</para>
					</listitem>

					<listitem>
						<para>
							Modifiez la ligne <filename>boot=/dev/sda</filename> en
							<filename>boot=/dev/ataraid/dN</filename>
							(où <filename>N</filename> est le numéro de la partition où se
							trouve votre système de fichiers racine. Tapez la commande
							<command>df -k /</command> pour retrouver ce numéro).
						</para>
					</listitem>

					<listitem>
						<para>
							Assurez-vous d'avoir la ligne
							<filename>default=linux-2.4.19</filename>
							(où <filename>linux-2.4.19</filename> est l'étiquette donnée à
							votre nouveau noyau&nbsp;: <filename>2.4.19</filename>).
						</para>
					</listitem>
				</itemizedlist>
			</listitem>

			<listitem>
				<para>
					Enregistrez les modifications dans le fichier et tapez la commande&nbsp;:
					<command>/sbin/lilo.</command>
				</para>
			</listitem>

			<listitem>
				<para>
					Relancez l'ordinateur et croisez les doigts.
				</para>
			</listitem>
		</orderedlist>
	</para>

	<para>
		Voici à quoi doit ressembler votre fichier
		<ulink url="http://www.murty.net/ataraid/files/lilo.conf2.txt"><filename>/etc/lilo.conf</filename></ulink> final.
  </para>

	<para>
		Si tout se passe sans aucune erreur, il est temps de fêter ça&nbsp;!!!!
	</para>

</sect1>


<!-- Section6: Installing on an existing Linux system -->

<sect1 id="existing">
	<title>Installation sur un système Linux existant</title>

		<para>
			Cette section décrit comment installer le RAID ATA Linux natif sur des
			disques non-système que vous souhaiteriez avoir sur une machine
			travaillant sous Linux. Les disques non-système sont ceux qui ne
			comportent pas de partitions systèmes Linux comme les partitions
			<filename>/</filename>, <filename>/usr</filename>,
			<filename>/var</filename>, <filename>/boot</filename>. En d'autres termes,
			nous avons une machine travaillant sous Linux avec deux disques libres, et
			nous voulons configurer le RAID ATA miroir (RAID&nbsp;1) sur ces deux
			disques. Lorsque l'on sauvegarde des données importantes sur un tel
			dispositif miroir, les données sont bien protégées. Bien entendu, comme
			sur tout autre RAID&nbsp;1, on constatera l'amélioration de la vitesse de
			lecture, lors de la lecture des données, ainsi qu'une faible perte de
			vitesse en écriture, lors de la modification ou l'ajout de nouvelles
			données sur le dispositif miroir. Toutefois, l'utilisation du RAID&nbsp;1
			pour des disques de données est particulièrement recommandée si ceux-ci
			sont bien plus souvent lus qu'écrits. La machine qui héberge un serveur
			web en est un excellent exemple&nbsp;: en effet, le contenu d'un site est
			peu fréquemment modifié; par contre, celui-ci est très souvent accédé par
			les utilisateurs que sont les Internautes.
		</para>

		<para>
			Voici donc les étapes à suivre pour installer le RAID ATA non-système si
			votre contrôleur RAID est un Promise Technology&nbsp;:
		</para>

		<itemizedlist>

			<listitem>
				<para>
					Retrouvez les valeurs des adresses d'entrées/sorties et du (des)
					numéro(s) d'interruption de votre contrôleur (carte) RAID Promise.
				</para>
			</listitem>

			<listitem>
				<para>
					Éditez votre fichier <filename>/etc/lilo.conf</filename> et
					insérez-y une <emphasis>Append Line</emphasis> appropriée.
				</para>
			</listitem>

			<listitem>
				<para>
					Activez le support ataraid, soit en chargeant automatiquement
					le module ataraid au démarrage de votre machine, soit en liant
					statiquement ce support au noyau.
				</para>
			</listitem>

		</itemizedlist>


<sect2 id="appendline">
	<title>Append Line</title>

	<para>
		Pour la compréhension de tâches diverses impliquant le RAID Promise FastTrak
		comme la mise à jour ou la recherche de pannes, introduisons un nom&nbsp;:
		l'<emphasis>Append Line</emphasis>.
	</para>

	<para>
		Toutes les options <filename>ide</filename> que vous passez à l'invite de
		démarrage de LILO <prompt>boot:</prompt> au moment du démarrage,
		lorsqu'elles sont assemblées comme une chaîne de caractères, font
		l'<emphasis>Append Line</emphasis>. Toutes les options
		<filename>ide</filename> entre guillemets après le mot-clé
		<filename>append=</filename> dans le fichier
		<filename>/etc/lilo.conf</filename> font aussi l'<emphasis>Append
		Line</emphasis>.
	</para>

	<para>
		Par exemple, si vous tapez la commande&nbsp;:
	</para>

	<para>
		<command>linux-new ide2=0x0001,0x0009,9 ide3=0x2000,0x2009,10 ide4=none
		nousb expert root=/dev/hda3</command>
	</para>

	<para>
		à l'invite <prompt>boot:</prompt> au moment du démarrage de votre ordinateur
		Linux, alors l'<emphasis>Append Line</emphasis> est la chaîne
	</para>

	<para>
		<emphasis>ide2=0x0001,0x0009,9 ide3=0x2000,0x2009,10 ide4=none</emphasis>.
	</para>

	<para>
		De la même façon, si votre fichier <filename>/etc/lilo.conf</filename>
		a la section suivante, votre <emphasis>Append Line</emphasis> est
	</para>

	<para>
		<emphasis>ide2=0x9400,0x9002 ide3=0x8800,0x8402</emphasis>.
	</para>

	<screen>image=/boot/vmlinuz-2.4.9-10
    label=linuxold
    read-only
    root=/dev/hde9
    append="nousb ide2=0x9400,0x9002 ide3=0x8800,0x8402"
    initrd="initrd.img"</screen>

	<para>
		Lorsque l'on se rend compte que l'on a des problèmes à démarrer sur une
		machine Linux avec le RAID, on doit utiliser une <emphasis>Append
		Line</emphasis> appropriée. Par conséquent, il est important de déterminer
		et de consigner par écrit l'<emphasis>Append Line</emphasis>. Cela vous
		aidera plus tard pour résoudre vos problèmes, pour mettre à jour en douceur
		votre noyau ou bien pour ajouter (ou retirer) des disques supplémentaires.
	</para>

</sect2>


<sect2 id="determine">
	<title>Déterminer l'<emphasis>Append Line</emphasis></title>

	<para>
		Pour déterminer la bonne <emphasis>Append Line</emphasis>, nous devons
		savoir en premier lieu comment sont connectés tous nos périphériques
		<filename>IDE</filename>. Les périphériques IDE peuvent être des disques
		durs, des lecteurs CDROM ATAPI, <emphasis>etc</emphasis>. Une fois
		déterminée l'<emphasis>Append Line</emphasis>, nous pouvons la rajouter aux
		options de <prompt>boot:</prompt> (au moment du démarrage) ou nous pouvons
		aussi la transmettre comme valeur de chaîne au paramètre
		<command>append</command> dans le fichier
		<filename>/etc/lilo.conf</filename>. À moins que vous aimiez vous souvenir
		d'options de <prompt>boot:</prompt> compliquées et les entrer manuellement
		à chaque démarrage, vous choisirez alors la seconde méthode,
		<emphasis>c.-à-d.</emphasis>, l'insérer dans le fichier
		<filename>/etc/lilo.conf</filename>. Pour faire cela, ajoutez
		<filename>append="</filename><emphasis>Votre Append Line ici</emphasis>
		<filename>"</filename>, enregistrez le fichier et activez votre nouveau
		fichier <filename>/etc/lilo.conf</filename> en lançant la commande
		<command>/sbin/lilo</command>.
	</para>

	<para>
		Pour une meilleure compréhension, rien ne vaut un exemple. Supposons que
		vous ayez les périphériques <filename>IDE</filename> suivants&nbsp;:
	</para>

	<itemizedlist>

		<listitem>
			<para>
				<filename>ide0</filename>: <filename>hda</filename>,
				<filename>hdb</filename> (disques durs)
			</para>
		</listitem>

		<listitem>
			<para>
				<filename>ide1</filename>: <filename>hdc</filename>,
				<filename>hdd</filename> (disques durs ou autres périphériques comme
				lecteurs CDROM)
			</para>
		</listitem>

		<listitem>
			<para>
				<filename>ide2</filename>: <filename>hde</filename>
				(premier disque dur libre)
			</para>
		</listitem>

		<listitem>
			<para>
				<filename>ide3</filename>: <filename>hdg</filename>
				(second disque dur libre)
			</para>
		</listitem>

	</itemizedlist>

	<para>
		Les deux disques durs libres ci-dessus (<filename>hde</filename> et
		<filename>hdg</filename>) sont ceux que vous voulez configurer en
		RAID&nbsp;1 pour créer le périphérique RAID
		<filename>/dev/ataraid/d0</filename>. Notez que nous n'avons pas
		<filename>hdf</filename> ou <filename>hdh</filename> car c'est comme cela
		que sont utilisés les ports IDE/RAID sur le contrôleur Promise. Ce n'est pas
		une bonne idée de connecter deux disques durs sur le même contrôleur de port
		IDE Promise. Dans l'exemple ci-dessus, nous utilisons les connexions Primary
		Master et Secondary Master sur la carte Promise Technology.
	</para>

	<para>
		Si vous ignorez comment les divers périphériques <filename>IDE</filename>
		sont connectés sur votre ordinateur, jetez un coup d'&oelig;il à
		<filename>/proc/devices</filename> et <filename>/proc/ide/*</filename>.
		Vous pouvez aussi consulter attentivement le fichier log de démarrage
		<filename>/var/log/bootlog</filename> (ou tapez la commande
		<command>dmesg | more</command> juste après le démarrage de votre système
		Linux) pour trouver les périphériques <filename>IDE</filename>. Ensuite,
		entrez la commande <command>less /proc/pci</command>, et localisez les
		informations relatives à Promise Technology. Dans la sortie de la commande
		<command>less /proc/pci</command>, vous trouverez quelque par des
		informations à propos de votre contrôleur Promise qui ressemblent à
		ceci&nbsp;:
	</para>

	<screen>Bus  0, device  17, function  0:
   Unknown mass storage controller: Promise Technology Unknown device (rev 2).
      Vendor id=105a. Device id=d30.
      Medium devsel.  IRQ 10.  Master Capable.  Latency=32.
      I/O at 0x9400 [0x9401].
      I/O at 0x9000 [0x9001].
      I/O at 0x8800 [0x8801].
      I/O at 0x8400 [0x8401].
      I/O at 0x8000 [0x8001].
      Non-prefetchable 32 bit memory at 0xd5800000 [0xd5800000].</screen>

	<para>
		Sur cette recopie d'écran, on apprend que notre carte Promise Technology
		utilise l'interruption IRQ 10 pour les deux ports <filename>IDE</filename>
		(<filename>ide2</filename> et <filename>ide3</filename>). L'utilisation de
		la même interruption est parfaitement autorisée à la condition que votre
		noyau supporte le partage d'interruptions PCI (PCI IRQ Sharing). Par défaut,
		votre noyau Linux est configuré pour supporter ce partage. De cette recopie
		d'écran, on apprend également que notre carte Promise Technology utilise
		diverses adresses d'entrées/sorties. Afin d'identifier correctement les
		disques au démarrage, nous n'avons besoin que du (des) numéro(s)
		d'interruption et des quatre premières adresses d'E/S, celles en dehors des
		crochets [ ]. Reportons cette information sur un morceau de papier. Dans ce
		cas, la sortie d'écran ci-dessus nous donne&nbsp;:
	</para>

	<screen>IRQ<subscript>1</subscript> = 10
IRQ<subscript>2</subscript> = 10
IO<subscript>1</subscript> = 0x9400
IO<subscript>2</subscript> = 0x9000
IO<subscript>3</subscript> = 0x8800
IO<subscript>4</subscript> = 0x8400</screen>

	<para>
		À présent, nous devons évaluer ceci pour obtenir l'<emphasis>Append
		line</emphasis> correcte. Puis le préciser soit dans l'<emphasis>Append
		Line</emphasis> à chaque démarrage, soit dans le fichier de configuration
		de lilo.
	</para>

	<screen>
ideX=IO<subscript>1</subscript>,IO<subscript>2</subscript>+0x0002,IRQ<subscript>1</subscript> ideY=IO<subscript>3</subscript>,IO<subscript>4</subscript>+0x0002,IRQ<subscript>2</subscript> où ideX et ideY sont les deux ports IDE
de la carte Promise utilisés par les deux disques libres.</screen>

	<para>
		Dans notre exemple, l'<emphasis>Append Line</emphasis> précédente devient&nbsp;:
	</para>

	<para>
		<filename>ide2=0x9400,0x9002,10 ide3=0x8800,0x8402,10</filename>
	</para>

	<para>
		Si, par exemple, nous voulions démarrer sur le noyau version 2.4.19,
		étiqueté <filename>linux</filename> d'après
		<filename>/etc/lilo.conf</filename>, alors nous spécifierions notre
		<emphasis>Append Line</emphasis> avec l'une des deux méthodes
		suivantes&nbsp;:
	</para>

	<para>
	 	<orderedlist>

			<listitem>
				<para>
					Au démarrage
				</para>
				<screen><prompt>boot: </prompt><userinput>linux ide2=0x9400,0x9002,10 ide3=0x8800,0x8402,10</userinput></screen>
				<para>
					Si vous choisissez cette méthode, vous devrez taper manuellement
					l'<emphasis>Append Line</emphasis> après l'étiquette noyau
					<filename>linux</filename> chaque fois que vous démarrerez votre
					machine Linux.
				</para>
			</listitem>

			<listitem id="tag2">
				<para>
					Dans le fichier <filename>/etc/lilo.conf</filename>
				</para>
				<screen>image=/boot/vmlinuz-2.2.19
    label=linux
    read-only
    root=/dev/ataraid/d0p12
    append="ide2=0x9400,0x9002,10 ide3=0x8800,0x8402,10"</screen>
    		<para>
					Si vous choisissez cette méthode, vous devez lancer lilo une fois,
					en tapant la commande <command>/sbin/lilo</command>, pour activer
					les changements. Et vous n'aurez rien de plus à taper au démarrage.
				</para>
			</listitem>

		</orderedlist>
	</para>

</sect2>


<sect2 id="settingup">
	<title>Configurer le RAID 1</title>

	<para>
		Si vous souhaitez configurer le RAID 1 en utilisant le pilote propriétaire
		Promise Technology (<filename>ft.o</filename>), vous pouvez télécharger le
		pilote Promise (<filename>ft.o</filename>) dans
		<filename>/lib/modules/kernel-version</filename> et charger le module en
		tapant la commande <command>modprobe&nbsp;-k&nbsp;ft</command>.
		Vous pourrez alors accéder à votre nouveau périphérique RAID comme étant
		<filename>/dev/sdc</filename> ou quelque chose comme cela. Mais si cela ne
		fonctionne pas, alors déterminez votre <emphasis>Append Line</emphasis>
		et ajoutez-la à votre fichier <filename>/etc/lilo.conf</filename>. Si vous
		configurez le RAID sur un système Linux existant et si vous utilisez, soit
		le pilote <filename>ft</filename> de Promise Technology, soit le pilote
		Linux natif <filename>ataraid</filename>, alors l'utilisation de
		l'<emphasis>Append Line</emphasis> est vivement recommandée. Une fois que
		vous redémarrez avec votre nouveau fichier
		<filename>/etc/lilo.conf</filename> qui contient l'<emphasis>Append
		Line</emphasis>, vous pouvez charger l'un des deux pilotes
		(<filename>ft.o</filename> de Promise Technology ou
		<filename>ataraid.o</filename>, le module RAID Linux natif) pour activer le
		RAID sauf si votre noyau intègre en lui le support ataraid auquel cas vous
		n'avez pas à charger le module ataraid.
	</para>

	<para>
		Comme le RAID Linux natif est recommandé, nous allons en discuter plus en
		détails. Pour configurer le RAID Linux natif sur une machine Linux
		existante, insérez l'<emphasis>Append Line</emphasis> dans le fichier
		<filename>/etc/lilo.conf</filename> comme expliqué précédemment. Validez les
		modifications en tapant la commande <command>/sbin/lilo</command>. Relancez
		votre ordinateur. Après que celui-ci ait redémarré, chargez manuellement le
		module ataraid si votre noyau n'a pas le support ataraid intégré ou bien si
		le chargement du module <filename>ataraid.o</filename> a échoué pour une
		raison ou pour une autre. Si vous avez compilé votre noyau avec le support
		ataraid intégré à celui-ci (ataraid pas sous forme de module), alors vous
		pouvez commencer à formater et utiliser votre disque miroir
		<filename>/dev/ataraid/d0</filename> immédiatement.
	</para>

	<para>
		Mais si vous avez compilé l'ataraid comme un module séparé, alors tapez la
		commande <command>lsmod</command> et regardez si ataraid fait partie de la
		liste. Si ce n'est pas le cas, chargez-le manuellement en tapant la commande
		<command>modprobe&nbsp;-k&nbsp;ataraid</command>. Si vous ne voyez plus
		aucune erreur, alors vous pouvez commencer à utiliser votre disque miroir
		<filename>/dev/ataraid/d0</filename> immédiatement. Formatez-le, montez-le
		et utilisez-le comme vous le feriez normalement.
	</para>

	<para>
		Le fait que vous puissiez utiliser <filename>/dev/ataraid/d0</filename>
		implique que vous ayez rempli votre mission avec succès. SVP, n'accédez pas
		directement aux disques <filename>/dev/hde</filename>,
		<filename>/dev/hdg</filename> ou à leurs partitions, bien que Linux vous le
		permette. Une fois que vous avez construit un disque miroir à partir de deux
		disques, vous devez toujours accéder au miroir et pas aux disques eux-mêmes
		directement.
	</para>


</sect2>
</sect1>


<!-- Section7: Upgrading Kernel -->

<sect1 id="upgrading">
	<title>Mettre à jour le noyau</title>

	<para>
		Lisez attentivement cette section si vous projetez de mettre à jour votre
		noyau sur votre machine Linux avec le RAID Promise FastTrak. À moins que
		vous ne souhaitiez plus, en aucune façon, utiliser Promise FastTrak, vous
		avez besoin de cette information pour vous éviter d'avoir des problèmes.
	</para>

	<para>
		Effectuez toujours une sauvegarde de vos données avant d'entreprendre une
		mise à jour du noyau. Sauvegardez également les fichiers
		<filename>/etc/fstab</filename>, <filename>/etc/lilo.conf</filename>,
		<filename>/boot/vmlinuz-currentversion</filename> et
		<filename>/boot/initrd.img</filename> (si vous utilisez initrd). Lorsque
		vous mettez à jour votre noyau, n'effacez pas l'ancien noyau et les fichiers
		qui en dépendent dans <filename>/boot</filename> et n'effacez pas les lignes
		qui lui correspondent dans le fichier <filename>/etc/lilo.conf</filename>.
		Si vous mettez à jour votre noyau vers, par exemple, la version 2.4.20,
		créez seulement une nouvelle section noyau dans le fichier
		<filename>/etc/lilo.conf</filename>. Par exemple, ajoutez les lignes
		suivantes dans le fichier <filename>/etc/lilo.conf</filename>&nbsp;:
	</para>

	<screen># Début du code pour démarrer sur mon tout nouveau noyau&nbsp;: 2.4.20

image=/boot/vmlinuz-2.4.20
    label=linux-new
    read-only
    root=/dev/ataraid/d0p12

# Fin du code pour démarrer sur mon tout nouveau noyau&nbsp;: 2.4.20</screen>

	<para>
		Ne changez pas la ligne <filename>default=linux</filename> dans le fichier
		<filename>/etc/lilo.conf</filename> à moins que (et jusqu'à ce que) vous
		ayez démarré avec succès sur votre nouveau noyau en tapant
		<userinput>linux-new</userinput> à l'invite <prompt>boot:</prompt> (ou en
		sélectionnant <filename>linux-new</filename> dans le menu, si vous utilisez
		LILO dans le mode menu).
	</para>

	<para>
		Maintenant, discutons du procédé de mise à jour du noyau pour les quatre
		cas suivants&nbsp;:
	</para>

	<orderedlist>

		<listitem>
			<para>
				Pilote Promise Technology (<filename>ft</filename>)
				avec OS sur RAID miroir
			</para>
		</listitem>

		<listitem>
			<para>
				Pilote Promise Technology (<filename>ft</filename>)
				avec données non-OS sur RAID miroir
			</para>
		</listitem>

		<listitem>
			<para>
				Pilote Linux natif (<filename>ataraid</filename>)
				avec OS sur RAID miroir
			</para>
		</listitem>

		<listitem>
			<para>
				Pilote Linux natif (<filename>ataraid</filename>)
				avec données non-OS sur RAID miroir
			</para>
		</listitem>

	</orderedlist>

	<para>
		OS s'entend pour «&nbsp;Operating System&nbsp;» ou plus spécialement Red Hat
		Linux Operating System dans notre cas. Quand on installe Linux sur une
		partition miroir comme <filename>/dev/ataraid/d0p1</filename> (ou
		<filename>/dev/sda1</filename> si l'on utilise le pilote propriétaire
		Promise Technology), alors on dit que notre OS est sur le RAID miroir. Si
		notre machine Linux a seulement les partitions principales comme
		<filename>/</filename> et <filename>/boot</filename> sur le RAID, on
		l'appelle aussi OS sur RAID.
	</para>

	<para>
		Les partitions créées par l'utilisateur comme partitions libres disponibles
		telles que <filename>/mydata1</filename>, <filename>/imp</filename>,
		<filename>/scratch</filename> ne font pas partie du système d'exploitation
		Linux puisque Linux n'y installe aucun fichier par défaut lorsque vous
		installez Linux ou lorsque vous mettez à jour un paquetage logiciel standard
		Linux. Toutes les données, dans de telles partitions utilisateur, deviennent
		des données utilisateur, ou des données non-OS. C'est une bonne idée que
		d'utiliser uniquement les systèmes de fichiers ext3 et swap sur les
		partitions OS. Pour les partitions non-OS, vous pouvez utiliser d'autres
		systèmes de fichiers comme ext2 et dos (si vous avez un autre système
		d'exploitation comme Windows sur le même ordinateur Linux, ou tout
		simplement si vous adorez dos). Toutefois, pourquoi utiliser ext2 si vous
		n'en avez pas besoin alors que vous feriez un meilleur choix en utilisant
		ext3 pour les partitions OS et non-OS&nbsp;?
	</para>


<sect2 id="case1">
	<title>
		Pilote Promise Technology (<filename>ft</filename>) avec OS sur RAID miroir
	</title>

	<para>
		Actuellement, Promise Technology supporte uniquement la Red Hat 7.3 et les
		versions précédentes. La Red Hat 7.3 utilise par défaut le noyau 2.4.18-3.
		Veuillez noter aussi que vous devez utiliser initrd.img (Initial RAM disk
		image) dans <filename>/etc/lilo.conf</filename>, quand vous installez Linux
		avec le pilote fourni par Promise. Au moment de l'installation, les scripts
		du pilote Promise sont supposés générer automatiquement le fichier
		<filename>initrd.img</filename> et configurer le fichier
		<filename>/etc/lilo.conf</filename> pour vous. Malheureusement, cela ne
		marche pas correctement et vous devez créer manuellement le fichier
		<filename>initrd.img</filename> et configurer le fichier
		<filename>/etc/lilo.conf</filename> vous même.
	</para>

	<para>
		Vous êtes bloqué avec le noyau 2.4.18-3 par défaut et vous ne pourrez pas
		mettre à jour votre noyau soit en le compilant, soit en utilisant les
		programmes de mise à jour automatique tels que les utilitaires
		<command>up2date</command> et <command>rpm</command>. Si vous voulez à tout
		prix mettre votre noyau à jour, alors faites le, mais n'utilisez pas le raid.
		Vous pouvez ajouter l'<emphasis>Append Line</emphasis> au fichier
		<filename>/etc/lilo.conf</filename> comme expliqué à la
		<link linkend="determine">Section 7.2</link> et ne pas charger le module
		ataraid (ou ne pas compiler votre nouveau noyau avec l'option ataraid
		intégrée). En faisant cela, vous mettez à jour votre noyau vers une nouvelle
		version et sacrifiez la particularité RAID car vous utilisez votre carte
		Promise Technology comme une simple carte d'extension IDE.
	</para>

	<para>
		Si Promise Technology fournit dans le futur une nouvelle version de leur
		pilote <filename>ft</filename> pour la version 2.4.19, vous pourrez alors
		mettre à jour votre noyau vers la version 2.4.19 (en utilisant
		<command>up2date</command> ou <command>rpm</command> mais pas en compilant
		manuellement) et placer leur nouvelle version du fichier
		<filename>ft.o</filename> dans
		<filename>/lib/modules/kernel-2.4.19</filename>. Vous devrez également
		mettre <filename>initrd-2.4.19</filename> dans <filename>/boot</filename> et
		ajouter la ligne <filename>initrd=</filename> à la nouvelle section noyau du
		fichier <filename>/etc/lilo.conf</filename>. Si votre machine Linux utilise
		le pilote Promise Technology, votre OS est sur le RAID miroir et Promise
		Technology ne fournira pas de nouvelles versions pour les nouvelles versions
		du noyau, SVP, ne tripotez pas votre noyau actuel. Si vous jouez avec,
		rappelez-vous que vous pouvez endommager sérieusement votre ordinateur et ne
		plus être capable de le redémarrer ou de récupérer vos données.
	</para>

</sect2>


<sect2 id="case2">
	<title>
		Pilote Promise Technology (<filename>ft</filename>) avec données non-OS data
		sur RAID miroir
	</title>

	<para>
		La plupart des explications données dans le cas précédent (Pilote Promise
		Technology (<filename>ft</filename>) avec OS sur RAID miroir) s'appliquent
		ici aussi, bien sûr, vous ne risquez que vos données non-OS au lieu de votre
		OS. Cela veut dire que si votre mise à jour échoue, vous pourrez toujours
		démarrer votre ordinateur mais vous ne verrez plus vos données sur vos
		partitions RAID. En outre, vous avez la souplesse de charger et décharger le
		pilote propriétaire Promise (<filename>ft.o</filename>). Toutefois, il n'est
		pas garanti que cela marche sans à-coups car le pilote Promise Technology a
		beaucoup de problèmes.
	</para>

	<para>
		À moins que Promise Technology ne fournisse des pilotes appropriés à la
		nouvelle version du noyau, SVP n'essayez pas de mettre à jour le noyau par
		une autre méthode. Vous êtes bloqué au noyau 2.4.18-3. Il vous faudra
		peut-être ajouter l'<emphasis>Append Line</emphasis> comme vu à la
		<link linkend="determine">Section 7.2</link> pour démarrer votre ordinateur
		dans certains cas.
	</para>

</sect2>


<sect2 id="case3">
	<title>Pilote Linux natif (ataraid) avec OS sur RAID miroir</title>

	<para>
		Vous pouvez mettre à jour votre noyau à n'importe quelle version supérieure
		à la 2.4.18 en recompilant celui-ci mais pas par une mise à jour automatique
		utilisant les utilitaires <command>up2date</command> ou
		<command>rpm</command>. Vous avez besoin du fichier
		<filename>.config</filename> de votre précédent noyau situé dans le
		répertoire des sources du noyau
		(<filename>/usr/src/linux-2.4.18/.config</filename>). Vous avez sauvegardé
		votre fichier <filename>.config</filename> de la version 2.4.18, n'est-ce
		pas&nbsp;?
	</para>

	<para>
		Après avoir copié le fichier <filename>.config</filename> dans le répertoire
		<filename>/usr/src/linux-2.4.19</filename>, vous pouvez effectuer des
		modifications en tapant la commande <command>make&nbsp;menuconfig</command>
		mais normalement vous ne devriez pas avoir besoin de faire de modifications
		car vous faites seulement une mise à jour vers la version 2.4.19 et le
		matériel de votre machine n'a pas dû changer. Mais si vous effectuez ces
		modifications en tapant la commande <command>make&nbsp;menuconfig</command>,
		n'oubliez pas d'enregistrer mais aussi de sauvegarder votre fichier
		<filename>.config</filename> modifié. Mettez ce fichier en sécurité dans
		<filename>/root</filename> ou sur une disquette. Voici les étapes&nbsp;:
	</para>

	<itemizedlist>

		<listitem>
			<para>
				Décompressez le nouveau noyau dans <filename>/usr/src</filename> et
				renommez le répertoire de tête en <filename>linux-2.4.19</filename>.
				Alors, le nouveau répertoire des sources du noyau est
				<filename>/usr/src/linux-2.4.19</filename>.
			</para>
		</listitem>

		<listitem>
			<para>
				<command>cp /root/config.txt .config</command>
			</para>
		</listitem>

		<listitem>
			<para>
				<command>make menuconfig</command>
				(Effectuez les modifications nécessaires)
			</para>
		</listitem>

		<listitem>
			<para>
				<command>cp .config /root/config-2.4.19.txt</command>
				(Sauvegarde du fichier .config dans un endroit sûr)
			</para>
		</listitem>

		<listitem>
			<para>
				<command>make dep ; make clean ; make &amp;&amp; make install</command>
				(Installation du nouveau noyau)
			</para>
		</listitem>

		<listitem>
			<para>
				<command>make modules &amp;&amp; make modules_install</command>
				(Installation des nouveaux modules du noyau)
			</para>
		</listitem>

		<listitem>
			<para>
				Éditez le fichier <filename>/etc/lilo.conf</filename> pour y ajouter
				les nouvelles lignes qui permettront de démarrer sur le nouveau noyau.
				Étiquetez le nouveau noyau <filename>linux-new</filename>. Ne changez
				pas la ligne <filename>default=</filename> et n'effacez pas les lignes
				correspondant au noyau actuel.
			</para>
		</listitem>

		<listitem>
			<para>
				<command>/sbin/lilo</command> (Activation des modifications effectuées
				dans <filename>/etc/lilo.conf</filename>)
			</para>
		</listitem>

		<listitem>
			<para>
				<command>/sbin/lilo -R linux-new</command> (Dire à LILO de considérer
				<filename>linux-new</filename> comme étant le noyau de démarrage par
				défaut, mais seulement pour une fois).
			</para>
		</listitem>

		<listitem>
			<para>
				<command>sync;sync;reboot</command> (Redémarrez et espérez que cela
				marche. Si l'ordinateur ne redémarre pas, éteignez-le, puis rallumez-le.
				Connectez-vous et investiguez pour savoir pourquoi votre nouveau noyau
				ne se charge pas.)
			</para>
		</listitem>

	</itemizedlist>



</sect2>

<sect2 id="case4">
	<title>
		Pilote Linux natif (ataraid) avec données non-OS sur RAID miroir
	</title>

	<para>
		Pour mettre à jour le noyau dans ce cas, suivez la même procédure que celle
		expliquée dans la section précédente (Pilote Linux natif (ataraid) avec OS
		sur RAID miroir). Si vous rencontrez des problèmes, vous devrez peut-être
		ajouter une ligne supplémentaire, l'<emphasis>Append Line</emphasis>, à
		votre fichier <filename>/etc/lilo.conf</filename>. Pour déterminer quelle
		est votre <emphasis>Append Line</emphasis>reportez-vous à la
		<link linkend="determine">Section 7.2</link>.
		</para>

	<para>
		De la même façon que dans les cas précédents, n'essayez pas de mettre à jour
		le noyau par une méthode automatique (utilitaires <command>up2date</command>
		ou <command>rpm</command>). Compilez manuellement et installez votre nouveau
		noyau comme expliqué dans la section précédente.
	</para>



</sect2>
</sect1>


<!-- Section8: Disabling RAID feature on Promise FastTrak -->

<sect1 id="disable">
	<title>Désactiver la possibilité RAID sur Promise FastTrak</title>

	<para>
		Si vous êtes en train de lire cette section, c'est sans doute parce que vous
		en avez marre de ce RAID bidouillé (formellement connu comme RAID quasi
		matériel) fourni par la carte Promise Technology FastTrak ou le contrôleur
		de votre carte mère.
	</para>

<sect2 id="discase1">
	<title>Cas n°1&nbsp;: OS n'utilisant pas le RAID</title>

	<para>
		Il est possible de désactiver le RAID et d'utiliser le contrôleur Promise
		FastTrak comme un contrôleur IDE normal. C'est très simple. Suivez les
		étapes décrites ci-dessous&nbsp;:
	</para>

		<orderedlist>

			<listitem>
				<para>
					Déterminez votre <emphasis>Append Line</emphasis>. Consultez la
					<link linkend="determine">Section 7.2</link> pour cela.
				</para>
			</listitem>

			<listitem>
				<para>
					Modifiez <filename>/etc/lilo.conf</filename> pour y inclure
					<filename>append="</filename><emphasis>Append Line</emphasis>
					<filename>"</filename> dans la section de votre noyau actuel.
					Consultez à nouveau la <link linkend="determine">Section 7.2</link>
					pour plus de détails.
				</para>
			</listitem>

			<listitem>
				<para>
					Tapez la commande <command>/sbin/lilo</command> et redémarrez.
				</para>
			</listitem>

		</orderedlist>

	<para>
		À présent, vous pouvez voir vos deux disques séparément et les utiliser
		ainsi. Si préalablement vous aviez des partitions sur le RAID miroir, vous
		verrez alors les partitions correspondantes sur chacun des deux disques qui
		appartenaient au RAID. Vous verrez également les données qui avaient été
		stockées sur le RAID miroir.
	</para>

</sect2>

<sect2 id="discase2">
	<title>Cas n°2&nbsp;: OS utilisant le RAID</title>

	<para>
		Si vous souhaitez désactiver le RAID sur un ordinateur Linux qui utilisait
		le RAID miroir pour des partitions telles que <filename>/</filename>,
		<filename>/boot</filename>, <filename>/usr</filename>,
		<emphasis>etc</emphasis>., alors tout d'abord, effectuez une sauvegarde de
		vos données en incluant <filename>/usr/src/linux/.config</filename>,
		<filename>/etc/fstab</filename>, <filename>/boot/vmlinux</filename>. Arrêtez
		votre ordinateur, puis remettez-le en marche. À l'invite
		<prompt>boot:</prompt>, tapez <command>linux</command> suivi de
		l'<emphasis>Append Line</emphasis>. Si votre ordinateur ne démarre pas
		correctement, alors introduisez votre disquette de secours dans le lecteur,
		démarrez sur cette disquette et tapez à l'invite <prompt>boot:</prompt>
		<command>linux</command> suivi de l'<emphasis>Append Line</emphasis>. Si
		vous n'arrivez toujours pas à redémarrer, alors vous ne pouvez pas
		désactiver le RAID non destructivement, ce qui veut dire que vous allez
		devoir démarrer sur le CD 1 de Red Hat et réinstaller Linux, à nouveau en
		tapant <command>linux</command> suivi de l'<emphasis>Append Line</emphasis>
		à l'invite <prompt>boot:</prompt>.
	</para>

	<para>
		Si votre machine Linux démarre correctement, vérifiez alors que toutes les
		données sont accessibles et valides. Assurez-vous que les fichiers situés
		dans <filename>/boot</filename> ne sont pas corrompus. Dans certains cas,
		les fichiers de configuration ASCII dans <filename>/boot</filename> et les
		fichiers binaires LILO peuvent être corrompus. Si cela vous arrive, vous
		devrez alors les restaurer à partir de la sauvegarde ou bien reconfigurer
		<filename>/etc/lilo.conf</filename>, lancer <command>/sbin/lilo</command> et
		recompiler et réinstaller le noyau (recompiler avec un fichier
		<filename>.config</filename> non modifié, <emphasis>c.-à-d.</emphasis>, sans
		le support Promise RAID).
	</para>

	<para>
		Si votre machine Linux redémarre et que tous vos fichiers sont sains et
		saufs, alors ajoutez l'<emphasis>Append Line</emphasis> à
		<filename>/etc/lilo.conf</filename>, lancez <command>/sbin/lilo</command>
		et redémarrez.
	</para>

	<para>
		Si vous désactivez le RAID sur des disques OS, et que plus tard vous
		changiez d'avis, alors vous devrez effectuer une sauvegarde de vos données
		et réinstaller Linux. Si vous changiez d'avis en cours et souhaitiez revenir
		au RAID sur vos disques OS, vous devrez alors sacrifier vos données
		courantes.
	</para>


</sect2>
</sect1>


<!-- Section9: Tips and Important Notes -->

<sect1 id="tips">
	<title>Astuces et notes importantes</title>

	<itemizedlist>

		<listitem>
			<para>
				En aucun cas vous ne devez utiliser GNOME ou KDE ou tout autre système
				X Window pour achever l'installation RAID comme décrite plus haut.
				Travaillez sur un simple terminal texte.
			</para>
		</listitem>

		<listitem>
			<para>
				Vous pouvez utiliser la combinaison de touches
				<keycombo action="simul"><keycap>CTRL</keycap><keycap>ALT</keycap><keycap>Fj</keycap></keycombo>
				pour basculer vers le terminal <filename>ttyj</filename> où <filename>j=1,2,..6</filename>.
			</para>
		</listitem>

		<listitem>
			<para>
				Si vous souhaitez utiliser GNOME ou KDE ou tout autre système X Window,
				celui-ci tourne sur <filename>tty7</filename> auquel vous pouvez
				accéder par la combinaison de touches
				<keycombo action="simul"><keycap>CTRL</keycap><keycap>ALT</keycap><keycap>F7</keycap></keycombo>.
			</para>
		</listitem>

		<listitem>
			<para>
				Si vous décidez d'utiliser le pilote d'émulation SCSI fourni par
				Promise pour le RAID FastTrak, sachez que vous êtes bloqué par défaut
				au noyau 2.4.18-3. En effet, aucun fichier source du code pour
				FastTrak n'est disponible.
			</para>
		</listitem>

		<listitem>
			<para>
				Pendant l'installation de la Red Hat, choisissez uniquement les types
				de fichiers ext3 et swap.
			</para>
		</listitem>

		<listitem>
			<para>
				Si vous choisissez de retirer l'émulation SCSI Promise et de
				configurer le RAID Linux natif, sachez que Linux vous laisse
				accéder aux disques durs par leur numéro de mineur
				<filename>d0</filename> ou aux disques seuls eux-mêmes
				<filename>hde2</filename>, <filename>hdg3</filename> etc. Il est très
				important que vous n'accédiez <emphasis role="strong">JAMAIS</emphasis>
				aux disques durs directement par leur nom, mais seulement à la partition
				miroir correspondante.
				Par exemple, utilisez <filename>/dev/ataraid/d0p3</filename> au lieu de
				<filename>/dev/hde3</filename> ou <filename>/dev/hdg3</filename>.
			</para>
		</listitem>

	</itemizedlist>

</sect1>


<!-- Section10: For more information -->

<sect1 id="moreinfo">
	<title>Pour plus d'informations</title>

	<para>
		Pour plus d'informations, allez voir SVP les ressources suivantes&nbsp;:
	</para>


	<itemizedlist>

		<listitem>
			<para>
				Quasi-mini-howto à <ulink url="http://www.geocities.com/ender7007/"></ulink>
			</para>
		</listitem>

		<listitem>
			<para>
				La page produit du LhD (Linux Hardware Database) à
				<ulink url="http://lhd.datapower.com/db/dispproduct.cgi?DISP?2751"></ulink>.
				Vous pouvez également aller à la
				<ulink url="http://lhd.datapower.com">Page principale du LhD</ulink>
				et rechercher «&nbsp;Promise FastTrak&nbsp;».
			</para>
		</listitem>

		<listitem>
			<para>
				Le <ulink url="http://people.redhat.com/arjanv/pdcraid/ataraidhowto.html">document
				d'aide RAID ATA</ulink> par Red Hat Inc.
				Vous pouvez également rejoindre leur
				<ulink url="https://listman.redhat.com/mailman/listinfo/ataraid-list">liste
				de diffusion ataraid</ulink>,
				ou tout au moins effectuer une recherche sur
				l'<ulink url="https://listman/pipermail/ataraid-list">archive
				de la liste de diffusion</ulink>.
			</para>
		</listitem>

		<listitem>
			<para>
				Le site web du support de Promise Technology à
				<ulink url="http://support.promise.com">http://support.promise.com</ulink>.
				Allez voir aussi
				<ulink url="http://www.promise.com/support/linux_eng.asp">cette page</ulink>.
			</para>
		</listitem>

		<listitem>
			<para>
				Une aide Promise FastTrak pour la Linux Mandrake est disponible à
				<ulink url="http://www.magic-lamp.org">http://www.magic-lamp.org</ulink>
			</para>
		</listitem>

	</itemizedlist>


</sect1>

<appendix id="app1">
	<title>Comment ce document est généré</title>

	<para>
		Vous voudriez savoir comment j'ai généré ce guide pratique&nbsp;? Ou bien
		vous avez téléchargé la version SGML de ce document, modifié des morceaux et
		vous voudriez maintenant savoir comment vous pourriez fabriquer le guide
		pratique&nbsp;?
	</para>

	<para>
		Je dois m'assurer qu'il n'y a pas d'erreurs dans mon source SGML en tapant
		la commande <command>nsgmls -s ataraid.sgml</command>. J'ai créé un script
		appellé <filename>makehowto</filename> et lancé la commande
		<command>./makehowto ataraid.sgml</command>. Voici mon script
		<filename>makehowto</filename>&nbsp;:
	</para>

	<screen>
#!/bin/bash
#
# makehowto by Murty Rompalli
# (c) All Rights Reserved
# Free for non commercial use. All other uses must be authorized explicitly
# by the creator. Contact me for more info. murty@solar.m u r t y.net
#

function maketut() {
echo;echo Creating Tutorial Files ...
jade \
    -t sgml \
    -d /usr/lib/sgml/stylesheets/nwalsh-modular/html/ldp.dsl\#html \
    $1.sgml
}

function makehtml {
echo;echo Creating html file: $1.html ...
jade \
    -t sgml \
    -d /usr/lib/sgml/stylesheets/nwalsh-modular/html/docbook.dsl \
    -V nochunks \
    $1.sgml > $1.html
}

function maketxt {
	if [ -f $1.html ]
	then
		echo;echo Creating text file: $1.txt ...
		lynx -dump $1.html > $1.txt
	else
		echo;echo $1.html not found, creating ...
		makehtml $1
		maketxt $1
	fi
}

function makepdf {
	[ -f $1.ps ] &amp;&amp; gzip $1.ps

	if [ -f $1.ps.gz ]
	then
		echo;echo Creating pdf file: $1.pdf ...
		gzip -dc $1.ps.gz |
		gs -q -dNOPAUSE -dBATCH -sDEVICE=pdfwrite -sOutputFile=$1.pdf -
	else
		echo;echo $1.ps.gz not found creating ...
		makeps $1
		makepdf $1
	fi
}

function maketex {
echo;echo Creating TeX file $1.tex ...
jade \
    -t tex \
    -d /usr/lib/sgml/stylesheets/cygnus-both.dsl\#print \
    $1.sgml
gzip $1.tex
echo $1.tex gzipped to $1.tex.gz
}

function makedvi {
echo;echo Creating DVI file $1.dvi ...
db2dvi $1.sgml  >/dev/null 2>&amp;1
echo See $1.log for errors
gzip $1.dvi
echo $1.dvi gzipped to $1.dvi.gz
}

function makeps {
echo;echo Creating PS file $1.ps ...
db2ps $1.sgml  >/dev/null 2>&amp;1
echo See $1.log for errors
gzip $1.ps
echo $1.ps gzipped to $1.ps.gz
}

#### Begin Main Program

echo "
makehowto utility for generating HOWTO from SGML file.
(c) Murty Rompalli
"

[ x$1 = x ] &amp;&amp;
echo "Error. Usage: $0 abc.sgml '{tut|html|pdf|tex|dvi|ps|all}'

Option 'all' is default if sgml file is the only option supplied.

Options:
-------
tut	Make complete tutorial, i.e., generate necessary html files
html	Make a printable single HTML file
pdf	Make a PDF file
tex	Make a TeX source file, gzipped
dvi	Make a DVI file, gzipped
ps	Make a PostScript file, gzipped
all	Generate all possible formats.

" &amp;&amp; exit

file="`echo $1|sed 's/\.sgml$//'`"

[ x$file = x ] &amp;&amp;
echo Error. Usage: $0 abc.sgml '{tut|html|tex|dvi|ps|all}' &amp;&amp; exit

[ -f $file.sgml ] || {
echo Error. $file.sgml does not exist
exit
}

[ -r $file.sgml ] || {
echo Error. $file.sgml not readable
exit
}

if [ x$2 = x ]
then
	action=all
else
	action=$2
fi

case $action in
tut|tutorial) maketut $file
		;;
html|htm) makehtml $file
		;;
tex|latex) maketex $file
		;;
dvi) makedvi $file
		;;
ps) makeps $file
		;;
text|txt) maketxt $file
		;;
pdf) makepdf $file
		;;
all) 	maketut $file
	makehtml $file
	maketex $file
	makedvi $file
	makeps $file
	maketxt $file
	makepdf $file
	;;
*) echo error
	;;
esac

\rm -f $file.aux
\rm -f $file.tex
\rm -f $file.dvi

echo;echo makehowto: Finished
echo You can review $file.log and delete it.
echo Thank you for using makehowto.
echo</screen>

	<para>
		Vous pouvez taper seulement la commande
		<command>./makehowto ataraid.sgml pdf</command>, par exemple, si vous voulez
		ne fabriquer que la version PDF. Tapez seulement <command>./makehowto</command>
		pour obtenir plus d'aide sur l'utilisation du script.
		<ulink url="http://www.murty.net/ataraid/files/makehowto">Cliquez ici</ulink>
		pour télécharger ce script howto.
	</para>



</appendix>

<appendix id="app2">
	<title>
		Qu'en est-il si vous avez un RAID HighPoint HPT à la place d'un Promise
		FastTrak&nbsp;?
	</title>
	<para>
		Si votre ordinateur a un RAID HighPoint HPT à la place d'un RAID Promise
		FastTrak, vous pouvez suivre ce document avec quelques modifications&nbsp;:
	</para>

	<itemizedlist>

		<listitem>
			<para>
				En premier lieu, vous devez installer Red Hat en utilisant le pilote
				propriétaire fourni par HighPoint. Pour faire cela, au lieu de suivre
				le chapitre 5, téléchargez le pilote HighPoint HPT à partir de la
				<ulink url="http://www.highpoint-tech.com/drivers.htm">page de support
				HighPoint</ulink> et suivez la documentation fournie avec le fichier
				du pilote. Si cela ne fonctionne pas, récupérez le pilote auprès du
				fabriquant de votre carte mère et suivez la procédure d'installation
				Linux fournie pour votre carte mère.
			</para>
		</listitem>

		<listitem>
			<para>
				Si l'étape précédente a été franchie aves succès, vous disposez d'une
				machine avec Linux qui utilise le pilote RAID émulé SCSI fourni par
				HighPoint ou par le fabriquant de votre carte mère. À présent, si vous
				souhaitez vous débarrasser de ce RAID bidouillé et le convertir en
				RAID Linux natif&nbsp;:
			</para>

			<itemizedlist>

				<listitem>
					<para>
						Suivez les étapes 1 et 2 du
						<link linkend="nativeraid">chapitre 6</link>
					</para>
				</listitem>

				<listitem>
					<para>Activez statiquement dans le noyau tout ce qui suit (PAS
					sous forme de modules)&nbsp;:</para>
					<screen>
  Code maturity level options ---&gt;
    [*] Prompt for development and/or incomplete code/drivers
  ATA/IDE/MFM/RLL Support ---&gt;
  &lt;*&gt; ATA/IDE/MFM/RLL Support
  IDE/ATA/ATAPI Block Devices ---&gt;
  &lt;*&gt;    Enhanced ATA/IDE/MFM/RLL disk/cdrom/tape/floppy support
  &lt;*&gt;        Include IDE/ATA-2 Disk Support
  [*]            Use multi-mode by default
  &lt;*&gt;        Include IDE/ATAPI CDROM support
  [*]        Generic PCI IDE chipset support
  [*]            Sharing PCI IDE interrupt support
  [*]            Generic PCI Bus master DMA support
  [*]                Use PCI DMA by default when available
  [*]            HPT34X chipset support
  [*]            HPT366/368/370 chipset support
  [*]            Intel PIIXn chipset support
  [*]                PIIXn tuning support
  [*]            VIA 82CXXX chipset support
  &lt;*&gt;    Support for IDE RAID controllers
  &lt;*&gt;        Highpoint 370 software RAID</screen>
				</listitem>

				<listitem>
					<para>
						Allez à l'<link linkend="tag1">étape 4 dans le chapitre 6</link>.
						Suivez l'étape 4 et tout ce qui vient après l'étape 4
						dans ce chapitre.
					</para>
				</listitem>

			</itemizedlist>
		</listitem>
	</itemizedlist>

	<para>
		Si vous voulez mettre à jour le noyau, installer sur un système existant,
		<emphasis>etc.</emphasis>, vous pouvez suivre ensuite le
		<link linkend="existing">chapitre 7</link> et tous ceux qui le suivent dans
		ce document.
	</para>

</appendix>

<!-- END -->

</article>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:nil
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->

