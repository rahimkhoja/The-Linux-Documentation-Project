<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook V4.1//EN" [
<!ENTITY BA "<command>BOOT_ADMIN</command>">
<!ENTITY D "Debian">
<!ENTITY PA "PA-RISC">
]>
<article id="index" lang="fr">
<articleinfo>
   <title>&PA;/Linux Boot HOWTO</title>
   
	<author>
		<firstname>Deb</firstname>
		<surname>Richardson</surname>
	<affiliation>
		<orgname>The Puffin Group</orgname>
	<address>
		<email>deb@thepuffingroup.com</email>
	</address>
	</affiliation>
	</author>

	<author>
		<firstname>Thomas</firstname>
		<surname>Marteau</surname>
	<affiliation>
		<orgname>ESIEE</orgname>
	<address>
		<email>marteaut@tuxfamily.org</email>
	</address>
	</affiliation>
	</author>

   <revhistory>
      <revision>
         <revnumber>0.9</revnumber>
         <date>15 janvier 2002</date>
         <authorinitials>tm</authorinitials>
	 <revremark>
	 Cette version vous apporte quelques conseils utiles pour obtenir votre propre noyau sur les systèmes hppa.
	 </revremark>
      </revision>
      <revision>
         <revnumber>0.8</revnumber>
         <date>17 octobre 2001</date>
         <authorinitials>tm</authorinitials>
	 <revremark>
	 Cette version prend en compte le changement de nom des sites officiels FTP et CVS et modifie la licence.
	 </revremark>
      </revision>
	<revision>
         <revnumber>0.7</revnumber>
         <date>13 octobre 2001</date>
         <authorinitials>tm</authorinitials>
	 <revremark>
	 Cette version s'adapte au progrès de PA/Linux.
	 </revremark>
      </revision>
	<revision>
         <revnumber>0.6 draft</revnumber>
         <date>26 septembre 2001</date>
         <authorinitials>tm</authorinitials>
	 <revremark>
	 Cette version contient des modifications mineures et complète la section "Utiliser bootp/tftpd".
	 </revremark>
      </revision>
      <revision>
         <revnumber>0.5 draft</revnumber>
         <date>3 août 2001</date>
         <authorinitials>tm</authorinitials>
	 <revremark>
	 Cette version est une mise à jour majeure du papier de Deb.
	 </revremark>
      </revision>
      <revision>
         <revnumber>0.3 draft</revnumber>
         <date>24 novembre 1999</date>
         <authorinitials>dlr</authorinitials>
	 <revremark>
	 Voici la première version publiée du manuel.
	 </revremark>
      </revision>
   </revhistory>
<abstract>
<para>
Ce document explique les procédures pour obtenir un noyau issu du développementde &PA;/Linux fonctionnant sur votre système &PA;. Il vous montre aussi les fonctionnalités de PALO, le chargeur de noyau pour PA/Linux. Vous y trouverez de nombreuses informations pour compiler un noyau depuis le code source disponible sur <ulink url="http://cvs.parisc-linux.org/">http://cvs.parisc-linux.org/</ulink>. Remarquez que cette version est basée sur le travail de Deb Richardson. Elle actualise certaines informations rendues obsolètes par les avancées du portage. Cependant, je dois dire que ce manuel conserve des textes de cette version et j'ai dévoilé quelques parties commentées à l'époque de Deb. 
</para>

<para>
Si vous cherchez des informations liées au matériel HP mais pas directement liées au &PA;, veuillez lire <ulink url="http://www.linuxdoc.org/HOWTO/HP-HOWTO/index.html">HP-HOWTO de Bruno Cornec</ulink>.
</para>

<para>
Pour plus d'informations sur le projet de portage de &PA;/Linux, veuillez visiter <ulink url="http://www.parisc-linux.org/">http://www.parisc-linux.org/</ulink>. Ce site officiel détaille le développement et les améliorations du noyau. Pour l'espace utilisateur, veuillez vous référer aux <ulink url="http://www.debian.org/ports/hppa/index.html">pages Debian sur le portage</ulink>.
</para>
</abstract>

</articleinfo>


<sect1 id="copyright">
<title>Copyright and Licensing</title>
<para>
<literallayout>
Copyright &copy; 2001-2002 Thomas Marteau.
Copyright &copy; 1999 The Puffin Group et Deb Richardson.
</literallayout>La copie, la distribution et/ou la modification de ce texte est possible sous 
les conditions développées par la 
<ulink url="http://cesarx.free.fr/gfdlf.html">Licence de documentation 
libre GNU</ulink>, Version 1.1 ou supérieure publiée par la Free Software 
Foundation. Une copie de cette licence est disponible. 
<ulink url="http://www.gnu.org/copyleft/fdl.html">http://www.gnu.org/copyleft/fdl.html</ulink>. Ce document n'a pas de section inaltérable ni de page de 
couverture.
</para>
</sect1>

<sect1 id="hardware">
<title>Matériel supporté</title>
<para>
En produisant la version 0.9.3 de PA/Linux, le support matériel a connu une grande amélioration tant en qualité qu'en quantité. C'est pourquoi même si votre modèle n'est pas listée, il faut l'essayer et rapporter le résultat à la <ulink url="mailto:parisc-linux@lists.parisc-linux.org">liste de diffusion</ulink>. Les machines &PA; suivantes peuvent fonctionner comme n'importe quelle machines d'une architecture différente. Cette liste peut changer à tout moment. La meilleure manière d'obtenir une liste à jour est d'aller voir <ulink url="http://pateam.esiee.fr/list.html">http://pateam.esiee.fr/list.html</ulink>. À cet endroit, vous saurez si votre matériel a été rapporté comme fonctionnel et comment. Par exemple, il est stipulé si vous pouvez utiliser PA/Linux <emphasis>via</emphasis> la carte graphique ou bien <emphasis>via</emphasis> une console Série. Vous trouverez tout ce dont vous avez besoin là-bas comme les mises à jour de votre microprogramme aussi connu sous le terme de <emphasis>firmware</emphasis>.
</para>

<itemizedlist>
<listitem><para>
Tous les modèles 712. Vous pouvez utiliser X via le périphérique de mémoire vidéo, <emphasis>framebuffer</emphasis>&nbsp;;
</para></listitem>

<listitem><para>
Tous les modèles 715 incluant la série Strider&nbsp;;
</para></listitem>


<listitem><para>
Les modèles 710, 720, 730, 750 devraient fonctionner avec la dernière ISO. Elle comprend des modifications, surtout pour les disques durs&nbsp;;
</para></listitem>

<listitem><para>
Certains modèles 725, 735, 755 fonctionnent avec les dernières versions du source. Mais, vu qu'il n'y a pas beaucoup de résultats fournis par les utilisateurs de telles machines, il est difficile d'en dire plus&nbsp;;
</para></listitem>

<listitem><para>
A180C et similaires&nbsp;;
</para></listitem>

<listitem><para>
A500 et similaires&nbsp;;
</para></listitem>

<listitem><para>
Les modèles BXXX comme B132, B180. Ces machines peuvent être utilisées avec une mémoire vidéo <emphasis>via Standard Text Interface</emphasis>&nbsp;;
</para></listitem>

<listitem><para>
Les modèles CXXX comme C110, C160&nbsp;;
</para></listitem>

<listitem><para>
Les modèles CXXXX fonctionnent avec les périphériques d'entrées/sorties liés au premier IOMMU&nbsp;;
</para></listitem>

<listitem><para>
La class D fonctionne normalement. Cependant, beaucoup de variantes de ce modèle existent. Par conséquent, il est difficile de généraliser&nbsp;;
</para></listitem>

<listitem><para>
La classe J est équivalent aux modèles CXXXX avec les multi-processeurs en plus. Donc, on peut dire la même chose que pour les CXXXX&nbsp;;
</para></listitem>

<listitem><para>
L1000 et L2000.
</para></listitem>

</itemizedlist>

<para>
Le matériel suivant devraient fonctionner dans le futur:
</para>

<itemizedlist>
<listitem><para>
Le modèle L3000&nbsp;;
</para></listitem>

<listitem><para>
La classe N&nbsp;;
</para></listitem>

<listitem><para>
La classe SuperDome.
</para></listitem>
</itemizedlist>

<para>
Cette liste indique le matériel qui ne sera pas opérationnel:
</para>

<itemizedlist>

<listitem><para>
Les très vieux modèles comme les 705&nbsp;;
</para></listitem>

<listitem><para>
Les classes E,F,G,H et I. Il semble que Christoph Plattner a réussi à faire fonctionner son E55&nbsp;;
</para></listitem>

<listitem><para>
Les classes T et V.
</para></listitem>

</itemizedlist>
</sect1>

<sect1 id="preparation">
<title>Préparer le démarrage</title>
<para>Comme tout autre machine, les systèmes à base de processeur &PA; ont plusieurs étapes à effectuer afin de fonctionner. Tout d'abord, vous devez paramétrer correctement votre matériel. Ensuite, vous devez démarrer une première fois pour lancer le processus d'installtion. Une fois le noyau est mis en place, vous pouvez redémarrer pour installer le reste de votre système de fichiers. À ce point, votre système est installé et opérationnel. Ce document est séparé en plusieurs parties correspondant à chacune de ces étapes.</para>
<para>Cette première section introduit quelques paramètres liés au matériel HP configurables <emphasis>via</emphasis> HP &BA;.</para>
<sect2 id="consoles">
<title>Consoles</title>

<para>Pour démarrer votre système &PA; avec un noyau PA/Linux, vous devez d'abord avoir une console sur ce système. Elle peut être graphique. Un moniteur devra être connecté à la machine. Si vous optez pour la console série, il vous faut l'équipement adéquat comme une seconde machine qui récupère par un cable croisé ce qu'émet le port série.</para>
<para>Pour la console graphique, vous devez être sûr que Linux supporte la carte graphique de votre système. De plus, il existe deux façons d'obtenir la console graphique. Si vous pensez faire un rapport de bogue pour ce genre de souci, vous devez différencier les deux types. Tout d'abord, la console STI est le mode texte classique vidéo comme pour votre PC par exemple. Le nom est dû au fait que chaque machine HP possède une interface standard pour l'affichage de texte appelée <emphasis>Standard Text Interface</emphasis> qui fournit les fonctions de base pour accéder à la mémoire vidéo. Le second mode graphique de la console est celui de la console <emphasis>framebuffer</emphasis>. En fait, lors du démarrage, vous verrez un pengouin apparaître en haut à gauche de votre écran. Ceci est la méthode la plus simple pour différencier les deux modes graphiques. La console série est la meilleure méthode si vous désirez poster un rapport de bogue complet. Elle vous permet même d'avoir la sortie alors que vous êtes dans &BA;. La plupart de serveurs sont utilisables qu'avec la console série.</para>

<para>Si vous avez un moniteur pour votre machine &PA;, la méthode la plus conviviale est le mode graphique. Si vous rencontrez des soucis, passez en console série.</para>

<sect3 id="graphicsconsole">
<title>Utiliser une console graphique</title>

<para>Utiliser une console graphique est juste une autre manière de dire «Utiliser l'écran relié à la machine». Si vous possédez un moniteur pour votre machine &PA;, vous devriez être capable d'interagir via la console avec cet écran sans trop de modification et sans avoir à configurer une console série.</para>

<para>Naturellement, si vous pouvez utiliser une console graphique, c'est le meilleur choix à faire. Cependant, vérifiez que votre matériel le supporte.</para>

</sect3>

<sect3 id="serialconsole">
<title>Utiliser une console série</title>
<para>Vous devriez utiliser une console série si vous n'avez pas d'écran disponible ou que votre machine ne peut pas accéder à l'un des modes graphiques. Aussi, le noyau ne gère pas certains types de matériel pour l'instant. Si vous devez mettre en place une console série, suivez les indications suivantes.</para>

<sect4 id="cable">
<title>Cable série</title>
<para>Pour connecter votre machine &PA; à votre PC afin de pouvoir démarrer le système en utilisant une console, vous avez besoin d'un cable null-modem 9 pin vers 9 pin femelle. Un tel cable est vendu dans tout bon magasin d'équipement informatique. Bien que vous puissiez connecter l'autre extrémité du cable à un terminal, il est conseillé de le brancher sur une machine qui exécute <command>minicom</command> pour avoir tous les messages et pouvoir les copier/coller dans un fichier pour compléter un rapport de bogue parfait.</para>
</sect4>

<sect4 id="minicom">
<title>Configurer <command>minicom</command> pour Linux</title>
<para>Pour communiquer avec votre machine &PA; par ce procédé, vous devez mettre en place le mode console série et configurer un programme qui vous permettra d'utiliser le port série comme un terminal. Nous recommandons <command>minicom</command>, qui est disponible dans la plupart des distributions Linux par défaut. Si <command>minicom</command> n'est pas présent sur votre système,vous trouverez la plus récente version du paquet sur n'importe quel grand sites de logiciels liés à Linux.</para>

<para>La plupart de la configuration de <command>minicom</command> est dépendant des systèmes utilisés. Cependant, soyez sûrs que:</para>

<orderedlist numeration="loweralpha">
<listitem><para>le taux de transfert doit être de 9600</para></listitem>
<listitem><para>la parité doit être 8-N-1</para></listitem>
</orderedlist>

<para>Ne vous inquiétez car les valeurs par défaut correspondent au matériel &PA;. Si vous avez un PC, vous aurez probablement besoin de changer le taux de transfert mais il semble que les machines &PA; apprécient cette configuration.</para>

</sect4>

<sect4 id="switchingconsoles">
<title>Changer de console</title>
<para>Avant de pouvoir utiliser la connexion série entre la machine Linux et celle &PA;, vous devez changer le mode de la console au niveau du système &PA;.</para>

<para>Le mode de la console par défaut est <literal>graphic_1</literal>. Pour changer cela, suivez les instructions ci-dessous:
</para>

<orderedlist numeration="arabic">
<listitem>
<para>Allumez votre machine &PA;&nbsp;;</para>
</listitem>

<listitem>
<para>Lors du démarrage, le message suivant devrait apparaître:</para>

<programlisting>
Searching for Potential Boot Devices.
To terminate search, press and hold the ESCAPE key.
</programlisting>

<para>Quand ce message apparaît, appuyez et maintenez enfoncée la touche <keycap>Echap</keycap> jusqu'à l'apparition du menu Options.</para>
</listitem>

<listitem>
<para>Par défaut, vous obtenez la console &BA;. Sur certaines 715, le menu Otpions aura cet aspect:</para>

<programlisting>
b)    Boot from specified device
s)    Search for bootable devices
a)    Enter Boot Administration mode
x)    Exit and continue boot sequence
?)    Help

Select from menu: 
</programlisting>

<para>Choississez "a)  Enter Boot Administration mode". Vous atteindrez le prompt "<computeroutput>BOOT_ADMIN></computeroutput>". Tout le reste est à faire en mode &BA;. Maintenant, tout le monde est dans la console &BA;&nbsp;!</para>
</listitem>
</orderedlist>

<sect5>
<title>Vérifier le mode console actuel</title>
<para>Tapez: <command>path console</command> pour voir quel mode console est utilisé par la machine en ce moment.</para>

<para>Si vous êtes en mode graphique, vous lirez "<computeroutput>Console path     = graphic_1</computeroutput>".</para>

<para>Si vous êtes en mode série, vous lirez "<computeroutput>Console path    = rs232_a.9600.8.none</computeroutput>" ou quelque chose de similaire.</para>

<note><para>Remarquez que certains modèles, vous pouvez trouver de petites différences mais l'idée générale reste la même. Si vous désirez plus de descriptions, écrivez-moi un courriel avec le type de machine vous avez et la sortie écran que vous avez.</para></note>

</sect5>

<sect5>
<title>Changer pour le mode série</title>
<para>Pour obtenir le mode console série, tapez la commande suivante dans le prompt &BA;:</para>

<para><command>path console rs232_a.9600.8.none</command></para>

<para>Pour vérifier si la modification a été prise en compte, tapez <command>path console</command>. Vous devriez lire <computeroutput>Console path    = rs232_a.9600.8.none</computeroutput>, indiquant que le système est configuré pour démarrer en mode console série. Par défaut, <command>reset</command> redémarrera le système avec les modifications.</para>
</sect5>

<sect5>
<title>Comment obtenir la console série de démarrage sur 712&nbsp;?</title>
<para>Malheureusement, cale n'est pas possbile. Bien que les 712 sont configurées pour le développement en interne chez HP pour utiliser la console série, cette option n'est pas possible sur le terrain. Vous n'avez que la console graphique mais si vous désirez réellement avoir la console série, regardez <ulink url="http://lists.parisc-linux.org/pipermail/parisc-linux/1999-December/008117.html">les archives de la liste de diffusion de PA/Linux</ulink> pour plus d'informations. Mais, vraiment pourquoi utiliser une belle 712 avec une console série alors que vous pouvez avoir X&nbsp;!</para>
</sect5>

<sect5>
<title>Changer pour le mode graphique</title>
<para>C'est l'opération opposée de celle ci-dessus. En vérifiant votre chemin de console, vous devez lire<computeroutput>Console path    = rs232_a.9600.8.none</computeroutput>. Maintenant, vous devez mettre en place le mode graphique <emphasis>via</emphasis> &BA;.</para>

<para><command>path console graphic_1</command></para>

<para>Vous devriez avoir à l'écran une image après la commande <command>reset</command>. Si l'écran n'a pas l'air de fonctionner, essayez d'appuyer sur la touche <keycap>Tab</keycap> pour changer la résolution de votre écran. Appuyant de nouveau sur cette touche, le moniteur basculera vers la résolution supérieure. Il faudra peut-être répéter cette opération plusieurs fois pour être totalement satisfait. Ce point est aussi vrai si vous changez de moniteur.</para>
</sect5>

</sect4>
</sect3>
</sect2>

<sect2 id="bootnetwork">
<title>Preparer à démarrer depuis le réseau</title>
<para>Cette méthode pour démarrer une machine était plus utilisée dans les phases initiales de développement mais elle reste dans certains la seule manière possible. Maintenant, le démarrage avec le support réseau n'est plus nécessaire sauf dans certains cas spécifiques. C'est le pourquoi de cette section, d'ailleurs.</para>

<sect3>
<title><command>rbootd</command> ou <command>bootp</command>&nbsp;?</title>
<para>Tous les modèles «&nbsp;récents&nbsp;» peuvent utiliser <command>bootp</command>, incluant 715/100, 715/120, mais aussi toutes les 712.  
</para>

</sect3>

<sect3>
<title>Utiliser <command>rbootd</command></title>

<sect4>
<title>Installer <command>rbootd</command></title>

<para>Si votre machine plus ancienne nécessite <command>rbootd</command> pour démarrer <emphasis>via</emphasis> le réseau, suivez les instructions suivantes pour faire et installer un noyau &PA;/Linux et démarrer votre système ainsi.</para>

<para>Pour les plus anciennes machines, incluant les 715 Scorpio 715, <command>rbootd</command> est nécessaire.  Pour l'obtenir <command>rbootd</command>:</para>

<itemizedlist>
<listitem><para>pour toute distribution autre que &D;, vous devez récupérer cette archive <emphasis>via</emphasis> <ulink url="http://pateam.esiee.fr/download.html#deb">http://pateam.esiee.fr/download.html</ulink></para></listitem>

<listitem><para>pour &D;, il existe un paquet sur <ulink url="http://www.debian.org/Packages/stable/net/rbootd.html">http://www.debian.org/Packages/stable/net/rbootd.html</ulink></para></listitem>
</itemizedlist>

</sect4>

<sect4 id="rbootd">
<title>Configurer <command>rbootd</command></title>
<para>Par exemple, pour démarrer une 715, il faut que rbootd soit installé sur un système Linux (c'est le «&nbsp;serveur de démarrage&nbsp;») où vous entreposerez votre image du noyau &PA;/Linux que vous désirez utiliser pour démarrer votre machine &PA;.</para>

<para>Une fois installé, il faut configurer votre service <command>rbootd</command> pour qu'il soit opérationnel avec votre système &PA;:</para>

<orderedlist numeration="arabic">
<listitem><para>Dans <filename>/etc/rbootd.conf</filename>, ajoutez la ligne suivante:</para>
<para><command>ethernet addr <replaceable>bootfile</replaceable></command></para>
<para>Remplacez <replaceable>bootfile</replaceable> avec le nom de votre image noyau &PA;/Linux, généralement "<literal>lifimage</literal>".</para></listitem>

<listitem><para>Maintenant, il nous faut l'adresse ethernet de votre machine &PA; en tapant <command>lan_addr</command> dans le prompt &BA; sur votre machine &PA;.</para>
<para>Vous aurez en retour une série de chiffre similaire à <computeroutput>080009-7004b6</computeroutput>.  Notez ce chiffre à la place <replaceable>ethernet addr</replaceable>.</para></listitem>

<listitem><para>Dans <filename>/etc/rbootd.conf</filename> sur votre serveur de démarrage, l'adresse MAC doit être formatée avec «&nbsp;:&nbsp;» pour séparer chaque octet, après avoir enlever le tiret qui les unissait. Par exemple:</para>
<programlisting>080009-7004b6</programlisting>
<para>devient</para>
<programlisting>08:00:09:70:04:b6</programlisting>

<para>Ajoutez cette adresse ainsi formatée dans votre <filename>/etc/rbootd.conf</filename> sur votre serveur. Le fichier au final doit ressembler à ça:</para>
<programlisting>
# ethernet addr        boot file(s)        comments

08:00:09:87:e4:8f      lifimage_715        # PA/Linux kernel for 715/33
08:00:09:70:04:b6      lifimage_720        # PA/Linux kernel for 720
</programlisting>
<para>Cet exemple de <filename>rbootd.conf</filename> contient les adresses MAC et les images noyau pour deux différentes machines.</para>

<para>Une fois le fichier de configuration mis à jour, relancez le service <command>rbootd</command>.</para></listitem>
</orderedlist>

<para>Par défaut, <command>rbootd</command> va chercher les fichiers images dans <filename class="directory">/var/lib/rbootd/</filename>. Si vous utilisez l'archive pour les autres distributions, ce répertoire est
<filename class="directory">/export/hp/rbootd/</filename>. Ainsi, vous devrez entreposez vos images noyau amorçables dedans. Si vous avez une bonne raison de ne pas aimer ce chemin, il ne vous reste plus qu'une solution, recompiler le source.</para>

<para>Le plus facile est bien sûr de mettre l'image dans le répertoire par défaut&nbsp;!</para>
</sect4>
</sect3>

<sect3>
<title>Utiliser <command>bootp</command>/<command>tftp</command></title>

<sect4>
<title>Mettre en place <command>bootp</command>/<command>tftp</command></title>

<para>Pour les utilisateurs &D;, vous avez juste à installer les paquets correspondants <emphasis>via</emphasis> ces commandes en tant que <command>root</command>:
<programlisting>
apt-get install bootp
apt-get install tftpd
</programlisting>
</para>

<note><para>Le paquet <command>bootp</command> peut être remplacé par <command>dhcp</command>. Mais, ce manuel ne développera pas plus ce point. Pour votre information, après avoir installé le paquet <command>dhcp</command>, vous avez une section dans <filename>/etc/dhcpd.conf</filename> sur BOOTP et vous pouvez toujours essayer <command>man dhcp</command>.</para></note>

	  <para>Si vous avez besoin des paquets rpm, le meilleur conseil est d'aller visiter <ulink url="http://rpmfind.net">http://rpmfind.net</ulink>. Il semble qu'il est nécessaire de créer un utilisateur <command>nobody</command> appartenant au groupe <command>nogroup</command> pour les utilisateurs de Red Had. Les fichiers contenus dans <filename class="directory">/tftpboot/</filename> doivent lui appartenir.</para>

</sect4>

<sect4>
<title>Configurer <command>bootp</command>/<command>tftp</command></title>
<para>Utilisez les instructions suivantes pour vous servir de <command>bootp</command> sur votre serveur de démarrage:</para>

<note><para>Cette section vise les utilisateurs de &D;. Pour les autres distributions, la logique reste la même mais il existe des différences comme les répertoires par défaut. Vu que &D; maintient un paquet <command>bootp</command> à jour, il en sera question dans ce qui suit. Pour la configuration de <command>dhcp</command>, il n'est pas prévu de l'ajouter.</para></note>

<orderedlist numeration="arabic">
<listitem><para>Configurez <filename>/etc/inetd.conf</filename> sur le serveur en ajoutant ces lignes:</para>

<programlisting>
tftp            dgram   udp     wait    nobody  /usr/sbin/tcpd       /usr/sbin/in.tftpd /tftpboot
bootps          dgram   udp     wait    root    /usr/sbin/bootpd     bootpd -i -t 120
</programlisting>

<para>Ici, vous indiquez que <filename class="directory">/boot</filename> est le répertoire à utiliser pour le service <command>tftpd</command>. Ce choix est libre. Selon <command>man tftpd</command>, le répertoire par défaut est <filename class="directory">/tftpboot</filename>.</para>

<para>Une fois sauvegardé, redémarrez <command>inetd</command> avec: <command>/etc/rc.d/init.d/inetd restart</command>.</para></listitem>

<listitem><para>Selon <command>man bootptab</command>, créez un fichier <filename>/etc/bootptab</filename> contenant:</para>

<programlisting>
<replaceable>[hostname]</replaceable>:hd=/tftpboot/Image:\
                             :rp=/usr/src/parisc/:\
                             :ht=ethernet:\
                             :ha=<replaceable>[mac address]</replaceable>:\
                             :ip=<replaceable>[ip address]</replaceable>:\
                             :bf=<replaceable>[boot filename]</replaceable>:\
                             :sm=255.255.255.0:\
                             :to=7200:
</programlisting>

<para>Remplissez le champ <replaceable>[hostname]</replaceable>, <replaceable>[mac address]</replaceable> et <replaceable>[ip address]</replaceable> avec les informations appropriées:</para>

<itemizedlist>

<listitem><para>[hostname] est le nom de la machine &PA;.</para></listitem>

<listitem><para>[mac address] est l'adresse MAC de la même machine, que vous obtenez toujours en tapant <command>lan_address</command> dans le prompt <literal>BOOT_ADMIN></literal>.</para></listitem>

<listitem><para>[ip address] est l'adresse IP de la machine.</para></listitem>

<listitem><para>[boot file name] est le nom du fichier contenant l'image du noyau amorçable.</para></listitem>

</itemizedlist>

<para>Ce qui vous donne:</para>

<programlisting>
vodka:hd=/tftpboot:\
                             :rp=/usr/src/parisc/:\
                             :ht=ethernet:\
                             :ha=080069088717:\
                             :ip=140.244.9.208:\
                             :bf=lifimage:\
                             :sm=255.255.255.0:\
                             :to=7200:
</programlisting>
</listitem>
</orderedlist>
</sect4>
</sect3>

<sect3> 
<title>Démarrer votre système &PA;/Linux <emphasis>via</emphasis> le réseau et avec une console série</title> 
<para>Pour conclure cette méthode de démarrage plutôt réservée au développement, cette section décrit comment amorcer votre machine HP si vous utlisez un serveur de démarrage. Encore une fois, il est à noter que cette technique est de moins en moins utilisée. Pour une utilisation plus «&nbsp;classique&nbsp;», reportez vous directement à la partie concernant <command>PALO</command>.</para>

<para>Nous voici. C'est une liste de trucs et astuces au cas où vous désirez démarrer <emphasis>via</emphasis> le réseau. Vous avez fait tout ce qui a été décrit précédemment, votre machine de développement est lié à votre machine &PA; et vous avez une image amorçable, vous voilà fin prêt pour vous lancer&nbsp;! Si tout est bien à sa place, ces quelques lignes devraient vous permettre de voir votre machine &PA; s'amorcer sur GNU/Linux.</para> 
  
<orderedlist numeration="arabic"> 
<listitem><para>Vérifiez la connexion entre les deux machines qu'elle soit réseau et série. Cela paraît peut-être naturel mais on sait jamais, vérifiez&nbsp;!</para></listitem> 
 
<listitem><para>Démarrez <command>minicom</command> sur votre machine de développement.</para></listitem> 
 
<listitem><para>Démarrez votre machine &PA;.</para></listitem> 
 
<listitem><para>Regardez votre console de minicom. Quand le message suivant apparaît à l'écran, appuyez et maintenez enfoncé la touche <keycap>Echap</keycap> pour interrompre le démarrage de votre machine:</para> 
 
<programlisting> 
Searching for Potential Boot Devices.                                      
To terminate search, press and hold the ESCAPE key.           
</programlisting> 
</listitem> 
 
<listitem><para>Choississez "<literal>a)  Enter Boot Administration mode</literal>" dans le menu. Vous entrez dans le prompt &BA;.</para></listitem> 
 
<listitem><para>Tapez cette commande: <command>boot lan</command>.</para></listitem> 
 
<listitem><para>Regardez comment votre machine &PA; devient un système PA/Linux.Ta dah&nbsp;!</para></listitem> 
</orderedlist>
</sect3>
</sect2>
</sect1>

<sect1 id="vmlinux"> 
<title>Construire son propre noyau &PA;/Linux</title>

<para>Pour compiler un noyau Linux, vous devez avoir un compilateur C et le source de Linux. Le premier élément n'est pas trivial à trouver car tout dépend de comment vous comptez compiler le source. Le second est plus simple car pour l'instant la version la plus récente se trouve sur <ulink url="http://cvs.parisc-linux.org/">le site CVS officiel</ulink>. Tout d'abord, nous parlerons du compilateur <command>GCC</command>. Ensuite, la configuration de votre futur noyau sera abordé. Le dernier paragraphe couvrira l'installation du noyau résultant de la compilation.</para>

<sect2>
<title>Le compilateur <command>GCC</command></title>
<para>Vous pouvez compiler votre kernel avec votre machine HP. Mais, sur celles qui commencent à dater, vous préférerez sûrement utiliser une machine plus puissante pour la compilation. Regardons ces deux choix:</para>
 
<sect3> 
<title>Compilation native</title> 
<para>Vu que &D; est la seule distribution qui gère l'architecture &PA;, si vous voulez utiliser les pouvoirs de la «&nbsp;<emphasis>Super Cow</emphasis>&nbsp;», vous devez avoir quelques savoirs de base sur la gestion des paquets.</para>

<sect4>
<title><command>apt-get</command> et ses amis</title>
<para><command>apt-get</command> est un utilitaire en ligne de commande simple qui gère votre système de paquets &D;. Tout d'abord, Gustavo Noronha Silva a écrit le <ulink url="http://www.debian.org/doc/manuals/apt-howto/index.html">APT HOWTO</ulink> que je vous conseille si le sujet vous intéresse. Ici, nous voulons juste compiler un noyau. Vu que le portage hppa n'est pas encore public, vous devez être relativement prudent avec les mirroirs que vous choississez dans votre <filename>/etc/apt/sources.list</filename>. Par exemple, en Allemagne, vous pouvez utilisez ces paramètres:
<programlisting>
# non-US packages
deb http://www.ftp.uni-erlangen.de/pub/debian/ unstable/non-US main non-free contrib
# Binary packages
deb http://gluck.debian.org/debian unstable main contrib non-free
# source packages
deb-src http://gluck.debian.org/debian unstable main contrib non-free
</programlisting>
</para>
</sect4>

<sect4>
<title>mettre à jour votre <command>gcc</command></title>
<para>Si vous utilisez votre propre machine HP, vous avez besoin seulement du fameux compilateur <command>GCC</command>. Le conseil est de conserver une différence nulle entre les versions des développeurs et la vôtre. 
<programlisting>
apt-get update
apt-get upgrade
</programlisting>
Si ce n'est pas une simple mise-à-jour, les dépendances du paquet kernel-source sont les suivantes:</para>

<itemizedlist>
<listitem><para>binutils</para></listitem>
<listitem><para>fileutils</para></listitem>
<listitem><para>gcc</para></listitem>
<listitem><para>libc-dev</para></listitem>
<listitem><para>make</para></listitem>
</itemizedlist>

<para>Une fois à jour, il faut configurer votre noyau.</para>
</sect3>

<sect3>
<title>Compilation croissée</title> 
<para>Pour compiler ainsi votre kernel, tout dépend de l'architecture de la machine qui est utilisée pour la compilation. Pour les PCs, vous pouvez téléchargez un cross compilateur prêt à l'emploi sur le <ulink url="http://ftp.parisc-linux.org/x86-xcompilers/">serveur FTP de PA/Linux</ulink>. Pour les autres architectures ou si vous voulez compiler votre propre chaîne de compilation, lisez le <ulink url="http://parisc-linux.org/toolchain/PARISC-Linux-XC-HOWTO.html">HOWTO de Carlos O'Donell</ulink>.</para>
</sect3>

</sect2>

<sect2>
<title>Configuration du kernel</title>
<para>L'une des meilleures manières de gagner de la performance est d'avoir un boyau bien configuré. Pour la plateforme &PA;, <command>make oldconfig</command> est une sorte de configuration par défaut. Si vous voulez faire votre propre noyau, la première étape est de connaître votre matériel. Pour ce faire, allez voir la description de votre machine sur la <ulink url="http://hwdb.parisc-linux.org">base de données officielle du matériel</ulink> ou le <ulink url="http://partsurfer.hp.com">HP partsurfer</ulink>.</para> 
<para>Quand vous savez ce qu'il y a dans votre boîte et aussi l'utilisation de votre futur PA/Linux, lancez simplement <command>make menuconfig</command> ou une autre commande de configuration du noyau. Voilà une liste de menus que vous allez parcourir pour vérifier si votre configuration correspond à votre matériel:</para>

<itemizedlist>
<listitem><para><emphasis>Processor type</emphasis> indique le modèle de votre processeur</para></listitem>
<listitem><para><emphasis>General options</emphasis> vous informe sur ce qui est actuellement activer dans votre kernel</para></listitem>
<listitem><para><emphasis>Network device support</emphasis> contient les informations pour votre carte réseau</para></listitem>
<listitem><para><emphasis>Character devices</emphasis> montre vos entrées/sorties.</para></listitem>
<listitem><para><emphasis>Console drivers</emphasis> est directement relié à votre choix de console</para></listitem>
<listitem><para><emphasis>Sound</emphasis> active votre carte son Harmony</para></listitem>
</itemizedlist>

<para>Comme vous le voyez, les menus propres au matériel HP ne sont pas nombreux mais il existe de nombreuses dépendances entre eux. Maintenant, il faut configurer le noyau par rapport à la future utilisation de la machine. Voici une liste de menus que vous pourrez visiter pour configurer les services que vous désirez:</para>

<itemizedlist>
<listitem><para><emphasis>General setup</emphasis> détient les formats binaires exploitables</para></listitem>
<listitem><para><emphasis>Parallel port support</emphasis> vous permet d'activer ou non votre port parallèle</para></listitem>
	<listitem><para><emphasis>Block devices</emphasis> valide l'utilisation de disque mémoire aussi connu sous le terme <emphasis>ramdisk</emphasis> et du périphérique virtuel <emphasis>loopback</emphasis>. Vous en aurez sûrement pas besoin</para></listitem>
<listitem><para><emphasis>File Systems/Network File Systems</emphasis> est l'endroit pour désactiver l'utilisation de NFS</para></listitem>
</itemizedlist>

<para>
Une fois terminé, sauvegardez votre configuration. Le tout est écrit dans le fichier .config. Vous pouvez en copier une version car <command>make distclean</command> le détruit. À cette étape, vous n'avez plus qu'à laisser faire <command>make dep vmlinux</command> et si tout va bien, voilà votre nouveau kernel.</para>

</sect2>

<sect2>
<title>Installation du noyau</title> 
<para>
Si vous avez réalisé la compilation en natif, vous sauvegardez le dernier noyau opérationnel avec une extension du style «&nbsp;.bk&nbsp;» et remplacez ce noyau par celui récemment compilé avec le même nom. Redémarrez et essayez-le. Si cela ne marche pas, vous pourrez toujours démarrer sur la sauvegarde en utilisant <command>PALO</command> pour renommer le nom du noyau que vous désirez utiliser (cf le prochain chapître pour plus d'informations).</para>

<para>Si vous amorcez votre machine <emphasis>via</emphasis> le réseau, vous devez configurer <command>PALO</command> comme l'explique la prochaine section et lancer <command>make palo</command>.</para>
</sect2>
</sect1>

<sect1 id="booting">
<title>Démarrer votre machine &PA;/Linux <emphasis>via</emphasis> <command>PALO</command>, le chargeur du noyau</title>

<sect2>
<title>Qu'est ce que <command>PALO</command>&nbsp;?</title>
      <para><command>PALO</command> est deux programmes, un chargeur de noyau, qui est exécuté par le microcode HP depuis la mémoire, et un gestionnaire de démarrage, qui initialise et met à jour les périphériques amorçables tels que les disques durs. L'exécutable du chargeur de noyau PALO est conservé dans un fichier iplboot. "IPL" signifie dans le jargon HP pour <emphasis>Initial Program Loader</emphasis> pour programme de chargement initial. Le gestionnaire est appelé <command>PALO</command>, tout simplement comme pour x86 où le gestionnaire de démarrage lilo est surnommé <command>LILO</command>, cependant il est notable que PALO n'est pas à relancer à chaque fois que vous compilez un nouveau noyau, à la différence de <command>LILO</command>.</para>
</sect2>
 
<sect2>
<title>Que fait <command>PALO</command>&nbsp;?</title>
<para>L'idée principale est de permettre de démarrer un noyau en lui passant les paramètres dont il a besoin. La pratique est un peu plus compliqué que ça. En fait, PALO peut aussi transformer un fichier vmlinux classique en une image amorçable incluant une RAMDISK ou bien une redirection NFSROOT. Ce fichier est baptisé lifimage. Cependant, il peut aussi rendre démarrable un disque dur en lui spécifiant le type de console que l'on désire utiliser ainsi que le chemin vers la partion racine. Nous allons voir chacune de ces utilisations précisément. Le point important est que le fichier lifimage contient un noyau Linux amorçable et vmlinux est le noyau lui-même et il a besoin de <command>PALO</command> pour être amoçable.</para>
</sect2>

<sect2>
<title>Comment fabriquer une lifimage avec <command>RAMDISK</command>&nbsp;?</title>
<para>Le premier point est d'expliquer quand et pourquoi le faire. À une époque antérieure du projet PA/Linux, les lifimages étaient très utiles. En fait, vous les utilisez pour votre serveur de démarrage pour amorcer votre machine HP <emphasis>via</emphasis> l'instruction boot lan. L'avantage de la ramdisk est de décompresser son propre système de fichiers et d'être complètement indépendant. Le principal inconvénient est le fait que vous devez construire votre propre ramdisk si vous avez des contraintes de mémoire ou que des fichiers de configuration doivent être personnalisés. Maintenant, voyons comment faire cette lifimage. Tout d'abord, il faut le dernier source de PA/Linux. À partir de là, il vous faut un bon cross-compilateur et les répertoires linux et palo. Tout ce dont vous avez besoin est sur <ulink url="http://www.parisc-linux.org/">http://www.parisc-linux.org/</ulink>. Vous faites votre <command>make menuconfig</command>. Ensuite, lancez <command>make palo</command>. L'idée est que dans le répertoire palo réside le <filename>Makefile</filename> de <command>PALO</command> dans lequel vous devez sélectionner quelle ramdisk vous désirez. Initialement, vous lisez:
<programlisting>
# RAMDISK = ${PA}/ramdisk.bin
</programlisting>
Ainsi, si vous désirez utiliser l'option <command>RAMDISK</command> contenue dans un fichier appelé par exemple ramdisk.bin et placé à la racine du source linux, vous n'avez qu'à décommenter cette ligne:
<programlisting>
RAMDISK = ${PA}/ramdisk.bin
</programlisting>
Après avoir configuré le <filename>Makefile</filename>, allez dans le répertoire linux et lancez le fameux <command>make palo</command>. Le résultat, un fichier lifimage, vous attends dans le répertoire <command>PALO</command>.</para>
</sect2>

<sect2>
<title>Comment fabriquer une lifimage avec <command>NFSROOT</command>&nbsp;?</title>
<para>Cette méthode est largement utilisée car le noyau et le système de fichiers sont visibles depuis votre serveur. Il est très simple de tester un kernel. Vous avez juste à générer un nouveau noyau et le placer dans le bon répertoire. Au redémarrage, la machine HP ira utiliser le nouveau kernel <emphasis>via</emphasis> instruction <command>boot lan</command>. Pour obtenir l'option <command>NFSROOT</command>, c'est encore plus facile que que celle <command>RAMDISK</command>. Editez le <filename>Makefile</filename> de <command>PALO</command> et spécifiez l'adresse IP du serveur tftpboot. En fait, si votre serveur a comme IP 10.10.10.2, alors le fichier par défaut est correct car on peut y lire: 
<programlisting>
NFSROOT = 10.10.10.2
</programlisting>
Pour une autre adresse, ce champ doit contenir les bons paramètres. Après avoir configuré le <filename>Makefile</filename>, vous pouvez aller dans le répertoire linux et lancer <command>make palo</command>. Le résultat, un fichier lifimage, vous attends dans le répertoire <command>PALO</command>.</para>
</sect2>

<sect2>
<title>Comment rendre amorçable une partition&nbsp;?</title>
<para>
Cette partie correspond aux fonctionnalités de <command>PALO</command> similaires à celles de <command>LILO</command>. <command>PALO</command> est principalement un programme qui permet à une machine HP de démarrer <emphasis>via</emphasis> un kernel sur son propre disque dur. Cette section va expliquer comment le faire proprement. Quand vous installez le paquet <command>PALO</command>, Paul Bame, l'auteur et  le responsable, a mis une copie du <filename>/etc/palo.conf</filename> par défaut dans <filename>/usr/doc/share/doc/palo/palo.conf</filename>. Si vous désirez comprendre comment <command>PALO</command> fonctionne, vous devez juste lire ce fichier&nbsp;!
Cet échantillon vient de <filename>palo.conf</filename>. C'est la valeur par défaut. Nous vous conseillons de ne pas trop vous écarter du schéma utilisé. Cependant, le paramètre <command>recoverykernel</command> est le chemin du noyau à choisir lorsque vous désirez démarrer en mode sans échec&nbsp;! Le suivant, <command>bootloader</command>, est le chemin de l'utilitaire qui est produit par <command>PALO</command> quand vous exécutez <command>make iplboot</command>. <command>init-partitioned</command> informe le système sur le périphérique que vous désirez rendre amorçable. L'effet est immédiat. Cela signifie que <command>PALO</command> va écrire sur les premiers octets de la partition. Un bon conseil est de vérifier cette information avec <command>fdisk</command>, pour être sûr de mettre à jour le bon disque. Finalement, le dernier paramètre est <command>commandline</command>&nbsp;! Le premier chiffre indique quelle partition du disque <command>PALO</command> doit monter pour obtenir le noyau&nbsp;! Logiquement, la chaîne suivante est le chemin absolu jusqu'au kernel. <command>HOME</command> and <command>TERM</command> sont des variables d'environnement qui sont passées à <command>init</command>. Elles ne sont pas obligatoires mais elles peuvent être utiles. le paramètre <command>root</command> dit au noyau quelle partition monter comme racine du système de fichiers en lecture seule au démarrage. Cale peut être piégeux quand vous avez deux disques attachés. Vous pouvez ajouter des paramètres intéressants comme <command>console</command> où vous spécifiez la sortie de votre console. Vous devez savoir que <command>console=ttyS0</command> est pour la console série et <command>console=tty0</command> pour celle graphique. Dans la dernière version de <command>PALO</command>, ce chemin est placé automatiquement et correctement. Sinon, rapportez votre problème à la liste de diffusion.
<programlisting>
# The following arguments are set up for booting from /dev/sda3, specifically
# mounting partition 3 as root, and using /boot/vmlinux as both the
# recovery kernel, and the default dynamically-booted kernel.
# --recoverykernel=/boot/vmlinux
# --bootloader=/boot/iplboot
# --init-partitioned=/dev/sda
# --commandline=3/boot/vmlinux HOME=/ TERM=linux root=/dev/sda3
</programlisting>
</para>
</sect2>

<sect2>
<title>Comment se servir de <command>PALO</command> au démarrage&nbsp;?</title>

<sect3>
<title>La théorie</title>
<para>Après avoir installé votre <command>PALO</command>, vous pourrez peut-être avoir envie de modifier les paramètres passés au noyau. Tout d'abord, vous devez savoir comment interagir avec <command>PALO</command> au démarrage. Pour certains modèles plus anciens, vous devez ajouter «&nbsp;ipl&nbsp;» à votre commande. dans la console de &BA;:
<command>BOOT_ADMIN> boot pri ipl</command>
Pour les machines plus récentes, le système vous demandera si vous désirez interagir avec IPL. Vous n'avez qu'à répondre par un «&nbsp;y&nbsp;». Ensuite, vous voilà dans <command>PALO</command> avec une liste de tous les paramètres et un chiffre leur correspondant. Entrez le chiffre du paramètre que vous voulez changer. Appuyez sur Entrée et modifiez la valeur et validez. Le système va afficher la nouvelle liste de paramètres. Cette modification n'est pas permanente&nbsp;! Pour l'inscrire, il faut que vous exécutiez <command>/sbin/palo</command> et il écrira sur le disque tous les paramètres contenus dans le fichier par défaut à savoir <filename>/etc/palo.conf</filename>.
Si vous désirez ajouter un autre paramètre, choississez un paramètre et ajoutez le vôtre en les séparant par un espace. Pour en enlever un, il suffit de le choisir et d'effacer l'entrée complètement. Vous verrez que la liste en s'affichant de nouveau compte un paramètre en moins.</para>
<para>Pour plus d'informations à propos de <command>PALO</command>, allez lire le fichier <ulink url="http://cvs.parisc-linux.org/~checkout~/palo/README.html?rev=HEAD">lisezmoi de PALO</ulink>. Cette section est largement inspirée de ce fichier écrit par Paul Bame et ma page actuelle sur <command>PALO</command> que vous trouvez à <ulink url="http://pateam.esiee.fr/palo.html">http://pateam.esiee.fr/palo.html</ulink>.</para>
</sect3>

<sect3>
<title>Un exemple</title>
<para>Cet exemple est le travail de <emphasis>Michael Damaschke</emphasis>. Alors, c'est parti pour l'histoire de l'heureux utilisateur de PA/Linux démarrant un noyau aussi appelée <emphasis>Je ne sais pas comment je peux configurer ma machine pour qu'elle démarre avec le noyau que je veux&nbsp;?</emphasis>.</para>
<para>Après avoir allumer votre machine et votre moniteur, un message apparaît à l'écran vous informant que le démarrage va se poursuivre dans quelque instants sauf si vous pressez sur la touche <keycap>Echap</keycap> pour interrompre le processus de démarrage automatique. À ce moment, maintenez enfoncée la touche <keycap>Echap</keycap>.</para>
<note><para>Selon votre modèle, vous devez appuyer pendant un certain temps la touche. Aussi, votre moniteur peut être trop long pour pouvoir afficher ce message à l'écran. Donc, si vous voyez les diodes de votre clavier clignotées, c'est le signal pour maintenir enfoncée la touche <keycap>Echap</keycap> key. Si vous avez encore des soucis, référez-vous à la section <emphasis>Consoles</emphasis>.</para></note>

<para>Maintenant, il existe des variantes pour atteindre le prompt de &BA;. Si vous avez une ancienne machine, vous obtenez un autre message vous informant que le microcode de la machine recherche tous les périphériques amorçables. Vous pouvez interrompre cette recherche en appuyant encore sur la touche <keycap>Echap</keycap>. Là encore, appuyez sur <keycap>Echap</keycap>.</para>

<para>Là, un menu s'affiche. Choississez le choix avec la touche <keycap>a</keycap> et validez. Maintenant, vous voilà dans le prompt &BA;. D'abord, annulez l'autodémarrage en tapant ceci dans le &BA;:
<programlisting>
BOOT_ADMIN> autoboot off
</programlisting>
et puis valider avec <keycap>Entrée</keycap>.</para>

<para>Après ça, vous devez dire au système sur quel périphérique SCSI vous voulez démarrer. Ce disque doit contenir une partition de type <emphasis>f0</emphasis> où le chargeur <command>PALO</command> réside.</para>

<para>Pour cet exemple, l'ancien noyau sera <filename>vmlinux-2.4.9-32</filename> et le nouveau <filename>vmlinux-2.4.17-pa3</filename>. Le format d'un périphérique SCSI est <computeroutput>SCSI.X.0</computeroutput> où <emphasis>X</emphasis> est l'ID du disque SCSI vous désirez atteindre. Par exemple:
<programlisting>
BOOT_ADMIN> boot SCSI.5.0
</programlisting>
Après cette commande <command>boot</command> et le SCSI-ID, vous devez ajouter <command>IPL</command> si vous avez une machine des séries 7xx pour dire que vous voulez interagir avec <command>IPL</command>. Si vous avez une machine plusrécente, le système vous demandera ce que vous voulez faire:
<programlisting>
Interact with IPL (Y or N)?>
</programlisting>
Maintenant, vous pouvez configurer les paramètres de démarrage de <command>PALO</command>. Par exemple:
<programlisting>
BOOT_ADMIN> boot scsi.5.0 ipl
</programlisting>
et puis validez avec <keycap>Entrée</keycap>.</para>

<para>Voilà le nouveau Menu où vous configurez dans la ligne 0 (par défaut) le numéro de la partition, le chemin et le nom du noyau. Voici un exemple:
<programlisting>
HARD Booted.
palo ipl 0.92 root@spqr Mon Jun 25 23:03:13 CEST 2001
3/vmlinux-2.4.9-32 3585851 bytes @ 0x6d8f800
Current command line:
3/vmlinux-2.4.9-32 root=/dev/sda3 console=ttyS0 TERM=vt102
 0: 3/vmlinux-2.4.9-32
 1: root=/dev/sda3
 2: console=ttyS0
 3: TERM=vt102

Edit which field?
(or 'b' to boot with this command line)? 0
</programlisting>

Vous demandez à <command>PALO</command> de démarrer le fichier <filename>vmlinux-2.4.9-32</filename> contenant le noyau sur la troisième partition du disque SCSI.5.0. Mais cette fois-ci, vous désirez un autre kernel. Alors, vous validez avec <keycap>Entrée</keycap> et vous modifiez la chaîne de caractère pour qu'elle corresponde avec votre souhait, ici <filename>vmlinux-2.4.17-pa3</filename>. Vous concluez la modification <emphasis>via</emphasis> <keycap>Entrée</keycap>. Puis, il redemande si vous désirez effectuer des changements, mettez simplement «&nbsp;b&nbsp;» pour lancer le nouveau kernel&nbsp;! Encore un fois, confirmez avec <keycap>Entrée</keycap>, évitez de changer d'autres paramètres si vous en connaissez pas le sens&nbsp;! Maintenant, <command>PALO</command> n'a plus de secret pour vous :-)
</para>

</sect3>
</sect2>
</sect1>


<sect1 id="bootadmin">
<title>Que faut-il savoir de &BA;&nbsp;?</title>
<para>&BA; est une console primaire où vous pouvez exécuter des commandes précises. Ici, vous devriez trouver tout ce dont vous avez besoin. Sur tout système HP à base de processeur &PA;, vous trouverez &BA;, l'affichage peut varier mais l'idée reste la même. C'est pourquoi cette liste n'est pas complète mais contient ce qu'il faut. Un autre point important est que chaque commande peut être invoquée par un raccourci. Il est indiqué par les lettres en majuscule. Il n'est pas standard d'un modèle à un autre donc j'utiliserais le nom complet à chaque fois.</para>
<sect2>
<title>Les commandes dans <command>main</command></title>
<para>
Ces commandes sont celles de base.
<itemizedlist>
<listitem><para><command>boot</command> doit être suivi d'un argument qui indique le chemin que vous désirez. Le chemin est la définition du périphérique par exemple <computeroutput>FWSCSI.6.0</computeroutput> ou <computeroutput>PRI</computeroutput> si vous avez initialisé la variable correctement.</para></listitem>

<listitem><para><command>path</command> affiche ou inscrit les chemins de référence. Vous n'avez qu'à taper: <computeroutput>path pri fwscsi.6.0</computeroutput>. Mais, vous pouvez aussi mettre les chemins de console (graphique/série) et aussi pour le clavier (ps2/hil).</para></listitem>

<listitem><para><command>search</command> est très utile. Elle vérifie automatiquement et affiche tous les chemins amorçables possibles. Dans les versions récentes, les résultats sont liés à un raccourci. Elle détecte même si on peut faire un <command>boot lan</command>.</para></listitem>

<listitem><para><command>display</command> affiche le menu actuel.</para></listitem>

<listitem><para><command>help</command> vous donne une idée générale de ce que font les commandes. Par défaut, vous pouvez avoir toutes les commandes en tapant <computeroutput>help main</computeroutput>.</para></listitem>

<listitem><para>Sur tout système, vous avez une commande <command>reset</command>. Elle redémarre la machine avec les derniers paramètres fixés.</para></listitem>

</itemizedlist>
</para>
</sect2>

<sect2>
<title>Les commandes dans <command>configuration</command></title>
<para>
Ces commandes sont disponibles dans le menu <command>configuration</command>. Ainsi pour les utiliser, vous devez tout d'abord entrer dans ce menu avec la commande <command>configuration</command>.
<itemizedlist>
<listitem><para><command>auto</command> vous montre si la machine démarre automatiquement par défaut ou si elle fait une recherche. Vous pouvez modifier ce comportement avec les mots-clés <parameter>ON</parameter> and <parameter>OFF</parameter>.</para></listitem>

<listitem><para><command>bootinfo</command> liste tous les paramètres de démarrage du systéme.</para></listitem>

<listitem><para><command>default</command> rétablit la configuration de base.</para></listitem>

<listitem><para><command>monitor</command> règle l'affichage en tapant <computeroutput>mo &lt;path&gt; &lt;type&gt;</computeroutput> qui indique le chemin de votre console et ensuite le type de résolution. Si vous ne le connaissez pas, avec <computeroutput>mo list</computeroutput>, vous saurez tout.</para></listitem>

</itemizedlist>
</para>
</sect2>

<sect2>
<title>Les commandes dans <command>information</command></title>
<para>Ici, vous accédez à toutes les informations du système. Allez dans le menu en demandant <command>information</command>.

<itemizedlist>
<listitem><para><command>all</command> affiche tout.</para></listitem>

<listitem><para><command>fwrversion</command> vous donne la version de votre microcode. Vérifiez si votre microcode est à jour grâce à <ulink url="ftp://us-ffs.external.hp.com/firmware_patches/hp/cpu/catalog">ce fichier</ulink>.</para></listitem>

<listitem><para><command>lanaddress</command> affiche l'adresse MAC.
</para></listitem>

</itemizedlist>
</para>
</sect2>


<sect2>
<title>Les commandes dans <command>service</command></title>
<para>Ce menu est réservé aux gouroux &PA;. Vous ne trouverez rien d'utile pour un utilisateur final. Si vous pensez réellement le contraire, vous pouvez toujours m'écrire pour me faire connaître vos arguments.</para>
</sect2>

</sect1>

<sect1 id="contributors">
<title>Contributeurs de ce manuel</title>
<para>
Les personnes suivantes ont contribué ou relu la version de Deb de ce manuel d'une manière ou d'une autre.</para>

<itemizedlist>
<listitem><para>David Alexander deVries<email>adevries@thepuffingroup.com</email></para></listitem>
<listitem><para>Philip Imperial Schwan <email>pschwan@thepuffingroup.com</email></para></listitem>
</itemizedlist>
<para>Pour la version de Thomas.</para>

<itemizedlist>
<listitem><para>Michael Damasche <email>sps01@uni-koeln.de</email> Thanks for your example</para></listitem>
<listitem><para>Helge Deller <email>deller@gmx.de</email></para></listitem>
<listitem><para>Grant Grundler <email>grundler@puffin.external.hp.com</email></para></listitem>
<listitem><para>Richard Hirst <email>rhirst@puffin.external.hp.com</email></para></listitem>
</itemizedlist>
</sect1>
</article>
