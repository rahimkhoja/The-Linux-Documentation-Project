<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
 <TITLE>ISP-Hookup-HOWTO</TITLE>
</HEAD>
<BODY>
<H1>ISP-Hookup-HOWTO</H1>

<H2>Par Egil Kvaleberg, <CODE>egilk@sn.no</CODE>. </H2>v1.26, 5 Mars 1998
<HR>
<EM>Ce document décrit la façon d'utiliser Linux pour se connecter à un fournisseur
d'accès Internet au moyen d'une connexion TCP/IP par modem.  Il
explique la procédure d'appel téléphonique et d'établissement du protocole
IP, ainsi que la façon de gérer le courrier électronique et les forums de
discussion USENET.</EM>
<HR>

<H2><A NAME="s1">1. Introduction</A></H2>

<P>Ce document est fait pour répondre aux questions des clients des F.A.I.
(Fournisseurs d'Accès Internet) concernant la façon de configurer et d'utiliser
Linux.</P>
<P>Afin d'aider ceux qui veulent connecter leurs machines Linux à un F.A.I. pour
la première fois, ce document essaie de couvrir la plupart des situations
possibles. Ceci provoque, inévitablement, plusieurs recoupements avec les
autres HowTo Linux et livres du Linux Development Project (L.D.P.).  Pour
mieux appréhender les détails, il est conseillé de se référer à ces documents.</P>
<P>La plupart des documentations existantes s'adressent à des utilisateurs ayant
une certaine expérience, et les utilisateurs débutants ont souvent des
problèmes pour en extraire les informations intéressantes.</P>
<P>Pour simplifier, les exemples de ce document supposeront ce qui suit&nbsp;:</P>
<P> 
<UL>
<LI> Nom d'utilisateur : <CODE>dirk</CODE></LI>
<LI> Mot de passe: <CODE>SuperSecret</CODE></LI>
<LI> Fournisseur d'accès Internet&nbsp;: <CODE>acme.xz</CODE></LI>
<LI> Serveur de mail&nbsp;: <CODE>mail.acme.xz</CODE></LI>
<LI> Serveur de news&nbsp;: <CODE>news.acme.xz</CODE></LI>
<LI> Serveur de noms&nbsp;: <CODE>193.212.1.0</CODE></LI>
<LI> Numéro de téléphone&nbsp;: <CODE>12345678</CODE></LI>
</UL>
</P>
<P>La machine de <CODE>dirk</CODE> s'appelle <CODE>roderick</CODE>.
<!--
roderick
-->
</P>
<P>Toutes les informations ci-dessus doivent naturellement &ecirc;tre remplacées
par celles concernant le F.A.I. que vous utilisez. La plupart du temps, un
minimum de modifications doivent &ecirc;tre apportées pour les utilisateurs
ayant plusieurs F.A.I. Informez-moi des problèmes que vous rencontrez sur ce
point.</P>

<H2><A NAME="ss1.1">1.1 Copyright</A>
</H2>

<P>Copyright (c) 1996,1997,1998 par Egil Kvaleberg. Ce document peut être
distribué sous les termes de la licence LDP disponible à</P>
<P><CODE>
<A HREF="http://sunsite.unc.edu/LDP/COPYRIGHT.html">http://sunsite.unc.edu/LDP/COPYRIGHT.html</A></CODE></P>

<H2><A NAME="ss1.2">1.2 Limites de responsabilité</A>
</H2>

<P><B></B> Aucune responsabilité quant au contenu de ces documents ne peut être
acceptée. Vous utilisez les concepts, exemples et autres contenus à vos propres
risques.</P>
<P>L'une des nombreuses configurations possibles sera décrite. Dans le monde
Linux, il y a généralement plusieurs façons de faire les choses. Les
paragraphes contenant des conseils sont repérés par
<B>ALT&nbsp;:</B> Notez aussi que les références FTP changent
souvent légèrement lorsqu'apparaissent de nouvelles versions des programmes.</P>
<P>Pour autant que je sache, seuls seront décrits les programmes qui peuvent être
utilisés ou évalués dans un but personnel. La plupart de ces programmes seront
disponibles avec leurs sources sous une licence GNU-like.  
<!--
GNU
-->
</P>

<H2><A NAME="ss1.3">1.3 Traductions</A>
</H2>

<P>Ce document a été traduit dans les langues suivantes&nbsp;:</P>
<P>Allemand, par Cristoph Seibert&nbsp;:</P>
<P><CODE>
<A HREF="http://tech.appl-opt.physik.uni-essen.de/LinuX/german-howto/DE-ISP-Verbindung-HOWTO.html">http://tech.appl-opt.physik.uni-essen.de/LinuX/german-howto/DE-ISP-Verbindung-HOWTO.html</A></CODE></P>
<P>Coréen, par Kidong Lee&nbsp;:</P>
<P><CODE>
<A HREF="http://www.postech.ac.kr/~cessi/howto/ISP-Hookup/ISP-Hookup-HOWTO.html">http://www.postech.ac.kr/~cessi/howto/ISP-Hookup/ISP-Hookup-HOWTO.html</A></CODE></P>
<P>Français, par Éric Jacoboni&nbsp;:</P>
<P><CODE>
<A HREF="http://www.minet.net/linux/HOWTO-fr/ISP-Hookup-HOWTO.html">http://www.minet.net/linux/HOWTO-fr/ISP-Hookup-HOWTO.html</A></CODE></P>
<P>Polonais, par Piotr Pogorzelski&nbsp;: <B>URL TBA</B></P>
<P>Norégien&nbsp;:</P>
<P><CODE>
<A HREF="http://www.kvaleberg.com/no-linux.html">http://www.kvaleberg.com/no-linux.html</A></CODE></P>

<H2><A NAME="ss1.4">1.4 Nouvelles versions de ce document</A>
</H2>

<P>Les nouvelles versions de ce document seront régulièrement postées dans
<I>comp.os.linux.answers</I>.  Elles seront aussi mises sur les différents
sites FTP qui archivent le L.D.P. Parmi ceux-ci&nbsp;:</P>
<P><CODE>
<A HREF="ftp://sunsite.unc.edu/pub/Linux/docs/HOWTO">ftp://sunsite.unc.edu/pub/Linux/docs/HOWTO</A></CODE>
<!--
sunsite
-->
</P>
<P>De plus, vous pourrez généralement trouver ce document sur la page du Linux
Development Project WWW à&nbsp;:</P>
<P><CODE>
<A HREF="http://sunsite.unc.edu/LDP/">http://sunsite.unc.edu/LDP/</A></CODE>
<!--
LDP
-->
</P>
<P>La dernière version de ce document sera disponible sous divers formats à&nbsp;:</P>
<P><CODE>
<A HREF="ftp://ftp.sol.no/user/egilk/ISP-Hookup-HOWTO.txt">ftp://ftp.sol.no/user/egilk/ISP-Hookup-HOWTO.txt</A></CODE></P>
<P><CODE>
<A HREF="ftp://ftp.sol.no/user/egilk/ISP-Hookup-HOWTO.ps.gz">ftp://ftp.sol.no/user/egilk/ISP-Hookup-HOWTO.ps.gz</A></CODE></P>
<P><CODE>
<A HREF="ftp://ftp.sol.no/user/egilk/ISP-Hookup-HOWTO.tar.gz">ftp://ftp.sol.no/user/egilk/ISP-Hookup-HOWTO.tar.gz</A></CODE></P>
<P><CODE>
<A HREF="http://www.kvaleberg.com/ISP-Hookup-HOWTO.html">http://www.kvaleberg.com/ISP-Hookup-HOWTO.html</A></CODE></P>

<H2><A NAME="ss1.5">1.5 Critiques</A>
</H2>

<P>Tous commentaires, erreurs constatées, informations supplémentaires et critiques de toutes sortes
doivent &ecirc;tre envoyées à&nbsp;:</P>
<P><CODE>
<A HREF="mailto:egil@kvaleberg.no">egil@kvaleberg.no</A></CODE></P>
<P><CODE>
<A HREF="http://www.kvaleberg.com/">http://www.kvaleberg.com/</A></CODE></P>
<P>Tous commentaires concernant la traduction, les éventuelles fautes commises par
le traducteur doivent &ecirc;tre envoyées à&nbsp;:</P>
<P><CODE>
<A HREF="mailto:jaco@mail.dotcom.fr">jaco@mail.dotcom.fr</A></CODE></P>


<H2><A NAME="s2">2. Comment se connecter au reste du monde ?</A></H2>

<P>Je suppose que les composants logiciels réseau essentiels de votre distribution
Linux ont été installés, et qu'il a été décidé quel sera le port série utilisé
par 
<!--
/dev/modem
-->
 /dev/modem.</P>
<P>En général, la configuration par défaut permet uniquement un accès direct à
/dev/modem sous le compte <CODE>root</CODE>.</P>
<P>Pour se connecter directement à un F.A.I, et pour expérimenter les séquences de
connexion, on peut utiliser le programme 
<!--
minicom
-->

minicom, relativement simple à utiliser.</P>

<H2><A NAME="ss2.1">2.1 La configuration de base</A>
</H2>

<P>La configuration de la machine pour son utilisation sur le réseau doit se faire
sous le compte <CODE>root</CODE>.  Avant d'aller plus loin, il faut vérifier que le
fichier 
<!--
/etc/hosts.deny
-->
 /etc/hosts.deny contient la
ligne suivante&nbsp;:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
 
ALL: ALL 
</PRE>
</CODE></BLOCKQUOTE>
 </P>
<P>Normalement, on veut s'autoriser soi-même, il faut donc ajouter la ligne
suivante au fichier 
<!--
/etc/hosts.allow
-->

/etc/hosts.allow&nbsp;:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
 
ALL: LOCAL 
</PRE>
</CODE></BLOCKQUOTE>
 </P>
<P>Ou, si on veut insister&nbsp;: </P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
 ALL: 127.0.0.1 
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Pour tout ce qui suit, on suppose des connexions via PPP au moyen
d'une adresse IP dynamique.  Si on fait partie des privilégiés ayant
une adresse fixe, il y aura quelques différences à prendre en compte.</P>

<P>Il est pratique d'avoir un nom pour sa machine, un nom que l'utilisateur IP
peut choisir comme il, ou elle, le désire.  Pour cela, il faut mettre ce nom
dans 
<!--
/etc/HOSTNAME
-->
 /etc/HOSTNAME&nbsp;:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
roderick
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>L'étape suivante consiste à déclarer le serveur de noms dans
<!--
/etc/resolv.conf
-->
 /etc/resolv.conf&nbsp;:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
search .
nameserver 193.212.1.0
</PRE>
</CODE></BLOCKQUOTE>

<!--
nameserver
-->
</P>
<P>Le serveur de noms soit être spécifié par une adresse IP numérique
qui dépend du F.A.I. On peut avoir jusqu'à trois serveurs de noms différents,
chacun sur une ligne différente, ils seront appelés dans l'ordre où ils sont
listés.</P>
<P>Si l'on veut pouvoir utiliser des noms comme <CODE>unemachine</CODE> pour résumer
le nom complet <CODE>unemachine.acme.xz</CODE>, on doit remplacer la première
ligne par&nbsp;:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
search acme.xz
</PRE>
</CODE></BLOCKQUOTE>

<!--
search
-->
</P>
<P>Un minimum de configuration sera aussi nécessaire dans 
<!--
/etc/hosts
-->

/etc/hosts. La plupart des utilisateurs seront ainsi capable de
gérer&nbsp;:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
127.0.0.1      localhost
0.0.0.0        roderick
</PRE>
</CODE></BLOCKQUOTE>

<!--
localhost
-->

Ceux possédant une adresse IP fixe remplaceront évidemment 0.0.0.0 par
celle-ci...</P>
<P>De plus, le minimum que doit contenir le fichier 
<!--
/etc/networks
-->

/etc/networks est&nbsp;:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
loopback        127.0.0.0
localnet         0.0.0.0
</PRE>
</CODE></BLOCKQUOTE>

<!--
loopback
-->
 
<!--
localnet
-->
</P>
<P>On doit aussi configurer son domaine de courrier électronique dans
<!--
/etc/mailname
-->
 /etc/mailname&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
acme.xz
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Le nom d'utilisateur et le mot de passe nécessaires pour se connecter au
F.A.I. doivent &ecirc;tre spécifiés dans 
<!--
/etc/ppp/pap-secrets
-->

/etc/ppp/pap-secrets</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
dirk * SuperSecret
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Dans le cas où le F.A.I. utilise CHAP au lieu de PAP, le
nom de fichier est 
<!--
/etc/ppp/chap-secrets
-->

/etc/ppp/chap-secrets.</P>
<P>Enfin, les points fondamentaux concernant la procédure de connexion elle-même
doivent être précisés avant que PPP soit démarré. Ceci est fait dans
<!--
/etc/ppp/chatscript
-->
 /etc/ppp/chatscript&nbsp;:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
TIMEOUT 5
"" ATZ
OK ATDT12345678
ABORT "NO CARRIER"
ABORT BUSY
ABORT "NO DIALTONE"
ABORT WAITING
TIMEOUT 45
CONNECT ""
TIMEOUT 5
"name:" ppp
</PRE>
</CODE></BLOCKQUOTE>

<!--
OK
-->
 
<!--
ATDT
-->
 
<!--
ATZ
-->

<!--
TIMEOUT
-->
 
<!--
ABORT
-->
 
<!--
CONNECT
-->
</P>
<P>Ces lignes peuvent être peaufinées pour les cas particuliers. Le numéro de
téléphone dans la troisième ligne doit, bien sûr, être celui du fournisseur
d'accès. Certains peuvent remplacer la chaîne d'initialisation <CODE>ATZ</CODE> du
modem par une autre, plus adaptée au modem qu'ils utilisent. La dernière ligne
spécifie que l'on attend un prompt se terminant par <CODE>name:</CODE>, et que la
réponse doit être <CODE>ppp</CODE>. D'autres systèmes peuvent avoir
d'autres procédures de connexion.</P>
<P>Pour réellement lancer une connexion, le protocole PPP peut être
initialisé en lançant la commande suivante&nbsp;:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
exec pppd connect \
     'chat -v -f /etc/ppp/chatscript' \
      -detach crtscts modem defaultroute \
      user dirk \
      /dev/modem 38400
</PRE>
</CODE></BLOCKQUOTE>

<!--
pppd
-->
 
<!--
chat
-->
 
<!--
connect
-->

<!--
/etc/ppp/chatscript
-->
 
<!--
detach
-->

<!--
crtscts
-->
 
<!--
modem
-->
 
<!--
defaultroute
-->

<!--
/dev/modem
-->
</P>
<P>Normalement, on doit être en ligne, et le rester jusqu'à ce que le programme
soit détruit en tapant ctrl-C. 
<!--
ctrl-C
-->
 Tous les messages
concernant la connexion seront ajoutés aux fichiers diagnostics du système.
Pour les lire, il suffit de faire&nbsp;:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
tail /var/adm/messages
</PRE>
</CODE></BLOCKQUOTE>

<!--
tail
-->
 
<!--
/var/adm/messages
-->
 ou
<BLOCKQUOTE><CODE>
<PRE>
dmesg
</PRE>
</CODE></BLOCKQUOTE>

<!--
dmesg
-->
</P>
<P>Aussi longtemps que la connexion PPP fonctionne, on a accès à Internet et
on peut utiliser des programmes comme ftp, ncftp, rlogin,
telnet, finger etc.  Tous ces programmes font partie du paquetage
réseau.</P>
<P>De plus amples informations sur  PPP sont disponibles dans&nbsp;:</P>
<P><CODE>
<A HREF="file:/usr/lib/ppp/README.linux">/usr/lib/ppp/README.linux</A></CODE></P>
<P><CODE>
<A HREF="file:/usr/lib/ppp/README.linux-chat">/usr/lib/ppp/README.linux-chat</A></CODE></P>
<P>Enfin, un mot sur la sécurité. Le fichier 
<!--
/etc/inetd.conf
-->

/etc/inetd.conf énumère tous les services que notre machine
offrira au monde extérieur. Avec le fichier 
<!--
/etc/hosts.deny
-->

/etc/hosts.deny que l'on a créé plus haut, aucun accès extérieur
n'est permis. Pour ceux qui en ont besoin, les accès doivent être explicitement
permis au moyen du fichier 
<!--
/etc/hosts.allow
-->

/etc/hosts.allow. Les transactions locales peuvent être permises
par la ligne suivante&nbsp;:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
ALL: LOCAL
</PRE>
</CODE></BLOCKQUOTE>

Voir aussi <CODE>man 5 hosts_access</CODE>. 
<!--
hosts_access
-->
</P>
<P>Une dernière remarque mineure&nbsp;: une certaine confusion existe sur les noms
des protocoles POP. Une définition dans le fichier
<!--
/etc/services
-->
 /etc/services compatible avec à peu
près tout est&nbsp;:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
pop2      109/tcp   pop-2          # PostOffice V.2
pop3      110/tcp   pop-3 pop      # PostOffice V.3
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P><B>ALT :</B> A la place de 
<!--
chatscript
-->
 chatscript,
on peut utiliser le programme 
<!--
dip
-->
 dip, bien plus
souple&nbsp;: mais pas en même temps que 
<!--
diald
-->
 diald.</P>
<P><B>ALT :</B> Les privilégiés ayant une connexion TCP/IP
permanente, par exemple par un réseau Ethernet, peuvent sans problème
tout ignorer sur PPP et se concentrer sur la configuration de leur carte
réseau.</P>
<P><B>ALT :</B> Certains peuvent ne pas avoir la possibilité d'utiliser PPP,
mais peuvent utiliser SLIP à la place. Ce dernier protocole est supporté
de la m&ecirc;me façon que PPP. Une autre possibilité est d'utiliser
UUCP. D'autres peuvent échanger du courrier et des news au moyen de
SOUP. Une description de ce dernier cas est donné dans&nbsp;:</P>
<P><CODE>
<A HREF="ftp://ftp.sol.no/user/bjorn/Linux-offline.tgz">ftp://ftp.sol.no/user/bjorn/Linux-offline.tgz</A></CODE></P>
<P>Le programme TERM est aussi envisageable. Pour l'utiliser, voir
<I>Term-HOWTO</I>.</P>

<H2><A NAME="s3">3. Comment <I>surfer</I> ?</A></H2>

<P>Si l'on considère que le mode texte est ce qu'il y a de mieux, on peut utiliser
le navigateur web Lynx, que l'on trouvera à l'adresse suivante&nbsp;:</P>
<P><CODE>
<A HREF="ftp://sunsite.unc.edu/pub/Linux/system/Network/info-systems/lynx-2.3.bin2.tar.gz">ftp://sunsite.unc.edu/pub/Linux/system/Network/info-systems/lynx-2.3.bin2.tar.gz</A></CODE></P>
<P>Si on travaille sous X Window, on peut aussi utiliser l'un des
nombreux navigateurs graphiques. Chimera se trouve à l'adresse
suivante&nbsp;:</P>
<P><CODE>
<A HREF="ftp://sunsite.unc.edu/pub/Linux/system/Network/info-systems/chimera-1.65.bin.ELF.tar.gz">ftp://sunsite.unc.edu/pub/Linux/system/Network/info-systems/chimera-1.65.bin.ELF.tar.gz</A></CODE></P>
<P><CODE>
<A HREF="http://www.unlv.edu/chimera/">http://www.unlv.edu/chimera/</A></CODE></P>
<P>Mosaic&nbsp;:</P>
<P><CODE>
<A HREF="ftp://sunsite.unc.edu/pub/Linux/system/Network/info-systems/Mosaic-2.7b1-aout.tgz">ftp://sunsite.unc.edu/pub/Linux/system/Network/info-systems/Mosaic-2.7b1-aout.tgz</A></CODE></P>
<P><CODE>
<A HREF="ftp://ftp.NCSA.uiuc.edu/Web/Mosaic/Unix/binaries/2.6">ftp://ftp.NCSA.uiuc.edu/Web/Mosaic/Unix/binaries/2.6</A></CODE></P>
<P>Netscape (aka. Mozilla)&nbsp;:</P>
<P><CODE>
<A HREF="ftp://sunsite.unc.edu/pub/Linux/system/Network/info-systems/netscape-v11b3.tar.gz">ftp://sunsite.unc.edu/pub/Linux/system/Network/info-systems/netscape-v11b3.tar.gz</A></CODE></P>
<P><CODE>
<A HREF="ftp://ftp.cs.uit.no/pub/www/netscape">ftp://ftp.cs.uit.no/pub/www/netscape</A></CODE></P>
<P>Ces navigateurs sont toujours disponibles dans de nouvelles et 
<I>passionnantes</I> versions.</P>
<P>L'utilisation et l'évaluation de ces programmes sont sujets à certaines
conditions. Respectez-les.</P>

<H2><A NAME="s4">4. Comment envoyer et recevoir du courrier électronique ?</A></H2>

<P>D'abord, il faut s'assurer que 
<!--
sendmail
-->
 sendmail est
installé.  Sendmail trie le courrier interne et à destination de l'extérieur et
conserve ce dernier jusqu'au moment où il peut l'envoyer.</P>
<P>Sendmail est basé sur une configuration que l'on trouve dans
<!--
/etc/sendmail.cf
-->
 /etc/sendmail.cf.  Un exemple
convenant aux utilisateurs de F.A.I. se trouve dans&nbsp;:</P>
<P><CODE>
<A HREF="ftp://ftp.sol.no/user/egilk/sendmail.cf">ftp://ftp.sol.no/user/egilk/sendmail.cf</A></CODE></P>
<P>Celui-ci utilise 
<!--
procmail
-->
 procmail comme agent
postal mais peut être facilement modifié pour utiliser 
<!--
deliver
-->

deliver.</P>
<P>Il est, bien sûr, nécessaire d'avoir une adresse de domaine
<B>officielle</B> pour le courrier extérieur. Cette information est donnée
dans 
<!--
sendmail.cf
-->
 /etc/sendmail.cf:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
# who I masquerade as (null for no masquerading)
DMacme.xz
</PRE>
</CODE></BLOCKQUOTE>

<!--
DM
-->
 
<!--
masquerading
-->
 </P>
<P>Ceci suppose que l'on ait le m&ecirc;me nom d'utilisateur local que pour son
F.A.I. S'il est différent, précisez le nom complet à la place&nbsp;:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
DMdick@acme.xz
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Sendmail est maintenant configuré pour envoyer 
<B>directement</B> au destinataire. Pour éviter de longues connexions
répétitives dans les cas où la connexion du destinataire est lente et
irrégulière, il est généralement pratique d'utiliser un F.A.I. comme moyen de
stockage. Ceci doit &ecirc;tre précisé par une spécification DS&nbsp;:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
# "Smart" relay host (may be null)
DSmail.acme.xz
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Attention&nbsp;: sendmail est quelque peu sensible à la présence de caractères
de tabulation dans 
<!--
sendmail.cf
-->
 sendmail.cf.  On peut
utiliser l'éditeur 
<!--
vi
-->
 vi pour s'assurer que ces
caractères de tabulation sont laissés inchangés.</P>
<P>La réception de courrier est souvent réalisée par le protocole POP3 qui
peut &ecirc;tre démarré à chaque fois que la connexion est établie. On peut
tester ça par le script suivant&nbsp;:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
sendmail -q
popclient -3 -v mail.acme.xz -u dirk -p "SuperSecret" \
       -k -o /usr/spool/mail/dirk
</PRE>
</CODE></BLOCKQUOTE>

<!--
popclient
-->
</P>
<P>Ce script peut &ecirc;tre lancé après que la connexion PPP ait été
établie. Attention&nbsp;: ce script est uniquement pour tester, il faut donc
s'assurer que la bo&icirc;te à lettres locale n'est pas modifiée pendant
l'exécution du script. L'option <CODE>-k</CODE> indique que le courrier doit
&ecirc;tre <B>laissé</B> dans la bo&icirc;tre à lettre du F.A.I. et que l'on
récupère seulement une copie du courrier. Bien s&ucirc;r, une fois que l'on
sait que la configuration fonctionne, on enlève cette option.</P>
<P>Attention&nbsp;: le mot de passe appara&icirc;tra sur la ligne de
commande. Notez aussi que popclient est obsolète et que vous devriez utiliser
<!--
fetchmail
-->
 fetchmail à la place. </P>
<P>Une version plus sécurisée et améliorée de ce script peut &ecirc;tre récupérée
à l'adresse suivante&nbsp;:</P>
<P><CODE>
<A HREF="ftp://ftp.sol.no/user/egilk/pop-script.tar.gz">ftp://ftp.sol.no/user/egilk/pop-script.tar.gz</A></CODE></P>
<P>Cette version du script nécessite l'installation de 
<!--
procmail
-->

procmail, mais c'est un travail que l'on ne regrettera jamais de
toutes façons. La plupart des distributions l'incluent, sinon, vous pouvez
essayer&nbsp;:</P>
<P><CODE>
<A HREF="ftp://sunsite.unc.edu/pub/Linux/system/Mail/mailhandlers/procmail-3.10-2.tar.gz">ftp://sunsite.unc.edu/pub/Linux/system/Mail/mailhandlers/procmail-3.10-2.tar.gz</A></CODE></P>
<P>Procmail est un outil simple et souple qui peut trier le courrier entrant selon
un grand nombre de critères. Il est aussi capable de gérer des t&acirc;ches
automatiques comme les messages d'absences et autres.</P>
<P>Il faut noter que lorsqu'on utilise procmail directement comme ci-dessus, la
situation est quelque peu différente de celle décrite dans la documentation de
ce programme. Le fichier .forward <B>n'est pas</B> nécessaire,
et l'on n'a pas besoin non plus de fichier .procmailrc. Ce dernier
est uniquement requis si on veut trier le courrier.</P>
<P>Une interface utilisateur pour la lecture et l'envoi de courrier peut
&ecirc;tre trouvée dans des programmes comme 
<!--
pine
-->

pine ou 
<!--
elm
-->
 elm.</P>
<P><B>ALT :</B> Fetchmail est maintenant une alternative très améliorée de
popclient. La dernière version est disponible à&nbsp;:</P>
<P><CODE>
<A HREF="ftp://ftp.ccil.org/pub/esr/fetchmail/fetchmail-3.3.tar.gz">ftp://ftp.ccil.org/pub/esr/fetchmail/fetchmail-3.3.tar.gz</A></CODE></P>
<P><B>ALT :</B> S'il n'est pas réellement nécessaire d'avoir le démon
sendmail activé, on peut mettre en commentaires le démarrage de sendmail,
comme cela est généralement fait dans /etc/rc.d/rc.M (ceci peut
varier selon les distributions) afin de réduire l'utilisation des ressources et
d'autres problèmes potentiels.</P>
<P><B>ALT :</B> A la place de sendmail on peut utiliser le programme
<!--
smail
-->
 smail, plus simple. On trouve une bonne
description de celui-ci (et de bien d'autres choses évoquées ici) dans le
<I>Guide de l'administration réseau sous Linux</I>.</P>
<P><B>ALT :</B> Il existe aussi un ensemble de macros m4 pour réaliser un
<!--
/etc/sendmail.cf
-->
 /etc/sendmail.cf tout neuf. Il peut
convenir à une simple installation aussi bien que pour modifier une
configuration existante.</P>
<P><B>ALT :</B> Il y a encore d'autres possibilités plus simples mais moins
souples pour gérer le courrier. Par exemple, le programme Pine peut
fonctionner de manière autonome s'il est configuré correctement. On peut aussi
utiliser certains explorateurs Web.</P>
<P><B>ALT :</B> Utilisé comme gestionnaire de courrier et de news, le module
Gnus d'Emacs a de nombreux fans. De plus amples informations se trouvent
à&nbsp;:</P>
<P><CODE>
<A HREF="http://www.ifi.uio.no/~larsi/">http://www.ifi.uio.no/~larsi/</A></CODE></P>
<P><B>ALT :</B> Une alternative à popclient est
pop-perl5, disponible à&nbsp;:</P>
<P><CODE>
<A HREF="ftp://sunsite.unc.edu/pub/Linux/System/Mail/pop-perl5-1.1.tar.gz">ftp://sunsite.unc.edu/pub/Linux/System/Mail/pop-perl5-1.1.tar.gz</A></CODE></P>

<H2><A NAME="s5">5. Les News</A></H2>

<H2><A NAME="ss5.1">5.1 Comment configurer un lecteur de News online ?</A>
</H2>

<P>
<!--
Lecteur de news
-->
 Tant que PPP est actif, on peut lire les
news <B>online</B>.  Il y a beaucoup de programmes disponibles pour
cela, deux possibilités simples étant 
<!--
rtin
-->
 rtin et
<!--
trn
-->
 trn.</P>
<P>Pour commencer à lire les news, la seule chose nécessaire pour la configuration
est, dans la plupart des cas, de configurer NNTPSERVER (généralement
une fois pour toutes dans le fichier 
<!--
.profile
-->

.profile)&nbsp;: </P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
 
export NNTPSERVER=news.acme.xz
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Pour avoir une adresse <I>From</I> correcte dans les envois, certains
programmes nécessitent <I>éventuellement</I>&nbsp;:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
 
export NNTP_INEWS_DOMAIN=acme.xz 
</PRE>
</CODE></BLOCKQUOTE>

<!--
NNTP_INEWS_DOMAIN
-->
</P>

<H2><A NAME="ss5.2">5.2 Comment configurer un lecteur de News offline ?</A>
</H2>

<P>
<!--
Lecteur de news
-->
 Pour pouvoir lire les news en étant
offline, réduire la note de téléphone et avoir une plus grande souplesse,
on peut mettre en place un serveur local de News. Ceci nécessite un peu de
configuration ainsi que de l'espace sur le disque. Après l'installation, les
choses fonctionneront plus ou moins d'elles-m&ecirc;mes. Un peu d'attention
sera nécessaire de temps en temps.</P>
<P>Deux solutions différentes seront décrites.</P>

<H2><A NAME="ss5.3">5.3 Comment installer C News?</A>
</H2>

<P>Cette solution est basée sur le serveur de News <B>C News</B> et
sur le protocole NNTP.  C News était prévu, à l'origine, pour un
autre type de configuration, mais est suffisamment souple pour gérer aussi
notre situation. On peut aussi utiliser le serveur de News
<B>INN</B> plus récent mais aussi plus gourmand en ressources. Quel que
soit le choix, il faut veiller a <B>ne pas</B> installer les deux&nbsp;: ils
cohabitent difficilement.</P>
<P>Il est crucial d'effectuer les travaux de maintenance des News sous le compte
<CODE>news</CODE>. De plus, tous les fichiers de configuration doivent
&ecirc;tre placés dans le répertoire 
<!--
/usr/lib/news
-->

/usr/lib/news. Une façon de faire, lorsqu'on est sous le compte
<CODE>root</CODE>, est de taper <CODE>su news; cd</CODE>.</P>
<P>Les fichiers les plus importants de la configuration sont&nbsp;: </P>
<P> 
<UL>
<LI> 
<!--
active
-->
 active est un panorama des groupes de
news actifs. Il est mis à jour par la commande 
<!--
addgroup
-->

addgroup, par exemple&nbsp;: <CODE>addgroup comp.os.linux.networking
y</CODE>.</LI>
<LI> 
<!--
organization
-->
 organization contient simplement
ce que l'on veut mettre dans le champ <I>Organization:</I> des
en-t&ecirc;tes. Dans notre cas&nbsp;:</LI>
</UL>

<BLOCKQUOTE><CODE>
<PRE>
Dirk Gently's Holistic Detective Agency
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P> 
<UL>
<LI> 
<!--
mailname
-->
 mailname dans notre cas doit
contenir&nbsp;: <CODE>acme.xz</CODE>.</LI>
<LI> 
<!--
whoami
-->
 whoami contient le nom de notre
<CODE>site</CODE> dans le thread Path:.  Dans une configuration
telle qu'elle est décrite ici, où l'on utilise le programme 
<!--
newsx
-->

newsx, ce nom ne quittera jamais la machine, on peut donc y mettre
ce que l'on veut pourvu que l'on soit s&ucirc;r qu'il est unique. Dans notre
cas <CODE>roderick</CODE>.</LI>
<LI> Le fichier 
<!--
sys
-->
 sys contrôle la recherche et la
distribution des News. On supposera que, dans notre cas, le F.A.I. ajoute
<CODE>acme.xz</CODE> à Path et que c'est la seule source de News que l'on
ait. L'exemple donné fait que l'on accepte tout ce qui arrive, et que l'on
poste seulement sur <CODE>acme.xz</CODE> ce qui n'a pas été vu avant et qui est
posté au départ sur notre propre site.  Dans cette configuration simplifiée, on
suppose que tous les groupes viennent du même endroit.
.<CODE>/all</CODE> précise la distribution, et <B>doit</B> être
inclus.  La lettre <CODE>F</CODE> indique que les articles de news sortants
seront regroupés dans un fichier.</LI>
</UL>

<BLOCKQUOTE><CODE>
<PRE>
ME:all/all::
acme/acme.xz:all,!junk/all:FL:
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P> 
<UL>
<LI> Un sous-répertoire pour les News sortantes doit être créé. Ici&nbsp;:</LI>
</UL>

<BLOCKQUOTE><CODE>
<PRE>
mkdir /var/spool/news/out.going/acme
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P> 
<UL>
<LI> 
<!--
mailpaths
-->
 mailpaths s'occupe du postage dans
les groupes modérés, bien que cette tâche puisse être
habituellement laissée au F.A.I.</LI>
</UL>
</P>
<P>C News nécessite un peu de maintenance journalière, mais ceci peut &ecirc;tre
spécifié une fois pour toute en utilisant la commande crontab -e
<!--
crontab
-->
 en tant qu'utilisateur <CODE>news</CODE>. Voici une
configuration possible qui peut &ecirc;tre ajustée selon les besoins&nbsp;:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
 
# maintenance des lots entrants et sortants 
10,40 * * * * /usr/lib/newsbin/input/newsrun

# expiration des C News, une fois par jour
30 0  * * * /usr/lib/newsbin/expire/doexpire

# surveillance et rapports si nécessaire
00 2  * * sat /usr/lib/newsbin/maint/addmissing
40 3  * * * /usr/lib/newsbin/maint/newswatch
50 3  * * * /usr/lib/newsbin/maint/newsdaily
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>
<!--
newsrun
-->
 newsrun place les articles entrants et
sortants toutes les demi-heures, 
<!--
doexpire
-->
 doexpire détruit
les articles lorsqu'ils sont périmés chaque nuit à 00:30 et les trois dernières
commandes réalisent différentes tâches d'administration et de correction
d'erreur.</P>
<P>On doit aussi s'assurer que tout est correct lorsqu'on démarre la machine. En
tant qu'utilisateur root, il faut ajouter la ligne suivante dans
/etc/rc.d/rc.local&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
su news -c /usr/lib/newsbin/maint/newsboot
</PRE>
</CODE></BLOCKQUOTE>

Les News peuvent &ecirc;tre récupérées en utilisant le programme
newsx 
<!--
newsx
-->
, qui les prend sur un serveur
NNTP.  Ce programme peut être trouvé à l'adresse suivante&nbsp;:</P>
<P><CODE>
<A HREF="ftp://sunsite.unc.edu/pub/Linux/system/news/transport/newsx-0.9.tar.gz">ftp://sunsite.unc.edu/pub/Linux/system/news/transport/newsx-0.9.tar.gz</A></CODE>
Ou&nbsp;:</P>
<P><CODE>
<A HREF="ftp://ftp.sol.no/user/egilk/newsx-0.9.tar.gz">ftp://ftp.sol.no/user/egilk/newsx-0.9.tar.gz</A></CODE></P>
<P>La configuration de <CODE>newsx</CODE> est très simple. Son installation est classique&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
make
su
make install
exit
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Avec cette configuration, tout ce que l'on a à faire est de créer les groupes
que l'on veut lire en utilisant la commande 
<!--
addgroup
-->

addgroup.</P>
<P>Pour récupérer les articles, l'utilisateur <CODE>>news</CODE> lance les
commandes suivantes (en supposant une connexion PPP ou similaire
établie)&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
newsrun
newsx acme news.acme.xz
newsrun
</PRE>
</CODE></BLOCKQUOTE>

<!--
newsrun
-->
</P>
<P>L'option <CODE>-d</CODE> permet un affichage continu à l'écran. La documentation de
newsx donne toutes les informations nécessaires.</P>
<P>newsx s'occupe aussi de poster les articles sortants.</P>
<P>Pour contrôler la suppression des articles périmés, on a besoin d'un fichier
<CODE>explist</CODE>. Les commentaires de cet exemple devraient expliquer ce
que l'on cherche à faire&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
# maintenu dans l'historique 14 jours, rien ne dure plus de 120 jours
/expired/                          x    14      -
/bounds/                           x    0-1-120 -

# on garde ça pendant 2 mois
comp.sources,comp.os.linux.all     x    60      -

# les déchets sont vite supprimés
junk,control                       x    2       -

# défaut:  14 jours, pas  d'archivage
all                                x    14      -
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P><B>ALT :</B> Pour les petits serveurs de News, on n'a pas souvent besoin du
<CODE>contrôle</CODE> <CODE>newgroup</CODE>. Le trafic est <B>énorme</B> comparé à son
utilité possible. Le point essentiel est que les articles soient supprimés et
que les groupes puissent être créés automatiquement. Pour être sûr que les
messages de contrôle contenant <CODE>newgroup</CODE> ne brouillent pas les choses,
un fichier nommé 
<!--
newgroupperm
-->
 newgroupperm spécifie
ce que l'on autorise&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
comp.os.linux  tale@uunet.com yv
all            any            nq
</PRE>
</CODE></BLOCKQUOTE>

Dans cet exemple, tous les groupes sous comp.os.linux seront crées (y), et
l'utilisateur <CODE>news</CODE> en sera averti (v).  Tout le reste sera
silencieusement (q) ignoré (n).  La dernière ligne suffit si l'on veut créer
tous les groupes manuellement.</P>
<P><B>ALT :</B> Une alternative à newsx est suck.</P>

<H2><A NAME="ss5.4">5.4 Comment configurer Leafnode?</A>
</H2>

<P>Une tout autre solution consiste à installer le paquetage intégré
<!--
leafnode
-->
 leafnode. Celui-ci gère toutes les tâches
nécessaires à un serveur de News personnel et est facile à configurer.  Il est
disponible à&nbsp;:</P>
<P><CODE>
<A HREF="http://www.troll.no/freebies/leafnode.html">http://www.troll.no/freebies/leafnode.html</A></CODE></P>
<P>Comme pour C News, tous les travaux de maintenance doivent absolument être
faits par l'utilisateur <CODE>news</CODE>.</P>
<P>Le répertoire de base de leafnode est
/usr/lib/leafnode.  Pour l'installer, faire&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
cd /usr/lib/leafnode
tar -xzvf leafnode-0.8.tgz
cd leafnode-0.8
make
su
make install
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Notez que, dans ce qui suit, le préfixe /usr/local/sbin devra être
remplacé par /usr/sbin si vous avez installé leafnode à
partir d'un paquetage.</P>
<P>Toujours sous le compte <CODE>root</CODE>, on change la ligne qui contrôle NNTP
dans le fichier 
<!--
/etc/inetd.conf
-->

/etc/inetd.conf&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
nntp  stream  tcp  nowait  news  /usr/sbin/tcpd /usr/local/sbin/leafnode
</PRE>
</CODE></BLOCKQUOTE>

Puis, on l'active par&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
killall -HUP inetd
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>On retourne sous le compte <CODE>news</CODE> en tapant exit. Dans
<!--
/usr/lib/leafnode/config
-->
 /usr/lib/leafnode/config, on
change la ligne qui déclare le serveur NNTP.  Dans notre cas&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
server = news.acme.xz
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Leafnode se recherchera lui-même en ajoutant la commande suivante par
crontab -e comme utilisateur <CODE>news</CODE>&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
# expiration de Leafnode, une fois par jour
0 4 * * * /usr/local/sbin/texpire
</PRE>
</CODE></BLOCKQUOTE>

<!--
texpire
-->
</P>
<P>L'échange de News est aussi réalisé sous le compte <CODE>news</CODE> par la
commande suivante (PPP est sensé fonctionner)&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
/usr/local/sbin/fetch
</PRE>
</CODE></BLOCKQUOTE>

<!--
fetch
-->
</P>
<P>Les utilisateurs voulant lire les news doivent alors utiliser la recette
décrite dans <I>Comment configurer un lecteur de News on-line ?</I>, en la
configurant pour la machine locale, i.e&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
export NNTPSERVER=localhost
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>C'est tout ce qu'il y a à faire. Le premier <CODE>fetch</CODE> transférera
une liste des groupes de news disponibles. Leafnode s'occupera alors des
groupes que les utilisateurs désirent et s'adaptera la <B>prochaine fois</B>
qu'il est activé.</P>
<P>Notez que leafnode semble ne pas fonctionner dans les cas où une
autorisation NNTP est nécessaire.</P>
<P><B>ALT :</B> Une alternative à leafnode est
nntpcache, disponible à&nbsp;:</P>
<P><CODE>
<A HREF="ftp://ftp.suburbia.net/pub/nntpcache/nntpcache.tgz">ftp://ftp.suburbia.net/pub/nntpcache/nntpcache.tgz</A></CODE></P>
<P><B>ALT :</B> Une autre possibilité est d'utiliser le lecteur de news
<!--
slrn
-->
 slrn en même temps que le paquetage 
<!--
slrn-
pull
-->
 slrn-pull. Le lecteur de news doit avoir été compilé
avec l'option <CODE>spool</CODE>.</P>

<H2><A NAME="s6">6. Comment automatiser la procédure de connexion ?</A></H2>

<P>La gestion automatisée des news et du courrier est simple à réaliser sous Linux.</P>
<P>Tout d'abord, on doit créer un script 
<!--
/usr/lib/ppp/ppp-on
-->

/usr/lib/ppp/ppp-on qui démarre la connexion au F.A.I. Souvent, ce
fichier contient simplement la ligne suivante&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
/usr/sbin/pppd
</PRE>
</CODE></BLOCKQUOTE>

<!--
pppd
-->

Les précisions supplémentaires sont faites dans
<!--
/etc/ppp/options
-->
 /etc/ppp/options&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
connect "/usr/lib/ppp/chat -v -f /etc/ppp/chatscript"
crtscts
modem
defaultroute
asyncmap 00000000
user dirk
/dev/modem 38400
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Pour terminer une connexion, on utilise la version fournie de
<!--
/usr/lib/ppp/ppp-off
-->
 /usr/lib/ppp/ppp-off.</P>
<P>Après avoir testé le fonctionnement de ces deux scripts, on doit écrire ceux
qui réalisent les différentes tâches. Le script pour récupérer le courrier a
été décrit plus haut et on suppose qu'il se trouve dans
/home/dirk/pop.</P>
<P>Un script pour l'envoi de courrier peut être créé dans
/root/mail&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
#! /bin/sh
#
# échange de courrier
# timeout de 10 minutes :
TIMEOUT=600
DT=10

# lancer sendmail :
sendmail -q &amp;

# récupérer le courrier :
su dirk -c /home/dirk/pop

# attendre que sendmail se termine :
t=0
while ! mailq | grep -q "Mail queue is empty"; do
    t=$[$t+$DT]
    if [ $t -gt $TIMEOUT ] ; then
     echo "sendmail -q timeout ($TIMEOUT).."
     exit 1
    fi
    sleep $DT
done

exit 0
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Le script pour envoyer des News peut être créé dans
/usr/lib/news/news&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
#!/bin/sh
#
# échange des news
# doit &ecirc;tre lancé par l'utilisateur news :
cd /usr/lib/news

# mettre à jour le lot de sortie (C News) :
/usr/lib/newsbin/input/newsrun &lt; /dev/null

# échange des news :
/usr/lib/newsbin/newsx acme news.acme.xz

# vidage du lot entrant :
/usr/lib/newsbin/input/newsrun &lt; /dev/null
</PRE>
</CODE></BLOCKQUOTE>

Un script pour rassembler tout cela reste à écrire dans 
/root/news+mail:
<BLOCKQUOTE><CODE>
<PRE>
#!/bin/sh
#
# échange de courrier et de news
# doit &ecirc;tre lancé par root
#
if ! /usr/lib/ppp/ppp-on; then
    exit 1
fi
trap "/usr/lib/ppp/ppp-off" 1 2 3 15

# échange de news+mail :
/root/mail &amp;
su news -c &nbsp;news/news
wait

# déconnexion...
/usr/lib/ppp/ppp-off

# mise à jour du lot entrant (C News) :
su news -c /usr/lib/newsbin/input/newsrun &lt; /dev/null &amp;

exit 0
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Il est très facile d'étendre tout ceci afin de n'établir une connexion que si
du courrier ou des news sortants sont présents.  On appellera ce script
<!--
/root/news+mail.cond
-->
 /root/news+mail.cond, et on se
rappellera que le nom du spool de news sortant doit être modifié pour que cela
fonctionne&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
#!/bin/sh
#
# échange de news et courrier, seulement s'il y a des news ou du courrier sortant.
# (C News spool)
if [ -s /var/spool/news/out.going/acme/togo ] ||
    ! ( mailq | grep -q "Mail queue is empty"); then
     /root/news+mail
fi
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>La seule chose restant à faire est de dire le moment où tout cela doit se
passer. Pour cela, on utilise la commande 
<!--
crontab
-->
 crontab
-e sous le compte root. On suppose que l'on veut toujours échanger les
news et le courrier à 7 heures du matin, puis toutes les 4 heures s'il y a des
news et du mail sortant&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
00 7           * * *     /root/news+mail
00 11,15,19,23 * * *     /root/news+mail.cond
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Il faut s'assurer que chaque partie fonctionne correctement avant de les
intégrer ensemble. On peut ajouter plusieurs autres tâches par la suite,
comme le réglage de l'horloge (en utilisant 
<!--
ntpdate
-->

ntpdate), et la mise à jour automatique (miroir) des fichiers WWW er FTP
locaux par rapport à ceux du F.A.I (en utilisant make et ftp).</P>
<P><B>ALT :</B> Selon les préférences, il est aussi possible de renverser le
processus. Chaque fois qu'une connexion PPP est établie, le script
<!--
/etc/ppp/ip-up
-->
 /etc/ppp/ip-up sera démarré. On peut y
ajouter tout ce qui est nécessaire pour démarrer l'échange de courrier et des
news. Voir man pppd pour plus de détails.</P>
<P><B>ALT :</B> On peut aussi se connecter en PPP à chaque fois qu'un trafic
réseau est détecté.  C'est, dans bien des cas, la solution la plus élégante
mais elle est tributaire d'une bonne configuration pour éviter l'établissement
de connexions fréquentes et coûteuses.  Plus d'information peut
être trouvée à&nbsp;:</P>
<P><CODE>
<A HREF="http://www.dna.lth.se/&nbsp;erics/diald.html">http://www.dna.lth.se/&nbsp;erics/diald.html</A></CODE></P>
<P>L'utilitaire <CODE>diald</CODE> est disponible à&nbsp;:</P>
<P><CODE>
<A HREF="ftp://sunsite.unc.edu/pub/Linux/system/Network/serial/diald-0.16.tar.gz">ftp://sunsite.unc.edu/pub/Linux/system/Network/serial/diald-0.16.tar.gz</A></CODE></P>
<P>Au même endroit, on trouvera aussi d'autres variations sur les connexions PPP.</P>

<H2><A NAME="s7">7. Pour finir</A></H2>

<H2><A NAME="ss7.1">7.1 Y a t'il d'autres choses que je devrais savoir ?</A>
</H2>

<P> 
<UL>
<LI> Les différents messages d'erreurs du système seront normalement envoyés
en courrier interne. Pour s'assurer qu'ils pourront être lus, on doit créer un
fichier 
<!--
/etc/aliases
-->
 /etc/aliases. Ne pas oublier la
commande <CODE>newaliases</CODE> à chaque fois qu'on change ce fichier. Un
exemple qui devrait couvrir la plupart des éventualités est&nbsp;:</LI>
</UL>

<BLOCKQUOTE><CODE>
<PRE>
PostMaster: root
ftp: root
news: root
usenet: root
FaxMaster: root
fax: root
WebMaster: root
MAILER.DAEMON: root
</PRE>
</CODE></BLOCKQUOTE>

<!--
PostMaster
-->
</P>
<P> 
<UL>
<LI> Un grand nombre de programmes pour Linux peuvent être trouvés sur
<!--
Sunsite
-->
 <B>Sunsite</B>, qui est généralement plutôt
encombré. Cependant, il y a de nombreux miroirs et chaque fois qu'une
référence à ftp://sunsite.unc.edu/pub/Linux/.. est faite, on doit
essayer d'utiliser un miroir proche de chez soi, par exemple,
ftp://ftp.lip6.fr/pub/linux/sunsite/...
</LI>
<LI> Pour ceux qui viennent du monde Yarn, une conversion vers les
répertoires standards est possible en utilisant le programme
yarn2mf disponible à&nbsp;:</LI>
</UL>
</P>
<P><CODE>
<A HREF="ftp://ftp.sol.no/user/egilk/yarn2mf.zip">ftp://ftp.sol.no/user/egilk/yarn2mf.zip</A></CODE></P>

<H2><A NAME="s8">8. Informations spécifiques aux F.A.I.</A></H2>

<P>Des informations plus spécifiques à certains F.A.I. sont disponibles à partir
de plusieurs sources&nbsp;:</P>
<P><B>Démon Internet</B></P>
<P><CODE>
<A HREF="ftp://ftp.demon.co.uk/pub/unix/linux/Demon/slack3.0.help.tgz">ftp://ftp.demon.co.uk/pub/unix/linux/Demon/slack3.0.help.tgz</A></CODE></P>
<P><B>Netcom</B></P>
<P><CODE>
<A HREF="http://www.netcom.com/bin/webtech/NetCruiser/Operating_Systems/Linux/linux.cfg.html">http://www.netcom.com/bin/webtech/NetCruiser/Operating_Systems/Linux/linux.cfg.html</A></CODE></P>
<P><B>PowerTech, Telenor Online, Telia</B> 
<!--
PowerTech
-->

<!--
Telenor Online
-->
 
<!--
Telia
-->
</P>
<P><CODE>
<A HREF="http://www.kvaleberg.com/no-isp.html">http://www.kvaleberg.com/no-isp.html</A></CODE></P>
<P><B>Stanford</B></P>
<P><CODE>
<A HREF="http://www-leland.stanford.edu/&nbsp;wkn/Linux/network/network.html">http://www-leland.stanford.edu/&nbsp;wkn/Linux/network/network.html</A></CODE></P>
<P><B>MCI</B></P>
<P><CODE>
<A HREF="http://www.kvaleberg.com/linux-mci.html">http://www.kvaleberg.com/linux-mci.html</A></CODE></P>
<P><B>SISCOM</B></P>
<P><CODE>
<A HREF="http://www.siscom.net/support/linux_setup.htm">http://www.siscom.net/support/linux_setup.htm</A></CODE></P>
<P><B>AOL</B> ce n'est pas possible car AOL utilise un protocole propriétaire.</P>
<P>Si vous pouvez donner une information spécifique à un F.A.I qui n'est pas
listée ici, merci de le signaler.</P>

<H2><A NAME="ss8.1">8.1 Comment en savoir plus ?</A>
</H2>

<P>Le livre du Linux Documentation Project, intitulé Linux Network
Administrator's Guide (NdT : traduit en français sous le titre
Administration réseau sous Linux) et écrit par Olaf Kirch est
obligatoire pour celui qui veut configurer et maintenir tout ce qui touche à
TCP/IP et à Internet.</P>
<P><CODE>
<A HREF="ftp://sunsite.unc.edu/pub/Linux/docs/linux-doc-project/network-guide/nag-1.0.ascii.tar.gz">ftp://sunsite.unc.edu/pub/Linux/docs/linux-doc-project/network-guide/nag-1.0.ascii.tar.gz</A></CODE></P>
<P>La documentation fournie avec chaque paquetage donne normalement toutes les
informations nécessaires, en tout cas, un survol. Les man-pages sont toujours
le premier endroit pour chercher une information. Par exemple, on peut
essayer&nbsp;: 
<BLOCKQUOTE><CODE>
<PRE>
 man pppd 
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>On peut aussi trouver de la documentation sur certains programmes dans
l'arborescence 
<!--
/usr/doc
-->
 /usr/doc, bien qu'elle ne
soit pas toujours bien structurée.</P>
<P>Les HOWTOS suivants sont particulièrement pertinents&nbsp;:</P>
<P> 
<UL>
<LI> <B>Installation-HOWTO</B> donne toutes les bases.</LI>
<LI> <B>NET-2-HOWTO</B> est une description très minutieuse de l'installation et de la configuration du code NET.
La plupart de ces opérations doit s&ucirc;rement avoir déjà été faite si on utilise une distribution Linux standard 
(par ex. Slackware, Red Hat, Debian).  Mais plusieurs sections sur la configuration et les problèmes rencontrés valent vraiment 
la peine d'&ecirc;tre lues.</LI>
<LI> <B>Mail-HOWTO</B> explique comment configurer les différents outils. Comme précédemment, la plupart de
ces réglages auront déjà été faits lors de l'installation d'une distribution Linux standard.</LI>
<LI> <B>News-HOWTO</B> concerne la mise en place d'un spool de News classique.</LI>
<LI> <B>Tiny-News</B> couvre encore une autre possibilité pour récupérer les News.</LI>
<LI> <B>PPP-HOWTO</B> est une bonne description des problèmes que que l'on peut rencontrer lorsqu'on met en 
place une connexion PPP.</LI>
<LI> <B>Serial-HOWTO</B> contient tout ce que l'on doit savoir sur la configuration des ports série.</LI>
<LI> <B>Mail-Queue</B> explique comment configurer
<I>sendmail</I> pour toujours mettre en attente le courrier distant tout en délivrant le courrier local en m&ecirc;me temps.</LI>
</UL>

Red Hat a une liste de diffusion spécialisée pour PPP ; pour en faire partie, envoyez un 
message à </P>
<P><CODE>
<A HREF="mailto:redhat-ppp-list-request">redhat-ppp-list-request</A></CODE>
avec le champ sujet suivant&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
subscribe
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="ss8.2">8.2 Remerciements</A>
</H2>

<P>Toutes ces informations viennent de nombreuses sources. Merci aux personnes suivantes qui ont participé directement, ou indirectement&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
Adam Holt &lt;holt@graphics.lcs.mit.edu&gt;
Arne Coucheron &lt;arneco@oslonett.no&gt;
Arne Riiber &lt;riiber@oslonett.no&gt;
Arnt Gulbrandsen &lt;agulbra@troll.no&gt;
Bjorn Steensrud &lt;bjornst@powertech.no&gt;
Gisle Hannemyr &lt;gisle@a.sn.no&gt;
Hans Amund Rosbach &lt;haro@sesam.dnv.no&gt;
Hans Peter Verne &lt;hpv@ulrik.uio.no&gt;
Harald T Alvestrand &lt;Harald.T.Alvestrand@uninett.no&gt;
Harald Terkelsen  &lt;Harald.Terkelsen@adm.hioslo.no&gt;
Haavard Engum &lt;hobbes@interlink.no&gt;
James Youngman &lt;JYoungman@vggas.com&gt;
Johan S. Seland &lt;johanss@sn.no&gt;
John Phillips &lt;john@linux.demon.co.uk&gt;
Jorn Lokoy &lt;jorn@oslonett.no&gt;
Kenneth Tjostheim &lt;kenneth.tjostheim@asplanviak.no&gt;
Kjell M. Myksvoll &lt;kjell.myksvoll@fou.telenor.no&gt;
Kjetil T. Homme &lt;kjetilho@math.uio.no&gt;
Michael Meissner &lt;meissner@cygnus.com&gt;
N J Bailey &lt;N.J.Bailey@leeds.ac.uk&gt;
Nicolai Langfeldt &lt;janl@math.uio.no&gt;
Ove Ruben R Olsen &lt;Ove.R.Olsen@ub.uib.no&gt;
R. Bardarson &lt;ronb@powernet.net&gt;
Steinar Fremme &lt;steinar@fremme.no&gt;
Sverre H. Huseby &lt;sverrehu@ifi.uio.no&gt;
Trond Eivind Glomsrod &lt;teg@stud.imf.unit.no&gt;
Tommy Larsen &lt;tommy@mix.hive.no&gt;
Yves Bellefeuille &lt;yan@storm.ca&gt;
</PRE>
</CODE></BLOCKQUOTE>
</P>

</BODY>
</HTML>
