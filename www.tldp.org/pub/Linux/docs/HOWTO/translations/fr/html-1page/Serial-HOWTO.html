<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
 <TITLE>Le Linux HOWTO pour les ports série</TITLE>
</HEAD>
<BODY>
<H1>Le Linux HOWTO pour les ports série</H1>

<H2>Greg Hankins, <CODE>
<A HREF="mailto:greg.hankins@cc.gatech.edu">greg.hankins@cc.gatech.edu</A></CODE> <BR>
traduit par Eric Festinger, <CODE>
<A HREF="mailto:eric@midix.frmug.org">eric@midix.frmug.org</A></CODE></H2>v1.11, 15 Novembre 1997
<HR>
<EM>    Ce document décrit la configuration sous Linux des ports série,
        des programmes associés, et des périphériques qui y sont
        connectés.</EM>
<HR>
<H2><A NAME="s1">1. Introduction</A></H2>

<P>Ce document est la traduction française du Linux Serial HOWTO.
Il tente de décrire la configuration des modems et terminaux
sous Linux, de donner quelques conseils, et enfin de résoudre
les problèmes liés aux ports série.  Il est destiné plus
particulièrement aux plateformes Intel x86, même s'il doit être
applicable à d'autres architectures.</P>

<H2><A NAME="ss1.1">1.1 Copyright</A>
</H2>

<P>Copyright (c) 1993 - 1997 Greg Hankins.  Ce document peut être
redistribué sous les termes de la licence LDP disponible à
<CODE>
<A HREF="http://sunsite.unc.edu/LDP/COPYRIGHT.html">http://sunsite.unc.edu/LDP/COPYRIGHT.html</A></CODE>.  Il ne
peut être modifié sans l'accord de son auteur.</P>

<H2><A NAME="ss1.2">1.2 Nouvelles versions de ce document</A>
</H2>

<P>La version originale la plus récente de ce document est
disponible à <CODE>
<A HREF="ftp://sunsite.unc.edu/pub/Linux/docs/HOWTO/">ftp://sunsite.unc.edu/pub/Linux/docs/HOWTO/</A></CODE> ainsi
que sur les sites miroirs. D'autres formats (PostScript, DVI...)
existent dans le répertoire <CODE>
<A HREF="ftp://sunsite.unc.edu/pub/Linux/docs/HOWTO/other-formats/">other-formats</A></CODE>. Ce HOWTO est également consultable à
<CODE>
<A HREF="http://sunsite.unc.edu/LDP/HOWTO/Serial-HOWTO.html">http://sunsite.unc.edu/LDP/HOWTO/Serial-HOWTO.html</A></CODE>
et est posté mensuellement dans le forum de discussions
<CODE>
<A HREF="news:comp.os.linux.answers">comp.os.linux.answers</A></CODE>.</P>
<P>La version française est disponible sur  <CODE>
<A HREF="http://www.freenix.fr/linux/HOWTO/Serial-HOWTO.html">http://www.freenix.fr/linux/HOWTO/Serial-HOWTO.html</A></CODE>,
et est postée tous les mois dans <CODE>
<A HREF="news:fr.comp.os.linux.annonces">fr.comp.os.linux.annonces</A></CODE>.</P>

<H2><A NAME="ss1.3">1.3 Retour d'informations</A>
</H2>

<P>Merci de me faire parvenir par email à <CODE>
<A HREF="mailto:greg.hankins@cc.gatech.edu">greg.hankins@cc.gatech.edu</A></CODE> toutes questions,
commentaires et suggestions. Je suis extrêmement intéressé par
ce que vous pensez à propos de ce HOWTO, et par les éventuelles
améliorations.   Faites-moi part de ce que vous ne comprenez pas
ou de ce qui nécessite des éclaircissements. Je répondrais à
tous les emails, même si ça peut me prendre une semaine ou plus.
Je reçois beaucoup de messages de <CODE>root</CODE> ou de sites mal
configurés. Assurez-vous de m'envoyer un message électronique en
tant que personne réelle, ainsi que du bon fonctionnement de
votre système de messagerie. Si vous n'avez toujours pas de
réponse de ma part au bout de deux semaines, merci de m'envoyer
à nouveau votre message.</P>
<P>Je peux également être joint à&nbsp;:<BR> 
Greg Hankins<BR>
College of Computing<BR>
801 Atlantic Drive<BR>
Atlanta, GA 30332-0280<BR>
par courrier postal, et à  <CODE>
<A HREF="http://www.cc.gatech.edu/staff/h/Greg.Hankins/">http://www.cc.gatech.edu/staff/h/Greg.Hankins/</A></CODE>.</P>
<P>Merci d'inclure le numéro de version de ce HOWTO dans votre
message.  Ceci est la version 1.11.</P>

<H2><A NAME="ss1.4">1.4 Avertissement</A>
</H2>

<P>Votre système peut varier par rapport aux exemples, et les
solutions présentées dans ce HOWTO peuvent ne pas fonctionner.</P>

<H2><A NAME="s2">2. Matériel supporté </A></H2>

<P>Les matériels suivants fonctionnent correctement sous Linux.</P>

<H2><A NAME="ss2.1">2.1 Cartes série standards pour PC</A>
</H2>

<P>
<UL>
<LI>cartes série standards pour PC (COM1 - COM4), auxquelles
peuvent être connectés des périphériques série externes (modems,
souris série, etc.)</LI>
<LI>modems internes standards pour PC (COM1 - COM4)</LI>
<LI>Quickpath Systems Port-Folio 550e (autorisant les IRQ 3,
4, 5, 9, 10, 11, 12, ou 15)</LI>
</UL>
</P>

<P>Remarque&nbsp;: en raison de conflits d'adresses, vous ne pouvez
pas utilisez simultanément COM4 et une carte vidéo IBM8514.
Ceci est dû à un bogue de la carte IBM8514.</P>

<H2><A NAME="ss2.2">2.2 Modems Plug And Play (PnP)</A>
</H2>

<P>Même si les modems PnP fonctionnent sous Linux, je ne les recommande pas.
Néanmoins, voici quelques conseils&nbsp;:
<UL>
<LI>Essayez de désactiver les fonctionnalités PnP dans le BIOS
de l'ordinateur et du modem.</LI>
<LI>Démarrez sous Win95, configurez le modem, et vérifiez que
les paramètres sont sauvegardés lorsque vous redémarrez sous
Linux. Si ce n'est pas le cas&nbsp;:</LI>
<LI>Démarrez sous Win95, configurez le modem, et redémarrez à
chaud (<EM>warm boot</EM>) sous Linux, de manière à ce que les
paramètres soient préservés. Vous pouvez effectuer cette
manipulation avec <CODE>loadlin</CODE>.</LI>
<LI>Récupérez les outils PnP à <CODE>
<A HREF="http://www.redhat.com/linux-info/pnp">http://www.redhat.com/linux-info/pnp</A></CODE>.</LI>
<LI>Et, bien sûr, utilisez un <EM>vrai</EM> modem&nbsp;:-)</LI>
</UL>
</P>

<H2><A NAME="ss2.3">2.3 Cartes série multiports simples (équipées d'UART 8250/16450/16550A)</A>
</H2>

<P>
<UL>
<LI>AST FourPort et compatibles (4 ports)</LI>
<LI>Accent Async-4 (4 ports)</LI>
<LI>Arnet Multiport-8 (8 ports)</LI>
<LI>Bell Technologies HUB6 (6 ports)</LI>
<LI>Boca BB-1004 (4 ports), BB-1008 (8 ports), BB-2016 (16
ports)</LI>
<LI>Boca IOAT66 (6 ports)</LI>
<LI>Boca 2by4 (4 ports série, 2 ports parallèles)</LI>
<LI>Computone ValuePort V4-ISA (compatible AST FourPort)</LI>
<LI>Digi PC/8 (8 ports)</LI>
<LI>GTEK BBS-550 (8 ports)</LI>
<LI>Longshine LCS-8880, Longshine LCS-8880+ (compatible AST
FourPort)</LI>
<LI>Moxa C104, Moxa C104+ (compatible AST FourPort)</LI>
<LI>PC-COMM (4 ports)</LI>
<LI>
<A HREF="http://www.sealevel.com">Sealevel  Systems</A> COMM-2 (2 ports), COMM-4 (4 ports) et COMM-8 (8
ports)</LI>
<LI>SIIG I/O Expander 2S IO1812 (4 ports)</LI>
<LI>STB-4COM (4 ports)</LI>
<LI>Twincom ACI/550</LI>
<LI>Usenet Serial Board II (4 ports)</LI>
</UL>
</P>
<P>De manière générale, Linux supporte n'importe quelle carte
équipée d'un UART 8250, 16450, 16550 ou 16550A (ou compatible),
et n'importe quel modem émulant un de ces composants.</P>
<P>Remarque&nbsp;: les BB-1004 et BB-1008 ne supportent pas les
signaux DCD et RI, et ne sont donc pas utilisables pour des
modems répondeurs. Ils fonctionnent néanmoins très bien dans les
autres cas.</P>

<H2><A NAME="ss2.4">2.4 Cartes série multiports intelligentes</A>
</H2>

<P>
<UL>
<LI>Comtrol RocketPort (ASIC 36MHz ; 4, 8, 16 ou 32 ports)<BR>
contact&nbsp;: <CODE>
<A HREF="mailto:info@comtrol.com">info@comtrol.com</A></CODE> ou <CODE>
<A HREF="http://www.comtrol.com">http://www.comtrol.com</A></CODE><BR> 
état du gestionnaire de périphérique&nbsp;: supporté par
Comtrol<BR>
emplacement&nbsp;: <CODE>
<A HREF="ftp://tsx-11.mit.edu/pub/linux/packages/comtrol">ftp://tsx-11.mit.edu/pub/linux/packages/comtrol</A></CODE>
</LI>
<LI>Computone IntelliPort II (80186 16MHz ; 4, 8, ou 16
ports),<BR>
IntelliPort II EXpandable (80186 20MHz ; 16 - 64 ports)<BR>
contact&nbsp;: Michael H. Warfield, <CODE>
<A HREF="mailto:mhw@wittsend.atl.ga.us">mhw@wittsend.atl.ga.us</A></CODE><BR>
état du gestionnaire de périphérique&nbsp;: pré-ALPHA
</LI>
<LI>Cyclades Cyclom-Y (UART Cirrus Logic CD1400 ; 8 - 32
ports),<BR>
Cyclom-Z (MIPS R3000 25MHz ; 8 - 128 ports)<BR>
contact&nbsp;: <CODE>
<A HREF="mailto:sales@cyclades.com">sales@cyclades.com</A></CODE> ou <CODE>
<A HREF="http://www.cyclades.com">http://www.cyclades.com</A></CODE><BR>
état du gestionnaire de périphérique&nbsp;: supporté par
Cyclades<BR>
emplacement&nbsp;: <CODE>
<A HREF="ftp://ftp.cyclades.com/pub/cyclades">ftp://ftp.cyclades.com/pub/cyclades</A></CODE> et inclus dans
le noyau Linux depuis la version 1.1.75
</LI>
<LI>Decision PCCOM8 (8 ports)<BR>
contact&nbsp;: <CODE>
<A HREF="mailto:pccom8@signum.se">pccom8@signum.se</A></CODE><BR>
emplacement&nbsp;: <CODE>
<A HREF="ftp://ftp.signum.se/pub/pccom8">ftp://ftp.signum.se/pub/pccom8</A></CODE>
</LI>
<LI>Digi PC/Xi (80186 12.5MHz ; 4, 8, ou 16 ports),<BR>
PC/Xe (80186 12.5/16MHz ; 2, 4, ou 8 ports),<BR>
PC/Xr (IDT3041 16MHz ; 4 ou 8 ports),<BR>
PC/Xem (IDT3051 20MHz ; 8 - 64 ports)<BR>
contact&nbsp;: <CODE>
<A HREF="mailto:sales@dgii.com">sales@dgii.com</A></CODE> ou <CODE>
<A HREF="http://www.dgii.com">http://www.dgii.com</A></CODE><BR>
état du gestionnaire de périphérique&nbsp;: supporté par
Digi<BR>
emplacement&nbsp;: <CODE>
<A HREF="ftp://ftp.dgii.com/drivers/linux">ftp://ftp.dgii.com/drivers/linux</A></CODE> et inclus dans le
noyau Linux depuis la version 2.0
</LI>
<LI>Digi COM/Xi (80188 10MHz ; 4 ou 8 ports)<BR>
contact&nbsp;: Simon Park, <CODE>
<A HREF="mailto:si@wimpol.demon.co.uk">si@wimpol.demon.co.uk</A></CODE><BR>
état du gestionnaire de périphérique&nbsp;: ALPHA<BR>
Remarque&nbsp;: régulièrement, Simon ne peut pas lire son mail
pendant plusieurs mois à cause de son travail. Mark Hatle,
<CODE>
<A HREF="mailto:fray@krypton.mankato.msus.edu">fray@krypton.mankato.msus.edu</A></CODE> s'est gracieusement
porté volontaire pour rendre le gestionnaire de périphérique
disponible si vous en avez besoin. Néanmoins, Mark ne s'occupe
pas de la maintenance ni du support de ce gestionnaire.
</LI>
<LI>Equinox SuperSerial Technology (ASIC 30MHz ; 2 - 128
ports)<BR>
contact&nbsp;: <CODE>
<A HREF="mailto:sales@equinox.com">sales@equinox.com</A></CODE> ou <CODE>
<A HREF="http://www.equinox.com">http://www.equinox.com</A></CODE><BR>
état du gestionnaire de périphérique&nbsp;: supporté par
Equinox<BR>
emplacement&nbsp;: <CODE>
<A HREF="ftp://ftp.equinox.com/library/sst">ftp://ftp.equinox.com/library/sst</A></CODE>
</LI>
<LI>GTEK Cyclone (UART 16C654 ; 6, 16 et 32 ports),<BR>
SmartCard (Dallas DS80C320 24MHz ; 8 ports),<BR>
BlackBoard-8A (UART 16C654 ; 8 ports),<BR>
PCSS (8032 15/24MHz ; 8 ports)<BR>
contact&nbsp;: <CODE>
<A HREF="mailto:spot@gtek.com">spot@gtek.com</A></CODE> ou <CODE>
<A HREF="http://www.gtek.com">http://www.gtek.com</A></CODE><BR>
état du gestionnaire de périphérique&nbsp;: supporté par
GTEK<BR>
emplacement&nbsp;: <CODE>
<A HREF="ftp://ftp.gtek.com/pub">ftp://ftp.gtek.com/pub</A></CODE>
</LI>
<LI>Hayes ESP (COM-bic ; 1 - 8 ports)<BR> 
contact&nbsp;: Andrew J. Robinson, <CODE>
<A HREF="mailto:arobinso@nyx.net">arobinso@nyx.net</A></CODE> ou
<CODE>
<A HREF="http://www.nyx.net/~arobinso">http://www.nyx.net/~arobinso</A></CODE><BR>
état du gestionnaire de périphérique&nbsp;: supporté par
l'auteur<BR>
emplacement&nbsp;: <CODE>
<A HREF="http://www.nyx.net/~arobinso">http://www.nyx.net/~arobinso</A></CODE> et inclus dans
le noyau Linux depuis la version 2.1.15
</LI>
<LI>Maxpeed SS (Toshiba ; 4, 8 et 16 ports)<BR>
contact&nbsp;: <CODE>
<A HREF="mailto:info@maxpeed.com">info@maxpeed.com</A></CODE> ou <CODE>
<A HREF="http://www.maxpeed.com">http://www.maxpeed.com</A></CODE><BR>
état du gestionnaire de périphérique&nbsp;: supporté par
Maxpeed<BR>
emplacement&nbsp;: <CODE>
<A HREF="ftp://maxpeed.com/pub/ss">ftp://maxpeed.com/pub/ss</A></CODE>
</LI>
<LI>Moxa C218 (80286 12MHz ; 8 ports),<BR> 
Moxa C320 (TMS320 40MHz ; 8 - 32 ports)<BR>
contact&nbsp;: <CODE>
<A HREF="mailto:info@moxa.com.tw">info@moxa.com.tw</A></CODE> ou <CODE>
<A HREF="http://www.moxa.com.tw">http://www.moxa.com.tw</A></CODE><BR>
état du gestionnaire de périphérique&nbsp;: supporté par
Moxa<BR>
emplacement&nbsp;: <CODE>
<A HREF="ftp://ftp.moxa.com.tw/drivers/c218-320/linux">ftp://ftp.moxa.com.tw/drivers/c218-320/linux</A></CODE>
</LI>
<LI>SDL RISCom/8 (Cirrus Logic CD180 ; 8 ports)<BR>
contact&nbsp;: <CODE>
<A HREF="sales@sdlcomm.com">sales@sdlcomm.com</A></CODE> ou <CODE>
<A HREF="http://www.sdlcomm.com">http://www.sdlcomm.com</A></CODE><BR>
état du gestionnaire de périphérique&nbsp;: supporté par
SDL<BR>
emplacement&nbsp;: <CODE>
<A HREF="ftp://ftp.sdlcomm.com/pub/drivers">ftp://ftp.sdlcomm.com/pub/drivers</A></CODE>
</LI>
<LI>Specialix SIO (Zilog Z280 20MHz ; 4 - 32 ports),<BR>
XIO (25MHz Zilog Z280 ; 4 - 32 ports)<BR>
contact : Simon Allen, <CODE>
<A HREF="mailto:simonallen@cix.compulink.co.uk">simonallen@cix.compulink.co.uk</A></CODE><BR>
état du gestionnaire de périphérique&nbsp;: BETA<BR>
emplacement&nbsp;: <CODE>
<A HREF="ftp://sunsite.unc.edu/pub/Linux/kernel/patches/serial">ftp://sunsite.unc.edu/pub/Linux/kernel/patches/serial</A></CODE>
</LI>
<LI>Stallion EasyIO-4 (4 ports), EasyIO-8 (8 ports),
et<BR>
EasyConnection (8 - 32 ports) - toutes avec des UART,<BR>
Stallion (CPU 80186 8MHz ; 8 ou 16 ports),<BR>
Brumby (CPU 80186 10/12 MHz ; 4, 8 ou 16 ports),<BR>
ONboard (CPU 80186 16MHz ; 4, 8, 12, 16 ou 32 ports),<BR>
EasyConnection 8/64 (CPU 80186 25MHz ; 8 - 64 ports)<BR>
contact&nbsp;: <CODE>
<A HREF="mailto:sales@stallion.com">sales@stallion.com</A></CODE> ou <CODE>
<A HREF="http://www.stallion.com">http://www.stallion.com</A></CODE><BR>
état du gestionnaire de périphérique&nbsp;: supporté par
Stallion<BR>
emplacement&nbsp;: <CODE>
<A HREF="ftp://ftp.stallion.com/drivers/ata5/Linux">ftp://ftp.stallion.com/drivers/ata5/Linux</A></CODE> et inclus
dans le noyau Linux depuis la version 1.3.27</LI>
</UL>
                 </P>
<P>Un descriptif des produits Comtrol, Cyclades, Digi, et Stallion
est paru dans le numéro 14 de juin 1995 du <EM>Linux Journal</EM>.
Il est disponible à <CODE>
<A HREF="http://www.ssc.com/lj/issue14">http://www.ssc.com/lj/issue14</A></CODE>. </P>

<H2><A NAME="ss2.5">2.5 Matériel non supporté</A>
</H2>

<P>Les modems dits ``Winmodems'', par exemple l'USR Sportster
Winmodem et l'IBM Aptiva MWAVE, ne sont <EM>pas</EM> supportés sous
Linux.  Ils utilisent des technologies propriétaires nécessitant
des gestionnaires de périphériques spéciaux pour Windows. Les
modems nécessitant des gestionnaires Rockwell RPI sont à éviter
pour la même raison.</P>
<P>Les cartes série intelligentes nécessitant des gestionnaires non
disponibles sous Linux, ne pourront pas fonctionner.</P>

<H2><A NAME="s3">3. Comment se nomment les ports série&nbsp;?</A></H2>

<P>Un port d'E/S permet de recevoir des données depuis, et d'en
envoyer à partir d'un ordinateur. Il existe plusieurs types de
ports d'E/S, comme les ports série, les ports parallèles, les
contrôleurs de disques durs, les cartes Ethernet, etc. Les
modems et les terminaux dont nous allons traiter n'utilisent que
des ports série.   Chacun de ces ports possède une adresse
d'E/S, et un vecteur d'interruption (IRQ). Les quatre ports
série suivants correspondent à COM1 - COM4 :
<BLOCKQUOTE><CODE>
<PRE>
ttyS0 (COM1) adresse 0x3f8 IRQ 4
ttyS1 (COM2) adresse 0x2f8 IRQ 3
ttyS2 (COM3) adresse 0x3e8 IRQ 4
ttyS3 (COM4) adresse 0x2e8 IRQ 3
</PRE>
</CODE></BLOCKQUOTE>

Si aucun port série n'est détecté lors de l'amorçage de Linux,
assurez-vous que leur support a été sélectionné et compilé dans
le noyau. Dans ce document, je me réfère à COM1 pour <CODE>ttyS0</CODE>,
COM2 pour <CODE>ttyS1</CODE>, COM3 pour <CODE>ttyS2</CODE>, et à COM4 pour
<CODE>ttyS3</CODE>.   Par défaut, ces ports ont des IRQ communes, et
vous ne pouvez pas les utiliser simultanément dans cette
configuration. Certaines de ces IRQ doivent être réassignées.
Reportez-vous à la section 
<A HREF="#irqaddr">Puis-je  utiliser plus de deux ports série&nbsp;?</A>.</P>
<P>Sur certaines installations, deux périphériques supplémentaires
vont être créés&nbsp;: <CODE>/dev/modem</CODE> pour le modem et
<CODE>/dev/mouse</CODE> pour la souris.  Ce sont des liens
symboliques sur le périphérique approprié (dans le répertoire
<CODE>/dev</CODE>) que vous avez spécifié lors de l'installation.
Si vous possédez une souris de type bus PS/2,
<CODE>/dev/mouse</CODE> pointera correctement sur le périphérique de
la souris bus.</P>
<P>Plusieurs discussions ont porté sur les avantages et
inconvénients de ces pseudo-périphériques <CODE>/dev/mouse</CODE> et
<CODE>/dev/modem</CODE>.  Personnellement, je décourage
<EM>fortement</EM> l'utilisation de ces liens.  En particulier, si
vous prévoyez d'employer plusieurs modems pour les connexions
entrantes sur <CODE>/dev/modem</CODE>, des problèmes peuvent
apparaître à cause des fichiers de verrouillage (<EM>lock
files</EM>).  Vous pouvez néanmoins les utiliser si vous le désirez,
mais <EM>assurez-vous qu'ils pointent bien sur les bons
périphériques</EM>.  Cependant, si vous supprimez ces liens,
certaines applications (comme <CODE>minicom</CODE>) peuvent ne plus
fonctionner sans reconfiguration.</P>

<H2><A NAME="ss3.1">3.1 Périphériques série et numéros dans <CODE>/dev</CODE></A>
</H2>

<P>
<BLOCKQUOTE><CODE>
<PRE>
/dev/ttyS0 majeur 4, mineur 64         /dev/cua0 majeur 5, mineur 64
/dev/ttyS1 majeur 4, mineur 65         /dev/cua1 majeur 5, mineur 65
/dev/ttyS2 majeur 4, mineur 66         /dev/cua2 majeur 5, mineur 66
/dev/ttyS3 majeur 4, mineur 67         /dev/cua3 majeur 5, mineur 67
</PRE>
</CODE></BLOCKQUOTE>

Remarque&nbsp;: toutes les distributions doivent être livrées
avec ces périphériques déjà correctement configurés, ce que vous
pouvez vérifier en tapant les commandes&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
linux% ls -l /dev/cua*
linux% ls -l /dev/ttyS*
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H3><A NAME="dev"></A> Créer les périphériques dans <CODE>/dev</CODE></H3>

<P>Si un périphérique est absent, vous devez le créer avec la
commande <CODE>mknod</CODE>.  Par exemple, pour <CODE>ttyS0</CODE>&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
linux# mknod -m 666 /dev/cua0 c 5 64
linux# mknod -m 666 /dev/ttyS0 c 4 64
</PRE>
</CODE></BLOCKQUOTE>

Le script <CODE>MAKEDEV</CODE>, situé dans le répertoire <CODE>/dev</CODE>,
peut être utilisé pour simplifier leur création. Par exemple,
pour <CODE>ttyS0</CODE>&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
linux# cd /dev
linux# ./MAKEDEV ttyS0
</PRE>
</CODE></BLOCKQUOTE>

Cette commande crée les périphériques d'entrée et de sortie
correspondants, et positionne également les bonnes permissions.</P>

<H2><A NAME="ss3.2">3.2 Remarques pour les cartes multiports simples</A>
</H2>

<P>Les périphériques utilisés par les cartes multiports sont
dépendants du type de carte que vous possédez. Ils sont listés
en détail dans le fichier <CODE>rc.serial</CODE> fourni avec le
programme <CODE>setserial</CODE>.  Je recommande vivement de
récupérer la version la plus récente de <CODE>setserial</CODE> si vous
devez utiliser une telle carte. Vous devrez alors sûrement créer
ces périphériques, soit avec la commande <CODE>mknod</CODE>, soit avec
le script <CODE>MAKEDEV</CODE>.  Ils doivent être déclarés en ajoutant
64 au numéro du port.  Par exemple, pour <CODE>ttyS17</CODE>&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
linux# mknod -m 666 /dev/cua17 c 5 81
linux# mknod -m 666 /dev/ttyS17 c 4 81
</PRE>
</CODE></BLOCKQUOTE>

Car ``64 + 17 = 81''.  En utilisant le script <CODE>MAKEDEV</CODE>, il
suffit d'entrer&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
linux# cd /dev
linux# ./MAKEDEV ttyS17
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Remarque&nbsp;: le listing des ports COM5-COM8 pour les IO1812
est erroné dans le manuel SIIG. Les valeurs doivent être
remplacées par COM5=0x250, COM6=0x258, COM7=0x260, et
COM8=0x268.</P>
<P>Remarque&nbsp;: le registre d'état d'interruption (<EM>Interrupt
Status Register</EM>) de la carte Digi PC/8 se trouve en 0x140.</P>

<P>Remarque&nbsp;: pour la carte AST Fourport, le fichier
<CODE>rc.serial</CODE> doit spécifier le paramètre <CODE>skip_test</CODE>.</P>

<H2><A NAME="ss3.3">3.3 Remarques pour les cartes multiports intelligentes</A>
</H2>

<P>Lisez les informations fournies avec le gestionnaire.  Ces
cartes utilisent des périphériques non-standards. Ces
informations varient suivant le matériel.</P>

<H2><A NAME="s4">4. Quelques programmes intéressants à connaître</A></H2>

<H2><A NAME="ss4.1">4.1 Qu'est-ce que <CODE>getty</CODE> ?</A>
</H2>

<P><CODE>getty</CODE> est un programme qui gère la phase d'entrée en
session (<EM>login</EM>) sur un système Unix. Il est indispensable
si vous souhaitez vous loguer sur votre machine Linux avec un
modem. Il n'est par contre pas utile pour des communications
sortantes. Il existe trois versions couramment utilisées avec
Linux&nbsp;: <CODE>getty_ps</CODE>, <CODE>mgetty</CODE> et <CODE>agetty</CODE>. Chacune
possède sa propre syntaxe. Aussi, assurez-vous d'utiliser celle
correspondant à votre version de <CODE>getty</CODE>.</P>

<H3>À propos de <CODE>getty_ps</CODE></H3>

<P>     
La plupart des distributions installent directement le paquetage
<CODE>getty_ps</CODE>.  Il contient deux programmes&nbsp;: <CODE>getty</CODE>
pour la console et les terminaux, et <CODE>uugetty</CODE> pour les
modems.  Je parlerai essentiellement de cette version, car c'est
celle que j'utilise.</P>

<H3>À propos de <CODE>mgetty</CODE></H3>

<P><CODE>mgetty</CODE> est un <CODE>getty</CODE> spécialisé pour l'utilisation avec
des modems. Par rapport aux autres versions, <CODE>mgetty</CODE> gère
les fax, et détecte automatiquement les connexions PPP. La
documentation est excellente et suffisante. Veuillez vous y
reporter pour l'installation. Les informations les plus récentes
sur <CODE>mgetty</CODE> peuvent être trouvées à <CODE>
<A HREF="http://www.leo.org/~doering/mgetty/">http://www.leo.org/~doering/mgetty/</A></CODE>.</P>

<H3>À propos de <CODE>agetty</CODE></H3>

<P><CODE>agetty</CODE> est la troisième variante de <CODE>getty</CODE>. C'est une
version simple complètement fonctionnelle, et plus
particulièrement destinée à l'utilisation des consoles
virtuelles et des terminaux plutôt que des modems.</P>

<H2><A NAME="ss4.2">4.2 Qu'est-ce que <CODE>setserial</CODE>&nbsp;?</A>
</H2>

<P><CODE>setserial</CODE> est un programme autorisant la consultation et la
modification des différents attributs (adresse de port,
interruption, etc.) d'un périphérique série.  Vous pouvez
déterminer le numéro de version installée en lançant
<CODE>setserial</CODE> sans argument.</P>
<P>Lorsque votre système Linux démarre, seuls <CODE>ttyS{0-3}</CODE> sont
configurés avec les IRQ positionnées par défault à 4 et 3. Si
vous possédez d'autres ports série sur d'autres cartes, ou si
<CODE>ttyS{0-3}</CODE> utilisent des IRQ non standards, vous <EM>devez</EM>
lancer ce programme pour configurer ces ports. Consultez le
manuel pour une description complète des options.</P>

<H2><A NAME="dialout"></A> <A NAME="s5">5. Comment puis-je appeler avec mon modem&nbsp;?</A></H2>

<H2><A NAME="ss5.1">5.1 Matériel nécessaire</A>
</H2>

<P>Tout d'abord, assurez-vous d'avoir le bon câble. Votre modem
requiert un câble droit, sans inversion de fils. Vous devriez
pouvoir vous en procurer dans n'importe quel magasin
d'informatique. Vérifiez également le genre des connecteurs.
Pour un port à 25 broches, ce sera toujours un modèle mâle DB25,
à ne pas confondre avec les ports parallèles à embase femelle
DB25. Connectez votre modem sur un de vos ports série.
Consultez si nécessaire le manuel de votre modem.</P>

<H3>Remarques pour les modems internes</H3>

<P>Pour un modem interne, aucun câble n'est nécessaire. De même,
aucun port série n'est requis, car la carte modem en possède un
interne.  Vous devez seulement configurer votre modem pour qu'il
utilise une interruption (IRQ) et une adresse d'E/S libres.
Reportez-vous au manuel de votre modem, ainsi qu'à la section
<A HREF="#irqaddr">Puis-je utiliser plus de deux  périphériques série&nbsp;?</A> si vous avez besoin d'aide pour
choisir les interruptions et les adresses.</P>
<P>Sur certaines cartes mères, il peut être nécessaire de
désactiver les ports série afin d'éviter les conflits avec le
modem. Cette manipulation peut être effectuée avec des cavaliers
ou les paramètres du BIOS. Consultez le manuel de votre carte
mère.</P>
<P>Suite à un bogue des cartes vidéo IBM8514, les modems internes
ne peuvent pas fonctionner sur <CODE>ttyS3</CODE>.  Si Linux ne détecte
pas le modem sur <CODE>ttyS3</CODE>, il suffit alors d'utiliser
<CODE>setserial</CODE> pour que le modem fonctionne correctement. Un
modem interne <CODE>ttyS{0-2}</CODE> ne devrait pas poser de problème de
détection.  Linux n'effectue pas d'autoconfiguration du
<CODE>ttyS3</CODE> à cause de ce bogue lié à la carte vidéo.</P>

<H2><A NAME="ss5.2">5.2 ``Parlez'' à votre modem </A>
</H2>

<P>Avant de vous lancez dans le paramétrage assez complexe de SLIP
ou PPP, utilisez <CODE>kermit</CODE> ou n'importe quel autre programme
de communication pour tester votre configuration.  La version la
plus récente de <CODE>kermit</CODE> peut être téléchargée depuis
<CODE>
<A HREF="http://www.columbia.edu/kermit/">http://www.columbia.edu/kermit/</A></CODE>.  L'exemple suivant
suppose que votre modem est sur <CODE>ttyS3</CODE>, et que sa
vitesse est fixée à 115200 bps&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
linux# kermit
C-Kermit 6.0.192, 6 Sep 96, for Linux
 Copyright (C) 1985, 1996,
  Trustees of Columbia University in the City of New York.
Default file-transfer mode is BINARY
Type&nbsp;? or HELP for help.
C-Kermit>set line /dev/ttyS3
C-Kermit>set carrier-watch off
C-Kermit>set speed 115200
/dev/ttyS3, 115200 bps
C-Kermit>c
Connecting to /dev/ttyS3, speed 115200.
The escape character is Ctrl-\ (ASCII 28, FS)
Type the escape character followed by C to get back,
or followed by&nbsp;? to see other options.
ATE1Q0V1                   ; vous tapez cette chaine puis la touche Entree
OK                         ; le modem doit repondre comme ca
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Si votre modem répond aux commandes <CODE>AT</CODE>, vous pouvez
supposer qu'il fonctionne correctement du côté Linux. Il ne
reste plus qu'à essayer d'appeler un autre modem&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
ATDT7654321
</PRE>
</CODE></BLOCKQUOTE>

où 7654321 est un numéro de téléphone.  Utilisez ATDP à la place
de ATDT si vous n'êtes pas connecté à un central numérique.
Votre modem fonctionne si l'appel aboutit.</P>
<P>Pour revenir à l'invite <CODE>kermit</CODE>, appuyez simultanément sur
les touches Ctrl et backslash, puis sur C&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
Ctrl-\-C
(Retour a linux)
C-Kermit>quit
linux#
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Il s'agissait juste d'un test de numérotation ``à la main''. La
méthode normale est de laisser <CODE>kermit</CODE> numéroter à votre
place à l'aide de sa base de données interne de modems. Par
exemple, pour un modem US Robotics (USR)&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
linux# kermit
C-Kermit 6.0.192, 6 Sep 1997, for Linux
 Copyright (C) 1985, 1996,
  Trustees of Columbia University in the City of New York.
Default file-transfer mode is BINARY
Type&nbsp;? or HELP for help
C-Kermit>set modem type usr        ; Selection du type de modem
C-Kermit>set line /dev/ttyS3       ; Choix du peripherique
C-Kermit>set speed 115200          ; Vitesse de communication
C-Kermit>dial 7654321              ; Numerotation
 Number: 7654321
 Device=/dev/ttyS3, modem=usr, speed=115200
 Call completed.&lt;BEEP>
Connecting to /dev/ttyS3, speed 115200
The escape character is Ctrl-\ (ASCII 28, FS).
Type the escape character followed by C to get back,
or followed by&nbsp;? to see other options.

Welcome to ...

login:
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Reportez-vous à la section 
<A HREF="#comms">Programmes de  communication</A> pour plus de liens.</P>
<P>Lorsque vous appelez avec votre modem, paramétrez la vitesse au
débit maximal supporté par votre modem. Les systèmes Linux avec
une version de la <CODE>libc</CODE> supérieure à 5.x supportent des
vitesses jusqu'à 115200 bps. <CODE>libc</CODE> est habituellement située
dans <CODE>/lib</CODE>.   Vérifiez dans ce répertoire la version que
vous avez. Si Linux ne reconnaît pas des vitesses de 57600 ou
115200 bps, vous devez alors utiliser le program <CODE>setserial</CODE>
pour passer votre port série à une vitesse supérieure.
Reportez-vous à la section 
<A HREF="#spdhi">Comment  configurer mes ports série à des vitesses supérieures&nbsp;?</A>.
Sélectionnez ensuite une vitesse de 38400 bps dans votre
programme de communications.</P>

<H2><A NAME="ss5.3">5.3 Configuration du modem en mode appelant</A>
</H2>

<P>Pour appeler, vous pouvez configurer votre modem comme vous le
voulez.  Si vous souhaitez l'utiliser pour des communications
entrantes, vous <EM>devez</EM> paramétrer votre modem à la même
vitesse que pour <CODE>getty</CODE>.  Ainsi, si vous voulez exécuter
<CODE>getty</CODE> à 38400 bps, fixez également la vitesse à 38400 bps
lors du paramétrage du modem, pour éviter une incompatibilité de
vitesses avec l'ordinateur. En général, les réglages d'usine
avec correction d'erreurs et contrôle de flux matériel
correspondent au réglage optimal en mode appelant. Consultez le
manuel du modem pour obtenir ces réglages.</P>

<H2><A NAME="ss5.4">5.4 Contrôle de flux matériel</A>
</H2>

<P>Je vous recommande vivement d'utiliser le contrôle de flux
matériel (RTS/CTS) si votre modem le supporte. Cette
fonctionalité est particulièrement importante lorsque la
compression de données est active.  Premièrement, vous devez
autoriser le contrôle de flux RTS/CTS sur le port série. Le
mieux est de le faire au démarrage, par exemple dans
<CODE>/etc/rc.d/rc.local</CODE> ou <CODE>/etc/rc.d/rc.serial</CODE>.
Assurez-vous que ces fichiers sont bien exécutés par le fichier
principal <CODE>rc.sysinit</CODE>. Ensuite, pour chacun des ports série
pour lesquels vous désirez activer le contrôle de flux matériel,
vous devez entrer la commande suivante&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
stty crtscts &lt; /dev/ttyS3
</PRE>
</CODE></BLOCKQUOTE>
 
Vous devez également activer le contrôle de flux RTS/CTS sur le
modem.   Consultez le manuel du modem, car le paramétrage varie
suivant les fabricants. N'oubliez pas de sauvegarder cette
configuration, si votre modem le permet.</P>

<H2><A NAME="s6">6. Comment puis-je appeler et être appelé avec mon modem et <CODE>getty_ps</CODE>&nbsp;?</A></H2>

<P>Faites déjà fonctionner correctement votre modem en mode
appelant. Si vous n'avez pas encore lu la section 
<A HREF="#dialout">Comment puis-je appeler avec mon  modem&nbsp;?</A>, <EM>lisez-la maintenant</EM>&nbsp;! Elle contient
des informations importantes sur la configuration. Il <EM>n'est
pas nécessaire</EM> de lire cette section si vous souhaitez juste
<EM>appeler</EM> avec votre modem.</P>

<H2><A NAME="ss6.1">6.1 Configuration en modes appelant et appelé</A>
</H2>

<P>Encore une fois, le modem <EM>doit</EM> être spécialement configuré
(avec les commandes <CODE>AT</CODE>) afin de pouvoir être utilisé aussi
bien en appelant qu'en appelé&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
E1       echo local active en mode commande
Q0       envoie les codes de retour
V1       envoie les reponses sous la forme de donnees textuelles
S0=0     decrochage automatique desactive (uugetty s'en occupe avec l'option WAITFOR) 
</PRE>
</CODE></BLOCKQUOTE>

Si ces options ne sont pas sélectionnées, il se peut que la
chaîne d'initialisation définie dans le fichier de
configuration, ne fonctionne pas.
<BLOCKQUOTE><CODE>
<PRE>
&amp;C1 le signal DCD est haut seulement apres la connexion
&amp;S0 DSR est toujours haut
        un changement d'etat du DTR reinitialise le modem (dependant du fabricant - RTFM)
</PRE>
</CODE></BLOCKQUOTE>

Ces réglages déterminent le comportement du modem au début et à
la fin d'un appel.</P>
<P>Si votre modem ne permet pas la sauvegarde d'un profil, ces
paramètres peuvent être indiqués dans la chaîne d'initialisation
du fichier de configuration. Certains modems sont pourvus de
commutateurs DIP qui affectent les valeurs des registres.
Assurez-vous également qu'ils sont correctement configurés.</P>
<P>     
J'ai débuté une compilation de configurations pour différents
modèles de modems. Pour l'instant, j'en ai seulement quelques
uns.   Ne vous privez donc pas de m'envoyer vos paramétrages
opérationnels. Cette collection est récupérable à <CODE>
<A HREF="ftp://ftp.cc.gatech.edu/pub/people/gregh/modem-configs">ftp://ftp.cc.gatech.edu/pub/people/gregh/modem-configs</A></CODE>.</P>

<P>Remarque&nbsp;: pour que mon modem USR Courier V.34 se
réinitialise correctement à l'ouverture du signal DTR, je suis
obligé de forcer <CODE>&amp;D2</CODE> et <CODE>S13=1</CODE> (le bit 0 du
registre S13 est mis à 1).  On m'a confirmé que ça fonctionnait
aussi sur les modems USR Sportster V.34.</P>

<P>Remarque&nbsp;: certains modems Supra traitent le signal DCD
différement.  Dans ce cas, essayez avec <CODE>&amp;C0</CODE> et <EM>non</EM>
<CODE>&amp;C1</CODE>. <CODE>&amp;D2</CODE> doit également être positionné afin
de gérer correctement le DTR.</P>

<H2><A NAME="ss6.2">6.2 Installer <CODE>getty_ps</CODE></A>
</H2>

<P>Récupérez la dernière version à partir de <CODE>
<A HREF="ftp://sunsite.unc.edu:/pub/Linux/system/serial">sunsite.unc.edu:/pub/Linux/system/serial</A></CODE>.  Les
versions 2.0.7j et ultérieures sont indispensables pour les
hauts débits (57600 and 115200 bps).  Vous devez aussi avoir la
libc 5.x ou supérieure.</P>
<P>Par défaut, <CODE>getty_ps</CODE> est conforme au FSSTND Linux (<EM>File
System Standard</EM> - norme de système de fichiers), ce qui
implique que les binaires résident dans <CODE>/sbin</CODE>, et les
fichiers verrous (<EM>lock files</EM>) dans <CODE>/var/lock</CODE>.
Assurez-vous donc que le répertoire <CODE>/var/lock</CODE> existe
bien.</P>
<P>Si vous ne souhaitez pas la conformité FSSTND, les binaires
seront  stockés dans <CODE>/etc</CODE>, les fichiers de
configuration dans <CODE>/etc/default/{uu}getty.ttyS</CODE><EM>N</EM>,
et les fichiers verrous dans <CODE>/usr/spool/uucp</CODE>.  Je
recommande cette méthode en cas d'utilisation conjointe avec
UUCP afin que les fichiers verrous soient bien partagés entre
<CODE>getty_ps</CODE> et UUCP.</P>
<P>     
<CODE>getty_ps</CODE> peut aussi utiliser <CODE>syslogd</CODE> pour enregistrer
les messages. Reportez-vous aux pages de manuel <CODE>syslogd(1)</CODE>
et <CODE>syslog.conf(5)</CODE> pour configurer <CODE>syslogd</CODE>, s'il ne
tourne pas déjà.  Les messages sont enregistrés avec la priorité
LOG_AUTH, les erreurs avec LOG_ERR, et les informations de
débogage avec LOG_DEBUG. Si vous ne souhaitez pas utiliser
<CODE>syslogd</CODE>, éditez <CODE>tune.h</CODE> dans le répertoire des fichiers
source de <CODE>getty_ps</CODE> pour enregistrer les messages dans un
fichier, <CODE>/var/adm/getty.log</CODE> par défaut.</P>
<P>     
Vous devez donc décider si vous voulez la conformité FSSTND, les
possibilités offertes par syslog, ou une combinaison des deux.
Modifiez en conséquence les fichiers <CODE>Makefile</CODE>, <CODE>tune.h</CODE>
et <CODE>config.h</CODE>. Il ne reste plus qu'à compiler et installer le
paquetage, en suivant les instructions fournies.</P>
<P>À partir de maintenant, toutes les références à <CODE>getty</CODE>
concerneront <CODE>getty_ps</CODE>, et celles à <CODE>uugetty</CODE> le
programme <CODE>uugetty</CODE> fourni avec le paquetage <CODE>getty_ps</CODE>.
Ces instructions ne sont pas applicables à <CODE>mgetty</CODE> ou
<CODE>agetty</CODE>.</P>

<H2><A NAME="ss6.3">6.3 Configurer <CODE>uugetty</CODE></A>
</H2>

<P><CODE>uugetty</CODE>, qui assure d'importantes vérifications sur les
fichiers verrous, sera utilisé pour se connecter sur votre
modem.  Mettez à jour <CODE>/etc/gettydefs</CODE> pour inclure les
différentes entrées pour les modems, si elles ne sont pas déjà
présentes (remarquez que ces entrées sont rebouclées sur
elles-mêmes et autorisent donc différentes vitesses - une ligne
vide est nécessaire entre deux entrées)&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
# Entrees modem
115200# B115200 CS8 # B115200 SANE -ISTRIP HUPCL #@S @L @B login: #57600

57600# B57600 CS8 # B57600 SANE -ISTRIP HUPCL #@S @L @B login: #38400

38400# B38400 CS8 # B38400 SANE -ISTRIP HUPCL #@S @L @B login: #19200

19200# B19200 CS8 # B19200 SANE -ISTRIP HUPCL #@S @L @B login: #9600

9600# B9600 CS8 # B9600 SANE -ISTRIP HUPCL #@S @L @B login: #2400

2400# B2400 CS8 # B2400 SANE -ISTRIP HUPCL #@S @L @B login: #115200
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Si votre modem permet des vitesses de 9600 bps ou plus avec
compression de données, vous pouvez fixer une vitesse constante
pour le port série et laisser le modem choisir la vitesse de
connexion. Le fichier <CODE>/etc/gettydefs</CODE> se simplifie et ne
nécessite plus qu'une seule ligne pour le modem, par
exemple&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
# vitesse fixe 115200
F115200# B115200 CS8 # B115200 SANE -ISTRIP HUPCL #@S @L @B login: #F115200
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>     
Si le contrôle de flux RTS/CTS est activé sur votre modem, le
drapeau <CODE>CRTSCTS</CODE> peut être ajouté dans les entrées&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
# vitesse fixe 115200 avec controle de flux materiel
F115200# B115200 CS8 CRTSCTS # B115200 SANE -ISTRIP HUPCL CRTSCTS #@S @L @B login: #F115200
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Si vous le désirez, <CODE>uugetty</CODE> peut imprimer quelques
informations sur le système dans la bannière de login. Dans mes
exemples, j'ai fait figurer le nom du système, le port série,
ainsi que la vitesse courante en bps.  D'autres champs sont
disponibles&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
       @B    La vitesse courante en bps (evaluee lorsque le @B est affiche).
       @D    La date courante (MM/DD/YY).
       @L    Le port serie auquel getty est attache.
       @S    Le nom du systeme.
       @T    L'heure courante (HH:MM:SS / 24-heures).
       @U    Le nombre d'utilisateurs actuellement connectes.  Il s'agit du
             nombre d'entrees dans le fichier /etc/utmp qui possedent un
             champ ut_name non nul.
       @V    La valeur de VERSION, telle qu'elle est definie dans le fichier
             des valeurs par defaut.
       Pour afficher un simple '@', utilisez soit '\@', soit '@@'.
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Ensuite, assurez-vous de connaître un périphérique d'entrée et
de sortie pour le port série dédié au modem. Si votre modem est
attaché à <CODE>ttyS3</CODE>, aucun périphérique correct n'existe et
vous devez donc le créer (voir la section  
<A HREF="#dev">Créer les périphériques dans &lt;TT>/dev&lt;/TT></A>). Si vous
souhaitez pouvoir appeler avec votre modem alors que
<CODE>uugetty</CODE> est en attente de connexion sur le même port,
utilisez le périphérique <CODE>/dev/cua</CODE><EM>N</EM> à la place de
<CODE>/dev/ttyS</CODE><EM>N</EM>.</P>
<P>Une fois que vous avez terminé l'édition de
<CODE>/etc/gettydefs</CODE>, vous pouvez en vérifier la syntaxe
par&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
linux# getty -c /etc/gettydefs
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="ss6.4">6.4 Personnaliser <CODE>uugetty</CODE></A>
</H2>

<P>De nombreuses options peuvent être configurées dans des fichiers
séparés pour chacun des ports présents. Le fichier
<CODE>/etc/conf.uugetty</CODE> sert à <EM>toutes</EM> les instances de
<CODE>uugetty</CODE>, alors que <CODE>/etc/conf.uugetty.ttyS</CODE><EM>N</EM>
est spécifique à un seul port. Des exemples de fichiers de
configuration sont disponibles parmi les fichiers sources de
<CODE>getty_ps</CODE> livrés avec la plupart des distributions Linux.
Ces exemples ne sont pas repris dans ce document pour des
problèmes d'espace. Notez que pour les versions anciennes de
<CODE>getty</CODE> (avant la 2.0.7e), ou si vous n'utilisez pas la
conformité FSSTND, le fichier par défaut réside dans
<CODE>/etc/default/uugetty.ttyS</CODE><EM>N</EM>. Mon fichier
<CODE>/etc/conf.uugetty.ttyS3</CODE> ressemble à&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
# exemple de fichier de configuration uugetty pour un modem compatible
# Hayes en mode appele
#
# fichier verrou alternatif... s'il existe, uugetty est relance afin de
# reinitialiser le modem
ALTLOCK=cua3
ALTLINE=cua3
# port serie a initialiser
INITLINE=cua3
# delai de liberation de la ligne en cas d'inactivite...
TIMEOUT=60
# chaine d'initialisation du modem... 
# format : &lt;expect> &lt;send> ... (protocole de connexion)
INIT="" AT\r OK\r\n
WAITFOR=RING
CONNECT="" ATA\r CONNECT\s\A
# delai d'attente avant l'envoi de la banniere
DELAY=1
#DEBUG=010
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Ajoutez la ligne suivante dans <CODE>/etc/inittab</CODE>, afin que
<CODE>uugetty</CODE> soit automatiquement lancé sur le port série (en
adaptant pour votre configuration la localisation du fichier de
configuration, le port, la vitesse, et le type de terminal par
défaut)&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
S3:456:respawn:/sbin/uugetty -d /etc/default/uugetty.ttyS3 ttyS3 F115200 vt100
</PRE>
</CODE></BLOCKQUOTE>

Redémarrez <CODE>init</CODE>&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
linux# init q 
</PRE>
</CODE></BLOCKQUOTE>

La vitesse maximale supportée par le modem a été sélectionnée
dans <CODE>/etc/inittab</CODE>.</P>
<P>À partir de maintenant, Linux est en attente de connexions sur
le port série. Appelez depuis une autre machine et loguez-vous
sur votre système Linux.</P>
<P><CODE>uugetty</CODE> possède de nombreuses autres options, décrites en
détail dans la page de manuel <CODE>getty(1m)</CODE>. Entre autres
choses, on peut y trouver des fonctionnalités de programmation
horaire (<EM>scheduling</EM>), et de rappel (<EM>ringback</EM>).</P>

<H2><A NAME="s7">7. Comment configurer un terminal raccordé à mon PC&nbsp;?</A></H2>

<P>Ces instructions permettent aussi bien de connecter des
terminaux que d'autres ordinateurs sur le port série de votre
machine Linux.</P>

<H2><A NAME="ss7.1">7.1 Besoins matériels</A>
</H2>

<P>Assurez-vous de posséder le bon type de câble. Un câble <EM>null
modem</EM> acheté dans n'importe quel magasin informatique fera
l'affaire, mais il doit s'agir effectivement d'un câble <EM>null
modem</EM>&nbsp;! De nombreux magasins d'informatique  les vendent
comme des câbles pour imprimante série. Vérifiez que vous
utilisez bien le port série (embase mâle DB25 ou DB9), et non le
port parallèle (embase femelle DB25 ou Centronics).</P>
<P>     
Pour un connecteur DB25, il faut au minimum&nbsp;:
<PRE>
 
        DB25 male du PC                         DB25 du terminal
        TxD   Donnees emises        2 --> 3     RxD   Donnees recues
        RxD   Donnees recues        3 &lt;-- 2     TxD   Donnees emises
        SG    Masse du signal       7 --- 7     SG    Masse du signal
</PRE>
</P>
<P>Si vous voulez profiter du contrôle de flux matériel, la
connexion null modem doit être intégralement câblée&nbsp;:
<PRE>
        DB25 male du PC                         DB25 du terminal
        TxD   Donnees emises        2 --> 3     RxD   Donnees recues
        RxD   Donnees recues        3 &lt;-- 2     TxD   Donnees emises
        RTS   Demande pour emettre  4 --> 5     CTS   Pret a emettre
        CTS   Pret a emettre        5 &lt;-- 4     RTS   Demande pour emettre
        DSR   Poste de donnees pret 6
                                    |
        DCD   Detection de porteuse 8 &lt;-- 20    DTR   Terminal de donnees pret
        SG    Masse du signal       7 --- 7     SG    Masse du signal
                                          6     DSR   Poste de donnees pret
                                          |
        DTR   Terminal pret        20 --> 8     DCD   Detection de porteuse
</PRE>
</P>
<P>Si vous avez un connecteur DB9, vous pouvez essayer&nbsp;:
<PRE>
        DB9 du PC                               DB25 du terminal 
        RxD   Donnees recues        2 &lt;-- 2     TxD   Donnees emises
        TxD   Donnees emises        3 --> 3     RxD   Donnees recues
        SG    Masse du signal       5 --- 7     SG    Masse du signal
</PRE>
</P>
<P>Pour un câble complet DB9-DB25, on obtient&nbsp;:
<PRE>
        DB9 du PC                               DB25 du terminal 
        RxD   Donnees recues        2 &lt;-- 2     TxD   Donnees emises
        TxD   Donnees emises        3 --> 3     RxD   Donnees recues
                                          6     DSR   Poste de donnees pret
                                          |
        DTR   Terminal pret         4 --> 8     DCD   Detection de porteuse
        SG    Masse du signal       5 --- 7     SG    Masse du signal
        DCD   Detection de porteuse 1
                                    |
        DSR   Poste de donnees pret 6 &lt;-- 20    DTR   Terminal de donnees pret
        RTS   Demande pour emettre  7 --> 5     CTS   Pret a emettre
        CTS   Pret a emettre        8 &lt;-- 4     RTS   Demande pour emettre
        (RI   Indicateur sonnerie   9 pas necessaire)
</PRE>

(Eh oui, les broches 2 et 3 ont <EM>effectivement</EM> la
signification opposée entre les connecteurs DB9 et DB25&nbsp;!)</P>
<P>Ceux qui ne possèdent pas de câble null modem complet devront
user d'une astuce afin que le PC reçoive (de lui-même) les
acquittements qu'il demande avec le contrôle de flux
matériel&nbsp;: sur le connecteur côté PC, rebouclez ensemble
RTS et CTS, ainsi que DSR, DCD et DTR.</P>
<P>Maintenant que avez le bon type de câble, il vous reste à
connecter votre terminal sur votre ordinateur. Si possible,
demandez au terminal d'ignorer les signaux de contrôle pour
modems, et essayez de le paramétrer avec une vitesse de  9600
bps, 8 bits de données, 1 bit de stop, et pas de parité.</P>

<H2><A NAME="ss7.2">7.2 Configurer <CODE>getty</CODE></A>
</H2>

<P>Si elles ne sont pas déjà présentes, ajoutez dans
<CODE>/etc/gettydefs</CODE> les entrées destinées à <CODE>getty</CODE> pour
votre terminal,
<BLOCKQUOTE><CODE>
<PRE>
# Entree de terminal simple a 38400 bps
DT38400# B38400 CS8 CLOCAL # B38400 SANE -ISTRIP CLOCAL #@S @L login: #DT38400

# Entree de terminal simple a 19200 bps
DT19200# B19200 CS8 CLOCAL # B19200 SANE -ISTRIP CLOCAL #@S @L login: #DT19200

# Entree de terminal simple a 9600 bps
DT9600# B9600 CS8 CLOCAL # B9600 SANE -ISTRIP CLOCAL #@S @L login: #DT9600
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Si vous le désirez, <CODE>getty</CODE> peut imprimer quelques
informations sur le système dans la bannière de login. Dans mes
exemples, j'ai fait figurer le nom du système ainsi que le port
série.  D'autres variables sont disponibles&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
@B    La vitesse courante en bps (evaluee lorsque le @B est affiche).
@D    La date courante (MM/DD/YY).
@L    Le port serie auquel getty est attache.
@S    Le nom du systeme.
@T    L'heure courante (HH:MM:SS / 24-heures).
@U    Le nombre d'utilisateurs actuellement connectes.  Il s'agit du
      nombre d'entrees dans le fichier /etc/utmp qui possedent un
      champ ut_name non nul.
@V    La valeur de VERSION, telle qu'elle est definie dans le fichier
      des valeurs par defaut.
Pour afficher un simple '@', utilisez soit '\@', soit '@@'.
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Une fois l'édition de <CODE>/etc/gettydefs</CODE> terminée, vous
pouvez en vérifier la syntaxe par&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
linux# getty -c /etc/gettydefs
</PRE>
</CODE></BLOCKQUOTE>
</P>

<P>     
Assurez-vous qu'il n'existe pas déjà de fichier de configuration
<CODE>getty</CODE> ou <CODE>uugetty</CODE> pour le port série auquel vous avez
attaché votre terminal
(<CODE>/etc/default/{uu}getty.ttyS</CODE><EM>N</EM> ou
<CODE>/etc/conf.{uu}getty.ttyS</CODE><EM>N</EM>), car il risque
probablement d'interférer avec l'instance de <CODE>getty</CODE> du
terminal. Supprimez le fichier s'il existe.</P>
<P>Éditez la ligne suivante dans <CODE>/etc/inittab</CODE>, afin que
<CODE>getty</CODE> soit  lancé sur le port série (en adaptant pour votre
configuration le port, la vitesse, et le type de terminal par
défaut)&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
S1:456:respawn:/sbin/getty ttyS1 DT9600 vt100
</PRE>
</CODE></BLOCKQUOTE>

Redémarrez <CODE>init</CODE>&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
linux# init q 
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Vous devez maintenant voir apparaître une invite de session sur
le terminal. Il peut néanmoins être nécessaire de taper sur la
touche <CODE>Entrée</CODE> pour avertir le terminal.</P>

<H2><A NAME="ss7.3">7.3 Remarques sur la configuration d'un PC en tant que terminal</A>
</H2>

<P>     
Nombreux sont ceux qui se servent d'autres PC comme des
terminaux rattachés à des systèmes Linux. Par exemple, des vieux
PC 8088 ou 80286 sont parfaits pour cet usage. Vous avez juste
besoin d'une disquette de démarrage DOS et d'un programme de
communications pour faire tourner votre terminal-PC. <CODE>kermit</CODE>
fonctionne très bien dans cette configuration. Des versions
compilées de <CODE>kermit</CODE> pour n'importe quel système
d'exploitation sont disponibles sur <CODE>
<A HREF="http://www.columbia.edu/kermit/">http://www.columbia.edu/kermit/</A></CODE>.  D'autres
programmes populaires de communications sous DOS, comme
<CODE>telix</CODE> ou <CODE>procomm</CODE> remplissent également très bien cette
fonction. Soyez juste sûr de fournir des informations correctes
lors du paramétrage des communications de votre terminal-PC.</P>

<H2><A NAME="irqaddr"></A> <A NAME="s8">8. Puis-je utiliser plus de deux ports série&nbsp;?</A></H2>

<P>Il n'est pas nécessaire que vous lisiez cette section, à moins
que vous utilisiez au moins trois ports série... (mais pas sur
une carte multiports).</P>
<P>N'importe quel port série libre est utilisable. La seule
limitation réside dans le nombre d'interruptions (IRQ) et
d'adresses de port d'entrée/sortie à utiliser.  Cette limitation
n'est pas spécifique à Linux, mais est due au bus du PC. Chaque
périphérique série (port série, modem interne, carte série) doit
posséder ses propres interruption et adresse. </P>
<P>Les cartes série multiports sont spécialement conçues pour
partager la même interruption sur tous les ports qu'elles
possèdent. Linux communique avec elles en sélectionnant une
adresse d'entrée/sortie différente pour chaque port de ces
cartes.</P>

<H2><A NAME="ss8.1">8.1 Choisir les interruptions des périphériques série</A>
</H2>

<P>Par défaut sur un PC, l'IRQ 4 est partagée entre  <CODE>ttyS0</CODE> et
<CODE>ttyS2</CODE>, et l'IRQ 3 entre <CODE>ttyS1</CODE> et <CODE>ttyS3</CODE>. Les
interruptions en cours d'utilisation sont regroupées dans
<CODE>/proc/interrupts</CODE>. Pour se servir de plus de deux ports
série,  leur interruption doit être réassignée, par exemple en
choisissant celle d'un port parallèle.   En effet, les IRQ 5 et
7 sont sur un PC normalement attribuées aux ports parallèles,
mais peu de personnes en possèdent deux. Vous pouvez donc
réassigner une de ces interruptions à un port série, et
continuer à utiliser joyeusement votre port parallèle&nbsp;!
Cette manipulation requiert le programme <CODE>setserial</CODE>. De
plus, il vous faudra ajuster certains cavaliers sur vos cartes
(à vérifier sur les manuels des cartes) pour fixer les IRQ.</P>
<P>Vous devez vous arranger pour avoir une IRQ unique pour chacun
des ports série. Voici comment je configure les miens dans
<CODE>/etc/rc.d/rc.local</CODE> (cette initialisation doit avoir
lieu lors du démarrage)&nbsp;: 
<BLOCKQUOTE><CODE>
<PRE>
        /sbin/setserial /dev/ttyS0 irq 3        # ma souris
        /sbin/setserial /dev/ttyS1 irq 4        # mon terminal Wyse
        /sbin/setserial /dev/ttyS2 irq 5        # mon modem Zoom 
        /sbin/setserial /dev/ttyS3 irq 9        # mon modem USR
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Assignations standards des IRQ&nbsp;:
<PRE>
              IRQ  0    Base de temps 0
              IRQ  1    Clavier
              IRQ  2    Cascade pour le deuxieme controleur d'IRQ
              IRQ  3    Port serie 2
              IRQ  4    Port serie 1
              IRQ  5    Port parallele 2
              IRQ  6    Disquette
              IRQ  7    Port parallele 1
              IRQ  8    Horloge temps-reel (RTC)
              IRQ  9    Redirige vers l'IRQ2
              IRQ 10    Non assignee 
              IRQ 11    Non assignee
              IRQ 12    Non assignee
              IRQ 13    Coprocesseur mathematique
              IRQ 14    Controleur de disques durs 1
              IRQ 15    Controleur de disques durs 2
</PRE>
</P>
<P>Il n'existe pas vraiment de Bonne Technique pour choisir les
interruptions. Il faut juste s'assurer qu'elles ne sont pas déjà
utilisées par la carte mère, ou une autre carte. 2, 3, 4, 5, ou
7 est généralement un bon choix.  ``Non assignée'' signifie que
rien de standard n'utilise cette IRQ. Notez également que l'IRQ2
et l'IRQ9 sont identiques&nbsp;: vous pouvez donc spécifier
aussi bien 2 que 9, le gestionnaire de périphériques est très
compréhensif. Si vous possédez une carte série avec un
connecteur de bus 16 bits, vous pouvez également utiliser l'IRQ
10, 11, 12 ou 15.</P>
<P>N'utilisez pas les IRQ 0, 1, 6, 8, 13 et 14&nbsp;! Elles sont
réservées par la carte mère. Une fois le paramétrage effectué,
vérifiez l'absence de conflit avec <CODE>/proc/interrupts</CODE>.</P>

<H2><A NAME="ss8.2">8.2 Choisir les adresses des périphériques série</A>
</H2>

<P>Vous devez ensuite fixer les adresses des ports. Vérifiez le
manuel pour la position des cavaliers. Comme pour les
interruptions, chaque périphérique série doit posséder sa propre
adresse. Par défaut, les ports sont paramétrés de la manière
suivante&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
        ttyS0 adresse 0x3f8
        ttyS1 adresse 0x2f8
        ttyS2 adresse 0x3e8
        ttyS3 adresse 0x2e8
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Choisissez les adresses à affecter à chaque port série, et
positionnez les cavaliers sur la carte en conséquence. Ainsi,
j'ai mon modem sur <CODE>ttyS3</CODE>, ma souris sur <CODE>ttyS0</CODE>,
et mon terminal sur <CODE>ttyS2</CODE>.</P>
<P>Au prochain démarrage, Linux devrait voir vos ports séries aux
adresses que vous avez sélectionnées. Par contre, les IRQ vues
par Linux peuvent ne pas correspondre avec celles que vous avez
configurées. Ne vous inquiétez pas&nbsp;: Linux ne sait pas
détecter les IRQ au démarrage, car c'est assez aléatoire et le
résultat peut être faux. Utilisez <CODE>setserial</CODE> pour spécifier
à Linux quelles interruptions sont associées aux ports, puis
vérifiez après redémarrage de Linux les adresses des ports
d'entrée/sortie avec <CODE>/proc/ioports</CODE>.</P>

<H2><A NAME="spdhi"></A> <A NAME="s9">9. Comment configurer des vitesses plus importantes pour mes ports série&nbsp;? À quelle vitesse dois-je fixer mon modem&nbsp;?</A></H2>

<P>Cette section a pour but de vous aider à déterminer la vitesse
du modem à utiliser avec un programme de communications ou
<CODE>getty</CODE>.
<UL>
<LI>Si votre modem ne supporte que des vitesses inférieures à
9600 bps (V.32), choisissez la vitesse la plus importante, par
exemple 300 bps (V.21/Bell 103), 1200 bps (V.22/Bell 212A), ou
2400 bps (V.22bis).
</LI>
<LI>Si vous possédez un modem 9600 bps (V.32), intégrant la
compression de données V.42bis, choisissez 38400 bps. Le taux
<EM>théorique</EM> de compression est de 4:1, soit ``4 * 9600 =
38400''.        
        </LI>
<LI>Si vous possédez un modem 14400 bps (V.32bis), intégrant
la compression de données V.42bis, configurer le port à 57600
bps (4 * 14400 = 57600) avec l'option <CODE>spd_hi</CODE> de
<CODE>setserial</CODE>. 
<P>Pour les modems 28800 ou 33600 bps (V.FC ou V.34), utiliser
l'option <CODE>spd_vhi</CODE> (4 * 28800 = 115200).</P>
<P>Enfin, fixez la vitesse à 38400 bps dans votre programme de
communications ou <CODE>/etc/inittab</CODE>. Vous êtes maintenant en
grande vitesse&nbsp;! Assurez-vous de posséder des UART 16550A.</P>
<P>Il existe des vitesses nommées 57600 et 115200 dans les versions
de <CODE>libc</CODE> supérieures ou égales à 5.x (à vérifier dans le
répertoire <CODE>/lib</CODE>). Dans ce cas, vous pouvez les
sélectionner directement (sans passer par <CODE>setserial</CODE>) si vos
applications ont été compilées de manière à en tirer avantage.
Il existe tellement de distributions Linux, que le mieux à faire
est d'essayer directement ces vitesses si votre distribution est
assez récente.</P>
</LI>
</UL>
</P>
<P>Avant de fixer la configuration de <CODE>setserial</CODE> dans
<CODE>/etc/rc.d/rc.serial</CODE> ou <CODE>/etc/rc.d/rc.local</CODE> afin
qu'elle soit prise en compte au démarrage, il est préférable de
l'essayer manuellement.  Par exemple, pour fixer <CODE>ttyS3</CODE> à
115200 bps, mon fichier <CODE>/etc/rc.d/rc.local</CODE>
contient&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
/sbin/setserial /dev/ttyS3 spd_vhi
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Assurez-vous que le chemin d'accès à <CODE>setserial</CODE> est valide,
de même que le nom du périphérique. Le paramétrage d'un port
série peut être vérifié par&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
setserial -a /dev/ttyS3
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="comms"></A> <A NAME="s10">10. Programmes et utilitaires de communications</A></H2>

<P>Voici une liste de logiciels de communications que vous pouvez
télécharger par FTP, s'ils ne sont pas fournis dans votre
distribution&nbsp;:</P>
<P>
<UL>
<LI><CODE>ecu</CODE> - un programme de communications</LI>
<LI>
<A HREF="http://www.columbia.edu/kermit/">C-Kermit</A> - programme de communications portable et
scriptable, par liaison série ou TCP/IP, incluant le transfert
de fichiers et la traduction des jeux de caractères</LI>
<LI><CODE>minicom</CODE> - un programme de communications du genre de
<CODE>telix</CODE> </LI>
<LI><CODE>pcomm</CODE> - un programme de communications du genre de
<CODE>procomm</CODE> avec protocole zmodem</LI>
<LI><CODE>seyon</CODE> - un programme de communications sous X11</LI>
<LI><CODE>xc</CODE> - paquetage de communications xcomm</LI>
<LI>D'autres programmes utiles sont <CODE>term</CODE> et <CODE>SLiRP</CODE>
qui offrent des fonctionnalités TCP/IP à partir d'un compte
shell.  </LI>
<LI><CODE>screen</CODE> est un autre programme multi-sessions qui se
comporte comme les consoles virtuelles.</LI>
<LI><CODE>callback</CODE> est un programme permettant à votre modem de
se faire rappeler.</LI>
<LI><CODE>mgetty+fax</CODE> gère le mode FAX, et offre un <CODE>getty</CODE>
alternatif.</LI>
<LI><CODE>ZyXEL</CODE> est un programme de contrôle pour les modems
ZyXEL U-1496.  Il gère les appels entrants et sortants, la
sécurité pour le rappel automatique, le mode FAX, et possède des
fonctions de messagerie vocale.</LI>
<LI>SLIP et PPP peuvent être téléchargés depuis <CODE>
<A HREF="ftp://sunsite.unc.edu/pub/Linux/system/network/serial">ftp://sunsite.unc.edu/pub/Linux/system/network/serial</A></CODE>.</LI>
<LI>On trouve également d'autres programmes pour les liaisons
série sur <CODE>
<A HREF="ftp://sunsite.unc.edu/pub/Linux/system/serial">ftp://sunsite.unc.edu/pub/Linux/system/serial</A></CODE> et
<CODE>
<A HREF="ftp://sunsite.unc.edu/pub/Linux/apps/comm">ftp://sunsite.unc.edu/pub/Linux/apps/serialcomm</A></CODE> ou
sur l'un des nombreux sites miroirs.</LI>
</UL>
</P>

<H2><A NAME="s11">11. Trucs et astuces sur les liaisons série</A></H2>

<P> 
Je vous présente ici quelques astuces que vous pourrez trouver
utiles...</P>

<H2><A NAME="ss11.1">11.1 <CODE>kermit</CODE> et zmodem</A>
</H2>

<P>Pour utiliser le protocole zmodem avec <CODE>kermit</CODE>, ajoutez les
lignes suivantes dans votre <CODE>.kermrc</CODE>:
<BLOCKQUOTE><CODE>
<PRE>
define rz&nbsp;!rz &lt; /dev/ttyS3 > /dev/ttyS3
define sz&nbsp;!sz \%0 > /dev/ttyS3 &lt; /dev/ttyS3
</PRE>
</CODE></BLOCKQUOTE>

Soyez sûr de positionner le port série auquel votre modem est
rattaché.  Il suffit alors de taper <CODE>rz</CODE> ou <CODE>sz
&lt;filename&gt;</CODE> à l'invite de commandes de <CODE>kermit</CODE>.</P>

<H2><A NAME="ss11.2">11.2 Paramétrer les types de terminaux automagiquement</A>
</H2>

<P>Pour sélectionner automagiquement le type de terminal au début
d'une session, ajoutez-le dans l'entrée correspondante de
<CODE>/etc/inittab</CODE>. Par exemple, avec un terminal VT100 sur
<CODE>ttyS1</CODE>, j'ajouterais ``vt100'' en paramètre de la commande
<CODE>getty</CODE>&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
S1:456:respawn:/sbin/getty ttyS1 DT9600 vt100
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Vous pouvez également utiliser <CODE>tset</CODE> pour positionner les
caractéristiques du terminal à l'entrée en session,
indépendamment des valeurs par défaut.</P>

<H2><A NAME="ss11.3">11.3 <CODE>ls</CODE> en couleurs sur les connexions série</A>
</H2>

<P>     
Si l'émulation de votre terminal ne supporte pas correctement
l'option couleur de <CODE>ls</CODE>, désactivez-la. Certaines
installations l'utilisent par défaut (<CODE>ls --color</CODE> ou <CODE>ls
--colour</CODE>).  Vérifiez les alias sur <CODE>ls</CODE> dans
<CODE>/etc/profile</CODE> et <CODE>/etc/csh.cshrc</CODE>. Vous pouvez
également créer un nouvel alias de <CODE>ls</CODE> sur <CODE>ls
--no-color</CODE>, si vous ne souhaitez pas modifier les valeurs par
défaut.</P>

<H2><A NAME="ss11.4">11.4 Imprimer sur une imprimante attachée à un terminal</A>
</H2>

<P>     
Il existe pour cela un programme appelé <CODE>vtprint</CODE>, disponible
sur <CODE>
<A HREF="ftp://ftp.sdsu.edu/pub/vtprint">ftp://ftp.sdsu.edu/pub/vtprint</A></CODE>, et sur <CODE>
<A HREF="http://www.sdsu.edu/~garrett">http://www.sdsu.edu/~garrett</A></CODE>.</P>
<P>Un deuxième programme est <CODE>xprt</CODE>. Il peut être téléchargé
depuis <CODE>
<A HREF="ftp://sunsite.unc.edu/pub/Linux/system/printing">ftp://sunsite.unc.edu/pub/Linux/system/printing</A></CODE>.</P>

<H2><A NAME="ss11.5">11.5 Linux peut-il configurer les périphériques série automagiquement&nbsp;?</A>
</H2>

<P>Effectivement, Linux peut détecter et paramétrer les
périphériques série automatiquement au démarrage en ajoutant par
exemple la ligne&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
/sbin/setserial /dev/ttyS3 auto_irq skip_test autoconfig
</PRE>
</CODE></BLOCKQUOTE>

dans votre fichier <CODE>/etc/rc.d/rc.local</CODE> ou
<CODE>/etc/rc.d/rc.serial</CODE>. Répétez la manipulation pour
chacun des ports série qui doit être configuré automatiquement.
Soyez juste sûr de fournir un nom de périphérique existant sur
votre machine.</P>

<H3>Remarques pour les cartes multiports</H3>

<P>Référez-vous au fichier <CODE>rc.serial</CODE> fourni avec
<CODE>setserial</CODE> pour les adresses et les IRQ de ces cartes.
Beaucoup de paramètres y sont détaillés concernant les cartes
multiports, y compris les adresses et les noms des périphériques
à utiliser.</P>

<H2><A NAME="ss11.6">11.6 Utiliser une console série</A>
</H2>

<P>Un article dans le  numéro 36 du  <EM>Linux Journal</EM>
(<CODE>
<A HREF="http://www.ssc.com/lj/issue36/index.html">http://www.ssc.com/lj/issue36/index.html</A></CODE>) explique
comment utiliser un terminal comme une console. Malheureusement,
l'adresse électronique de l'auteur ne semble pas correcte car
les messages reviennent.   J'espère que cet article figurera
bientôt sur le site WEB du <EM>Linux Journal</EM> à l'URL mentionnée
ci-dessus.  <EM>(NdT&nbsp;: cet article est maintenant
disponible en ligne à <CODE>
<A HREF="http://www.ssc.com/lj/issue36/console.html">http://www.ssc.com/lj/issue36/console.html</A></CODE>)</EM></P>

<H2><A NAME="ss11.7">11.7 Obtenir des débits plus importants</A>
</H2>

<P>Si vous jugez le débit de vos ports série lent, ou si des
erreurs d'écrasement de caractères à la réception (<EM>overrun
errors</EM>) se produisent sur un système muni de disques durs
(E)IDE, utilisez <CODE>hdparm</CODE> pour modifier certains des
paramètres de ces disques, notamment le démasquage des autres
IRQ pendant les interruptions disque. Cette manipulation
augmentera le taux de réponse et aidera à supprimer les
écrasements de caractères. Lisez bien les pages de manuel, car
certaines combinaisons sont plus ou moins bien supportées
suivant les disques et les contrôleurs utilisés, et peuvent
provoquer une corruption du système de fichiers.</P>
<P>Regardez également l'utilitaire <CODE>irqtune</CODE> qui permet de
modifier la priorité de l'IRQ d'un périphérique, par exemple
celle du port série lié au modem. La FAQ d'<CODE>irqtune</CODE> est
disponible sur <CODE> 
<A HREF="http://www.best.com/~cae/irqtune">http://www.best.com/~cae/irqtune</A></CODE>.</P>

<H2><A NAME="s12">12. Un pas de plus...</A></H2>

<P>Cette section n'est absolument pas nécessaire à la compréhension
des ports série sous Linux, mais peut néanmoins vous apporter
quelques éclaircissements sur Unix et le monde des
télécommunications.</P>

<H2><A NAME="ss12.1">12.1 Qu'est-ce que les fichiers verrous&nbsp;?</A>
</H2>

<P>Un fichier verrou est simplement un fichier qui indique qu'un
périphérique particulier est en cours d'utilisation. Ils sont
regroupés dans <CODE>/usr/spool/uucp</CODE> ou <CODE>/var/lock</CODE>.
Sous Linux, ils se nomment <CODE>LCK..</CODE><EM>nom</EM> où <EM>nom</EM> est
soit un nom de périphérique, soit un nom de site UUCP. Certains
processus créent de tels fichiers pour s'assurer l'accès
exclusif aux périphériques. Par exemple, si vous appelez avec
votre modem, un fichier verrou va être créé pour avertir les
autres processus que le modem est déjà en cours d'utilisation.
Les verrous contiennent principalement le PID du processus qui
s'est attribué le périphérique.  La plupart des programmes
regardent dans un premier temps si un fichier verrou existe,
puis s'il est toujours valide en recherchant dans la table des
processus le programme qui a verrouillé le périphérique. Si le
fichier verrou est toujours valide, alors le nouveau programme
doit s'arrêter. Dans le cas contraire, certains programmes
suppriment le fichier verrou périmé, et utilisent le
périphérique en créant leur propre verrou à l'intérieur du
processus. D'autres programmes s'arrêtent tout simplement et
préviennent l'utilisateur que le périphérique est déjà utilisé.</P>

<H2><A NAME="ss12.2">12.2 ``baud'' et ``bps''</A>
</H2>

<P>``baud'' et ``bps'' font certainement partie des termes les plus
mal utilisés dans le monde de l'informatique et des
télécommunications.  Ils sont souvent considérés à tort comme
équivalents, alors qu'ils ne le sont pas&nbsp;!
<DL>
<DT><B>baud</B><DD><P>Le baud représente la fréquence de (dé)modulation
d'un signal, par exemple celui envoyé ou reçu par un modem
(<B>mo</B>dulateur-<B>dém</B>odulateur), c'est-à-dire le nombre de
fois où il change par seconde.  Par exemple, 1200 bauds implique
que le signal change d'état toutes les 833 microsecondes. Les
fréquences de (dé)modulation les plus courantes pour un modem
sont 50, 75, 110, 300, 600, 1200, et 2400 bauds.  La plupart des
modems hautes vitesses fonctionnent à 2400 bauds.  Les
fréquences plus élevées sont plus difficiles à atteindre.  Cette
limitation est principalement due aux basses performances des
lignes téléphoniques dédiées essentiellement au transport de la
voix.  Plusieurs bits sont alors encodés par baud, ce qui permet
d'obtenir des taux de transfert en bits plus élevés qu'en bauds.
L'étymologie du mot ``baud'' vient de l'inventeur de
l'imprimante télégraphique asynchrone, Émile Baudot.</P>

<DT><B>bps</B><DD><P>Le taux de transfert en bps représente le nombre de
bits transmis en une seconde. Les vitesses en bps les plus
courantes sont 50, 75, 110, 300, 1200, 2400, 9600, ... 115200.
Les modems avec compression V.42bis (rapport maximal de 4 à 1)
activée sont capables <EM>théroriquement</EM> d'atteindre des
vitesses de 115200 bps. C'est l'usage mauvais le plus courant du
terme ``baud''.</P>
</DL>
        </P>
<P>Donc, si les modems hautes vitesses fonctionnent à 2400 bauds,
comment peuvent-ils émettre à 14400 bps&nbsp;? En fait, les
modems atteignent des taux de transfert en bps supérieurs à la
fréquence de modulation, en codant plusieurs bits dans un seul
changement d'amplitude ou de phase du signal. Ainsi, quand 2
bits ou plus sont codés par baud, la vitesse en bps dépasse la
fréquence en bauds. Quand votre modem se connecte à 14400 bps,
il envoie effectivement 6 bits à chaque changement de phase, à
2400 bauds.</P>
<P>Cette confusion entre bauds et bps date du temps où les taux de
transfert étaient faibles, et où la vitesse en bps égalait la
fréquence de modulation en bauds. Par exemple, un modem à 300
bps fonctionne à une fréquence de 300 bauds. Les deux valeurs
ont commencé à diverger avec l'apparition des modems hautes
vitesses.</P>

<H2><A NAME="uart"></A> <A NAME="ss12.3">12.3 Qu'est-ce que les UART&nbsp;?  Comment influent-ils sur les performances&nbsp;?</A>
</H2>

<P>Les UART (<EM><B>U</B>niversal <B>A</B>syncronous <B>R</B>eceiver
<B>T</B>ransmitter</EM> - Émetteur Récepteur Universel Asynchrone)
sont des circuits électroniques équipant les cartes série des
PC.  Ils servent à transformer les données en bits, à les
envoyer sur la ligne série, puis à reconstruire ces données à
l'autre bout. Ils travaillent sur des octets, qui correspondent
justement à la taille des caractères ASCII.</P>
<P>Supposons qu'un terminal est connecté à votre PC. Quand vous
tapez un caractère, le terminal l'envoie à un émetteur (qui est
aussi un UART). L'émetteur envoie alors cet octet sur la ligne
série, bit par bit, et à une vitesse spécifique. Du côté PC,
l'UART réceptionne ces bits, reconstruit l'octet, et enfin le
place dans une zone mémoire.</P>
<P>Il existe essentiellement deux types d'UART&nbsp;: les simples
(8250 et 16450), et ceux dotés de FIFO (16550A). Pour comprendre
les différences qui existent entre ces circuits, il faut
examiner ce qui se passe quand un UART envoie ou reçoit un
octet.</P>
<P>L'UART lui-même ne fait rien avec les données ; il s'occupe
juste de les émettre ou les réceptionner. Le CPU reçoit une
interruption du périphérique série chaque fois qu'un octet part
ou arrive. Le CPU déplace alors l'octet reçu du périphérique
série vers une zone mémoire, ou alors il redonne à l'UART un
nouvel octet à transmettre. Les UART 8250 et 16450 ne possèdent
qu'une zone tampon d'un octet, ce qui signifie que le CPU est
interrompu à chaque caractère. Ça fonctionne aux vitesses
faibles, mais pour des vitesses élevées, le CPU est tellement
occupé par l'UART, qu'il n'a plus assez de temps pour les autres
tâches. Dans certains cas, le CPU ne peut pas répondre à
l'interruption assez vite, et les caractères sont alors écrasés
(<EM>overrun error</EM>).</P>
<P>Les UART 16550 sont alors utiles car ils sont équipés de tampons
FIFO de 16 octets, c'est-à-dire qu'ils peuvent émettre ou
recevoir jusqu'à 16 octets avant d'interrompre le CPU. Bien que
ce seuil d'interruption soit rarement fixé à 16, ça représente
quand même un avantage significatif par rapport aux UART dotés
d'un tampon d'un seul octet.  Le CPU est alors interrompu moins
souvent et peut consacrer plus de temps aux autres tâches. Les
données ne sont donc plus perdues. (Il existe également un UART
16550, considéré comme un 16450 car il est défectueux.)</P>
<P>En général, les 8250 et 16450 peuvent suffire pour des vitesses
n'excédant pas 38400 bps. À des vitesses supérieures, vous
pouvez voir apparaître des pertes de caractères. D'autres
systèmes d'exploitation pour PC, comme DOS (définition
approximative dans ce cas), qui ne sont pas multitâches, peuvent
à la rigueur mieux se débrouiller avec des 8250 ou des 16450.
C'est pour cela que certaines personnes ne constatent aucune
perte de données, jusqu'au moment où elles passent à Linux.</P>
<P>Les cartes multiports intelligentes utilisent des DSP
(<EM>Digital Signal Processors</EM> - processeurs de signaux
digitaux) pour assurer des fonctions supplémentaires de contrôle
et de mises en mémoire tampon, ce qui permet de décharger encore
plus le CPU. Par exemple, les cartes Cyclades Cyclom et Stallion
EasyIO possèdent un UART RISC Cirrus Logic CD1400. La plupart
des autres cartes sont dotées de CPU 80186, voire de CPU RISC
spécifiques, pour assurer les entrées/sorties série.</P>
<P>Gardez à l'esprit que ces UART ne sont pas mauvais, mais qu'ils
ne suffisent pas pour des vitesses élevées. Vous ne devriez pas
rencontrer de problème en connectant un terminal ou une souris
sur de tels UART. Par contre, les 16550A sont définitivement un
<EM>must</EM> pour les modems hautes vitesses.</P>
<P>Les cartes à base d'UART 16550A sont à peine plus chères que
celles à base de 16450. De même, il est possible de remplacer
les UART 16450 existants sur une carte par des 16550A. Ces
circuits sont compatibles broche à broche.  Certaines cartes
sont même équipées à cet effet d'UART montés sur support. Sinon,
il faudra souder. Remarquez que vous vous éviterez sûrement pas
mal de soucis en achetant directement une nouvelle carte.</P>

<H2><A NAME="s13">13. Résoudre les problèmes</A></H2>

<H2><A NAME="ss13.1">13.1 Le message ``line <EM>NNN</EM> of inittab invalid'' s'affiche en permanence</A>
</H2>

<P>Assurez-vous d'utiliser une syntaxe correcte pour votre version
de <CODE>init</CODE>. En effet, chaque programme <CODE>init</CODE> ou presque a
une syntaxe spécifique pour son fichier de configuration
<CODE>/etc/inittab</CODE>. De même, vérifiez les paramètres que vous
passez à votre <CODE>getty</CODE>.</P>

<H2><A NAME="ss13.2">13.2 Le message ``/dev/cua<EM>N</EM>: Device or resource busy'' apparaît quand j'essaie d'appeler</A>
</H2>

<P>Ce problème peut survenir quand les signaux DCD ou DTR ne sont
pas positionnés correctement. DCD doit être levé seulement lors
d'une connexion (<EM>ie</EM> quelqu'un est déjà connecté), et non
pas quand <CODE>getty</CODE> scrute le port. Assurez-vous donc que le
modem est configuré pour lever le signal DCD seulement en
connexion. DTR doit être positionné dès qu'un processus utilise
ou scrute la ligne, par exemple <CODE>getty</CODE>, <CODE>kermit</CODE>, ou
n'importe quel autre programme de communications.</P>
<P>Une autre cause possible est que l'IRQ assignée au port série
est déjà prise par un autre périphérique. En effet, lors de son
initialisation, chaque périphérique demande l'autorisation à
Linux d'utiliser l'IRQ sélectionnée.  Linux garde une trace de
l'affectation des interruptions, et si une IRQ est en cours
d'utilisation, votre périphérique ne pourra pas s'initialiser.
Celui-ci n'a aucun moyen de vous prévenir, excepté par le
message ``device-busy'' lorsque vous tentez de l'utilisez.
Vérifiez alors les interruptions de toutes vos cartes (série,
ethernet, SCSI, etc.) et les conflits éventuels.</P>

<H2><A NAME="ss13.3">13.3 Le message ``Id S<EM>N</EM> respawning too fast: disabled for 5 minutes'' s'affiche périodiquement</A>
</H2>

<P>Assurez-vous que votre modem est correctement configuré.
Examinez particulièrement les registres <CODE>E</CODE> et <CODE>Q</CODE>. Ce
problème peut apparaître lorque <CODE>getty</CODE> discute avec le
modem.</P>
<P>Vérifiez également les paramètres que vous passez à <CODE>getty</CODE>
dans <CODE>/etc/inittab</CODE>. Une syntaxe ou un nom de
périphérique erroné peut causer de sérieux problèmes. </P>
<P>La syntaxe de <CODE>/etc/gettydefs</CODE> peut être vérifiée par la
commande suivante&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
linux# getty -c /etc/gettydefs
</PRE>
</CODE></BLOCKQUOTE>
</P>

<P>Ce problème arrive quelquefois lors de l'échec de
l'initialisation de <CODE>uugetty</CODE>. Reportez-vous à la section
<A HREF="#nowork">getty ou uugetty ne fonctionne toujours  pas</A>.</P>

<H2><A NAME="ss13.4">13.4 Mes périphériques série sont lents ou unidirectionnels</A>
</H2>

<P>     
La cause la plus probable est un conflit d'IRQ. Assurez-vous
qu'aucune IRQ n'est partagée. Vérifiez les cavaliers sur les
différentes cartes (série, ethernet, SCSI, etc.) ainsi que les
paramètres passés à <CODE>setserial</CODE> pour tous les périphériques
série. Les conflits peuvent être localisés avec
<CODE>/proc/ioports</CODE> et <CODE>/proc/interrupts</CODE>.</P>

<H2><A NAME="ss13.5">13.5 Mon modem ne répond plus après le raccrochage, ou <CODE>uugetty</CODE> ne se relance plus automatiquement</A>
</H2>

<P>     
Cela peut se produire si le modem n'est pas réinitialisé lorque
le signal DTR retombe. J'ai vu les LED RD et SD devenir folles
quand ça m'est arrivé. Il faut alors réinitialiser le modem. La
plupart des modems compatibles Hayes ont besoin de la commande
<CODE>&amp;D3</CODE>, mais sur mon USR Courier, je dois positionner
<CODE>&amp;D2</CODE> et <CODE>S13=1</CODE>.  Vérifiez dans la documentation de
votre modem.</P>

<H2><A NAME="ss13.6">13.6 Un terminal est connecté à mon PC, mais il se bloque dès que j'ai entré mon nom d'utilisateur</A>
</H2>

<P>
<UL>
<LI>Si vous utilisez <CODE>getty</CODE>, vous devez faire figurer
<CODE>CLOCAL</CODE> dans l'entrée correspondante de
<CODE>/etc/gettydefs</CODE>, et utiliser un câble null-modem
complet. L'option <CODE>CLOCAL</CODE> indique à Linux d'ignorer les
signaux de contrôle spécifiques aux modems&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
# Entree de terminal simple a 38400 bps
DT38400# B38400 CS8 CLOCAL # B38400 SANE -ISTRIP CLOCAL #@S @L login: #DT38400

# Entree de terminal simple a 19200 bps
DT19200# B19200 CS8 CLOCAL # B19200 SANE -ISTRIP CLOCAL #@S @L login: #DT19200

# Entree de terminal simple a 9600 bps
DT9600# B9600 CS8 CLOCAL # B9600 SANE -ISTRIP CLOCAL #@S @L login: #DT9600
</PRE>
</CODE></BLOCKQUOTE>

Ensuite, tuez (<CODE>kill</CODE>) le processus <CODE>getty</CODE> afin
qu'une nouvelle instance soit lancée avec les entrées mises à
jour.
</LI>
<LI>Si vous utilisez <CODE>agetty</CODE>, ajoutez l'option <CODE>-L</CODE> à
la ligne correspondante de <CODE>/etc/inittab</CODE>, pour indiquer
que vous désirez ignorer les signaux de contrôle spécifiques aux
modems.  Redémarrez <CODE>init</CODE> en tapant <CODE>init q</CODE>. L'entrée
doit ressembler à&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
s1:345:respawn:/sbin/agetty -L 9600 ttyS1 vt100
</PRE>
</CODE></BLOCKQUOTE>
</LI>
</UL>
</P>

<H2><A NAME="ss13.7">13.7 Mon modem perd des données à haute vitesse</A>
</H2>

<P>Si vous essayez de faire fonctionner votre modem à plus de 38400
bps, vous devez obligatoirement passer en UART 16550A.
Reportez-vous à la section 
<A HREF="#uart">Qu'est-ce que  les UART&nbsp;?</A>.</P>

<H2><A NAME="ss13.8">13.8 Au démarrage, Linux n'affiche pas les ports série tels que je les ai paramétrés</A>
</H2>

<P>Effectivement, Linux ne cherche pas à détecter les IRQ au
démarrage, mais seulement les ports série. Il suppose que vous
utilisez les interruptions par défaut, car leur détection est
hasardeuse et peut se révéler inexacte.</P>
<P>Ainsi, même si j'ai forcé <CODE>ttyS2</CODE> à l'IRQ 5, je vois
toujours&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
Jan 23 22:25:28 misfits vmunix: tty02 at 0x03e8 (irq = 4) is a 16550A
</PRE>
</CODE></BLOCKQUOTE>

quand Linux se lance. Il faut alors utiliser <CODE>setserial</CODE> pour
indiquer les IRQ à Linux. Après le démarrage, vous pouvez
vérifier le paramétrage effectif dans le fichier
<CODE>/proc/interrupts</CODE>.</P>

<H2><A NAME="ss13.9">13.9 <CODE>rz</CODE> et/ou <CODE>sz</CODE> ne fonctionne pas quand j'appelle mon système Linux avec un modem</A>
</H2>

<P>Si Linux recherche le périphérique <CODE>/dev/modem</CODE> quand
vous tentez de transférer des fichiers, regardez les alias
définis dans <CODE>/etc/profile</CODE> et <CODE>/etc/csh.cshrc</CODE>.
Ils peuvent être nombreux suivant les distributions (notamment
Slackware) et redéfinir les programmes zmodem. Enlevez ces
alias, ou corrigez-les.</P>

<H2><A NAME="ss13.10">13.10 Mon écran imprime des caractères bizarres</A>
</H2>

<P>Ce phénomène se produit sur les consoles virtuelles, et parfois
sur les lignes série, quand elles reçoivent des données
binaires. Il faut alors taper <CODE>echo ^v^[c</CODE>,
c'est-à-dire&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
linux% echo &lt;ctrl>v&lt;esc>c
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="nowork"></A> <A NAME="ss13.11">13.11 <CODE>getty</CODE> ou <CODE>uugetty</CODE> ne fonctionne toujours pas</A>
</H2>

<P><CODE>getty_ps</CODE> fournit une option <CODE>DEBUG</CODE> que l'on peut
spécifier dans le fichier de configuration
<CODE>/etc/conf.{uu}getty.ttyS</CODE><EM>N</EM>. Éditez-le pour ajouter
la ligne <CODE>DEBUG=</CODE><EM>NNN</EM> où <EM>NNN</EM> est une combinaison de
valeurs octales définissant les informations que vous voulez
obtenir&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
D_OPT   001            configuration des options
D_DEF   002            traitement du fichier des valeurs par defaut
D_UTMP  004            traitement de utmp/wtmp
D_INIT  010            initialisation de la ligne (INIT)
D_GTAB  020            traitement du fichier gettytab
D_RUN   040            autres diagnostics lors de l'execution
D_RB    100            traitement du mode de rappel (ringback)
D_LOCK  200            traitement des fichiers verrou pour uugetty
D_SCH   400            traitement de la programmation horaire (schedule)
D_ALL   777            tout 
</PRE>
</CODE></BLOCKQUOTE>

Positionner <CODE>DEBUG=010</CODE> est un bon point de départ.</P>
<P>Si <CODE>syslogd</CODE> tourne, ces informations apparaîtront dans les
fichiers log.  Dans le cas contraire, elles seront enregistrées
dans <CODE>/tmp/getty:ttyS</CODE><EM>N</EM> pour <CODE>getty</CODE>, dans
<CODE>/tmp/uugetty:ttyS</CODE><EM>N</EM> pour <CODE>uugetty</CODE>, et dans
<CODE>/var/adm/getty.log</CODE>.  Consultez ces fichiers pour
déterminer ce qui se passe. Vous devrez très probablement
ajuster certains paramètres dans le fichier de configuration, et
reconfigurer votre modem.</P>
<P>Vous pouvez également essayer <CODE>mgetty</CODE>&nbsp;: certaines
personnes ont plus de chance avec...</P>

<H2><A NAME="s14">14. Autres sources d'information</A></H2>

<P>
<UL>
<LI>les pages de manuel pour&nbsp;: <CODE>agetty(8)</CODE>, <CODE>getty(1m)</CODE>, 
<CODE>gettydefs(5)</CODE>, <CODE>init(1)</CODE>, <CODE>login(1)</CODE>, <CODE>mgetty(8)</CODE>, 
<CODE>setserial(8)</CODE></LI>
<LI>la documentation de votre modem</LI>
<LI>NET-3 HOWTO&nbsp;: tout sur les réseaux, dont SLIP, CSLIP, et PPP</LI>
<LI>PPP HOWTO&nbsp;: aide sur PPP</LI>
<LI>Printing HOWTO&nbsp;: pour installer une imprimante série</LI>
<LI>Term HOWTO&nbsp;: tout ce que vous voulez savoir sur le programme <CODE>term</CODE></LI>
<LI>UPS HOWTO&nbsp;: pour la connexion d'onduleurs sur un port série</LI>
<LI>UUCP HOWTO&nbsp;: pour des informations sur le paramétrage de UUCP</LI>
<LI>forums de discussion Usenet&nbsp;: 
<BLOCKQUOTE><CODE>
<PRE>
comp.os.linux.answers
        FAQ, How-To, README, etc. a propos de Linux.
comp.os.linux.hardware 
        compatibilite materielle avec le systeme d'exploitation Linux.
comp.os.linux.networking 
        reseaux et communications sous Linux.
comp.os.linux.setup 
        installation et administration systeme sous Linux.
fr.comp.os.linux
        forum de discussion sur Linux en francais
</PRE>
</CODE></BLOCKQUOTE>

</LI>
<LI>la liste de diffusion consacrée aux ports série sous Linux.   Pour
vous abonnez, envoyez un message électronique à <CODE>
<A HREF="mailto:majordomo@vger.rutgers.edu">majordomo@vger.rutgers.edu</A></CODE>, avec ``<CODE>subscribe
linux-serial</CODE>'' dans le corps du message.  La commande ``<CODE>help</CODE>''
dans le corps du message vous permet de recevoir une message d'aide sur
les commandes supportées.  Ce serveur gère également d'autres listes
consacrées à Linux ; pour les connaître, envoyez la commande
``<CODE>lists</CODE>''.
</LI>
<LI>un document traitant des communications série et des cartes
multiports est disponible sur&nbsp;: <CODE>
<A HREF="http://www.cyclades.com">http://www.cyclades.com</A></CODE>.
</LI>
<LI>FAQ sur les modems&nbsp;:<BR> 
<A HREF="http://web.aimnet.com/~jnavas/modem/faq.html">Navas 28800 Modem FAQ</A><BR> 
<A HREF="http://www.teleport.com/~curt/modems.html">Curt's High Speed Modem Page</A>
</LI>
<LI>programmation série&nbsp;: <BR>
<A HREF="http://heg-school.aw.com/cseng/authors/stevens/advanced/advanced.nclk">Advanced Programming in the UNIX Environment</A>, par W. Richard
Stevens (ISBN 0-201-56317-7; Addison-Wesley)<BR> 
<A HREF="http://www.ora.com/catalog/posix/">POSIX Programmer's Guide</A>, by Donald Lewine (ISBN 0-937175-73-0; O'Reilly)</LI>
</UL>
</P>

<H2><A NAME="s15">15. Contributions </A></H2>

<P>     
Il ne m'aurait pas été possible de rédiger ce HOWTO tout seul.
Même si j'en ai écrit la plus grande partie, j'ai dû reprendre
pas mal d'articles existants. Merci à tous ceux qui ont
contribué à ce document, ou qui l'ont commenté.  La liste de ces
personnes est maintenant trop longue pour figurer ici (plus
d'une centaine). J'adresse plus particulièrement mes
remerciements à Ted T'so pour toutes ses réponses sur les
périphériques série, à Kris Gleason pour la maintenance de
<CODE>getty_ps</CODE>, et à Gert D&ouml;ring pour <CODE>mgetty</CODE>. </P>
<P><EM> Note du traducteur&nbsp;: un grand merci à 
<A HREF="mailto:Olivier.Tharan@int-evry.fr">Olivier Tharan</A>
et 
<A HREF="mailto:florian.salamin@siemens.ch">Florian Salamin</A> pour la relecture, ainsi qu'à 
<A HREF="mailto:dumas@Linux.EU.Org">Eric Dumas</A> pour la
gestion des traductions françaises et à 
<A HREF="mailto:Sebastien.Blondeel@lifl.fr">Sébastien  Blondeel</A> pour la mise en place d'un système centralisé des
relectures.  </EM></P>
<P>FIN DU LINUX HOWTO POUR LES PORTS SÉRIE</P>
</BODY>
</HTML>
