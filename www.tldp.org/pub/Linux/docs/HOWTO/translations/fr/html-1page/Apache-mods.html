<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
 <TITLE>Apache+DSO+mod_ssl+mod_perl+php+mod_auth_nds+mod_auth_mysql+mod_fastcgi</TITLE>
</HEAD>
<BODY>
<H1>Apache+DSO+mod_ssl+mod_perl+php+mod_auth_nds+mod_auth_mysql+mod_fastcgi</H1>

<H2>Ray Van Dolson, 
<A HREF="mailto:rayvd@firetail.org">rayvd@firetail.org</A> ; <BR>
version française : Xavier FACQ,
<A HREF="xavier.facq@free.fr">xavier.facq@free.fr</A>.</H2>v0.91, 5 avril 2000
<HR>
<EM>Ce document traite de la mise en place d'un serveur Apache intégrant
des modules DSO (<EM>Dynamic Shared Object</EM>, NdT&nbsp;: <EM>bibliothèque
d'objets partagée</EM>) comme par exemple mod_perl, mod_ssl et php.</EM>
<HR>
<H2><A NAME="s1">1. Copyright</A></H2>

<P>Mini-HOWTO Apache+mods pour systèmes Linux.</P>
<P>Copyright &copy; 2000 Ray Van Dolson.</P>
<P>Cette documentation est libre, vous pouvez la redistribuer et/ou la 
modifier selon les termes de la Licence Publique Générale GNU publiée 
par la Free Software Foundation (version 2 ou bien toute autre version 
ultérieure choisie par vous). </P>
<P>Cette documentation est distribuée car potentiellement utile, mais 
SANS AUCUNE GARANTIE, ni explicite ni implicite, y compris 
les garanties de commercialisation ou d'adaptation dans un but 
spécifique. Reportez-vous à la Licence Publique Générale GNU 
pour plus de détails. </P>
<P>Vous pouvez obtenir une copie de la Licence Publique Générale GNU en 
écrivant à la Free Software Foundation, Inc., 
675 Mass Ave, Cambridge, MA02139, États-Unis. <BR>
Ou bien sur le site suivant&nbsp;:
<A HREF="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</A>.</P>

<H2><A NAME="s2">2. Introduction</A></H2>

<P>Ce document va expliquer l'installation d'Apache et de ses modules
sur un serveur du Walla Walla College (www.wwc.edu). Bien qu'il 
soit spécifique à notre système, il peut servir d'aide précieuse
pour faire d'autres installations.</P>
<P>Ce document tentera d'expliquer les étapes exactes utilisées
pour installer le serveur. Des remarques seront faites lorsque 
les choses ont été réalisées différemment, mais la marche à 
suivre originale sera donnée (en supposant que ça marche).</P>

<H2><A NAME="ss2.1">2.1 Description des composants</A>
</H2>

<P>L'installation a été réalisée sur une Red Hat 6.1, noyau 2.2.14,
fonctionnant sur un Dual PIII 600 avec RAID5 et plein d'autres
choses alléchantes.</P>
<P>Le serveur-web est Apache 1.3.12.
Les modules suivants ont été ajouté au serveur&nbsp;:
<UL>
<LI>mod_fastcgi SNAP (et mod_rewrite), utilisé avec Zope ;</LI>
<LI>Auth-MySQL 2.20 ;</LI>
<LI>mod_ssl 2.6.2 (Open-SSL 0.9.5) ;</LI>
<LI>mod_perl 1.21 ;</LI>
<LI>PHP 3.0.15 ;</LI>
<LI>mod_auth_nds 0.3a.</LI>
</UL>
</P>
<H2><A NAME="ss2.2">2.2 Historique</A>
</H2>

<P>v0.91 (5 avril 2000)
<UL>
<LI>mise à jour de mod_fastcgi à la version correcte.</LI>
</UL>
</P>
<P>v0.9 (4 avril 2000)
<UL>
<LI>brouillon terminé ;</LI>
<LI>correction des erreurs d'orthographe et de grammaire.</LI>
</UL>
</P>
<P>v0.1 (mars 2000)
<UL>
<LI>premier jet.</LI>
</UL>
</P>

<H2><A NAME="s3">3. Installation des composants</A></H2>

<H2><A NAME="ss3.1">3.1 Prérequis</A>
</H2>

<P>Vous aurez besoin des logiciels suivant :
<UL>
<LI>
<A HREF="http://www.apache.org/dist/apache_1.3.12.tar.gz">Apache 1.3.12</A></LI>
<LI>
<A HREF="http://www.php.net/distributions/php-3.0.15.tar.gz">PHP 3.0.15</A>
<UL>
<LI>GD 1.3 (pour l'utilisation des fichiers GIF)
<UL>
<LI>
<A HREF="http://www.boutell.com/gd/http/gd-1.3.tar.gz">Source</A></LI>
<LI>
<A HREF="ftp://rpmfind.net/linux/redhat/redhat-6.0/i386/RedHat/RPMS/gd-1.3-5.i386.rpm">RPM</A></LI>
<LI>
<A HREF="ftp://rpmfind.net/linux/redhat/redhat-6.0/i386/RedHat/RPMS/gd-devel-1.3-5.i386.rpm">RPM-devel</A></LI>
</UL>
</LI>
<LI>GD 1.8.1 (pour l'utilisation des fichiers PNG)
<UL>
<LI>
<A HREF="http://www.boutell.com/gd/http/gd-1.8.1.tar.gz">Source</A></LI>
<LI>
<A HREF="ftp://rpmfind.net/linux/contrib/libc6/i386/gd-1.8.1-1.i386.rpm">RPM</A></LI>
<LI>
<A HREF="ftp://rpmfind.net/linux/contrib/libc6/i386/gd-devel-1.8.1-1.i386.rpm">RPM-devel</A></LI>
</UL>
</LI>
<LI>IMAP 4.5+
<UL>
<LI>
<A HREF="ftp://ftp.cac.washington.edu/imap/imap-4.7b.tar.Z">Source</A></LI>
<LI>
<A HREF="ftp://rpmfind.net/linux/redhat/redhat-6.1/i386/RedHat/RPMS/imap-4.5-4.i386.rpm">RPM</A></LI>
</UL>
</LI>
<LI>OpenLDAP 1.2.9+
<UL>
<LI>
<A HREF="ftp://ftp.openldap.org/pub/OpenLDAP/openldap-release/openldap-1.2.9.tgz">Source</A></LI>
<LI>
<A HREF="ftp://rpmfind.net/linux/rawhide/1.0/i386/RedHat/RPMS/openldap-1.2.9-5.i386.rpm">RPM</A></LI>
<LI>
<A HREF="ftp://rpmfind.net/linux/rawhide/1.0/i386/RedHat/RPMS/openldap-devel-1.2.9-5.i386.rpm">RPM-devel</A></LI>
</UL>
</LI>
</UL>
</LI>
<LI>
<A HREF="http://perl.apache.org/dist/mod_perl-1.22.tar.gz">mod_perl 1.22+</A>
<UL>
<LI>Modules pour Perl5</LI>
<LI>
<A HREF="http://amaunet.informatik.uni-dortmund.de/cgi-bin/CPAN/authors/id/GAAS/MIME-Base64-2.11.tar.gz">MIME::Base64</A></LI>
<LI>
<A HREF="http://www.perl.com/CPAN-local/modules/by-module/URI/URI-1.05.tar.gz">URI</A></LI>
<LI>
<A HREF="http://www.perl.com/CPAN-local/modules/by-module/HTML/HTML-Parser-3.07.tar.gz">HTML-Parser</A></LI>
<LI>
<A HREF="http://www.perl.com/CPAN-local/modules/by-module/Digest/Digest-MD5-2.09.tar.gz">Digest-MD5</A></LI>
<LI>
<A HREF="http://www.perl.com/CPAN-local/modules/by-module/Net/libnet-1.0703.tar.gz">libnet</A></LI>
<LI>
<A HREF="http://www.perl.com/CPAN-local/modules/by-module/WWW/libwww-perl-5.47.tar.gz">libwww</A></LI>
</UL>
</LI>
<LI>
<A HREF="http://www.modssl.org/source/mod_ssl-2.6.2-1.3.12.tar.gz">mod_ssl 2.6.2+</A>
<UL>
<LI>OpenSSL 0.9.5
<UL>
<LI>
<A HREF="http://www.openssl.org/source/openssl-0.9.5.tar.gz">Source</A></LI>
<LI>
<A HREF="ftp://rpmfind.net/linux/contrib/libc6/i386/openssl-0.9.5-1.i386.rpm">RPM</A></LI>
<LI>
<A HREF="ftp://rpmfind.net/linux/contrib/libc6/i386/openssl-devel-0.9.5-1.i386.rpm">RPM-devel</A></LI>
</UL>
   </LI>
<LI>
<A HREF="ftp://ftp.wwc.edu/pub/apache/modules/mod_ssl/depend/rsaref20.1996.tar.Z">RSAREF 2.0</A></LI>
<LI>
<A HREF="http://www.engelschall.com/sw/mm/mm-1.0.12.tar.gz">MM 1.0.12</A></LI>
</UL>
</LI>
<LI>
<A HREF="http://www.mysql.com/Downloads/MySQL-3.22/mysql-3.22.32.tar.gz">MySQL 3.22.32</A></LI>
<LI>
<A HREF="ftp://vrooom.at.drew.edu/pub/mod_auth_nds/mod_auth_nds-0.4.tar.gz">mod_auth_nds 0.4</A>
<UL>
<LI>
<A HREF="ftp://vrooom.at.drew.edu/pub/mod_auth_nds/ncpfs/ncpfs-2.2.0.17.tgz">ncpfs 2.2.0.17</A>
Note : le noyau doit être compilé avec le support IPX.</LI>
</UL>
</LI>
<LI>
<A HREF="http://bourbon.netvision.net.il/mysql/mod_auth_mysql/mod_auth_mysql-2.20.tar.gz">mod_auth_mysql 2.20</A></LI>
<LI>
<A HREF="http://www.FastCGI.com/dist/mod_fastcgi_SNAP_Oct06.tar.gz">mod_fastcgi SNAP Oct06</A></LI>
</UL>
</P>

<P>
<A NAME="arborescense utilisée"></A> 
Voici l'arborescense que j'ai utilisé et que je vous recommande&nbsp;:
<PRE>
+ /usr/src
|
+-+ apache
  |
  +-+ apache-1.3.12
  |
  +-+ modules
  | |
  | +-+ mod_perl
  | | |
  | | +- mod_perl-1.21
  | | |
  | | +-+ depend
  | |   |
  | |   +- &lt;perl modules here>
  | |
  | +-+ mod_ssl
  | | |
  | | +- mod_ssl-2.6.2-1.3.12
  | | |
  | | +-+ depend
  | |   |
  | |   +- openssl-0.9.5
  | |   |
  | |   +- rsaref-2.0
  | |   |
  | |   +- mm-1.0.12
  | |
  | +-+ mod_fastcgi_SNAP
  | |
  | +-+ php
  | | |
  | | +- php-3.0.15
  | | |
  | | +-+ depend
  | |   |
  | |   +- gd-1.3
  | |   |
  | |   +- imap-4.5
  | |   |
  | |   +- openldap-1.2.9
  | |
  | +-+ mod_auth_nds
  | | |
  | | +- mod_auth_nds-0.4
  | | |
  | | +-+ depend
  | |   |
  | |   +- ncpfs-2.2.0.17
  | |
  | +-+ mod_auth_mysql
  |
  +-+ mysql
</PRE>
</P>

<P>Vérifiez que les logiciels cités ci-dessus sont déjà installés sur votre
système. En général, ça ne peut pas faire de mal de tous les télécharger
et de les réinstaller au cas où, car vous pouvez avoir une ancienne version
sur votre machine.</P>

<H2><A NAME="ss3.2">3.2 mod_ssl</A>
</H2>

<H3>Installation et compilation de OpenSSL</H3>

<P>mod_ssl a besoin qu'un moteur SSL soit installé. OpenSSL est le choix
«&nbsp;naturel&nbsp;» pour un environnement Linux. Vous pouvez soit l'installer
à partir d'un RPM (comme moi), soit compiler les sources. Si vous 
choisissez de le compiler, il faut ensuite l'installer sur le système 
dans <CODE>/usr/local</CODE> par exemple, ou faire pointer les applications qui en 
ont besoin vers celui-ci.</P>
<P>Les RPM installeront OpenSSL dans le répertoire du système.</P>

<H3>Installation et compilation de RSAREF 2.0</H3>

<P>Créez un répertoire rsaref-2.0 où vous le souhaitez.<BR>
Personnellement, j'ai utilisé
<CODE>/usr/src/apache/modules/mod_ssl-blah/depend/</CODE>.
Déplacez vous dans ce répertoire.
<BLOCKQUOTE><CODE>
<PRE>
cd rsaref-2.0
cp -rp install/unix local
cd local
make
mv rsaref librsaref.a
</PRE>
</CODE></BLOCKQUOTE>
</P>

<P>Ces commandes doivent compiler la librarie rsaref&nbsp;! Quand vous aurez 
besoin d'y faire référence, configurez votre script dans ce répertoire.</P>

<H3>Installation et compilation de MM</H3>

<P>Décompressez mm-1.0.12 (ou une version plus récente) dans le 
sous-répertoire <CODE>depend</CODE> de mod_ssl-blah. Puis suivez les instructions
suivantes&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
  
cd mm-1.0.12
./configure --disable-shared
make
</PRE>
</CODE></BLOCKQUOTE>
</P>

<P>Cela devrait compiler la librarie mm. Comme ci-dessus, référencez
le répertoire quand vous en aurez besoin. Vous pouvez aussi installer
cette librairie sur le système.</P>

<H3>Installation et compilation de mod_ssl</H3>

<P>La procédure normale avec apxs est de compiler Apache en premier,
puis, en utilisant apxs, de compiler les modules que vous souhaitez
utiliser et de les insérer sur le serveur.
Cependant, mod_ssl doit être compilé sur le serveur avant que vous ne
puissiez l'utiliser via apxs.
Une fois que mod_ssl est sur le serveur, vous pouvez alors le mettre à
jour via apxs sans recompiler Apache entièrement.</P>
<P>Allez dans le répertoire où vous avez compilé mod_ssl et exécutez
les commandes suivantes pour la première compilation&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
#!/bin/sh

./configure \
        --with-apache=/usr/src/apache/apache_1.3.12 \
        --with-ssl \
        --with-rsa=../depend/rsaref-2.0/local \
        --with-mm=../depend/mm-1.0.12 \
        --enable-shared=ssl
</PRE>
</CODE></BLOCKQUOTE>
</P>

<P>Vous n'avez pas besoin de faire un <B>make</B> ou quoi que ce soit d'autre.
Quand vous compilerez Apache, tout se fera en même temps.</P>
<P>Ces lignes de configuration donnent deux exemples de comment votre système
peut être configuré.
Dans mon cas, OpenSSL était déjà installé quelque part (probablement dans
<CODE>/usr/lib</CODE>, <CODE>/usr/include</CODE>).
Par conséquent, je n'ai pas eu besoin de lui passer en paramètre le répertoire,
contrairement à rsa and mm qui n'étaient pas déjà présent. J'ai donc du les 
compiler et laisser les sources dans leur répertoire (ne faites pas de 
make install ni rien).
Dans ce cas, vous devez indiquer lors du «&nbsp;configure&nbsp;» le répertoire
adéquate pour qu'il puisse trouver les en-tête et les libraires.</P>
<P>À ce point, à moins que vous ne mettiez à niveau Apache (auquel cas, vous devrez
refaire le point précédent pour la nouvelle version), vous pouvez utiliser
apxs pour mettre à jour et recompiler mod_ssl. Voici mon script de configuration&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
./configure \
        --with-apxs=/apps/apache-1.3.12/bin/apxs \
        --with-ssl=../depend/openssl-0.9.4 \
        --with-rsa=../depend/rsaref-2.0/local \
        --with-mm=../depend/mm-1.0.12
</PRE>
</CODE></BLOCKQUOTE>
</P>

<P>Ou quelque combinaison de ce qui précède. Puis exécutez&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
make
make install
make distclean
</PRE>
</CODE></BLOCKQUOTE>

pour mettre fin à l'installation.</P>

<P>Note :
<EM>MM n'est pas nécessaire pour compiler mod_ssl. Si vous avez des
problèmes, ne le compilez pas et enlevez-le des paramètres de
«&nbsp;./configure&nbsp;».</EM></P>
<P><EM>Quand j'ai compilé mod_ssl, j'ai eu des erreurs avec DBM. 
Pour résourdre cela, j'ai ajouté -lndbm dans le Makefile&nbsp;:</EM>
<UL>
<LI>lancez le script ci-dessus</LI>
<LI>déplacez-vous dans pkg.sslmod</LI>
<LI>éditez le makefile et ajoutez -lndbm à LIBS_SHLIB.
Cela doit ressembler à&nbsp;:</LI>
<LI><CODE>LIBS_SHLIB=-lm -lcrypt -lndbdm</CODE></LI>
</UL>
</P>

<P><EM>Ainsi, vous ne devriez plus avoir de problème.</EM></P>

<H2><A NAME="ss3.3">3.3 Apache</A>
</H2>

<P>Désarchivez apache-1.3.12.tar.gz dans <CODE>/usr/src/apache</CODE> ou autre
part.
Ensuite, vous devez compiler Apache avec les options suivantes&nbsp;:
<UL>
<LI>mod_ssl (pour compiler mod_ssl comme une bibliothèque, il doit l'être
normalement en premier. Après, il pourra être mis à niveau via apxs.)</LI>
<LI>mod_proxy</LI>
<LI>mod_so</LI>
<LI>mod_rewrite (pour l'utilisez avec Zope)</LI>
</UL>
</P>

<P>Voici le fichier de configuration que j'utilise pour compiler
Apache&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
#!/bin/sh

SSL_BASE=../depend/openssl-0.9.4 \
RSA_BASE=../depend/rsaref-2.0/local \
EAPI_MM=../depend/mm-1.0.12 \
./configure \
        --enable-module=ssl \
        --enable-module=proxy\
        --enable-shared=proxy\
        --enable-module=rewrite \
        --enable-shared=rewrite \
        --prefix=/apps/apache-1.3.12 \
        --enable-shared=ssl \
        --enable-rule=SHARED_CORE \
        --enable-rule=SHARED_CHAIN \
        --enable-module=so
</PRE>
</CODE></BLOCKQUOTE>
</P>

<P>Puis :
<BLOCKQUOTE><CODE>
<PRE>
make
make certificate
make install
</PRE>
</CODE></BLOCKQUOTE>
</P>

<P>Apache doit maintenant être compilé et installé dans le répertoire
que vous avez spécifier avec <CODE>--prefix</CODE>. Vérifez qu'il fonctionne 
correctement.</P>
<P><CODE>/path/to/apache/bin/apachectl start</CODE></P>
<P>ou</P>
<P><CODE>/path/to/apache/bin/apachectl startssl</CODE></P>
<P>Si tout va bien, Apache doit fonctionner normalement. Sinon, reprennez 
les manipulations depuis le début, et vérifiez que vous n'avez rien
oublié.</P>

<H2><A NAME="ss3.4">3.4 MySQL</A>
</H2>

<P>php, tout comme mod_auth_mysql et peut-être mod_perl, à besoin que MySQL 
soit installé et qu'il fontionne. Il est au-delà des intentions
de ce document que d'entrer dans les détails de l'installation de MySQL.
Mais vous pouvez télécharger l'archive et suivre les instructions des
fichiers INSTALL. C'est assez simple de mettre en service MySQL.
Ça doit être quelque chose comme&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
./configure
make
make install
</PRE>
</CODE></BLOCKQUOTE>
</P>

<P>Comme vous devriez avoir tout d'installé, vous pouvez maintenant
compiler les autres modules d'Apache.</P>

<H2><A NAME="ss3.5">3.5 PHP 3.0.15</A>
</H2>

<P>Vous allez maintenant compiler php-3.0.15 comme une bibliothèque, ce qui veut 
dire que c'est un module qui peut être démarré ou arrêté indépendamment
du serveur. C'est ainsi plus facile de mettre à niveau php sans avoir 
à tout recompiler (ce qui peut être pénible si vous utilisez beaucoup
de modules avec Apache).</P>

<H3>GD</H3>

<P>Dans mon installation d'Apache, php utilise gd pour créer des images
et d'autres choses. J'utilise une vieille version de gd (installée via
RPM) pour faire la liaison avec php. Comme cela, on peut utiliser des
fichiers GIF en sortie. Cela n'est peut être pas très bien vis à vis des
copyright, ainsi vous devriez utiliser une version supérieure à la 1.3
qui ne supporte que les fichiers PNG.</P>
<P>Vous pouvez l'installer soit à partir d'un RPM (rpm -i gd*.rpm), soit
compiler les sources et l'installer sur votre système.</P>

<H3>IMAP</H3>

<P>Si vous voulez avoir le support IMAP, la procédure est similaire à gd.
J'ai aussi utilisé un RPM puisque je suis sur une Red Hat, mais l'installer
à partir des sources est une procédure assez simple&nbsp;: 
<BLOCKQUOTE><CODE>
<PRE>
  
./configure
make
make install
</PRE>
</CODE></BLOCKQUOTE>
    </P>

<H3>OpenLDAP</H3>

<P>Vous pouvez aussi installer OpenLDAP à partir de RPM ou des sources.
J'ai choisi de le faire à partir des sources, car la dernière version
n'était pas encore disponible en RPM au moment de mon installation.
<BLOCKQUOTE><CODE>
<PRE>
 
./configure
make
make install
</PRE>
</CODE></BLOCKQUOTE>

devrait faire l'affaire
(ou bien rpm -i openldap*.rpm).</P>

<H3>Installation et compilation de PHP 3.0.15</H3>

<P>Maintenant que les modules ci-dessus sont installés et qu'ils 
fonctionnent, vous pouvez compiler php comme une bibliothèque.
Le principe est simple et rapide&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
cd /usr/src/apache/modules/php/php-3.0.15

./configure \
        --with-apxs=/apps/apache/bin/apxs \
        --with-config-file-path=/apps/etc \
        --with-gd \
        --with-imap \
        --with-mysql=/apps/mysql \
        --with-ldap=/apps \
        --with-zlib \
        --enable-track-vars
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P><EM>Soyez sûr que si vos libraries <CODE>--with</CODE> ne sont pas installées
dans <CODE>/usr/local</CODE> ou <CODE>/usr</CODE>, vous les rajoutiez sur une
ligne =/localisation/, pour que configure puisse trouver les trucs
dont il a besoin&nbsp;!</EM>
<BLOCKQUOTE><CODE>
<PRE>
make
make install
</PRE>
</CODE></BLOCKQUOTE>
</P>

<P>Si tout c'est bien passé, «&nbsp;make install&nbsp;» va utiliser apxs pour
installer libphp3.so dans <CODE>/apache/libexec/libphp3.so</CODE>, ajouter
les entrées nécessaires dans httpd.conf et activer php3.</P>

<H2><A NAME="ss3.6">3.6 mod_perl</A>
</H2>

<P>Cette section explique l'installation de mod_perl comme une bibliothèque 
d'Apache. Il y a beaucoup de modules perl (en plus, bien sûr, de perl5
que je suppose vous avez déjà installé) qui doivent être ajoutés 
avant mod_perl pour compiler sans problèmes. Si vous n'installez 
pas ces modules, mod_perl devrait se plaindre et vous indiquer lesquels
manquent.</P>
<P>Il y a un certain ordre à respecter dans l'installation de ces
modules.
Certains dépendent d'autres, j'ai donc énuméré l'ordre dans lequel je
les ai installé sans problème.</P>

<H3>Modules perl requis</H3>

<P>Les modules perl peuvent être trouvés aux url données plus haut dans ce 
document. Téléchargez-les et mettez-les où vous le souhaitez ou dans le
répertoire que j'ai utilisé
(voir aussi 
<A HREF="#arborescense utilisée">arborescense utilisée</A>).
L'installation d'un module est simple. Après l'avoir désarchivé dans le
répertoire (normalement avec&nbsp;: tar xvfz), il suffit de faire&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
perl Makefile.PL
make
make install
</PRE>
</CODE></BLOCKQUOTE>
</P>

<P>Si tout ce passe bien, cela devrait configurer, compiler et installer
le module perl à votre place. Bien sûr vous pouvez lire les fichiers
README en cas d'erreurs.</P>
<P>Voici l'ordre de l'installation des modules nécessaires pour
mod_perl&nbsp;:
<OL>
<LI>MIME::Base64</LI>
<LI>URI</LI>
<LI>HTML::Parser</LI>
<LI>Digest-MD5</LI>
<LI>libnet</LI>
<LI>libwww</LI>
</OL>
</P>

<H3>Installation et compilation de mod_perl 1.2x</H3>

<P>Après avoir installé les modules perl, vous êtes prêt pour compiler
et installer mod_perl dans Apache. Allez dans le répertoire où vous 
avez extrait mod_perl, et lancez le script suivant&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
perl Makefile.PL \
        USE_APXS=1 \
        WITH_APXS=/path/to/apache/bin/apxs \
        EVERYTHING=1
</PRE>
</CODE></BLOCKQUOTE>
</P>

<P>Cela devrait configurer votre Makefile et dire à mod_perl de se compiler
tout seul comme une bibliothèque en utilisant apxs (dans le répertoire que vous 
devez spécifier). Après, vous n'avez plus qu'à faire&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
make
make install
</PRE>
</CODE></BLOCKQUOTE>
</P>

<P>Ainsi, mod_perl sera déplacé dans le répertoire approprié, et
les lignes ajoutées à votre fichier httpd.conf.</P>

<H2><A NAME="ss3.7">3.7 mod_auth_mysql</A>
</H2>

<P>mod_auth_mysql permet à Apache d'accéder à la base utilisateur MySQL.
L'installation comme une bibliothèque n'est pas très bien documentée dans le
fichier README, mais c'est possible.</P>
<P>Premièrement, allez dans le répertoire où vous avez extrait mod_auth_mysql.
Normalement, vous avez MySQL d'installé (avec les fichiers d'en-tête, etc.).
Regardez où sont installées les libraries MySQL et les fichiers d'en-tête.
Dans le doute, vérifiez dans <CODE>/usr/lib/mysql</CODE> et dans
<CODE>/usr/include/mysql</CODE>.</P>
<P>  
Pour compiler mod_auth_mysql, vous devez renommer le fichier
«&nbsp;config.h&nbsp;» en «&nbsp;auth_mysql_config.h&nbsp;». Je ne sais
pas pourquoi ce fichier n'a pas le bon nom, mais faites-le grâce à cette
commande&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
  
cp config.h auth_mysql_config.h
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Et pour finir :
<BLOCKQUOTE><CODE>
<PRE>
/path/to/apache/bin/apxs -i -a -I/usr/include/mysql -L/usr/lib/mysql \
        -lmysqlclient -c mod_auth_mysql.c
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Il faudra peut-être l'exécuter en super-utilisateur (<EM>root</EM>) si
vous n'avez pas les droits de lecture/écriture sur le répertoire d'Apache.</P>

<H2><A NAME="ss3.8">3.8 mod_auth_nds</A>
</H2>

<P>Dans mon école, le réseau Windows choisi est de type Netware. 
C'est resté comme ça longtemps, et bien qu'il fonctionnait bien,
maintenant on l'utilise uniquement pour le partage de fichiers et
le courriel. Tous les étudiants ont un compte Netware dans lequel
les fichiers personnels, ainsi que les pages web, sont stockés.
Chacun peut monter ses répertoires à partir du serveur Linux, 
ainsi on peut protéger les données avec les informations du compte
Netware. Avec ce module, Apache peut faire l'authentification à 
travers le réseau Netware.</P>

<H3>ncpfs</H3>

<P>Pour compiler mod_auth_nds, il faut que ncpfs soit installé
(ainsi que les fichiers d'en-tête). Avant de compiler ncpfs, 
vous devez vous assurer que votre noyau supporte IPX. Si c'est 
le cas, faites juste&nbsp;: 
<BLOCKQUOTE><CODE>
<PRE>
./configure
make
make install    # optionnel
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>qui copira (et installera) les libraries.</P>

<H3>Installation et compilation de mod_auth_nds</H3>

<P>Si ncpfs est installé, en lancant les commandes suivantes,
cela devrait compiler mod_auth_nds comme une bibliothèque&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
/path/to/apache/bin/apxs -c -lncp -L/usr/lib -I/usr/include mod_auth_nds.c
/path/to/apache/bin/apxs -i mod_auth_nds.so
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Ensuite, ajoutez les lignes suivantes au fichier httpd.conf (à la main)&nbsp;:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
LoadModule nds_auth_module libexec/mod_auth_nds.so
AddModule mod_auth_nds.c
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Il ne vous reste plus qu'à redémarrer Apache&nbsp;!</P>

<H2><A NAME="ss3.9">3.9 mod_fastcgi</A>
</H2>

<P>L'installation de mod_fastcgi est nécessaire si vous voulez 
accéder à votre serveur Zope avec Apache. C'est plus pratique, car
Apache est plus sécurisé et plus configurable que le serveur Zope.</P>
<P>La version stable actuelle de mod_fastcgi est 2.2.2, mais cette
version ne fonctionne pas correctement avec Zope. Vous devez donc
vous procurer SNAP release qui date du 06 octobre 1999 dont le lien
est donné plus haut.</P>

<P>  
Allez dans le répertoire de mod_fastcgi et lancez ces commandes&nbsp;:
<BLOCKQUOTE><CODE>
<PRE>
/path/to/apache/bin/apxs -o mod_fastcgi.so -c *.c
/path/to/apache/bin/apxs -i -a -n fastcgi mod_fastcgi.so
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Voir la documentation pour la description de son utilisation.</P>

<H2><A NAME="s4">4. Mots de la fin</A></H2>

<P>La plupart de ces informations peuvent être obtenues en lisant
les fichiers README et INSTALL de chacuns des modules. Cependant,
ce document est utile dans le cas où ça ne fonctionne pas ou que
la documentation n'est pas très explicite. Mais il a surtout 
l'avantage d'exister et d'être plus simple à suivre et à comprendre
que de passer d'un README à un autre.</P>

<H2><A NAME="ss4.1">4.1 Remerciements</A>
</H2>

<P>
<PRE>
Phillip R. Wilson &lt;pwilson@drew.edu>, auteur de mod_auth_nds, pour m'avoir aidé
à compiler et installer cmod_auth_nds avec apxs.

John Ash &lt;jash@wwc.edu>, mon patron, pour son aide et surtout pour mon travail.

Marcus Faure &lt;marcus@faure.de>, auteur de Apache SSL PHP/FI frontpage mini-HOWTO,
dont le document m'a beaucoup aidé.
</PRE>
</P>


<H2><A NAME="ss4.2">4.2 Contact</A>
</H2>

<P>Si vous avez trouvé des fautes de frappe ou de grammaire dans ce
document, n'hésitez pas à m'envoyer un courriel.</P>
<P>
<PRE>
Ray Van Dolson
Courriel : rayvd@firetail.org
IRC : DALnet, #Bludgeon (nick Variant)
</PRE>
</P>
<P>NdT : le lecteur francophone pourra en faire autant...
<PRE>
Xavier Facq
Courriel : xavier.facq@free.fr
</PRE>
</P>

<H2><A NAME="ss4.3">4.3 Autre</A>
</H2>

<P>Tout ce qui est mentionné dans ce document sera éventuellement
disponible en ftp sur ftp.wwc.edu/pub/apache. Il y aura tout
ce qui est présenté ci-dessus, ainsi que les scripts d'installation.</P>
</BODY>
</HTML>
