<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Petit guide d'amorçage multi-système avec GRUB</title><link rel="stylesheet" href="style.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.75.1"/><meta name="description" content="Ce document décrit comment installer Windows 98, Windows 2000, DOS et Linux en utilisant GRUB."/></head><body><div xml:lang="fr" class="article" title="Petit guide d'amorçage multi-système avec GRUB"><div class="titlepage"><div><div><h2 class="title"><a xmlns:saxon="http://icl.com/saxon" id="d0e1"/>
Petit guide d'amorçage multi-système avec GRUB
</h2></div><div><h3 class="subtitle"><i>
    
Version française du <span xml:lang="en" class="foreignphrase"><em xml:lang="en" class="foreignphrase">Multiboot 
with GRUB Mini-HOWTO</em></span>
                
</i></h3></div><div><div class="author"><h3 class="author"><span class="firstname">Ivan</span> <span class="surname">Kanis</span></h3><code class="email">&lt;<a class="email" href="mailto:ivank CHEZ juliva POINT com">ivank CHEZ juliva POINT com</a>&gt;</code></div></div><div><p class="othercredit"><span class="contrib">Adaptation française</span> : <span class="firstname">Simon</span> <span class="surname">Depiets</span></p></div><div><p class="othercredit"><span class="contrib">Relecture de la version française</span> : <span class="firstname">Loïs</span> <span class="surname">Di Qual</span></p></div><div><p class="othercredit"><span class="contrib">Préparation de la publication de la v.f.</span> : <span class="firstname">Jean-Philippe</span> <span class="surname">Guérard</span></p></div><div><p class="releaseinfo">Version : 1.0.fr.1.1</p></div><div><p class="pubdate">16 juin 2005</p></div><div><div class="revhistory"><table border="1" width="100%" summary="Revision history"><tr><th align="left" valign="top" colspan="3"><b>Historique des versions</b></th></tr><tr><td align="left">Version 1.0.fr.1.1</td><td align="left">2005-06-16</td><td align="left">LDQ, JPG</td></tr><tr><td align="left" colspan="3">Version relue.</td></tr><tr><td align="left">Version 1.0.fr.1.0</td><td align="left">2005-01-22</td><td align="left">SD, JPG</td></tr><tr><td align="left" colspan="3">Première traduction française.</td></tr><tr><td align="left">Version 1.0</td><td align="left">2001-01-15</td><td align="left">IK</td></tr></table></div></div><div><div class="abstract" title="Résumé"><p class="title"><b>Résumé</b></p><p>

Ce document décrit comment installer Windows 98, Windows 2000, DOS et
Linux en utilisant GRUB.

</p></div></div></div><hr/></div><div class="toc"><p><b>Table des matières</b></p><dl><dt><span class="sect1"><a href="#d0e90">1. 
      Commentaires et corrections
  </a></span></dt><dt><span class="sect1"><a href="#d0e103">2. 
      Nouvelles versions de ce document
  </a></span></dt><dt><span class="sect1"><a href="#d0e114">3. 
		Pourquoi ?
	</a></span></dt><dt><span class="sect1"><a href="#d0e125">4. 
		Procédure d'installation
	</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e128">4.1. 
			Préparer des disquettes de démarrage
		</a></span></dt><dt><span class="sect2"><a href="#d0e137">4.2. 
			Installer Linux
		</a></span></dt><dt><span class="sect2"><a href="#d0e164">4.3. 
			Installer GRUB
		</a></span></dt><dt><span class="sect2"><a href="#d0e179">4.4. 
			Installer Windows 2000 :
		</a></span></dt><dt><span class="sect2"><a href="#d0e192">4.5. 
			Installer DOS.
		</a></span></dt><dt><span class="sect2"><a href="#d0e201">4.6. 
			Installer Windows 98
		</a></span></dt><dt><span class="sect2"><a href="#d0e210">4.7. 
			La touche finale
		</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e223">5. 
		Références
	</a></span></dt></dl></div><div class="sect1" title="1.  Commentaires et corrections"><div class="titlepage"><div><div><h2 class="title"><a xmlns:saxon="http://icl.com/saxon" id="d0e90"/>1. 
      Commentaires et corrections
  </h2></div></div></div><p>

       Merci de faire parvenir en anglais à l'auteur vos questions
       et commentaires relatifs à la version originale de ce
       document à l'adresse

       <code class="email">&lt;<a class="email" href="mailto:ivank CHEZ juliva POINT com">ivank CHEZ juliva POINT com</a>&gt;</code>.

  </p><p>

      N'hésitez pas à faire parvenir tout commentaire relatif à
      la version française de ce document à

      <code class="email">&lt;<a class="email" href="mailto:commentaires CHEZ traduc POINT org">commentaires CHEZ traduc POINT org</a>&gt;</code>

      en précisant son titre, sa date et sa version.

  </p></div><div class="sect1" title="2.  Nouvelles versions de ce document"><div class="titlepage"><div><div><h2 class="title"><a xmlns:saxon="http://icl.com/saxon" id="d0e103"/>2. 
      Nouvelles versions de ce document
  </h2></div></div></div><p>

      Vous trouverez la plus récente version française de ce document à
      l'adresse : <a class="ulink" href="http://www.traduc.org/docs/howto/lecture/Multiboot-with-GRUB.html" target="_top">http://www.traduc.org/docs/howto/lecture/Multiboot-with-GRUB.html</a>.

  </p><p>
      
      La plus récente version originale de ce document est disponible à
      l'adresse : <a class="ulink" href="http://www.tldp.org/HOWTO/Multiboot-with-GRUB" target="_top">http://www.tldp.org/HOWTO/Multiboot-with-GRUB</a>.
  
  </p></div><div class="sect1" title="3.  Pourquoi ?"><div class="titlepage"><div><div><h2 class="title"><a xmlns:saxon="http://icl.com/saxon" id="d0e114"/>3. 
		Pourquoi ?
	</h2></div></div></div><p>
		J'ai voulu avoir la possibilité de faire démarrer tous les systèmes d'exploitations
		de mon ordinateur sans avoir à passer par plusieurs menus consécutifs. Je sais que
		je peux installer NT par dessus win9x, lui-même installé par dessus DOS.
		J'aurais alors besoin de passer par le menu NT puis le menu win9x pour démarrer DOS.
		J'ai donc voulu rendre simple le démarrage de tous ces systèmes.
	</p><p>
		Ceci devint un obstacle car le problème avec les systèmes d'exploitation Microsoft, 
		c'est qu'ils veulent tous démarrer depuis la partition primaire. C'est ici que 
		GRUB intervient, car il peut cacher les partitions primaires. Vous pouvez utiliser 
		jusqu'à trois partitions pour installer les systèmes d'exploitation Microsoft. 
		GRUB cachera les 2 autres partitions afin que les systèmes d'exploitation
		ne les voient pas. Cela signifie que vous aurez besoin d'une autre partition 
		pour partager les données entre DOS, Win9x et Windows 2000. La quatrième 
		partition est utilisée dans ce but.
	</p><p>
		J'ai aussi voulu un système de menu et GRUB nous en propose un. 
	</p><p>
		Une autre fonctionnalité pratique de GRUB est qu'il supporte le système de fichier
		reiserfs, je n'ai donc pas besoin de garder mon fichier /boot sur une partition ext2
		séparée.
	</p></div><div class="sect1" title="4.  Procédure d'installation"><div class="titlepage"><div><div><h2 class="title"><a xmlns:saxon="http://icl.com/saxon" id="d0e125"/>4. 
		Procédure d'installation
	</h2></div></div></div><div class="sect2" title="4.1.  Préparer des disquettes de démarrage"><div class="titlepage"><div><div><h3 class="title"><a xmlns:saxon="http://icl.com/saxon" id="d0e128"/>4.1. 
			Préparer des disquettes de démarrage
		</h3></div></div></div><p>
			Vous aurez besoin de 3 disquettes de démarrage. Faites de la première
			disquette une disquette de démarrage DOS. Copiez les fichiers fdisk.exe
			et sys.exe sur cette disquette.
		</p><pre class="synopsis">
FORMAT /S A:
COPY FDISK.EXE A:
COPY SYS.EXE A:
</pre><p>
			Utilisez votre seconde disquette pour créer un disque de récupération de
			Windows 98. Vous utiliserez la troisième disquette pour GRUB dans peu de
			temps.
		</p></div><div class="sect2" title="4.2.  Installer Linux"><div class="titlepage"><div><div><h3 class="title"><a xmlns:saxon="http://icl.com/saxon" id="d0e137"/>4.2. 
			Installer Linux
		</h3></div></div></div><p>
			Installez votre distribution Linux favorite, vous pouvez utiliser l'outil 
			de partitionnement de celle-ci ou fdisk pour partitionner votre disque dur. 
		</p><p>
			Voici comment j'ai partitionné mon disque dur :
		</p><pre class="synopsis">
Périphérique   Début       Fin     Blocs   Id  Système
/dev/hda1          1         6     48163+  16  FAT16 Caché
/dev/hda2          7        19    104422+  16  FAT16 Caché
/dev/hda3         20       593   4610655   1b  Win95 FAT32 Caché
/dev/hda4        594      3737  25254180    5  Ext
/dev/hda5        594       848   2048256    6  FAT16
/dev/hda6        849      2123  10241406    7  HPFS/NTFS
/dev/hda7       2124      2140    136521   82  Linux swap
/dev/hda8       2141      2523   3076416   83  Linux
</pre><p>
		
			Ma première partition sert à démarrer Windows
			2000 (10 Mo devraient largement suffire). 
			La partition ne contiendra que les fichiers
			nécessaires à faire démarrer NT comme boot.ini,
			ntldr, ntdetect.com, et cætera. NT résidera sur
			la partition 6 dans mon exemple. Cette partition
			est cachée, et formatée en FAT16
		
		</p><p>
			La seconde partition est destinée à DOS. J'estime que 100 Mo suffisent. Elle est aussi en FAT16.
		</p><p>
			La troisième partition est destinée à Win9x. Je lui ai attribué 5Go. Elle est en FAT32 pour les performances de ce type de système de fichiers.
		</p><p>
			Puis créez la partition ext. C'est la partition 4 sur fdisk.
		</p><p>
			Créez une partition de 2Go. Cette partition est utilisée pour partager les données
			entre tous les systèmes d'exploitation. Assurez vous que la somme de toutes les partitions 
			ci-dessus est inférieure à 8Go. C'est une limitation imposée par DOS.
		</p><p>
			Puis créez la partition Windows 2000. Je lui ait donné 10Go étant donné que cette version
			de Windows est un "énorme cochon bien gras". J'en ai fait une partition HPFS/NTFS pour sa 
			vitesse.
		</p><p>
			Ensuite ajoutez votre partition swap et Linux. Assurez-vous que vous n'avez pas une 
			partition séparée pour /boot. Ça se passera mieux dans GRUB si vous gardez /boot dans 
			la partition racine.
		</p><p>
			Après avoir installé Linux continuez en formatant les partitions FAT16:
		</p><pre class="synopsis">
mkdosfs /dev/hda1
mkdosfs /dev/hda2
mkdosfs /dev/hda6
</pre></div><div class="sect2" title="4.3.  Installer GRUB"><div class="titlepage"><div><div><h3 class="title"><a xmlns:saxon="http://icl.com/saxon" id="d0e164"/>4.3. 
			Installer GRUB
		</h3></div></div></div><p>
			Assurez-vous de posséder la dernière version de GRUB. J'utilise la version 0.5.96.1. 
			La version contenue dans ma distribution était dépassée et m'a causé beaucoup de 
			problèmes. Vous pouvez télécharger la dernière version sur http://www.gnu.org/software/grub/
		</p><p>
			Maintenant vous devez installer GRUB sur la disquette. Vous ne pouvez pas encore
		       	l'installer sur votre disque dur car Windows 2000 l'écraserait.
		</p><pre class="synopsis">
grub-install '(fd0)'
</pre><p>
			Créez le menu.lst suivant pour GRUB. Ce fichier est dans /boot/grub.
		</p><pre class="synopsis">
#
# Exemple de fichier de configuration du menu du démarrage
#

# Démarrer automatiquement après une minute.
timeout 60

# Par défaut, démarrer la seconde entrée (0 étant la première).
default 1

# Positionnement sur la première entrée.
fallback 0

title Windows 2000
unhide (hd0,0)
hide (hd0,1)
hide (hd0,2)
rootnoverify (hd0,0)
chainloader +1
makeactive

# Pour démarrer Linux
title  Linux
root (hd0,7)
kernel /boot/vmlinuz-2.X.xx root=/dev/hda8 video=matrox:vesa:261
	
title Windows 98
hide (hd0,0)
hide (hd0,1)
unhide (hd0,2)
rootnoverify (hd0,2)
chainloader +1
makeactive
	
title DOS 6.22
hide (hd0,0)
unhide (hd0,1)
hide (hd0,2)
rootnoverify (hd0,1)
chainloader +1
makeactive
	
# Pour démarrer Linux
title  Linux (simple utilisateur)
root (hd0,7)
kernel /boot/vmlinuz-2.X.xx root=/dev/hda8 video=matrox:vesa:261 single
	
title Partition 2 (disquette)
hide (hd0,0)
unhide (hd0,1)
hide (hd0,2)
chainloader (fd0)+1
	
title Partition 3 (disquette)
hide (hd0,0)
hide (hd0,1)
unhide (hd0,2)
chainloader (fd0)+1
</pre><p>
			Vérifiez que vous pouvez bien démarrer Linux avec la disquette. Si vous avez des problèmes
			vous pouvez entrer en passant par la ligne de commande de GRUB et observer ce 
			qu'il se passe. La documentation de GRUB est très bien fournie en informations, il
			vous suffit de la consulter pour résoudre	un éventuel problème.
		</p></div><div class="sect2" title="4.4.  Installer Windows 2000 :"><div class="titlepage"><div><div><h3 class="title"><a xmlns:saxon="http://icl.com/saxon" id="d0e179"/>4.4. 
			Installer Windows 2000 :
		</h3></div></div></div><p>
			J'ai du initialiser la première partition avant d'installer Windows 2000. 
			Insérez la disquette de démarrage DOS et redémarrez votre ordinateur. 
			Une fois que l'invite de commande DOS s'affiche, saisissez ce qui suit :
		</p><pre class="synopsis">
FDISK /MBR
SYS C:
</pre><p>
			Maintenant vous pouvez continuer et installer Windows 2000. Windows 
			2000 vous demandera sur quelle partition le système doit être installé. La partition
			que vous avez créée avec fdisk doit s'afficher comme endommagée ou non formatée,
			sélectionnez-là.
		</p><p>
			Pour cacher le menu Windows 2000 éditez un fichier appelé boot.ini qui doit 
			se situer dans le disque C:\ . Changez la valeur du timeout de 30 à 0.
		</p><pre class="synopsis">
[boot loader]
timeout=0
default=multi(0)disk(0)rdisk(1)partition(1)\WINNT
[operating systems]
...
</pre></div><div class="sect2" title="4.5.  Installer DOS."><div class="titlepage"><div><div><h3 class="title"><a xmlns:saxon="http://icl.com/saxon" id="d0e192"/>4.5. 
			Installer DOS.
		</h3></div></div></div><p>
			Insérez la disquette GRUB. Lorsque vous verrez le menu, insérez la disquette
			de démarrage DOS. Sélectionnez la partition 2 (disquette) depuis le menu. 
			Appuyez sur Entrée. Ceci démarrera sur la disquette et cachera les partitions 1 et 3.
		</p><p>
			Lancez FDISK et vérifiez que le disque C: est bien la partition 2. Puis installez DOS :
		</p><pre class="synopsis">
SYS C:
</pre></div><div class="sect2" title="4.6.  Installer Windows 98"><div class="titlepage"><div><div><h3 class="title"><a xmlns:saxon="http://icl.com/saxon" id="d0e201"/>4.6. 
			Installer Windows 98
		</h3></div></div></div><p>
			Insérez la disquette GRUB. Quand vous voyez le menu insérez la disquette de 
			récupération Windows 98. Sélectionnez la partition 3 (disquette) depuis le menu. 
			Appuyez sur Entrée. Cela démarrera la disquette et cachera les partitions 1 et 2.
		</p><p>
			Lancez FDISK et vérifiez que le disque C: est bien la partition 3. Puis installez Windows 98 :
		</p><pre class="synopsis">
SYS C:
</pre></div><div class="sect2" title="4.7.  La touche finale"><div class="titlepage"><div><div><h3 class="title"><a xmlns:saxon="http://icl.com/saxon" id="d0e210"/>4.7. 
			La touche finale
		</h3></div></div></div><p>
			Testez que tout fonctionne depuis le menu de GRUB :
		</p><p>
			Vous devriez pouvoir démarrer sur les 4 systèmes d'exploitation depuis la disquette de 
			démarrage GRUB.
		</p><p>
			Si tout semble bon vous pouvez continuer et installer GRUB sur votre disque dur.
			Dans un terminal, sous Linux, saisissez :
		</p><pre class="synopsis">
grub-install /dev/hda
</pre><p>
			Vous devriez maintenant pouvoir démarrer les 4 systèmes d'exploitation depuis le menu GRUB. 
			Respirez !
		</p></div></div><div class="sect1" title="5.  Références"><div class="titlepage"><div><div><h2 class="title"><a xmlns:saxon="http://icl.com/saxon" id="d0e223"/>5. 
		Références
	</h2></div></div></div><p>
		J'ai trouvé ces liens utiles lorsque j'ai mis en place mon système :
	</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
	
	<a class="ulink" href="http://www.gnu.org/software/grub/grub.html" target="_top">GNU
	GRUB</a>
		
	</p></li><li class="listitem"><p>
	
	<a class="ulink" href="http://tldp.org/HOWTO/Multiboot-with-GRUB.html" target="_top">Le
	Petit guide Linux-DOS-Win95-OS2</a>
	
	</p></li></ul></div></div></div></body></html>