<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
 <TITLE>Mini-HOWTO LBX</TITLE>
</HEAD>
<BODY>
<H1>Mini-HOWTO LBX</H1>

<H2>Paul D. Smith, <CODE>
<A HREF="mailto:psmith@baynetworks.com">psmith@baynetworks.com</A></CODE>, trad. : 
<A HREF="mailto:xglattard@aol.com">Xavier Glattard</A></H2>v1.04, 11 D&eacute;cembre 1997, trad. Juin 1997
<HR>
<EM>LBX (Low Bandwidth X, X Faible Bande-passante) est une extension du serveur
X qui effectue une compression du protocole X. En d'autres termes, elle
permet, dans le cas d'applications X et d'un serveur X s&eacute;par&eacute;s par une
connexion r&eacute;seau lente, d'acc&eacute;l&eacute;rer l'affichage et de
r&eacute;duire les temps de r&eacute;ponse.</EM>
<HR>
<H2><A NAME="s1">1. Introduction</A></H2>

<P><EM>Low-Bandwidth X</EM> (LBX) prend en compte le fait
que de nos jours tout le monde ne travaille pas qu'&agrave; une ou deux
connexions rapides du serveur sur lequel tournent ses applications.</P>
<P>Le protocole X peut g&eacute;n&eacute;rer un trafic extraordinaire sur votre
r&eacute;seau, en
particulier pour des choses apparemment simples telles que la cr&eacute;ation de
nouvelles fen&ecirc;tres. Quiconque aura essay&eacute; d'utiliser X &agrave; travers une
connexion modem &agrave; 28,8 (ou m&ecirc;me mieux) vous le dira :
cr&eacute;er de nouvelles
fen&ecirc;tres X n&eacute;cessite une patience &agrave; toute &eacute;preuve. </P>
<P>Le principe est le suivant : LBX est un syst&egrave;me de compression et de cache conçu pour
minimiser le trafic X g&eacute;n&eacute;r&eacute; entre deux
syst&egrave;mes.</P>

<H2><A NAME="s2">2. Quel est le statut de LBX ?</A></H2>

<P>En tant que composant de la publication X11R6.3 du Consortium X datant de d&eacute;cembre
1996, LBX est une authentique extension du protocole X. Pour les utilisateurs de
XFree86, cela correspond &agrave; XFree86 version 3.3.</P>

<H2><A NAME="s3">3. Pourquoi utiliser LBX ?</A></H2>

<P>Si vous utilisez un modem pour vous connecter &agrave; un prestataire de service,
et que vous ex&eacute;cutez des applications X sur des machines distantes,
l'affichage (variables DISPLAYs) &eacute;tant dirig&eacute; sur votre machine (et vice versa),
alors LBX acc&eacute;l&eacute;rera la
connexion. De m&ecirc;me, si vous redirigez l'affichage d'autres syst&egrave;mes &agrave;
travers des r&eacute;seaux &eacute;tendus (d'autres pays, par exemple) ou &agrave; travers des
connexions lentes, LBX peut vous &ecirc;tre utile.</P>

<H2><A NAME="s4">4. Pourquoi ne pas utiliser LBX ?</A></H2>

<P>LBX est inutile, naturellement, si vous ex&eacute;cuter des applications
localement, ou si vous n'utilisez pas X.</P>
<P>De m&ecirc;me, si vous travaillez sur un r&eacute;seau local rapide, LBX ne vous sera pas d'une
grande utilit&eacute;. Certains disent : "si LBX r&eacute;duit le trafic r&eacute;seau, ne
pourrait-on pas l'utiliser sur des r&eacute;seaux locaux rapides ?" On pourrait, si
le but est de r&eacute;duire le trafic sur le r&eacute;seau. N&eacute;anmoins, cela
introduirait
du cache et de la compression, qui consomment des ressources &agrave; chaque
extr&eacute;mit&eacute;s (de la m&eacute;moire suppl&eacute;mentaire pour le cache, et du temps CPU pour
la d&eacute;compression). Si votre liaison est plut&ocirc;t performante, LBX causera sans
doute un ralentissement global du r&eacute;seau. </P>

<H2><A NAME="s5">5. Comment fonctionne LBX ?</A></H2>

<P>LBX fonctionne en introduisant un <EM>serveur proxy</EM> du c&ocirc;t&eacute; du client,
lequel se charge du cache et de la compression. Le serveur X sait que le
client utilise un serveur proxy, et d&eacute;compresse en cons&eacute;quence.</P>
<P>Voici un exemple de configuration classique pour des clients X distants.
Dans la suite, LOCAL repr&eacute;sentera toujours la station qui se trouve en face
de vous, et dont vous regardez le moniteur, et DISTANT sera la station
distante, sur laquelle votre application est ex&eacute;cut&eacute;e.</P>
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
    DISTANT                               LOCAL
 +-----+                                             +-----+
 | APP |-\          R&eacute;seau            +-----------+  |     |\
 +-----+  \-------------------------->| SERVEUR X |=>|     ||
 +-----+  /     (Protocole X)         +-----------+  +-----+\
 | APP |-/                                          /_____//
 +-----+
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>Lors de l'utilisation de LBX, un serveur proxy (<CODE>lbxproxy</CODE>) est introduit
du c&ocirc;t&eacute; distant, et les applications communiquent avec ce processus et non
plus directement avec le serveur LOCAL. Ce processus se charge alors du
cache et de la compression des requ&ecirc;tes X et les transmet. Cela ressemble &agrave;
&ccedil;a :</P>
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
     DISTANT                                     LOCAL
                                                           +-----+
 +-----+  +-------+        R&eacute;seau           +-----------+  |     |\
 | APP |->| PROXY |------------------------>| SERVEUR X |=>|     ||
 +-----+  +-------+    (LBX/Protocole X)    +-----------+  +-----+\
 +-----+   /                                              /_____//
 | APP |--/
 +-----+
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</P>
<P>Le d&eacute;tail des fonctions de cache et de compression de LBX sort du cadre de
ce document.</P>

<H2><A NAME="s6">6. De quoi ai-je besoin pour utiliser LBX ?</A></H2>

<P>Vous avez besoin sur votre syst&egrave;me LOCAL d'un serveur X compil&eacute; avec
l'extension LBX. A moins que vous n'ayez explicitement demand&eacute; le contraire,
les serveurs X11R6.3 incluent
automatiquement  LBX &agrave; la compilation. Par cons&eacute;quent, tous les serveurs XFree86 3.3 incluent LBX
par d&eacute;faut.</P>
<P>Vous pouvez utiliser la commande <CODE>xdpyinfo</CODE> afin de v&eacute;rifier si votre
serveur dispose de l'extension LBX : ex&eacute;cutez <CODE>xdpyinfo</CODE> et v&eacute;rifiez la
liste qui suit  "number of extensions" (nombre d'extensions); vous devez
voir "LBX" dans cette liste.</P>
<P>Ensuite, vous avez besoin d'un programme <CODE>lbxproxy</CODE> compil&eacute; pour le
syst&egrave;me DISTANT. C'est le point le plus d&eacute;licat. Si le syst&egrave;me distant n'est
pas du m&ecirc;me type que votre syst&egrave;me local, le <CODE>lbxproxy</CODE> de votre syst&egrave;me
local ne sera pas bon, &eacute;videment.</P>
<P>Malheureusement, aucune distribution de <CODE>lbxproxy</CODE> n'a jamais &eacute;t&eacute;
publi&eacute;e. Par cons&eacute;quent, vous devez soit (a) obtenir et compiler la majeure partie, sinon
la totalit&eacute;, de X11R6.3 pour le syst&egrave;me distant, soit (b) trouver quelque part
un ex&eacute;cutable <CODE>lbxproxy</CODE> pr&eacute;compil&eacute; pour votre syst&egrave;me. Cette derni&egrave;re solution est
naturellement la plus simple.</P>
<P><CODE>lbxproxy</CODE> est constitu&eacute; d'un unique fichier ex&eacute;cutable. Aucun
fichier de configuration, de ressources, etc. ne lui est associ&eacute;.</P>

<H2><A NAME="s7">7. De quoi n'ai-je pas besoin pour utiliser LBX ?</A></H2>

<P>Le syst&egrave;me DISTANT <B>n'a pas</B> besoin d'un nouveau serveur X (dans tous les
cas, le syst&egrave;me DISTANT n'a besoin d'ex&eacute;cuter <EM>aucun</EM> serveur X).</P>
<P>L'application que vous voulez ex&eacute;cuter <B>n'a pas</B> besoin d'&ecirc;tre li&eacute;e &agrave;
une version sp&eacute;ciale de X, ou &agrave; une biblioth&egrave;que sp&eacute;ciale; j'utilise
r&eacute;guli&egrave;rement des applications commerciales X11R5 &agrave; travers LBX sans aucun
souci.</P>
<P>Vous <B>n'avez pas</B> besoin de droits d'acc&egrave;s "root" ou privil&eacute;gi&eacute;s sur le
syst&egrave;me DISTANT; le processus <CODE>lbxproxy</CODE> utilise vos droits d'acc&egrave;s
normaux. De plus, vous pouvez l'ex&eacute;cuter depuis votre r&eacute;pertoire personnel :
il n'a pas besoin d'&ecirc;tre install&eacute; &agrave; un endroit particulier.</P>

<H2><A NAME="s8">8. Comment je d&eacute;marre LBX ?</A></H2>

<P>Bon, nous y voil&agrave;... apr&egrave;s tout, rien de bien compliqu&eacute; jusqu'&agrave; pr&eacute;sent.
Remplacez dans la suite LOCAL et DISTANT respectivement par les noms d'h&ocirc;te de votre
station locale et du syst&egrave;me distant (ne m&eacute;langez pas tout!).</P>
<P>Sur LOCAL :</P>
<P>
<OL>
<LI> D&eacute;marrez votre serveur X.
</LI>
<LI> 
Donnez les droits d'acc&egrave;s du syst&egrave;me distant aupr&egrave;s de votre serveur X. Avec
la m&eacute;thode de la liste d'h&ocirc;tes, tapez <CODE>xhost +DISTANT</CODE>. Si vous
utilisez <CODE>xauth</CODE> cela risque de ne pas &ecirc;tre suffisant; consultez le
manuel <EM>xauth(1)</EM> pour plus d'informations.

Vous pourriez consulter efficacement le mini howto 
<A HREF="http://www.freenix.fr/linux/HOWTO/mini/Remote-X-Apps.html">Remote X Apps</A>
si vous n'&ecirc;tes pas familier avec la configuration des
droits d'acc&egrave;s distants sous X.</LI>
</OL>
</P>
<P>Sur DISTANT :</P>
<P>
<OL>
<LI> D&eacute;marrez <CODE>lbxproxy</CODE> en pr&eacute;cisant la redirection vers le serveur X
LOCAL, comme cela :

<BLOCKQUOTE><CODE>
<PRE>
  $ lbxproxy -display LOCAL :0 :1 &amp;
</PRE>
</CODE></BLOCKQUOTE>


Cette commande indique &agrave; <CODE>lbxproxy</CODE> d'utiliser l'&eacute;cran ("display")
<CODE> :1</CODE> sur le syst&egrave;me DISTANT; si ce syst&egrave;me dispose d&eacute;j&agrave; de plus d'un &eacute;cran,
vous pouvez choisir <CODE> :2</CODE>, ou n'importe quoi d'autre.
</LI>
<LI> 
D&eacute;finissez votre variable d'environnement DISPLAY afin qu'elle pointe vers
l'&eacute;cran g&eacute;r&eacute; par <CODE>lbxproxy</CODE>, au lieu de l'&eacute;cran habituel :

<BLOCKQUOTE><CODE>
<PRE>
  $ DISPLAY= :1
  $ export DISPLAY
</PRE>
</CODE></BLOCKQUOTE>


Ou, si vous utilisez csh ou un de ses clones :

<BLOCKQUOTE><CODE>
<PRE>
  % setenv DISPLAY :1
</PRE>
</CODE></BLOCKQUOTE>

</LI>
<LI> 
Si vous utilisez <CODE>xauth</CODE>, vous aurez &agrave; v&eacute;rifier que votre "cookie" est
accessible localement. Consultez le mini howto 
<A HREF="http://www.freenix.fr/linux/HOWTO/mini/Remote-X-Apps.html">Remote X Apps</A> pour plus d'informations &agrave; ce propos.
</LI>
<LI> 
D&eacute;marrez vos applications X!</LI>
</OL>
</P>
<P>Voil&agrave;; toute application d&eacute;marr&eacute;e vers l'&eacute;cran <CODE> :1</CODE> utilisera LBX.
Naturellement, il n'y a aucune raison pour que vous ne puissiez pas &eacute;galement
d&eacute;marrer des applis X vers <CODE>LOCAL :0</CODE> et les utiliser simultan&eacute;ment.</P>

<H2><A NAME="s9">9. Probl&egrave;mes</A></H2>

<P>Voici quelques probl&egrave;mes courants :</P>
<P>
<DL>
<DT><B>Q)</B><DD><P><CODE>lbxproxy</CODE> se termine avec l'erreur "access denied" ("acc&egrave;s
refus&eacute;").</P>

<DT><B>R)</B><DD><P>Cela signifie que le syst&egrave;me LOCAL n'accepte pas les connexions en
provenance du syst&egrave;me DISTANT pour des raisons d'autorisation.
Consultez le mini howto 
<A HREF="http://www.freenix.fr/linux/HOWTO/mini/Remote-X-Apps.html">Remote X Apps</A> pour plus de d&eacute;tails &agrave; ce sujet.</P>
<P>En guise de test simple, essayez de lancer sur DISTANT une appli
simple, comme <CODE>xclock</CODE>, en l'affichant sur le syst&egrave;me local, sans
utiliser <CODE>lbxproxy</CODE> :</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
  $ xclock -display LOCAL :0
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Si cela ne marche pas, le probl&egrave;me vient de <CODE>xhost</CODE>, ou d'une
simple anomalie de X, pas de LBX.</P>
</DL>
</P>

<H2><A NAME="s10">10. Documentation</A></H2>

<P>La seule documentation fournie avec une distribution X standard est
probablement la page de manuel de <EM>lbxproxy(1)</EM>.</P>
<P>Si vous pouvez consulter l'arborescence des sources de X, de tr&egrave;s
int&eacute;ressantes informations sont disponibles l&agrave; :</P>
<P>
<UL>
<LI><CODE>xc/doc/specs/Xext/lbx.mif</CODE> (Framemaker MIF)</LI>
<LI><CODE>xc/doc/hardcopy/Xext/lbx.PS.Z</CODE> (Postscript compress&eacute;)</LI>
<LI><CODE>xc/doc/hardcopy/Xext/lbxTOC.html</CODE> (HTML)</LI>
</UL>
</P>
<P>Une discussion plus pr&eacute;cise &agrave; propos des algorithmes sp&eacute;cifiques &agrave; LBX est
disponible l&agrave; :</P>
<P>
<UL>
<LI><CODE>xc/doc/specs/Xext/lbxalg.mif</CODE> (Framemaker MIF)</LI>
<LI><CODE>xc/doc/specs/Xext/lbxalg.PS.Z</CODE> (Postscript compress&eacute;)</LI>
</UL>
</P>
<P>Si vous n'avez pas acc&egrave;s &agrave; l'arborescence des sources de X11, vous pouvez
obtenir ces fichiers depuis 
<A HREF="ftp ://ftp.x.org/pub/R6.3/xc/doc/">le site FTP du Consortium X</A>.</P>


<H2><A NAME="s11">11. Alternatives</A></H2>

<P>Si, pour quelque raison, vous n'aimez pas <CODE>lbxproxy</CODE> : vous n'&ecirc;tes pas
satisfait des performances, ou bien &ccedil;a ne marche pas pour vous, ou vous ne voulez pas
vous casser la t&ecirc;te &agrave; cr&eacute;er un lbxproxy pour le syst&egrave;me distant, ou
encore vous
avez tout simplement envie d'essayer d'autres solutions, alors il existe au
moins un  autre kit de compression du protocole X (quelqu'un en conna&icirc;t
d'autres?)</P>

<H2><A NAME="ss11.1">11.1 dxpc - Differential X Protocol Compressor</A>
</H2>

<P>
<UL>
<LI>Auteur initial : 
<A HREF="mailto:brianp@cnet.com">Brian Pane &lt;brianp@cnet.com&gt;</A></LI>
<LI>Actuel responsable : 
<A HREF="mailto:lightborn@mail.utexas.edu">Zachary Vonler &lt;lightborn@mail.utexas.edu&gt;</A></LI>
</UL>
</P>
<P><CODE>
<A HREF="http://ccwf.cc.utexas.edu/~zvonler/dxpc/">dxpc</A></CODE> (Differential X Protocol Compressor, Compresseur Diff&eacute;rentiel de protocole
X) fonctionne pour l'essentiel de la m&ecirc;me mani&egrave;re que LBX. Cependant, afin
d'&eacute;viter d'avoir &agrave; impl&eacute;menter une extension X et &agrave; modifier le code du
serveur X, <CODE>dxpc</CODE> utilise <B>deux</B> proxys : le premier s'ex&eacute;cute sur le syst&egrave;me
DISTANT, comme <CODE>lbxproxy</CODE>, et l'autre s'ex&eacute;cute sur l'h&ocirc;te LOCAL.</P>
<P>Le proxy de l'h&ocirc;te DISTANT intervient dans la communication entre les
clients X et le proxy de l'h&ocirc;te LOCAL, tandis que le proxy de l'h&ocirc;te LOCAL
intervient dans la communication entre le serveur X et le proxy de l'h&ocirc;te
DISTANT.</P>
<P>Ainsi, &agrave; la fois pour les clients X et pour le serveur X, cela ressemble &agrave;
une connexion X normale.</P>

<H3>Avantages</H3>

<P>
<UL>
<LI> Comme il s'agit d'une application compl&egrave;tement ind&eacute;pendante qui
n'utilise aucune particularit&eacute; de X, elle est plus simple &agrave; compiler et &agrave;
installer.
</LI>
<LI> Elle est maintenue s&eacute;par&eacute;ment, aussi vous n'avez pas &agrave; attendre la
publication par l'OSF de nouvelles versions de X pour profiter
d'am&eacute;liorations ou de corrections.
</LI>
<LI> Elle fournie des informations et des statistiques plus nombreuses et 
plus compl&egrave;tes que <CODE>lbxproxy</CODE>.</LI>
</UL>
</P>

<H3>Inconv&eacute;nients</H3>

<P>
<UL>
<LI> Ce n'est pas un composant standard de X; vous devez l'obtenir et
l'installer s&eacute;par&eacute;ment.
</LI>
<LI> dxpc est l&eacute;g&egrave;rement plus complexe &agrave; configurer, puisqu'un proxy
est n&eacute;cessaire sur LOCAL, en plus du proxy DISTANT.</LI>
</UL>
</P>

<H3>O&ugrave; obtenir dxpc?</H3>

<P>Le code source de dxpc est disponible &agrave; 
<A HREF="ftp ://ftp.x.org/contrib/utilities/">ftp.x.org</A>.</P>
<P>Une page web sur dxpc donne beaucoup d'informations
int&eacute;ressantes, y compris des liens vers la liste de diffusion dxpc, un acc&egrave;s
au code source, et un certain nombre d'ex&eacute;cutables pr&eacute;compil&eacute;s pour
diff&eacute;rentes plates-formes :</P>
<P>
<A HREF="http://ccwf.cc.utexas.edu/~zvonler/dxpc/">http://ccwf.cc.utexas.edu/~zvonler/dxpc/</A></P>

<H2><A NAME="ss11.2">11.2 Ssh (Secure Shell)</A>
</H2>

<P>
<A HREF="mailto:lbxhowto@sizone.org">Ken Chase &lt;lbxhowto@sizone.org&gt;</A>
pr&eacute;cise que <CODE>
<A HREF="http://www.cs.hut.fi/ssh/">ssh</A></CODE> peut
&ecirc;tre utilis&eacute; pour la compression. Bien que sa principale fonction soit de
s&eacute;curiser, il compresse &eacute;galement les donn&eacute;es qu'il envoie.</P>
<P>Ainsi, si vous utilisez X &agrave; travers une connexion <CODE>ssh</CODE>, vous obtiendrez
automatiquement un certain taux de compression.</P>

<H2><A NAME="ss11.3">11.3 Lequel choisir ?</A>
</H2>

<P>Je ne sais pas. LBX et <CODE>dxpc</CODE> apportent certainement tous les deux une
meilleure compression que  <CODE>ssh</CODE>. Bien s&ucirc;r, <CODE>ssh</CODE> a pour lui l'avantage
de la s&eacute;curisation. Et bien s&ucirc;r, il n'y a aucune raison pour que vous ne
puissiez pas utiliser &agrave; la fois <CODE>ssh</CODE> et l'un des deux autres, afin
d'obtenir une bonne compression et une s&eacute;curisation.</P>
<P>Il ne devrait pas &ecirc;tre tr&egrave;s difficile de r&eacute;aliser un test comparatif de ces
diff&eacute;rentes solutions, afin de disposer de mesures statistiques et subjectives
des performances. Mais je ne l'ai pas fait, et je ne connais personne qui
l'ait fait.</P>

</BODY>
</HTML>
