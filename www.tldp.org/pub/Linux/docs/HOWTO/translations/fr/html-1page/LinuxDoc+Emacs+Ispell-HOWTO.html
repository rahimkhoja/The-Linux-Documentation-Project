<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
 <TITLE>LinuxDoc+Emacs+Ispell-HOWTO</TITLE>
</HEAD>
<BODY>
<H1>LinuxDoc+Emacs+Ispell-HOWTO</H1>

<H2>Auteur : Philippe MARTIN
     (
<A HREF="mailto:feloy@wanadoo.fr">feloy@wanadoo.fr</A>)
   </H2>v0.5, 28 Avril 1998
<HR>
<EM>     Ce document s'adresse aux traducteurs et r&eacute;dacteurs de HOWTO Linux ou de
    toute autre documentation du Projet de Documentation Linux. Il donne &agrave; ces
    derniers des trucs et astuces pour l'utilisation entre autre d'Emacs et
    d'Ispell.
   </EM>
<HR>
<H2>Appendix</H2>
<H2><A NAME="s1">1. Pr&eacute;ambule</A>   </H2>

<H2><A NAME="ss1.1">1.1 Copyright</A>
    </H2>

<P>Copyright Philippe Martin 1998<BR>
Vous pouvez redistribuer et/ou modifier ce document selon les conditions de
la GNU General Public Licence, version 2 ou ult&eacute;rieure.</P>

<H2><A NAME="ss1.2">1.2 Remerciements</A>
    </H2>

<P>Je remercie tout particuli&egrave;rement S&eacute;bastien Blondeel pour m'avoir pos&eacute;
tant de questions si pertinentes sur la configuration d'Emacs, questions
qui m'ont permises de concr&eacute;tiser mes connaissances sur le sujet et de vous
en faire part.</P>

<H2><A NAME="ss1.3">1.3 Remarques</A>
    </H2>

<P>N'h&eacute;sitez pas &agrave; me faire parvenir toute remarque et/ou critique sur ce
document, je les examinerai afin de faire &eacute;voluer au mieux ce
document.<BR>
N'h&eacute;sitez pas non plus &agrave; me poser des questions relatives au sujet trait&eacute;
dans cet HOWTO, j'y r&eacute;pondrai avec un int&eacute;r&ecirc;t tout particulier.</P>

<H2><A NAME="ss1.4">1.4 Versions</A>
    </H2>

<P>Ce document traite des versions suivantes&nbsp;:
<UL>
<LI>Sgml-tools version 0.99,</LI>
<LI>Emacs version 19.34,</LI>
<LI>Ispell version 3.1,</LI>
<LI>Toutes les biblioth&egrave;ques Emacs auxquelles je fais r&eacute;f&eacute;rence sont
celles distribu&eacute;es avec la version d'Emacs pr&eacute;cit&eacute;e, sauf <CODE>iso-sgml</CODE>
distribu&eacute;e avec XEmacs et <CODE>psgml</CODE> distribu&eacute;e seule.</LI>
</UL>
</P>

<H2><A NAME="s2">2. Introduction</A>   </H2>

<H2><A NAME="ss2.1">2.1 Le langage SGML</A>
    </H2>

<P>Le langage <B>SGML</B> (<I>Standard Generalized Markup Language</I>)
est un langage qui permet de d&eacute;finir des types de documents.</P>
<P>On peut par exemple d&eacute;finir gr&acirc;ce &agrave; lui un type de document <I>recette de
cuisine</I>, qui pr&eacute;cisera qu'il faudra y inclure une premi&egrave;re partie avec
les diff&eacute;rents ingr&eacute;dients, puis une deuxi&egrave;me avec les accessoires, une
troisi&egrave;me donnant la fa&ccedil;on de faire votre g&acirc;teau pas &agrave; pas, et enfin une
belle photo qui montre le r&eacute;sultat final.</P>
<P>     
Cette d&eacute;finition d'un type de document est appel&eacute; <B>DTD</B>
(<I>Document Type Definition</I>). Elle ne permet pas de d&eacute;finir quelle
sera l'allure du document final, mais seulement ce qu'il contiendra ou
pourra contenir.</P>
<P>     
Pour reprendre l'exemple pr&eacute;c&eacute;dent, je suis s&ucirc;r qu'en lisant l'id&eacute;e que je
me fais d'une recette de cuisine, vous avez reconnu celles que vous ou
votre cuistot attitr&eacute; utilisez. Et pourtant, elles ont une allure
compl&egrave;tement diff&eacute;rente&nbsp;: les miennes ont une photo qui se trouve en
haut &agrave; gauche du placard de la salle de bain, et la liste des ingr&eacute;dients
se trouve entre les bouteilles de lait et de gaz au fond du jardin. Et les
v&ocirc;tres&nbsp;?</P>
<P>     
Gr&acirc;ce &agrave; cette d&eacute;finition type, quelqu'un peut &eacute;crire son document, sans
tenir compte de la forme qu'il aura quand il arrivera devant les yeux du
lecteur. </P>

<H2><A NAME="ss2.2">2.2 La d&eacute;finition du type <CODE>LinuxDoc</CODE></A>
    </H2>

<P>Ce type permet d'&eacute;crire, vous l'aviez devin&eacute;, des documents se reportant &agrave;
Linux.</P>
<P>Ces documents sont en g&eacute;n&eacute;ral construits ainsi&nbsp;: ils commencent par un
titre suivi de l'auteur, de la date de diffusion et de la version de ce
document. Suit juste apr&egrave;s un court paragraphe qui explique bri&egrave;vement ce
que contient ce document (ce qui &eacute;vite d'attendre de l'avoir fini pour se
rendre compte que ce n'est pas du tout ce que l'on recherchait) puis une
table des mati&egrave;res qui montre plus en d&eacute;tail son contenu et permet aux plus
press&eacute;s d'aller voir directement ce qu'ils cherchent.</P>
<P>Et vient ensuite une suite de chapitres, sections, paragraphes. Au milieu
de ces paragraphes, on peut ins&eacute;rer des morceaux de programme, ou changer
de police de caract&egrave;res pour faire ressortir un mot ou un passage, ou
encore y ins&eacute;rer des listes, faire r&eacute;f&eacute;rence &agrave; une autre partie du
document, et d'autres choses encore.</P>
<P>Pour &eacute;crire un tel document, il suffit alors de pr&eacute;ciser au bon moment le
titre, l'auteur, la date et la version du document, puis les chapitres et
sections, dire quand il faut ins&eacute;rer une liste et quels en sont les
&eacute;l&eacute;ments, et ainsi de suite.</P>

<H2><A NAME="ss2.3">2.3 Les <CODE>SGML-Tools</CODE></A>
    </H2>

<P>Les <B>SGML-Tools</B> permettent, &agrave; partir de cette sp&eacute;cification du
document, d'obtenir le document final dans le format que vous pr&eacute;f&eacute;rez. Si
vous voulez l'ajouter &agrave; votre biblioth&egrave;que personnelle, ce sera s&ucirc;rement du
<I>PostScript</I>, si vous voulez le faire partager au reste de la
plan&egrave;te &agrave; travers le Web,  pourquoi pas du <I>HTML</I>, ou si vous
craquez et voulez le lire sous Windows, vous pouvez toujours l'avoir
en <I>RTF</I> pour pouvoir le lire sous n'importe quel &eacute;diteur de
texte. Ou peut-&ecirc;tre sous chacun de ces formats, si vous avez des humeurs
changeantes.</P>
<P>La distribution SGML-Tools peut &ecirc;tre r&eacute;cup&eacute;r&eacute;e via FTP anonyme dans
le r&eacute;pertoire 
<A HREF="ftp://ftp.lip6.fr/pub/sgml-tools/">ftp://ftp.lip6.fr/pub/sgml-tools/</A></P>

<H2><A NAME="s3">3. Votre premier document</A>   </H2>

<H2><A NAME="ss3.1">3.1 Depuis un document au format texte</A>
    </H2>

<P>Si vous poss&eacute;dez un document au format texte que vous d&eacute;sirez formater en
SGML pour ensuite le transformer en divers formats, voici la marche &agrave;
suivre&nbsp;:</P>
<P>
<OL>
<LI>Ajoutez au tout d&eacute;but du fichier les lignes suivantes&nbsp;:
       
<PRE>
        &lt;!doctype linuxdoc system>
        &lt;article>
        &lt;title>le titre ici&lt;/title>
        &lt;author>
        le nom de l'auteur, son email
        &lt;/author>
        &lt;date>
        la version et la date du document
        &lt;/date>
       
</PRE>

       </LI>
<LI>S'il y a au tout d&eacute;but du document un court paragraphe qui d&eacute;crit
bri&egrave;vement le contenu de ce document, encadrez ce paragraphe avec les
balises <CODE>&lt;abstract&gt;</CODE> et <CODE>&lt;/abstract&gt;</CODE>.
       </LI>
<LI>Ajoutez juste &agrave; la suite la balise <CODE>&lt;toc&gt;</CODE>, qui ins&egrave;re
automatiquement la table des mati&egrave;res.
</LI>
<LI>Au d&eacute;but de chaque nouveau chapitre, remplacez la ligne contenant le
num&eacute;ro et le titre du chapitre par&nbsp;:

<PRE>
       &lt;sect>le titre du chapitre
       
</PRE>

et rajoutez la balise <CODE>&lt;/sect&gt;</CODE> &agrave; la fin du chapitre.<BR>

<B>Note&nbsp;:</B> Il n'est pas n&eacute;cessaire d'indiquer le num&eacute;ro du
chapitre, car ils sont num&eacute;rot&eacute;s automatiquement.
        </LI>
<LI>Faites la m&ecirc;me chose pour les sections, en rempla&ccedil;ant le num&eacute;ro et le
titre par <CODE>&lt;sect1&gt;</CODE> et en rajoutant
<CODE>&lt;/sect1&gt;</CODE> &agrave; la fin de la section. 
</LI>
<LI>Il est possible de cr&eacute;er des sous-sections jusqu'au niveau 4 (avec
<CODE>&lt;sect4&gt;</CODE> et <CODE>&lt;/sect4&gt;</CODE>) en op&eacute;rant de la
m&ecirc;me mani&egrave;re.
</LI>
<LI>&Agrave; chaque d&eacute;but de paragraphe, ajoutez la balise <CODE>&lt;p&gt;</CODE>.
</LI>
<LI>Si vous d&eacute;sirez mettre en valeur certains mots ou certaines phrases,
entourez-les des balises <CODE>&lt;it&gt;</CODE> et <CODE>&lt;/it&gt;</CODE>
(<I>italique</I>), ou <CODE>&lt;bf&gt;</CODE> et <CODE>&lt;/bf&gt;</CODE>
(<B>gras</B>), ou encore <CODE>&lt;tt&gt;</CODE> et <CODE>&lt;/tt&gt;</CODE>
(<CODE>caract&egrave;res de machine &agrave; &eacute;crire d'antan</CODE>).
</LI>
<LI>Lorsqu'une liste appara&icirc;t dans le texte, comme celle-ci par exemple&nbsp;:

<PRE>
        Voici une liste :

        - d'une ligne,
        - ah non, deux,
        - tiens, trois,
        - c'est tout.

        de quatre lignes !
       
</PRE>

       
il faut la remplacer par&nbsp;:
       
<PRE>
        Voici une liste :
       &lt;itemize>
       &lt;item>d'une ligne,
       &lt;item>ah non, deux,
       &lt;item>tiens, trois,
       &lt;item>c'est tout.
        &lt;/itemize>
        de quatre lignes !
       
</PRE>

       </LI>
<LI>Lorsqu'un bloc repr&eacute;sente une partie de programme, ou autre chose que
l'on veut faire ressortir&nbsp;:

<PRE>
       &lt;verb>
        10 REM Tiens qu'est-ce que c'est ?
        20 REM Je croyais que ca n'existait plus !
        30 PRINT "Je suis de retour ";
        40 PRINT "pour sauver le monde."
        50 INPUT "Des mains de qui d'apr&egrave;s toi ?",M$
        60 IF M$="Bill" THEN PRINT "Tu es un sage":GOTO AUPARADIS
        70 ELSE PRINT "Tu n'as rien compris...":GOTO AUPAYSDUDOLLAR
        &lt;/verb>
       
</PRE>

       </LI>
<LI>Arriv&eacute; &agrave; ce point, vous avez d&eacute;j&agrave; bien avanc&eacute; votre formatage en
SGML. Vous pourrez, si vous voulez affiner votre document, jeter un oeil
sur le guide d'utilisation des <B>SGML-Tools</B>, qui d&eacute;crit plus en
d&eacute;tail le type de document <B>LinuxDoc</B>.
</LI>
</OL>
</P>
<H2><A NAME="s4">4. Configurer <CODE>Emacs</CODE></A>   </H2>

<H2><A NAME="ss4.1">4.1 Les caract&egrave;res accentu&eacute;s</A>
    </H2>

<P>Si vous d&eacute;sirez &eacute;crire des documents en fran&ccedil;ais ou dans une autre langue
europ&eacute;enne, vous aurez besoin de caract&egrave;res accentu&eacute;s. Voici comment
configurer Emacs pour qu'il accepte ces caract&egrave;res.</P>

<H3>L'affichage des caract&egrave;res 8 bits     </H3>

<P>Pour qu'Emacs soit capable d'afficher des caract&egrave;res 8 bits, ajoutez les
lignes suivantes &agrave; votre <CODE>.emacs</CODE>&nbsp;:
<PRE>
       (standard-display-european 1)
       (load-library "iso-syntax")
      
</PRE>
</P>
<P>Si vous utilisez Emacs sur un terminal qui ne supporte pas l'affichage
des caract&egrave;res 8 bits, vous pouvez utiliser la biblioth&egrave;que
<CODE>iso-ascii</CODE> (<CODE>(load-library "iso-ascii")</CODE>), qui permet &agrave;
Emacs d'afficher les caract&egrave;res 8 bits d'une fa&ccedil;on approch&eacute;e.</P>

<H3>La saisie des caract&egrave;res accentu&eacute;s     </H3>

<P>Si votre clavier permet de taper les caract&egrave;res accentu&eacute;s, aucun probl&egrave;me
ne devrait se poser. En revanche, s'il ne le permet pas, voici quelques
moyens d'y rem&eacute;dier&nbsp;:</P>

<H3>La biblioth&egrave;que <CODE>iso-acc</CODE>      </H3>

<P>La biblioth&egrave;que <CODE>iso-acc</CODE> d'Emacs permet d'entrer des caract&egrave;res
accentu&eacute;s malgr&eacute; que l'on ait un clavier qui ne le permette a priori pas.</P>
<P>Pour utiliser cette biblioth&egrave;que, ajoutez la ligne suivante &agrave; votre
<CODE>.emacs</CODE>&nbsp;:
<PRE>
        (load-library "iso-acc")
       
</PRE>
</P>
<P>Puis, une fois avoir relanc&eacute; Emacs et ouvert le fichier que vous voulez
&eacute;diter, tapez <CODE>Meta-x iso-accents-mode</CODE>.</P>
<P>Vous pouvez alors entrer un caract&egrave;re <B>&eacute;</B> en tapant <B>'</B> puis
<CODE>e</CODE>. De mani&egrave;re g&eacute;n&eacute;rale, on peut entrer un caract&egrave;re accentu&eacute; en
tapant d'abord l'accent, puis la lettre &agrave; accentuer (aussi bien minuscule
que majuscule). Voici les diff&eacute;rents accents utilisables&nbsp;:</P>
<P>
<LI><CODE>'</CODE>&nbsp;: Un accent aigu</LI>
<LI><CODE>`</CODE>&nbsp;: Un accent grave</LI>
<LI><CODE>^</CODE>&nbsp;: Un accent circonflexe</LI>
<LI><CODE>"</CODE>&nbsp;: Un tr&eacute;ma</LI>
<LI><CODE>~</CODE>&nbsp;: Un tilde au dessus de la lettre, une
c&eacute;dille lorsqu'il pr&eacute;c&egrave;de un c, et d'autres encore (voir fichier iso-acc.el),</LI>
<LI><CODE>/</CODE>&nbsp;: Pour barrer une lettre, ...</LI>
      </P>
<P>Si vous avez besoin d'entrer un de ces caract&egrave;res et non pas une lettre
accentu&eacute;e, tapez un espace &agrave; la suite de l'accent. Par exemple, pour taper
<I>l'&eacute;l&eacute;phant</I>, tapez <CODE>l ' spc ' e l ' e ...</CODE></P>
<P>Vous pouvez trouver l'ensemble des combinaisons dans le fichier
<CODE>iso-acc.el</CODE>.</P>

<H3>La touche Meta      </H3>

<P>Il est possible avec certains terminaux de saisir des caract&egrave;res accentu&eacute;s
gr&acirc;ce &agrave; la touche Meta (ou Alt). Par exemple, la frappe
de <B>Meta-i</B> permet d'entrer le caract&egrave;re <B>&eacute;</B>.</P>
<P>Mais Emacs pr&eacute;voit la touche Meta pour d'autres utilisations.
Il faut donc taper la s&eacute;quence <B>Ctrl-q</B> (commande <CODE>quoted-insert</CODE>)
avant de taper <B>Meta-i</B>.</P>
<P>Cette commande permet aussi d'entrer un caract&egrave;re selon son code en
octal. Tapez <B>Ctrl-q</B> suivi du code en octal du caract&egrave;re que vous
d&eacute;sirez entrer.</P>

<H3>Afficher les caract&egrave;res SGML en 8 bits     </H3>

<P>En SGML, les caract&egrave;res accentu&eacute;s peuvent &ecirc;tre tap&eacute;s gr&acirc;ce &agrave; des
macros. Par exemple, le caract&egrave;re <B>&eacute;</B> s'&eacute;crit <B>&amp;eacute;</B>. En
g&eacute;n&eacute;ral, les applications qui lisent du SGML arrivent &agrave; lire les
caract&egrave;res 8 bits et il n'est donc pas n&eacute;cessaire d'utiliser ces
macros. Mais il est possible que certaines ne le puissent pas. En sachant
qu'il existe un moyen facile de rem&eacute;dier &agrave; &ccedil;a, ce serait dommage de faire
"planter" ces derni&egrave;res applications. </P>
<P>En effet, la biblioth&egrave;que <CODE>iso-sgml</CODE> vous permet d'entrer sous
Emacs des caract&egrave;res accentu&eacute;s, comme d'habitude, mais lorsqu'il
enregistre votre fichier, il transforme tous ces caract&egrave;res 8 bits par
leur &eacute;quivalent SGML.</P>
<P>Il est donc tr&egrave;s facile, gr&acirc;ce &agrave; cette biblioth&egrave;que, de saisir et relire
votre document sous Emacs, et vous &ecirc;tes s&ucirc;r que votre document ne sera pas
rejet&eacute; par une application qui ne comprend pas les caract&egrave;res 8 bits.</P>
<P>Pour utiliser cette biblioth&egrave;que, il suffit de rajouter ces lignes &agrave; votre
<CODE>.emacs</CODE>&nbsp;:</P>
<P>
<PRE>
       (setq sgml-mode-hook
       '(lambda () "D&eacute;fauts pour le mode SGML."
       (load-library "iso-sgml")))
      
</PRE>
</P>

<H2><A NAME="ss4.2">4.2 Le mode SGML</A>
     </H2>

<P>Lorsque vous ouvrez un fichier avec une extension <B>.sgml</B>, Emacs
lance normalement le <B>mode sgml</B>. S'il ne le fait pas, vous pouvez
soit le faire manuellement avec <CODE>Meta-x sgml-mode</CODE>, soit le lancer
automatiquement en rajoutant ces lignes &agrave; votre <CODE>.emacs</CODE>&nbsp;:</P>
<P>
<PRE>
      (setq auto-mode-alist
      (append '(("\.sgml$"  . sgml-mode))
                auto-mode-alist))
     
</PRE>
</P>
<P>Ce mode permet par exemple de choisir comment ins&eacute;rer les caract&egrave;res 8
bits. En utilisant <CODE>Meta-x sgml-name-8bit-mode</CODE> (ou dans le menu
<I>SGML/Toggle 8 bit insertion</I>), vous pouvez choisir d'ins&eacute;rer les
caract&egrave;res 8 bits soit tels quels, soit sous leur forme SGML, c'est-&agrave;-dire 
sous la forme <B>&amp;...;</B>.</P>
<P>Il permet aussi de cacher ou non les balises SGML, avec <CODE>Meta-x
sgml-tags-invisible</CODE> ou le menu <I>SGML/Toggle Tag Visibility</I>. </P>

<H2><A NAME="ss4.3">4.3 Le mode PSGML</A>
    </H2>

<P>Le mode PSGML donne de grandes facilit&eacute;s pour &eacute;diter des documents SGML
sous Emacs.</P>
<P>La documentation 
<A HREF="http://www.linux-france.com/article/psgml-linuxdoc">psgml-linuxdoc</A>
explique comment installer et utiliser ce mode conjointement avec
<I>LinuxDoc</I>. </P>

<H2><A NAME="ss4.4">4.4 Divers</A>
    </H2>

<H3>Le mode auto-fill     </H3>

<P>En mode normal, lorsque vous tapez un paragraphe et que vous arrivez en
bout de ligne, vous devez vous-m&ecirc;me utiliser la touche Entr&eacute;e
pour revenir &agrave; la ligne, ou bien votre ligne continue ind&eacute;finiment tout le
long du paragraphe. Il en r&eacute;sulte, si vous utilisez Entr&eacute;e pour
revenir &agrave; la ligne, un paragraphe dont les fins de lignes ne sont pas
align&eacute;es, et en g&eacute;n&eacute;ral ces lignes rallongent ou raccourcissent au fur et
&agrave; mesure. De m&ecirc;me si vous laissez des lignes d&eacute;passer une longueur
raisonnable, vous ne pourrez pas les voir sous certains &eacute;diteurs.</P>
<P>Le mode <B>auto-fill</B> permet d'automatiser cette t&acirc;che ingrate&nbsp;:
lorsque vous d&eacute;passez une certaine colonne (la 70e par d&eacute;faut), il vous
place automatiquement &agrave; la ligne suivante.</P>
<P>Voici comment utiliser ce mode, et fixer la largeur de vos lignes &agrave; 80&nbsp;:</P>
<P>
<PRE>
       (setq sgml-mode-hook
       '(lambda () "D&eacute;fauts pour le mode SGML."
       (auto-fill-mode) 
       (setq fill-column 80)))
      
</PRE>
</P>

<H2><A NAME="s5">5. Ispell</A>    </H2>

<P>Si vous d&eacute;sirez v&eacute;rifier l'orthographe de votre document directement depuis
Emacs, vous pouvez utiliser la distribution <B>Ispell</B> et son mode
associ&eacute; sous Emacs.</P>

<H2><A NAME="ss5.1">5.1 Configuration initiale</A>
    </H2>

<P>Tout d'abord, ajoutez ces lignes &agrave; votre <CODE>.emacs</CODE> pour
configurer Emacs&nbsp;:</P>
<P>
<PRE>
      (autoload 'ispell-word "ispell"
         "Check the spelling of word in buffer." t)
      (global-set-key "\e$" 'ispell-word)
      (autoload 'ispell-region "ispell"
         "Check the spelling of region." t)
      (autoload 'ispell-buffer "ispell"
         "Check the spelling of buffer." t)
      (autoload 'ispell-complete-word "ispell"
         "Look up current word in dictionary and try to complete it." t)
      (autoload 'ispell-change-dictionary "ispell"
         "Change ispell dictionary." t)
      (autoload 'ispell-message "ispell"
         "Check spelling of mail message or news post.")
      (autoload 'ispell-minor-mode "ispell"
         "Toggle mode to automatically spell check words as they are typed in.")
      
</PRE>
</P>



<H2><A NAME="ss5.2">5.2 Le choix de vos dictionnaires par d&eacute;faut</A>
     </H2>

<P>Vous pouvez configurer Emacs pour qu'&agrave; l'ouverture d'un fichier, celui-ci
choisisse automatiquement quels dictionnaires utiliser. Vous pouvez en
effet utiliser plusieurs dictionnaires. Le premier et s&ucirc;rement le plus
important est le dictionnaire principal, distribu&eacute; avec Ispell. Vous avez
le choix entre plusieurs langues. Le deuxi&egrave;me est votre dictionnaire
personnel, celui o&ugrave; Ispell ajoutera les mots qu'il n'aura pas trouv&eacute; dans
le premier dictionnaire mais que vous lui aurez indiqu&eacute; de garder.</P>
<P>Voici les lignes &agrave; ins&eacute;rer &agrave; votre <CODE>.emacs</CODE> si vous d&eacute;sirez
utiliser par d&eacute;faut le dictionnaire fran&ccedil;ais distribu&eacute; avec Ispell, et
placer votre dictionnaire personnel dans un fichier <CODE>.ispell-dico-perso</CODE>
dans votre r&eacute;pertoire racine.</P>
<P>
<PRE>
       (setq sgml-mode-hook
      '(lambda () "D&eacute;fauts pour le mode SGML."
      (setq ispell-personal-dictionary "~/.ispell-dico-perso")
      (ispell-change-dictionary "francais")
       ))
       
</PRE>
</P>

<H2><A NAME="ss5.3">5.3 Choix des dictionnaires pour un certain fichier</A>
     </H2>

<P>Un petit probl&egrave;me se pose si vous ne v&eacute;rifiez pas toujours des textes dans la
m&ecirc;me langue. Et si vous traduisez des documents, il est probable que vous
passiez d'une langue &agrave; l'autre assez souvent. </P>

<P>Je ne connais pas de moyen en Lisp de choisir, soit automatiquement, soit en
un <EM>click</EM> de souris, les dictionnaires principaux et personnels associ&eacute;s
&agrave; la langue utilis&eacute;e dans le fichier en cours. (Si vous en connaissez un,
faites-moi signe !)</P>

<P>Mais il est possible d'indiquer quels dictionnaires vous voulez utiliser
pour ce fichier (et seulement celui-l&agrave;). Il suffit de les rajouter
en commentaire, &agrave; la fin du fichier, pour qu'Ispell puisse les lire
en lan&ccedil;ant une v&eacute;rification&nbsp;:</P>
<P>
<PRE>
      &lt;!-- Local IspellDict: english -->
      &lt;!-- Local IspellPersDict: ~/emacs/.ispell-english -->
     
</PRE>
</P>
<P>Si vous avez d&eacute;fini dans votre <CODE>.emacs</CODE> que vos dictionnaires par d&eacute;faut
seront fran&ccedil;ais, vous pouvez alors ajouter ces lignes &agrave; chaque fin de
fichier dont le texte est en anglais.</P>

<H2><A NAME="ss5.4">5.4 V&eacute;rifier votre document</A>
      </H2>

<P>Pour lancer la v&eacute;rification de votre document en int&eacute;gralit&eacute;, utilisez, depuis
n'importe o&ugrave; dans votre document <CODE>Meta-x ispell-buffer</CODE>. Vous pouvez
aussi lancer la v&eacute;rification sur une r&eacute;gion seulement du document&nbsp;:</P>
<P>
<UL>
<LI>Indiquez le d&eacute;but de la r&eacute;gion avec <CODE>Ctrl-Spc</CODE>
(mark-set-command),</LI>
<LI> Placez-vous &agrave; la fin de la r&eacute;gion &agrave; v&eacute;rifier,</LI>
<LI> tapez <CODE>Meta-x ispell-region</CODE>.</LI>
</UL>
</P>
<P>Emacs lance alors Ispell. Si ce dernier trouve un mot qu'il ne connait pas,
il vous indique ce mot (normalement en surbrillance) et vous demande de
presser une touche&nbsp;:</P>
<P>
<UL>
<LI><B>spc </B>accepte ce mot, uniquement pour cette fois,</LI>
<LI><B>i </B>accepte ce mot et l'ins&egrave;re dans votre dictionnaire
personnel, </LI>
<LI><B>a </B>accepte ce mot pour cette session,</LI>
<LI><B>A </B>accepte ce mot pour ce fichier, en l'ins&eacute;rant dans le
dictionnaire local au fichier,</LI>
<LI><B>r </B>permet de corriger le mot mal orthographi&eacute;,</LI>
<LI><B>R </B>permet de corriger toutes les occurrences du mot mal
orthographi&eacute;,</LI>
<LI><B>x </B>arr&ecirc;te la v&eacute;rification, et replace le curseur &agrave; sa
position initiale,</LI>
<LI><B>X </B>arr&ecirc;te la v&eacute;rification en laissant le curseur sur le mot
mal orthographi&eacute;, vous permettant de modifier votre fichier&nbsp;; vous pouvez
continuer la v&eacute;rification en tapant <CODE>Meta-x ispell-continue</CODE>,</LI>
<LI><B>? </B>affiche une aide en ligne.</LI>
</UL>
</P>
<P>Si Ispell trouve un ou plusieurs mots ressemblant &agrave; celui qu'il ne connait
pas, il vous les indique dans une petite fen&ecirc;tre, chacun pr&eacute;c&eacute;d&eacute; d'un
chiffre. Il suffit de presser un de ces chiffres pour corriger le mot mal
orthographi&eacute; par le mot correspondant.</P>

<H2><A NAME="ss5.5">5.5 Dictionnaire personnel contre dictionnaire local au fichier</A>
      </H2>

<P>La touche <B>i</B> permet d'ins&eacute;rer un mot dans le dictionnaire
personnel, alors que la touche <B>A</B> permet d'ins&eacute;rer un mot dans le
dictionnaire local au fichier.</P>

<P>Le dictionnaire local au fichier est une suite de mots ins&eacute;r&eacute;s &agrave; la fin du
fichier, sous forme de commentaires, et qui est relu par Ispell chaque
fois que vous le lancez sur ce fichier. Cela permet d'accepter certains
mots, valables dans ce fichier, mais qui ne le seraient pas dans
d'autres.</P>

<P>A mon avis, il est pr&eacute;f&eacute;rable que le dictionnaire personnel soit
r&eacute;serv&eacute; aux mots que le dictionnaire principal ne connait pas mais qui
font vraiment partie de la langue (comme les mots compos&eacute;s), plus
certains mots n'appartenant pas &agrave; la langue ou noms propres qui reviennent
dans un grand nombre de fichiers (comme <I>Linux</I>) et ne ressemblant pas
trop &agrave; un mot du dictionnaire principal&nbsp;: l'ajout par exemple de certains
noms et pr&eacute;noms de personnes dans le dictionnaire personnel peut &ecirc;tre
dangereux, car ils ressemblent parfois &agrave; un mot de la langue
(imaginez qu'il ne trouve pas de fautes dans la phrase&nbsp;: `<I>Ted en est
l'effet au phil du temps.'</I> !).</P>

<H2><A NAME="ss5.6">5.6 La v&eacute;rification `&agrave; la vol&eacute;e'</A>
      </H2>

<P>Ispell peut aussi v&eacute;rifier l'orthographe au fur et &agrave; mesure que vous tapez
votre document. Il faut utiliser pour cela le mode
<B>ispell-minor-mode</B>. Lorsque vous d&eacute;sirez lancer ou arr&ecirc;ter ce mode
de v&eacute;rification, tapez <CODE>Meta-x ispell-minor-mode</CODE>. Ispell vous
envoie alors un <I>bip</I> chaque fois que vous tapez un mot qu'il ne
connait pas. </P>

<P>Si ces <I>bip</I> &agrave; r&eacute;p&eacute;tition vous ennuient (ou si votre voisin de
palier dort !), vous pouvez les remplacer par un flash de l'&eacute;cran, en
tapant <CODE>Meta-x set-variable RET visible-bell RET t RET</CODE>. Ou ajoutez
cette ligne &agrave; votre <CODE>.emacs</CODE> pour faire taire Emacs &agrave; tout jamais&nbsp;:</P>
<P>
<PRE>
       (setq visible-bell t)
      
</PRE>
</P>

<H2><A NAME="ss5.7">5.7 Saut de r&eacute;gions</A>
    </H2>

<P>Il est possible de ne pas v&eacute;rifier votre document en int&eacute;gralit&eacute;, en
sautant quelques r&eacute;gions bien sp&eacute;cifiques. En effet, vous voudrez s&ucirc;rement
ne pas v&eacute;rifier l'orthographe de vos balises SGML. Pour cela, ajoutez la
ligne suivante &agrave; votre <CODE>.emacs</CODE>&nbsp;:</P>
<P>
<PRE>
      (setq ispell-skip-sgml t)  
     
</PRE>
</P>
<P>Une version Beta du 20 Mars 98  du fichier <CODE>ispell.el</CODE> est disponible
&agrave; l'adresse 
<A HREF="http://kdstevens.com/~stevens/ispell-page.html">http://kdstevens.com/~stevens/ispell-page.html</A>. Cette version
&eacute;tend les r&eacute;gions SGML &agrave; sauter. En effet, la version d'<CODE>ispell.el</CODE>
fournie avec Emacs permet seulement de sauter les tags SGML, de la forme
<B>&lt;tt&gt;</B> ou <B>&lt;/tt&gt;</B>.</P>

<P>Cette version Beta permet de sauter &eacute;galement les r&eacute;gions entre&nbsp;:</P>
<P>
<UL>
<LI>&lt;author&gt; et la fin de la ligne,</LI>
<LI>&lt; et / (pour les tags SGML de la forme <B>&lt;em/.../</B>,</LI>
<LI>&lt;code&gt; et &lt;/code&gt;,</LI>
<LI>&lt;verb&gt; et &lt;/verb&gt;,</LI>
<LI>&lt;tt&gt; et &lt;/tt&gt;.</LI>
</UL>
</P>

<H2><A NAME="s6">6. Pour aller plus loin</A>   </H2>

<H2><A NAME="ss6.1">6.1 Insertion automatique d'une ent&ecirc;te</A>
    </H2>

<P>Sous Emacs, il est possible d'<EM>accrocher</EM> des actions &agrave; chaque
&eacute;v&eacute;nement (ouverture d'un fichier, sauvegarde, lancement d'un mode, etc).</P>

<P>La biblioth&egrave;que <B>autoinsert</B> utilise cette fonctionnalit&eacute;&nbsp;:
lorsque vous ouvrez un nouveau fichier sous Emacs, cette biblioth&egrave;que
ins&egrave;re, selon le type de ce fichier, une ent&ecirc;te <EM>standard</EM>.</P>

<P>Dans notre cas, cette ent&ecirc;te <EM>standard</EM> pourrait bien &ecirc;tre la partie qui
d&eacute;clare le type de document (LinuxDoc), le titre, l'auteur et la date.</P>

<P>Je vais d&eacute;crire ici deux fa&ccedil;ons d'ins&eacute;rer une telle ent&ecirc;te.
Soit en ins&eacute;rant un fichier que vous aurez pr&eacute;alablement
&eacute;crit, soit en lan&ccedil;ant une routine &eacute;crite en <B>elisp</B>.</P>

<H3>par l'insertion d'un fichier    </H3>

<P>Il faut tout d'abord pr&eacute;ciser &agrave; Emacs d'ex&eacute;cuter la commande
<CODE>auto-insert</CODE> &agrave; l'ouverture d'un fichier, puis lire la biblioth&egrave;que
<B>autoinsert</B> qui d&eacute;clare la liste <CODE>auto-insert-alist</CODE> qu'il
nous faut modifier, cette derni&egrave;re d&eacute;finissant pour chaque type de fichier
l'ent&ecirc;te &agrave; ins&eacute;rer. Le fichier &agrave; ins&eacute;rer doit par d&eacute;faut se trouver dans le
r&eacute;pertoire <CODE>~/insert/</CODE>, mais il est possible de red&eacute;finir la variable
<CODE>auto-insert-directory</CODE> si l'on veut le placer ailleurs. </P>

<P>Voici les lignes &agrave; rajouter &agrave; votre <CODE>.emacs</CODE> pour ins&eacute;rer le fichier
<CODE>~/emacs/sgml-insert.sgml</CODE> &agrave; l'ouverture d'un nouveau fichier
SGML&nbsp;: </P>
<P>
<PRE>
      (add-hook 'find-file-hooks 'auto-insert)
      (load-library "autoinsert")
      (setq auto-insert-directory "~/emacs/")
      (setq auto-insert-alist
            (append '((sgml-mode .  "sgml-insert.sgml"))
                    auto-insert-alist))
      
</PRE>
</P>
<P>Vous pouvez alors &eacute;crire dans le fichier <CODE>~/emacs/sgml-insert.sgml</CODE>
votre ent&ecirc;te personnalis&eacute;e, puis relancer Emacs et ouvrir un fichier
<CODE>toto.sgml</CODE>. Emacs devrait alors vous demander de confirmer
l'insertion automatique, et dans l'affirmative ins&eacute;rer votre ent&ecirc;te.</P>

<H3>par l'ex&eacute;cution d'une routine    </H3>

<P>Cela fonctionne un peu comme pr&eacute;c&eacute;demment, mais au lieu de pr&eacute;ciser dans la
variable <CODE>auto-insert-alist</CODE> un fichier &agrave; ins&eacute;rer, il faut pr&eacute;ciser
une fonction &agrave; ex&eacute;cuter. Voici comment proc&eacute;der, en supposant que l'on
&eacute;crive cette fonction dans un fichier <CODE>~/emacs/sgml-header.el</CODE>
(inutile d'encombrer votre <CODE>.emacs</CODE> avec cette fonction qui peut se r&eacute;v&eacute;ler
assez longue)&nbsp;:</P>
<P>
<PRE>
      (add-hook 'find-file-hooks 'auto-insert)
      (load-library "autoinsert")
      (add-to-list 'load-path "~/emacs")
      (load-library "sgml-header")
      (setq auto-insert-alist
            (append '(((sgml-mode .  "SGML Mode") . insert-sgml-header))
                    auto-insert-alist))
      
</PRE>
</P>
<P>Vous pourrez trouver en 
<A HREF="#insert-sgml-header">appendice</A> un
exemple de cette fonction <CODE>insert-sgml-header</CODE>.</P>


<H2><A NAME="insert-sgml-header"></A> <A NAME="s7">7. Une fonction <CODE>insert-sgml-header</CODE></A>   </H2>

<P>Cette fonction permet &agrave; l'utilisateur d'ins&eacute;rer une ent&ecirc;te personnalis&eacute;e
pour un document du Projet de Documentation Linux dans un fichier. Elle peut
soit &ecirc;tre appel&eacute;e automatiquement lorsque l'on ouvre un nouveau fichier
SGML, soit &ecirc;tre appel&eacute;e explicitement par l'utilisateur.</P>

<P>Cette fonction demande &agrave; l'utilisateur, &agrave; travers le <EM>mini-buffer</EM>,
divers renseignements, certains n&eacute;cessaires, d'autres facultatifs.</P>
<P>Tout d'abord le titre. Si l'utilisateur n'entre aucun titre, la fonction
retourne imm&eacute;diatement, et rien n'est ins&eacute;r&eacute;. Vient ensuite la date,
l'auteur, son email et sa home page (ces deux derniers &eacute;tant facultatifs).</P>
<P>Il demande ensuite le nom du traducteur. S'il n'y a pas de traducteur pour ce
document, il suffit de presser <EM>Entr&eacute;e</EM>, et les renseignements
sur le traducteur ne seront pas demand&eacute;s. Dans le cas contraire, la
fonction demande l'email et la home page du traducteur (aussi facultatifs).</P>
<P>Cette fonction affiche alors dans le buffer courant votre ent&ecirc;te, comportant
bien s&ucirc;r tous les renseignements que vous avez cit&eacute;s mis en forme, mais
aussi les balises n&eacute;cessaires au paragraphe d'introduction et au premier
chapitre, puis place le curseur &agrave; l'endroit o&ugrave; vous pourrez saisir le
paragraphe d'introduction. </P>
<P>
<PRE>
(defun insert-sgml-header ()
  "Ins&egrave;re l'ent&ecirc;te d'un document LinuxDoc"
  (interactive)
  (let (titre auteur email home traducteur email-traducteur home-traducteur date 
              point-debut)
    (setq titre (read-from-minibuffer "Titre : "))
    (if (> (length titre) 0)
        (progn 
          (setq date (read-from-minibuffer "Date : ")
                auteur (read-from-minibuffer "Auteur : ")
                email (read-from-minibuffer "Email auteur : ")
                home (read-from-minibuffer "Home page auteur : http://")
                traducteur (read-from-minibuffer "Traducteur : "))
          (insert "&lt;!doctype linuxdoc system>\n&lt;article>\n&lt;title>")
          (insert titre)
          (insert "&lt;/title>\n&lt;author>\nAuteur : ") (insert auteur) (insert "&lt;newline>\n")
          (if (> (length email) 0)
              (progn
                (insert "&lt;htmlurl url=\"mailto:")
                (insert email) (insert "\" name=\"") (insert email)
                (insert "\">&lt;newline>\n")))
          (if (> (length home) 0)
              (progn
                (insert "&lt;htmlurl url=\"http://")
                (insert home) (insert "\" name=\"") (insert home)
                (insert "\">\n&lt;newline>")))
          (if (> (length traducteur) 0)
              (progn
                (setq email-traducteur (read-from-minibuffer "Email traducteur : ")
                      home-traducteur (read-from-minibuffer "Home page traducteur : http://"))
                (insert "Traducteur : ") 
                (insert traducteur) 
                (insert "&lt;newline>\n")
                (if (> (length email-traducteur) 0)
                    (progn 
                      (insert "&lt;htmlurl url=\"mailto:") 
                      (insert email-traducteur) (insert "\" name=\"") 
                      (insert email-traducteur)
                      (insert "\">&lt;newline>\n")))
                (if (> (length home-traducteur) 0)
                    (progn 
                      (insert "&lt;htmlurl url=\"http://") 
                      (insert home-traducteur) (insert "\" name=\"")
                      (insert home-traducteur)
                      (insert "\">&lt;newline>\n")))))
          (insert "&lt;/author>\n&lt;date>\n")
          (insert date)
          (insert "\n&lt;/date>\n\n&lt;abstract>\n")
          (setq point-debut (point))
          (insert "\n&lt;/abstract>\n&lt;toc>\n\n&lt;sect>\n&lt;p>\n\n\n&lt;/sect>\n\n&lt;/article>\n")
          (goto-char point-debut)
          ))))
 
</PRE>
</P>
</BODY>
</HTML>
