<!-- MHonArc v2.5.0b2 -->
<!--X-Subject: Re: Fw: Submitted: final draft of HOWTO -->
<!--X-From-R13: Bngevpx Qnyynuna <cnp1Ngvnp.arg> -->
<!--X-Date: Mon, 24 Jul 2000 00:19:44 &#45;0400 (EDT) -->
<!--X-Message-Id: 397BC3EB.3AA42877@tiac.net -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 000401bff512$9b23e2e0$3a44aac7@computer -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: Fw: Submitted: final draft of HOWTO</title>
<link rev="made" href="mailto:pac1@tiac.net">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg03441.html">Date Prev</a>][<a href="msg03443.html">Date Next</a>][<a href="msg03438.html">Thread Prev</a>][<a href="msg03462.html">Thread Next</a>][<a href="maillist.html#03442">Date Index</a>][<a href="threads.html#03442">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Fw: Submitted: final draft of HOWTO</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Mike &amp; Penny Novack &lt;<A HREF="mailto:stepbystepfarm@shaysnet.com">stepbystepfarm@shaysnet.com</A>&gt;,       Bodvar Bjorgvinsson &lt;<A HREF="mailto:bodvar@veda.is">bodvar@veda.is</A>&gt;, digs &lt;<A HREF="mailto:mjs@nts-online.net">mjs@nts-online.net</A>&gt;,       Aaron King &lt;<A HREF="mailto:islandblend@home.com">islandblend@home.com</A>&gt;,       Juan Fuentes &lt;<A HREF="mailto:juan.fuentes@codetel.net.do">juan.fuentes@codetel.net.do</A>&gt;,       Mike Novack &lt;<A HREF="mailto:stepbystepfarm@shaysnet.com">stepbystepfarm@shaysnet.com</A>&gt;,       ngcooper &lt;<A HREF="mailto:ngcooper@wa.freei.net">ngcooper@wa.freei.net</A>&gt;,       &quot;Lonnie R. Mullenix&quot; &lt;<A HREF="mailto:mullenix@wwdb.org">mullenix@wwdb.org</A>&gt;,       Nick Sklavenitis &lt;<A HREF="mailto:sklav@intelerad.com">sklav@intelerad.com</A>&gt;, Sam &lt;<A HREF="mailto:peacemkr@wcc.net">peacemkr@wcc.net</A>&gt;,       Henry White &lt;<A HREF="mailto:henryw@gte.net">henryw@gte.net</A>&gt;,       &quot;<A HREF="mailto:ldp-discuss@lists.debian.org">ldp-discuss@lists.debian.org</A>&quot; &lt;<A HREF="mailto:ldp-discuss@lists.debian.org">ldp-discuss@lists.debian.org</A>&gt;,       <A HREF="mailto:gnu@gnu.org">gnu@gnu.org</A></li>
<li><em>Subject</em>: Re: Fw: Submitted: final draft of HOWTO</li>
<li><em>From</em>: Patrick Callahan &lt;<A HREF="mailto:pac1@tiac.net">pac1@tiac.net</A>&gt;</li>
<li><em>Date</em>: Mon, 24 Jul 2000 00:19:55 -0400</li>
<li><em>References</em>: &lt;000401bff512$9b23e2e0$3a44aac7@computer&gt;</li>
<li><em>Resent-date</em>: Mon, 24 Jul 2000 00:19:44 -0400 (EDT)</li>
<li><em>Resent-from</em>: <A HREF="mailto:ldp-discuss@lists.debian.org">ldp-discuss@lists.debian.org</A></li>
<li><em>Resent-message-id</em>: &lt;FhRXUD.A.2b.QQ8e5@murphy&gt;</li>
<li><em>Resent-sender</em>: <A HREF="mailto:ldp-discuss-request@lists.debian.org">ldp-discuss-request@lists.debian.org</A></li>
<li><em>Sender</em>: pac1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
Mike &amp; Penny Novack wrote:
&gt; 
&gt; Because my personal coding style (in any language) is to always
&gt; explicitly specify the order of evaluation I never seem to get involved
&gt; with these questions. Have you considered what the relative order of
&gt; operator precedence might be?. A &quot;condition&quot; is after all only a value
&gt; (typically zero =&gt; false, anything else true). Try inserting whatever
&gt; serves as &quot;parentheses&quot; around each conditional expression and see what
&gt; happens to the evaluation.
&gt; 
&gt; My suspicion is that &quot;-a&quot; and &quot;-o&quot; work because they have lower
&gt; precedence than any relation that might appear inside a &quot;condition&quot;.
&gt; What happens if you start out example &quot;A&quot; with i=1;j=1 (adjusting the
&gt; other items accordingly). Does it now work? That might be the case if
&gt; the precedence of &quot;&amp;&amp;&quot; is equal or greater than that of &quot;-eq&quot;.
&gt; 

Mike,

That's a great insight.  

There's some info on how bash handles precedence and the order of
evaluation of things in bash. It didn't seem to help but a few
experiments clarified what's going on.

Its an interesting problem.  Bash the language vs Bash the executor of
other commands with different languages.  Where does the line get drawn
between various parts of the &quot;language space&quot;.  

Incidently, this is the exact problem I'm struggling with trying to use
the Python - PMW - Tkinter - tkinter - tk packages to build a GUI.  It's
difficult to discern which level of interface and which a particular
syntic form  applies.  Both bash and python cross linguistic borders. 
This can make a perfectly ordinary conceptual structure difficult to
implement for those not used to the border crossings.  We're accustomed
to binding values, types and methods across interfaces, but the
resulting syntactic ambiguity when different languages are used on
either side of the interface is something to consider.  Something to
think about for Bash 3.0:  the problem of binding syntax across an
interface.  Has anyone else thought about this?

Anyway to get some info on this I tried a few potential variations.  I
tried putting the expressions in parenthesis and brackets but that
didn't work.

if [ ( $1 -eq 1 ) &amp;&amp; ( $2 -eq 1 ) ]
if [ [ $1 -eq 1 ] &amp;&amp; [ $2 -eq 1 ] }

The problem with bash is that it calls lots of other programs to do
things
like /etc/bin/test.  I think the &amp;&amp; and || operators exist only in bash
and not in test.
expressions like [ $1 &amp;&amp; $2 ] work because bash calculates $1 &amp;&amp; $2 and
passes the result of the calculation to test.
with expressions like [ $1 -eq 1 &amp;&amp; $2 -eq 1 ] bash doesn't do the
arithmetic right and what gets passed to test somehow includes the
closing bracket, as if it were part of the conditional expression.  it
would be interesting to see if test is actually getting passed anything
or if the whole test is failing due to a parsing error and returning 1
to the if.  In case of an error, if seems to be getting the value false.

That seems to be what's going on.

one more test revealed a solution 

if [ $1 -eq 1 ] &amp;&amp; [ $2 -eq 1 ] operated correctly 

Although you could easily come to the conclusion reading the bash manual
that the syntax of an if statement in bash is

if [conditional-expression] 
then
fi

That's not what really happens.

the real syntax of an if command is 
if bash-condition-expression
then
fi

and [ condition ] is just one kind of bash-conditional-expression.  In
fact, [ is a separate program that takes values provided by the shell as
arguments.  [  has its own syntax for expressions contained in its
arguments and returns a result.  in fact, [ or if you prefer /bin/test
just processes its command arguments whatever they are.  before [ gets
its arguments, bash applies its rules to whatever is in between the
square brackets.  so the expression as originally stated was being
evaluated as follows by bash, before passing it as arguments to [.  Bash
is probably evaluating the elements of the command line containing the
if statement sequentially.


[ $1 -eq 1 &amp;&amp; $2 -eq 1 ]

  [ 1 -eq 1 &amp;&amp; 1 -e1 1 ]
  [ 1 -eq (1 &amp;&amp; 1) -eq 1 ]
  [ 1 -eq     1    -eq 1 ]

What the error message ./a_if.sh: [: missing `]'  indicates is that bash
probably prepared to pass the following to test:

   1 -eq 1 -eq ] 

This is not particularly meaningful as input to test, but that doesn't
matter, I think test doesn't even get called.  bash next compained that
the open [ of the test command was missing a closing bracket.  The
missing bracket is the one bash was preparing to send to or may have
actually sent to /bin/test in its arguments.

The if statment itself behaves as if it got a false from the whole
expression.  Even when an if statment contains garbage, bash continues
with the if.

#!/bin/sh
if ,*&amp;^%$#@!
then
   echo &quot;garbage is true&quot;
else
   echo &quot;garbage is false&quot;
fi

$ ./a_if8.sh
./a_if8.sh: ,*: command not found
./a_if8.sh: ^%0@!: command not found
garbage is false




-pat





 &gt;
&gt; Another  language element continues to give me trouble.  It is the
&gt; combination of conditions in an if statement, and the tutorial does
not
&gt; go into enough specifics on this point.
&gt;
&gt; Using &amp;&amp; to join two &quot;conditions&quot;  does not work as &quot;expected&quot; when
the
&gt; elements combined with &amp;&amp; and || are not variables, but &quot;conditions&quot;.
&gt; There's an element of syntax that I'm missing to make Example A work
&gt; correctly, and no reference I've been able to find shows what it is or
&gt; explains the difference between &amp;&amp; and || on one hand and -a and -o on
&gt; the other.  I think your howto would be an excellent place to get into
&gt; this issue.
&gt;
&gt; Example A:
&gt;
&gt; #!/bin/sh
&gt;
&gt; # using &amp;&amp; to join &quot;conditions&quot; as shown does not work properly
&gt;
&gt; i=1;j=2
&gt; if [ i -eq 1 &amp;&amp; j -eq 2 ]
&gt; then
&gt;    echo &quot;i=1 and j=2&quot;
&gt; else
&gt;    echo &quot;i&lt;&gt; 1 or j&lt;&gt; 2&quot;
&gt; fi
&gt;
&gt; $ chmod +x a_if.sh
&gt; $ ./a_if.sh
&gt; ./a_if.sh: [: missing `]'
&gt; i&lt;&gt; 1 or j&lt;&gt; 2
&gt;
&gt; note the error message and incorrect operation in the version of the
&gt; script using &amp;&amp; to join two &quot;conditions&quot;
&gt;
&gt; Example B:
&gt;
&gt;
&gt; #!/bin/sh
&gt;
&gt; # using -a to join two conditions using &quot;and&quot; does work properly
&gt;
&gt; i=1;j=2
&gt; if [ $i -eq 1 -a $j -eq 2 ]
&gt; then
&gt;    echo &quot;i=1 and j=2&quot;
&gt; else
&gt;    echo &quot;i&lt;&gt; 1 or j&lt;&gt; 2&quot;
&gt; fi
&gt;
&gt; Executing
&gt;
&gt;
&gt; $ ./a_if3.sh
&gt; not i or not j
&gt;
&gt;
&gt; This use of -a or -o working in the above construct seems to conflict
&gt; with the following from the bash manual and from the HOWTO.  I think
an
&gt; explanation of what is really happening in this case would enhance the
&gt; HOWTO.  To most of us from other programming environments $i -eq 1
looks
&gt; like a condition, so we need an explanation of why the construct as
&gt; written in example A does not work while the construct in example B
does
&gt; not.  I'm assuming the construct works if the conditions are
&quot;variables&quot;
&gt; and not conditional expressions, at least conditional expressions as
&gt; written in Example A:  We need advice on what exact syntax to use to
&gt; accomplish the intent expressed in example A.  If &amp;&amp; and || are
limited
&gt; to being used as operators on variables that's ok.  If there's a way
to
&gt; write a conditional expression using actual conditional expressions
that
&gt; will be properly combined using &amp;&amp; or || we'll need an example of that
&gt; too.
&gt;
&gt; What we have in the Bash Reference and the HOWTO does not address this
&gt; issue properly, or if it does, the information is not presented in an
&gt; order that will allow it to be found easily.
&gt;
&gt; &amp;&amp;
&gt;
&gt;        and (logical)
&gt;
&gt;         if [ $condition1 &amp;&amp; $condition2 ]
&gt;         # if both condition1 and condition2 hold true...
&gt;
&gt; ||
&gt;
&gt;        or (logical)
&gt;
&gt;         if [ $condition1 || $condition2 ]
&gt;         # if both condition1 or condition2 hold true...
&gt;


From: 
               &quot;M. Leo Cooper&quot; &lt;thegrendel@theriver.com&gt;
                                                                                       
Sun 16:35

       Subject: 
               Submitted: final draft of HOWTO
 Resent-From: 
               ldp-discuss@lists.debian.org
           To: 
               ldp-discuss@lists.linuxdoc.org




I have submitted the final draft of my &quot;Advanced Bash-Scripting HOWTO&quot;,
version 0.1, to the group by sending it as as a tarballed file
attachment
to ldp-submit.

This document is also downloadable from my web site:
<A  HREF="http://personal.riverusers.com/~thegrendel/abs-HOWTO-0.1.tar.gz">http://personal.riverusers.com/~thegrendel/abs-HOWTO-0.1.tar.gz</A>

[125 k]


The tarball on my site also has the HTML conversion of the document. The
document itself is, of course, in Docbook/SGML, thanks to Philippe
Martin.

Any comments and constructive criticism would be appreciated.

Thanks.


Mendel


--  
To UNSUBSCRIBE, email to ldp-discuss-request@lists.debian.org
with a subject of &quot;unsubscribe&quot;. Trouble? Contact listmaster@lists.debian.org

</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg03441.html">Re: Boilerplate License Revision Proposal</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg03443.html">Re: short presentation on Linux doc???</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg03438.html">Re: Submitted: final draft of HOWTO</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg03462.html">Re: Fw: Submitted: final draft of HOWTO</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#03442"><strong>Date</strong></a></li>
<li><a href="threads.html#03442"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
