<!-- MHonArc v2.5.0b2 -->
<!--X-Subject: Authentication HOWTO -->
<!--X-From-R13: Brgre Vreaoret <crgrureaNlnubb.pbz> -->
<!--X-Date: Thu, 4 May 2000 23:14:30 &#45;0400 (EDT) -->
<!--X-Message-Id: 20000505031412.16960.qmail@web2003.mail.yahoo.com -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Authentication HOWTO</title>
<link rev="made" href="mailto:petehern@yahoo.com">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg02268.html">Date Prev</a>][<a href="msg02270.html">Date Next</a>][<a href="msg02250.html">Thread Prev</a>][<a href="msg02270.html">Thread Next</a>][<a href="maillist.html#02269">Date Index</a>][<a href="threads.html#02269">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Authentication HOWTO</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <A HREF="mailto:ldp-discuss@lists.linuxdoc.org">ldp-discuss@lists.linuxdoc.org</A></li>
<li><em>Subject</em>: Authentication HOWTO</li>
<li><em>From</em>: Peter Hernberg &lt;<A HREF="mailto:petehern@yahoo.com">petehern@yahoo.com</A>&gt;</li>
<li><em>Date</em>: Thu, 4 May 2000 20:14:12 -0700 (PDT)</li>
<li><em>Reply-to</em>: <A HREF="mailto:petehern@yahoo.com">petehern@yahoo.com</A></li>
<li><em>Resent-date</em>: Thu, 4 May 2000 23:14:30 -0400 (EDT)</li>
<li><em>Resent-from</em>: <A HREF="mailto:ldp-discuss@lists.debian.org">ldp-discuss@lists.debian.org</A></li>
<li><em>Resent-message-id</em>: &lt;aSKnGD.A.YvC.OyjE5@murphy&gt;</li>
<li><em>Resent-sender</em>: <A HREF="mailto:ldp-discuss-request@lists.debian.org">ldp-discuss-request@lists.debian.org</A></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
When I was trying to sent up a bunch of totally
extraneous services on my home network, I kept running
into the issue/problem of authentication. So I
figured: why not figure out the ins and outs of linux
authentication, write a HOWTO, and call it my (high
school) senior project? The sgml doc at the bottom of
this email is the first draft of the first section of
what I hope will become the Authentication HOWTO. I'd
greatly appreciate feedback.

Having recently joined this list, I've been reading
the thread about sgml tools, so I'll throw in my two
cents. As someone who's never befored touched sgml or
Docbook, the whole process seemed rather trivial. I
downloaded the sgml version of a HOWTO, fired up gvim,
yanked the text of the HOWTO (leaving the tags), and
started writing. All the tags seemed rather intuitive.
Being a geek and having worked with html certainly
helped, but it really was pretty simple. IMHO, anyone
technically competent enough to be writing an LDP doc
shouldn't have much trouble figuring out the basics
sgml.

Here's the HOWTO (send feedback please!):
&lt;!doctype article public &quot;-//OASIS//DTD DocBook
V3.1//EN&quot;
 [ &lt;!entity header system &quot;header.sgml&quot;&gt;
]&gt;

&lt;article&gt;
 &lt;artheader&gt;
  &lt;title&gt;
  Authentication HOWTO
 &lt;/title&gt;
 &lt;pubdate&gt;
  2000/05/02
 &lt;/pubdate&gt;
 &lt;author&gt;
 
&lt;firstname&gt;Peter&lt;/firstname&gt;&lt;surname&gt;Hernberg&lt;/surname&gt;
 &lt;/author&gt;
 &lt;abstract&gt;
 &lt;para&gt;
  Explains how user and group information is stored
and how authentication works on a Linux system or
network.
 &lt;/para&gt;
 &lt;/abstract&gt;
 &lt;/artheader&gt;
 &lt;sect1&gt;
  &lt;title&gt;
  Introduction
 &lt;/title&gt;
  &lt;sect2&gt;
   &lt;title&gt;
   How this document came to be
  &lt;/title&gt;
  &lt;para&gt;
   When trying to add a number of (mostly
unnessecary:) network services to my existing home
network, I kept running into the problem of
authentication, so I decided to figure out linux
authentication, write a HOWTO, and call it my senior
project. I hope this helps you understand this
often-forgotten, but very important, aspect of system
administration.
  &lt;/para&gt;
  &lt;/sect2&gt;
  &lt;sect2&gt;
   &lt;title&gt;
   New versions
  &lt;/title&gt;
  &lt;para&gt;
   When I get my domain up running properly, you'll be
able to find the newest version of this document
there.
  &lt;/para&gt;
  &lt;/sect2&gt;
  &lt;sect2&gt;
   &lt;title&gt;
   Feedback
  &lt;/title&gt;
  &lt;para&gt;
   Comments, corrections, suggestions, flames, and
flying saucer sightings can be sent to
petehern@rochester.rr.com.
  &lt;/para&gt;
  &lt;/sect2&gt;
  &lt;sect2&gt;
   &lt;title&gt;
   Version History
  &lt;/title&gt;
  &lt;para&gt;
   v0.1 (May 2, 2000) First version (not released).
  &lt;/para&gt;
  &lt;/sect2&gt;
  &lt;sect2&gt;
   &lt;title&gt;
   Copyrights and Trademarks
  &lt;/title&gt;
  &lt;para&gt;
   (c) 2000 Peter Hernberg
  &lt;/para&gt;
  &lt;para&gt;
   This manual may be reproduced in whole or in part,
without fee, subject to the following restrictions:
  &lt;/para&gt;
  &lt;itemizedlist&gt;
   &lt;listitem&gt;
   &lt;para&gt;
   The copyright notice above and this permission
notice must be preserved complete on all complete or
partial copies
   &lt;/para&gt;
  &lt;/listitem&gt;
   &lt;listitem&gt;
   &lt;para&gt;
   Any translation or derived work must be approved by
the author in writing before distribution.
   &lt;/para&gt;
  &lt;/listitem&gt;
   &lt;listitem&gt;
   &lt;para&gt;
   If you distribute this work in part, instructions
for obtaining the complete version of this manual must
be included, and a means for obtaining a complete
version provided.
   &lt;/para&gt;
  &lt;/listitem&gt;
   &lt;listitem&gt;
   &lt;para&gt;
   Small portions may be reproduced as illustrations
for reviews or quotes in other works without this
permission notice if proper citation is given.
Exceptions to these rules may be granted for academic
purposes: Write to the author and ask. These
restrictions are here to protect us as authors, not to
restrict you as learners and educators. Any source
code (aside from the SGML this document was written
in) in this document is placed under the GNU General
Public License, available via anonymous FTP from the
GNU archive.
   &lt;/para&gt;
  &lt;/listitem&gt;
  &lt;/itemizedlist&gt;
  &lt;/sect2&gt;
  &lt;sect2&gt;
   &lt;title&gt;
   Acknowledgements and Thanks
  &lt;/title&gt;
  &lt;para&gt;
   Thanks to my family for putting up with me for 18
years. Thanks to the debian folks for making such a
sweet distro for me to play with. Thanks to &lt;ulink
url=&quot;<A  HREF="http://www.cgr.org/&quot">http://www.cgr.org/&quot</A>;&gt;CGR&lt;/ulink&gt; for paying me to
be a geek. Finally, I'd thank the makers of ramen
noodles, because I don't know how I'd live without
them.
  &lt;/para&gt;
  &lt;/sect2&gt;
 &lt;/sect1&gt;
 &lt;sect1&gt;
  &lt;title&gt;
  How User Information is Stored on Your System
 &lt;/title&gt;
  &lt;sect2&gt;
   &lt;title&gt;
   /etc/passwd
  &lt;/title&gt;
  &lt;para&gt;
   On almost all linux distrubtions (and commercial
*nixes as well), user information is stored in
/etc/passwd, a text file which contains the user's
login, their encrypted password, a unique numerical
user id (called the uid), a numerical group id (called
the gid), an optional comment field (usually
containing things like their real name, phone number,
etc.), their home directory, and their prefered shell.
A typical entry in /etc/passwd might look something
like this:
  &lt;/para&gt;
  &lt;programlisting&gt;
  pete:K3xcO1Qnx8LFN:1000:1000:Peter
Hernberg,,,1-800-FOOBAR:/home/pete:/bin/bash
  &lt;/programlisting&gt;
  &lt;para&gt;
   As you can see, it's pretty straight-forward. Each
entry contains the six field I described above, with
the fields delimited by a colon. If this were as
complex as authentication got, there would be no need
for this HOWTO.
  &lt;/para&gt;
  &lt;/sect2&gt;
  &lt;sect2&gt;
   &lt;title&gt;
   Shadow passwords
  &lt;/title&gt;
  &lt;para&gt;
   Looking at your /etc/passwd, it's likely that you
actually saw something likethis:
  &lt;/para&gt;
  &lt;programlisting&gt;
  pete:x:1000:1000:Peter
Hernberg,,,1-800-FOOBAR:/home/pete:/bin/bash
  &lt;/programlisting&gt;
  &lt;para&gt;
   Where did the encrypted password go? Before I tell
you where it went, a bit explanation is required.
  &lt;/para&gt;
  &lt;para&gt;
   The /etc/passwd file, which contains each user's
encrypted password, is readable by all users, making
it possible for any user to get the encrypted password
of everyone on the system. Though the passwords are
encrypted, password cracking programs are widely
available. To keep evil crackers at bay, shadow
passwords were developed.
   &lt;/para&gt;
   &lt;para&gt;
    When a system has shadow passwords enabled, the
password field in /etc/passwd is replaced by an &quot;x&quot;
and the user's real encrypted password is stored in
/etc/shadow. Because /etc/shadow is only readable by
the root user, malicious users cannot crack their
fellow users' passwords. Each entry in /etc/shadow
contains the user's login, their encrypted password,
and a number of fields relating to password
expiration. A typical entry looks like this:
   &lt;/para&gt;
   &lt;programlisting&gt;
    pete:/3GJllg1o4152:11009:0:99999:7:::
   &lt;/programlisting&gt;
  &lt;/sect2&gt;
  &lt;sect2&gt;
   &lt;title&gt;
   /etc/group and /etc/gshadow
  &lt;/title&gt;
  &lt;para&gt;
   Group information is stored in /etc/group. The
format is similar to that of /etc/passwd, with the
entries containing fields for the group name,
password, numerical id (gid), and a comma-seperated
list of group members. An entry in /etc/group looks
like this:
  &lt;/para&gt;
  &lt;programlisting&gt;
   pasta:x:103:spagetti,fettucini,linguine,vermicelli
  &lt;/programlisting&gt;
  &lt;para&gt;
   As you can see from the &quot;x&quot; in the password field,
group passwords can be shadowed as well. While groups
almost never have their own passwords, it is worth
noting that shadow group password information is
stored in /etc/gshadow.
  &lt;/para&gt;
  &lt;/sect2&gt;
  &lt;sect2&gt;
   &lt;title&gt;
   MD5 encrypted passwords
  &lt;/title&gt;
  &lt;para&gt;
   Traditionally, unix passwords were encrypted with
the standard crypt() function. (For more information
on the crypt() function, see the crypt(3) manpage.) As
computers grew faster, passwords encrypted with this
function became easier to crack. As the internet
emerged, tools for distributed the task of cracking
accross multiple hosts became available. Many newer
distributions ship with the option of encrypting
passwords with the MD5 hash algorithm. (For more
information on the MD5 algorithm, consult RFC 1321.)
While MD5 passwords will not eliminate the threat of
password cracking, they will make cracking your
passwords much more difficult.
  &lt;/para&gt;
  &lt;/sect2&gt;
  &lt;sect2&gt;
   &lt;title&gt;
    Sifting through the mess
  &lt;/title&gt;
  &lt;para&gt;
   As you can see, there are a number of different
ways user authentication information can be stored on
your system (shadow passwords without MD5 encryption,
/etc/passwd passwords with MD5 encryption, etc.). How
do programs like login and su know how to verify your
password? Or worse, what if you want to change the way
passwords are stoed on your system? How will programs
that need your password know that passwords are stored
differently? PAM is the answer.
  &lt;/para&gt;
  &lt;/sect2&gt;
 &lt;/sect1&gt;
 &lt;sect1&gt;
  &lt;title&gt;
  PAM (Pluggable Authentication Modules)
 &lt;/title&gt;
 &lt;para&gt;
  Pluggable authentication modules are at the core of
authentication in any modern linux distribution.
 &lt;/para&gt;
  &lt;sect2&gt;
   &lt;title&gt;
   Coming soon to an sgml file near you!
  &lt;/title&gt;
  &lt;para&gt;
   Be amazed as we explored the intricate depths of
pam_unix_auth.so!
  &lt;/para&gt;
  &lt;/sect2&gt;
 &lt;/sect1&gt;


&lt;/article&gt;



__________________________________________________
Do You Yahoo!?
Send instant messages &amp; get email alerts with Yahoo! Messenger.
<A  HREF="http://im.yahoo.com/">http://im.yahoo.com/</A>


--  
To UNSUBSCRIBE, email to ldp-discuss-request@lists.debian.org
with a subject of &quot;unsubscribe&quot;. Trouble? Contact listmaster@lists.debian.org

</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg02268.html">Re: SGML tools aren't so great</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg02270.html">RE: Authentication HOWTO</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg02250.html">50 Megs of web space for $9.95 a month!</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg02270.html">RE: Authentication HOWTO</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#02269"><strong>Date</strong></a></li>
<li><a href="threads.html#02269"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
