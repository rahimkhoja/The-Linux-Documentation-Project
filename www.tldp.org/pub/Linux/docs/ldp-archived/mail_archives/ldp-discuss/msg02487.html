<!-- MHonArc v2.5.0b2 -->
<!--X-Subject: Re: Converting HTML to DocBook -->
<!--X-From-R13: Unel Znjerapr [hecul <tnelzNpnanqn.pbz> -->
<!--X-Date: Sat, 20 May 2000 03:25:23 &#45;0400 (EDT) -->
<!--X-Message-Id: m3zoplelbr.fsf@maya.linux.ca -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Reference: 3925AA8E.30592FE6@savba.sk -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: Converting HTML to DocBook</title>
<link rev="made" href="mailto:garym@canada.com">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg02486.html">Date Prev</a>][<a href="msg02488.html">Date Next</a>][<a href="msg02480.html">Thread Prev</a>][<a href="msg02483.html">Thread Next</a>][<a href="maillist.html#02487">Date Index</a>][<a href="threads.html#02487">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Converting HTML to DocBook</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: juro &lt;<A HREF="mailto:xvudpapc@savba.sk">xvudpapc@savba.sk</A>&gt;</li>
<li><em>Subject</em>: Re: Converting HTML to DocBook</li>
<li><em>From</em>: Gary Lawrence Murphy &lt;<A HREF="mailto:garym@canada.com">garym@canada.com</A>&gt;</li>
<li><em>Date</em>: 20 May 2000 03:23:52 -0400</li>
<li><em>Cc</em>: <A HREF="mailto:ldp-discuss@lists.linuxdoc.org">ldp-discuss@lists.linuxdoc.org</A></li>
<li><em>Organization</em>: TCI: Business Innovation through Open Source Computing</li>
<li><em>References</em>: &lt;<a href="msg02480.html">3925AA8E.30592FE6@savba.sk</a>&gt;</li>
<li><em>Reply-to</em>: Gary Lawrence Murphy &lt;<A HREF="mailto:garym@canada.com">garym@canada.com</A>&gt;</li>
<li><em>Resent-date</em>: Sat, 20 May 2000 03:25:23 -0400 (EDT)</li>
<li><em>Resent-from</em>: <A HREF="mailto:ldp-discuss@lists.debian.org">ldp-discuss@lists.debian.org</A></li>
<li><em>Resent-message-id</em>: &lt;o8Z4hC.A.kzG.T3jJ5@murphy&gt;</li>
<li><em>Resent-sender</em>: <A HREF="mailto:ldp-discuss-request@lists.debian.org">ldp-discuss-request@lists.debian.org</A></li>
<li><em>Sender</em>: <A HREF="mailto:garym@maya.linux.ca">garym@maya.linux.ca</A></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
&gt;&gt;&gt;&gt;&gt; &quot;j&quot; == juro  &lt;xvudpapc@savba.sk&gt; writes:

    j&gt; Hello, I'd like to ask you if there's an easy way (a convertor)
    j&gt; to convert a html file to sgml.  If yes, where can I get it.

If you really mean SGML, the answer is trivial: HTML _is_ an SGML so
the identity transformation will do the trick ;) I suspect, however
that you meant to ask if we can translate HTML into even a crude form
of DocBook DTD SGML.

I hope to be corrected, but the answer is apparently 'no' and
undaunted by the lack of an answer on many mailing lists, I attempted
to create one as a one-evening project; my experience was enough to
demonstrate the situation is non-trivial in the extreme.

For example, even if the HTML is _very_ well-behaved, we have to
regularly interpret constructs such as

    &lt;H1&gt;the first section&lt;/H1&gt;
    &lt;P&gt;this is the first section&lt;/p&gt;
    &lt;H2&gt;and a subsection&lt;/h2&gt;
    &lt;p&gt;with some text&lt;/p&gt;
    &lt;H1&gt;the next section&lt;/h1)

and turn it into 

    &lt;sect1&gt;&lt;title&gt;the first section&lt;/title&gt;
    &lt;para&gt;this is the first section&lt;/para&gt;
    &lt;sect2&gt;&lt;title&gt;and a subsection&lt;/title&gt;
    &lt;para&gt;with some text&lt;/para&gt;
    &lt;/sect1&gt;
    &lt;sect1&gt; ...

There is no equivalent to the sectN tag in HTML, and the fundamental
differences only begin with this first most elemental element.
Consider the logic of parsing the &lt;A&gt; tag, which must be different for
NAME and HREF types, or the nightmare of tables within tables.  Even
the &lt;HEAD&gt; does not really map to &lt;ARTHEADER&gt; and HTML is full of
non-containers which contain the contained information inside
attributes rather than within container tags (whew)

Ok, it helped me a little, so I am including my stylesheet with this
message --- be forwarned it is really sloppy because I was just toying
around with it; it is a composite of several postings on the DSSSL
list spliced together with no concern for consistent case or aesthetic
style.  I estimate it saved me maybe 20% of the total time to
translate the kerneld HOWTO, and given that small gain, I really
wonder if it was worth it.  Still, nothing is ever a complete failure:
it can always be used as a bad example.

</pre>
<pre>
&lt;!--  
   HTML to Docbook transformation by Gary Lawrence Murphy 
   with all the ideas from many other people.  It doesn't work
   but it does save some of the grunt work in moving a well-behaved
   HTML file to a format that is DocBook-like.  Don't expect
   miracles.

   This stylesheet was simply spliced together from comments and
   musings by various authors on the dssslist at mulberrytech.com
   I cannot rightly claim copyright and only include the license
   below to clarify the free nature of this work.

   The A tag support is broken horribly, as is ULINK, but the UL
   support alone makes it somewhat useful.

 USE: jade -d html2db.dsl HTMLFILE &gt; SGMLFILE

   you may need to remove any DTD lines from the start of your HTML

 LICENCE

 This program is free software; you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation; either version 2 of the License, or
 (at your option) any later version.
  
 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.
  
 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA

--&gt;

&lt;!DOCTYPE style-sheet PUBLIC &quot;-//James Clark//DTD DSSSL Style Sheet//EN&quot;&gt;
&lt;style-sheet&gt;

&lt;style-specification id=&quot;html2db&quot;&gt;
&lt;style-specification-body&gt; 

(declare-flow-object-class element
       &quot;UNREGISTERED::James Clark//Flow Object Class::element&quot;)

(define (copy-attributes #!optional (nd (current-node)))
  (let loop ((atts (named-node-list-names (attributes nd))))
    (if (null? atts)
        '()
        (let* ((name (car atts))
               (value (attribute-string name nd)))
          (if value
              (cons (list name value)
                    (loop (cdr atts)))
              (loop (cdr atts)))))))

(default 
  (let* ((old-gi (gi (current-node)))
         (new-gi
          (case old-gi

            ((&quot;HTML&quot;) &quot;article&quot;)
            ((&quot;HEAD&quot;) &quot;artheader&quot;)
            ((&quot;BODY&quot;) &quot;sect1&quot;)
            ((&quot;HR&quot;) empty-sosofo)
            ((&quot;PRE&quot;) &quot;screenshot&quot;)
            ((&quot;UL&quot;) &quot;itemizedlist&quot;)
            ((&quot;I&quot;)  &quot;emphasis&quot;)
            ((&quot;STRONG&quot;)  &quot;emphasis&quot;)
            ((&quot;B&quot;)  &quot;emphasis&quot;)
            ((&quot;TT&quot;) &quot;command&quot;)
            ((&quot;P&quot;) &quot;para&quot;)
            ((&quot;MENU&quot;) &quot;itemizedlist&quot;)
            (else old-gi))))
    (make element
      gi: new-gi
      attributes: (copy-attributes))))

(element A
  (let ((attr (list
               (if (attribute-string &quot;NAME&quot;)
                   (list &quot;ID&quot; (attribute-string &quot;NAME&quot;))
                   '())
               (if (attribute-string &quot;HREF&quot;)
                   (list &quot;ULINK&quot; (attribute-string &quot;HREF&quot;))
                   '()))))
    (make element gi: &quot;A&quot;
          attributes: attr
          (process-children))))

(element LI
  (make element gi: &quot;listitem&quot;
        (make element gi: &quot;para&quot;
              (process-children))))

(element H1
  (make element gi: &quot;sect2&quot;
        (make element gi: &quot;title&quot;
              (process-children))))

(element H2
  (make element gi: &quot;sect3&quot;
        (make element gi: &quot;title&quot;
              (process-children))))

(element H3
  (make element gi: &quot;sect4&quot;
        (make element gi: &quot;title&quot;
              (process-children))))

&lt;/style-specification-body&gt;
&lt;/style-specification&gt;
&lt;/style-sheet&gt;

</pre>
<pre>

-- 
Gary Lawrence Murphy &lt;garym@linux.ca&gt;: office voice/fax: 01 519 4222723
TCI - Business Innovations through Open Source : <A  HREF="http://www.teledyn.com">http://www.teledyn.com</A>
Canadian Co-ordinators for Bynari International : <A  HREF="http://ca.bynari.net/">http://ca.bynari.net/</A>
Free Internet for a Free O/S? - <A  HREF="http://www.teledyn.com/products/FreeWWW/">http://www.teledyn.com/products/FreeWWW/</A>


</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="02480" href="msg02480.html">SGML</a></strong>
<ul><li><em>From:</em> juro &lt;xvudpapc@savba.sk&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg02486.html">Re: LDP could use some help with markup.</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg02488.html">Re: Keep away from proprietary poison!</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg02480.html">SGML</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg02483.html">another question about &lt;!ENTITY % blah &quot;INCLUDE&quot;&gt;</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#02487"><strong>Date</strong></a></li>
<li><a href="threads.html#02487"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
