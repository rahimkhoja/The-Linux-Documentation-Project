<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Creando un espacio swap</title><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="index.html" title="Guía Para Administradores de Sistemas GNU/Linux"><link rel="up" href="ch07.html" title="Capítulo 7. Administración de
Memoria"><link rel="prev" href="ch07.html" title="Capítulo 7. Administración de
Memoria"><link rel="next" href="ch07s03.html" title="Usando un área de swap"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Creando un espacio swap</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch07.html">Anterior</a> </td><th width="60%" align="center">Capítulo 7. Administración de
Memoria</th><td width="20%" align="right"> <a accesskey="n" href="ch07s03.html">Siguiente</a></td></tr></table><hr></div><div class="sect1" lang="es"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2549160"></a>Creando un espacio swap</h2></div></div></div><p>

Un archivo de swap es un archivo común, y no necesita ningún tratamiento
especial para el kernel. Lo único que le interesa al kernel es que este no tenga
huecos y que esté preparado para ser utilizado por el utilitario
<span><strong class="command">mkswap</strong></span>. Este debe residir en un disco local, y no puede
residir en un disco montado a través de NFS por razones de
implementación.</p><p>

El bit que indica espacios vacíos es importante. El archivo swap reserva espacio
en disco de forma que el kernel pueda swapear una página rápidamente sin tener
que atravesar por todas las cosas que son necesarias cuando aloca un sector de
disco para un archivo. El kernel simplemente utiliza cualquier sector que ya
haya sido alocado para el archivo. Debido a que un hueco en un archivo significa
que no hay sectores de discos alocados (para ubicar en ese archivo) no es bueno
que el kernel trate de hacer uso del mismo.</p><p>

Una buena manera de crear un archivo de swap sin espacios vacíos es a través del
siguiente comando: 

</p><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>dd if=/dev/zero of=/extra-swap bs=1024 count=1024</code></strong>
<code class="computeroutput">
1024+0 records in
1024+0 records out
</code>
<code class="prompt">$</code>
</pre><p>

donde <code class="filename">/extra-swap</code> es el nombre del archivo swap y el tamaño
está dado por el parámetro <code class="literal">count=</code>. El tamaño más indicado
está dado por un múltiplo de 4, debido a que el kernel escribe
<em class="glossterm">páginas de memoria (memory pages)</em>, de 4 kb de tamaño. Si
el tamaño no es múltiplo de 4 los últimos kilobytes del archivo pueden ser
desperdiciados.</p><p>

Una partición swap tampoco tiene nada especial. Estas se crean como cualquier
otra partición, la única diferencia es que ésta es accedida de manera directa
(al disco crudo), esto significa, que no contiene ningún sistema de archivos. Es
aconsejable marcar esta partición del tipo 82 (Linux Swap); Esto hace la lista
de particiones mas clara, aunque no es estrictamente necesario para el
kernel.</p><p>

Una vez creado el archivo o la partición de swap, es necesario escribir unas
marcas al comienzo del mismo que contienen información administrativas
utilizadas por el kernel. El comando para realizar esto es
<span><strong class="command">mkswap</strong></span>, y la forma es la siguiente: 

</p><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>mkswap /extra-swap 1024</code></strong>
<code class="computeroutput">Setting up swapspace, size = 1044480 bytes</code>
<code class="prompt">$</code>
</pre><p>

Nótese que el espacio swap aun no es usado, este existe, pero el kernel aun no
hace uso de este para proveer memoria virtual.</p><p>Y

Se debe ser muy cuidadoso cuando se usa el comando <span><strong class="command">mkswap</strong></span>, ya
que este no chequea que el archivo o la partición no estén siendo usados por
alguien más. <span class="emphasis"><em> Se puede fácilmente sobre escribir importantes archivos
y particiones con mkswap!</em></span> Por suerte este comando solo debería ser
necesario cuando se instala el sistema.</p><p>

Actualmente el administrado de memoria Linux limita el tamaño de cada área de
swap a 2 GB.  De todas maneras se puede usar hasta 8 espacios de swap
simultáneamente, lográndose un total de 16 GB.  El real límite depende la
versión del kernel, la versión de <span><strong class="command">mkswap</strong></span> y de la arquitectura
del hardware.</p><sup>[<a name="id2549366" href="#ftn.id2549366">21</a>]</sup><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a name="ftn.id2549366" href="#id2549366">21</a>] </sup>Un gigabyte aquí, un gigabyte allá, demasiado pronto para que comencemos a
	hablar de la memoria real.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch07.html">Anterior</a> </td><td width="20%" align="center"><a accesskey="u" href="ch07.html">Subir</a></td><td width="40%" align="right"> <a accesskey="n" href="ch07s03.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">Capítulo 7. Administración de
Memoria </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> Usando un área de swap</td></tr></table></div></body></html>
