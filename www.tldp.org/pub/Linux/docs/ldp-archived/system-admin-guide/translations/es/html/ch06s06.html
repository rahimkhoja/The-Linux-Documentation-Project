<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Dar formato</title><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="index.html" title="Guía Para Administradores de Sistemas GNU/Linux"><link rel="up" href="ch06.html" title="Capítulo 6. Utilizando Discos y Otros Medios de Almacenamiento"><link rel="prev" href="ch06s05.html" title="Cintas"><link rel="next" href="ch06s07.html" title="Particiones"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Dar formato</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch06s05.html">Anterior</a> </td><th width="60%" align="center">Capítulo 6. Utilizando Discos y Otros Medios de Almacenamiento</th><td width="20%" align="right"> <a accesskey="n" href="ch06s07.html">Siguiente</a></td></tr></table><hr></div><div class="sect1" lang="es"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2540499"></a>Dar formato</h2></div></div></div><p>Se denomina <em class="glossterm">formatear</em> al proceso de escribir marcas
en el medio magnético que se utilizan para delimitar pistas y sectores. Antes de
formatear un disco, su superficie magnética es un completo desorden de señales
magnéticas. Cuando se le da formato, se trae un cierto orden al caos básicamente
dibujando líneas en los lugares donde van las pistas, y donde son divididas para
formar sectores. En una descripción en detalle no sería exactamente así, pero
esto es irrelevante. Lo importante aquí es que un disco no puede utilizarse a
menos que haya sido formateado.</p><p>La terminología aquí se vuelve un poco confusa: en MS-DOS y MS Windows, la
palabra formatear se utiliza para cubrir el proceso de creación de un sistema de
archivos (que discutiremos más abajo). Allí, los dos procesos se combinan,
especialmente en los discos flexibles. Cuando se necesita realizar la
distinción, el formateo real se denomina <em class="glossterm">formateo de bajo
nivel</em>, mientras que construir el sistema de archivos se llama
formateo de <em class="glossterm">alto nivel</em>.  En los círculos UNIX, los dos se
llaman formatear y crear un sistema de archivos, y así será como también lo
usemos en este libro.</p><p>Para los discos IDE y algunos SCSI el formateo se realiza en la fábrica y
no necesita repetirse; así que la mayoría de la gente no deberá preocuparse por
él. De hecho, formatear un disco duro puede hacer que funcione peor, por ejemplo
porque necesite ser formateado de una forma especial para que funcione la
sustitución automática de sectores defectuosos.</p><p>
Discos que necesitan o pueden ser formateados usualmente requieren un programa 
especial, ya que, debido a que la interfase para realizar un formateo logico de
un disco difiere de un disco a otro. El programa para formatear el disco está
usualmente en la controladora de la BIOS o es  suministrado por un programa
MS-DOS. Ninguno de ellos puede ser usado facilmente dentro de Linux.</p><p>Durante el formateo uno puede encontrarse puntos defectuosos en el disco,
llamados <em class="glossterm">bloques malos</em> o <em class="glossterm">sectores
defectuosos</em>. Algunas veces estos son manejados por el propio disco,
pero incluso entonces, si aparecen más de ellos, debe hacerse algo para evitar
utilizar esas partes del disco. Lo lógico para hacer esto se encuentra dentro
del propio sistema de archivos; cómo añadir la información al sistema de
archivos se describe más abajo. De forma alternativa.  uno puede crear una
partición pequeña que cubra exactamente la parte mala del disco; esta opción
puede ser una buena idea si la parte mala es muy grande, ya que los sistemas de
archivos tienen problemas con zonas defectuosas muy grandes.</p><p>Los discos flexibles se formatean con <em class="glossterm">fdformat</em>. El
archivo de dispositivo de disquete se proporciona como parámetro. Por ejemplo,
el comando siguiente formatea un disquete de 3.5 pulgadas y alta densidad en
ubicado en la primera unidad lectora-escritora de discos flexibles:

</p><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>fdformat /dev/fd0H1440</code></strong>
<code class="computeroutput">Double-sided, 80 tracks, 18 sec/track. Total capacity 
1440 kB.</code>
<code class="computeroutput">Formatting ... done</code>
<code class="computeroutput">Verifying ... done</code>
<code class="prompt">$</code>
</pre><p>

Tenga en cuenta que si desea utilizar el dispositivo auto-detectable (es decir,
<code class="filename">/dev/fd0</code>), <span class="emphasis"><em>debe</em></span> primero configurar los
parámetros del dispositivo con <span><strong class="command">setfdprm</strong></span>. Para lograr el mismo
efecto que antes, debería hacer los siguiente:



</p><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>setfdprm /dev/fd0 1440/1440</code></strong>
<code class="prompt">$</code> <strong class="userinput"><code>fdformat /dev/fd0</code></strong>
<code class="computeroutput">Double-sided, 80 tracks, 18 sec/track. Total capacity 
1440 kB.</code>
<code class="computeroutput">Formatting ... done</code>
<code class="computeroutput">Verifying ... done</code>
<code class="prompt">$</code>
</pre><p>

Generalmente es más conveniente elegir el archivo de dispositivo que mejor se
adapte al tipo del disquete. Tenga en cuenta que es desaconsejable formatear
disquetes para contener más información que aquella para la que ha sido
diseñado.</p><p><span><strong class="command">fdformat</strong></span> también comprobará el disquete, es decir,
buscará sectores defectuosos. Intentará recuperar un sector defectuoso varias
veces (normalmente se puede oír esto, el ruido del disco cambia drásticamente).
Si el disco está solamente defectuoso temporalmente (debido a polvo en la cabeza
de lectura/escritura, algunos errores son falsas alarmas),
<span><strong class="command">fdformat</strong></span> no lo indicará, pero un error real abortará el
proceso de comprobación. El núcleo imprimirá mensajes por cada error de
entrada/salida que encuentre; estos irán a parar a la consola, o si se usa
<span><strong class="command">syslog</strong></span>, al archivo <code class="filename">/usr/log/messages</code>.
<span><strong class="command">fdformat</strong></span> por sí mismo no indicará dónde está el error
(tampoco importa mucho, los disquetes son lo suficientemente baratos como para
desechar uno defectuoso).


</p><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>fdformat /dev/fd0H1440</code></strong>
<code class="computeroutput">Double-sided, 80 tracks, 18 sec/track. Total capacity 
1440 kB.</code>
<code class="computeroutput">Formatting ... done</code>
<code class="computeroutput">Verifying ... read: Unknown error</code>
<code class="prompt">$</code>
</pre><p>

El comando <span><strong class="command">badblocks</strong></span> puede utilizarse para buscar bloques
defectuosos en cualquier disco o partición (incluidos los disquetes). No
formatea el disco, así que puede utilizarse incluso con sistemas de archivos
existentes. El ejemplo siguiente comprueba un disquete de 3,5 pulgadas con dos
sectores malos.


</p><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>badblocks /dev/fd0H1440 1440</code></strong>
<code class="computeroutput">718</code>
<code class="computeroutput">719</code>
<code class="prompt">$</code>
</pre><p>

La salida de <span><strong class="command">badblocks</strong></span> es el número de los bloques malos que
encuentra. La mayoría de sistemas de archivos pueden evitar estos bloques.
Mantienen una lista de sectores defectuosos conocidos, que se inicia cuando se
crea el sistema de archivos, y se puede modificar más adelante. La búsqueda
inicial de bloques malos puede hacerse a través del comando
<span><strong class="command">mkfs</strong></span>(que inicia el sistema del archivos), pero más adelante
las comprobaciones deben realizarse con <span><strong class="command">badblocks</strong></span> y los
nuevos bloques deben añadirse con <span><strong class="command">fsck</strong></span>. Describiremos
<span><strong class="command">mkfs</strong></span> y <span><strong class="command">fsck</strong></span> más adelante.</p><p>Muchos discos modernos automáticamente detectan bloques malos, e intentan
arreglarlos utilizando en su lugar un bloque especial reservado en buen estado.
Esto es transparente al sistema operativo.  Esta característica debe estar
documentada en el manual del disco, si es lo bastante curioso para mirar si
aparece. Incluso estos discos pueden fallar, si el número de sectores
defectuosos crece demasiado, aunque existen posibilidades de que por entonces el
disco esté tan estropeado que no pueda utilizarse.</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch06s05.html">Anterior</a> </td><td width="20%" align="center"><a accesskey="u" href="ch06.html">Subir</a></td><td width="40%" align="right"> <a accesskey="n" href="ch06s07.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">Cintas </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> Particiones</td></tr></table></div></body></html>
