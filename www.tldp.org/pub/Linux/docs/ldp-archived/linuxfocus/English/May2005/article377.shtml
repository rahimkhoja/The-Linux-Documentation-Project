<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
 <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
 <META NAME="GENERATOR" CONTENT="lfparser_2.52">
 <META NAME="LFCATEGORY" CONTENT="SoftwareDevelopment">
 <link rel="icon" href="../../common/images/lf-16.png" type="image/png">
 <TITLE>lf377, SoftwareDevelopment: Cruising with the snavigator</TITLE>
<style type="text/css">
<!--
 td.top {font-family: Arial,Geneva,Verdana,Helvetica,sans-serif; font-size:12 }
 pre { font-family:monospace,Courier }
 pre.code { font-family:monospace,Courier;background-color:#aedbe8; }
 p.cl { color:#EE9500 }
 table.left { margin-right:0.3cm }
 a.nodec { text-decoration:none }
 p.trans { font-size:8pt; text-align:right }
 p.clbox { width:50%; alignment:center; background-color:#FFD700; 
           border-style:none; border-width:medium; border-color:#FFD700; 
           padding:0.5cm;  text-align:center }
 p.code { width:80%; alignment:center; background-color:#aedbe8; 
          border-style:none; border-width:medium; border-color:#aedbe8; 
          padding:0.1cm;  text-align:left }
 p.foot { background-color:#AAAAAA; color:#FFFFFF; border-style:none; 
          border-width:medium; border-color:#AAAAAA; padding:0.5cm ; 
          margin-top:0.1cm; margin-right:1cm; margin-left:1cm; 
          text-align:center }
 div.tbbutton {
   background: #ddd;
   border-right: 1px solid #aaa;
   border-bottom: 1px solid #aaa;
   margin: 2px 5px 2px 5px;
   text-align: center;
   width: 20em;
   line-height: 1.2em;
   padding: 2px;
   font-size: 12px;
   white-space: nowrap;
   color: #555;
 }
 div.bbutton {
   background: #ddd;
   border-right: 1px solid #aaa;
   border-bottom: 1px solid #aaa;
   float: left;
   margin: 2px 5px 2px 5px;
   text-align: center;
   line-height: 1.2em;
   padding: 2px;
   font-size: 12px;
   white-space: nowrap;
   color: #555;
 }
-->
</style>
 
</HEAD>
<BODY bgcolor="#ffffff" text="#000000">
 <!-- this is generated html code. NEVER use this file for your
 translation work. Instead get the file with the same article number
 and .meta.shtml in its name. Translate this meta file and then
 use lfparser program to generate the final article -->
 <!-- lfparser can be obtained from http://main.linuxfocus.org/~guido/dev/lfparser.html -->

<!-- this is used by a number of tools:
 =LF=AUTHOR: Gerrit Renker
 =LF=CAT___: SoftwareDevelopment
 =LF=TITLE_: Cruising with the snavigator
 =LF=NUMBER: 377
 =LF=ANAME_: article377.shtml
 =LF=PARSER: 2.52
 -->

<!-- 2pdaIgnoreStart -->

<!-- start navegation bar, current, style=2 -->
 <!-- top navegation bar -->
 <TABLE summary="topbar_1" cellspacing="0" cellpadding="0" border="0" align="center" width="90%">
   <TR bgcolor="#2e2292">
     <TD class="top"><TABLE summary="topbar_1_logo" cellspacing="0" cellpadding="0" border="0" width=
       "100%">
         <TR><TD width="319"><a href="../../index.shtml"><IMG src="../../common/images/logolftop_319x45.gif"
           alt="[LinuxFocus-icon]" width="319" height="45" align="left" 
           border="0"></a></TD>

           <TD class="top">
             <TABLE summary="topbar_1_links" width="100%">
               <TR align="right">
                 <TD class="top">
                 
                 <A class="nodec" href="../../index.shtml"><FONT color=
                 "#DDDDDD" size="2">&lt;--</FONT></A> &nbsp;| 
                 <A class="nodec" href="../map.html"><FONT color=
                 "#DDDDDD" size="2">Map</FONT></A> &nbsp;| 
                 <A class="nodec" href="../indice.html"><FONT color=
                 "#DDDDDD" size="2">Index</FONT></A> &nbsp;| 
                 <A class="nodec" href="../Search/index.html"><FONT color=
                 "#DDDDDD" size="2">Search</FONT></A> </TD>
                 
               </TR>

               <TR align="right">
                 <TD class="top">
                   <HR width="100%" noshade size="1">
                 </TD>
               </TR>
             </TABLE>
           </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end top navegation bar -->
 <!-- blue bar -->
 <TABLE summary="topbar_2" cellspacing="0" cellpadding="0" border="0" align="center"
 width="90%">
   <TR bgcolor="#00ffff">
     <TD><IMG src="../../common/images/transpix.gif" width="1" height=
     "2" alt=""></TD>
   </TR>
 </TABLE>
 <!-- end blue bar -->
 <!-- bottom navegation bar -->
 <TABLE summary="topbar_3" cellspacing="0" cellpadding="0" border="0" align="center"
 width="94%">
   <TR bgcolor="#000000">
     <TD>
       <TABLE summary="topbar_3_links" cellspacing="0" cellpadding="1" border="0" width=
       "100%">
         <TR align="center">
           <TD WIDTH="20%"><A class="nodec" href="../News/index.html"><FONT color=
           "#FFFFFF">News</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Archives/index.html"><FONT color=
           "#FFFFFF">Archives</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Links/index.html"><FONT color=
           "#FFFFFF">Links</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../aboutus.html"><FONT color=
           "#FFFFFF">About LF</FONT></A> </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end bottom navegation bar -->
<!-- stop navegation bar -->

<!-- SSI_INFO -->

<!-- tr_staticssi include virtual -->
<!-- tr_staticssi exec cmd -->
<!-- addedByLfdynahead ver 1.5 --><TABLE ALIGN="right" border=0><TR><TD ALIGN="right"><FONT SIZE="-1" FACE="Arial,Helvetica">This document is available in: <A href="../../English/May2005/article377.shtml">English</a> &nbsp;<A href="../../Deutsch/May2005/article377.shtml">Deutsch</a> &nbsp;<A href="../../Francais/May2005/article377.shtml">Francais</a> &nbsp;</FONT></TD></TR></TABLE><br>
 


<!-- SSI_INFO STOP -->
<!-- 2pdaIgnoreStop -->

<!-- SHORT_BIO_ABOUT_THE_AUTHOR_AND_INDEX_START -->
<TABLE ALIGN="LEFT" BORDER="0" WIDTH="195" summary="about the author" class="left">
<TR>
<TD>

<img title="Dat is me :)" src="../../common/images2/GerritRenker.jpg" alt="Gerrit photo"  width="175" height="213">
<BR>by  Gerrit Renker <br> <small>&lt;gerrit.renker(at)gmx.de&gt;</small>
<BR><BR>
<I>About the author:</I><BR>
<!-- aboutauthor_start -->

Gerrit didn't like any computers at all until he tried C and
Linux.

<!-- aboutauthor_stop -->
<!-- TRANSLATED_TO en -->
<!-- TRANSLATED_TO_STOP -->
<!-- INDEX_START -->
<BR><i>Content</i>:
<UL>
  <LI><A HREF="#377lfindex0">Installing under debian </A></LI>
  <LI><A HREF="#377lfindex1">Installation from source </A></LI>
  <LI><A HREF="#377lfindex2"> Project management</A></LI>
  <LI><A HREF="#377lfindex3">Symbol browser</A></LI>
  <LI><A HREF="#377lfindex4"> Xref window</A></LI>
  <LI><A HREF="#377lfindex5">Class window</A></LI>
  <LI><A HREF="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=377">Talkback form for this article</A></LI>
</UL>

</TD></TR></TABLE>
<!-- INDEX_STOP -->
<!-- SHORT_BIO_ABOUT_THE_AUTHOR_AND_INDEX_STOP -->
<!-- HEAD_OF_THE_ARTICLE_START -->
<br>&nbsp;
<table border="0"><tr><td>
<!-- tr_staticssi include virtual -->
<!-- tr_staticssi exec cmd -->
<!-- addedByLfPdf ver 0.1 -->
<TABLE style="border-style:outset; border-width:1px" align="right" bgcolor="#ff9616" cellspacing="1"><TR><TD bgcolor="#ff9616">
        <a href="../Archives/lf-2005_05-0377.pdf"><small>PDF</small></a>
        </TD></TR></TABLE>
         

<H2>Cruising with the snavigator</H2>
 <img alt="[Illustration]" src="../../common/images2/article377/a_lot_of_lines.jpg" hspace="10"  width="474" height="103">
<!-- ABSTRACT OF THE ARTICLE -->
<P><i>Abstract</i>:
<P>
<!-- articleabstract_start -->

This article presents the snavigator, a powerful code analysis,
cross-referencing and re-engineering tool which is indispensable for
tackling the complexity of maintaining larger pieces of software and
packages in an effective manner.

<!-- articleabstract_stop -->

<br><!-- HR divider --><center><font color="#8282e0"><b>_________________ _________________ _________________</b></font></center><br>
</td></tr></table>
<!-- HEAD_OF_THE_ARTICLE_STOP -->
<!-- BODY_OF_THE_ARTICLE_START -->

<h1>Motivation</h1>
An old proverb says that a book should not be judged by its cover. A
similar thing
happens with open source code. However, open source does not equal open
documentation,
and the reading process becomes increasingly difficult the more and
the longer the source files are. I recently had to program
with a piece of software which had half a html page of documentation,
in contrast to over 348,000 lines of Java open source code spread over
more than 2060 files (see figure). In light
of such dimensions, electronic orienteering, reverse engineering and
analysis tools become indispensable, such as the Red Hat source code
navigator presented in this article. <br>
The tool automates many of the tasks one would normally do using
(c)tags, grep, search and replace, but much more accurately and more
conveniently, wrapped in an easy to use graphical interface. See
screenshots below.


<A NAME="377lfindex0">&nbsp;</A>
<H2>Installing under debian </H2>

Under debian you can get the whole lot
via the one-liner
<pre class="code">
apt-get install&nbsp;sourcenav sourcenav-doc
</pre>
This at the same time takes care of the documentation as
well. The source navigator then resides in <tt>/usr/lib/sourcenav/</tt>,
you can call the main program via <tt>/usr/lib/sourcenav/bin/snavigator</tt>
(see tip about symlinks below). Documentation can be found in
<tt>/usr/share/doc/sourcenav/html/.</tt>


<A NAME="377lfindex1">&nbsp;</A>
<H2>Installation from source </H2>

The URL for the homepage of source navigator is <a
 href="http://sourcenav.sourceforge.net/">http://sourcenav.sourceforge.net/</a>,
actual downloads are from <a
 href="http://sourceforge.net/project/showfiles.php?group_id=51180">here (sourceforge.net/project/showfiles.php?group_id=51180)</a>.
Obtain the latest tarball <tt>sourcenav-xx.xx.tar.gz</tt>.
While downloading, try to do something else meanwhile - the sources
amount to 55 Megabytes. This does have a positive background,
the whole package is largely self-sufficient. Although it makes wide
use of other libraries such as Tcl/Tk, Tix and Berkeley DB, the correct
versions of these packages are all included. To avoid clashes with
other versions of <tt>Tcl/Tk</tt> etc on your system, it is a good
idea to
place the installation into a separate directory, e.g. <tt>/opt/sourcenav</tt>.
The instructions further suggest using a separate<i> build directory</i>,
this works as follows. After unzipping, in the directory which contains
the unpacked sources issue the following commands:
<pre class="code">
mkdir snbuild; cd snbuild
../sourcenav-*/configure --prefix=/opt/sourcenav
make                               ## takes a while ...
make install                       ## might have to become root first
</pre>
The <tt>--prefix</tt> option is there to specify the
installation directory. While configure runs, one already gets an idea
about the many languages that snavigator can handle. It is also
possible
to add in further parsers for languages of your choice or making. Once
the installation is finished via <tt>make install</tt>, the snavigator
is ready
to work and can be invoked as <tt>/opt/sourcenav/bin/snavigator</tt>.
Instead of extending the PATH shell environment I suggest to  use a <em>symlink</em>, e.g. to <tt>/usr/local/bin</tt>,
instead.
<pre class="code">
ln -s /opt/sourcenav/bin/snavigator    /usr/local/bin
</pre>
The main executable is a shell script which needs to know its
directory.
Thus it gets confused if called via a symlink. This can be remedied
by changing the following lines in <tt>/opt/sourcenav/bin/snavigator</tt>;
instead of
<pre class="code">
snbindir=`dirname $0</pre>
use
<pre class="code">
prog=`readlink -f $0`
snbindir=`dirname $prog`</pre>
The <tt>-f</tt> option to <b>readlink(1)</b> creates a canonical
pathname representation, this means it even works if the file is
accessed via a very
long chain of nested symlinks.&nbsp;
<h1>Using snavigator</h1>
The first time snavigator is invoked, it asks for directories
containing
source files, as the following screenshot shows.<a
 href="../../common/images2/article377/snavigator.jpg"><img src="../../common/images2/article377/snavigator.jpg" title="The first window after invoking snavigator, it asks for files and directories to be parsed." alt="" align="right" border="0"  width="572" height="284"></a>
Languages which are supported include, but are not limited
to, Java, C, C++, Tcl, Fortran, COBOL, and assembly programs. Once
given the details of source code locations, it independently builds
a project database which includes referencing information, class
hierarchies,
file inter-dependencies ... and much more. Depending on the size of
your
project, it takes a short while to build. Once done, the database
can be queried and additional information be asked about the code.
The following just highlights some of the features, to give you an
idea. An illustrated <em>user guide</em>, as well as a
reference manual, is included in the <tt>html</tt> directory of the
installation.

<A NAME="377lfindex2">&nbsp;</A>
<H2> Project management</H2>

Part of the suite is an <i>editor</i>
with syntax highlighting, this can
also be used for pretty-printing files. The following screenshot
depicts the main editor window. It is almost like a development
environment, comes with such things as a debugging facility, project
build commands, version control and the like.<br>
<br>
<div align="center"><img alt="" title="This is the main editor window. There are tabs which fork into the subfunctions, such as the grepper module." src="../../common/images2/article377/editor_window.jpg"  width="673" height="556"><br>
</div>
<p>In particular, the big green arrows on the menu work just as in a
web browser. The project editor allows one to control the database
information, e.g.
if a file has just been updated; to add or delete files from the list
and other management tasks. All files are treated as one
big project. So if changes are committed to, you can update the
database information
via <em>Refresh Project</em> or <em>Reparse Project</em>.<br>
When in the editor window, highlight something, e.g. the name of a
function such that the highlighted region appears in <a
 href="../../common/images2/article377/highlighted_entry.jpg">yellow</a>. Then
right-click with the mouse - there is a choice to find either (a)
the <em>declaration</em> of what you just have highlighted (e.g. a
header file)
or (b) the<em> implementation</em> of the highlighted symbol (e.g. a <tt>.cpp</tt>
file), plus a few more useful options.</p>



<a href="../../common/images2/article377/snavigator1.jpg"><img title="This is the symbol browser. You can for instance browse the list of files, or open up an editor window." src="../../common/images2/article377/snavigator1_th.jpg" alt="browse files" align="right" hspace="8" width="270" height="430"></a>
<A NAME="377lfindex3">&nbsp;</A>
<H2>Symbol browser</H2>

This is the first window that opens up after populating the
project database. Usually it contains filenames, but it can also display class
methods, function symbols and the like. When a
filename is clicked upon, the editor will be opened with that file.<br>


<h2 align="left">The grep window</h2>
This does what the name says, it provides a
convenient gui for grepping
through all involved source code files. Matching entries are
highlighted
and hyper-linked, the source code can thus be browsed as if it were
a bunch of web pages. As the screenshot shows, the respective file
and location can be selected and by simply clicking that entry you have
the editor opened at the right position. (This particular search term
gives positive results in many Java files :)<br>
<a href="../../common/images2/article377/grepper.jpg"><img alt="grepper" title="The convenient grep interface. You can search for a regular expression in *all* the source and header files, it is a very powerful and helpful thing." src="../../common/images2/article377/grepper_th.jpg" align="left"  width="300" height="237"></a>
<br clear="all">


<A NAME="377lfindex4">&nbsp;</A>
<H2> Xref window</H2>

Here we have a cross-reference list of all the symbols, in particular
one can see which methods read (r), write (w), ... on which data and
see
the relationships among symbols, depicted in a hierarchical manner. The
entries are clickable.
<img src="../../common/images2/article377/xref.jpg" title="The xref window, it shows you which function writes or reads on which variable(s)." alt="xref"  width="695" height="268">

<A NAME="377lfindex5">&nbsp;</A>
<H2>Class window</H2>

This interface aggregates all useful information one
wishes to know about classes in an object-oriented language. In
particular, super- and subclasses are shown, as well as attribute and
method names along with their parameters. For a change, the window
below shows a C++ <tt>ClientSocket</tt> class which inherits from <tt>Socket</tt>
and has quite a few methods. Again, by clicking any of the entries you
can open an editor window at the appropriate position.
<br>
<div align="center"><img src="../../common/images2/article377/class_window.jpg" alt="" title="The class window concentrates the information regarding a particular class, for instance superclasses, methods and parameters." align="top"  width="631" height="481"><br>
</div>


<h1>Other alternatives </h1>
<tt>cscope</tt> is an interactive, console-screen based C source
code browser (it can do <tt>C++</tt>, too). It has some of the
functionality
of snavigator, a screenshot is <a href="../../common/images2/article377/cscope_function.jpg">here</a>.
In fact, it is much older and has been used in many
and very big projects. Its homepage is <a
 href="http://cscope.sourceforge.net/"> http://cscope.sourceforge.net/</a>.
But you need not even go there - it is built into <b>vim</b> and can
be
used in much the way (g)vim is used in combination with <tt>tags</tt>.
Simply type in
<pre class="code">
:help cscope
</pre>
in your vim session to check the available options. There
are a few derivatives of <tt>cscope</tt>. <a
 href="http://freescope.sourceforge.net">Freescope</a>
is a <tt>cscope</tt> clone which has some added functionality
such as symbol completion. There is now also a KDE GUI frontend to
cscope called <tt>kscope</tt>, it can be found on <a
 href="http://kscope.sourceforge.net/">http://kscope.sourceforge.net/</a>.


<h1> Conclusions</h1>
     For anyone involved in at least partly re-engineering or integrating source code, snavigator is a very useful and powerful tool. I once had an older Qt application which unfortunately did not work with the current version of the Qt library. By looking at the error messages and cruising a little with the snavigator, I had soon found out that only the parameter list of one function needed to be changed. Using the click-and-locate functionality, it was possible to bring the entire software package up to date in just a few minutes.



<!-- BODY_OF_THE_ARTICLE_STOP -->
<!-- 2pdaIgnoreStart -->
<A NAME="talkback">&nbsp;</a>
<h2>Talkback form for this article</h2>
Every article has its own talkback page. On this page you can submit a comment or look at comments from other readers:
<center>
    <table width="250" border=0><tr><td>
    <div class="tbbutton"><A class="nodec" href="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=377">&nbsp;talkback page&nbsp;</a></div>
    </td></tr></table>
</center>

<br clear="all">
<HR size="2" noshade>
<table width="250" border=0><tr><td>
<div class="bbutton"><a class="nodec" href="../../index.shtml">&lt;--, LF Home</a></div>
</td><td>
<div class="bbutton"><a class="nodec" href="index.shtml">Go to the index of this issue</a></div>
</td></tr></table>
<br clear="all">
<HR size="2" noshade>
<!-- ARTICLE FOOT -->
<CENTER><TABLE WIDTH="98%" summary="footer">
<TR><TD ALIGN=CENTER BGCOLOR="#bdc6d5" WIDTH="50%">
<A HREF="../../common/lfteam.html">Webpages maintained by the LinuxFocus Editor team</A>
<BR><FONT COLOR="#1111aa"><a href="../../common/copy.html">&copy; Gerrit Renker</a><br>&quot;some rights reserved&quot; see <a href="../../license/index.shtml">linuxfocus.org/license/</a><br><a href="http://www.linuxfocus.org">http://www.LinuxFocus.org</a></FONT>
</TD>
<TD BGCOLOR="#bdc6d5">
<!-- TRANSLATION INFO -->
<font size=2>Translation information:</font>
<TABLE summary="translators">
  <tr><td><font size="2">en --&gt; -- : Gerrit Renker <small>&lt;gerrit.renker(at)gmx.de&gt;</small></font></td></tr>
</TABLE>
</TD>
</TR></TABLE></CENTER>
<p><font size=1>2005-05-27, generated by lfparser version 2.52</font></p>
<!-- 2pdaIgnoreStop -->
</BODY>
</HTML>
