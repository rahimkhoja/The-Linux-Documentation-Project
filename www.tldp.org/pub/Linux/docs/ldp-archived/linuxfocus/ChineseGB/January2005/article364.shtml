<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
 <META http-equiv="Content-Type" content="text/html; charset=gb2312">
 <META NAME="GENERATOR" CONTENT="lfparser_2.51">
 <META NAME="LFCATEGORY" CONTENT="Applications">
 <link rel="icon" href="../../common/images/lf-16.png" type="image/png">
 <TITLE>lf364, Applications: 使用Sylpheed-Claws检查电子邮件数字签名</TITLE>
<style type="text/css">
<!--
 td.top {font-family: Arial,Geneva,Verdana,Helvetica,sans-serif; font-size:12 }
 pre { font-family:monospace,Courier }
 pre.code { font-family:monospace,Courier;background-color:#aedbe8; }
 p.cl { color:#EE9500 }
 table.left { margin-right:0.3cm }
 a.nodec { text-decoration:none }
 p.trans { font-size:8pt; text-align:right }
 p.clbox { width:50%; alignment:center; background-color:#FFD700; 
           border-style:none; border-width:medium; border-color:#FFD700; 
           padding:0.5cm;  text-align:center }
 p.code { width:80%; alignment:center; background-color:#aedbe8; 
          border-style:none; border-width:medium; border-color:#aedbe8; 
          padding:0.1cm;  text-align:left }
 p.foot { background-color:#AAAAAA; color:#FFFFFF; border-style:none; 
          border-width:medium; border-color:#AAAAAA; padding:0.5cm ; 
          margin-top:0.1cm; margin-right:1cm; margin-left:1cm; 
          text-align:center }
 div.tbbutton {
   background: #ddd;
   border-right: 1px solid #aaa;
   border-bottom: 1px solid #aaa;
   margin: 2px 5px 2px 5px;
   text-align: center;
   width: 20em;
   line-height: 1.2em;
   padding: 2px;
   font-size: 12px;
   white-space: nowrap;
   color: #555;
 }
 div.bbutton {
   background: #ddd;
   border-right: 1px solid #aaa;
   border-bottom: 1px solid #aaa;
   float: left;
   margin: 2px 5px 2px 5px;
   text-align: center;
   line-height: 1.2em;
   padding: 2px;
   font-size: 12px;
   white-space: nowrap;
   color: #555;
 }
-->
</style>
 
</HEAD>
<BODY bgcolor="#ffffff" text="#000000">
 <!-- this is generated html code. NEVER use this file for your
 translation work. Instead get the file with the same article number
 and .meta.shtml in its name. Translate this meta file and then
 use lfparser program to generate the final article -->
 <!-- lfparser can be obtained from http://main.linuxfocus.org/~guido/dev/lfparser.html -->

<!-- this is used by a number of tools:
 =LF=AUTHOR: Iznogood
 =LF=CAT___: Applications
 =LF=TITLE_: 使用Sylpheed-Claws检查电子邮件数字签名
 =LF=NUMBER: 364
 =LF=ANAME_: article364.shtml
 =LF=PARSER: 2.51
 -->

<!-- 2pdaIgnoreStart -->

<!-- start navegation bar, current, style=2 -->
 <!-- top navegation bar -->
 <TABLE summary="topbar_1" cellspacing="0" cellpadding="0" border="0" align="center" width="90%">
   <TR bgcolor="#2e2292">
     <TD class="top"><TABLE summary="topbar_1_logo" cellspacing="0" cellpadding="0" border="0" width=
       "100%">
         <TR><TD width="319"><a href="../../index.shtml"><IMG src="../../common/images/logolftop_319x45.gif"
           alt="[LinuxFocus-icon]" width="319" height="45" align="left" 
           border="0"></a></TD>

           <TD class="top">
             <TABLE summary="topbar_1_links" width="100%">
               <TR align="right">
                 <TD class="top">
                 
                 <A class="nodec" href="../../index.shtml"><FONT color=
                 "#DDDDDD" size="2">&lt;--</FONT></A> &nbsp;| 
                 <A class="nodec" href="../map.html"><FONT color=
                 "#DDDDDD" size="2">站点地图</FONT></A> &nbsp;| 
                 <A class="nodec" href="../indice.html"><FONT color=
                 "#DDDDDD" size="2">索引</FONT></A> &nbsp;| 
                 <A class="nodec" href="../Search/index.shtml"><FONT color=
                 "#DDDDDD" size="2">搜索</FONT></A> </TD>
                 
               </TR>

               <TR align="right">
                 <TD class="top">
                   <HR width="100%" noshade size="1">
                 </TD>
               </TR>
             </TABLE>
           </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end top navegation bar -->
 <!-- blue bar -->
 <TABLE summary="topbar_2" cellspacing="0" cellpadding="0" border="0" align="center"
 width="90%">
   <TR bgcolor="#00ffff">
     <TD><IMG src="../../common/images/transpix.gif" width="1" height=
     "2" alt=""></TD>
   </TR>
 </TABLE>
 <!-- end blue bar -->
 <!-- bottom navegation bar -->
 <TABLE summary="topbar_3" cellspacing="0" cellpadding="0" border="0" align="center"
 width="94%">
   <TR bgcolor="#000000">
     <TD>
       <TABLE summary="topbar_3_links" cellspacing="0" cellpadding="1" border="0" width=
       "100%">
         <TR align="center">
           <TD WIDTH="20%"><A class="nodec" href="../News/index.shtml"><FONT color=
           "#FFFFFF">新闻</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Archives/"><FONT color=
           "#FFFFFF">过往期刊</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Links/index.shtml"><FONT color=
           "#FFFFFF">链接</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../aboutus.html"><FONT color=
           "#FFFFFF">关于LF</FONT></A> </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end bottom navegation bar -->
<!-- stop navegation bar -->

<!-- SSI_INFO -->

<!-- tr_staticssi include virtual -->
<!-- tr_staticssi exec cmd -->
<!-- addedByLfdynahead ver 1.5 --><TABLE ALIGN="right" border=0><TR><TD ALIGN="right"><FONT SIZE="-1" FACE="Arial,Helvetica">This document is available in: <A href="../../English/January2005/article364.shtml">English</a> &nbsp;<A href="../../ChineseGB/January2005/article364.shtml">ChineseGB</a> &nbsp;<A href="../../Deutsch/January2005/article364.shtml">Deutsch</a> &nbsp;<A href="../../Francais/January2005/article364.shtml">Francais</a> &nbsp;<A href="../../Indonesian/January2005/article364.shtml">Indonesian</a> &nbsp;<A href="../../Turkce/January2005/article364.shtml">Turkce</a> &nbsp;</FONT></TD></TR></TABLE><br>
 


<!-- SSI_INFO STOP -->
<!-- 2pdaIgnoreStop -->

<!-- SHORT_BIO_ABOUT_THE_AUTHOR_AND_INDEX_START -->
<TABLE ALIGN="LEFT" BORDER="0" WIDTH="195" summary="about the author" class="left">
<TR>
<TD>

<img src="../../common/images2/iznoT2.png" alt="[Photo of the Author]" height="100" width="100">
<BR>by  Iznogood <br> <small>&lt;iznogood/at/iznogood-factory.org&gt;</small>
<BR><BR>
<I>关于作者:</I><BR>
<!-- aboutauthor_start -->
<p>
结识GNU/Linux有一段时间了，我现在使用的是Debian系统。除了电子方面的研究，
我还为GNU/Linux社区
<a href="http://iznogood-factory.org">Iznogood-Factory</a>
做大量的法语翻译工作。
</p>
<!-- aboutauthor_stop -->
<!-- TRANSLATED_TO gb -->
<!-- TRANSLATED_TO_STOP -->
<!-- INDEX_START -->
<BR><i>目录</i>:
<UL>
  <LI><A HREF="#364lfindex0">为什么要检查数字签名？</A></LI>
  <LI><A HREF="#364lfindex1">关于Sylpheed</A></LI>
  <LI><A HREF="#364lfindex2">如何检查数字签名？</A></LI>
  <LI><A HREF="#364lfindex3">总结</A></LI>
  <LI><A HREF="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=364">对这篇文章发表评论</A></LI>
</UL>

</TD></TR></TABLE>
<!-- INDEX_STOP -->
<!-- SHORT_BIO_ABOUT_THE_AUTHOR_AND_INDEX_STOP -->
<!-- HEAD_OF_THE_ARTICLE_START -->
<br>&nbsp;
<table border="0"><tr><td>
<H2>使用Sylpheed-Claws检查电子邮件数字签名</H2>
 <img src="../../common/images2/article364/syl-gnupg.png" alt="[Illustration]" height="100" hspace="10" width="100">
<!-- ABSTRACT OF THE ARTICLE -->
<P><i>摘要</i>:
<P>
<!-- articleabstract_start -->

在此我想向大家讲述一下如何在Sylpheed-Claws中使用一些基本的bash
管道命令增加一个gpg插件来检查电子邮件的数字签名。


<!-- articleabstract_stop -->

<br><!-- HR divider --><center><font color="#8282e0"><b>_________________ _________________ _________________</b></font></center><br>
</td></tr></table>
<!-- HEAD_OF_THE_ARTICLE_STOP -->
<!-- BODY_OF_THE_ARTICLE_START -->


<A NAME="364lfindex0">&nbsp;</A>
<H3>为什么要检查数字签名？</H3>


 <p>我曾经收到一个朋友的邮件，在邮件中他问道：“你怎么发给我一个带病毒程序的邮件？”
呵呵，肯定是有人非法获取了我的邮件地址并用我的地址给他发的。不过我这位朋友倒是
还算幸运，因为那个病毒已经被他检测到了。但是就像我们经常收到的邮件一样，如果
邮件的内容只是距他家150公里远的一次会议的日期，或者是一个正在开发中的程序的补丁，
那后果又会怎么样呢？我想那肯定是很令人沮丧的。
 </p>
<p>
从那以后我发邮件总是会加上数字签名，并且如果收到的邮件有签名的话我也总是检查，
以给邮件增加一层安全性，防止再有人冒充。但有时我会遇上这样的情况：我第一次收到某个人
的邮件但却从来没有检查过他的签名。因为我很懒，我不想打开一个xterm窗口，写一些
gpg命令把他的公钥（public key）存到我的电脑里，然后再检查每一封新邮件的签名。
所以我就想了这个办法使用Sylpheed-Claws来做这些事。
</p>

<A NAME="364lfindex1">&nbsp;</A>
<H2>关于Sylpheed</H2>

Sylpheed是一个轻量级的、快速的基于GTK图形界面的电子邮件客户端和新闻阅读器。
它采用两种形式发布：标准版Sylpheed和增加了一些其他边缘程序的试验版Sylpheed-Claws，
Sylpheed-Claws使用一个叫PGP/MIME的插件支持GPG。<br>如果要在您的机器上使用您需要有
编译好的sylpheed-claws，sylpheed-claws-plugins，sylpheed-claws-pgpmime和gpg。
Debian Sarge用户使用APT会简单一些，您只需下载上述软件包（其他Linux版本的用户
可能需要上网搜索一下对应的软件包），或者只是简单的输入以下命令（Debian会将其他
相关的软件包装上：译者注）：<br>

<pre class="code">apt-get install sylpheed-claws sylpheed-claws-plugins sylpheed-claws-pgpmime gpg</pre>
要让该插件工作您还需要到[设置Configuration] -&gt; [插件Plugins...]增加pgpmime.so插件（如下图）,
当然如果愿意您也可以增加其他的插件，以便更好地使用Sylpheed-Claws。<br>

<br>
<center> <img src="../../common/images2/article364/detailplugins.png" alt="[Illustration]"></center><br>
PGP/MIME将会在左侧显示出来。现在您就可以关闭该窗口，在[设置Configuration]菜单中进入
[偏好Preferences]设置：
<br>
<br>
<center><img src="../../common/images2/article364/config-gpg.png" alt="[Illustration]"></center>
<br>

<p>
接下来您可以在便好设定中看到左侧的［隐私Confidentiality] -&gt; [GPG]。
点击它可以看到四个复选框。您至少
需要选择第一个（自动检查数字签名）。检测您的信息。您对签名时的其他选项
可能也会感兴趣：第二个会在会话过程中将您的passphrase保持在内存中，第三个
选项会在需要时接受键盘输入，最后一个会在GPG无法运作时给出警告。
</p>

如果您收到一封带有数字签名的邮件，在邮件正文的右边就会出现一个图标：

<br><br>

<center> <img src="../../common/images2/article364/detailcrtl.png" alt="[Illustration]"></center>
<br>
带有一个钢笔的图标显示GPG控制正常但是邮件的作者不在您的数据库中或者
数字签名有错。
<A NAME="364lfindex2">&nbsp;</A>
<H2>如何检查数字签名？</H2>


<p>
在Sylpheed-Claws中，您可以用[工具Tools] -&gt; [执行动作Actions]来对想要检查的邮件进行检查。
但首先您必须在[设置Configuration] -&gt; [动作Actions...]中对其进行配置。先打开如下窗口：

<br><br>

<center> <img src="../../common/images2/article364/config-action.png" alt="[Illustration]"></center>
<br>

<p>
菜单名您可以随便选一个，在命令栏中输入您想要执行的命令（非常复杂）并点一下新增。
下面是通过管道进行GPG检查的命令：
<p/>
<br>

<pre class="code">
 ID=`cat %f | grep "From" | grep "<" | grep ">" | cut -f2 -d\&lt; | cut -f1 -d\&gt; `;
 xterm -e gpg --keyserver wwwkeys.ch.pgp.net --search-key $ID </pre>


将命令写在一行上。通常的GPG命令是：

<pre class="code">
 gpg --keyserver servername --search-key email-address </pre>

 在Sylpheed-Claws中，我们使用“xterm -e”打开一个xterm会话，因为我们总是需要
选择一个名字选项来获得邮件地址－$ID：

 <li>使用“cat %f”来读取邮件信息</li>
 <li>搜索带有“FROM”并且有“&lt;”和“&gt;”的行</li>
 <li>保存“&lt;”和“&gt;”之外的所有东西</li>

 同时我们也获得了邮件地址。当我们使用“动作”检查邮件地址时，它会连到
wwwkeys.ch.pgp.net密钥服务器。但您也可以换成别的服务器或者像
我一样配置两个不同的动作连到不同的密钥服务器。
<br>
在xterm中您会看到如下信息：<br>
<br>

<center> <img src="../../common/images2/article364/xterm.png" alt="[Illustration]"></center>
<br>
选择正确的地址以后xterm窗口将会关闭。您只需再一次查看一下正文右侧那个
图标，在它下面将会出现一个按钮以便您重新检查。这就完成了，您将会看到图标
变成下面的样子：

<br><br>

<center> <img src="../../common/images2/article364/detailcrtl2.png" alt="[Illustration]"></center>
<br>

如果不是，签名是错误的您还是把它放到垃圾筒里去吧。
<br>
<br>
如果您看到下面的图标那表示邮件的发送者是存在您的GPG数据库里的一个可以
信赖的朋友。因为您以前已经检查过他（她）的签名并信任他（她）了。

<br><br>

<center> <img src="../../common/images2/article364/detailcrtl3.png" alt="[Illustration]"></center>
<br>
 这样您只需仅对新邮件做一次身份验证，随后收到同一个人的邮件都会自动检查，
您的安全性增强了。


 <A NAME="364lfindex3">&nbsp;</A>
<H2>总结</H2>

 将bash管道应用到其他的图形界面的邮件客户端软件上可能容易也可能不容易。
我们的方法可以很容易的自动检查您的邮件。另一个好处是：这些被控制的邮件
不用经过垃圾邮件检测程序。因为您已经检查过一次邮件地址了。并且就我所知，
垃圾邮件不使用GPG数字签名。无疑我们可以使用另一种方法 － 直接在procmail
的输入端加上一个控制检测所有带有数字签名的邮件。但那就是另一回事了。您可以
在
<a href="http://iznogood-factory.org">Iznogood-Factory</a>.
上找到您感兴趣的资料。

 <br>
 <br>
更多的关于GPG和电子邮件数字签名的信息可以在如下地址找到：
<br><br>
 <a href="http://www.gnupg.org/">http://www.gnupg.org/</a>
 <br><br>

关于Sylpheed-Claws，
 <a href="http://sylpheed-claws.sourceforge.net/">点此查看</a>。
 <br>
 <br>


<!-- vim: set sw=2 ts=2 et tw=74: -->

<!-- BODY_OF_THE_ARTICLE_STOP -->
<!-- 2pdaIgnoreStart -->
<A NAME="talkback">&nbsp;</a>
<h2>对这篇文章发表评论</h2>
每篇文章都有各自的反馈页面。在这个页面里，您可以提交评论，也可以查看其他读者的评论：
<center>
    <table width="250" border=0><tr><td>
    <div class="tbbutton"><A class="nodec" href="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=364">&nbsp;反馈页面&nbsp;</a></div>
    </td></tr></table>
</center>

<br clear="all">
<HR size="2" noshade>
<table width="250" border=0><tr><td>
<div class="bbutton"><a class="nodec" href="../../index.shtml">&lt;--, LF 首页</a></div>
</td><td>
<div class="bbutton"><a class="nodec" href="index.shtml">Go to the index of this issue</a></div>
</td></tr></table>
<br clear="all">
<HR size="2" noshade>
<!-- ARTICLE FOOT -->
<CENTER><TABLE WIDTH="98%" summary="footer">
<TR><TD ALIGN=CENTER BGCOLOR="#bdc6d5" WIDTH="50%">
<A HREF="../../common/lfteam.html">主页由LinuxFocus编辑组维护</A>
<BR><FONT COLOR="#1111aa"><a href="../../common/copy.html">&copy; Iznogood</a><br>&quot;some rights reserved&quot; see <a href="../../license/index.shtml">linuxfocus.org/license/</a><br><a href="http://www.linuxfocus.org">http://www.LinuxFocus.org</a></FONT>
</TD>
<TD BGCOLOR="#bdc6d5">
<!-- TRANSLATION INFO -->
<font size=2>翻译信息:</font>
<TABLE summary="translators">
  <tr><td><font size="2">en --&gt; -- : Iznogood <small>&lt;iznogood/at/iznogood-factory.org&gt;</small></font></td></tr>
  <tr><td><font size="2">en --&gt; fr: Iznogood &lt;iznogood/at/iznogood-factory.org&gt;</font></td></tr>
  <tr><td><font size="2">en --&gt; zh: SEVEN &lt;seven1240/at/163.com&gt;</font></td></tr>
</TABLE>
</TD>
</TR></TABLE></CENTER>
<p><font size=1>2005-01-29, generated by lfparser version 2.51</font></p>
<!-- 2pdaIgnoreStop -->
</BODY>
</HTML>
