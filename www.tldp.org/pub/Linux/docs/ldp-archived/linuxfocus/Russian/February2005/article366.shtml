<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
 <META http-equiv="Content-Type" content="text/html; charset=koi8-r">
 <META NAME="GENERATOR" CONTENT="lfparser_2.50">
 <META NAME="LFCATEGORY" CONTENT="Applications">
 <link rel="icon" href="../../common/images/lf-16.png" type="image/png">
 <TITLE>lf366, Applications: Совет от LF: преобразование html документов в формат PDF</TITLE>
<style type="text/css">
<!--
 td.top {font-family: Arial,Geneva,Verdana,Helvetica,sans-serif; font-size:12 }
 pre { font-family:monospace,Courier }
 pre.code { font-family:monospace,Courier;background-color:#aedbe8; }
 p.cl { color:#EE9500 }
 table.left { margin-right:0.3cm }
 a.nodec { text-decoration:none }
 p.trans { font-size:8pt; text-align:right }
 p.clbox { width:50%; alignment:center; background-color:#FFD700; 
           border-style:none; border-width:medium; border-color:#FFD700; 
           padding:0.5cm;  text-align:center }
 p.code { width:80%; alignment:center; background-color:#aedbe8; 
          border-style:none; border-width:medium; border-color:#aedbe8; 
          padding:0.1cm;  text-align:left }
 p.foot { background-color:#AAAAAA; color:#FFFFFF; border-style:none; 
          border-width:medium; border-color:#AAAAAA; padding:0.5cm ; 
          margin-top:0.1cm; margin-right:1cm; margin-left:1cm; 
          text-align:center }
 div.tbbutton {
   background: #ddd;
   border-right: 1px solid #aaa;
   border-bottom: 1px solid #aaa;
   margin: 2px 5px 2px 5px;
   text-align: center;
   width: 20em;
   line-height: 1.2em;
   padding: 2px;
   font-size: 12px;
   white-space: nowrap;
   color: #555;
 }
 div.bbutton {
   background: #ddd;
   border-right: 1px solid #aaa;
   border-bottom: 1px solid #aaa;
   float: left;
   margin: 2px 5px 2px 5px;
   text-align: center;
   line-height: 1.2em;
   padding: 2px;
   font-size: 12px;
   white-space: nowrap;
   color: #555;
 }
-->
</style>
 
</HEAD>
<BODY bgcolor="#ffffff" text="#000000">
 <!-- this is generated html code. NEVER use this file for your
 translation work. Instead get the file with the same article number
 and .meta.shtml in its name. Translate this meta file and then
 use lfparser program to generate the final article -->
 <!-- lfparser can be obtained from http://main.linuxfocus.org/~guido/dev/lfparser.html -->

<!-- this is used by a number of tools:
 =LF=AUTHOR: Guido Socher
 =LF=CAT___: Applications
 =LF=TITLE_: Совет от LF: преобразование html документов в формат PDF
 =LF=NUMBER: 366
 =LF=ANAME_: article366.shtml
 =LF=PARSER: 2.50
 -->

<!-- 2pdaIgnoreStart -->

<!-- start navegation bar, current, style=2 -->
 <!-- top navegation bar -->
 <TABLE summary="topbar_1" cellspacing="0" cellpadding="0" border="0" align="center" width="90%">
   <TR bgcolor="#2e2292">
     <TD class="top"><TABLE summary="topbar_1_logo" cellspacing="0" cellpadding="0" border="0" width=
       "100%">
         <TR><TD width="319"><a href="../../index.shtml"><IMG src="../../common/images/logolftop_319x45.gif"
           alt="[LinuxFocus-icon]" width="319" height="45" align="left" 
           border="0"></a></TD>

           <TD class="top">
             <TABLE summary="topbar_1_links" width="100%">
               <TR align="right">
                 <TD class="top">
                 
                 <A class="nodec" href="../../index.shtml"><FONT color=
                 "#DDDDDD" size="2">&lt;--</FONT></A> &nbsp;| 
                 <A class="nodec" href="../map.html"><FONT color=
                 "#DDDDDD" size="2">Карта</FONT></A> &nbsp;| 
                 <A class="nodec" href="../indice.html"><FONT color=
                 "#DDDDDD" size="2">Индекс</FONT></A> &nbsp;| 
                 <A class="nodec" href="../Search/index.shtml"><FONT color=
                 "#DDDDDD" size="2">Поиск</FONT></A> </TD>
                 
               </TR>

               <TR align="right">
                 <TD class="top">
                   <HR width="100%" noshade size="1">
                 </TD>
               </TR>
             </TABLE>
           </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end top navegation bar -->
 <!-- blue bar -->
 <TABLE summary="topbar_2" cellspacing="0" cellpadding="0" border="0" align="center"
 width="90%">
   <TR bgcolor="#00ffff">
     <TD><IMG src="../../common/images/transpix.gif" width="1" height=
     "2" alt=""></TD>
   </TR>
 </TABLE>
 <!-- end blue bar -->
 <!-- bottom navegation bar -->
 <TABLE summary="topbar_3" cellspacing="0" cellpadding="0" border="0" align="center"
 width="94%">
   <TR bgcolor="#000000">
     <TD>
       <TABLE summary="topbar_3_links" cellspacing="0" cellpadding="1" border="0" width=
       "100%">
         <TR align="center">
           <TD WIDTH="20%"><A class="nodec" href="../News/index.shtml"><FONT color=
           "#FFFFFF">Новости</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Archives/"><FONT color=
           "#FFFFFF">Архивы</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Links/index.shtml"><FONT color=
           "#FFFFFF">Ссылки</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../aboutus.html"><FONT color=
           "#FFFFFF">Про LF</FONT></A> </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end bottom navegation bar -->
<!-- stop navegation bar -->

<!-- SSI_INFO -->

<!-- tr_staticssi include virtual -->
<!-- tr_staticssi exec cmd -->
<!-- addedByLfdynahead ver 1.5 --><TABLE ALIGN="right" border=0><TR><TD ALIGN="right"><FONT SIZE="-1" FACE="Arial,Helvetica">эта страница доступна на следующих языках: <A href="../../English/February2005/article366.shtml">English</a> &nbsp;<A href="../../Castellano/February2005/article366.shtml">Castellano</a> &nbsp;<A href="../../ChineseGB/February2005/article366.shtml">ChineseGB</a> &nbsp;<A href="../../Deutsch/February2005/article366.shtml">Deutsch</a> &nbsp;<A href="../../Francais/February2005/article366.shtml">Francais</a> &nbsp;<A href="../../Nederlands/February2005/article366.shtml">Nederlands</a> &nbsp;<A href="../../Russian/February2005/article366.shtml">Russian</a> &nbsp;</FONT></TD></TR></TABLE><br>
 


<!-- SSI_INFO STOP -->
<!-- 2pdaIgnoreStop -->

<!-- SHORT_BIO_ABOUT_THE_AUTHOR_AND_INDEX_START -->
<TABLE ALIGN="LEFT" BORDER="0" WIDTH="195" summary="about the author" class="left">
<TR>
<TD>

<img src="../../common/images/Guido-S.gif" alt=
    "[Photo of the Author]" height="164" width="173">
<BR>автор  Guido Socher <a href="http://main.linuxfocus.org/%7Eguido/"><font size="1">(homepage)</font></a>
<BR><BR>
<I>Об авторе:</I><BR>
<!-- aboutauthor_start -->
<p>Недавно мы сообщили о том, что linuxfocus планирует предоставить читателям свои заметки
в формате pdf. В ответ мы получили множество сообщений с советами как это сделать и протестировав
их решили написать небольшую заметку на эту тему. Благодарим за ваши сообщения и советы.

    
<!-- aboutauthor_stop -->
<!-- TRANSLATED_TO ru -->
<BR><BR><I>Перевод на Русский:</I><BR>
Pukhlyakov Kirill <small>&lt;kirill(at)linuxfocus.org&gt;</small>
<br>
<!--
 =LF=TRANSTO=ru: Pukhlyakov Kirill
-->
<!-- TRANSLATED_TO_STOP -->
<!-- INDEX_START -->
<BR><i>Содержание</i>:
<UL>
  <LI><A HREF="#366lfindex0">Введение</A></LI>
  <LI><A HREF="#366lfindex1">Идея</A></LI>
  <LI><A HREF="#366lfindex2">Варианты</A></LI>
  <LI><A HREF="#366lfindex3">Вывод</A></LI>
  <LI><A HREF="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=366">Страница отзывов</A></LI>
</UL>

</TD></TR></TABLE>
<!-- INDEX_STOP -->
<!-- SHORT_BIO_ABOUT_THE_AUTHOR_AND_INDEX_STOP -->
<!-- HEAD_OF_THE_ARTICLE_START -->
<br>&nbsp;
<table border="0"><tr><td>
<H2>Совет от LF: преобразование html документов в формат PDF</H2>
 <img src="../../common/images2/article366.gif" alt="mozilla firefox" hspace="10" width="50" height="50">
<!-- ABSTRACT OF THE ARTICLE -->
<P><i>Резюме</i>:
<P>
<!-- articleabstract_start -->

Это небольшая заметка. Теперь в нашем журнале по крайней мере одна подобная заметка будет в
каждом месяце. Если у Вас есть какие-нибудь идеи для подобных заметок - пишите на мой почтовый
адрес: guido("at" sign)linuxfocus.org<br>
<!-- articleabstract_stop -->

<br><!-- HR divider --><center><font color="#8282e0"><b>_________________ _________________ _________________</b></font></center><br>
</td></tr></table>
<!-- HEAD_OF_THE_ARTICLE_STOP -->
<!-- BODY_OF_THE_ARTICLE_START -->


    <A NAME="366lfindex0">&nbsp;</A>
<H2>Введение</H2>

Возможно вы заметили, что теперь заметки нашего журнала доступны в формате PDF для
языков, использующих кодировку iso8859-1. Это была не совсем простая задача, имея в виду
то, что мы хотели генерировать документы автоматически, а также чтобы исходный и преобразованный
документы не отличались.<br><br>
Рассмотрим как это было сделано.

    <A NAME="366lfindex1">&nbsp;</A>
<H2>Идея</H2>

В любой Linux системе вы можете найти утилиту ps2pdf, с помощью которой всегда можно
преобразовать postscript файл.
<br><br>Система печати ОС Linux построена на postscript поэтому вероятно не должно возникнуть
проблем!? На самом деле проблема в том, чтобы найти решение преобразования файлов из скрипта,
запуская его в командной строке. Вы ведь не хотите кликать мышкой для преобразования порядка
2000 заметок например.

<br><br>Если вам не особо нужны таблицы и изображения в документе используйте следующую
команду "lynx -dump .... | nenscript" и ps2pdf сделает работу. Но если они вам нужны - читайте
дальше.

    <A NAME="366lfindex2">&nbsp;</A>
<H2>Варианты</H2>

<h4>html2ps</h4>
Это perl скрипт - мы протестировали версию html2ps 1.0 beta3. Домашняя страница -
http://user.it.uu.se/~jan/html2ps.html<br>
Скрипт работает хорошо, но требует установки определенных дополнительных модулей и
возникают небольшие проблемы когда в документе присутствуют таблицы, формирующие его структуру.
Хороший выбор если ваши документы имеют простой вид.

<h4>latex</h4>
Существует утилита latex to pdf. Используя xslt вы можете преобразовать html документ в Latex.
Необходимым условием является наличие синтаксически корректного html документа.
Проверить правильность документа можно утилитой tidy:
<pre class="code">
HTML --(tidy)--&gt; XHTML --(XSLT)--&gt; Latex --(pdflatex)--&gt; PDF
</pre>
Я не стал рассматривать этот вариант, потому что мне он показался достаточно сложным.
<h4>web browser remote control</h4>
Если бы была возможность командами управлять браузером, то генерируемый PDF был бы идентичен
тому что вы видите в браузере. Проблема в том, что необходимы X11. Кроме того нет возможности
использовать этот вариант в cron'е.
<br>
<br>
В проекте mozilla хорошо поработали над печатью и представлением документа, но убрали некоторые
возможности удаленного управления, которые есть в netscape communicator. Следующий вариант
работает только в communicator 4.X
<pre class="code">
netscape -noraise -remote "openurl(http://somepage)"
sleep(10) # нет возможности узнать загрузилась ли полностью страница
          # поэтому делаем небольшую паузу
netscape -noraise -remote saveas(somepage.ps,PostScript)
sleep(10)
ps2pdf somepage.ps
</pre>
Некоторые читатели сообщили, что удаленная печать возможно будет работать в konqueror, но
никто не смог представить решение.


<h4>htmldoc</h4>
Htmldoc отличная утилита с http://www.htmldoc.org/. Следующая команда делает именно то, что нам
надо:
<pre class="code">
htmldoc -t pdf -webpage -f file.pdf file.html
</pre>
Мы протестировали версию 1.8.24 и остались довольны. Единственная проблема в том, что
размер выходного файла в формате pdf примерно в 10 раз превышает файлы созданные другими
утилитами. Мы попробовали различные опции сжатия, но результат остался прежним. Это вообщем то
проблема если у вас тысячи документов.

<A NAME="366lfindex3">&nbsp;</A>
<H2>Вывод</H2>

В настоящее время мы используем решение на основе удаленного управления netscape и htmldoc.
Если у вас есть какие-нибудь идеи насчет уменьшения размера файла или вообще рассматриаемого
преобразования - пишите нам.

  



<!-- BODY_OF_THE_ARTICLE_STOP -->
<!-- 2pdaIgnoreStart -->
<A NAME="talkback">&nbsp;</a>
<h2>Страница отзывов</h2>
У каждой заметки есть страница отзывов. На этой странице вы можете оставить 
свой комментарий или просмотреть комментарии других читателей 
<center>
    <table width="250" border=0><tr><td>
    <div class="tbbutton"><A class="nodec" href="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=366">&nbsp;talkback page&nbsp;</a></div>
    </td></tr></table>
</center>

<br clear="all">
<HR size="2" noshade>
<table width="250" border=0><tr><td>
<div class="bbutton"><a class="nodec" href="../../index.shtml">&lt;--, LF Домой</a></div>
</td><td>
<div class="bbutton"><a class="nodec" href="index.shtml">перейти к начальной странице выпуска</a></div>
</td></tr></table>
<br clear="all">
<HR size="2" noshade>
<!-- ARTICLE FOOT -->
<CENTER><TABLE WIDTH="98%" summary="footer">
<TR><TD ALIGN=CENTER BGCOLOR="#bdc6d5" WIDTH="50%">
<A HREF="../../common/lfteam.html">Webpages maintained by the LinuxFocus Editor team</A>
<BR><FONT COLOR="#1111aa"><a href="../../common/copy.html">&copy; Guido Socher</a><br>&quot;some rights reserved&quot; see <a href="../../license/index.shtml">linuxfocus.org/license/</a><br><a href="http://www.linuxfocus.org">http://www.LinuxFocus.org</a></FONT>
</TD>
<TD BGCOLOR="#bdc6d5">
<!-- TRANSLATION INFO -->
<font size=2>Translation information:</font>
<TABLE summary="translators">
  <tr><td><font size="2">en --&gt; -- : Guido Socher (<a href="http://main.linuxfocus.org/%7Eguido/"><font size="1">homepage</font></a>)</font></td></tr>
  <tr><td><font size="2">en --&gt; ru: Pukhlyakov Kirill &lt;kirill(at)linuxfocus.org&gt;</font></td></tr>
</TABLE>
</TD>
</TR></TABLE></CENTER>
<p><font size=1>2005-02-03, generated by lfparser version 2.50</font></p>
<!-- 2pdaIgnoreStop -->
</BODY>
</HTML>
