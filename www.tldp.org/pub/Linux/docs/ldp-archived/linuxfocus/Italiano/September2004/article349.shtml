<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
 <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
 <META NAME="GENERATOR" CONTENT="lfparser_2.50">
 <META NAME="LFCATEGORY" CONTENT="UNIXBasics">
 <link rel="icon" href="../../common/images/lf-16.png" type="image/png">
 <TITLE>lf349, UNIXBasics: Il mistero dei punti di mount</TITLE>
<style type="text/css">
<!--
 td.top {font-family: Arial,Geneva,Verdana,Helvetica,sans-serif; font-size:12 }
 pre { font-family:monospace,Courier }
 pre.code { font-family:monospace,Courier;background-color:#aedbe8; }
 p.cl { color:#EE9500 }
 table.left { margin-right:0.3cm }
 a.nodec { text-decoration:none }
 p.trans { font-size:8pt; text-align:right }
 p.clbox { width:50%; alignment:center; background-color:#FFD700; 
           border-style:none; border-width:medium; border-color:#FFD700; 
           padding:0.5cm;  text-align:center }
 p.code { width:80%; alignment:center; background-color:#aedbe8; 
          border-style:none; border-width:medium; border-color:#aedbe8; 
          padding:0.1cm;  text-align:left }
 p.foot { background-color:#AAAAAA; color:#FFFFFF; border-style:none; 
          border-width:medium; border-color:#AAAAAA; padding:0.5cm ; 
          margin-top:0.1cm; margin-right:1cm; margin-left:1cm; 
          text-align:center }
 div.tbbutton {
   background: #ddd;
   border-right: 1px solid #aaa;
   border-bottom: 1px solid #aaa;
   margin: 2px 5px 2px 5px;
   text-align: center;
   width: 20em;
   line-height: 1.2em;
   padding: 2px;
   font-size: 12px;
   white-space: nowrap;
   color: #555;
 }
 div.bbutton {
   background: #ddd;
   border-right: 1px solid #aaa;
   border-bottom: 1px solid #aaa;
   float: left;
   margin: 2px 5px 2px 5px;
   text-align: center;
   line-height: 1.2em;
   padding: 2px;
   font-size: 12px;
   white-space: nowrap;
   color: #555;
 }
-->
</style>
 
</HEAD>
<BODY bgcolor="#ffffff" text="#000000">
 <!-- this is generated html code. NEVER use this file for your
 translation work. Instead get the file with the same article number
 and .meta.shtml in its name. Translate this meta file and then
 use lfparser program to generate the final article -->
 <!-- lfparser can be obtained from http://main.linuxfocus.org/~guido/dev/lfparser.html -->

<!-- this is used by a number of tools:
 =LF=AUTHOR: Guido Socher
 =LF=CAT___: UNIXBasics
 =LF=TITLE_: Il mistero dei punti di mount
 =LF=NUMBER: 349
 =LF=ANAME_: article349.shtml
 =LF=PARSER: 2.50
 -->

<!-- 2pdaIgnoreStart -->

<!-- start navegation bar, current, style=2 -->
 <!-- top navegation bar -->
 <TABLE summary="topbar_1" cellspacing="0" cellpadding="0" border="0" align="center" width="90%">
   <TR bgcolor="#2e2292">
     <TD class="top"><TABLE summary="topbar_1_logo" cellspacing="0" cellpadding="0" border="0" width=
       "100%">
         <TR><TD width="319"><a href="../../index.shtml"><IMG src="../../common/images/logolftop_319x45.gif"
           alt="[LinuxFocus-icon]" width="319" height="45" align="left" 
           border="0"></a></TD>

           <TD class="top">
             <TABLE summary="topbar_1_links" width="100%">
               <TR align="right">
                 <TD class="top">
                 
                 <A class="nodec" href="../../index.shtml"><FONT color=
                 "#DDDDDD" size="2">&lt;--</FONT></A> &nbsp;| 
                 <A class="nodec" href="../map.html"><FONT color=
                 "#DDDDDD" size="2">Mappa</FONT></A> &nbsp;| 
                 <A class="nodec" href="../indice.html"><FONT color=
                 "#DDDDDD" size="2">Indice</FONT></A> &nbsp;| 
                 <A class="nodec" href="../Search/index.shtml"><FONT color=
                 "#DDDDDD" size="2">Cerca</FONT></A> </TD>
                 
               </TR>

               <TR align="right">
                 <TD class="top">
                   <HR width="100%" noshade size="1">
                 </TD>
               </TR>
             </TABLE>
           </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end top navegation bar -->
 <!-- blue bar -->
 <TABLE summary="topbar_2" cellspacing="0" cellpadding="0" border="0" align="center"
 width="90%">
   <TR bgcolor="#00ffff">
     <TD><IMG src="../../common/images/transpix.gif" width="1" height=
     "2" alt=""></TD>
   </TR>
 </TABLE>
 <!-- end blue bar -->
 <!-- bottom navegation bar -->
 <TABLE summary="topbar_3" cellspacing="0" cellpadding="0" border="0" align="center"
 width="94%">
   <TR bgcolor="#000000">
     <TD>
       <TABLE summary="topbar_3_links" cellspacing="0" cellpadding="1" border="0" width=
       "100%">
         <TR align="center">
           <TD WIDTH="20%"><A class="nodec" href="../News/index.shtml"><FONT color=
           "#FFFFFF">News</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Archives/index.html"><FONT color=
           "#FFFFFF">Archivo</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Links/index.html"><FONT color=
           "#FFFFFF">Link</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../aboutus.html"><FONT color=
           "#FFFFFF">Cose LF</FONT></A> </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end bottom navegation bar -->
<!-- stop navegation bar -->

<!-- SSI_INFO -->

<!-- tr_staticssi include virtual -->
<!-- tr_staticssi exec cmd -->
<!-- addedByLfdynahead ver 1.5 --><TABLE ALIGN="right" border=0><TR><TD ALIGN="right"><FONT SIZE="-1" FACE="Arial,Helvetica">Questo documento &egrave; disponibile in: <A href="../../English/September2004/article349.shtml">English</a> &nbsp;<A href="../../Castellano/September2004/article349.shtml">Castellano</a> &nbsp;<A href="../../ChineseGB/September2004/article349.shtml">ChineseGB</a> &nbsp;<A href="../../Deutsch/September2004/article349.shtml">Deutsch</a> &nbsp;<A href="../../Francais/September2004/article349.shtml">Francais</a> &nbsp;<A href="../../Italiano/September2004/article349.shtml">Italiano</a> &nbsp;<A href="../../Indonesian/September2004/article349.shtml">Indonesian</a> &nbsp;<A href="../../Russian/September2004/article349.shtml">Russian</a> &nbsp;<A href="../../Turkce/September2004/article349.shtml">Turkce</a> &nbsp;<A href="../../Polish/September2004/article349.shtml">Polish</a> &nbsp;</FONT></TD></TR></TABLE><br>
 


<!-- SSI_INFO STOP -->
<!-- 2pdaIgnoreStop -->

<!-- SHORT_BIO_ABOUT_THE_AUTHOR_AND_INDEX_START -->
<TABLE ALIGN="LEFT" BORDER="0" WIDTH="195" summary="about the author" class="left">
<TR>
<TD>

<img src="../../common/images/Guido-S.gif" alt=
    "[Photo of the Author]" height="164" width="173">
<BR>   Guido Socher <a href="http://main.linuxfocus.org/%7Eguido/"><font size="1">(homepage)</font></a>
<BR><BR>
<I>L'autore:</I><BR>
<!-- aboutauthor_start -->
<p>A Guido piace Linux perche' appartiene alla comunita'. Si tratta di
    un enorme progetto e in qualche modo tutte le diverse persone nel mondo
    stanno lavorando per raggiungere lo stesso scopo: renderlo migliore ogni
    giorno.<br>
    Sfortunatamente Linux e' diventato cosi' importante che attrae anche le
    persone cattive che cercano solo di trarne profitto senza dare nulla in
    cambio. State attenti! Spesso dall'esterno sembra che si tratti di  piccole
    attivita' "pro-linux" ma sono solo degli opportunisti.</p>
<!-- aboutauthor_stop -->
<!-- TRANSLATED_TO it -->
<BR><BR><I>Tradotto in Italiano da:</I><BR>
Roberto Pauletto <small>&lt;neverquit/at/cwazy.co.uk&gt;</small>
<br>
<!--
 =LF=TRANSTO=it: Roberto Pauletto
-->
<!-- TRANSLATED_TO_STOP -->
<!-- INDEX_START -->
<BR><i>Contenuto</i>:
<UL>
  <LI><A HREF="#349lfindex0">Introduzione</A></LI>
  <LI><A HREF="#349lfindex1">Come funziona</A></LI>
  <LI><A HREF="#349lfindex2">Il problema del  "file-system busy" (filesystem occupato) </A></LI>
  <LI><A HREF="#349lfindex3">Ma windows puo' farlo!?</A></LI>
  <LI><A HREF="#349lfindex4">Anche Linux puo' farlo!</A></LI>
  <LI><A HREF="#349lfindex5">Consenti a chiunque di montare un filesystem</A></LI>
  <LI><A HREF="#349lfindex6">Portatili e  nfs</A></LI>
  <LI><A HREF="#349lfindex7">Conclusione</A></LI>
  <LI><A HREF="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=349">Discussioni su quest'articolo</A></LI>
</UL>

</TD></TR></TABLE>
<!-- INDEX_STOP -->
<!-- SHORT_BIO_ABOUT_THE_AUTHOR_AND_INDEX_STOP -->
<!-- HEAD_OF_THE_ARTICLE_START -->
<br>&nbsp;
<table border="0"><tr><td>
<H2>Il mistero dei punti di mount</H2>
 <img src="../../common/images2/illustration349.jpg" alt="mount"
    hspace="10">
<!-- ABSTRACT OF THE ARTICLE -->
<P><i>Premessa</i>:
<P>
<!-- articleabstract_start -->

    Questo articolo elabora il concetto di punti di montaggio del
    filesystem (mount), ma spero che
    l'articolo contenga informazioni di interesse anche per chi
    non e' nuovo di Linux.

    
<!-- articleabstract_stop -->

<br><!-- HR divider --><center><font color="#8282e0"><b>_________________ _________________ _________________</b></font></center><br>
</td></tr></table>
<!-- HEAD_OF_THE_ARTICLE_STOP -->
<!-- BODY_OF_THE_ARTICLE_START -->


    <A NAME="349lfindex0">&nbsp;</A>
<H2>Introduzione</H2>

    Spieghero' prima di tutto il concetto di montaggio dei filesystem,
    per poi illustrare ulteriori e piu' avanzate caratteristiche.
    Se pensate di essere degli esperti di Linux, allora potete iniziare a
    leggere un poco piu' sotto.


    <A NAME="349lfindex1">&nbsp;</A>
<H2>Come funziona</H2>

    Almeno fino ad oggi sotto windows si aveva l'inconveniente che,
    aggiungendo un nuovo drive al sistema, si sfalsavano tutte le lettere
    che rappresentavano i nomi dei drive fino a quel momento. Quello che
    prima era il drive D: improvvisamente diventava il drive E: e questo
    generava una certa confusione sia fra gli utenti che nei software stessi.


    <br>
    Sotto Unix questo problema non esiste poiche' tutti i dischi fisici sono
    inseriti all'interno di una struttura (albero) di directory. Potete
    visualizzarla digitando "mount" o "df":

    <table>
      <tr>
        <td>
<pre class="code">
# df
Filesystem 1K-blocks    Used Available Use% Mounted on
/dev/hda1    9070728 4701180   3908768  55% /
/dev/hda3   24950428  683412  22999584   3% /home
none          257236       0    257236   0% /dev/shm

# mount
/dev/hda1 on / type ext3 (rw)
none on /proc type proc (rw)
none on /dev/shm type tmpfs (rw)
/dev/hda3 on /home type ext3 (rw)
</pre>
        </td>
      </tr>
    </table>
    Nell'esempio abbiamo due partizioni, una della quali contiene tutto
    tranne la directory /home. Questa e' la partizione di root "/" ed e'
    fisicamente connessa ad hda1. hda1 e' la prima partizione (1) del primo
    harddisk ide (hda). La terza partizione (hda3) sullo stesso disco &egrave;
    montata su /home. Quindi se vi spostate in /home avete accesso ai file
    su hda3. Non dovrete mai preoccuparvi se questo ora e' D: o E: o ???.
    Si tratta sempre e solo di una struttura di directory ad albero.

    <A NAME="349lfindex2">&nbsp;</A>
<H2>Il problema del  "file-system busy" (filesystem occupato) </H2>

    Linux conserva temporaneamente in memoria le operazioni di lettura/scrittura che effettua.
    Lo potete notare quando avete dischi usb versione 1.1 e
    state accedendo ad un grosso file. La prima volta l'accesso &egrave; lento ma la
    seconda volta che aprite lo stesso file l'operazione &egrave;  talmente veloce che la
    luce del vostro dispositivo usb neanche lampeggia.

    <br>

    Proprio per questa caratteristica non potete semplicemente rimuovere il disco che
    state usando. Dovete "smontarlo" (umount). Per i normali hard disk interni la
    cosa non costituisce un problema, ma lo pu&ograve; diventare per i cdrom ed i dischi
    USB.

    <br>
    Se ad esempio montate uno stick-usb sotto /mnt/usb e digitate il
    comando "cd /mnt/usb" allora bash inizia ad usare questo filesystem.
    Se tentate di smontarlo da una differente finestra di shell riceverete
    il messaggio "file system busy" e l'operazione di smontaggio fallira'.
    E' sufficiente che voi eseguiate un "cd" nuovamente per uscire dalla directory
    /mnt/usb, quindi potete smontare il drive.
    Il problema risiede nel fatto che talvolta ci si dimentica di chi
    sta usando il filesystem e che potrebbero esserci cosi' tante applicazioni aperte che
    diventa difficile trovare chi sta facendo fallire lo smontaggio.

    <br>
    <br>
    Chiedetelo al vostro computer!
<pre class="code">
# fuser -m -u /mnt/usb
/mnt/usb:   1347c(root)  1348c(guido)  1349c(guido)
</pre>
    Quello che ricevete dal comando fuser &egrave; una lista di processi che stanno
    ancora usando il filesystem in questione. Ora potete verificare con
    "ps auxw" di chi si tratta o potete semplicemente uccidere i processi.
    Fatto questo lo smontaggio con "umount" funzionera'.

    <A NAME="349lfindex3">&nbsp;</A>
<H2>Ma windows puo' farlo!?</H2>

    Perche' non estrarre semplicemente lo stick-usb?, Be', i vecchi computers
    basati su win 3.1 o dos potevano essere semplicemente spenti. A quei tempi
    alcuni dei miei amici si lamentavano del fatto che in Linux occorreva una
    operazione di chiusura del sistema (shutdown) prima di spegnere il PC.
    Ma dall'avvento di win95 tutti hanno dovuto abituarsi a chiudere il sistema prima
    di spegnere il computer.

    <A NAME="349lfindex4">&nbsp;</A>
<H2>Anche Linux puo' farlo!</H2>

    Ci sono comunque dei modi coi i quali anche con Linux si puo' semplicemente
    staccare il disco (ad esempio un disco usb). Mandrake Linux ha una funzione detta
    supermount e fornisce esattamente gli stessi risultati (o problemi) di windows.
    Ma non la raccomando perche' fonte di instabilita' e di file persi.
    <br>
    <br>

    E' meglio usare gli mtools (http://mtools.linux.lu/). Gli mtools sono
    un gruppo di comandi per accedere a floppy drive, stick-usb ..., in pratica
    qualsiasi media rimovibile con un filesystem FAT e non avete bisogno di montare
    il filesistem

    <br>
    Ecco il trucco:

    <ol>
      <li>
        Modificate /etc/mtools.conf ed aggiungete la seguente riga<br>
<pre>
drive u: file="/dev/sda1" # o sda4; alcuni stick-usb hanno una partizione
                          # 4 creata come predefinita dalla casa costruttrice.
</pre>
        <br>
        <br>
      </li>

      <li>Ora NON montate /dev/sda1. Invece digitate<br>
      mdir u:<br>
      per vedere cosa c'e' nello stick-usb.<br>
      <br>
      mcopy * u:<br>
      per copiare tutti i files dalla cartella corrente allo stick-usb.<br>
      <br>
      mcopy u:\* .<br>
      per copiare tutti i files dallo usb-stick alla cartella corrente
      (notate la \ prima del carattere jolly).<br>
      <br>
      </li>
    </ol>
    Molto facile da usare.

    <A NAME="349lfindex5">&nbsp;</A>
<H2>Consenti a chiunque di montare un filesystem</H2>

    In genere dovete essere root per montare un filesystem. Per
    dispositivi come cdrom o stick-usb potreste concedere a qualunque
    utente il diritto di montarli. Tutto quello che dovete fare in questo
    caso e' aggiungere una riga come la seguente in /etc/fstab:


<pre class="code">
# dev     mount point    fs type   flags
/dev/sda1  /mnt/usb      auto      noauto,user 0 0
</pre>
    Questa riga fa si' che sda1 (la prima partizione sul primo disco
    scsi, le unita' di memoria usb sono mappate come dischi scsi) non
    debbano essere montate automaticamente in fase di avvio (noauto) e
    possono essere montate/smontate da chiunque (user). Il campo FS-Type &egrave; anche
    impostato ad auto cosi' che si possa montare una stick-usb formattata con vfat
    o ext2 ed il corretto filesystem sar&agrave; identificato automaticamente.

    <A NAME="349lfindex6">&nbsp;</A>
<H2>Portatili e  nfs</H2>

    Il filesystem di rete NFS (Network File System), e' veramente valido se volete avere dei
    backup centralizzati per le cartelle home di parecchi utenti.
    Tutto quello che dovete fare e' montare le cartelle home da un server
    centrale e tutti gli utenti avranno le loro cartelle individuali home
    disponibili su tutti i computer della rete. Le stesse impostazioni e
    preferenze e gli stessi dati ovunque. E' veramente ottimo.

    <br>
    <br>
    Ma come gestire utenti mobili con i portatili? (nessun backup?)
    <br>
    <br>
    Una volta che siete fuori dalla rete la vostra cartella home e' andata.
    Una soluzione r' sempre quella di copiare tutti i dati (rsync) ma la cosa
    puo' facilmente portare ad inconsistenze se non siete molto disciplinati,
    e spesso non serve tutto il contenuto della cartella home. Trovo che sia
    una buona soluzione quella di avere una seconda piccola cartella home con solo
    le impostazioni ed i dati di cui necessito mentre sono in viaggio.
    <br>
    <br>

    Quando montate un filesystem (qualsiasi filesystem o disco incluso nfs) su di
    una cartella non vuota, il contenuto di questa cartella diventa invisibile e
    voi potete vedere il filesystem montato.
     <br>

    <br>
    Ecco la soluzione: Create un punto di montaggio per le cartelle home (/home) ed
    automontate li' le diverse cartelle home quando il computer si trova in rete.
    Comunque prima di montare qualsiasi cosa create un link simbolico per l'utente
    che possiede il portatile verso una cartella home off-line.


<pre class="code">
/home/guido -&gt; ../home_nonet/guido
</pre>
    Quando l'utente guido e' in rete allora egli vedra' la sua normale cartella home perch&egrave;
    il link simbolico e' nascosto. Quando egli sara' in viaggio allora vedra'
    /home_nonet/guido come sua cartella home (/home/guido).
     <br>

    <br>
    Una soluzione molto elegante.

    <A NAME="349lfindex7">&nbsp;</A>
<H2>Conclusione</H2>


    Costruire uno strato di astrazione per l'hardware ha sempre costituito uno
    degli scopi di Unix. Montare/smontare filesystem/dischi e' stato uno dei
    modi di raggiungere lo scopo. Una idea veramente moderna ed avanzata, sebbene
    Unix sia molto piu' vecchio di altri sistemi operativi su PC.

  



<!-- BODY_OF_THE_ARTICLE_STOP -->
<!-- 2pdaIgnoreStart -->
<A NAME="talkback">&nbsp;</a>
<h2>Discussioni su quest'articolo</h2>
ogni articolo possiede una sua pagina di discussione, da questa pagina puoi inviare un commento o leggere quelli degli altri lettori:
<center>
    <table width="250" border=0><tr><td>
    <div class="tbbutton"><A class="nodec" href="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=349">&nbsp;pagina di discussione&nbsp;</a></div>
    </td></tr></table>
</center>

<br clear="all">
<HR size="2" noshade>
<table width="250" border=0><tr><td>
<div class="bbutton"><a class="nodec" href="../../index.shtml">&lt;--, LF Home</a></div>
</td><td>
<div class="bbutton"><a class="nodec" href="index.shtml">Indice di questo numero</a></div>
</td></tr></table>
<br clear="all">
<HR size="2" noshade>
<!-- ARTICLE FOOT -->
<CENTER><TABLE WIDTH="98%" summary="footer">
<TR><TD ALIGN=CENTER BGCOLOR="#bdc6d5" WIDTH="50%">
<A HREF="../../common/lfteam.html">Webpages maintained by the LinuxFocus Editor team</A>
<BR><FONT COLOR="#1111aa"><a href="../../common/copy.html">&copy; Guido Socher</a><br>&quot;some rights reserved&quot; see <a href="../../license/index.shtml">linuxfocus.org/license/</a><br><a href="http://www.linuxfocus.org">http://www.LinuxFocus.org</a></FONT>
</TD>
<TD BGCOLOR="#bdc6d5">
<!-- TRANSLATION INFO -->
<font size=2>Translation information:</font>
<TABLE summary="translators">
  <tr><td><font size="2">en --&gt; -- : Guido Socher (<a href="http://main.linuxfocus.org/%7Eguido/"><font size="1">homepage</font></a>)</font></td></tr>
  <tr><td><font size="2">en --&gt; it: Roberto Pauletto &lt;neverquit/at/cwazy.co.uk&gt;</font></td></tr>
</TABLE>
</TD>
</TR></TABLE></CENTER>
<p><font size=1>2004-11-01, generated by lfparser version 2.50</font></p>
<!-- 2pdaIgnoreStop -->
</BODY>
</HTML>
