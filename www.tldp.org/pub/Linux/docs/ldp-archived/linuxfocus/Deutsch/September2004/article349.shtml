<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
 <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
 <META NAME="GENERATOR" CONTENT="lfparser_2.50">
 <META NAME="LFCATEGORY" CONTENT="UNIXBasics">
 <link rel="icon" href="../../common/images/lf-16.png" type="image/png">
 <TITLE>lf349, UNIXBasics: Das Geheimnis der Mountpunkte</TITLE>
<style type="text/css">
<!--
 td.top {font-family: Arial,Geneva,Verdana,Helvetica,sans-serif; font-size:12 }
 pre { font-family:monospace,Courier }
 pre.code { font-family:monospace,Courier;background-color:#aedbe8; }
 p.cl { color:#EE9500 }
 table.left { margin-right:0.3cm }
 a.nodec { text-decoration:none }
 p.trans { font-size:8pt; text-align:right }
 p.clbox { width:50%; alignment:center; background-color:#FFD700; 
           border-style:none; border-width:medium; border-color:#FFD700; 
           padding:0.5cm;  text-align:center }
 p.code { width:80%; alignment:center; background-color:#aedbe8; 
          border-style:none; border-width:medium; border-color:#aedbe8; 
          padding:0.1cm;  text-align:left }
 p.foot { background-color:#AAAAAA; color:#FFFFFF; border-style:none; 
          border-width:medium; border-color:#AAAAAA; padding:0.5cm ; 
          margin-top:0.1cm; margin-right:1cm; margin-left:1cm; 
          text-align:center }
 div.tbbutton {
   background: #ddd;
   border-right: 1px solid #aaa;
   border-bottom: 1px solid #aaa;
   margin: 2px 5px 2px 5px;
   text-align: center;
   width: 20em;
   line-height: 1.2em;
   padding: 2px;
   font-size: 12px;
   white-space: nowrap;
   color: #555;
 }
 div.bbutton {
   background: #ddd;
   border-right: 1px solid #aaa;
   border-bottom: 1px solid #aaa;
   float: left;
   margin: 2px 5px 2px 5px;
   text-align: center;
   line-height: 1.2em;
   padding: 2px;
   font-size: 12px;
   white-space: nowrap;
   color: #555;
 }
-->
</style>
 
</HEAD>
<BODY bgcolor="#ffffff" text="#000000">
 <!-- this is generated html code. NEVER use this file for your
 translation work. Instead get the file with the same article number
 and .meta.shtml in its name. Translate this meta file and then
 use lfparser program to generate the final article -->
 <!-- lfparser can be obtained from http://main.linuxfocus.org/~guido/dev/lfparser.html -->

<!-- this is used by a number of tools:
 =LF=AUTHOR: Guido Socher
 =LF=CAT___: UNIXBasics
 =LF=TITLE_: Das Geheimnis der Mountpunkte
 =LF=NUMBER: 349
 =LF=ANAME_: article349.shtml
 =LF=PARSER: 2.50
 -->

<!-- 2pdaIgnoreStart -->

<!-- start navegation bar, current, style=2 -->
 <!-- top navegation bar -->
 <TABLE summary="topbar_1" cellspacing="0" cellpadding="0" border="0" align="center" width="90%">
   <TR bgcolor="#2e2292">
     <TD class="top"><TABLE summary="topbar_1_logo" cellspacing="0" cellpadding="0" border="0" width=
       "100%">
         <TR><TD width="319"><a href="../../index.shtml"><IMG src="../../common/images/logolftop_319x45.gif"
           alt="[LinuxFocus-icon]" width="319" height="45" align="left" 
           border="0"></a></TD>

           <TD class="top">
             <TABLE summary="topbar_1_links" width="100%">
               <TR align="right">
                 <TD class="top">
                 
                 <A class="nodec" href="../../index.shtml"><FONT color=
                 "#DDDDDD" size="2">&lt;--</FONT></A> &nbsp;| 
                 <A class="nodec" href="../map.html"><FONT color=
                 "#DDDDDD" size="2">Plan</FONT></A> &nbsp;| 
                 <A class="nodec" href="../indice.html"><FONT color=
                 "#DDDDDD" size="2">Index</FONT></A> &nbsp;| 
                 <A class="nodec" href="../Search/index.html"><FONT color=
                 "#DDDDDD" size="2">Suchen</FONT></A> </TD>
                 
               </TR>

               <TR align="right">
                 <TD class="top">
                   <HR width="100%" noshade size="1">
                 </TD>
               </TR>
             </TABLE>
           </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end top navegation bar -->
 <!-- blue bar -->
 <TABLE summary="topbar_2" cellspacing="0" cellpadding="0" border="0" align="center"
 width="90%">
   <TR bgcolor="#00ffff">
     <TD><IMG src="../../common/images/transpix.gif" width="1" height=
     "2" alt=""></TD>
   </TR>
 </TABLE>
 <!-- end blue bar -->
 <!-- bottom navegation bar -->
 <TABLE summary="topbar_3" cellspacing="0" cellpadding="0" border="0" align="center"
 width="94%">
   <TR bgcolor="#000000">
     <TD>
       <TABLE summary="topbar_3_links" cellspacing="0" cellpadding="1" border="0" width=
       "100%">
         <TR align="center">
           <TD WIDTH="20%"><A class="nodec" href="../News/index.shtml"><FONT color=
           "#FFFFFF">Nachrichten</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Archives/index.html"><FONT color=
           "#FFFFFF">Archiv</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Links/index.shtml"><FONT color=
           "#FFFFFF">Links</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../aboutus.html"><FONT color=
           "#FFFFFF">&Uuml;ber uns</FONT></A> </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end bottom navegation bar -->
<!-- stop navegation bar -->

<!-- SSI_INFO -->

<!-- tr_staticssi include virtual -->
<!-- tr_staticssi exec cmd -->
<!-- addedByLfdynahead ver 1.5 --><TABLE ALIGN="right" border=0><TR><TD ALIGN="right"><FONT SIZE="-1" FACE="Arial,Helvetica">Dieses Dokument ist verf&uuml;bar auf: <A href="../../English/September2004/article349.shtml">English</a> &nbsp;<A href="../../Castellano/September2004/article349.shtml">Castellano</a> &nbsp;<A href="../../ChineseGB/September2004/article349.shtml">ChineseGB</a> &nbsp;<A href="../../Deutsch/September2004/article349.shtml">Deutsch</a> &nbsp;<A href="../../Francais/September2004/article349.shtml">Francais</a> &nbsp;<A href="../../Italiano/September2004/article349.shtml">Italiano</a> &nbsp;<A href="../../Indonesian/September2004/article349.shtml">Indonesian</a> &nbsp;<A href="../../Russian/September2004/article349.shtml">Russian</a> &nbsp;<A href="../../Turkce/September2004/article349.shtml">Turkce</a> &nbsp;<A href="../../Polish/September2004/article349.shtml">Polish</a> &nbsp;</FONT></TD></TR></TABLE><br>
 


<!-- SSI_INFO STOP -->
<!-- 2pdaIgnoreStop -->

<!-- SHORT_BIO_ABOUT_THE_AUTHOR_AND_INDEX_START -->
<TABLE ALIGN="LEFT" BORDER="0" WIDTH="195" summary="about the author" class="left">
<TR>
<TD>

<img src="../../common/images/Guido-S.gif" alt=
    "[Photo of the Author]" height="164" width="173">
<BR>von  Guido Socher <a href="http://main.linuxfocus.org/%7Eguido/"><font size="1">(homepage)</font></a>
<BR><BR>
<I>&Uuml;ber den Autor:</I><BR>
<!-- aboutauthor_start -->
<p>Guido mag Linux wegen der Leute.
Es ist ein riesiges Projekt und irgendwie arbeiten alle Leute um
die Welt herum auf dasselbe Ziel zu: Linux jeden Tag ein bischen besser
zu machen.
<br>Linux ist leider jetzt so gro&szlig;, da&szlig; es auch die "B&ouml;sen" anzieht.
Leute, die nur Profit machen wollen und nichts zur&uuml;ckgeben.
Passt auf! Oft tauchen sie als kleines Unternehmen "f&uuml;r Linux" auf,
aber es sind eigentlich nur Opportunisten.

    
<!-- aboutauthor_stop -->
<!-- TRANSLATED_TO de -->
<!-- TRANSLATED_TO_STOP -->
<!-- INDEX_START -->
<BR><i>Inhalt</i>:
<UL>
  <LI><A HREF="#349lfindex0">Einf&uuml;hrung</A></LI>
  <LI><A HREF="#349lfindex1">So funktioniert's</A></LI>
  <LI><A HREF="#349lfindex2">Das filesystem busy Problem</A></LI>
  <LI><A HREF="#349lfindex3">Aber Windows kann's!?</A></LI>
  <LI><A HREF="#349lfindex4">Linux kann es auch!</A></LI>
  <LI><A HREF="#349lfindex5">Jedem die Erlaubnis geben, eine Dateisystem zu mounten</A></LI>
  <LI><A HREF="#349lfindex6">Laptops und nfs</A></LI>
  <LI><A HREF="#349lfindex7">Zusammenfassung</A></LI>
  <LI><A HREF="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=349">Talkback f&uuml;r diesen Artikel</A></LI>
</UL>

</TD></TR></TABLE>
<!-- INDEX_STOP -->
<!-- SHORT_BIO_ABOUT_THE_AUTHOR_AND_INDEX_STOP -->
<!-- HEAD_OF_THE_ARTICLE_START -->
<br>&nbsp;
<table border="0"><tr><td>
<H2>Das Geheimnis der Mountpunkte</H2>
 <img src="../../common/images2/illustration349.jpg" alt="mount"
    hspace="10">
<!-- ABSTRACT OF THE ARTICLE -->
<P><i>Zusammenfassung</i>:
<P>
<!-- articleabstract_start -->

Dieser Artikel erkl&auml;rt das Konzept der Mountpunkte, aber ich hoffe,
da&szlig; dieser Artikel auch einige Informationen hat, die f&uuml;r erfahrene Linuxbenutzer interessant sind.


    
<!-- articleabstract_stop -->

<br><!-- HR divider --><center><font color="#8282e0"><b>_________________ _________________ _________________</b></font></center><br>
</td></tr></table>
<!-- HEAD_OF_THE_ARTICLE_STOP -->
<!-- BODY_OF_THE_ARTICLE_START -->


    <A NAME="349lfindex0">&nbsp;</A>
<H2>Einf&uuml;hrung</H2>

Ich werde zuerst das Konzept des Mountens eines Dateisystems erkl&auml;ren
und dann  auf kompliziertere Funktionen eingehen. Wenn du meinst,
dass du dich schon gut mit Linux auskennst, kannst du den ersten Teil
&uuml;berspringen.

    <A NAME="349lfindex1">&nbsp;</A>
<H2>So funktioniert's</H2>

Unter Windows hat man bis heute das Problem, da&szlig; das Hinzuf&uuml;gen
eines neuen Laufwerkes die ganzen Namenskonventionen durcheinander
bringt. Was mal Laufwerk D: war, ist pl&ouml;tzlich E: und Benutzer wie
Software kommen durcheinander.
     <br>
    <br>
Unter Unix wird man diese Problem nie haben, da alle Platten
in den Verzeichnisbaum integriert sind. Man kann das sehen,
wenn man "mount" oder "df" tippt:

    <table>
      <tr>
        <td>
<pre class="code">
# df
Filesystem 1K-blocks    Used Available Use% Mounted on
/dev/hda1    9070728 4701180   3908768  55% /
/dev/hda3   24950428  683412  22999584   3% /home
none          257236       0    257236   0% /dev/shm

# mount
/dev/hda1 on / type ext3 (rw)
none on /proc type proc (rw)
none on /dev/shm type tmpfs (rw)
/dev/hda3 on /home type ext3 (rw)
</pre>
        </td>
      </tr>
    </table>
Hier haben wir zwei Partitionen, eine davon enth&auml;lt alles au&szlig;er
/home. Das ist die "root" Partition "/" und diese Partition ist
physikalisch mit hda1 verbunden. hda1 ist die erste Partition (1)
auf der ersten IDE-Platte (hda). Die dritte Partition (hda3) auf derselben Platte ist mit /home verbunden. Wenn man also nach /home geht,
dann greift man auf Dateien in hda3 zu. Man muss sich niemals Gedanken machen,
ob das jetzt D: oder E: oder ?? ist. Es ist immer ein Verzeichnis und
es bleibt immer gleich.

    <A NAME="349lfindex2">&nbsp;</A>
<H2>Das filesystem busy Problem</H2>

Linux puffert die Schreib- und Leseoperationen. Man merkt das, wenn
man ein USB-Key-Laufwerk mit Usb Version 1.1 benutzt und auf eine
gro&szlig;e Datei zugreift. Das erste Mal ist der Zugriff langsam, aber
beim zweiten Mal geht es sehr schnell und die Lampe am Laufwerk
leuchtet nicht.
    <br>
    <br>
Wegen dieser Funktion kann man die USB-Platte nicht einfach
entfernen. Man muss sie erst un-mounten. Bei normalen internen
Platten ist das nie ein Problem, aber es kann zu Problemen bei
USB und CDROM Laufwerken f&uuml;hren.
    <br>
    <br>
Wenn man z.B einen USB-Key unter /mnt/usb mountet und dann
"cd /mnt/usb" tippt, dann benutzt Bash dieses Dateisystem.
Versucht man nun aus einem anderen Shellfenster den USB-Key
zu unmounten (umount /mnt/usb), dann bekommt man die Fehlermeldung
"file system busy". Ein einfaches "cd" aus dem /mnt/usb Verzeichnis
heraus reicht aus und umount wird funktionieren. Manchmal hat
man jedoch vergessen, welche Shell oder welches Progamm das Dateisystem
noch benutzt. Frag deinen Computer! Er kann dir sagen, warum umount
nicht geht:
    <br>
    <br>
<pre class="code">
# fuser -m -u /mnt/usb
/mnt/usb:   1347c(root)  1348c(guido)  1349c(guido)
</pre>
Der fuser Befehl zeigt eine Liste von Prozessen, die noch ein Dateisystem benutzen. Nun kann man mit "ps auxw" checken, was das f&uuml;r Prozesse
sind oder man kann sie mit kill einfach beenden. Danach wird
umount funktionieren.

    <A NAME="349lfindex3">&nbsp;</A>
<H2>Aber Windows kann's!?</H2>

Warum nicht einfach den USB-key rausziehen? Nun, alte dos/win3.1
Computer konnte man einfach ausschalten. Ein Herunterfahren
war nicht n&ouml;tig. Zu dieser Zeit beschwerten sich oft meine Freunde, da&szlig;
man Linux erst herunterfahren mu&szlig;. Als Win95 kam, war das Problem
gel&ouml;st, denn die Leute hatten sich an das Herunterfahren gew&ouml;hnt.

    <A NAME="349lfindex4">&nbsp;</A>
<H2>Linux kann es auch!</H2>

Es gibt auch L&ouml;sungen f&uuml;r Linux, mit denen man einfach die Platte (USB-Key)
rausziehen kann. Mandrake Linux hat etwas, das sich supermount
nennt und es liefert genau die gleichen Funktionen (oder Probleme) wie
Windows. Ich kann supermount nicht empfehlen, da es zu Instabilit&auml;ten
und Verlust von Dateien f&uuml;hren kann.<br>
<br>
Es ist besser mtools (http://mtools.linux.lu/) zu benutzen.
mtools bietet Befehle, um auf Disketten, USB-Keys .... , im Prinzip jedes
Medium mit FAT Dateisystem, zuzugreifen, ohne das Dateisystem
zu mounten. <br><br>
... und so geht's:
<br>

    <ol>
      <li>
        Editiere /etc/mtools.conf und f&uuml;ge folgende Zeile hinzu:<br>
<pre>
drive u: file="/dev/sda1" # or sda4; some usb-stick have partition
                          # 4 created as factory default.
</pre>
        <br>
        <br>
      </li>

      <li>Nun mountet man /dev/sda1 nicht, sondern benutzt einfach:<br>
      mdir u:<br>
      um zu sehen, welche Dateien sich auf dem USB-Key befinden<br>
      <br>
      mcopy * u:<br>
      um alle Dateien aus dem augenblicklichen Verzeichnis auf
den USB-Key zu kopieren.
      <br>
      <br>
      mcopy u:\* .<br>
um alle Dateien von dem USB-Key in das augenblickliche Verzeichnis
zu kopieren (beachte den "\" vor der Wildcard).
      <br>
      <br>
      </li>
    </ol>
Die mtools sind sehr einfach zu benutzen.

    <A NAME="349lfindex5">&nbsp;</A>
<H2>Jedem die Erlaubnis geben, eine Dateisystem zu mounten</H2>

Normalerweise mu&szlig; man root sein, um ein Dateisystem zu mounten.
F&uuml;r Cdrom-Laufwerke und USB-Keys macht es aber Sinn,  einem normalen
Benutzer die Rechte f&uuml;r mount/umount zu geben. Alles was man dazu
machen mu&szlig;, ist eine Zeile wie die folgende in /etc/fstab einzutragen:
<pre class="code">
# dev     mount point    fs type   flags
/dev/sda1  /mnt/usb      auto      noauto,user 0 0
</pre>
Diese Zeile sagt, da&szlig; sda1 (die erste Partition auf der ersten SCSI
Platte, USB Storage Platten werden als SCSI Platten abgebildet) nicht
automatisch beim Booten gemountet werden soll (noauto) und kann von
jedem (user) ge-mountet/umounted werden. Das FS-type Feld steht auf
auto, so da&szlig; man vfat, ext2 oder andere Dateisysteme mounten kann,
ohne etwas zu &auml;ndern.

    <A NAME="349lfindex6">&nbsp;</A>
<H2>Laptops und nfs</H2>

Das Netzwerkdateisystem NFS ist wirklich gut, wenn man ein
zentrales Backup von home-Verzeichnisen unterschiedlicher
Benutzer haben m&ouml;chte. Alles, was man dazu machen muss, ist
das /home Verzeichnis von einem zentralen NFS-Server zu mounten
und alle Benutzer haben Zugriff auf ihre Konfiguration und ihre
Daten von jedem Rechner im Netzwerk.
    <br>
    <br>
Was macht man aber mit mobilen Benutzern, die einen Laptop haben?
Keine backups?
    <br>
    <br>
Wenn man nicht mehr mit dem Netzwerk verbunden ist, dann ist auch
das home-Verzeichnis weg. Eine L&ouml;sung ist, mit rsync immer alle
Daten zu kopieren, aber das kann schnell zu Inkonsistenzen f&uuml;hren,
wenn man nicht wirklich diszipliniert ist. Oft braucht man unterwegs
nicht alle Daten. Ich finde es eine gute L&ouml;sung, ein zweites kleines
home-Verzeichnis zu haben, wo nur die Daten sind, die man unterwegs
braucht.
    <br>
    <br>
Wenn man ein Dateisystem (Platte oder NFS) an einem Verzeichnis,
das nicht leer ist, mountet, dann wird der Inhalt des Verzeichnises
unsichtbar und man sieht nur noch das gemountete Dateisystem.
<br><br>
Die L&ouml;sung sieht also so aus: Man erzeugt einen Mountpunkt f&uuml;r home
(mkdir /home) und legt in diesem Verzeichnis einen Softlink (ln -s) an,
der f&uuml;r den Benutzer, dem der Laptop geh&ouml;rt, auf das home-Verzeichnis
f&uuml;r unterwegs zeigt:
<pre class="code">
/home/guido -&gt; ../home_nonet/guido
</pre>
Wenn der Benutzer guido im Netzwerk ist, dann wird er sein normales
home-Verzeichnis benutzen und der Softlink ist unsichtbar. Ist er
unterwegs, dann sieht er /home_nonet/guido als /home/guido.
    <br>
    <br>
    Eine elegante L&ouml;sung.

    <A NAME="349lfindex7">&nbsp;</A>
<H2>Zusammenfassung</H2>

Einen Abstraktionslayer f&uuml;r die Hardware zu bauen, war immer
eines der Ziele von Unix. Mit mount/umount hat man das f&uuml;r
Dateisystem erreicht. Eine wirklich fortschrittliche und moderne Idee,
obwohl Unix viel &auml;lter ist als andere moderne PC Betriebssyteme.
  



<!-- BODY_OF_THE_ARTICLE_STOP -->
<!-- 2pdaIgnoreStart -->
<A NAME="talkback">&nbsp;</a>
<h2>Talkback f&uuml;r diesen Artikel</h2>
Jeder Artikel hat seine eigene Seite f&uuml;r Kommentare und R&uuml;ckmeldungen. Auf dieser Seite kann jeder eigene Kommentare abgeben und die Kommentare anderer Leser sehen:
<center>
    <table width="250" border=0><tr><td>
    <div class="tbbutton"><A class="nodec" href="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=349">&nbsp;Talkback Seite&nbsp;</a></div>
    </td></tr></table>
</center>

<br clear="all">
<HR size="2" noshade>
<table width="250" border=0><tr><td>
<div class="bbutton"><a class="nodec" href="../../index.shtml">&lt;--, LF Home</a></div>
</td><td>
<div class="bbutton"><a class="nodec" href="index.shtml">Zum index dieser Ausgabe</a></div>
</td></tr></table>
<br clear="all">
<HR size="2" noshade>
<!-- ARTICLE FOOT -->
<CENTER><TABLE WIDTH="98%" summary="footer">
<TR><TD ALIGN=CENTER BGCOLOR="#bdc6d5" WIDTH="50%">
<A HREF="../../common/lfteam.html">Der LinuxFocus Redaktion schreiben</A>
<BR><FONT COLOR="#1111aa"><a href="../../common/copy.html">&copy; Guido Socher</a><br>&quot;some rights reserved&quot; see <a href="../../license/index.shtml">linuxfocus.org/license/</a><br><a href="http://www.linuxfocus.org">http://www.LinuxFocus.org</a></FONT>
</TD>
<TD BGCOLOR="#bdc6d5">
<!-- TRANSLATION INFO -->
<font size=2>Autoren und &Uuml;bersetzer:</font>
<TABLE summary="translators">
  <tr><td><font size="2">en --&gt; -- : Guido Socher (<a href="http://main.linuxfocus.org/%7Eguido/"><font size="1">homepage</font></a>)</font></td></tr>
</TABLE>
</TD>
</TR></TABLE></CENTER>
<p><font size=1>2004-10-15, generated by lfparser version 2.50</font></p>
<!-- 2pdaIgnoreStop -->
</BODY>
</HTML>
