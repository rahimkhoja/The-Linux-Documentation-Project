<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>SMB HOWTO: Using Samba Across Routed Networks</TITLE>
 <LINK HREF="SMB-HOWTO-13.html" REL=next>
 <LINK HREF="SMB-HOWTO-11.html" REL=previous>
 <LINK HREF="SMB-HOWTO.html#toc12" REL=contents>
</HEAD>
<BODY>
<A HREF="SMB-HOWTO-13.html">Next</A>
<A HREF="SMB-HOWTO-11.html">Previous</A>
<A HREF="SMB-HOWTO.html#toc12">Contents</A>
<HR>
<H2><A NAME="sec-routers"></A> <A NAME="s12">12. Using Samba Across Routed Networks</A></H2>

<P>Andrew Tridgell states that SMB host browsing across routers is problematic.  Here are his suggestions to allow this:
<P>--------------------------------------------------------------
For cross-subnet (ie. routed) browsing you should do the
following. There are other methods but they are much more complex are
error prone:
<P>1) all computers that you want visible should use a single WINS server
(Samba or NT can do this)
<P>2) the master browser for each subnet must be either NT or
Samba. (Win9X doesn't communicate cross-subnet browse info
correctly)
<P>3) You should use the same workgroup name on all subnets. This is not
strictly necessary but it is the simplest way to guarantee
success. If you can't arrange this then you must organise for a way
for browse info to propogate between subnets. (It does *not* propogate
via WINS). It propogates via two mechanisms:
i) each browse master notices workgroup announcements from other
browse masters on the same broadcast domain
ii) each non-Win9X browse master contacts the global DMB for the
workgroup (typically the domain controller or a Samba box marked as
the domain master) and swaps full browse info periodically.
--------------------------------------------------------------
<P>Also, Rakesh Bharania points out that Cisco routers can be configured to forward SMB traffic in a way that allows browsing.  His suggestion is to configure the router interface which hosts SMB clients with a command like this:
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
ip helper-address x.x.x.x
</PRE>
<HR>
</CODE></BLOCKQUOTE>
<P>where x.x.x.x is the IP address of the SMB server.
<P>
<P>
<HR>
<A HREF="SMB-HOWTO-13.html">Next</A>
<A HREF="SMB-HOWTO-11.html">Previous</A>
<A HREF="SMB-HOWTO.html#toc12">Contents</A>
</BODY>
</HTML>
