<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>UMSDOS HOW-TO: How to boot a Umsdos system</TITLE>
 <LINK HREF="UMSDOS-HOWTO-6.html" REL=next>
 <LINK HREF="UMSDOS-HOWTO-4.html" REL=previous>
 <LINK HREF="UMSDOS-HOWTO.html#toc5" REL=contents>
</HEAD>
<BODY>
<A HREF="UMSDOS-HOWTO-6.html">Next</A>
<A HREF="UMSDOS-HOWTO-4.html">Previous</A>
<A HREF="UMSDOS-HOWTO.html#toc5">Contents</A>
<HR>
<H2><A NAME="s5">5. How to boot a Umsdos system</A></H2>

<P>
<P>
<H2><A NAME="ss5.1">5.1 Loadlin</A>
</H2>

<P>
<P>The package lodlin15.tgz available from sunsite.unc.edu
in <CODE>/pub/Linux/system/Bootutils</CODE>. This utility
is particularly suited to boot a <EM>Umsdos</EM> system. Generally
all you need to do is
<P>
<BLOCKQUOTE><CODE>
<PRE>
        Boot DOS
        C:>loadlinx zimage root=D:
        
</PRE>
</CODE></BLOCKQUOTE>
<P>where zimage is a normal kernel image (compressed) simply copied
somewhere in the DOS drive. <CODE>D:</CODE> is the DOS drive where you
have installed <EM>Linux</EM>.
<P>
<H2><A NAME="ss5.2">5.2 From a floppy</A>
</H2>

<P>
<P>Booting a <EM>Umsdos</EM> system from a floppy is not different from
booting a <EM>Ext2</EM> system. You need a kernel zImage file properly
initialize to locate your root <EM>Umsdos</EM> partition. This
is generally achieved using the command <CODE>rdev</CODE>. The following
sequence will initialize a zImage and put it on a floppy.
<P>
<BLOCKQUOTE><CODE>
<PRE>
        rdev zImage /dev/hda1
        rdev -R zImage 0
        dd if=zImage bs=8192 of=/dev/fd0
        
</PRE>
</CODE></BLOCKQUOTE>
<P>If this looks confusing, just format a boot-able DOS floppy
and put the following component on it.
<P>
<UL>
<LI>loadlin.exe</LI>
<LI>loadlinx.exe</LI>
<LI>zimage</LI>
</UL>
<P>and setup the autoexec.bat like this
<P>
<BLOCKQUOTE><CODE>
<PRE>
        loadlinx zimage rw root=C:
        
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H2><A NAME="ss5.3">5.3 LILO</A>
</H2>

<P>
<P>LILO, the official <EM>Linux</EM> boot loader can also be used
to boot a <EM>Umsdos</EM> system. I have no experience with it
though. Since 1.1.60, it should work. Please email if you know
something.
<P>
<H2><A NAME="ss5.4">5.4 How to defragment a <EM>Umsdos</EM> partition</A>
</H2>

<P>
<P>It can be done using any popular DOS tool. There is nothing
particular about file produced by <EM>Umsdos</EM>. And <EM>Umsdos</EM>
do not expect anything particular (directory layout, directory
entry sequence, etc...) from the file system under it.
<P>As far as I know, there is no <EM>Linux</EM> tool to achieve this.
<P>
<H2><A NAME="ss5.5">5.5 Advance tricks</A>
</H2>

<P><EM>Umsdos</EM> rely on the <CODE>--linux-.---</CODE> which rely on the
<EM>DOS</EM> directory. Some users may want to experiment
a bit. The utility <CODE>udosctl</CODE> part of the umsdos_progs
package (containing <CODE>umssync</CODE> and <CODE>umssetup</CODE>) allows
basic directory operation (listing, deletion) independently
on the <CODE>--linux-.---</CODE> and the <EM>DOS</EM> directory.
<P>
<P>
<HR>
<A HREF="UMSDOS-HOWTO-6.html">Next</A>
<A HREF="UMSDOS-HOWTO-4.html">Previous</A>
<A HREF="UMSDOS-HOWTO.html#toc5">Contents</A>
</BODY>
</HTML>
