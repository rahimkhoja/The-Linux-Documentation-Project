<HTML
><HEAD
><TITLE
>Surviving a Reboot</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="The Linux NIS(YP)/NYS/NIS+ HOWTO"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Creating and Updating NIS maps
"
HREF="maps.html"><LINK
REL="NEXT"
TITLE="Changing passwords with rpasswd
"
HREF="rpasswdd.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>The Linux NIS(YP)/NYS/NIS+ HOWTO</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="maps.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="rpasswdd.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="REBOOT"
></A
>12. Surviving a Reboot</H1
><P
>Once you have NIS correctly configured on the server and client, you do need
to be sure that the configuration will survive a reboot.</P
><P
>There are two separate issues to check: the existence of an init script and
the correct storage of the NIS domain name.</P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN568"
></A
>12.1. NIS Init Script</H2
><P
>In your version of Linux, you need to check your directory of init scripts,
typically <TT
CLASS="FILENAME"
>/etc/init.d</TT
>, <TT
CLASS="FILENAME"
>/etc/rc.d/init.d</TT
> or <TT
CLASS="FILENAME"
>/sbin/init.d</TT
> to be sure there is a
startup script there for NIS. Usually this
file is called <TT
CLASS="FILENAME"
>ypbind</TT
> or <TT
CLASS="FILENAME"
>ypclient</TT
>.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN576"
></A
>12.2. NIS Domain Name</H2
><P
>Perhaps the greatest issue that some people have with NIS is ensuring that
the NIS domain name is available after a reboot. According to Solaris 2.x,
the NIS domain name should be entered as a single line in:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>   /etc/defaultdomain</PRE
></FONT
></TD
></TR
></TABLE
><P
>However, most Linux distributions does not seem to use this file.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN581"
></A
>12.3. Distribution-specific Issues</H2
><P
>At this time, the following information is known about how various Linux
distributions handle the storage of the NIS domainname.</P
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN584"
></A
>12.3.1. Caldera 2.x</H3
><P
>Caldera uses the file <TT
CLASS="FILENAME"
>/etc/nis.conf</TT
> which has the same format
as the normal <TT
CLASS="FILENAME"
>/etc/yp.conf</TT
>.</P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN589"
></A
>12.3.2. Debian</H3
><P
>Debian appears to follow Sun's usage of <TT
CLASS="FILENAME"
>/etc/defaultdomain</TT
>.</P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN593"
></A
>12.3.3. Red Hat Linux 6.x, 7.x, 8.x and 9</H3
><P
>Create or modify the variable <B
CLASS="COMMAND"
>NISDOMAIN</B
> in the file
<TT
CLASS="FILENAME"
>/etc/sysconfig/network</TT
>.</P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN598"
></A
>12.3.4. SuSE Linux 6.x and 7.x</H3
><P
>Modify the variable <B
CLASS="COMMAND"
>YP_DOMAINNAME</B
> in <TT
CLASS="FILENAME"
>/etc/rc.config</TT
> and then run the command <B
CLASS="COMMAND"
>SuSEconfig</B
>.</P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN604"
></A
>12.3.5. SuSE Linux 8.x and later</H3
><P
>Since version 8.0 SuSE Linux also follow Sun's usage of
<TT
CLASS="FILENAME"
>/etc/defaultdomain</TT
>.</P
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="maps.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="rpasswdd.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Creating and Updating NIS maps&#13;</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Changing passwords with rpasswd&#13;</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>