<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>Ftape-HOWTO: Hardware support</TITLE>
 <LINK HREF="Ftape-HOWTO-7.html" REL=next>
 <LINK HREF="Ftape-HOWTO-5.html" REL=previous>
 <LINK HREF="Ftape-HOWTO.html#toc6" REL=contents>
</HEAD>
<BODY>
<A HREF="Ftape-HOWTO-7.html">Next</A>
<A HREF="Ftape-HOWTO-5.html">Previous</A>
<A HREF="Ftape-HOWTO.html#toc6">Contents</A>
<HR>
<H2><A NAME="s6">6. Hardware support</A></H2>

<P>
<P>
<H2><A NAME="supp_drives"></A> <A NAME="ss6.1">6.1 Supported tape drives</A>
</H2>

<P>
<P>All drives that are both QIC-117 compatible <EM>and</EM> one of the
QIC-40, 80, 3010, and 3020 standards should work.  QIC-WIDE and Travan
drives are also supported (TR-1 is just QIC-80 with 8mm tapes, while
TR-2 and TR-3 is a.k.a QIC-3010 and 3020 respectively). Iomega Ditto 2GB
and Ditto Max drives are supported, too, though they no longer conform
to the QIC standards in every respect. Some parallel port tape drives
are supported as well.
<P>Some of the comments given below about possible problems with certain
tape drives are very old, and I don't have access to all of the
hardware, so I couldn't check everything.
<P>Some of the reports below have been commented by me
(&lt;heine@math1.rwth-aachen.de&gt;) like this:
<P>
<BLOCKQUOTE>
This is a comment.
</BLOCKQUOTE>
<P>Currently, the list of drives that are known to work with
<CODE>ftape</CODE> is:
<P>
<DL>
<DT><B>Alloy Retriever 250</B><DD><P>
<P>
<DT><B>Archive 5580i, XL9250i</B><DD><P>
<P>
<DT><B>Colorado DJ-10, DJ-20 (aka: Jumbo 120, Jumbo 250)</B><DD><P>
<P>
<DT><B>Colorado 1400</B><DD><P>&lt;kosowsky@bellini.harvard.edu&gt; reported a problem doing a 1G
backup using taper.
<P>
<DT><B>Colorado Trakker parallel port tape drive</B><DD><P>
<P>Support added by Jochen Hoenicke
&lt;Jochen.Hoenicke@Informatik.Uni-Oldenburg.DE&gt;.
<P>
<DT><B>HP Colorado T1000</B><DD><P>
<BLOCKQUOTE>
The problem reports are probably totally out-dated. In particular, the
<CODE>zftape</CODE> the people talk about doesn't exist any more, and the
<CODE>ftape</CODE> driver is the very <CODE>ftape-2.08</CODE>.
</BLOCKQUOTE>
<P>Works with 3M Travan 400M (TR-1) tapes with 120M tapes.  Also reported
that mt dies, but with backups using tar it works ok.  With cpio,
ftape is recommended rather than zftape.
(&lt;millner@millner.bevc.blacksburg.va.us&gt;)
<P>Problems have been reported with the drive continually stopping and
starting with zftape (&lt;75104.1756@compuserve.com&gt;).  This appears
to be a problem with the tape going too fast for the computer; the DMA
buffers are getting flushed before getting filled again.  Newer
versions of zftape don't do this any more is a suitably fast backup
program or large DMA buffers are used
(&lt;millner@millner.bevc.blacksburg.va.us&gt;).
<P>
<DT><B>Conner C250MQ(T)</B><DD><P>The 250Q is reported to generate write error and frequent
repositioning. (Frank Stuess at Nacamar Data Communications)
<P>
<BLOCKQUOTE>
Write errors need not be caused by the tape drive, but also by bad
tape cartridges. Frequent repositioning can be caused by bad
cartridges, too, but can also be caused by overrun errors which would
indicate that the FDC and DMA controller have problems to talk to each
other.
</BLOCKQUOTE>
<P>
<DT><B>Conner TSM420R, TSM850R</B><DD><P>The 400 and 800 models only work with TR-1 tapes.
<P>
<BLOCKQUOTE>
I don't know whether it was meant that named drives doesn't work with
ordinary 120MB DC-2120 cartridges, or that TR-3 tapes can't be
read. The tape drives weren't designed for the latter. So what.
</BLOCKQUOTE>
<P>
<DT><B>Conner TST3200R</B><DD><P>Works with TR-3 tapes at 1Mbps (ie. 1600M capacity only).  Wirks with
QIC-WIDE 400M tapes (Sony 5122's?)  (&lt;chris@cs.wmich.edu&gt;).
Works with TR3, QIC-3010, and QIC-3020 tapes.  Comes with a 2MB FDC
which the Promise 2300+ 1Mbps controller works
(&lt;kjh@pollux.usc.edu&gt;).
<P>Reported that the floppy disk can no longer read low-density floppies.
May have to fiddle with IRQ/ports/dma channels
(&lt;chris@yakkocs.wmich.edu&gt;).
<P>
<BLOCKQUOTE>
The TST3200R works well with <CODE>ftape</CODE>.
</BLOCKQUOTE>
<P>
<DT><B>Conner TST800R</B><DD><P>The TST800R works with TR-1, Sony QW5122F (210M) and DC2120 tapes.
<P>
<BLOCKQUOTE>
Works well with <CODE>ftape</CODE> since <CODE>ftape-2.07</CODE> at least. Used it
myself until the drive died with a melted transistor. Probably caused
by over-heating it previously.
</BLOCKQUOTE>
<P>
<DT><B>Conner CTT3200</B><DD><P>
<P>The CTT3200 is supposedly identical to the Iomega Ditto 3200.  It
works with the supplied 2Mbps controller, but reported not to work
under DOS on some machines. (&lt;jmorris@dtx.net&gt;)
<P>
<DT><B>Conner 1.7G Tapestor (TSM1700R)</B><DD><P>
<P>Works with QIC-WIDE tapes (&lt;pschmidt@slip.net&gt;).  Partially works
with QIS-3200.  Using the HSC-2 controller, the DMA channel needs to
be changed (incremented by 1, channel2?, Modify the Makefile).  You
then need to modify the ftape Makefile to reflect this change.
However, ftape seems to be a bit flaky with this (no version number
supplied) (&lt;ttait@tiac.net&gt;).  It may not work at 2Mbps
(QIC-3020) with the HSC controller.  The tape died with a messages
like "dumb tape stop" and has since been unreliable
(&lt;ttait@tiac.net&gt;).
<P>
<BLOCKQUOTE>
No recent informations available
</BLOCKQUOTE>
<P>
<DT><B>Escom or Archive (Hornet) 31250Q</B><DD><P>
<P>
<DT><B>Exabyte EXB-1500</B><DD><P>Work with QIC-3010 tapes.
<P>
<DT><B>Exabyte TR-3</B><DD><P>
<DT><B>Irwin 80SX, Insight 80Mb</B><DD><P>
<P>
<DT><B>Iomega 250</B><DD><P>
<P>
<DT><B>Iomega Ditto Tape Insider 420, 1700</B><DD><P>
<P>
<DT><B>Iomega Ditto Tape Insider 3200</B><DD><P>This is the unit, that I use.  The default jumper settings don't work.
Leave the irq and ioport address at the default (6 and 0x370,
respectfully), but change the DMA from 3 to 2. (Kevin Johnson
&lt;kjj@pobox.com&gt;).
<P>
<BLOCKQUOTE>
Refer to the file <CODE>MCONFIG</CODE> of recent <CODE>ftape</CODE> distributions for
other suggestions for ioport, irq and DMA channel.
</BLOCKQUOTE>
<P>May require the having <CODE>{0x08882, 80, wake_up_colorado, "Iomega
3200"},</CODE> added to <CODE>vendors.h</CODE> on older versions of <CODE>ftape</CODE>.
<P>Problems reported with ftape 2.07 and kernel 1.12.13.  With all sorts
of combinations of accelerator, etc, the drive may (on some systems)
only be accessed once (&lt;erwin@box.nl&gt;).  Also, after the first
access, the next use of the tape says it is write protected
(&lt;erwin@box.nl&gt;, &lt;M.J.Ammerlaan@dutiwy.twi.tudelft.nl&gt;).
<P>There has been one report of a problem where the tape got wound off
the end of the spool.
<P>
<BLOCKQUOTE>
This may be caused by a dirty EOT sensor, and need not be a real
hardware bug (except when it was a bug that dirtied the EOT sensor
...)
</BLOCKQUOTE>
<P>Another problem has been reported with writing archives (with dd) to
the tape.  It may start fine, but when the driver catches up with dd,
it stops the tape and rewinds it to the beginning.  Then it starts
winding on through the tape ad infinitum.  It appears to occur when
the driver asks the tape to pause which should cause the tape to move
back by 3 segments, but instead is moves back to the beginning of the
tape.  A bug fix submitted is reported to not solve the problem.
<P>
<BLOCKQUOTE>
Should have been fixed somewhere between <CODE>ftape-3.00</CODE> and
<CODE>ftape-4.00</CODE>. Unluckily, the fast-skipping facilities of all Iomega
floppy tape drives are <B>really</B> poor. Recent <CODE>ftape</CODE> versions
work around this problem. I suggest getting the latest version of the
<CODE>ftape</CODE> driver when you experience this problem.
</BLOCKQUOTE>
<P>
<DT><B>Iomega Ditto 800 Insider</B><DD><P>Works with Travan TR1, TR2, or DC2120 tapes
(&lt;klein@informatik.uni-rostock.de&gt;).
<P>
<DT><B>Iomega Ditto 2GB</B><DD><P>Support added by Jochen Hoenicke
&lt;Jochen.Hoenicke@Informatik.Uni-Oldenburg.DE&gt; to <CODE>ftape-3.xx</CODE>
and later.
<P>Can't format cartridges, writing is only possible with special Ditto
2GB cartridges (hardware limitation, not a lacking feature of
<CODE>ftape</CODE>).
<P>
<DT><B>Iomega Ditto Max</B><DD><P>
<DT><B>Iomega Ditto Max Pro</B><DD><P>Supported since <CODE>ftape-4.00</CODE>. Thanks to Tim Jones
&lt;tjones@estinc.com&gt;.
<P>Can't format cartridges, writing is only possible with special Ditto Max
cartridges (hardware limitation, not a lacking feature of <CODE>ftape</CODE>)
<P>I wasn't able to get the Ditto Max to work with any other device than
<CODE>/dev/[n]qft0</CODE>. I don't know whether this is a feature of the
Ditto Max or the Ditto EZ controller I had plugged the Ditto Max into.
<P>
<H4>Comment</H4>
You don't need to buy a <CODE>Ditto Max Pro</CODE> to use the 5/10GB
cartridges. With <CODE>ftape</CODE> there is no real difference between the
<CODE>Ditto Max</CODE> and the <CODE>Ditto Max Pro</CODE>.
<P>
<DT><B>Iomega Ditto 800/3200/2GB/Max/Max Pro Easy (parallel port)</B><DD><P>Supported since <CODE>ftape-4.00</CODE> with the <CODE>bpck-fdc</CODE> FDC driver.
<P>
<DT><B>Mountain FS8000</B><DD><P>
<P>
<DT><B>Reveal TB1400</B><DD><P>
<P>Reported not to work with kernel 1.3.79 and ftape (no version given)
or with kernel 1.2.13 and zftape 1.04
(&lt;colin@colina.demon.co.uk&gt;).
<P>
<BLOCKQUOTE>
The mentioned <CODE>ftape</CODE> driver versions are out of date. If you still
have such a beast try the more recent versions of the <CODE>ftape</CODE>
driver.
</BLOCKQUOTE>
<P>
<DT><B>Summit SE 150, SE 250</B><DD><P>
<P>
<DT><B>Tallgrass FS300</B><DD><P>If you have a Tallgrass FS300 and an AHA1542B, you need to increase
the bus-on / bus-off time of the 1542B.  Antti Virjo
(<CODE>&lt;klanvi@uta.fi&gt;</CODE>), says that changing
<CODE>CMD_BUSON_TIME</CODE> to 4 and <CODE>CMD_BUSOFF_CMD</CODE> to 12 in
<CODE>linux/drivers/scsi/aha1542.c</CODE> will do the trick.
<P>
<DT><B>Teac 800</B><DD><P>
<P>
<DT><B>Memorex tape drive backup system</B><DD><P>
<P>
<DT><B>Wangtek 3040F, 3080F</B><DD><P>
<P>
</DL>
<P>You can always check out the newest list of drives that are recognised
by <CODE>ftape</CODE>, by looking in the file <CODE>vendors.h</CODE> in the <CODE>ftape</CODE>
distribution.
<P>Although I do not want to endorse one drive type over another, it has
been reported that the Colorado DJ-20 drive is rather noisy, when
compared to, say, a Conner C250MQ drive ('tis said that the Colorado
is 5-10 times as noisy as the Conner drive. Since I have neither, I
can't tell for sure).
<P>
<BLOCKQUOTE>
If you have a drive that works fine, but it is not listed here, or if
you have corrections to the above information, please send a mail to
the HOWTO maintainer (<CODE>&lt;heine@math1.rwth-aachen.de&gt;</CODE>).
</BLOCKQUOTE>
<P>
<H2><A NAME="ss6.2">6.2 Supported special controllers</A>
</H2>

<P>
<P>These dedicated high-speed tape controllers are supported by
<CODE>ftape</CODE>:
<P>
<UL>
<LI> Colorado FC-10, FC-20</LI>
<LI> Mountain MACH-2</LI>
<LI> Iomega Tape Accelerator II</LI>
<LI> 2Mbps controllers (using the i82078-1 fdc)</LI>
<LI> Iomega Ditto EZ 4Mbps PnP controller</LI>
</UL>
<P>
<H3>Colorado FC-10, FC-20</H3>

<P>
<P>Support for the FC-10 controller has been merged into the <CODE>ftape</CODE>
driver in version 1.12. See the <CODE>RELEASE-NOTES</CODE> and the
<CODE>Makefile</CODE> files in the <CODE>ftape</CODE> distribution.  Since of version
2.03 of <CODE>ftape</CODE>, the FC-20 controller will work, but only at
1Mbit/sec (check the Release notes!).
<P>
<H3>Mountain MACH-2</H3>

<P>
<P>The support for the MACH-2 controller was added in <CODE>ftape-1.14d</CODE>.
<P>
<H3>Iomega Tape Accelerator II</H3>

<P>
<P>To use the Iomega Tape Accelerator II (<B>not</B> to be mistaken as the
Iomega Ditto Dash!), use <CODE>-DMACH2</CODE>, and set the right settings for
I/O base, IRQ and DMA.  This works (by the empirical testing of Scott
Bailey 
<A HREF="mailto:sbailey@xcc.mc.xerox.com">&lt;sbailey@xcc.mc.xerox.com&gt;</A>), with at least
<CODE>ftape-2.02</CODE>.
<P>
<H3>Iomega Ditto Dash and other 2Mbps controllers</H3>

<P>
<P>The Iomega Ditto Dash, and all other known 2Mbps controllers, use the
Intel 82078-1 chip, which can run at 2Mbps. This is supported properly
since <CODE>ftape-3.00</CODE>.
<P>
<H3>Iomega Ditto EZ PnP controller</H3>

<P>
<P>This controller requires the use of e.g. the <CODE>isapnptools</CODE> package to 
configure it. You may get it from
<P>
<A HREF="http://www.roestock.demon.co.uk/isapnptools/">http://www.roestock.demon.co.uk/isapnptools/</A><P>The controller will cause too many overrun errors when used at the
highest possible speed of 4Mbps. Neither Tim Jones
&lt;tjones@estinc.com&gt; nor I &lt;heine@math1.rwth-aachen.de&gt;
have been able to find but a single system which could run the
controller at 4Mbps. 3Mbps seems to  be fine.
<P>If you configure the Ditto EZ to use DMA 2 (the DMA channel used by
the floppy controller) then your floppy drive will no longer work. It
doesn't help to disable the controllers DMA gate (as is the case with
other hight speed controllers) so this can't be helped from inside
<CODE>ftape</CODE>.
<P>
<H2><A NAME="unsupp_drives"></A> <A NAME="ss6.3">6.3 Unsupported tape drives</A>
</H2>

<P>
<P>
<UL>
<LI> Some parallel port floppy tape drives still not work. Others do.</LI>
<LI> Irwin AX250L / Accutrak 250. (not a QIC-80 drive)</LI>
<LI> IBM Internal Tape Backup Unit (identical to the Irwin AX250L drive)</LI>
<LI> COREtape light</LI>
</UL>
<P>The Irwin AX250L (and the IBM Internal Tape Backup Unit) does not work
the <CODE>ftape</CODE>.  This is because they only support QIC-117, but
not the QIC-80 standard (they use Irwin's proprietary ``servoe
(Rhomat)'' format).  I know nothing about the Rhomat format, nor where
to get any info on it.  Sorry.
<P>The COREtape light does not accept the initialisation commands, we're
feeding it. This pretty much leaves the drive unusable.
<P>
<H2><A NAME="ss6.4">6.4 Using an external tape drive with <CODE>ftape</CODE></A>
</H2>

<P>
<P>If you have a floppy controller which has a female DB37 connector on
the bracket (and some means of delivering power to the drive), you can
use it with <CODE>ftape</CODE>.  OK, that sentence was not very
obvious. Let's try it this way: Some FDC's (the very ancient one's),
have a DB37 connector on the bracket, for connecting to external
floppy drives.
<P>If you make a suitable cable from the DB37 connector (on the FDC) to
your external tape drive, you can get <CODE>ftape</CODE> to control your tape
drive.
<P>This is because that from a program's view there is no difference
between the internal and the external connectors. So, from
<CODE>ftape</CODE>'s point of view, they are identical.
<P>
<UL>
<LI> Pins 20-37: GROUND</LI>
<LI>    1: +12 Volt (POWER)</LI>
<LI>    2: +12 Volt return (GROUND)</LI>
<LI>    3: +5 Volt return (GROUND)</LI>
<LI>    4: +5 Volt (POWER)</LI>
<LI>    5: 2</LI>
<LI>    6: 8</LI>
<LI>    7: 10</LI>
<LI>    8: 12</LI>
<LI>    9: 14</LI>
<LI>    10: 16</LI>
<LI>    11: 18</LI>
<LI>    12: 20</LI>
<LI>    13: 22</LI>
<LI>    14: 24</LI>
<LI>    15: 26</LI>
<LI>    16: 28</LI>
<LI>    17: 30</LI>
<LI>    18: 32</LI>
<LI>    19: 34</LI>
</UL>
<P>The power connector is of the "mini" type, sitting on 3.5" floppy
drives.  The idea appears to be that you plug one of the power
connectors from the PSU to this connector on the board.  If you want
to use just a single cable, you might want to get a 50 wire cable, and
use multiple wires for the power lines (and ground, for that matter).
<P>I have received no confirmation from anyone that this works.  Let me
know your results if you try it.
<P>
<P>
<H2><A NAME="pci-boxes"></A> <A NAME="ss6.5">6.5 PCI motherboards and <CODE>ftape</CODE></A>
</H2>

<P>
<P>Unfortunately, some PCI motherboards cause problems when running
<CODE>ftape</CODE>.  Some people have experienced that <CODE>ftape</CODE> would not
run in a PCI based box, but ran flawlessly in a normal ISA based 386DX
machine.  If you have such a problem, please read the <CODE>README.PCI</CODE>
file in the <CODE>ftape</CODE> distribution.
<P>
<BLOCKQUOTE>
A floppy disk controller needs the ISA bus DMA controller for its
memory transfers. Seemingly the ISA DMA controller doesn't get
control over the memory bus often enough on some PCI based systems.
</BLOCKQUOTE>
<P>
<P>
<P>
<P>
<HR>
<A HREF="Ftape-HOWTO-7.html">Next</A>
<A HREF="Ftape-HOWTO-5.html">Previous</A>
<A HREF="Ftape-HOWTO.html#toc6">Contents</A>
</BODY>
</HTML>
