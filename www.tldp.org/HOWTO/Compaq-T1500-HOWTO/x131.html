<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML
><HEAD
><TITLE
>Editing FLASH image and other tools</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="CompaqT1500-Linux HOWTO"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="The one true way"
HREF="debian.html"><LINK
REL="NEXT"
TITLE="XFree86"
HREF="x146.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>CompaqT1500-Linux HOWTO</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="debian.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x146.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="AEN131"
></A
>5. Editing FLASH image and other tools</H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN133"
></A
>5.1. Editing Flash image</H2
><P
>The T1500s come with a utility called 'makeflash' (which lives in /sbin and 
  also comes on the CD). You can use this to generate a flash filesystem image 
  from a tar.gz, which can either be local, or an NFS / SMB file. This utility 
  generates all the necessary checksums too.</P
><P
>1. Flashing with a Slackware 8.0 image doesn't work, even with the calculated checksum. This suggests to me that there is a further check made on vmlinux itself.</P
><P
>2. Having dissected the leo.boot and vmlinux files supplied with the unit, 
  I
  suspect that leo.boot checks vmlinux for the string "xxxxyyyyWYSEwysexxxx"
  which is duly included in the custom kernel they use.</P
><P
>3. Leo.boot is in fact a Win CE related thing, with a queer bolt-on to allow
  linux boots. The normal Win CE leo.boot is about half the size. It uses
  the Eboot protocol for both ethernet and parallel port flash programming.
  There are some free Linux tools available to format images correctly for
  replacing leo.boot and also the OS image, but they rely on you supplying a
  suitably compiled object version of the bootrom.</P
><P
>Be careful when running it though - it is possible to flash the thing to a 
  state in which the only way to get it booting again is to use the Wyse-provided 
  DOS util / laplink cable setup.</P
><P
>Also, if anyone manages to get makeflash running on something which isn't the 
  terminal, could you let me know how? AFAICT, it's trying to link with a very 
  old glibc and libforms.You should be able to flash-update the T1500 a few 100,000 times.</P
><P
>Apparently the T1500 is a Wyse WT3X15, based on what they call the 'Leo Board'. 
  You can download a DOS reflashing util, and some docs for it from the UK Wyse 
  website, in the Customer Support section's firmware page. It requires a parallel 
  laplink cable.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN142"
></A
>5.2. Mounting FLASH</H2
><P
>After running the mknod commands below, you can then mount /dev/fnand and /dev/fnand1, which are both 16Mb flashfs partitions. You can also mount /dev/fram, and write 
to it, however the data disappeared after umounting &#38; remounting. It may have 
use as swap space.</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mknod /dev/fcard b 63 0
mknod /dev/fcard.fmt b 63 128
mknod /dev/fcard1 b 63 1
mknod /dev/fcard1.fmt b 63 129
mknod /dev/fnand b 62 0
mknod /dev/fnand.fmt b 62 128
mknod /dev/fnand1 b 62 2
mknod /dev/fnand1.fmt b 62 120
mknod /dev/fnor b 65 0
mknod /dev/fnor.2m b 65 128
mknod /dev/fram b 64 128</PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="debian.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x146.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>The one true way</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>XFree86</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>