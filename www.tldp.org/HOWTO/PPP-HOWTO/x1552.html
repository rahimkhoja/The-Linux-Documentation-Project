<HTML
><HEAD
><TITLE
>Setting up the PPP options files</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.52"><LINK
REL="HOME"
TITLE="Linux PPP HOWTO"
HREF="index.html"><LINK
REL="UP"
TITLE="Setting up a PPP server"
HREF="ppp-server.html"><LINK
REL="PREVIOUS"
TITLE="Setting up standard (shell access) dialup."
HREF="x1547.html"><LINK
REL="NEXT"
TITLE="Setting pppd up to allow users to (successfully) run it"
HREF="x1569.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
><A
HREF="http://www.linuxports.com/howto/ppp"
TARGET="_top"
>Linux PPP HOWTO</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x1547.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 28. Setting up a PPP server</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x1569.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="AEN1552"
>28.5. Setting up the PPP options files</A
></H1
><P
>You will need to set up the overall <TT
CLASS="LITERAL"
>/etc/ppp/options</TT
> with the
common options for all dial up ports. The options we use are:-</P
><P
>&#13;<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>asyncmap 0
netmask 255.255.254.0
proxyarp
lock
crtscts
modem</PRE
></TD
></TR
></TABLE
>&#13;</P
><P
>Note - we do NOT use any (obvious) routing - and in particular there is
no defaultroute option. The reason for this is that all you (as a PPP
server) are required to do is to route packets <I
CLASS="EMPHASIS"
>from</I
> the ppp client
out across your LAN/Internet and route packets <I
CLASS="EMPHASIS"
>to</I
> the client from
your LAN and beyond.</P
><P
>All that is necessary for this is a host route to the client machine and
the use of the 'proxyarp' option to pppd.</P
><P
>The 'proxyarp' option sets up (surprise) a proxy ARP entry in the PPP
server's ARP table that basically says 'send all packets destined for
the PPP client to me'. This is the easiest way to set up routing to a
single PPP client - but you cannot use this if you are routing between
two LANs - you must add proper network routes which can't use proxy ARP.</P
><P
>You will almost certainly wish to provide dynamic IP number allocation
to your dial up users. You can accomplish this by allocating an IP
number to each dial up port. Now, create a <TT
CLASS="LITERAL"
>/etc/ppp/options.ttyXX</TT
>
for each dial up port.</P
><P
>In this, simply put the local (server) IP number and the IP number that
is to be used for that port. For example</P
><P
>&#13;<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>kepler:slip01</PRE
></TD
></TR
></TABLE
>&#13;</P
><P
>In particular, note that you can use valid host names in this file (I
find that I only remember the IP numbers of critical machines and
devices on my networks - names are more meaningful)!</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x1547.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x1569.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Setting up standard (shell access) dialup.</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="ppp-server.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Setting pppd up to allow users to (successfully) run it</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>