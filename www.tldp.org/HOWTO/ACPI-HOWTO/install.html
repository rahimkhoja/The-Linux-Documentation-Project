<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML
><HEAD
><TITLE
>Installing from scratch</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="ACPI: Advanced Configuration and Power Interface"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="DSDT: Differentiated System Description Table"
HREF="dsdt.html"><LINK
REL="NEXT"
TITLE="Backups"
HREF="backups.html"></HEAD
><BODY
CLASS="sect1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>ACPI: Advanced Configuration and Power Interface</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="dsdt.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="backups.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="install"
></A
>7. Installing from scratch</H1
><P
>ACPI is constantly being revised. It is available in later versions
of the 2.4.x series kernel (2.4.22 and higher), and all 2.6.x series kernels. If you would
like to use a kernel before 2.4.22, you will need to patch your kernel
source to add ACPI functionality. If at all possible you should use the
latest stable version of the kernel. Patches are available from
<A
HREF="http://acpi.sourceforge.net"
TARGET="_top"
>acpi.sourceforge.net</A
>.
</P
><P
>Red Hat Fedora Core 2 now ships with ACPI enabled by default! This
is big progress for the ACPI development team. Congratulations to
everyone.</P
><DIV
CLASS="note"
><P
></P
><TABLE
CLASS="note"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Even the latest kernel will sometimes have minor bug fixes
	available as a patch. You should check the ACPI4Linux web site to see
	if there are any patches available.</P
></TD
></TR
></TABLE
></DIV
><P
>&#13;You need to get the patch that exactly matches the
version of the kernel that you are running. Since this is the 
<SPAN
CLASS="QUOTE"
>"install from scratch"</SPAN
> section I will assume you know exactly 
which kernel you will be installing.</P
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="kernelchoice"
></A
>7.1. Choosing a kernel</H2
><P
>This document was originally written for the 2.4.20 kernel and has
been updated since to include information about the 2.6.x series kernels.
At the time of this update the 2.6.x series kernels are proving easy for
some and harder for others. (I personally cannot properly power down my
computer with the 2.6.5 kernel.)</P
><P
>If you can, I would recommend waiting to upgrade your kernel to the
2.6.x series until more bugs are ironed out. There are a
<EM
>lot</EM
> of changes in the 2.6.x series kernel. When I
upgraded to 2.6.5 to update this document I ran into problems with my
wireless connection, my nvidia graphics card, and with ACPI. Your mileage
may vary. I personally had good success with the 2.4.20 with the latest
patch and the 2.4.22 kernel with no patch. A Google through your
distribution's mailing list, and the acpi-devel mailing list should help
you to pick the right kernel.</P
><DIV
CLASS="note"
><P
></P
><TABLE
CLASS="note"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>This document uses the 2.4.20 kernel as an example for 2.4.x
series kernels. Substitute your own kernel version as
appropriate.</P
></TD
></TR
></TABLE
></DIV
><P
>Regardless of which kernel you choose, if it is a kernel that
requires patching, it is important to use the latest version of the ACPI patch. Some
distributions have already patched their kernels. This is the case for
Debian, and may be the case for others. For more information on the 
patches that have been applied to the Debian kernel source package scan through:
<TT
CLASS="filename"
>/usr/src/kernel-source-<TT
CLASS="replaceable"
><I
>&#60;version&#62;</I
></TT
>/README.Debian</TT
>. If you are not using Debian
you will probably still be able to find an equivalent file for your
distribution.</P
><P
>A user on acpi-support confirmed that I shouldn't need any of the
additional patches that have been applied to the kernel to run my laptop.
If you are running a production-level server and/or are serving web pages
to the internet, you should really apply any additional
security patches.</P
><DIV
CLASS="warning"
><P
></P
><TABLE
CLASS="warning"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/warning.gif"
HSPACE="5"
ALT="Warning"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If a kernel has had other patches applied to it, you may have
problems applying the ACPI patch. Of course, an ACPI patch should not be
applied to a kernel that is already patched for ACPI. As long as there has
not been an ACPI patch applied to the kernel it should be possible to apply
one now. Depending on the patches applied, you may need to modify some of
the Makefiles for your patch to be successful. This is beyond my current 
grasp of reality so it is not covered in this document.</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="sect3"
><H3
CLASS="sect3"
><A
NAME="debianizedkernel"
></A
>7.1.1. Debian-ized pre-patched kernel</H3
><P
>If you would prefer to use a Debian-ized kernel instead of a fresh one,
<A
HREF="http://people.debian.org/~maxx"
TARGET="_top"
>maxx</A
> has provided a
pre-patched kernel-source package with the latest patch for the 2.4.20
kernel. This would be instead of downloading a
fresh (non-patched) kernel from <A
HREF="http://www.kernel.org"
TARGET="_top"
>www.kernel.org</A
>. 
He sent me an email with the following details:</P
><A
NAME="AEN129"
></A
><TABLE
BORDER="0"
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
CLASS="BLOCKQUOTE"
><TR
><TD
WIDTH="10%"
VALIGN="TOP"
>&nbsp;</TD
><TD
WIDTH="80%"
VALIGN="TOP"
><P
>I took the kernel-source 2.4.20-8 from unstable, removed the ACPI
changes [i.e. the old patch] and applied <TT
CLASS="filename"
>acpi-20021212-2.4.20.diff.gz</TT
> from acpi.sf.net since the vanilla 2.4.20 <EM
>HAS</EM
> several security leaks (ptrace, hash table, ...).</P
><P
>You can find the package at <A
HREF="http://people.debian.org/~maxx/kernel-source-2.4.20/"
TARGET="_top"
>http://people.debian.org/~maxx/kernel-source-2.4.20/</A
>
(I didn't upload the .orig.tar.gz since you can get it from any debian
mirror and the .deb is already big enough)</P
></TD
><TD
WIDTH="10%"
VALIGN="TOP"
>&nbsp;</TD
></TR
><TR
><TD
COLSPAN="2"
ALIGN="RIGHT"
VALIGN="TOP"
>--<SPAN
CLASS="attribution"
><A
HREF="http://people.debian.org/~maxx"
TARGET="_top"
>maxx</A
></SPAN
></TD
><TD
WIDTH="10%"
>&nbsp;</TD
></TR
></TABLE
><DIV
CLASS="warning"
><P
></P
><TABLE
CLASS="warning"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/warning.gif"
HSPACE="5"
ALT="Warning"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>I have not tested these packages. You may or may not have any luck
with them. Please don't email me asking about them, ask maxx instead.</P
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="dsdt.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="backups.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>DSDT: Differentiated System Description Table</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Backups</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>