<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML
><HEAD
><TITLE
>Customising the login screen</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="XFree Local Multi-User HOWTO"
HREF="index.html"><LINK
REL="UP"
TITLE="Tweaking it"
HREF="automation.html"><LINK
REL="PREVIOUS"
TITLE="Using independent sound cards "
HREF="automation_multy_snd-cards.html"><LINK
REL="NEXT"
TITLE="1st X server configuration file"
HREF="first_x_server.html"></HEAD
><BODY
CLASS="sect1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>XFree Local Multi-User HOWTO</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="automation_multy_snd-cards.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 7. Tweaking it</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="first_x_server.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="automation_login_screen"
></A
>7.2. Customising the login screen</H1
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="AEN1221"
></A
>7.2.1. Using xdm</H2
><P
>Copy <TT
CLASS="filename"
>/etc/X11/xdm/Xsetup_0</TT
> to <TT
CLASS="filename"
>/etc/X11/xdm/Xsetup_1</TT
>. For additional X servers, create the file(s) <TT
CLASS="filename"
>/etc/X11/xdm/Xsetup_[n]</TT
>, where n is the number of the X server starting from 0.</P
><P
></P
><OL
TYPE="1"
><LI
><P
>Modify the line containing the background image, to adjust the path to your image for the 2nd X server:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;....
if [ -r /usr/share/mdk/backgrounds/default.png -a -x /usr/bin/qiv ]; then
    /usr/bin/qiv -z /usr/share/mdk/backgrounds/default.png
else
    /usr/X11R6/bin/xsetroot -solid "#21449C"
fi
....
            </PRE
></FONT
></TD
></TR
></TABLE
><P
>Modified:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;....
if [ -r /usr/share/mdk/backgrounds/flower.jpg -a -x /usr/bin/qiv ]; then
    /usr/bin/qiv -z /usr/share/mdk/backgrounds/flower.jpg
else
    /usr/X11R6/bin/xsetroot -solid "#21449C"
fi
....
            </PRE
></FONT
></TD
></TR
></TABLE
><P
>You can also specify a different background color, with:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;....
#if [ -r /usr/share/mdk/backgrounds/flower.jpg -a -x /usr/bin/qiv ]; then
#    /usr/bin/qiv -z /usr/share/mdk/backgrounds/flower.jpg
#else
    /usr/X11R6/bin/xsetroot -solid "[your color]"
#fi
....
            </PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>Comment out the lines which may affect the primary X server, from:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;....
if [ -x /etc/X11/xinit.d/numlock ]; then
    /etc/X11/xinit.d/numlock &#38;
fi
....
            </PRE
></FONT
></TD
></TR
></TABLE
><P
>to </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;....
#if [ -x /etc/X11/xinit.d/numlock ]; then
#    /etc/X11/xinit.d/numlock &#38;
#fi
....
            </PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>Inform xdm about the existence of Xsetup_1 by modifying <TT
CLASS="filename"
>/etc/X11/xdm/xdm-config</TT
>:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;......
! The following three resources set up display :0 as the console.
DisplayManager._0.setup:        /etc/X11/xdm/Xsetup_0
DisplayManager._0.startup:      /etc/X11/xdm/GiveConsole
DisplayManager._0.reset:        /etc/X11/xdm/TakeConsole
DisplayManager._0.startAttempts: 1
!
......
            </PRE
></FONT
></TD
></TR
></TABLE
><P
>Modified:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;......
! The following three resources set up display :0 as the console.
DisplayManager._1.setup:        /etc/X11/xdm/Xsetup_1
DisplayManager._0.setup:        /etc/X11/xdm/Xsetup_0
DisplayManager._0.startup:      /etc/X11/xdm/GiveConsole
DisplayManager._0.reset:        /etc/X11/xdm/TakeConsole
DisplayManager._0.startAttempts: 1
!
......
            </PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>Repeat the procedure for each additional X server.</P
></LI
><LI
><P
>Check here for additional customising options: <A
HREF="http://www.linuxjournal.com/article.php?sid=3325"
TARGET="_top"
>Linux-Journal Issue 68: Linux Apprentice: Customising the XDM Login Screen</A
>.</P
></LI
></OL
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="AEN1251"
></A
>7.2.2. Using kdm</H2
><P
></P
><P
></P
><UL
><LI
><P
>I'm not really sure.  This area requires feedback. </P
><P
>Modify <TT
CLASS="filename"
>/usr/share/config/kdm/kdmrc</TT
>, from:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;......
[X-:0-Core]
Authorize=true
AutoLogin1st=true
AutoLoginEnable=false
Reset=/etc/X11/xdm/TakeConsole
Setup=/etc/X11/xdm/Xsetup_0
Startup=/etc/X11/xdm/GiveConsole

[X-:1-Core]
Authorize=true
......
            </PRE
></FONT
></TD
></TR
></TABLE
><P
>to </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;......
[X-:0-Core]
Authorize=true
AutoLogin1st=true
AutoLoginEnable=false
Reset=/etc/X11/xdm/TakeConsole
Setup=/etc/X11/xdm/Xsetup_0
Startup=/etc/X11/xdm/GiveConsole

[X-:1-Core]
Authorize=true
#AutoLogin1st=true
#AutoLoginEnable=false
#Reset=/etc/X11/xdm/TakeConsole
Setup=/etc/X11/xdm/Xsetup_1
#Startup=/etc/X11/xdm/GiveConsole

#[X-:1-Core]
#Authorize=true
......
            </PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>Check for additional customising options at the KDE Help Center.</P
></LI
></UL
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="AEN1264"
></A
>7.2.3. Using gdm</H2
><P
>This requires <TT
CLASS="filename"
>gdmlogin</TT
> to be used instead of  <TT
CLASS="filename"
>gdmgreater</TT
>, because using different themes for different displays is not yet implemented in gdm. In case you want to use gdm themes you'll have the same theme on all displays.</P
><P
></P
><OL
TYPE="1"
><LI
><P
>Switch to gdmlogin by making this changes in   <TT
CLASS="filename"
>/etc/X11/gdm/gdm.conf</TT
></P
><P
>From:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>.....
# Greeter for local (non-xdmcp) logins.  Change gdmlogin to gdmgreeter to
# get the new graphical greeter.
Greeter=/usr/bin/gdmgreeter
.....
</PRE
></FONT
></TD
></TR
></TABLE
><P
>to </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>.....
# Greeter for local (non-xdmcp) logins.  Change gdmlogin to gdmgreeter to
# get the new graphical greeter.
Greeter=/usr/bin/gdmlogin
.....</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>Copy the file <TT
CLASS="filename"
>/etc/X11/gdm/Init/Default</TT
> to <TT
CLASS="filename"
>/etc/X11/gdm/Init/:0</TT
>, and <TT
CLASS="filename"
>/etc/X11/gdm/Init/:1</TT
></P
></LI
><LI
><P
>Add these lines to use the background that kdm uses (you can use another image file as well, just change the full path to it):</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;if [ -r /usr/share/mdk/backgrounds/default.png -a -x /usr/bin/qiv ]; then
    /usr/bin/qiv -z /usr/share/mdk/backgrounds/default.png
else
    /usr/X11R6/bin/xsetroot -solid "#21449C"
fi
            </PRE
></FONT
></TD
></TR
></TABLE
><P
>You can also specify a different background color, with:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>/usr/X11R6/bin/xsetroot -solid "[your color]"</PRE
></FONT
></TD
></TR
></TABLE
><P
>Modified:</P
><P
><TT
CLASS="filename"
>/etc/X11/gdm/Init/:0 </TT
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;#!/bin/sh

if [ -r /usr/share/mdk/backgrounds/default.png -a -x /usr/bin/qiv ]; then
    /usr/bin/qiv -z /usr/share/mdk/backgrounds/default.png
else
    /usr/X11R6/bin/xsetroot -solid "#21449C"
fi
if [ -x /etc/X11/xinit/fixkeyboard ]; then
    /etc/X11/xinit/fixkeyboard
fi

exit 0
            </PRE
></FONT
></TD
></TR
></TABLE
><P
><TT
CLASS="filename"
>/etc/X11/gdm/Init/:1 </TT
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;#!/bin/sh

if [ -r /usr/share/mdk/backgrounds/flower.jpg -a -x /usr/bin/qiv ]; then
    /usr/bin/qiv -z /usr/share/mdk/backgrounds/flower.jpg
else
    /usr/X11R6/bin/xsetroot -solid "#21449C"
fi

if [ -x /etc/X11/xinit/fixkeyboard ]; then
    /etc/X11/xinit/fixkeyboard
fi

exit 0
            </PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>Repeat the procedure for each additional X server, using file(s) <TT
CLASS="filename"
>/etc/X11/gdm/Init/:[n]</TT
>, where n is the number of the display.</P
></LI
><LI
><P
>Check here for additional customising options: <A
HREF="http://www.ibiblio.org/oswg/oswg-nightly/oswg/en_US.ISO_8859-1/articles/gdm-reference/gdm-reference/"
TARGET="_top"
>Gnome Display Manager Reference Manual</A
>.</P
></LI
></OL
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="automation_multy_snd-cards.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="first_x_server.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Using independent sound cards</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="automation.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>1st X server configuration file</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>