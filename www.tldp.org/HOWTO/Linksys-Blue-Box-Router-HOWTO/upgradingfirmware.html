<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML
><HEAD
><TITLE
>Upgrading the firmware</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="Linksys Blue Box Router HOWTO"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Configuration hints"
HREF="confighints.html"><LINK
REL="NEXT"
TITLE="Hacking the hardware"
HREF="x203.html"></HEAD
><BODY
CLASS="sect1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Linksys Blue Box Router HOWTO</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="confighints.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x203.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="upgradingfirmware"
></A
>5. Upgrading the firmware</H1
><P
>Before you upgrade, here is a tip the documentation does not mention:
disconnect all the patch cables except the one from the machine you are
using to upgrade the box.  Handling a lot of other network traffic while
the firmware load is going on can corrupt the firmware.</P
><P
>There are three ways you can upgrade your Linksys firmware.</P
><P
>One is to click the <SPAN
CLASS="QUOTE"
>"Upgrade firmware"</SPAN
> link on the admin
page.  Download the firmware image to the machine your browser runs on,
fill in the field that says <SPAN
CLASS="QUOTE"
>"Please select a file to
upgrade:"</SPAN
>, click the Upgrade button, and have the right thing
happen.  This is the least error-prone procedure and is recomended.</P
><P
>Another way is to use one of Linkys's firmware-upgrade floppy images
from their website.  This requires that you boot Windows or use
WINE. Not recommended.</P
><P
>The third way is to use <SPAN
CLASS="application"
>tftp</SPAN
>.  This is how
I did it the first time, before Linksys added the <SPAN
CLASS="QUOTE"
>"Upgrade
firmware"</SPAN
> to the firmware, and I document it here for completeness
even though I now recommend their upgrade method.  There is a tftp client
included with Red Hat Linux.  To upgrade your firmware this way, do the
following steps:</P
><DIV
CLASS="procedure"
><OL
TYPE="1"
><LI
><P
><EM
>Write down your settings.</EM
> The 
firmware upgrade may wipe some of them.  Older versions nuked 
everything back to factory defaults; newer versions preserve
your basic settings but clear some advanced ones.</P
></LI
><LI
><P
><EM
>Download a copy of the new firmware.</EM
>
Follow the Downloads link from the Linkys main page.  Note that
what you get may well be marked <SPAN
CLASS="QUOTE"
>"For Windows Users"</SPAN
> and be a
zip archive.  Open it in a scratch directory, because it will rudely create
several Windows files wherever you unpack it.  The file you need will be
called <TT
CLASS="filename"
>CODE.BIN</TT
>.</P
></LI
><LI
><P
><EM
>Disable the router password.</EM
> Note
that every attempt I made to do this with Mozilla failed (both under 1.38
and 1.44).  Konqueror worked fine, and Firefox works fine with the 2.x
firmware.  Go to the Password tab, backspace over both sets of asterisks
until both the Password and Confirm fields are blank, and click
Apply.</P
></LI
><LI
><P
><EM
>Cross your fingers and load the
firmware.</EM
> The command session you want will to see will look
something like this, with your router's IP address substituted for
192.168.1.1:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>&#13;tftp 192.168.1.1
tftp&#62; binary
tftp&#62; put code.bin
Sent 386048 bytes in 10.3 seconds
tftp&#62;
</PRE
></FONT
></TD
></TR
></TABLE
><P
>Don't panic if the client hangs for a bit before returning and
<EM
>do not abort the transfer</EM
>.  The command is 
writing to firmware, and the Linksys hasn't got much of a brain.
Wait for it to finish.</P
></LI
><LI
><P
><EM
>Re-enable your router password and other
settings.</EM
> You'll be able to tell the upgrade worked because
the firmware version number will have changed.</P
></LI
></OL
></DIV
><P
>You're done.</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="confighints.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x203.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Configuration hints</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Hacking the hardware</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>