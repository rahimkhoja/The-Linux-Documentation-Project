<HTML
><HEAD
><TITLE
>mod_php and its prerequisites</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="Apache Compile HOWTO"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Compressed delivery"
HREF="compress.html"><LINK
REL="NEXT"
TITLE="PHP extensions"
HREF="phpext.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Apache Compile HOWTO</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="compress.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="phpext.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="PHP"
></A
>6. mod_php and its prerequisites</H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN644"
></A
>6.1. What is mod_php</H2
><A
NAME="AEN646"
></A
><TABLE
BORDER="0"
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
CLASS="BLOCKQUOTE"
><TR
><TD
WIDTH="10%"
VALIGN="TOP"
>&nbsp;</TD
><TD
WIDTH="80%"
VALIGN="TOP"
><P
>PHP is a server-side, cross-platform, <SPAN
CLASS="ABBREV"
>HTML</SPAN
> embedded scripting language. </P
><P
>In the beginning it was just a simple guestbook-processor, and it was growing and growing Since Version 3 
it is really powerful Webdevelopment-language</P
></TD
><TD
WIDTH="10%"
VALIGN="TOP"
>&nbsp;</TD
></TR
><TR
><TD
COLSPAN="2"
ALIGN="RIGHT"
VALIGN="TOP"
>--<SPAN
CLASS="ATTRIBUTION"
>www.php.net</SPAN
></TD
><TD
WIDTH="10%"
>&nbsp;</TD
></TR
></TABLE
><P
>Since Version 4 <SPAN
CLASS="ACRONYM"
>PHP</SPAN
> capable and robust enough for enterprise 
webapplications. It is powerful, supports almost all 
important databases natively, and other through <SPAN
CLASS="ABBREV"
>ODBC</SPAN
> (Open DataBase Connectivity). 
It a few times faster than ASP on <SPAN
CLASS="APPLICATION"
>Windows</SPAN
> Systems on 
the same Hardware. </P
><P
>There are other extensions available like <SPAN
CLASS="APPLICATION"
>APC</SPAN
> (Alternative PHP Cache), 
which speed up processing about 50-400% 
(depends on the php-code you wrote)</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN657"
></A
>6.2. Prerequisites</H2
><P
>Depending on your needs there are some software to install first. 
One already installed Software according this document is MySQL, because 
its needed by mod_auth_mysql.</P
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN660"
></A
>6.2.1. IMAP client</H3
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN662"
></A
>6.2.1.1. What is <SPAN
CLASS="ACRONYM"
>IMAP</SPAN
> client</H4
><P
><SPAN
CLASS="ACRONYM"
>IMAP</SPAN
> means »Internet Mail Application Protocol« and is a
substitute for the <SPAN
CLASS="ACRONYM"
>POP</SPAN
> (Post Office Protocol) protocol. It allows to keep all
Mails in different folders on the server, which (should)
be backed up - Never again lose important email, because your
local harddrive crashed</P
></DIV
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN668"
></A
>6.2.2. Download the source</H3
><P
>Origin-Site:</P
><P
>Origin-Site: <A
HREF="http://www.washington.edu/imap/"
TARGET="_top"
>http://www.washington.edu/imap/</A
></P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN673"
></A
>6.2.3. Building and installing</H3
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>cd /usr/local

tar -xvfz imap.tar.Z

cd imap

make slx SSLTYPE=nopwd <A
NAME="IMAP"
><IMG
SRC="../images/callouts/1.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"></A
></PRE
></FONT
></TD
></TR
></TABLE
><P
><DIV
CLASS="CALLOUTLIST"
><DL
COMPACT="COMPACT"
><DT
><A
HREF="php.html#IMAP"
><IMG
SRC="../images/callouts/1.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"></A
></DT
><DD
>With the parameter <TT
CLASS="OPTION"
>SSLTYPE=unix</TT
> you define if you need SSL support or not. Omitting means no
SSL support.</DD
></DL
></DIV
></P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.gif"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="CENTER"
><B
>Filename to download</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>imap.tar.Z is usually a symlink to the latest release, today its linked to imap-2001a.tar.Z</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="POSTGRESQL"
></A
>6.2.4. PostgreSQL</H3
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN687"
></A
>6.2.4.1. What is PostgreSQL</H4
><P
>PostgreSQL is a very powerful and fast Database</P
><P
>	Like MySQL wonderful for Webapplications. From my Point of view, not as comfortable to handle as MySQL. 
	If your Webapplication performs mostly writes, or you need proofed transaction-capabilities, PostgreSQL is your friend</P
></DIV
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN691"
></A
>6.2.4.2. Download the source</H4
><P
>Origin-Site: <A
HREF="http://www.postgresql.org"
TARGET="_top"
>http://www.postgresql.org</A
>  (Select a mirror close to you)</P
></DIV
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN695"
></A
>6.2.4.3. Building and installing</H4
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>cd /usr/local

tar -xvzf postgresql-7.3.2.tar.gz

cd postgresql-7.3.2

./configure \
--with-perl \
--enable-odbc \
--with-unixodbc  \
--with-pam \
--with-openssl \


make
make install

echo /usr/local/pgsql/lib &#62;&#62; /etc/ld.so.conf

ldconfig</PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="SABLOTRON"
></A
>6.2.5. Sablotron</H3
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN700"
></A
>6.2.5.1. What is Sablotron</H4
><A
NAME="AEN702"
></A
><TABLE
BORDER="0"
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
CLASS="BLOCKQUOTE"
><TR
><TD
WIDTH="10%"
VALIGN="TOP"
>&nbsp;</TD
><TD
WIDTH="80%"
VALIGN="TOP"
><P
>Sablotron is a fast, compact and portable XML toolkit implementing XSLT 1.0, 
DOM Level2 and XPath 1.0. Sablotron is an open project; other users and developers 
are encouraged to use it or to help us testing or improving it. The goal of this 
project is to create a lightweight, reliable and fast XML library processor 
conforming to the W3C specification, which is available for public and can be 
used as a base for multi-platform XML applications.</P
></TD
><TD
WIDTH="10%"
VALIGN="TOP"
>&nbsp;</TD
></TR
><TR
><TD
COLSPAN="2"
ALIGN="RIGHT"
VALIGN="TOP"
>--<SPAN
CLASS="ATTRIBUTION"
>http://www.gingerall.com/charlie/ga/xml/p_sab.xml</SPAN
></TD
><TD
WIDTH="10%"
>&nbsp;</TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN705"
></A
>6.2.5.2. Download the source</H4
><P
>Origin-Site: <A
HREF="http://download-2.gingerall.cz/download/sablot/Sablot-0.97.tar.gz"
TARGET="_top"
>http://download-2.gingerall.cz/download/sablot/Sablot-0.97.tar.gz</A
></P
></DIV
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN709"
></A
>6.2.5.3. Building and installing</H4
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>tar -xvzf Sablot-0.97.tar.gz
cd Sablot-0.97

./configure
make
make install

ldconfig</PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN712"
></A
>6.2.6. pdflib</H3
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN714"
></A
>6.2.6.1. What is pdflib</H4
><A
NAME="AEN716"
></A
><TABLE
BORDER="0"
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
CLASS="BLOCKQUOTE"
><TR
><TD
WIDTH="10%"
VALIGN="TOP"
>&nbsp;</TD
><TD
WIDTH="80%"
VALIGN="TOP"
><P
>PDFlib: A library for generating PDF on the fly PDFlib is the premier software component if you want 
to generate PDF on your server, convert text and graphics, or implement PDF output in your own products.</P
></TD
><TD
WIDTH="10%"
VALIGN="TOP"
>&nbsp;</TD
></TR
><TR
><TD
COLSPAN="2"
ALIGN="RIGHT"
VALIGN="TOP"
>--<SPAN
CLASS="ATTRIBUTION"
>www.pdflib.com</SPAN
></TD
><TD
WIDTH="10%"
>&nbsp;</TD
></TR
></TABLE
><P
>From the authors point of view:</P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.gif"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="CENTER"
><B
>This is a commercial product</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>PDFLIB is a commercial Product. Read the license carefully to see if you need a commercial license or not</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN723"
></A
>6.2.6.2. Download the source</H4
><P
>Origin-Site: <A
HREF="http://www.pdflib.com/pdflib/download/pdflib-4.0.3.tar.gz"
TARGET="_top"
>http://www.pdflib.com/pdflib/download/pdflib-4.0.3.tar.gz</A
></P
></DIV
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN727"
></A
>6.2.6.3. Building and installing</H4
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>cd /usr/local/
tar -xvzf pdflib-4.0.3.tar.gz

cd pdflib-4.0.3

./configure --enable-shared-pdflib --enable-cxx

make
make install

ldconfig</PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN730"
></A
>6.2.7. gettext</H3
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN732"
></A
>6.2.7.1. What is gettext</H4
><P
>gettext is a library for i18n (Internationalization, "I", 18 chars and "n") of software, and needed by php</P
></DIV
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN735"
></A
>6.2.7.2. Download the source</H4
><P
>Origin-Site: <A
HREF="ftp://ftp.gnu.org/gnu/gettext"
TARGET="_top"
>ftp://ftp.gnu.org/gnu/gettext</A
>
 (select a mirror close to you)</P
></DIV
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN739"
></A
>6.2.7.3. Building and installing</H4
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>cd /usr/local

tar -xvzf gettext-0.11.2.tar.gz

cd gettext-0.11.2

./configure

make
make check
make install

ldconfig</PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN742"
></A
>6.2.8. zlib</H3
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN744"
></A
>6.2.8.1. What is zlib</H4
><P
>zlib is a lossless data-compression library for use on virtually any computer hardware and operating system</P
></DIV
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN747"
></A
>6.2.8.2. Download the source</H4
><P
>Origin-Site: <A
HREF="ftp://ftp.info-zip.org/pub/infozip/zlib/zlib-1.1.4.tar.gz"
TARGET="_top"
>ftp://ftp.info-zip.org/pub/infozip/zlib/zlib-1.1.4.tar.gz</A
>
 (select a mirror close to you)</P
></DIV
><DIV
CLASS="SECT4"
><H4
CLASS="SECT4"
><A
NAME="AEN751"
></A
>6.2.8.3. Building and installing</H4
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>cd /usr/local

tar -xvzf zlib-1.1.4.tar.gz

cd zlib-1.1.4/

./configure

make
make test
make install

ldconfig</PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="BUILD-PHP"
></A
>6.3. Building and installing PHP4</H2
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>cd /usr/local

tar -xvzf php-4.3.0.tar.gz

cd php-4.3.0

export LDFLAGS=-lstdc++

./configure \
--with-apxs=/usr/local/apache/bin/apxs \
--with-mysql=/usr/local/mysql \
--with-pgsql=/usr/local/pgsql \
--enable-track-vars \
--with-openssl=/usr/local/ssl \
--with-imap=/usr/local/imap \
--with-gd --with-ldap \
--enable-ftp \
--enable-sysvsem \
--enable-sysvshm \
--enable-sockets \
--with-pdflib=/usr/local \
--with-gettext \
--with-mm=/usr/local/mm-1.1.3 \
--with-jpeg-dir=/usr/lib \
--with-zlib-dir=/usr/local \
--enable-wddx \
--with-mcrypt \
--with-mhash \
--with-mcal=/usr \
--enable-exif \
--enable-xslt \
--with-xslt-sablot=/usr/local \
--with-dom \
--with-dom-xslt \&#13;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Edit the <TT
CLASS="FILENAME"
>Makefile</TT
> and add <TT
CLASS="OPTION"
>-lstdc++</TT
> to the variable <TT
CLASS="VARNAME"
>EXTRA_LIBS</TT
>. This is currently 
only needed, when using Sablotron version 0.9.7</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>make
make install</PRE
></FONT
></TD
></TR
></TABLE
><P
>After installing your httpd.conf is modified by axps. It should now look as follows:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;IfDefine SSL&#62;
LoadModule ssl_module         libexec/libssl.so
LoadModule php4_module        libexec/libphp4.so
&#60;/IfDefine&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>If you compiled Apache with mod_ssl then the php-module will only be loaded when staring Apache with ssl (apachectl startssl). If you will start Apache without ssl support (but compiled like described in this document) you need to change this:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;IfDefine SSL&#62;
LoadModule ssl_module         libexec/libssl.so
&#60;/IfDefine&#62;
LoadModule php4_module        libexec/libphp4.so</PRE
></FONT
></TD
></TR
></TABLE
><P
>Copy the sample <TT
CLASS="FILENAME"
>php.ini-dist</TT
> to <TT
CLASS="FILENAME"
>/usr/local/lib/php.ini</TT
></P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>cp /usr/local/php-4.3.0/php.ini-dist /usr/local/lib/php.ini</PRE
></FONT
></TD
></TR
></TABLE
><P
>uncomment (remove the # at begin of line) the following lines in 
<TT
CLASS="FILENAME"
>/usr/local/apache/conf/httpd.conf</TT
></P
><P
>Apache 1.3.27 default httpd.conf does lack of this entries. You have to add them instead of uncommenting</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>AddType application/x-httpd-php .php
AddType application/x-httpd-php .phtml
AddType application/x-httpd-php .php3

# If you want to display PHP source 

AddType application/x-httpd-php-source .phps <A
NAME="SOURCE"
><IMG
SRC="../images/callouts/1.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"></A
></PRE
></FONT
></TD
></TR
></TABLE
><P
><DIV
CLASS="CALLOUTLIST"
><DL
COMPACT="COMPACT"
><DT
><A
HREF="php.html#SOURCE"
><IMG
SRC="../images/callouts/1.gif"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"></A
></DT
><DD
>This line is only needed if you like to display
sourcecodes in the browser. The fileextension of such files should be phps.
/para&#62;</DD
></DL
></DIV
></P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.gif"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="CENTER"
><B
>register_globals</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Since PHP Version 4.2.1, »register_globals« are set OFF. This can bring you in problems running 
PHP-Code not using the $HTTP_GET_VARS methods. To enable register_globals edit the following line in your
<TT
CLASS="FILENAME"
>/usr/local/lib/php.ini</TT
>:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>register_globals = On</PRE
></FONT
></TD
></TR
></TABLE
><P
>Please be sure, if you write new software, to use the new methods. Support of old methods will be dropped sooner or 
later</P
></TD
></TR
></TABLE
></DIV
><P
>Restart Apache by issuing the following command: </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>/usr/local/apache/bin/apachectl restart</PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="compress.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="phpext.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Compressed delivery</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>PHP extensions</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>