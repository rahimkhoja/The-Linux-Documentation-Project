<HTML
><HEAD
><TITLE
>A few other points that must be noted.</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="PCTel HSP MicroModem Configuration mini-HOWTO"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Testing the drivers"
HREF="testing.html"><LINK
REL="NEXT"
TITLE="FAQ/Troubleshooting"
HREF="trouble.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PCTel HSP MicroModem Configuration mini-HOWTO</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="testing.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="trouble.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="OT"
></A
>7. A few other points that must be noted.</H1
><P
>Here are a few more points you might find to be of interest/useful.</P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN412"
></A
>7.1. The unofficial PCTel winmodem-Linux compatibility database.</H2
><P
>There has been a lot of confusion over the <EM
>--with-hal</EM
> option which has to be used with the configure script, and for that, I coded a MySQL-PHP driven database that
takes in information from the modem owners, so that newbies can browse and search the database, and find their modems' chipsets. If you have a PCTel modem, then please do submit your modem information
at <A
HREF="http://pctelcompdb.sourceforge.net"
TARGET="_top"
>http://pctelcompdb.sourceforge.net</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN417"
></A
>7.2. Loading the modules at automatically</H2
><P
>Well, if you have the pctel.o and ptserial.o files in  <TT
CLASS="FILENAME"
>/lib/modules/`your kernel version`/misc/ </TT
> , you can just add these lines to your
 <TT
CLASS="FILENAME"
>/etc/modules.conf </TT
> file</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>&#13;# for pctel modem


alias char-major-62 ptserial


below ptserial pctel


# country code for pctel modem

options ptserial country_code=1</PRE
></FONT
></TD
></TR
></TABLE
><P
>Run</P
><P
><B
CLASS="COMMAND"
>bash$
depmod -a</B
></P
><P
>after modifying your  <TT
CLASS="FILENAME"
>/etc/modules.conf </TT
>.</P
><P
>In this case, running ppp would automatically load these modules.
You can also write up some shell-script and put them in your  <TT
CLASS="FILENAME"
>/usr/bin/ </TT
> directory (I have a sample of such a script in the appendix
section)</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN430"
></A
>7.3. Country codes</H2
><P
>The <SPAN
CLASS="APPLICATION"
>ptserial.o</SPAN
> driver also lets you specify the country code, though for most situations, the default of USA is all right.
If you still want to specify the country code, load the ptserial.o module with the command</P
><P
><B
CLASS="COMMAND"
>bash$
insmod ptserial country_code=x</B
></P
><P
>(where x is the country code you want)
The list of country codes with the corresponding country names is listed below.</P
><P
><DIV
CLASS="TABLE"
><A
NAME="AEN438"
></A
><P
><B
>Table 1. Country Codes</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><THEAD
><TR
><TH
ALIGN="LEFT"
VALIGN="TOP"
> Country Name </TH
><TH
ALIGN="LEFT"
VALIGN="TOP"
> country_code </TH
></TR
></THEAD
><TBODY
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>USA</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>1</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>France</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>2</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Germany</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>3</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Italy</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>4</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Sweden</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>5</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>UK</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>6</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Japan </TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>7</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Australia</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>8</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Spain</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>9</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Taiwan</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>10</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Singapore</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>11</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Korea</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>12</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Switzerland</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>13</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Norway</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>14</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Netherlands</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>15</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Belgium</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>16</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Canada</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>17</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Ireland</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>18</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Portugal</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>19</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Polan</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>20</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Hungary</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>21</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Finland</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>22</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Denmark </TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>23</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Austria</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>24</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>South Africa</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>25</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>CTR21 Countries</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>26</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>China</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>27</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Malaysia</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>28</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Luxumburg</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>29</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Greece</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>30</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Iceland</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>31</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>New Zealand</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>32</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Brazil</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>33</TD
></TR
></TBODY
></TABLE
></DIV
></P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN545"
></A
>7.4. Other options while loading the modules.</H2
><P
>The other options that you may want to use while loading ptserial.o are:</P
><P
>For all HALs :</P
><P
> - irq: Force to using irq #.</P
><P
> - iobase: Force to use iobase for modem detection.</P
><P
></P
><P
>Only for I810/VAI686A HALs:</P
><P
> - iobase1: Force the iobase 1</P
><P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>NOTE: if you want to set iobase or iobase1, you should use 
irq/iobase/iobase1 at same time.</P
></TD
></TR
></TABLE
></DIV
></P
><P
></P
><P
>Only for CM8738/PCT789 HALs:</P
><P
> - vendor_id: vendor ID of the modem</P
><P
> - device_id: device ID of the modem.</P
><P
> <DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>NOTE: vendor_id and device_id should be used at the same time,
but you cannot combinate this two options with
iobase, iobase prevail to (vendor/device)_id detection.</P
></TD
></TR
></TABLE
></DIV
></P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN564"
></A
>7.5. The sequence of loading/unloading the modules.</H2
><P
>When you load the modules, you must load the <SPAN
CLASS="APPLICATION"
>pctel.o</SPAN
> module at first</P
><P
><B
CLASS="COMMAND"
>bash$
insmod pctel</B
></P
><P
>and then the <SPAN
CLASS="APPLICATION"
>ptserial.o</SPAN
></P
><P
><B
CLASS="COMMAND"
>bash$
insmod ptserial</B
></P
><P
>While unloading, the sequence is reversed,</P
><P
><B
CLASS="COMMAND"
>bash$
rmmod ptserial</B
></P
><P
><B
CLASS="COMMAND"
>bash$
rmmod pctel</B
></P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN579"
></A
>7.6. Bugs in the pctel-0.9.6 and the 0.8.6 versions.</H2
><P
><A
NAME="BUG"
></A
>
There is a serious bug in the drivers for the kernel 2.4x
 The modem often seems to stop working/hang while dialing out, and you get nothing but a
beeeeeeeeee... sound from the modem speaker and later, the dialer gives a message <TT
CLASS="COMPUTEROUTPUT"
>No Carrier</TT
>
and disconnects.</P
><P
>This problem has no real workaround , but sometimes unloading and reloading of the modules work. For that the commands
will be (assuming that you have the modules in  <TT
CLASS="FILENAME"
>/lib/modules/'your kernel version`/misc/ </TT
>)</P
><P
><B
CLASS="COMMAND"
>bash$
rmmod ptserial</B
></P
><P
><B
CLASS="COMMAND"
>bash$
rmmod pctel</B
></P
><P
><B
CLASS="COMMAND"
>bash$
insmod pctel</B
></P
><P
><B
CLASS="COMMAND"
>bash$
insmod ptserial</B
></P
><P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>You must exit from your dialer before trying to unload the drivers, otherwise you will get a <TT
CLASS="COMPUTEROUTPUT"
>device or resource busy </TT
> error.</P
></TD
></TR
></TABLE
></DIV
></P
><P
>When the problems become too acute, the only solution seems to be rebooting.</P
><P
>It has been also noticed that sometimes, this problem is ISP dependent, with the problem surfacing when using a particular
ISP.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN600"
></A
>7.7. Directory of the kernel source files</H2
><P
><A
NAME="KERNELSRC"
></A
>
If you get an error saying  <TT
CLASS="COMPUTEROUTPUT"
>/usr/src/linux/include/linux/modversions.h : no such file or directory</TT
>,
look in your /usr/src directory for the kernel source. The default location is  <TT
CLASS="FILENAME"
>/usr/src/linux/ </TT
> but some distributions may install the files somewhere else.</P
><P
>If you find that the files are somewhere else, say in the directory,  <TT
CLASS="FILENAME"
>/usr/src/myspecialsource/ </TT
>, do not try to move the files, just create a symbolic link with the command </P
><P
><B
CLASS="COMMAND"
>bash$
ln -s /usr/src/myspecialdirectory/ /usr/src/linux/</B
></P
><P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>In case of the PCTel-0.8.6 or newer drivers you can also specify the location of your kernel source by using the option</P
><P
><B
CLASS="COMMAND"
>bash$
 --with-kernel-includes=your kernel source directory</B
></P
><P
>during running the <SPAN
CLASS="APPLICATION"
> configure </SPAN
> script.</P
></TD
></TR
></TABLE
></DIV
></P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="BIOS"
></A
>7.8. PnP BIOS issues</H2
><P
>As most computers are designed for M$-Windows operating systems, the BIOS of the computer assumes that you have a what it calls a "PnP OS installed".
This may cause trouble with these types of modems in GNU/Linux (specially if you have resource conflicts) and so the best bet is to change the option "PnP OS installed" to "No". To do these, you have to perform the following steps:</P
><P
>During startup, when you see "Memory Test" messages, CPU information, BIOS information, just press the <B
CLASS="KEYCAP"
>DEL</B
> key (if that does not work, usually one of the Function (Fx) keys work..check your manual).</P
><P
>You will be presented with the BIOS configuration menu. Enter the "PNP/PCI Configuration" section and set the option for "PNP OS Installed" to "NO". Save the changes you have made, and then reboot.</P
><P
><DIV
CLASS="WARNING"
><P
></P
><TABLE
CLASS="WARNING"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/warning.gif"
HSPACE="5"
ALT="Warning"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>This is <EM
>not</EM
> applicable to all BIOSs, and you are advised to consult your PC documentation if you have a different kind of BIOS configuration menu.</P
></TD
></TR
></TABLE
></DIV
></P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AMR"
></A
>7.9. AMR modems</H2
><P
>There are certain PCTel chip set based internal modems that go into AMR slots instead of the normal PCI slots. They are
usually identified as <TT
CLASS="COMPUTEROUTPUT"
> HSP MR </TT
> by the <B
CLASS="COMMAND"
>bash$ lspci </B
> command. These modems
are supported by the pctel-0.9.6 drivers only.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="SOUND"
></A
>7.10. Possible conflict with sound modules</H2
><P
>Recently, there were some posts in the discuss@linmodems.org list that the PCTel modules worked only after the sound modules
were unloaded with the <B
CLASS="COMMAND"
>bash$ rmmod </B
> command. If you do not get a response from your modem even after the
pctel.o and ptserial.o modules have been loaded, then you can try unloading the sound modules, and then reloading the PCTel
modules. However, this problem does not occur if you are using the commercial ($$$) drivers from <A
HREF="http://www.opensound.com"
TARGET="_top"
> www.opensound.com </A
>.</P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="testing.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="trouble.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Testing the drivers</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>FAQ/Troubleshooting</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>