<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML
><HEAD
><TITLE
>&#13;Installing an Apache
reverse proxy
as a front-end
to your MMBase server
</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="
  MMBase Installation HOWTO
  "
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="
Connecting Apache
and Tomcat
using mod_jk2
"
HREF="jk2.html"><LINK
REL="NEXT"
TITLE="
Installing more MMBase servers
on a single Tomcat server
"
HREF="x1064.html"></HEAD
><BODY
CLASS="sect1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
><SPAN
CLASS="application"
>MMBase</SPAN
> Installation HOWTO</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="jk2.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x1064.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="AEN1037"
></A
>13. Installing an <SPAN
CLASS="application"
>Apache</SPAN
>
reverse proxy
as a front-end
to your <SPAN
CLASS="application"
>MMBase</SPAN
> server</H1
><P
>&#13;Installing an <SPAN
CLASS="application"
>Apache</SPAN
> reverse proxy
is an easy alternative to the
<SPAN
CLASS="systemitem"
><SPAN
CLASS="acronym"
>JK 2</SPAN
> Connector</SPAN
>
to use <SPAN
CLASS="application"
>Apache</SPAN
> as a front-end
to your <SPAN
CLASS="application"
>Tomcat</SPAN
> server.
</P
><P
>&#13;Add to your <SPAN
CLASS="application"
>Apache</SPAN
>
(virtual) server configuration
(replace <TT
CLASS="replaceable"
><I
>&#60;hostname&#62;</I
></TT
> with your hostname):
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;  
  ProxyPass /tomcat/ http://&#60;hostname&#62;:8080/
  ProxyPassReverse /tomcat/ http://&#60;hostname&#62;:8080/
  ProxyPass /mmbase/ http://&#60;hostname&#62;:8080/mmbase-webapp/
  ProxyPassReverse /mmbase/ http://&#60;hostname&#62;:8080/mmbase-webapp/
  
  </PRE
></FONT
></TD
></TR
></TABLE
>
</P
><P
>&#13;This allows you to access your
<SPAN
CLASS="application"
>Tomcat</SPAN
> server
as
(replace <TT
CLASS="replaceable"
><I
>&#60;hostname&#62;</I
></TT
> with your hostname):
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;  
  http://&#60;hostname&#62;/tomcat/
  
  </PRE
></FONT
></TD
></TR
></TABLE
>
</P
><P
>&#13;and your <SPAN
CLASS="application"
>MMBase</SPAN
> server as
(replace <TT
CLASS="replaceable"
><I
>&#60;hostname&#62;</I
></TT
> with your hostname):
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;  
  http://&#60;hostname&#62;/mmbase/
  
  </PRE
></FONT
></TD
></TR
></TABLE
>
</P
><P
>&#13;<DIV
CLASS="caution"
><P
></P
><TABLE
CLASS="caution"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.gif"
HSPACE="5"
ALT="Caution"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#13;Our MMBase version 1.7 installation used
absolute directory paths in the web pages it generated.
In order to get the reverse proxies to work properly,
the Apache proxy paths had to be the same
(replace <TT
CLASS="replaceable"
><I
>&#60;hostname&#62;</I
></TT
> with your hostname):
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;  
  ProxyPass /mmbase-webapp/ http://&#60;hostname&#62;:8080/mmbase-webapp/
  ProxyPassReverse /mmbase-webapp/ http://&#60;hostname&#62;:8080/mmbase-webapp/
  
  </PRE
></FONT
></TD
></TR
></TABLE
>
</P
></TD
></TR
></TABLE
></DIV
>
</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="jk2.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x1064.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Connecting <SPAN
CLASS="application"
>Apache</SPAN
>
and <SPAN
CLASS="application"
>Tomcat</SPAN
>
using <SPAN
CLASS="systemitem"
>mod_jk2</SPAN
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Installing more <SPAN
CLASS="application"
>MMBase</SPAN
> servers
on a single <SPAN
CLASS="application"
>Tomcat</SPAN
> server</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>