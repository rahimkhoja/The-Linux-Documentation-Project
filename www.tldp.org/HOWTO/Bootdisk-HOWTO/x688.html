<HTML
><HEAD
><TITLE
>Choosing a kernel</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.63
"><LINK
REL="HOME"
TITLE="The Linux Bootdisk HOWTO"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Building a root filesystem"
HREF="buildroot.html"><LINK
REL="NEXT"
TITLE="Putting them together: Making the diskette(s)"
HREF="x703.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>The Linux Bootdisk HOWTO</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="buildroot.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x703.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="AEN688"
>5. Choosing a kernel</A
></H1
><P
>At this point you have a complete compressed root filesystem.  The next step
is to build or select a kernel.  In most cases it would be possible to copy
your current kernel and boot the diskette from that.  However, there may be
cases where you wish to build a separate one.</P
><P
>One reason is size.  If you are building a single boot/root diskette, the
kernel will be one of the largest files on the diskette so you will have to
reduce the size of the kernel as much as possible.  To reduce kernel size,
build it with the minumum set of facilities necessary to support the desired
system.  This means leaving out everything you don't need.  Networking is a
good thing to leave out, as well as support for any disk drives and other
devices which you don't need when running your boot/root system.  As stated
before, your kernel <EM
>must</EM
> have ramdisk and ext2 support
built into it.</P
><P
> Having worked out a minimum set of facilities to include in a kernel,
you then need to work out what to add back in.  Probably the most common uses
for a boot/root diskette system would be to examine and restore a corrupted
root file system, and to do this you may need kernel support.  For example, if
your backups are all held on tape using Ftape to access your tape drive, then,
if you lose your current root drive and drives containing Ftape, then you will
not be able to restore from your backup tapes.  You will have to reinstall
Linux, download and reinstall <B
CLASS="COMMAND"
>ftape</B
>, and then try to read
your backups.</P
><P
>The point here is that, whatever I/O support you have added to your kernel to
support backups should also be added into your boot/root kernel.</P
><P
>The procedure for actually building the kernel is described in the
documentation that comes with the kernel.  It is quite easy to follow, so
start by looking in <TT
CLASS="FILENAME"
>/usr/src/linux</TT
>.  If you have trouble
building a kernel, you should probably not attempt to build boot/root
systems anyway.  Remember to compress the kernel with ``<B
CLASS="COMMAND"
>make zImage</B
>''.</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="buildroot.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x703.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Building a root filesystem</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Putting them together: Making the diskette(s)</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>