<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML
><HEAD
><TITLE
>Redhat</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="LVM HOWTO"
HREF="index.html"><LINK
REL="UP"
TITLE="LVM 1 Boot time scripts"
HREF="boot_scripts.html"><LINK
REL="PREVIOUS"
TITLE="Mandrake"
HREF="initscriptmandrake.html"><LINK
REL="NEXT"
TITLE="Slackware"
HREF="initscriptslackware.html"></HEAD
><BODY
CLASS="sect1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>LVM HOWTO</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="initscriptmandrake.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 7. LVM 1 Boot time scripts</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="initscriptslackware.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="initscriptredhat"
></A
>7.4. Redhat</H1
><P
>&#13;        For Redhat 7.0 and up, you should not need to modify any
        initscripts to enable LVM at boot time if LVM is built
        into the kernel.  If LVM is built as a module, it may be
        necessary to modify <TT
CLASS="filename"
> /etc/rc.d/rc.sysinit
        </TT
> to load the LVM module by adding
        <SPAN
CLASS="QUOTE"
>"modprobe lvm-mod"</SPAN
> before the section that
        reads:
        <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
># LVM initialization, take 2 (it could be on top of RAID)
if [ -e /proc/lvm -a -x /sbin/vgchange -a -f /etc/lvmtab ]; then
        action $"Setting up Logical Volume Management:" /sbin/vgscan &#38;&#38;
        /sbin/vgchange -a y
        fi</PRE
></FONT
></TD
></TR
></TABLE
>
        <DIV
CLASS="note"
><P
></P
><TABLE
CLASS="note"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#13;            This init script fragment is from Red Hat 7.3 - other versions
            of Redhat may look slightly different.
          </P
></TD
></TR
></TABLE
></DIV
>

      </P
><P
>&#13;        For versions of Redhat older than 7.0, it is necessary to edit the
        file <TT
CLASS="filename"
>/etc/rc.d/rc.sysinit</TT
>.  Look for the line
        that says <SPAN
CLASS="QUOTE"
>"Mount all other filesystems"</SPAN
> and insert the
        vgscan and vgchange commands just before it.  You should be sure
        that your root file system is mounted read/write before you run the
        LVM commands.
      </P
><P
>&#13;        You may also want to edit the the file 
        <TT
CLASS="filename"
>/etc/rc.d/init.d/halt</TT
> to deactivate the volume
        groups at shutdown. Insert the
        <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="screen"
>&#13;vgchange -an
            </PRE
></FONT
></TD
></TR
></TABLE
>
        command near the end of this file just after the filesystems are
        mounted read-only, before the comment that says <SPAN
CLASS="QUOTE"
>"Now halt or
          reboot"</SPAN
>.
      </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="initscriptmandrake.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="initscriptslackware.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Mandrake</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="boot_scripts.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Slackware</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>