<HTML
><HEAD
><TITLE
>Troubleshooting</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="DVD Playback HOWTO"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Software Usage"
HREF="usage.html"><LINK
REL="NEXT"
TITLE="Further Information"
HREF="moreinfo.html"></HEAD
><BODY
CLASS="sect1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>DVD Playback HOWTO</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="usage.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="moreinfo.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="AEN383"
></A
>5. Troubleshooting</H1
><DIV
CLASS="qandaset"
><DL
><DT
>5.1. <A
HREF="x383.html#overlaytrouble"
><B
CLASS="command"
>xvinfo</B
> returns <SPAN
CLASS="QUOTE"
>"no adaptors
present"</SPAN
></A
></DT
><DT
>5.2. <A
HREF="x383.html#overlaybug"
><B
CLASS="command"
>xvinfo</B
> works but overlay output is
garbled</A
></DT
><DT
>5.3. <A
HREF="x383.html#dmatrouble"
>DMA isn't working</A
></DT
><DT
>5.4. <A
HREF="x383.html#choppyvideo"
>Video playback is choppy 
        </A
></DT
><DT
>5.5. <A
HREF="x383.html#choppysound"
>Sound playback is choppy
        </A
></DT
><DT
>5.6. <A
HREF="x383.html#cssgarbled"
>Out of region discs play back garbled
        </A
></DT
><DT
>5.7. <A
HREF="x383.html#csstimeout"
>Out-of-region discs hang on playback
        </A
></DT
></DL
><DIV
CLASS="qandaentry"
><DIV
CLASS="question"
><P
><A
NAME="overlaytrouble"
></A
><B
>5.1. </B
><B
CLASS="command"
>xvinfo</B
> returns <SPAN
CLASS="QUOTE"
>"no adaptors
present"</SPAN
></P
></DIV
><DIV
CLASS="answer"
><P
><B
> </B
>Make sure you are running XFree86 4.1 or above. You can find
out your version of XFree86 by typing <B
CLASS="command"
>X
-version</B
> at the command prompt.</P
><P
>Use an appropriate driver for your video card. Some Linux
distributions default to using the generic XFree86 VESA driver instead
of the specific driver for your video card. You need to use the
hardware-specific driver for your card in order to get hardware
overlay support.</P
><P
></P
><UL
><LI
><P
>ATI users should try downloading the improved ATI XFree86
drivers from the <A
HREF="http://gatos.sourceforge.net/"
TARGET="_top"
>GATOS</A
> home page, or from the
<A
HREF="http://www.ati.com/support/faq/linux.html"
TARGET="_top"
>official ATI
Linux support page</A
>.</P
></LI
><LI
><P
>NVidia users should try downloading the <A
HREF="http://www.nvidia.com/content/drivers/drivers.asp"
TARGET="_top"
>official NVidia
Linux drivers</A
> for their video card.</P
></LI
><LI
><P
>Sometimes upgrading <A
HREF="http://www.xfree86.org/"
TARGET="_top"
>XFree86</A
> can provide you with an
improved driver that has hardware overlay support, but such an upgrade is
beyond the scope of this HOWTO.</P
></LI
></UL
></DIV
></DIV
><DIV
CLASS="qandaentry"
><DIV
CLASS="question"
><P
><A
NAME="overlaybug"
></A
><B
>5.2. </B
><B
CLASS="command"
>xvinfo</B
> works but overlay output is
garbled</P
></DIV
><DIV
CLASS="answer"
><P
><B
> </B
>Problems with garbled or missing overlay output usually mean
that you don't have enough video RAM to hold both the regular desktop
display and the video overlay display at once. Typically you need twice
as much video RAM as normal at a given video resolution in order to use
hardware video overlay. In some cases you may even need 3 to 5 times more
RAM because of internal buffering in the video card.</P
><P
>The only easy way to lower your video RAM requirements is to
switch to a lower video resolution while playing videos.</P
></DIV
></DIV
><DIV
CLASS="qandaentry"
><DIV
CLASS="question"
><P
><A
NAME="dmatrouble"
></A
><B
>5.3. </B
>DMA isn't working</P
></DIV
><DIV
CLASS="answer"
><P
><B
> </B
>You can tell that DMA is broken if using the command
<B
CLASS="command"
>hdparm -d1</B
> on your DVD drive returns a message like the
following:<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
><TT
CLASS="prompt"
># </TT
><TT
CLASS="userinput"
><B
><B
CLASS="command"
>hdparm</B
> -d1 /dev/hda</B
></TT
>
<TT
CLASS="computeroutput"
> 
/dev/hda:
 setting using_dma to 1 (on)
 HDIO_SET_DMA failed: Operation not permitted
 using_dma    =  0 (off)
</TT
></PRE
></FONT
></TD
></TR
></TABLE
></P
><P
>&#13;The only way to fix this problem is to compile a kernel with DMA support
for your particular chipset. It is beyond the scope of this HOWTO to
explain how to compile a kernel, but the steps which are particularly
relevant to DMA support are as follows:</P
><P
></P
><OL
TYPE="1"
><LI
><P
>Download a <EM
>recent</EM
> kernel so that
you have the greatest possible chance of DMA being supported on your
chipset.</P
></LI
><LI
><P
>Unpack your kernel and type <B
CLASS="command"
>make
xconfig</B
>
in the kernel build directory.  Under <SPAN
CLASS="QUOTE"
>"ATA/IDE/MFM/RLL support"</SPAN
>, 
select <SPAN
CLASS="QUOTE"
>"IDE, ATA, and ATAPI Block devices"</SPAN
> and enable 
<SPAN
CLASS="QUOTE"
>"Generic PCI bus-master DMA support"</SPAN
> and <SPAN
CLASS="QUOTE"
>"Use DMA by 
default when available"</SPAN
>.</P
></LI
><LI
><P
>On the same page there are several dozen chipset-specific DMA
drivers that continue downward for several screens. Find and select one 
relevant to your chipset, if there are any. For example if you have
an AMD Athlon based VIA chipset, enable the <SPAN
CLASS="QUOTE"
>"VIA82CXXX chipset 
support"</SPAN
> item.</P
></LI
></OL
><P
>For more information on compiling kernels, see the <A
HREF="http://en.tldp.org/HOWTO/Kernel-HOWTO/"
TARGET="_top"
>Kernel HOWTO</A
> as
well as the <A
HREF="http://www.tldp.org/HOWTO/Ultra-DMA.html"
TARGET="_top"
>Linux
Ultra-DMA Mini-Howto</A
>.</P
></DIV
></DIV
><DIV
CLASS="qandaentry"
><DIV
CLASS="question"
><P
><A
NAME="choppyvideo"
></A
><B
>5.4. </B
>Video playback is choppy 
        </P
></DIV
><DIV
CLASS="answer"
><P
><B
> </B
>On a fast enough computer (say, over 1 GHz), choppy video
playback usually means that your overlay support or DMA support is
misconfigured. See the previous troubleshooting items.
        </P
><P
>On a very slow computer (say, 0-500 MHz), there is nothing
you can do short of hardware upgrades to make DVD playback run well.
        </P
><P
>For borderline computers (anything in between), you can
gain a modest (~10%) performance boost by upgrading from kernel 2.2 to
kernel 2.4 and using an SSE-optimized player program like
MPlayer.
        </P
><P
>Finally, if all else fails, run MPlayer with the option
<B
CLASS="command"
>mplayer -framedrop</B
> to patch over occasional glitches
in video playback.
        </P
></DIV
></DIV
><DIV
CLASS="qandaentry"
><DIV
CLASS="question"
><P
><A
NAME="choppysound"
></A
><B
>5.5. </B
>Sound playback is choppy
        </P
></DIV
><DIV
CLASS="answer"
><P
><B
> </B
>The most common cause of sound playback problems is from 
sound cards that do not support 48 kHz audio playback. For people in
this category, I strongly suggest that you purchase a new sound card.
Even a cheap PCI sound card can give you a substantial upgrade in sound
quality for less than the cost of two DVDs.
        </P
><P
>Failing that, you can lighten the load on your sound playback
system by not using a sound daemon such as ESounD or aRts and playing
the DVD audio directly to the OSS driver. To do this with MPlayer, run
<B
CLASS="command"
>mplayer -ao=oss</B
> along with whatever other options
you normally use.
</P
></DIV
></DIV
><DIV
CLASS="qandaentry"
><DIV
CLASS="question"
><P
><A
NAME="cssgarbled"
></A
><B
>5.6. </B
>Out of region discs play back garbled
        </P
></DIV
><DIV
CLASS="answer"
><P
><B
> </B
>In the past, older versions of most of the programs 
discussed here have had trouble decrypting out-of-region discs. The
result of a failed decryption looks like the colored video noise that
you see.
</P
><P
>Upgrading to the newest available version of any of the
programs should solve this problem.</P
></DIV
></DIV
><DIV
CLASS="qandaentry"
><DIV
CLASS="question"
><P
><A
NAME="csstimeout"
></A
><B
>5.7. </B
>Out-of-region discs hang on playback
        </P
></DIV
><DIV
CLASS="answer"
><P
><B
> </B
>Watch the DVD drive's access light while the program is
hanging. Is the light still blinking in an access pattern? If it is (and
usually it will be), that means the program is still in the middle of
decrypting the disc.
</P
><P
>Decrypting the DVD involves mounting a fairly
large-scale computational effort to recover the key. It is not at all
unusual for a computer to take five or even ten minutes to decrypt a
single DVD key.</P
><P
>In-region discs never have this problem because the DVD drive
firmware automatically decrypts discs that match with the drive's own
region.</P
></DIV
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="usage.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="moreinfo.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Software Usage</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Further Information</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>