<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>IPMasquerading+Napster mini-HOWTO: PROCEDURE</TITLE>
 <LINK HREF="IPMasquerading+Napster-5.html" REL=next>
 <LINK HREF="IPMasquerading+Napster-3.html" REL=previous>
 <LINK HREF="IPMasquerading+Napster.html#toc4" REL=contents>
</HEAD>
<BODY>
<A HREF="IPMasquerading+Napster-5.html">Next</A>
<A HREF="IPMasquerading+Napster-3.html">Previous</A>
<A HREF="IPMasquerading+Napster.html#toc4">Contents</A>
<HR>
<H2><A NAME="s4">4. PROCEDURE</A></H2>

<P>First off, ensure that you have the version (or newer) as listed above in the previous section. Also be sure they are installed correctly.
<P>
<OL>
<LI>Install Napster on the Windows client PC's</LI>
<LI>After installation and Napster user setup, this version of Napster will begin "Finding Acceptable Local Data Port", after a short time an error will occur.
Note: If you have already installed napster v2.0 beta 5a, under the file menu select 'Properties.'</LI>
<LI>At this point select the second option "I am not behind a firewall or I configured my firewall - Use TCP port:"</LI>
<LI>Enter a unique number. Each computer that will be running Napster will need to use a different port. It may be easier to use the last number of the IP address. For example: if the computer's IP is 192.168.1.2, then 6702 would be easiest to remember. 
Note: make sure you don't pick ports for services that are running (i.e. 21, 110, etc...see /etc/services for a listing)</LI>
<LI>Repeats steps 1 - 4 for all systems that will be using Napster.</LI>
<LI>Now login to your IPMasq'd system and modify a startup file of your choice (I choose to use /etc/rc.d/rc.local)
<PRE>
The following lines pass the connection to the Napster clients running on the hosts behind your IPMasq'd system.
(add them to the startup file - you'll need to one command for each host using Napster)

/usr/sbin/ipmasqadm portfw -a -P tcp -L xxx.xxx.xxx.xxx 6702 -R 192.168.1.2 6702
/usr/sbin/ipmasqadm portfw -a -P tcp -L xxx.xxx.xxx.xxx 6703 -R 192.168.1.3 6703
/usr/sbin/ipmasqadm portfw -a -P tcp -L xxx.xxx.xxx.xxx 6704 -R 192.168.1.4 6704
/usr/sbin/ipmasqadm portfw -a -P tcp -L xxx.xxx.xxx.xxx 6705 -R 192.168.1.5 6705

Note: XXX.XXX.XXX.XXX is the IP address of the Linux IPMasqing system (the Internet IP).
</PRE>

Note: If you are having problems with IPMASQADM or IPMasquerading in general see the IPMASQ-HOWTO. This document is provided to help people who have their systems configured. The IPMASQ-HOWTO will get into a deeper discussion of port forwarding and IPMasq'd in general.</LI>
</OL>
<P>
<HR>
<A HREF="IPMasquerading+Napster-5.html">Next</A>
<A HREF="IPMasquerading+Napster-3.html">Previous</A>
<A HREF="IPMasquerading+Napster.html#toc4">Contents</A>
</BODY>
</HTML>
