<HTML
><HEAD
><TITLE
>Driver and module initialization</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="The Linux SCSI Generic (sg) HOWTO"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Mmap-ed IO"
HREF="mmapio.html"><LINK
REL="NEXT"
TITLE='Sg and the "proc" file system'
HREF="proc.html"></HEAD
><BODY
CLASS="CHAPTER"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>The Linux SCSI Generic (sg) HOWTO</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="mmapio.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="proc.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="CHAPTER"
><H1
><A
NAME="INIT">Chapter 10. Driver and module initialization</H1
><P
>The size of the default reserved buffer can be specified when the
sg driver is loaded. If it is built into the kernel then use:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>    sg_def_reserved_size=&#60;n&#62;</PRE
></FONT
></TD
></TR
></TABLE
>
on the boot line (only supported in 2.4 kernels).</P
><P
>If sg is a module, it can be loaded with <B
CLASS="COMMAND"
>modprobe</B
>
in either manner:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>    modprobe sg
    modprobe sg def_reserved_size=&#60;n&#62;</PRE
></FONT
></TD
></TR
></TABLE
>
In the second case "&#60;n&#62;" is an integer (non negative). The default 
value is the value of the SG_DEF_RESERVED_SIZE defined in sg.h . 
This is currently 32768.</P
><P
>If sg is a module, it can be unloaded with <B
CLASS="COMMAND"
>rmmod</B
>
like this:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>    rmmod sg</PRE
></FONT
></TD
></TR
></TABLE
>
However if there is a file descriptor still open with the sg driver
(or there is an outstanding request awaiting a response) then the
sg module is considered to be busy and can't be unloaded.</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="mmapio.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="proc.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Mmap-ed IO</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Sg and the "proc" file system</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>