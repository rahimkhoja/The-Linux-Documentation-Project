<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
 <TITLE> Text-Terminal-HOWTO: Repair &amp; Diagnose </TITLE>
 <LINK HREF="Text-Terminal-HOWTO-21.html" REL=next>
 <LINK HREF="Text-Terminal-HOWTO-19.html" REL=previous>
 <LINK HREF="Text-Terminal-HOWTO.html#toc20" REL=contents>
</HEAD>
<BODY>
<A HREF="Text-Terminal-HOWTO-21.html">Next</A>
<A HREF="Text-Terminal-HOWTO-19.html">Previous</A>
<A HREF="Text-Terminal-HOWTO.html#toc20">Contents</A>
<HR>
<H2><A NAME="repair_"></A> <A NAME="s20">20.</A> <A HREF="Text-Terminal-HOWTO.html#toc20">Repair &amp; Diagnose </A></H2>

<P> Repairing a terminal has much in common with repairing a monitor
and/or keyboard.  Sometimes the built-in diagnostics of the terminal
will display on the screen.   By the symptoms, one may often isolate
the trouble to one of the following: bad keyboard, CRT dead, power
electronics failure (distorted display), or digital electronics
failure.  It's best to have a service manual, but even if you don't
have one, you can often still repair it.</P>

<H2><A NAME="repair_info"></A> <A NAME="ss20.1">20.1</A> <A HREF="Text-Terminal-HOWTO.html#toc20.1">Repair Books &amp; Websites </A>
</H2>

<H3>Books</H3>

<P> Bigelow, Stephen J.: Troubleshooting &amp; Repairing Computer
Monitors, 2nd edition, McGraw-Hill, 1997.  Doesn't cover the character
generation electronics nor the keyboard.</P>

<H3>Websites</H3>

<P> The FAQ 
<A HREF="http://www.repairfaq.org">http://www.repairfaq.org</A> for the newsgroup:
sci.electronics.repair is long and comprehensive, although it doesn't
cover terminals per se.  See the section "Computer and Video
Monitors".  Much of this information is applicable to terminals as are
the sections: "Testing Capacitors", "Testing Flyback Transformers",
etc.  Perhaps in the future, the "info" on repair in this HOWTO will
consist mainly of links to the above FAQ (or the like).</P>

<H2><A NAME="ss20.2">20.2</A> <A HREF="Text-Terminal-HOWTO.html#toc20.2">Safety</A>
</H2>

<P> CRT's use high voltage of up to 30,000 volts for color (less for
monochrome).  Be careful not to touch this voltage if the set is on
and the cover off.  It probably won't kill you even if you do since
the amount of current it can supply is limited.  But it is likely to
badly burn and shock you, etc.  High voltage can jump across air gaps
and go thru cracked insulation so keep your hands a safe distance from
it.  You should notice the well-insulated high voltage cable connected
to one side of the picture tube.  Even when the set is off, there is
still enough residual voltage on the picture tube cable connection to
give you quite a shock.  To discharge this voltage when the set is
unplugged use a screwdriver (insulated handle) with the metal blade
grounded to the picture tube ground cable with a jumper wire.  Don't
use chassis ground.</P>
<P>The lower voltages (of hundreds of volts) can be even more dangerous
since they are not current limited.  It is even more dangerous if your
hands are wet or if you are wearing a metal watchband, ring or the
like.  In rare cases people have been killed by it so be careful.  The
lowest voltages of only several volts on digital circuitry are fairly
safe but don't touch anything (except with a well insulated tool)
unless you know for sure.</P>

<H2><A NAME="ss20.3">20.3</A> <A HREF="Text-Terminal-HOWTO.html#toc20.3">Appearance of Display</A>
</H2>

<P> If the display is too dim, turn up the brightness and/or contrast.
using knobs on the exterior of the unit (if they exist).  If the
width, height or centering is incorrect, there are often control knobs
for these.  For some older terminals one must press an arrow key
(or the like) in set-up mode.</P>
<P>You may need to remove the cover to make adjustments, especially on
older models.  You could arrange things so that a large mirror is in
front of the terminal so as to view the display in the mirror while
making adjustments.  The adjustments to turn may be on a printed
circuit board.  While a screwdriver (possibly Phillips-head) may be
all that's needed, inductors may require special TV alignment tools
(plastic hex wrenches, etc.).  The abbreviated name of the adjustment
should be printed on the circuit board.  For example, here are some
such names:</P>
<P>
<UL>
<LI> V-Size adjusts the Vertical height (Size)</LI>
<LI> H-Size adjusts the Horizontal width (Size).  It may be an inductor.</LI>
<LI> V-Pos adjusts the Vertical Position</LI>
<LI> H-Pos adjusts the Horizontal Position</LI>
<LI> V-Lin adjusts Vertical Linearity (Use if width of scan lines
differs at the top and bottom of the screen)</LI>
<LI> V-Hold adjusts Vertical Hold (Use if screen is uncontrollable
scrolling)</LI>
<LI> Bright adjusts brightness (an external knob may also exist)</LI>
<LI> Sub-Bright adjusts brightness of subdued intensity mode (often
the normal mode: dimmer than bold or bright mode).</LI>
</UL>
</P>
<P>Changing linearity may change the size so that it will need to be
readjusted.  A terminal that has been stored for some time may have a
small display rectangle on the screen surrounded by a large black
Before adjusting it, leave the terminal on for a while since it will
likely recover some with use (the black borders will shrink).</P>

<H2><A NAME="ss20.4">20.4</A> <A HREF="Text-Terminal-HOWTO.html#toc20.4">Diagnose</A>
</H2>

<H3>Terminal Made a Noise or Smoked</H3>

<P> If the terminal made some noise just before it failed (or when you
turn it on after it failed) that noise is a clue to what is wrong.  If
you hear a noise or see/smell smoke, immediately turn the terminal off
to prevent further damage.  A pop noise may be a capacitor exploding
or a fuse blowing.  A buzzing noise is likely due to arcing.  The
problem may be in the high voltage power supply of several thousand
volts.</P>
<P>Remove the cover.  Look for discoloration and bulging/cracked
capacitors.  If the bad spot is not evident, turn it on again for a
short time and look for smoking/arcing.  For arcing, a dimly lit room
will help find it.  The high voltage cable (runs between the flyback
transformer and the side of the picture tube) may have broken
insulation that arcs to ground.  Fix it with high-voltage insulating
dope, or special electrical tape designed say for 10,000 volts.</P>
<P>The flyback transformer (high voltage) may make only a faint clicking
or sparking noise if it fails.  You may not hear it until you turn the
terminal off for a while and then turn it back on again.  To track
down the noise you may use a piece of small rubber tubing (such as
used in automobiles) as a stethoscope  to listen to it.  But while you
are listening for the noise, the terminal is suffering more damage so
try find it fast (but not so fast as to risk getting shocked).</P>
<P>A shorted power supply may cause a fuse to blow.  Replacing a blown
fuse may not solve the problem as the same short may blow the fuse
again.  Inspect for any darkened spots due to high heat and test those
components.  Shorted power transistors may cause the fuse to blow.
They may be tested with a transistor checker or even with an
ohm-meter.  Use the low ohm scale on an ohm-meter so that the voltage
applied by the meter is low.  This will reduce the possible damage to
good components caused by this test voltage.</P>
<P>If the terminal has been exposed to dampness such as being stored in a
damp place or near a kitchen with steam from cooking, a fix may be to
dry out the unit.  Heating a "failed" flyback transformer with a blow
dryer for several minutes may restore it.</P>

<H3>Terminal Made No Noise</H3>

<P> A blank screen may be due to someone turning the brightness
control to the lowest level or to aging.  The next thing to do is to
check the cables for loose or broken connections.  If there is no sign
of power, substitute a new power cord after making sure that the power
outlet on the wall is "hot".</P>
<P>If the keyboard is suspected, try it on another terminal of the same
type or substitute a good keyboard.  Wiggle the keyboard cable ends
and the plug.  Wires inside cables may break, especially near their
ends.  If the break is verified by wiggling it (having the problem go
on and off in synchronization with the wiggles), then one may either
get a new cable or cut into the cable and re-solder the breaks, etc.</P>
<P>One of the first things to do if the keyboard works is to put the
terminal into 
<A HREF="Text-Terminal-HOWTO-19.html#local_mode">Local Mode</A>.  If it works OK
in local, then the problem is likely in the connection to the host
computer (or incorrect interface) or in the UART chips of the
terminal.</P>

<H2><A NAME="ss20.5">20.5</A> <A HREF="Text-Terminal-HOWTO.html#toc20.5">Detective work</A>
</H2>

<P>By carefully inspecting the circuitry, one may often find the cause
of the problem.  Look for discoloration, cracks, etc.  An intermittent
problem may sometimes be found by tapping on components with a
ball-point pen (not the metal tip of course).  A break in the
conductor of a printed circuit board may sometimes be revealed by
flexing the board.  Solder that looks like it formed a drop or a
solder joint with little solder may need re-soldering.  Soldering may
heat up transistors (and other components) and damage them so use a
heat sink if feasible.  One failure may cause others, so unless you
find the original cause, the failure may reoccur.</P>
<P>If you have a common brand of terminal, you may be able to search the
Internet (including newsgroup postings) to find out what the most
frequent types of problems are for your terminal and perhaps
information on how to fix it.  If you find that a certain component
is bad you may search for this component (for example R214 wyse) and
hopefully find a report by someone else who had the same problem.
Such a report may indicate other components that failed at the same
time.  If a component is damaged so badly that its value can't be
read, then you might find it on the Internet.  The manufacturer may
have on-line data that search engines don't index.</P>
<P>To see if the digital electronics work, try (using a good keyboard)
typing at the bad terminal.   Try to read this typing at a
good terminal (or the console) using the copy command or with a
terminal communication program such as picocom.  You may need to hit
the return key at the terminal in order to send a line.  One may
ask the bad terminal for its identity etc. from another terminal.
This will show if two-way communication works.</P>

<H2><A NAME="ss20.6">20.6</A> <A HREF="Text-Terminal-HOWTO.html#toc20.6">Error Messages on the Screen</A>
</H2>

<P> You are in luck if you see an error message on the screen.  This
usually happens when you first turn the terminal on.</P>

<H3>Keyboard Error</H3>

<P> This usually means that the keyboard is not plugged in, or that
the connection is loose.  For more serious problems see 
<A HREF="#keyboards_">Keyboards</A></P>

<H3>Checksum Error in NVR</H3>

<P> NVR is "Non-Volatile RAM".  This means that the NVR where the
set-up information is stored has become corrupted.  The terminal will
likely still work but the configuration that was last saved when
someone last configured the terminal has likely been lost.  Try
configuring again and then save it.  It might work.  On very old
terminals (early 1980's) there was a battery-powered CMOS to save the
configuration so in this case the problem could be just a dead
battery.  Sometimes the EEPROM chip (no battery needed) goes bad after
too many saves.  It may be hard to find.  If you can't fix it you are
either stuck with the default configuration or you may have escape
sequences sent to the terminal when you start it up to try to
configure it.</P>

<H2><A NAME="ss20.7">20.7</A> <A HREF="Text-Terminal-HOWTO.html#toc20.7">Capacitors</A>
</H2>

<P> Electrolytic capacitors have a metal shell and are may become weak
or fail if they set for years without being used.  Sometimes just
leaving the terminal on for a while will help partially restore them.
If you can, exercise any terminals you have in storage by turning them
on for a while every year or so.</P>
<P>Note that cheap electrolytic capacitors designed for use in audio
circuits may fail if used in high frequency horizontal circuitry.  For
this, you need low resistance (low ESR) capacitors.  Replace
non-polarized capacitors (NP) with the same (or with "bi-polar").</P>
<P>If the terminal display takes several minutes of warmup before it's 
OK then it's likely that you have one or more bad electrolytic
capacitors.  One trick to find the bad one is to parallel each
suspected bad one with a good one (of at least the same voltage rating
and capacitance of roughly the same order of magnitude).  If the
display improves a lot when you do this, then you've likely found the
bad capacitor.  Be careful not to get shocked when doing this.  The
actual voltage with respect to ground may be much higher than the
voltage rating of the capacitor.</P>

<H2><A NAME="keyboards_"></A> <A NAME="ss20.8">20.8</A> <A HREF="Text-Terminal-HOWTO.html#toc20.8">Keyboards </A>
</H2>

<H3>Interchangeability</H3>

<P> The keyboards for terminals are not the same as keyboards for
PC's.  The difference is not only in the key layout but in the codes
generated when a key is pressed.  Also, keyboards for various brands
and models of terminals are not always interchangeable with each
other.  Sometimes one get an "incompatible" keyboard to partially work
on a terminal:  All the ASCII keys will work OK, but special keys such
as set-up and break will not work correctly.</P>

<H3>How They Work</H3>

<P> Most keyboards just make a simple contact between two conductors
when you press a key.  Electronics inside a chip in the keyboard
converts this contact closure into a code sent over the keyboard's
external cable.  Instead of having a separate wire (or conductor)
going from each key to the chip, the following scheme is used:
Number the conductors say from 1-10 and A-J.  For example: conductor 3
goes to several keys and conductor B goes to several keys, but only
one key has both conductors 3 and B going to it.  When that key is
pressed, a short circuit is established between 3 and B.  The chip
senses this short and knows what key has been pressed.  Such a scheme
reduces the number of conductors needed (and  reduces the number of
pins needed on the chip).  It's a similar scheme to what is called a
"crossbar switch".</P>

<H3>Modern vs Old Keyboards</H3>

<P> While the modern keyboard and the old fashioned type look about
the same, the mechanics of operation are different.  The old ones have
individual key switches under the key-caps with each switch enclosed
in a hard plastic case.  The modern ones use large flexible plastic
sheets (membrane) the size of the keyboard.  A plastic sheet with
holes in it is sandwiched between two other plastic sheets containing
printed circuits (including contact points).  When you press a key,
the two "printed" sheets are pressed together at a certain point,
closing the contacts printed on the sheets at that point.</P>

<H3><A NAME="two_chars"></A> One Press Types 2 Different Characters </H3>

<P> If, due to a defect, conductors 3 and 4 become shorted together
then pressing the 3-B key will also short 4 and B and the chip will
think that both keys 3-B and 4-B have been pressed.  This is likely to
type 2 different characters when all you wanted was one character.</P>

<H3>Keyboard doesn't work at all</H3>

<P> If none of the keys work try another keyboard (if you have one) to
verify that the keyboard is the problem.  One cause is a broken wire
inside the cord (cable) that connects it to the terminal.  The most
likely location of the break is at either end of the cord.  Try
wigging the ends of the cord while tapping on a key to see if it works
intermittently.  If you find a bad spot, you may carefully cut into
the cord with a knife at the bad spot and splice the broken conductor.
Sometimes just a drop of solder will splice it.  Seal up the cord with
electrical tape, glue, or caulk.  A keyboard that has gotten wet may
not work at all until it's dry.</P>

<H3>Typing b displays bb, etc. (doubled)</H3>

<P> If all characters appear double there is likely nothing wrong with
the keyboard.  Instead, your terminal has likely been incorrectly set
up for half-duplex (HDX or local echo=on) and every character you type
is echoed back both from the electronics inside your terminal and from
your host computer.  If the two characters are not the same, there may
be a short circuit inside your keyboard.  See 
<A HREF="#two_chars">One Press Types 2 Different Characters</A></P>

<H3>Row upon row of the same character appears</H3>

<P> This may happen when auto-repeat is enabled and a key is held
pressed down (or the like).  It may be a key that sticks down when
typed or it could be an electrical short that has the same
effect.</P>

<H3>Key sticks in down position (individual switches)</H3>

<P> First try tapping on it hard several times but it's not likely to
fix it.  Next, your can either remove the keycap (if it is removable)
and squirt a little cleaner on the push rod or work the key up and
down while pushing on it sideways (or both).  If this doesn`t work you
may need to take the switch apart and clean the components.</P>
<P>If you decide to remove the keycap see 
<A HREF="#kbd_sw">Keyboards with individual switches</A>.  Press repeatedly on the
push rod until it works OK and also displays its character on the
screen.  At first, the cleaner may cause the key to fail to display
its character.  Some keys stick due to stickiness on the keycap bottom
surface..  If the key sticks in the fully down position this could be
the problem.  So you might need to clean this this area too.</P>
<P>If you decide to push it sideways, use a small screwdriver to push
sideways with while pushing the key up and down with both your finger
and the screwdriver.  You should push it sideways in one of the four
directions and try different directions.  What you are doing by this
is attempting to force out a foreign particles that are rubbing on the
side of the key's push-rod and making it stick.  Again, the problem
may return later.</P>
<P>Always test the key just after fixing it and a short time later.  To test
the key, push it down very slowly and see if it sticks.  Also push it
sideways a little as you're pushing it down.  If you hit it fast or
push it straight down, then you may not observe the stickiness.  This
test will detect a key that seemingly  works OK but is likely to cause
trouble later on.</P>

<H3>Key electrically shorted</H3>

<P>If you suspect that a key is shorted out, fix it by cleaning the
contacts per 
<A HREF="#clean_keys">Cleaning Keyboard Contacts</A>.
If this problem happens at the login prompt see 
<A HREF="Text-Terminal-HOWTO-19.html#key_shorted_getty">Key shorted</A>.</P>

<H3>Liquid spilled on the keyboard</H3>

<P> If water or watery liquid has been spilled on the keyboard (or if
it was exposed to rain, heavy dew, or dampness) some (or all) keys may
not work right.  The dampness may cause a key to short out (like it
was pressed down all the time) and you may see the screen fill up with
that letter if auto-repeat is enabled.  If it's gotten wet and then
partially (or fully) dried out, certain keys may not work due to
deposits on the contact surfaces.  For the modern type of keyboard,
one may readily take apart the plastic sheets inside and dry/clean
them.  For the old type one may let it dry out in the sun or oven (low
temp.).  When it's dry it may still need contact cleaner on some keys
as explained below.</P>

<H3><A NAME="clean_keys"></A> Cleaning keyboard contacts  </H3>

<H3>Keyboards with membranes</H3>

<P> On some newer keyboards, the plastic sheets (membranes) are easy
to remove for inspection and cleaning if needed.  You only need to
remove several screws to take apart the keyboard and get to the
sheets.  On some old IBM keyboards the sheets can't be removed without
breaking off many plastic tabs which will need to be repaired with
glue to put back (probably not worthwhile to repair).  Such a keyboard
may sometimes be made to work by flexing, twisting, and/or pounding
the assembly containing the plastic sheets.</P>

<H3><A NAME="kbd_sw"></A> Keyboards with individual switches </H3>

<P> What follows is for older keyboards that have separate hard
plastic switches for each key.  Before going to all the work of
cleaning electrical contacts first try turning the keyboard
upside-down and working the bad keys.  This may help dislodge dirt,
especially if you press the key hard and fast to set up vibration.
Pressing the key down and wiggling it from side to side, etc. often
helps.</P>
<P>If this doesn't work, you may try to clean the key switch with a
liquid contact cleaner (available at electronic supply stores) which
usually comes in a spay can.  To get to the switch, you first need to
remove the key-cap (the square that you hit with your finger while
typing).  Warning: Key-caps on modern keyboards can't be removed.
Often, the key-caps may be removed by prying them upward using a small
screwdriver with the tip placed under a key while preventing excessive
tilting of the key with a finger.  There exists a special tool known
as keycap puller but you can get by without it.  The key-cap may tilt
a bit and wobble as it comes loose.  It may even fly up into the air
and onto the floor.</P>
<P>Then you may have two choices on how to clean the contacts: Use
contact cleaner spray directly on top of the key switch, or take the
key switch apart and clean it (the best way if it comes apart easily).
Still another choice is to replace the key switch with a new or used
one but this is often more work (and more cost if you have to go thru
the trouble of finding a replacement.</P>
<P>Directly spraying contact cleaner into the top of the key switch,
without taking the switch apart, is the fastest method but the cleaner
may not reach the contacts it's supposed to clean.  Before spraying,
clean the area around it a little.  With the keyboard live (or with
the key contacts connected to an ohm-meter) use the plastic tube which
came with the spray to squirt cleaner so it will get inside the key
switch.  Try to move the key push rod up and down while spraying.
Don't let the cleaning liquid get under nearby keys where it may pick
up dust and then seep (with the dust) into adjacent key switches.  If
you make this mistake you may fix one key but damage nearby keys.  If
this should happen, immediately work (repeatedly press) the affected
nearby keys until they continue to work OK.</P>
<P>You might tilt the keyboard so that the cleaner flows better into the
contacts.  For the CIT101e terminal with an Alps keyboard, this means
tilting the top row of numeric keys up toward the ceiling.  While
moving the key switch up and down with a pen or small screwdriver
handle avoid getting the toxic cleaner liquid on your skin (or wear
gloves).  You might try turning the keyboard upside-down while working
the key to drain off remaining cleaner.  The more cleaner you squirt
in the more likely it will fix it but it is also more likely to do
more damage to the plastic or contaminate adjacent keys, so use what
you think is just enough to do the job.  Once the key works OK, work
it up and down a little more and test it a half minute later, etc. to
make sure it will still work OK.</P>
<P>Sometimes a key works fine when the contacts inside are saturated with
contact cleaner liquid.  But when the liquid dries a few minutes later
then the resulting scale deposit left from the evaporation of the
cleaning liquid on the contacts, prevents good contact.  Then the key
may work erratically (if at all).  Operating the key when the liquid
is drying inside may help.  Some switches have the contacts nearly
sealed inside so little if any contact cleaner reaches the contacts.
The cleaner that does get to the contacts may carry contamination with
it (cleaning around the tops before spraying helps minimize this).</P>
<P>If you want to disassemble the key switch, first inspect it to see 
if it comes apart (and if so, how).  Sometimes one may remove the cover
of the switch without removing the switch from the keyboard.  To do
this pry up (or pull up) the top of the key switch after prying apart
thin plastic tabs that retain it.  You may be able to use two small
screwdrivers for this and be able to pry up the switch while prying
apart the plastic retaining tabs.  Don't pry too hard or you may break
the plastic.  If this can't be done, you may have to unsolder the
switch and remove it in order to take it apart (or replace it).  Once
the switch has been taken apart you still may not be able to see the
contacts if the contact surfaces are sandwiched together (nearly
touching).  You may put contact cleaner on the contacts by squirting
some cleaner on an edge so it can penetrate onto the contacts.  Insert
a tiny screwdriver blade just a little so as to pry apart the edges as
you apply the cleaner.  This will help the cleaner reach the contacts.
Work the contacts open and closed with a screwdriver to help clean
them and note if the key is working by looking at the terminal screen.  </P>
<P>There may be some kind of clip holding the contact surfaces together
which needs to be removed so you can pry them apart.  Take care not to
loose small parts as they may fly up into the air when taking apart a
key switch.  As a last resort, you may try bending the moving part
that the push-rod pushes so as to make a stronger contact.  In my
terminal, this part looks like the electrical contact but it just
pushes the real electrical contact thru a thin insulator.</P>
<P>When putting the key switch back together, make sure that the spring
is in the right place.  If, after you assemble the switch, the key
pushes down too hard or too easy, the spring is likely not positioned
right.  If the spring is supposed to be recessed into a hole on the
push rod, one way to temporarily "glue" the spring into the push-rod
is to use a half-drop of water on the end of the spring.  Then insert
this end into the push rod and assemble quickly before the water
dries.  This should keep the spring from falling out of the push rod
during assembly.  Instead of using water, you may stand the keyboard on
end (or upside-down) to keep the spring from falling out during
assembly.</P>

<HR>
<A HREF="Text-Terminal-HOWTO-21.html">Next</A>
<A HREF="Text-Terminal-HOWTO-19.html">Previous</A>
<A HREF="Text-Terminal-HOWTO.html#toc20">Contents</A>
</BODY>
</HTML>
