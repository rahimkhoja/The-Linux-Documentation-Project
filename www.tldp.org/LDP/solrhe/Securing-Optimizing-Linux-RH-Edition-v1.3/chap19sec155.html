<HTML
><HEAD
><TITLE
>Encrypt and decrypt</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.60"><LINK
REL="HOME"
TITLE="Securing and Optimizing Linux"
HREF="index.html"><LINK
REL="UP"
TITLE="Software -Securities/Management & Limitation"
HREF="soft-limits.html"><LINK
REL="PREVIOUS"
TITLE="Importing keys"
HREF="chap19sec154.html"><LINK
REL="NEXT"
TITLE="Set Limits using Qouta"
HREF="quota.html"></HEAD
><BODY
CLASS="section"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Securing and Optimizing Linux: RedHat Edition -A Hands on Guide</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="chap19sec154.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 19. Software -Securities/Management &#38; Limitation</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="quota.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="section"
><H1
CLASS="section"
><A
NAME="AEN10104"
>19.4. Encrypt and decrypt</A
></H1
><P
>&#13;          After installing, importing, signing and configuring everything in the way that we want, we can start on encrypting and decrypting our work.

          To encrypt and sign data for the user RedHat that we have added on our keyring above, use the following command:
          <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;          [root@deep] /# <B
CLASS="command"
>gpg</B
> -sear RedHat &#60;file&#62;
          </PRE
></TD
></TR
></TABLE
>
          </P
><DIV
CLASS="example"
><A
NAME="AEN10109"
></A
><P
><B
>Example 19-3. Encrypting</B
></P
><P
>&#13;            <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;          [root@deep] /# <B
CLASS="command"
>gpg</B
> -sear RedHat message-to-RedHat.txt
          </PRE
></TD
></TR
></TABLE
>
          <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="literallayout"
><TT
CLASS="computeroutput"
>&#13;          You need a passphrase to unlock the secret key for
          user: "Gerhard Mourani (Open Network Architecture) &#60;gmourani@videotron.ca&#62;"
          1024-bit DSA key, ID BBB4BA9B, created 1999-10-26
          Enter passphrase:
          </TT
></PRE
></TD
></TR
></TABLE
>
          Of the arguments passed, 
          <P
></P
><TABLE
BORDER="0"
><TBODY
><TR
><TD
>&#13;          The <TT
CLASS="literal"
>s</TT
> is for signing 
          </TD
></TR
></TBODY
></TABLE
><P
></P
>
          To avoid the risk that somebody else claims to be you, it is very useful to sign everything you encrypt, 
          <P
></P
><UL
><LI
><P
>&#13;          e for encrypting, 
          </P
></LI
><LI
><P
>&#13;          a to create <SPAN
CLASS="acronym"
>ASCII</SPAN
> armored output .asc ready for sending by mail, 
          </P
></LI
><LI
><P
>&#13;          r to encrypt the user id name 
          </P
></LI
><LI
><P
>&#13;          &#60;file&#62; is the message you want to encrypt.
          </P
></LI
></UL
>
          </P
></DIV
><P
>&#13;          To decrypt data, use the following command:
          <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;          [root@deep] /# <B
CLASS="command"
>gpg</B
> -d &#60;file&#62;
          </PRE
></TD
></TR
></TABLE
>
          </P
><DIV
CLASS="example"
><A
NAME="AEN10132"
></A
><P
><B
>Example 19-4. Decrypting</B
></P
><P
>&#13;            <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;          [root@deep] /# <B
CLASS="command"
>gpg</B
> -d message-to-Gerhard.asc
          </PRE
></TD
></TR
></TABLE
>
          <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="literallayout"
><TT
CLASS="computeroutput"
>&#13;          You need a passphrase to unlock the secret key for
          user: "Gerhard Mourani (Open Network Architecture) &#60;gmourani@videotron.ca&#62;"
          2048-bit ELG-E key, ID 71D4CC44, created 1999-10-26 (main key ID BBB4BA9B)
          Enter passphrase:
          </TT
></PRE
></TD
></TR
></TABLE
>
          Where 
          <P
></P
><UL
><LI
><P
>&#13;           -d is for decrypting 
          </P
></LI
><LI
><P
>&#13;          &#60;file&#62; is the message you want to decrypt. 
          </P
></LI
></UL
>
          It is important that the public key of the sender of the message we want to decrypt be in our public keyring 
          database. or of course nothing will work.          
          </P
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="AEN10144"
>19.4.1. Exporting your public key</A
></H2
><P
>&#13;          You can spread your wings by exporting and distributing your public key to the world. This can be done by publishing it on your homepage, through an available key server on the Internet, or any other available 
          method. GnuPG has some useful options to help you publish your public keys.

          To extract your public key in ASCII armored output, use the following command:
          <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;          [root@deep] /# <B
CLASS="command"
>gpg</B
> --export --armor &#62; Public-key.asc
          </PRE
></TD
></TR
></TABLE
>

          where 
          <P
></P
><UL
><LI
><P
>&#13;           --export is for extracting your Public-key from your pubring encrypted file, 
          </P
></LI
><LI
><P
>&#13;           --armor is to create ASCII armored output that you can mail, publish or put it on a web page 
          </P
></LI
><LI
><P
>&#13;          &#62; <TT
CLASS="filename"
>Public-key.asc</TT
> is to put the result in a file that you've named <TT
CLASS="filename"
>Public-key.asc</TT
>.
          </P
></LI
></UL
>
          </P
><P
>&#13;          You need to Check the signature, once you have extracted your public key and exported it, everyone who knows or gets your public key should be able to check whether encrypted data from you is also really signed by you.

          To check the signature of encrypted data, use the following command:
          <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;          [root@deep] /# <B
CLASS="command"
>gpg</B
> --verify &#60;Data&#62;
          </PRE
></TD
></TR
></TABLE
>
          The  --verify option will check the signature where &#60;Data&#62; is the encrypted data/file you want to verify.
          </P
><P
>&#13;          Some possible uses of GnuPG software
          <P
></P
><OL
TYPE="1"
><LI
><P
>&#13;          Send encrypted mail massage.
          </P
></LI
><LI
><P
>&#13;          Encrypt backup files before transmission over the network.
          </P
></LI
><LI
><P
>&#13;          Encrypt individual sensitive files <SPAN
CLASS="abbrev"
>i.e.</SPAN
> a file that handle all your passwords.
          </P
></LI
></OL
>
          </P
><TABLE
CLASS="sidebar"
BORDER="1"
CELLPADDING="5"
><TR
><TD
><DIV
CLASS="sidebar"
><A
NAME="AEN10170"
></A
><P
><B
>&#13;          Installed files </B
></P
><P
><P
></P
><TABLE
BORDER="0"
><TBODY
><TR
><TD
><TT
CLASS="filename"
>&#13;          /usr/bin/gpg
          </TT
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>&#13;          /usr/lib/gnupg
          </TT
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>&#13;          /usr/lib/gnupg/rndunix
          </TT
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>&#13;          /usr/lib/gnupg/rndegd
          </TT
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>&#13;          /usr/lib/gnupg/tiger
          </TT
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>&#13;          /usr/man/man1/gpg.1
          </TT
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>&#13;          /usr/share/gnupg
          </TT
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>&#13;          /usr/share/gnupg/options.skel
          </TT
></TD
></TR
></TBODY
></TABLE
><P
></P
>
          </P
></DIV
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="chap19sec154.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="quota.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Importing keys</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="soft-limits.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Set Limits using Qouta</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>