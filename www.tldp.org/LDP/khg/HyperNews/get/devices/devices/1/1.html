
<HTML>
<HEAD>
<TITLE>Re: Network Device Drivers</TITLE>
<LINK rel="owner" href="mailto:">
<SCRIPT LANGUAGE="JavaScript">
<!-- hide this

function help(message) {
  self.status = message;
  return true;
}
// stop hiding -->
</SCRIPT>

</HEAD>
<BODY>
<strong>The
HyperNews <a href="../../../khg.html">Linux KHG</a>
Discussion Pages</strong>
<hr>
<NOBR>





</NOBR><BR>
<H2><IMG src="../../../../../Icons/more.gif" ALT="More:"
  WIDTH=15 HEIGHT=15
  ALIGN="bottom">
Re: Network Device Drivers</H2>

<DL> <DD>
<NOBR>
<font size=+1><I>Forum:</I> <A HREF="../../devices.html" >
 Device Drivers</A> </font><BR>

<I>Re</I>: 
  <IMG SRC="../../../../../Icons/note.gif" 
   WIDTH=15 HEIGHT=15
   ALT="Note" ALIGN="absmiddle">
  <A HREF="../1.html" >
   Re: Network Device Drivers</A>  (<A HREF="http://rsphy1.anu.edu.au/~gpg109" >Paul Gortmaker</A>)<BR>
<I>Keywords:</I> network driver functions <BR>
<I>Date:</I> Thu, 30 May 1996 10:42:09 GMT <BR>
<I>From:</I> <A HREF="http://www.csc.calpoly.edu/~ntucker/" >Neal Tucker</A> &lt;<A HREF="mailto:ntucker@adobe.com" >ntucker@adobe.com</A>&gt; <BR>

</NOBR>
</DD> </DL>

<P>
<table border cellpadding=5 cellspacing=0 
 width="100%" BGCOLOR="#FFFFFF">
 <tr><td>
Paul Gortmaker says:
<PRE>
>Somebody asked me about a year or so ago as to what the basics
>of a net driver would look like. 
>
>1) Probe:
>        called at boot to check for existence of card. Best if it
>        can check un-obtrsively by reading from memory, etc. Can
>        also read from i/o ports. Writing to i/o ports in a probe
>        is *not* allowed as it may kill another device.
>        Some device initialization is usually done here (allocating
>        i/o space, IRQs,filling in the dev->??? fields etc.)
</PRE>

You must be the guy that wrote that part of the ethernet
HOWTO.  :-)

<p>
I've just recently been looking at the network device driver
interface, and I read your stuff and this part confused me,
since all the code I was looking at (dummy, loopback, slip..)
refers to this as "init", rather than "probe".  (which may
sound a bit nit picky, but there were other routines called
"probe" that I studied for a while, thinking they were the
important ones (they turned out to be used for module
initialization only) :-).

<p>
But on to my real reason for writing...
One thing that I think would be helpful to people trying to
write a network driver for the first time is a description of
how this is all hooked into the kernel.  I've found plenty of
examples of what the actual driver code needs to do, (lots of
some_driver.c files, including skeleton.c, which is usually
what people point to), but no explanation of how to get it
called.

<p>
Basically what it comes down to is an explanation of Space.c,
which doesn't do very much, but is a bit funny looking to a 
first-timer.  Now that I understand it, it seems a bit obvious,
but back when I was going mad trying to figure out why my driver
didn't execute, it would have been really nice to have it all
spelled out.
<p>
So once it's done, I will submit a description.  If you'd like,
check out a start at <A href="http://fester.axis.net/~linux/454.html">
http://fester.axis.net/~linux/454.html</a>.   Make sure to let
me and/or the rest of the world what you think.

-Neal Tucker
</td></tr>
</table>
<P><NOBR>





</NOBR><BR>
<P><B><A NAME="Messages">Messages</A></B>
<NOBR>
<font size=-1>







</font>
</NOBR>
 <P>
<NOBR>
<DL COMPACT>
<DT> 1. <IMG src="../../../../../Icons/more.gif" ALT="More:" WIDTH=15 HEIGHT=15 ALIGN="absmiddle">
<A HREF="1/1.html">
network driver info</A> <i> by <A HREF="http://www.csc.calpoly.edu/~ntucker/">Neal Tucker</A></i> </DT>
<DT> -&gt; <IMG src="../../../../../Icons/idea.gif" ALT="Idea:" WIDTH=15 HEIGHT=15 ALIGN="absmiddle">
<A HREF="1/1/1.html">
Network Driver Desprately Needed</A> <i> by <A HREF="http://www.aerotek.co.uk">Paul Atkinson</A></i> </DT>
</DL>
</NOBR>

<P>
<P>



  






<BR> 
 
<BR></BODY>
</HTML>
