
<HTML>
<HEAD>
<TITLE>add_timer function errata?</TITLE>
<LINK rel="owner" href="mailto:">
<SCRIPT LANGUAGE="JavaScript">
<!-- hide this

function help(message) {
  self.status = message;
  return true;
}
// stop hiding -->
</SCRIPT>

</HEAD>
<BODY>
<strong>The
HyperNews <a href="../../khg.html">Linux KHG</a>
Discussion Pages</strong>
<hr>
<NOBR>





</NOBR><BR>
<H2><IMG src="../../../../Icons/question.gif" ALT="Question:"
  WIDTH=15 HEIGHT=15
  ALIGN="bottom">
add_timer function errata?</H2>

<DL> <DD>
<NOBR>
<font size=+1><I>Forum:</I> <A HREF="../reference.html" >
 Supporting Functions</A> </font><BR>
<I>Date:</I> Mon, 07 Oct 1996 09:45:17 GMT <BR>
<I>From:</I> <A HREF="http://www.monash.edu.au/~timf" >Tim Ferguson</A> &lt;<A HREF="mailto:timf@dgs.monash.edu.au" >timf@dgs.monash.edu.au</A>&gt; <BR>

</NOBR>
</DD> </DL>

<P>
<table border cellpadding=5 cellspacing=0 
 width="100%" BGCOLOR="#FFFFFF">
 <tr><td>

<P>It seems that when using the add_timer function in newer
versions of the kernel (2.0.0+), the `expires' variable
in the timer_list struct is the time rather than the
length of time before the timer will be processed.  To
be backward compatible with older versions of linux,
you need to do something like:
</P>

<P>
<PRE>if the old version was:
   timer.expires = TIME_LENGTH;
</PRE>
</P>

<P>
<PRE>new version would be:
   timer.expires = jiffies + TIME_LENGTH;
</PRE>
</P>

<P>where TIME_LENGTH is the time in 1/100'ths of a second.
</P>

<P>Could anyone tell me if they found this also to be the case,
and if so, could the Linux hackers guide please be updated.
</P>

<P>
<PRE>    thanks,
             Tim.

</PRE>
</P>

</td></tr>
</table>
<P><NOBR>





</NOBR><BR>
<P><B><A NAME="Messages">Messages</A></B>
<NOBR>
<font size=-1>







</font>
</NOBR>
 <P>
<NOBR>
<DL COMPACT>
<DT> 1. <IMG src="../../../../Icons/smile.gif" ALT="Ok:" WIDTH=15 HEIGHT=15 ALIGN="absmiddle">
<A HREF="4/1.html">
add_timer function errata</A> <i> by Tom Bjorkholm</i> </DT>
</DL>
</NOBR>

<P>
<P>



  






<BR> 
 
<BR></BODY>
</HTML>
