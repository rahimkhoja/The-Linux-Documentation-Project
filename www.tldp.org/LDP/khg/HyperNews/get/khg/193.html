
<HTML>
<HEAD>
<TITLE>Realtime Problem</TITLE>
<LINK rel="owner" href="mailto:">
<SCRIPT LANGUAGE="JavaScript">
<!-- hide this

function help(message) {
  self.status = message;
  return true;
}
// stop hiding -->
</SCRIPT>

</HEAD>
<BODY>
<strong>The
<a href="http://www.hypernews.org/HyperNews/get/hypernews.html">
HyperNews <a href="../khg.html">Linux KHG</a>
Discussion Pages</strong>
<hr>
<NOBR>





</NOBR><BR>
<H2><IMG src="../../../Icons/question.gif" ALT="Question:"
  WIDTH=15 HEIGHT=15
  ALIGN="bottom">
Realtime Problem</H2>

<DL> <DD>
<NOBR>
<font size=+1><I>Forum:</I> <A HREF="../khg.html" >
 The Linux Kernel Hackers' Guide</A> </font><BR>
<I>Date:</I> Wed, 14 Jan 1998 20:51:59 GMT <BR>
<I>From:</I> <A HREF="http://home.t-online.de/home/Uwe.Gaethke" >Uwe Gaethke</A> &lt;<A HREF="mailto:Uwe.Gaethke@t-online.de" >Uwe.Gaethke@t-online.de</A>&gt; <BR>

</NOBR>
</DD> </DL>

<P>
<table border cellpadding=5 cellspacing=0 
 width="100%" BGCOLOR="#FFFFFF">
 <tr><td>

Hi!
<P>

I do have a problem with the realtime capabilities of Linux. I wrote a loadable driver which uses the RealTimeClock to generate periodic interrupt at a frequency of 1024Hz. With each interrupt the driver increments an internal counter. The 'read' function of the driver returns simply that counter.
<P>

Next I wrote a realtime task (with the highest priority) which read that RTC continuously. This tasks checks if the read counter is incremented by one between two read calls. If not, it prints an error message which includes also the time between the last two read calls.
<P>

What I expect is: 1. The task calls 'read', 2. The RTC generates an Interrupt, 3. The task returns from 'read'. 
<P>

If this is done fast enough (less than 1ms) every interrupt will get through to the realtime task.
<P>

And here is my surprise: Everything worked as expected until I called 'free' or 'ps' from a different shell. At this time the task seem to loose interrupts for almost exact 10ms (i.e. 10 to 11 interrupts). It seems that the scheduling is blocked for one tick.
<P>

Does anybody know why this happens? 
<P>


<PRE>Thanks for your help,
  Uwe
</PRE>
<P>

</td></tr>
</table>
<P><NOBR>





</NOBR><BR>
<P><B><A NAME="Messages">Messages</A></B>
<NOBR>
<font size=-1>







</font>
</NOBR>
 <P>
<NOBR>
<DL COMPACT>
<DT> 1. <IMG src="../../../Icons/feedback.gif" ALT="Feedback:" WIDTH=15 HEIGHT=15 ALIGN="absmiddle">
<A HREF="193/1.html">
SCHED_FIFO scheduling</A> <i> by Balaji Srinivasan</i>
 <IMG SRC="../../../Icons/newest.gif" ALT="newest" WIDTH=31 HEIGHT=12
  ALIGN="bottom"> </DT>
</DL>
</NOBR>

<P>
<P>



  






<BR> 
 
<BR></BODY>
</HTML>
