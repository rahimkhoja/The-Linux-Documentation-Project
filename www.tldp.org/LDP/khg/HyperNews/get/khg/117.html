
<HTML>
<HEAD>
<TITLE>calling interupts from linux</TITLE>
<LINK rel="owner" href="mailto:">
<SCRIPT LANGUAGE="JavaScript">
<!-- hide this

function help(message) {
  self.status = message;
  return true;
}
// stop hiding -->
</SCRIPT>

</HEAD>
<BODY>
<strong>The
HyperNews <a href="../khg.html">Linux KHG</a>
Discussion Pages</strong>
<hr>
<NOBR>





</NOBR><BR>
<H2><IMG src="../../../Icons/question.gif" ALT="Question:"
  WIDTH=15 HEIGHT=15
  ALIGN="bottom">
calling interupts from linux</H2>

<DL> <DD>
<NOBR>
<font size=+1><I>Forum:</I> <A HREF="../khg.html" >
 The Linux Kernel Hackers' Guide</A> </font><BR>
<I>Keywords:</I> interrupts callable from C. <BR>
<I>Date:</I> Thu, 18 Sep 1997 14:55:46 GMT <BR>
<I>From:</I> John J. Binder &lt;<A HREF="mailto:binder@cs.berkeley.edu" >binder@cs.berkeley.edu</A>&gt; <BR>

</NOBR>
</DD> </DL>

<P>
<table border cellpadding=5 cellspacing=0 
 width="100%" BGCOLOR="#FFFFFF">
 <tr><td>

I'm trying to figure out how to run irq 0x10 from gcc so as to 
interact with the video card directly. I believe it will have to be done with inline assembler.
<P>


<PRE> The general question is "How do you make interupts work from gcc.</PRE>
<P>

To say get the video mode (coded for with 0x0f in register ah
when irq 0x10 is called) I tried a fragment like:
<P>


<PRE>___________
int ans;
__asm__ __volatile__ (
	"movb $0x0F,<A HREF="mailto:%%ah">%%ah</A>\n\t" \
	"int $0x10\n\t" \
	"movl <A HREF="mailto:%%eax">%%eax</A>,ans\n\t" \
	:"=memory" (ans) \
	:
	:"ax"
);</PRE>
<P>

printf( "ans='%d'\n",(int) ans);
<P>

_____________
<P>

But it gives a segmentation fault.
<P>

Permissions? ioperm??  whats the answer?
<P>

Thanks 
John
<P>

</td></tr>
</table>
<P><NOBR>





</NOBR><BR>
<P><B><A NAME="Messages">Messages</A></B>
<NOBR>
<font size=-1>







</font>
</NOBR>
 <P>
<NOBR>
<DL COMPACT>
<DT> 1. <IMG src="../../../Icons/sad.gif" ALT="Sad:" WIDTH=15 HEIGHT=15 ALIGN="absmiddle">
<A HREF="117/1.html">
You can't</A> <i> by <A HREF="../../../~johnsonm">Michael K. Johnson</A></i>
 <IMG SRC="../../../Icons/newest.gif" ALT="newest" WIDTH=31 HEIGHT=12
  ALIGN="bottom"> </DT>
</DL>
</NOBR>

<P>
<P>



  






<BR> 
 
<BR></BODY>
</HTML>
