
<HTML>
<HEAD>
<TITLE>cli()/sti() latency, hard numbers</TITLE>
<LINK rel="owner" href="mailto:">
<SCRIPT LANGUAGE="JavaScript">
<!-- hide this

function help(message) {
  self.status = message;
  return true;
}
// stop hiding -->
</SCRIPT>

</HEAD>
<BODY>
<strong>The
HyperNews <a href="../../../khg.html">Linux KHG</a>
Discussion Pages</strong>
<hr>
<NOBR>





</NOBR><BR>
<H2><IMG src="../../../../../Icons/feedback.gif" ALT="Feedback:"
  WIDTH=15 HEIGHT=15
  ALIGN="bottom">
cli()/sti() latency, hard numbers</H2>

<DL> <DD>
<NOBR>
<font size=+1><I>Forum:</I> <A HREF="../../../khg.html" >
 The Linux Kernel Hackers' Guide</A> </font><BR>

<I>Re</I>: 
  <IMG SRC="../../../../../Icons/question.gif" 
   WIDTH=15 HEIGHT=15
   ALT="Question" ALIGN="absmiddle">
  <A HREF="../../9.html" >
   Realtime mods anyone?</A>  (<A HREF="http://www.beachnet.org/bduncan/" >bill duncan</A>)<BR>

<I>Re</I>: 
  <IMG SRC="../../../../../Icons/feedback.gif" 
   WIDTH=15 HEIGHT=15
   ALT="Feedback" ALIGN="absmiddle">
  <A HREF="../4.html" >
   POSIX.4 scheduler</A>  (<A HREF="http://image.mit.edu/~monta" >Peter Monta</A>)<BR>
<I>Keywords:</I> realtime round-robin task scheduling <BR>
<I>Date:</I> Sat, 17 Aug 1996 10:45:38 GMT <BR>
<I>From:</I> Ingo Molnar &lt;<A HREF="mailto:mingo@pc5829.hil.siemens.at" >mingo@pc5829.hil.siemens.at</A>&gt; <BR>

</NOBR>
</DD> </DL>

<P>
<table border cellpadding=5 cellspacing=0 
 width="100%" BGCOLOR="#FFFFFF">
 <tr><td>

<P>i've done some timings on cli()/sti() latency, on IP basis. Most parts of the kernel are OK, they have less than 100 usecs of max latency.
There is one thing why device driver writers take care of cli()/sti() latencies, it's the serial interrupt. If the latency is too high, then we loose serial data quite easily.
Some hard data: on a 100 MHz Neptun dual CPU system, hardware interrupt latency is 10+-1 usecs, typical cli()/sti() latencies are on the order of 10 usecs. Some code like the IDE driver has latencies up to 100 usecs, occasionally higher. The IDE driver latency can be minimized by using the hdparm utility: multiple mode and irq masking should be turned off.
</P>

</td></tr>
</table>
<P><NOBR>





</NOBR><BR>

<P>
<P>



  






<BR> 
 
<BR></BODY>
</HTML>
