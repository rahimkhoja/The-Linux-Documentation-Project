<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
 <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
 <META NAME="GENERATOR" CONTENT="lfparser_2.51">
 <META NAME="LFCATEGORY" CONTENT="UNIXBasics">
 <link rel="icon" href="../../common/images/lf-16.png" type="image/png">
 <TITLE>lf349, UNIXBasics: El misterio de los puntos de montaje</TITLE>
<style type="text/css">
<!--
 td.top {font-family: Arial,Geneva,Verdana,Helvetica,sans-serif; font-size:12 }
 pre { font-family:monospace,Courier }
 pre.code { font-family:monospace,Courier;background-color:#aedbe8; }
 p.cl { color:#EE9500 }
 table.left { margin-right:0.3cm }
 a.nodec { text-decoration:none }
 p.trans { font-size:8pt; text-align:right }
 p.clbox { width:50%; alignment:center; background-color:#FFD700; 
           border-style:none; border-width:medium; border-color:#FFD700; 
           padding:0.5cm;  text-align:center }
 p.code { width:80%; alignment:center; background-color:#aedbe8; 
          border-style:none; border-width:medium; border-color:#aedbe8; 
          padding:0.1cm;  text-align:left }
 p.foot { background-color:#AAAAAA; color:#FFFFFF; border-style:none; 
          border-width:medium; border-color:#AAAAAA; padding:0.5cm ; 
          margin-top:0.1cm; margin-right:1cm; margin-left:1cm; 
          text-align:center }
 div.tbbutton {
   background: #ddd;
   border-right: 1px solid #aaa;
   border-bottom: 1px solid #aaa;
   margin: 2px 5px 2px 5px;
   text-align: center;
   width: 20em;
   line-height: 1.2em;
   padding: 2px;
   font-size: 12px;
   white-space: nowrap;
   color: #555;
 }
 div.bbutton {
   background: #ddd;
   border-right: 1px solid #aaa;
   border-bottom: 1px solid #aaa;
   float: left;
   margin: 2px 5px 2px 5px;
   text-align: center;
   line-height: 1.2em;
   padding: 2px;
   font-size: 12px;
   white-space: nowrap;
   color: #555;
 }
-->
</style>
 
</HEAD>
<BODY bgcolor="#ffffff" text="#000000">
 <!-- this is generated html code. NEVER use this file for your
 translation work. Instead get the file with the same article number
 and .meta.shtml in its name. Translate this meta file and then
 use lfparser program to generate the final article -->
 <!-- lfparser can be obtained from http://main.linuxfocus.org/~guido/dev/lfparser.html -->

<!-- this is used by a number of tools:
 =LF=AUTHOR: Guido Socher
 =LF=CAT___: UNIXBasics
 =LF=TITLE_: El misterio de los puntos de montaje
 =LF=NUMBER: 349
 =LF=ANAME_: article349.shtml
 =LF=PARSER: 2.51
 -->

<!-- 2pdaIgnoreStart -->

<!-- start navegation bar, current, style=2 -->
 <!-- top navegation bar -->
 <TABLE summary="topbar_1" cellspacing="0" cellpadding="0" border="0" align="center" width="90%">
   <TR bgcolor="#2e2292">
     <TD class="top"><TABLE summary="topbar_1_logo" cellspacing="0" cellpadding="0" border="0" width=
       "100%">
         <TR><TD width="319"><a href="../../index.shtml"><IMG src="../../common/images/logolftop_319x45.gif"
           alt="[LinuxFocus-icon]" width="319" height="45" align="left" 
           border="0"></a></TD>

           <TD class="top">
             <TABLE summary="topbar_1_links" width="100%">
               <TR align="right">
                 <TD class="top">
                 
                 <A class="nodec" href="../../index.shtml"><FONT color=
                 "#DDDDDD" size="2">&lt;--</FONT></A> &nbsp;| 
                 <A class="nodec" href="../map.html"><FONT color=
                 "#DDDDDD" size="2">Mapa</FONT></A> &nbsp;| 
                 <A class="nodec" href="../indice.html"><FONT color=
                 "#DDDDDD" size="2">Indice</FONT></A> &nbsp;| 
                 <A class="nodec" href="../Search/index.html"><FONT color=
                 "#DDDDDD" size="2">Busqueda</FONT></A> </TD>
                 
               </TR>

               <TR align="right">
                 <TD class="top">
                   <HR width="100%" noshade size="1">
                 </TD>
               </TR>
             </TABLE>
           </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end top navegation bar -->
 <!-- blue bar -->
 <TABLE summary="topbar_2" cellspacing="0" cellpadding="0" border="0" align="center"
 width="90%">
   <TR bgcolor="#00ffff">
     <TD><IMG src="../../common/images/transpix.gif" width="1" height=
     "2" alt=""></TD>
   </TR>
 </TABLE>
 <!-- end blue bar -->
 <!-- bottom navegation bar -->
 <TABLE summary="topbar_3" cellspacing="0" cellpadding="0" border="0" align="center"
 width="94%">
   <TR bgcolor="#000000">
     <TD>
       <TABLE summary="topbar_3_links" cellspacing="0" cellpadding="1" border="0" width=
       "100%">
         <TR align="center">
           <TD WIDTH="20%"><A class="nodec" href="../News/index.shtml"><FONT color=
           "#FFFFFF">Noticias</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Archives/index.html"><FONT color=
           "#FFFFFF">Arca</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Links/index.html"><FONT color=
           "#FFFFFF">Enlaces</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../aboutus.html"><FONT color=
           "#FFFFFF">Sobre LF</FONT></A> </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end bottom navegation bar -->
<!-- stop navegation bar -->

<!-- SSI_INFO -->

<!-- tr_staticssi include virtual -->
<!-- tr_staticssi exec cmd -->
<!-- addedByLfdynahead ver 1.5 --><TABLE ALIGN="right" border=0><TR><TD ALIGN="right"><FONT SIZE="-1" FACE="Arial,Helvetica">Este documento est&aacute; disponible en los siguientes idiomas: <A href="../../English/September2004/article349.shtml">English</a> &nbsp;<A href="../../Castellano/September2004/article349.shtml">Castellano</a> &nbsp;<A href="../../ChineseGB/September2004/article349.shtml">ChineseGB</a> &nbsp;<A href="../../Deutsch/September2004/article349.shtml">Deutsch</a> &nbsp;<A href="../../Francais/September2004/article349.shtml">Francais</a> &nbsp;<A href="../../Italiano/September2004/article349.shtml">Italiano</a> &nbsp;<A href="../../Indonesian/September2004/article349.shtml">Indonesian</a> &nbsp;<A href="../../Russian/September2004/article349.shtml">Russian</a> &nbsp;<A href="../../Turkce/September2004/article349.shtml">Turkce</a> &nbsp;<A href="../../Polish/September2004/article349.shtml">Polish</a> &nbsp;</FONT></TD></TR></TABLE><br>
 


<!-- SSI_INFO STOP -->
<!-- 2pdaIgnoreStop -->

<!-- SHORT_BIO_ABOUT_THE_AUTHOR_AND_INDEX_START -->
<TABLE ALIGN="LEFT" BORDER="0" WIDTH="195" summary="about the author" class="left">
<TR>
<TD>

<img src="../../common/images/Guido-S.gif" alt=
    "[Photo of the Author]" height="164" width="173">
<BR>por  Guido Socher <a href="http://main.linuxfocus.org/%7Eguido/"><font size="1">(homepage)</font></a>
<BR><BR>
<I>Sobre el autor:</I><BR>
<!-- aboutauthor_start -->
<p>A Guido le gusta Linux debido a la comuindad que existe
    alrededor de este sistema operativo. Es un proyecto enorme en
    la cual diferentes personas alrededor del mundo estan trabajando,
    todos con un mismo objetivo: Mejorarlo cada dia.<br>
    Desafortunadamente Linux se ha vuelto tan grande que tambi&eacute;n
    atrae a los chicos malos que solamente quieren hacer dinero y no
    dar nada a cambio. Cuidese de estas personas! Suelen dar la imagen
    de ser empresas "pro-linux" pero en realidad solamente son oportunistas.
    </p>
<!-- aboutauthor_stop -->
<!-- TRANSLATED_TO es -->
<BR><BR><I>Traducido al espa&ntilde;ol por:</I><BR>
Roberto Uris <small>&lt;uris77/at/yahoo.com&gt;</small>
<br>
<!--
 =LF=TRANSTO=es: Roberto Uris
-->
<!-- TRANSLATED_TO_STOP -->
<!-- INDEX_START -->
<BR><i>Contenidos</i>:
<UL>
  <LI><A HREF="#349lfindex0">Introducci&oacute;n</A></LI>
  <LI><A HREF="#349lfindex1">Como funciona</A></LI>
  <LI><A HREF="#349lfindex2">El problema "file-system busy"</A></LI>
  <LI><A HREF="#349lfindex3">&iquest;Y windows lo puede hacer tambi&eacute;n?</A></LI>
  <LI><A HREF="#349lfindex4">Linux lo puede hacer tambi&eacute;n.</A></LI>
  <LI><A HREF="#349lfindex5">Permitir que cualquiera monte un sistema de archvos</A></LI>
  <LI><A HREF="#349lfindex6">Laptops y nfs</A></LI>
  <LI><A HREF="#349lfindex7">Conclusi&oacute;n</A></LI>
  <LI><A HREF="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=349">Formulario de "talkback" para este art&iacute;culo</A></LI>
</UL>

</TD></TR></TABLE>
<!-- INDEX_STOP -->
<!-- SHORT_BIO_ABOUT_THE_AUTHOR_AND_INDEX_STOP -->
<!-- HEAD_OF_THE_ARTICLE_START -->
<br>&nbsp;
<table border="0"><tr><td>
<H2>El misterio de los puntos de montaje</H2>
 <img src="../../common/images2/illustration349.jpg" alt="mount"
    hspace="10">
<!-- ABSTRACT OF THE ARTICLE -->
<P><i>Resumen</i>:
<P>
<!-- articleabstract_start -->

    Este articulo explica el concepto the puntos the montaje, pero
    tambien espero que proporcione informaci&oacute;n interesante para
    lectores no muy novatos.


    
<!-- articleabstract_stop -->

<br><!-- HR divider --><center><font color="#8282e0"><b>_________________ _________________ _________________</b></font></center><br>
</td></tr></table>
<!-- HEAD_OF_THE_ARTICLE_STOP -->
<!-- BODY_OF_THE_ARTICLE_START -->


    <A NAME="349lfindex0">&nbsp;</A>
<H2>Introducci&oacute;n</H2>

    Iniciar&eacute; explicando el concpeto del montaje the sistemas de
    archivos y luego tocar&eacute; algunos temas m&aacute;s avanzados. Si Ud.
    cree que ya es un experto en Linux, puede saltarse las primeras
    secciones.



    <A NAME="349lfindex1">&nbsp;</A>
<H2>Como funciona</H2>

    Bajo windows exsite,al a&ntilde;adir un disco duro nuevo siempre se hace un l&iacute;o.
    Lo que antes era D, de repente es E: y tanto los usuarios como los
    programas instalados se confunden.

    <br>
    <br>
    En Unix no existe este problema porque todos los discos f&iacute;sicos
    se insertan en el arbol del directori&oacute;. Esto se puede ver cuando se
    teclea "mount" &oacute; "df":


    <table>
      <tr>
        <td>
<pre class="code">
# df
Filesystem 1K-blocks    Used Available Use% Mounted on
/dev/hda1    9070728 4701180   3908768  55% /
/dev/hda3   24950428  683412  22999584   3% /home
none          257236       0    257236   0% /dev/shm

# mount
/dev/hda1 on / type ext3 (rw)
none on /proc type proc (rw)
none on /dev/shm type tmpfs (rw)
/dev/hda3 on /home type ext3 (rw)
</pre>
        </td>
      </tr>
    </table>
    Aqu&iacute; tenemos dos particiones, uno que contiene todo menos /home.
    Este es la partici&oacute;n raiz "/", y se encuentra conectado fisicamente
    a hda1. hda1 es la primera partici&oacute;n (1) en el disco duro ide (hda).
    La tercera partici&oacute;n (hda3) en el mismo disco esta montado en /home.
    Por ende, si Ud. accesa /home, entonces esta accesando los archivos
    en hda3. De esta forma no tendria que preocuparse si esto es ahora D:
    &oacute; E: &oacute; ??? por que siempra ser&aacute; un arbol de directori&oacute;s y esto siempre
    permanecer&aacute; igual.


    <A NAME="349lfindex2">&nbsp;</A>
<H2>El problema "file-system busy"</H2>

    Linux realiza operaciones de lectura y escritura en b&uacute;fer.
    Esto se puede evidenciar si Ud. tiene conectado algun disco
    por medio de usb version 1.1 y accesa alg&uacute;n archivo grande en
    ese dispositivo. La primera vez que accesa ese archivo es muy
    lento pero la segunda vez que accesa ese mismo archivo se hace
    a una muy alta velocidad, tanto asi que la luz en el dispositivo
    usb nisiquiera se prende.
    <br>
    <br>
    Debido a esta caracteristica es necesario desmontar el disco antes
    de quitarlo f&iacute;sicamente. Para discos duros internos esto nunca
    es un problema pero si lo es para cdroms y dispositivos USB.
    <br>
    <br>
    Si por ejemplo Ud. monta un usb-stick baj&oacute; /mnt/usb y tecl&eacute;a
    "cd /mnt/usb", entonces bash esta usando ese sistema de archivos.
    Si Ud. trata de desmontarlo desde otra terminal obtendr&aacute; un error
    "file system busy" (sistema de archivos ocupado) y el desmontaje
    fallar&aacute;. Es suficiente con salirse del directori&oacute; /mnt/usb con "cd"
    y entonces s&iacute; podr&aacute; desmontar el dispositivo. A veces el problema
    puede ser que Ud. se olvid&oacute; quien esta usando el dispositivo y tiene
    tantas aplicaciones abiertas que es dif&iacute;cil saber que es lo que esta
    causando el problema.

    <br>
    <br>
    Le puede preguntar a su computadora!

<pre class="code">
# fuser -m -u /mnt/usb
/mnt/usb:   1347c(root)  1348c(guido)  1349c(guido)
</pre>
    El resultado de fuser es una lista de procesos que todav&iacute;a
    estan utilizando el sistema de archivos en questi&oacute;n. Ahora puede
    revisar con "ps auxw" c&uacute;al es el proceso &oacute; simplemente lo puede
    detener con un "kill". Ahora s&iacute;, umount puede funcionar.


    <A NAME="349lfindex3">&nbsp;</A>
<H2>&iquest;Y windows lo puede hacer tambi&eacute;n?</H2>

    &iquest;Por qu&eacute; no simplemente sacar el usb-stick? Bueno,computadoras
    de anta&ntilde;o con dos/win3.1 pod&iacute;an ser apagadas con simplemente
    persionar el b&uacute;ton. No se necesitaba hacer un "shutdown".
    Uno de mis amigos se quej&oacute; de que con Linux ten&iacute;a que hacer
    un "shutdown" antes de apagar la maquina. Pero luego win95
    apareci&oacute; y se acabar&oacute;n esas quejas.


    <A NAME="349lfindex4">&nbsp;</A>
<H2>Linux lo puede hacer tambi&eacute;n.</H2>

    Tambi&eacute;n existen soluciones en Linux para simplemente
    poder remover el disco(por ejemplo, un disco usb).
    Linux Mandrake contiene una funci&oacute;n llamada supermount
    que d&aacute; los mismos resultads(y problemas) que windows. Pero
    no lo recomiendo por que puede causar inestabilidad y p&eacute;rdida
    de archivos.

    <br>
    <br>
    Es mejor utilizar las mtools (http://mtools.linux.lu/).
    mtools es un conjunto de programas que tienen acceso a
    b&aacute;sicamente todos los dispositivos removibles con un
    sistema de archivos FAT sin la necesidad de montarlos.

    <br>
    <br>
    El truco es el siguiente:


    <ol>
      <li>
        Edit /etc/mtools.conf and add a line that says<br>
<pre>
drive u: file="/dev/sda1" # o sda4; algunos usb-stick tienen particiones
                          # 4 es creado como default de fabrica.
</pre>
        <br>
        <br>
      </li>

      <li>Ahora no es necesario montar /dev/sda1. Simplemente tecel&eacute;e

      <br>
      mdir u:<br>

      para ver el contenido del usb-stick.
      <br>
      <br>
      mcopy * u:<br>
      para copiar todos los archivos en el directori&oacute; act&uacute;al
      hacia el usb-stick.

      <br>
      <br>
      mcopy u:\* .<br>
      para copiar todos los archivos del usb-stick hacia el
      directori&oacute; act&uacute;al(percates&eacute; del \ en frente del *).

      <br>
      <br>
      </li>
    </ol>
    F&aacute;cil de utilizar.

    <A NAME="349lfindex5">&nbsp;</A>
<H2>Permitir que cualquiera monte un sistema de archvos</H2>

    Normalmente necesitar&aacute; ser root para montar sistemas de archivos.
    Para dispositivos como cdroms o usb-stick tal vez quiera darle
    permiso a cualquier usuario para que los monte. Todo lo que
    necesita hacer en este caso, es a&ntilde;adir una l&iacute;nea como la
    siguiente en /etc/fstab:

<pre class="code">
# dev     mount point    fs type   flags
/dev/sda1  /mnt/usb      auto      noauto,user 0 0
</pre>
    Esta l&iacute;nea significa que sda1 (la primera partici&oacute;n en el primer disco
    scsi, discos usb se map&eacute;an a discos scsi) no seran montados automat&iacute;camente
    (noauto) y pueden ser montados y desmontados por cualquier
    usuario(user). El campo fs-type tambi&eacute;n se pone en auto
    para que al montar un usb-stick formateado con vfat o ext2
    el sistema automaticamente detect&eacute; el archivo de sistemas.


    <A NAME="349lfindex6">&nbsp;</A>
<H2>Laptops y nfs</H2>

    El sistema de archivos para red, NFS(Network File System), es muy
    &uacute;til si necesita tener un respaldo centralizado de todos los
    directori&oacute;s para varios usuarios. Todo lo que necesita hacer es
    montar los directori&oacute;s /home desde un servidor central y todos los
    usuarios tendran sus directori&oacute; /home disponibles en todas las
    computadoras en la red a&uacute;nado a las mismas preferencias y datos en cualquier
    computadora que utilicen. Es muy bueno.


    <br>
    <br>
    &iquest;Pero como lidiamos con usuarios mobiles con laptops?

    <br>
    <br>
    Una vez que el usuario se desconecte de la red, el directori&oacute; dejar&aacute;
    de existir. Esto se puede resolver copiando todos los datos (con rsync),
    pero esto puede causar inconsistencias si Ud. no es muy disciplinado, y
    es que en realidadmuchas veces no necesita el directori&oacute; /home completo.
    Cre&oacute; que una buena soluci&oacute;n ser&iacute;a tener un segundo directori&oacute; /home con
    solamente los datos que necesito cuando voy de viaje.

    <br>
    <br>
    Cuando montamos un sistema de archivos (cualquier sistema de archivos/disco,
    incluso nfs) sobre un directori&oacute; no-vac&iacute;o, el nuevo sistema de archivos monatado
    reemplaza al directori&oacute; local, permitiendonos as&iacute; ver el nuevo sistema de archivos
    que fue montado.

    <br>
    <br>
    La soluci&oacute;n a esto es la siguiente: Crear un punto  de montaje para el
    directori&oacute; home(/home) y automontar all&iacute; los diferentes
    directorios de home cuando la computadora no esta conectada
    a la red. Sin embargo,para los usuarios que utilizan sus
    laptop, antes de montar cualquier sistema de archivos, deben
    crear un softlink hac&iacute;a un directori&oacute; /home que no este en red:


<pre class="code">
/home/guido -&gt; ../home_nonet/guido
</pre>
    Esto significa que cuando el usuario guido se conect&eacute; a la red
    podr&aacute; ver su directori&oacute; /home normal. Pero cuando &eacute;l no este
    conectado a la red, entonces ver&aacute; a /home_nonet/guido como su
    directori&oacute; home (/home/guido).
     <br>
    <br>
    Una soluci&oacute;n bastante buena.


    <A NAME="349lfindex7">&nbsp;</A>
<H2>Conclusi&oacute;n</H2>

    Una de las metas de Unix es crear una capa de abstracci&oacute;n para
    el hardware. El montar/desmontar sistemas de archivos/discos
    fu&eacute; una de las formas de cumplir con su meta. Este es una idea
    bastante avanzada y moderna aunque Unix es mucho mas viejo que
    otros sistemas operativos modernos.

  



<!-- BODY_OF_THE_ARTICLE_STOP -->
<!-- 2pdaIgnoreStart -->
<A NAME="talkback">&nbsp;</a>
<h2>Formulario de "talkback" para este art&iacute;culo</h2>
Cada art&iacute;culo tiene su propia p&aacute;gina de "talkback". A trav&eacute;s de esa p&aacute;gina puedes enviar un comentario o consultar los comentarios de otros lectores
<center>
    <table width="250" border=0><tr><td>
    <div class="tbbutton"><A class="nodec" href="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=349">&nbsp;Ir a la p&aacute;gina de "talkback"&nbsp;</a></div>
    </td></tr></table>
</center>

<br clear="all">
<HR size="2" noshade>
<table width="250" border=0><tr><td>
<div class="bbutton"><a class="nodec" href="../../index.shtml">&lt;--, LF Hogar</a></div>
</td><td>
<div class="bbutton"><a class="nodec" href="./">&Iacute;ndice de este n&uacute;mero</a></div>
</td></tr></table>
<br clear="all">
<HR size="2" noshade>
<!-- ARTICLE FOOT -->
<CENTER><TABLE WIDTH="98%" summary="footer">
<TR><TD ALIGN=CENTER BGCOLOR="#bdc6d5" WIDTH="50%">
<A HREF="../../common/lfteam.html">Contactar con el equipo de LinuFocus</A>
<BR><FONT COLOR="#1111aa"><a href="../../common/copy.html">&copy; Guido Socher</a><br>&quot;some rights reserved&quot; see <a href="../../license/index.shtml">linuxfocus.org/license/</a><br><a href="http://www.linuxfocus.org">http://www.LinuxFocus.org</a></FONT>
</TD>
<TD BGCOLOR="#bdc6d5">
<!-- TRANSLATION INFO -->
<font size=2>Informaci&oacute;n sobre la traducci&oacute;n:</font>
<TABLE summary="translators">
  <tr><td><font size="2">en --&gt; -- : Guido Socher (<a href="http://main.linuxfocus.org/%7Eguido/"><font size="1">homepage</font></a>)</font></td></tr>
  <tr><td><font size="2">en --&gt; es: Roberto Uris &lt;uris77/at/yahoo.com&gt;</font></td></tr>
</TABLE>
</TD>
</TR></TABLE></CENTER>
<p><font size=1>2004-11-13, generated by lfparser version 2.51</font></p>
<!-- 2pdaIgnoreStop -->
</BODY>
</HTML>
