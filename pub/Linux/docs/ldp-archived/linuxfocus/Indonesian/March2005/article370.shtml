<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
 <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
 <META NAME="GENERATOR" CONTENT="lfparser_2.52">
 <META NAME="LFCATEGORY" CONTENT="UNIXBasics">
 <link rel="icon" href="../../common/images/lf-16.png" type="image/png">
 <TITLE>lf370, UNIXBasics: LF Tip:Mengkloning seluruh PC melalui jaringan</TITLE>
<style type="text/css">
<!--
 td.top {font-family: Arial,Geneva,Verdana,Helvetica,sans-serif; font-size:12 }
 pre { font-family:monospace,Courier }
 pre.code { font-family:monospace,Courier;background-color:#aedbe8; }
 p.cl { color:#EE9500 }
 table.left { margin-right:0.3cm }
 a.nodec { text-decoration:none }
 p.trans { font-size:8pt; text-align:right }
 p.clbox { width:50%; alignment:center; background-color:#FFD700; 
           border-style:none; border-width:medium; border-color:#FFD700; 
           padding:0.5cm;  text-align:center }
 p.code { width:80%; alignment:center; background-color:#aedbe8; 
          border-style:none; border-width:medium; border-color:#aedbe8; 
          padding:0.1cm;  text-align:left }
 p.foot { background-color:#AAAAAA; color:#FFFFFF; border-style:none; 
          border-width:medium; border-color:#AAAAAA; padding:0.5cm ; 
          margin-top:0.1cm; margin-right:1cm; margin-left:1cm; 
          text-align:center }
 div.tbbutton {
   background: #ddd;
   border-right: 1px solid #aaa;
   border-bottom: 1px solid #aaa;
   margin: 2px 5px 2px 5px;
   text-align: center;
   width: 20em;
   line-height: 1.2em;
   padding: 2px;
   font-size: 12px;
   white-space: nowrap;
   color: #555;
 }
 div.bbutton {
   background: #ddd;
   border-right: 1px solid #aaa;
   border-bottom: 1px solid #aaa;
   float: left;
   margin: 2px 5px 2px 5px;
   text-align: center;
   line-height: 1.2em;
   padding: 2px;
   font-size: 12px;
   white-space: nowrap;
   color: #555;
 }
-->
</style>
 
</HEAD>
<BODY bgcolor="#ffffff" text="#000000">
 <!-- this is generated html code. NEVER use this file for your
 translation work. Instead get the file with the same article number
 and .meta.shtml in its name. Translate this meta file and then
 use lfparser program to generate the final article -->
 <!-- lfparser can be obtained from http://main.linuxfocus.org/~guido/dev/lfparser.html -->

<!-- this is used by a number of tools:
 =LF=AUTHOR: Gerrit Renker
 =LF=CAT___: UNIXBasics
 =LF=TITLE_: LF Tip:Mengkloning seluruh PC melalui jaringan
 =LF=NUMBER: 370
 =LF=ANAME_: article370.shtml
 =LF=PARSER: 2.52
 -->

<!-- 2pdaIgnoreStart -->

<!-- start navegation bar, current, style=2 -->
 <!-- top navegation bar -->
 <TABLE summary="topbar_1" cellspacing="0" cellpadding="0" border="0" align="center" width="90%">
   <TR bgcolor="#2e2292">
     <TD class="top"><TABLE summary="topbar_1_logo" cellspacing="0" cellpadding="0" border="0" width=
       "100%">
         <TR><TD width="319"><a href="../../index.shtml"><IMG src="../../common/images/logolftop_319x45.gif"
           alt="[LinuxFocus-icon]" width="319" height="45" align="left" 
           border="0"></a></TD>

           <TD class="top">
             <TABLE summary="topbar_1_links" width="100%">
               <TR align="right">
                 <TD class="top">
                 
                 <A class="nodec" href="../../index.shtml"><FONT color=
                 "#DDDDDD" size="2">&lt;--</FONT></A> &nbsp;| 
                 <A class="nodec" href="../map.html"><FONT color=
                 "#DDDDDD" size="2"> Peta</FONT></A> &nbsp;| 
                 <A class="nodec" href="../indice.html"><FONT color=
                 "#DDDDDD" size="2">Indeks</FONT></A> &nbsp;| 
                 <A class="nodec" href="../Search/index.shtml"><FONT color=
                 "#DDDDDD" size="2">Cari</FONT></A> </TD>
                 
               </TR>

               <TR align="right">
                 <TD class="top">
                   <HR width="100%" noshade size="1">
                 </TD>
               </TR>
             </TABLE>
           </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end top navegation bar -->
 <!-- blue bar -->
 <TABLE summary="topbar_2" cellspacing="0" cellpadding="0" border="0" align="center"
 width="90%">
   <TR bgcolor="#00ffff">
     <TD><IMG src="../../common/images/transpix.gif" width="1" height=
     "2" alt=""></TD>
   </TR>
 </TABLE>
 <!-- end blue bar -->
 <!-- bottom navegation bar -->
 <TABLE summary="topbar_3" cellspacing="0" cellpadding="0" border="0" align="center"
 width="94%">
   <TR bgcolor="#000000">
     <TD>
       <TABLE summary="topbar_3_links" cellspacing="0" cellpadding="1" border="0" width=
       "100%">
         <TR align="center">
           <TD WIDTH="20%"><A class="nodec" href="../News/index.shtml"><FONT color=
           "#FFFFFF">Berita</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Archives/index.html"><FONT color=
           "#FFFFFF">Arsip</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Links/index.shtml"><FONT color=
           "#FFFFFF">Links</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../aboutus.html"><FONT color=
           "#FFFFFF">Tentang LF</FONT></A> </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end bottom navegation bar -->
<!-- stop navegation bar -->

<!-- SSI_INFO -->

<!-- tr_staticssi include virtual -->
<!-- tr_staticssi exec cmd -->
<!-- addedByLfdynahead ver 1.5 --><TABLE ALIGN="right" border=0><TR><TD ALIGN="right"><FONT SIZE="-1" FACE="Arial,Helvetica">This document is available in: <A href="../../English/March2005/article370.shtml">English</a> &nbsp;<A href="../../Castellano/March2005/article370.shtml">Castellano</a> &nbsp;<A href="../../ChineseGB/March2005/article370.shtml">ChineseGB</a> &nbsp;<A href="../../Francais/March2005/article370.shtml">Francais</a> &nbsp;<A href="../../Indonesian/March2005/article370.shtml">Indonesian</a> &nbsp;<A href="../../Turkce/March2005/article370.shtml">Turkce</a> &nbsp;</FONT></TD></TR></TABLE><br>
 


<!-- SSI_INFO STOP -->
<!-- 2pdaIgnoreStop -->

<!-- SHORT_BIO_ABOUT_THE_AUTHOR_AND_INDEX_START -->
<TABLE ALIGN="LEFT" BORDER="0" WIDTH="195" summary="about the author" class="left">
<TR>
<TD>

<img alt="this is me" src="../../common/images2/GerritRenker.jpg" height="213" width="175">
<BR>oleh  Gerrit Renker <br> <small>&lt;gerrit.renker(at)gmx.de&gt;</small>
<BR><BR>
<I>Tentang Penulis:</I><BR>
<!-- aboutauthor_start -->

Obtained a computer science degree in 2001.


<!-- aboutauthor_stop -->
<!-- TRANSLATED_TO id -->
<BR><BR><I>Diterjemahkan Ke Indonesia Oleh:</I><BR>
Ahmad SS Ramadhana <small>&lt;ahmad.ramadhana(at)gmail.com&gt;</small>
<br>
<!--
 =LF=TRANSTO=id: Ahmad SS Ramadhana
-->
<!-- TRANSLATED_TO_STOP -->
<!-- INDEX_START -->
<BR><i>Daftar Isi</i>:
<UL>
  <LI><A HREF="#370lfindex0">Skenario</A></LI>
  <LI><A HREF="#370lfindex1">Metoda yang memungkinkan</A></LI>
  <LI><A HREF="#370lfindex2">Setting up ssh</A></LI>
  <LI><A HREF="#370lfindex3"> Membuat file
system pada PC target</A></LI>
  <LI><A HREF="#370lfindex4">Sistem lain</A></LI>
  <LI><A HREF="#370lfindex5">Referensi</A></LI>
  <LI><A HREF="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=370">Komentar Balik Untuk Artikel ini</A></LI>
</UL>

</TD></TR></TABLE>
<!-- INDEX_STOP -->
<!-- SHORT_BIO_ABOUT_THE_AUTHOR_AND_INDEX_STOP -->
<!-- HEAD_OF_THE_ARTICLE_START -->
<br>&nbsp;
<table border="0"><tr><td>
<!-- tr_staticssi include virtual -->
<!-- tr_staticssi exec cmd -->
<!-- addedByLfPdf ver 0.1 -->
<TABLE style="border-style:outset; border-width:1px" align="right" bgcolor="#ff9616" cellspacing="1"><TR><TD bgcolor="#ff9616">
        <a href="../Archives/lf-2005_03-0370.pdf"><small>PDF</small></a>
        </TD></TR></TABLE>
         

<H2>LF Tip:Mengkloning seluruh PC melalui jaringan</H2>
 <img src="../../common/images2/article370.png" alt="[Illustration]" height="150" hspace="10" width="136">
<!-- ABSTRACT OF THE ARTICLE -->
<P><i>Abstrak</i>:
<P>
<!-- articleabstract_start -->


Seringkali muncul masalah saat anda harus melakukan replikasi data dari satu
satu komputer ke komputer lainnya.. Howto berikut akan menjelaskan penggunaan
metoda yang aman, mudah dilakukan dan efektif dalam kloning berbasis jaringan.
<!-- articleabstract_stop -->

<br><!-- HR divider --><center><font color="#8282e0"><b>_________________ _________________ _________________</b></font></center><br>
</td></tr></table>
<!-- HEAD_OF_THE_ARTICLE_STOP -->
<!-- BODY_OF_THE_ARTICLE_START -->



<A NAME="370lfindex0">&nbsp;</A>
<H2>Skenario</H2>


Ketika riset-riset mengenai kloning binatang (Domba Dolly) dan bahkan embrio manusia banyak diperdebatkan dan diragukan, tidak
diragukan lagi bahwa pengetahuan seputar mengkloning mesin komputer tidaklah terlalu berbahaya (bila dilakukan dengan tepat)
tetapi juga berguna untuk evolusi penulisan konfigurasi skrip dan setting seseorang. Menurut hukum Moore dan perkembangan yang
cepat dalam fabrikasi komputer, seseorang akan menghadapi setidaknya satu skenario kloning selama masa penggunaan distribusi -
bisa jadi sebuah PC rumahan yang akan di ganti oleh laptop atau sekedar prosesor yang lebih cepat yang telah tersedia di pasar
karena dana untuk membeli komputer baru tidak ada. Gugus tugasnya meliputi <i>mengambil seluruh filesystem </i>komputer A dan
meletakkannya untuk bekerja pada komputer B. Ada beberapa cara untuk melakukannya, yang pertama adalah yang tidak dijelaskan
dalam howto ini yaitu dengan membuka casing, menukar hardisk dan melakukan kopi
secara lokal pada komputer satunya. Seringkali hal ini tidaklah mungkin -
membuka casing pelindung acapkali menyebabkan hilangnya garansi - dan juga
sangat berbahaya, terutama bila dilakukan olah orang yang tidak berpengalaman
sehingga dapat menyebabkan kerusakan hardware secara elektrik maupun fisik. Saya pernah
mengalami kehilangan data dengan cara seperti ini, disebabkan oleh program low
level yang mengandung bug. Pendekatan lain membutuhkan network card pada kedua PC
(dimana saat ini telah banyak di jumpai di PC-PC rumahan), yang lebih aman dan
akan dijelaskan di sini.<p>Ide pokok umum pada semua metoda yang dijelaskan
berikut ialah untuk menyelenggarakan koneksi network antara komputer <i>"sumber"</i>
(yang akan di kloning) dan komputer <i>"target" </i>(kloningnya). Hal ni mudah
tercipta bila keduanya terhubung ke sebuah hub, bila tidak anda dapat
menghubungkan network card-network card tersebut lewat kabel <i>"crossover" </i>
(karena kabel straight yang normal tidak bisa digunakan). Untuk PC target,
dibutuhkan sebuah live CD (seperti Knoppix atau LNX-BBC) atau instalasi minimal
yang dapat mengoperasikan network card dan/atau <font face="Courier New">
ssh/netcat</font>. Ada pula beberapa floppi yang dapat melakukan hal ini
(meskipun dalam kasus saya <font face="Courier New">tomsrbt</font> hang saat
inisialisasi network card). Bagaimanapun juga bila anda bermaksud untuk
melakukan instalasi fresh sebuah distro, ini adalah alternatif lain mudah. Kedua
komputer harus di konfigurasi dengan alamat IP pada network yang sama sehingga
mereka dapat berbicara satu dengan yang lain, seperti gambar diatas.</p>


<A NAME="370lfindex1">&nbsp;</A>
<H2>Metoda yang memungkinkan</H2>




<p>
Dengan setup dasar yang diberikan, ada beberapa cara untuk menyelenggarakan
kegiatan kloning:</p>


<ul>
<li>pengkopian binary lewat <tt>dd</tt></li>
<li><tt>piping tar / cpio</tt></li>
<li><tt>rsync </tt> </li>
<li><tt>dump</tt> dan <tt>restore</tt></li>
</ul>


Yang pertama sangatlah komplek dan tidak memungkinkan bila hard drive-hard
drive tidak benar-benar berada dalam tipe dan geometri yang sama. Sangatlah luar
biasa sekali mengkopi iso images (<tt>dd if=/dev/cdrom of=the.iso</tt>), atau
floppi - <a href="../../common/src2/article370/diskcopy.txt">disini (diskcopy
shell script)</a> sebagai contoh <tt>diskcopy</tt> dengan dd. Kerugian lainnya
dari pendekatan berbasis dd&nbsp; ialah ikut terkopinya space kosong, sehingga
mengambil waktu yg dibutuhkan. Piping <tt>tar</tt> dan <tt>cpio</tt> akan sangat
memakan waktu (sekitar beberapa jam) dan memiliki beberapa kendala. Sebagai
contoh, ada pembatasan pada filename dan penggunaa symlink, pencekikan file-file
di <tt>/dev</tt> dan lain sebagainya. Saya peribadi tak akan merekomendasikan
hal ini. Bila anda memiliki filesystem yang berbeda pada source dan target, <b><tt>rsync(1)</tt></b>
mungkin adalah pilihan terbaik. Hanya membutuhkan <tt>ssh</tt> yang sedang
bekerja dan transmit file yang efektif dikarenakan builtin protokol yang
efisien. Ia juga memiliki swicth <tt>-D</tt> untuk file-file divais, dan banyak
pilihan-pilihan yang dapat dipenuhi dalam beragam skenario. Perangkat yang
sangat berguna untuk backup harian, mirroring dan sejenisnya, man page yang
memiliki banyak contoh untuk dipelajari dengan baik. Contoh dari kloning lewat <tt>rsync</tt>
dijelaskan pada [<a href="#key-2">1</a>].<p>Disini, kita akan menggunakan metoda
melalui <tt>dump</tt> dan <tt>restore</tt> yang berarti menciptakan kembali
segenap filesystem. Metoda ini cepat, efektif dan memberikan hasil yang
diharapkan, dengan upaya seminimal mungkin. Sebenarnya saya harus melakukan
seluruh prosedur kloning dua kali, karena target PC akan diganti. Dalam kedua
kasus, mutlak tidak ada kendala yang muncul dan memberikan kloning yang
berfungsi, bootable dalam waktu kurun waktu sekitar 1 jam mengkopi
bergiga-gigabytes. Pendakatan ini membutuhkan baik PC target maupun sumber
ciri-ciri filesystem yang sama. Kita berasumsi bahwa ini adalah <tt>ext2</tt> or <tt>ext3</tt>,
karena saat ini keduanya adalah filesystem yang paling luas digunakan (lihat
catatan di <a href="#sec:Other-systems">bawah</a>). <br> &nbsp;</p>


<A NAME="370lfindex2">&nbsp;</A>
<H2>Setting up ssh</H2>


Setelah sistem terkonfigurasi dengan instalasi minimal atau running dengan live
CD, langkah berikutnya ialah mengeseet <tt>ssh</tt> (bila tidak menggunakan <tt>netcat</tt>
untuk transfer seperti yang dijelaskan lebih jauh di bawah ini). Ini membutuhkan
PC sumber memiliki <tt>sshd</tt> (secure shell daemon) yang telah bekerja. Cek&nbsp; <tt>/etc/init.d/</tt>
bila tidak yakin. Pada PC target, ketik (sebagai root)

<pre class="code">ssh-keygen -t rsa</pre>

Untuk lebih mudahnya, jangan masukkan passphrase. Public key yang kini diperoleh
berada di <tt>/root/.ssh/id_rsa.pub</tt>. Kopi file ini ke PC sumber anda lewat
:<pre class="code">scp /root/.ssh/id_rsa   SourcePC:/tmp</pre>


<p>dimana <tt>SourcePC</tt> adalah alamat IP dari PC sumber. Saat ditanya pakah
anda yakin, masukkan ''<tt>yes</tt>''
secara lengkap (''<tt>y</tt>'' saja sendirian seringkali tidak bekerja). Anda
masih akan diberi prompt password root pada PC sumber. Sekarang tambahkan PC
target sebagai node yangterpercaya dengan memberikan : </p>


<pre class="code">cat /tmp/id_rsa.pub &gt;&gt; /root/.ssh/authorized_keys</pre>



pada PC sumber. Untuk mengecek apakah segalanya OK, ulangi perintah kopi pada PC
target. Anda seharusnya tak akan di beri prompt untuk password.<A NAME="370lfindex3">&nbsp;</A>
<H2> Membuat file
system pada PC target</H2>




<p>
Langkah pertama dapat dipastikan adalah mempartisi hard drive pada sistem target
dan meciptakan filesystem <tt>ext2/ext3.</tt> Yang terakhir adalah varian
journalling yang lebih baik dan di enable secara sederhana dengan mengeset
pilihan <tt>-j</tt> (journalling) pada <tt>mke2fs</tt> (membutuhkan dukungan
ext3 di kernel). Anda pun dapat mengkonversikan <tt>sistem ext2</tt> ke <tt>ext3</tt>,
lihat <b><tt>tune2fs(8</tt>)</b>.
Jadi, bila PC sumber memiliki konfigurasi sebagai berikut :</p>

<table align="center" bgcolor="#000000" border="0" cellpadding="2" cellspacing="2" width="56%">
  <tbody>
    <tr>
      <th bgcolor="#ffffff" valign="top">Filesystem</th>
      <th bgcolor="#ffffff" valign="top">Ukuran</th>
      <th bgcolor="#ffffff" valign="top">Penggunaan</th>
      <th bgcolor="#ffffff" valign="top">Penggunaan%</th>
      <th bgcolor="#ffffff" valign="top">Di Mount pada</th>

    </tr>
    <tr>
      <td bgcolor="#ffffff" valign="top">/dev/hda3
      </td>
      <td bgcolor="#ffffff" valign="top">2.7G</td>
      <td bgcolor="#ffffff" valign="top">552M</td>
      <td bgcolor="#ffffff" valign="top">22%</td>
      <td bgcolor="#ffffff" valign="top">/</td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" valign="top">/dev/hda5
      </td>
      <td bgcolor="#ffffff" valign="top">7.8G <br>
      </td>
      <td bgcolor="#ffffff" valign="top">1.6G</td>
      <td bgcolor="#ffffff" valign="top">22%</td>
      <td bgcolor="#ffffff" valign="top">/usr</td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" valign="top">/dev/hda7
      </td>
      <td bgcolor="#ffffff" valign="top">6.3G</td>
      <td bgcolor="#ffffff" valign="top">1.7G</td>
      <td bgcolor="#ffffff" valign="top">28%</td>
      <td bgcolor="#ffffff" valign="top">/usr/share</td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" valign="top">/dev/hda8
      </td>
      <td bgcolor="#ffffff" valign="top">3.4G</td>
      <td bgcolor="#ffffff" valign="top">601M</td>
      <td bgcolor="#ffffff" valign="top">19%</td>
      <td bgcolor="#ffffff" valign="top">/home</td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" valign="top">/dev/hda12
      </td>
      <td bgcolor="#ffffff" valign="top">5.3G</td>
      <td bgcolor="#ffffff" valign="top">1.9G</td>
      <td bgcolor="#ffffff" valign="top">37%</td>
      <td bgcolor="#ffffff" valign="top"> /opt</td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" valign="top">/dev/hda1
      </td>
      <td bgcolor="#ffffff" valign="top">587M</td>
      <td bgcolor="#ffffff" valign="top">70M</td>
      <td bgcolor="#ffffff" valign="top">13% <br>
      </td>
      <td bgcolor="#ffffff" valign="top">/var/backup</td>
    </tr>
  </tbody>
</table>


<p>
Saya rekomendasikan untuk selalu melakukan proses partisi. Bila tidak, maka
kesalahan apapun dalam penggunaan filesystem atau hard-drive knock-out walaupun
beberapa sektor saja dapat menghancurkan seluruh data anda. Dan menurut hukum
Murphy, hal ini pasti terjadi bila tidak ada tindakan pencegahan yang diambil
dengan penggunaan partisi yang berbeda daripada sebuah&nbsp;&nbsp; monolithic.
Saya memiliki sebuah kasus baru-baru ini dengan sebuah kernel yang lucu dan
belum mempartisi drive, selama penguyahan filesystem root. Diatas menunjukkan
bahwa
<tt>/usr</tt> telah terisi begitu besar, oleh karena itu <tt>/usr/share</tt>
harus di tambahkan. Waktunya mengganti dengan hardisk yang lebih besar.</p>


<p>
Pada PC target, jalankan <tt>parted</tt> (direkomendasikan) atau program partisi
favorit (Qtparted adalah variant GUI yang baik, nyaris bisa dibilang sebagai
kloning dari Partition Magic). Jangan lupa partisi swap. Setelah menyimpan table
partisi, masukkan filesystem pada seluruh partisi yang baru dibuat, dengan :</p>

<pre class="code">mke2fs -j -L &lt;label&gt; /dev/xxx</pre>


dimana <tt>xxx</tt> adalah nama partisi dan <tt>&lt;label&gt;</tt> adalah sebuah
string label. Biasanya saya menggunakan ''<tt>/usr</tt>''
sebagai label (akan anda lihat saat boot). Anda dapat mengeset bermacam hal
melalui <tt><b>tune2fs(8)</b></tt>, seperti rentang waktu tetap untuk pengecekan
sistem internal .<h1>Mentransfer filesystem </h1>



<p>Pertama, seluruh partisi yang baru tersebut harus di mount. Kita mulai dari filesystem
root (''/'')  dan mount direktori yang tersisa selanjutnya. Sangat mungkin untuk
menyingkat dua partisi dari PC sumber ke dalam sebuah target singel, ini lah
yang akan dilakukan pada <tt>/usr/</tt> dan <tt>/usr/share</tt> dalam contoh
diatas. Jadi mount filesystem root "masa depan" dengan menggunakan :</p>
<pre class="code">mount /dev/xxx   /mnt</pre>
Saat kloning, penting untuk melakukan chdir ke target direktori<pre class="code">cd /mnt</pre>
Kemudian bit network, pada target PC ketik
<pre class="code">ssh targetPC 'dump -0 -f - /' | restore -r -f -</pre>
<p>dimana <tt>targetPC</tt> adalah alamat IP  PC target . Option yang digunakan, ''<tt>-0</tt>''
berarti full
backup, ''<tt>-f -</tt>'' memerintahkan penggunaan <tt>stdin</tt>/<tt>stdout</tt>
sebagai file descriptors  dan ''<tt>-r</tt>'' memerintahkan untuk program restore
untuk memciptakan ulang filesystem yang sedang di piping lewat network pada PC
target . Untuk option lebih lanjut, baca <b><tt>dump(8)</tt></b> dan <b><tt>restore(8)</tt></b>.
Berikut adalah output untuk mentransfer filesystem root :</p>



<pre class="code">$ ssh 10.42.3.42 'dump -0 -f - /' | restore -r -f -
DUMP: Date of this level 0 dump: Tue Feb 22 15:50:12 2005
DUMP: Dumping /dev/hda3 (/) to standard output
DUMP: Label: debian
DUMP: Writing 10 Kilobyte records
DUMP: mapping (Pass I) [regular files]
DUMP: mapping (Pass II) [directories]
DUMP: estimated 547312 blocks.
DUMP: Volume 1 started with block 1 at: Tue Feb 22 15:50:14 2005
DUMP: dumping (Pass III) [directories]
DUMP: dumping (Pass IV) [regular files]
DUMP: Volume 1 completed at: Tue Feb 22 15:51:43 2005
DUMP: Volume 1 546590 blocks (533.78MB)
DUMP: Volume 1 took 0:01:29
DUMP: Volume 1 transfer rate: 6141 kB/s
DUMP: 546590 blocks (533.78MB)
DUMP: finished in 89 seconds, throughput 6141 kBytes/sec
DUMP: Date of this level 0 dump: Tue Feb 22 15:50:12 2005
DUMP: Date this dump completed: Tue Feb 22 15:51:43 2005
DUMP: Average transfer rate: 6141 kB/s
DUMP: DUMP IS DONE
</pre>
Restore selalu membuat sebuah file <tt>restoresymtable</tt> yang dapat dihapus
setelah anda yakin tak ada error yang muncul selama restorasi filesystem. Saat
selesai dengan filesystem root, sekarang kita akan memproses masing-masing
sub-filesystem yang di mount, dimulai dengan <tt>/usr</tt> (asumsi, direktori
tempat anda bekerja saat ini adalah root dari filesystem "masa depan").

<pre class="code">mount /dev/xxx  ./usr

cd ./usr

ssh targetPC 'dump -0 -f - /usr' | restore -r -f -
</pre>

Siklus mount-cd-dump/restore sekarang berulang lagi untuk semua direktori yang
mungkin anda miliki. Dengan mengangap <tt>/usr/share</tt>
(dimana PC sumber memiliki partisinya), setelah langkah diatas, anda dapat
dengan mudah chdir ke <tt>./usr/share</tt> (perhatikan ".") dan mengulangi<pre class="code">ssh targetPC 'dump -0 -f - /usr/share' | restore -r -f -</pre>


Restore hanyak akan mengkomplain bila file telah ada pada filesystem yang tengah
direstore, sehingga tidak masalah saat meletakkan dua partisi dari PC source ke
dalam satu. Mengkloning seluruh PC akan menghabiskan waktu sekitar satu jam
dengan ssh dan network card 100 MB (crossover cable)<p>
<strong>Catatan: </strong>Untuk dump sebuah filesystem, tidak perlu di mount.
Anda dapat pula mem-pass sebuah <i>nama partition</i>, seperti <big><tt>/dev/hda6</tt></big>,
dibanding nama direktori dari partisi yang di mount.</p>




<h1>Alternatif: &nbsp;<tt>netcat</tt> </h1>


<p>
Sebuah alternatif&nbsp; lain dari ssh adalah penggunaan <tt>netcat(1)</tt>, yang
disingkat sebagai nc. Netcat adalah client-server sederhana yang siap digunakan
yang mengijinkan pembuatan sebuah "pipa" melewati network. Contoh diatas dapat
dimodifikasi sebagai berikut. Kami berasumsi bahwa partisi yang di mount dalam <big><tt>/var/backup</tt></big>
akan ditransfer dengan
<big><tt>dump/restore</tt></big> dari PC sumber ke PC target.</p>


<p>
Pada sisi penerima (<em>PC target</em>) membuat sebuah instance yang
mendengarkan dari <tt>netcat</tt> dengab <tt>-l</tt> dimana akan mempiping
outputnya ke program <tt>restore</tt>.

</p>


<pre class="code">nc -l -p 2000 -q 1 | restore -r -f -</pre>


Pada PC sumber, buah sebuah instance dari <tt>netcat</tt> yang akan mengambil
input dari sebuah pipa dimana <tt>target-IP</tt> adalah alamat IP PC target.

<pre class="code">dump -0 -f - /var/backup | nc &lt;target-ip&gt;   2000</pre>

Option <tt>-q</tt> option digunakan untuk menghentikan <tt>nc</tt> setelah
menerima end-of-file, namun dalam kasus saya harus menghentikannya secara manual.
Bagaimanapun juga lebih direkomendasikan menggunakan <tt>ssh</tt>.




<h1> Pembersihan </h1>


Selamat, bila sejauh ini sukses, pada dasarnya anda memiliki sebuah sistem
ter-kloning. Sekarang tiba saatnya mengubah klone ini menjadi sebuah PC yang
bisa bekerja. Hal yang pertama perli dilakukan adalah mengupdate <tt>/etc/fstab</tt>
dengan setting baru, bila tidak anda tak akan bisa menggunakannya.
Bila alamat IP berubah, ini juga perlu diupdate (<tt>/etc/hosts</tt>,
<tt>/etc/network/interfaces</tt> under debian). Hal penting berikutnya ialah <i>
konfigurasi boot </i>yang dalam banyak kasus perlu diupdate. Dengan <tt>lilo</tt>, edit <tt>/etc/lilo.conf</tt>
(khususnya option <tt>root=...</tt> )  dan kemudian jalankan <tt>lilo -v</tt>.
Dengan grub, edit <tt>/boot/grub/menu.lst</tt> (atau <tt>/boot/grub/grub.conf</tt>
tergantung mana yang symlink)
dan kemudian masuk ke dalam<tt> grub</tt>,

<pre class="code">grub&gt; root (hd0,xxx)

... filesystem is ...

grub&gt; setup (hd0)

... lots of output here

grub&gt; quit
</pre>

atau jalankan <tt>grub-install /dev/xxx</tt> dimana <tt>xxx</tt> adalah&nbsp; hard drive
anda. Disini, cek pada <tt>root (hdn,xx)</tt> dan tambahkan setting <tt>root=/dev/xxx</tt>
.

<p>
Dalam kasus sejenis dengan hardware yang lebih baik pada PC yang baru di clone,
anda mungkin perlu mengupdate <i>settings untuk kernel custom anda. </i>Bila
anda menggunakan sistem dengan banyak modul yang sudah pre-configured (seperti
RedHat, SuSe, Mandrake, Fedora ...) jangan takut, sepertinya akan ada modul yang
cocok. Bila tidak, <tt>lspci -vv</tt> dan kompile kernel seperti biasanya. Bila
video card anda berbeda, update <tt>/etc/X11/XF86Config-4</tt>
(or <tt>xorg.conf</tt> pada RH/Fedora) untuk menyesuaikannya, atau anda tidak
akan memperoleh output. Bila mungkin , gunakan perangkat grafis untuk mensetting
X dengan membooting pada runlevel 3 bila anda memiliki toolsnya. Pada debian,
beberapa penyelidikan sangat diperlukan, saya cukup beruntung menemukan
perubahan driver dari <tt>r128</tt> ke
<tt>radeon</tt> dan itu bekerja.

</p>

<A NAME="370lfindex4">&nbsp;</A>
<H2>Sistem lain</H2>



<p>
Howto ini menjelaskan prosedur kloning untuk filesystem <tt>ext2/ext3</tt>.
Banyak perintah sejenis yang dapat ditemukan pada banyak sistem Linux&nbsp;
lain. Sebagai contoh, beberapa jenis unix seperti FreeBSD, HP-UX, IRIX juga
menyediakan perintah
<tt>dump/restore</tt>; pada Solaris ada <tt>ufsdump/ufsrestore</tt>.
Ada beberapa filesystem yang tidak menawarkan fungsi dump filesystem,
seperti. ReiserFS. Disini, gunakan&nbsp; <tt>rsync.</tt> Lihat [<a href="#key-2">1</a>]
untuk laporan kesuksesan pengguanaan <tt>rsync </tt>untuk mengkloning sebuah
sistem Linux.</p>

<a name="sec:Other-systems"></a>
<A NAME="370lfindex5">&nbsp;</A>
<H2>Referensi</H2>


<dl compact="compact">
<dt><a name="key-2">[1]</a>
<i>''<a href="http://www.linuxgazette.com/issue83/okopnik.html">Replicating a Linux System - Yet Another Method</a></i>.'' Ben Okopnik, Linux Gazette Issue 83, October 2002.
</dt>
</dl>


<!-- vim: set sw=2 ts=2 et tw=74: -->


<!-- BODY_OF_THE_ARTICLE_STOP -->
<!-- 2pdaIgnoreStart -->
<A NAME="talkback">&nbsp;</a>
<h2>Komentar Balik Untuk Artikel ini</h2>
Setiap Artikel mempunyai halaman komentar sendiri. Pada halaman ini Anda bisa mengirimkan komentar atau melihat komentar dari pembaca lainnya:
<center>
    <table width="250" border=0><tr><td>
    <div class="tbbutton"><A class="nodec" href="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=370">&nbsp;Halaman Komentar&nbsp;</a></div>
    </td></tr></table>
</center>

<br clear="all">
<HR size="2" noshade>
<table width="250" border=0><tr><td>
<div class="bbutton"><a class="nodec" href="../../index.shtml">&lt;--, LF Home</a></div>
</td><td>
<div class="bbutton"><a class="nodec" href="index.shtml"> kembali ke indeks dari pembicaraan ini</a></div>
</td></tr></table>
<br clear="all">
<HR size="2" noshade>
<!-- ARTICLE FOOT -->
<CENTER><TABLE WIDTH="98%" summary="footer">
<TR><TD ALIGN=CENTER BGCOLOR="#bdc6d5" WIDTH="50%">
<A HREF="../../common/lfteam.html">Halaman Web Dirawat oleh Team Editor LinuxFocus </A>
<BR><FONT COLOR="#1111aa"><a href="../../common/copy.html">&copy; Gerrit Renker</a><br>&quot;some rights reserved&quot; see <a href="../../license/index.shtml">linuxfocus.org/license/</a><br><a href="http://www.linuxfocus.org">http://www.LinuxFocus.org</a></FONT>
</TD>
<TD BGCOLOR="#bdc6d5">
<!-- TRANSLATION INFO -->
<font size=2>Informasi Terjemahan:</font>
<TABLE summary="translators">
  <tr><td><font size="2">en --&gt; -- : Gerrit Renker <small>&lt;gerrit.renker(at)gmx.de&gt;</small></font></td></tr>
  <tr><td><font size="2">en --&gt; id: Ahmad SS Ramadhana &lt;ahmad.ramadhana(at)gmail.com&gt;</font></td></tr>
</TABLE>
</TD>
</TR></TABLE></CENTER>
<p><font size=1>2005-06-30, generated by lfparser version 2.52</font></p>
<!-- 2pdaIgnoreStop -->
</BODY>
</HTML>
