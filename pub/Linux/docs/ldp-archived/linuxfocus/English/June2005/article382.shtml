<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
 <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
 <META NAME="GENERATOR" CONTENT="lfparser_2.52">
 <META NAME="LFCATEGORY" CONTENT="Applications">
 <link rel="icon" href="../../common/images/lf-16.png" type="image/png">
 <TITLE>lf382, Applications: A toolchain for transformation from paper to HTML</TITLE>
<style type="text/css">
<!--
 td.top {font-family: Arial,Geneva,Verdana,Helvetica,sans-serif; font-size:12 }
 pre { font-family:monospace,Courier }
 pre.code { font-family:monospace,Courier;background-color:#aedbe8; }
 p.cl { color:#EE9500 }
 table.left { margin-right:0.3cm }
 a.nodec { text-decoration:none }
 p.trans { font-size:8pt; text-align:right }
 p.clbox { width:50%; alignment:center; background-color:#FFD700; 
           border-style:none; border-width:medium; border-color:#FFD700; 
           padding:0.5cm;  text-align:center }
 p.code { width:80%; alignment:center; background-color:#aedbe8; 
          border-style:none; border-width:medium; border-color:#aedbe8; 
          padding:0.1cm;  text-align:left }
 p.foot { background-color:#AAAAAA; color:#FFFFFF; border-style:none; 
          border-width:medium; border-color:#AAAAAA; padding:0.5cm ; 
          margin-top:0.1cm; margin-right:1cm; margin-left:1cm; 
          text-align:center }
 div.tbbutton {
   background: #ddd;
   border-right: 1px solid #aaa;
   border-bottom: 1px solid #aaa;
   margin: 2px 5px 2px 5px;
   text-align: center;
   width: 20em;
   line-height: 1.2em;
   padding: 2px;
   font-size: 12px;
   white-space: nowrap;
   color: #555;
 }
 div.bbutton {
   background: #ddd;
   border-right: 1px solid #aaa;
   border-bottom: 1px solid #aaa;
   float: left;
   margin: 2px 5px 2px 5px;
   text-align: center;
   line-height: 1.2em;
   padding: 2px;
   font-size: 12px;
   white-space: nowrap;
   color: #555;
 }
-->
</style>
 
</HEAD>
<BODY bgcolor="#ffffff" text="#000000">
 <!-- this is generated html code. NEVER use this file for your
 translation work. Instead get the file with the same article number
 and .meta.shtml in its name. Translate this meta file and then
 use lfparser program to generate the final article -->
 <!-- lfparser can be obtained from http://main.linuxfocus.org/~guido/dev/lfparser.html -->

<!-- this is used by a number of tools:
 =LF=AUTHOR: Iznogood
 =LF=CAT___: Applications
 =LF=TITLE_: A toolchain for transformation from paper to HTML
 =LF=NUMBER: 382
 =LF=ANAME_: article382.shtml
 =LF=PARSER: 2.52
 -->

<!-- 2pdaIgnoreStart -->

<!-- start navegation bar, current, style=2 -->
 <!-- top navegation bar -->
 <TABLE summary="topbar_1" cellspacing="0" cellpadding="0" border="0" align="center" width="90%">
   <TR bgcolor="#2e2292">
     <TD class="top"><TABLE summary="topbar_1_logo" cellspacing="0" cellpadding="0" border="0" width=
       "100%">
         <TR><TD width="319"><a href="../../index.shtml"><IMG src="../../common/images/logolftop_319x45.gif"
           alt="[LinuxFocus-icon]" width="319" height="45" align="left" 
           border="0"></a></TD>

           <TD class="top">
             <TABLE summary="topbar_1_links" width="100%">
               <TR align="right">
                 <TD class="top">
                 
                 <A class="nodec" href="../../index.shtml"><FONT color=
                 "#DDDDDD" size="2">&lt;--</FONT></A> &nbsp;| 
                 <A class="nodec" href="../map.html"><FONT color=
                 "#DDDDDD" size="2">Map</FONT></A> &nbsp;| 
                 <A class="nodec" href="../indice.html"><FONT color=
                 "#DDDDDD" size="2">Index</FONT></A> &nbsp;| 
                 <A class="nodec" href="../Search/index.html"><FONT color=
                 "#DDDDDD" size="2">Search</FONT></A> </TD>
                 
               </TR>

               <TR align="right">
                 <TD class="top">
                   <HR width="100%" noshade size="1">
                 </TD>
               </TR>
             </TABLE>
           </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end top navegation bar -->
 <!-- blue bar -->
 <TABLE summary="topbar_2" cellspacing="0" cellpadding="0" border="0" align="center"
 width="90%">
   <TR bgcolor="#00ffff">
     <TD><IMG src="../../common/images/transpix.gif" width="1" height=
     "2" alt=""></TD>
   </TR>
 </TABLE>
 <!-- end blue bar -->
 <!-- bottom navegation bar -->
 <TABLE summary="topbar_3" cellspacing="0" cellpadding="0" border="0" align="center"
 width="94%">
   <TR bgcolor="#000000">
     <TD>
       <TABLE summary="topbar_3_links" cellspacing="0" cellpadding="1" border="0" width=
       "100%">
         <TR align="center">
           <TD WIDTH="20%"><A class="nodec" href="../News/index.html"><FONT color=
           "#FFFFFF">News</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Archives/index.html"><FONT color=
           "#FFFFFF">Archives</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Links/index.html"><FONT color=
           "#FFFFFF">Links</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../aboutus.html"><FONT color=
           "#FFFFFF">About LF</FONT></A> </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end bottom navegation bar -->
<!-- stop navegation bar -->

<!-- SSI_INFO -->

<!-- tr_staticssi include virtual -->
<!-- tr_staticssi exec cmd -->
<!-- addedByLfdynahead ver 1.5 --><TABLE ALIGN="right" border=0><TR><TD ALIGN="right"><FONT SIZE="-1" FACE="Arial,Helvetica">This document is available in: <A href="../../English/June2005/article382.shtml">English</a> &nbsp;<A href="../../Deutsch/June2005/article382.shtml">Deutsch</a> &nbsp;<A href="../../Francais/June2005/article382.shtml">Francais</a> &nbsp;<A href="../../Turkce/June2005/article382.shtml">Turkce</a> &nbsp;</FONT></TD></TR></TABLE><br>
 


<!-- SSI_INFO STOP -->
<!-- 2pdaIgnoreStop -->

<!-- SHORT_BIO_ABOUT_THE_AUTHOR_AND_INDEX_START -->
<TABLE ALIGN="LEFT" BORDER="0" WIDTH="195" summary="about the author" class="left">
<TR>
<TD>

<img src="../../common/images2/iznoT2.png" alt="[Photo of the Author]" height="100" width="100">
<BR>by  Iznogood <br> <small>&lt;iznogood/at/iznogood-factory.org&gt;</small>
<BR><BR>
<I>About the author:</I><BR>
<!-- aboutauthor_start -->
<p>Involved in GNU/Linux for a while, I'm now running a Debian
system. Despite electronic studies, I've mostly done a translation work for the
GNU/Linux community.
</p>
<!-- aboutauthor_stop -->
<!-- TRANSLATED_TO en -->
<!-- TRANSLATED_TO_STOP -->
<!-- INDEX_START -->
<BR><i>Content</i>:
<UL>
  <LI><A HREF="#382lfindex0">Introduction</A></LI>
  <LI><A HREF="#382lfindex1">Hardware</A></LI>
  <LI><A HREF="#382lfindex2">Software</A></LI>
  <LI><A HREF="#382lfindex3">Bash scripting</A></LI>
  <LI><A HREF="#382lfindex4">Conclusion</A></LI>
  <LI><A HREF="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=382">Talkback form for this article</A></LI>
</UL>

</TD></TR></TABLE>
<!-- INDEX_STOP -->
<!-- SHORT_BIO_ABOUT_THE_AUTHOR_AND_INDEX_STOP -->
<!-- HEAD_OF_THE_ARTICLE_START -->
<br>&nbsp;
<table border="0"><tr><td>
<!-- tr_staticssi include virtual -->
<!-- tr_staticssi exec cmd -->
<!-- addedByLfPdf ver 0.1 -->
<TABLE style="border-style:outset; border-width:1px" align="right" bgcolor="#ff9616" cellspacing="1"><TR><TD bgcolor="#ff9616">
        <a href="../Archives/lf-2005_06-0382.pdf"><small>PDF</small></a>
        </TD></TR></TABLE>
         

<H2>A toolchain for transformation from paper to HTML</H2>
 <img src="../../common/images2/article382/logo.png" alt="[Illustration]" height="100" hspace="10" width="100">
<!-- ABSTRACT OF THE ARTICLE -->
<P><i>Abstract</i>:
<P>
<!-- articleabstract_start -->

Here is a toolchain to transform a traditional paper magazine into HTML. I will
explain the process form the scanning until htmlization.


<!-- articleabstract_stop -->

<br><!-- HR divider --><center><font color="#8282e0"><b>_________________ _________________ _________________</b></font></center><br>
</td></tr></table>
<!-- HEAD_OF_THE_ARTICLE_STOP -->
<!-- BODY_OF_THE_ARTICLE_START -->


<A NAME="382lfindex0">&nbsp;</A>
<H2>Introduction</H2>

<p>I have read that some US universities will help or allow Google to
digitize their library into numeric form. I'm not Google and I haven't
such an university library but I've got some old paper magazine about  electronics. And the paper quality wasn't the best: Pages start to fall out, the paper become gray...<br>
Then I decide to digitize it because despite the issues stopped about 10
years ago, some articles are always up to date!
</p>

<A NAME="382lfindex1">&nbsp;</A>
<H2>Hardware</H2>


<p>To begin, I needed to feed the data into the computer. A scanner allows
me to do it: after some compatibility check, I bought one, a old used but cheap ScanJet 4300C, and with some internet
navigation, I found the needed settings to configure it. <br>

On Debian, I installed sane, xsane, gocr and gtk-ocr as usual with:

<pre class="code">
apt-get install sane xsane gocr gtk-ocr
</pre>

as root.<br>
<br>
Sane and xsane are the scanner tools needed by my HP to work.<br>
Gocr and gtk-ocr are tools to make an image transformed into a text.<br>

<br>
The scanner is a USB scanner:

<pre class="code">
sane-find-scanner
</pre>

then I went to /etc/sane.d/ to edit some files:<br>
in dll.conf, I uncommented<br>
<pre class="code">
hp
niash
</pre>

and I commented out every thing else.<br>
<br>
in hp.conf and niash.conf, I wrote:<br>
<pre class="code">
/dev/usb/scanner0
option connect-device
</pre>
and I commented out every thing else.<br>
<br>
I modified the group ownership of the device file /dev/usb/scanner with <br>

<pre class="code">
chgrp scanner scanner0
</pre>

and I add iznogood as user to allow me using the scanner without being root:<br>

<pre class="code">
adduser iznogood scanner
</pre>

One reboot, and it was done!<br>

<br>
To store images, DVDs burners are cheap enough to do the job, e.g a NEC 3520.
I have an old kernel (2.4.18) so, the IDE burner use the SCSI interface:
<br>

With modconf, I have loaded ide-scsi<br>
<br>
and I added to /etc/lilo.conf:<br>
<pre class="code">
append="hdb=ide-scsi ignore hdb"<br>
</pre>
then
<pre class="code">
 lilo
</pre>
to take it into operation.
<br>
In /etc/fstab, I added:<br>
<pre class="code">
/dev/sdc0    /dvdrom     iso9660    user, noauto     0  0
</pre>

Then I changed scd0 group to cdrom<br>

<pre class="code">
chgrp cdrom scd0
</pre>

Quite easy.
</p>

<A NAME="382lfindex2">&nbsp;</A>
<H2>Software</H2>


<p>To continue the process, I needed some software:<br>

sane, xsane, gimp, gocr, gtk-ocr, a text editor, a html editor and some disk space.<br>
<br>
sane is the scanner backend and xsane is the graphical frontend.<br>
My idea was to keep the maximum resolution and obtain a 50 MB file for one
page, store it on a harddisk to work on it and when done, store it on
a DVD-ROM.<br>

I put the resolution to 600 dpi, a little bit more brightness and started the
conversion. Since it is on a very old machine (a PII 350 MHz), it takes
some time but I had a good and precise image. I saved it in png format.
<br>
Why such a resolution and a 50 MB file? I wanted to keep a maximum resolution
for the archive and for further numeric processing.<br>
Using Gimp I cut the page into graphical images and images containing
just scanned in text.
<br>
The graphics were saved in png with a reduced size to fit into a html page
and the text images weren't reduced but changed from color to gray scale (Tools, Colors Tools,
Threshold and Ok) and saved with a .pcx extension for processing with
the optical recognition software.<br>

<center><img alt="" src="../../common/images2/article382/pageexplod.png"  width="600" height="547">
</center><br>
<br>
You can see the full scanned image on the top right and the cut parts on the left.<br>

When you are cutting the picture, you can remove titles because they take too much space and they won't be recognized by gocr.

<br>
I create a ima subdirectory for images and separate it from .pcx files.<br>
<br>
Here comes gtk-ocr, the gocr front end. gocr is a optical character
recognition software. It is very simple to use: I just need to select the files
and gtk-ocr manages everything. It gave me a .txt file for each .pcx
file treated.<br>
<br>
<center><img alt="" src="../../common/images2/article382/gtk-ocr.png"  width="399" height="317"><br>
</center><br>
<br>
With a simple

<pre class="code">
 cat *.txt > test.txt
</pre>

 I've got a test.txt and with a text editor I needed to make some adjustments
 (non french characters removed, words corrected...).<br>
 <br>
 A Copy/Paste to the html editor, Mozilla composer, for me and I started
 html composition (be careful to have only relative links when you add some pictures). <br>
 <center><img alt="" src="../../common/images2/article382/visumoz.png"  width="500" height="375"><br>
</center><br>
</p>



<A NAME="382lfindex3">&nbsp;</A>
<H2>Bash scripting</H2>

<p>
I always remember a maths teacher, when I was young, who told
me this maxim:<br>
<br>
"To be lazy, you need to be intelligent". <br>
<br>
Ok, I started to be lazy !!!! ;-)<br>
There is some manual parts which are not easy to automate (directory creation,
scanning, gimp cutting and file creation). The rest can be automated.
<br>
There is a fabulous English tutorial about bash scripting, ABS (Advanced Bash Scripting Guide),
and I found a french translation. <br>
You can find the English version on <a
 href="http://www.tldp.org/LDP/abs/html/">www.tldp.org</a>.
<br>
This guide allowed me to write some little program. Here is the script:

<pre class="code">

#!/bin/bash

REPERTOIRE=$(pwd)
cd $REPERTOIRE
mkdir ../ima
mv *.png ../ima/
for i in `ls *`
do
 gocr -f UTF8 -i $i -o $i.txt
done
cd ..
mv ima/ $REPERTOIRE
cd $REPERTOIRE
cat *.txt | sed -e 's/_//g'  -e 's/(PICTURE)//g' -e 's/&igrave;/i/g' \
-e 's/&iacute;/i/g' -e 's/F/r/g' -e 's/&icirc;/i/g' &gt; test.txt
</pre>

<br>
The file was changed to executable and copied to /usr/local/bin as root with the name ocr-rp.<br>
<br>
To make it working, we need to be in the directory to be processed and run:<br>
<pre class="code">
ocr-rp
</pre>
pwd will give the directory path to the script, then  ima is created outside the
directory and all .png files are moved in.
All .txt files are then listed, treated with gocr, concatenated in
test.txt and had some changes to fit french characters.<br>
<br>
And we continue the same process as before: Copy/paste to Mozilla Composer.<br>
The laziest solution would be to make the script add some headers and footers to the text file, save it and open Mozilla composer directly but I'm too lazy. I will do it tomorrow!!!! ;-)

</p>

<A NAME="382lfindex4">&nbsp;</A>
<H2>Conclusion</H2>


It was just an overview about digitalization tools and there is, obviously,
more than a way to do it and a better one. But there is one constant in
GNU/Linux world:  the hardware tools are better supported each year and easier to use.<br>
For example, I used a DVD burner to keep my 50 MB images. The installation
took me 10 minutes and  worked without trouble with k3b (I just had to apt-get install dvdrtools dvd+rwtools).<br>

But with an old PII 350, 192MB RAM, a cheap scanner, DVD burner, some harddrive room, you have a digitalization tool good enough to give "immortality" to an old electronics paper magazine.

Here were the tool homepages I used to do the digitalization:<br>
<ul>
<li>
scanner is a HP ScanJet 4300C<br>
sane, <a  href="http://www.sane-project.org/">www.sane-project.org</a><br>

xsane, <a  href="http://www.xsane.org/">www.xsane.org</a><br>
<li>gimp, <a  href="http://www.gimp.org">www.gimp.org</a><br>
<li>gocr, gtk-ocr <a  href="http://jocr.sourceforge.net/">jocr.sourceforge.net</a><br>
<li>ABS is on <a  href="http://www.tldp.org/LDP/abs/html/">www.tldp.org</a><br>
<li>DVD Burner: NEC 3520<br>
<li>k3b <a  href="http://www.k3b.org/">www.k3b.org</a><br>
</ul>


<!-- BODY_OF_THE_ARTICLE_STOP -->
<!-- 2pdaIgnoreStart -->
<A NAME="talkback">&nbsp;</a>
<h2>Talkback form for this article</h2>
Every article has its own talkback page. On this page you can submit a comment or look at comments from other readers:
<center>
    <table width="250" border=0><tr><td>
    <div class="tbbutton"><A class="nodec" href="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=382">&nbsp;talkback page&nbsp;</a></div>
    </td></tr></table>
</center>

<br clear="all">
<HR size="2" noshade>
<table width="250" border=0><tr><td>
<div class="bbutton"><a class="nodec" href="../../index.shtml">&lt;--, LF Home</a></div>
</td><td>
<div class="bbutton"><a class="nodec" href="index.shtml">Go to the index of this issue</a></div>
</td></tr></table>
<br clear="all">
<HR size="2" noshade>
<!-- ARTICLE FOOT -->
<CENTER><TABLE WIDTH="98%" summary="footer">
<TR><TD ALIGN=CENTER BGCOLOR="#bdc6d5" WIDTH="50%">
<A HREF="../../common/lfteam.html">Webpages maintained by the LinuxFocus Editor team</A>
<BR><FONT COLOR="#1111aa"><a href="../../common/copy.html">&copy; Iznogood</a><br>&quot;some rights reserved&quot; see <a href="../../license/index.shtml">linuxfocus.org/license/</a><br><a href="http://www.linuxfocus.org">http://www.LinuxFocus.org</a></FONT>
</TD>
<TD BGCOLOR="#bdc6d5">
<!-- TRANSLATION INFO -->
<font size=2>Translation information:</font>
<TABLE summary="translators">
  <tr><td><font size="2">en --&gt; -- : Iznogood <small>&lt;iznogood/at/iznogood-factory.org&gt;</small></font></td></tr>
  <tr><td><font size="2">en --&gt; fr: Iznogood &lt;iznogood/at/iznogood-factory.org&gt;</font></td></tr>
</TABLE>
</TD>
</TR></TABLE></CENTER>
<p><font size=1>2005-06-26, generated by lfparser version 2.52</font></p>
<!-- 2pdaIgnoreStop -->
</BODY>
</HTML>
