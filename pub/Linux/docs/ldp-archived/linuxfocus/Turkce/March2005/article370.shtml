<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
 <META http-equiv="Content-Type" content="text/html; charset=iso-8859-9">
 <META NAME="GENERATOR" CONTENT="lfparser_2.46">
 <META NAME="LFCATEGORY" CONTENT="UNIXBasics">
 <link rel="icon" href="../../common/images/lf-16.png" type="image/png">
 <TITLE>lf370, UNIXBasics: LF Tip:Bir að üzerindeki bilgisayarlarý klonlamak</TITLE>
<style type="text/css">
<!--
 td.top {font-family: Arial,Geneva,Verdana,Helvetica,sans-serif; font-size:12 }
 pre { font-family:monospace,Courier }
 pre.code { font-family:monospace,Courier;background-color:#aedbe8; }
 p.cl { color:#EE9500 }
 a.nodec { text-decoration:none }
 p.trans { font-size:8pt; text-align:right }
 p.clbox { width:50%; alignment:center; background-color:#FFD700; 
           border-style:none; border-width:medium; border-color:#FFD700; 
           padding:0.5cm;  text-align:center }
 p.code { width:80%; alignment:center; background-color:#aedbe8; 
          border-style:none; border-width:medium; border-color:#aedbe8; 
          padding:0.1cm;  text-align:left }
 p.foot { background-color:#AAAAAA; color:#FFFFFF; border-style:none; 
          border-width:medium; border-color:#AAAAAA; padding:0.5cm ; 
          margin-top:0.1cm; margin-right:1cm; margin-left:1cm; 
          text-align:center }
 .mark  { background-color:#e6e6ff }
-->
</style>
 
</HEAD>
<BODY bgcolor="#ffffff" text="#000000">
 <!-- this is generated html code. NEVER use this file for your
 translation work. Instead get the file with the same article number
 and .meta.shtml in its name. Translate this meta file and then
 use lfparser program to generate the final article -->
 <!-- lfparser can be obtained from http://main.linuxfocus.org/~guido/dev/lfparser.html -->

<!-- this is used by a number of tools:
 =LF=AUTHOR: Gerrit Renker
 =LF=CAT___: UNIXBasics
 =LF=TITLE_: LF Tip:Bir að üzerindeki bilgisayarlarý klonlamak
 =LF=NUMBER: 370
 =LF=ANAME_: article370.shtml
 -->

<!-- 2pdaIgnoreStart -->

<!-- start navegation bar, style=2 -->
 <!-- top navegation bar -->
 <TABLE summary="topbar_1" cellspacing="0" cellpadding="0" border="0" align="center" width="90%">
   <TR bgcolor="#2e2292">
     <TD class="top"><TABLE summary="topbar_1_logo" cellspacing="0" cellpadding="0" border="0" width=
       "100%">
         <TR><TD width="319"><IMG src="../../common/images/logolftop_319x45.gif"
           alt="[LinuxFocus-icon]" width="319" height="45" align="left" 
           border="0"></TD>

           <TD class="top">
             <TABLE summary="topbar_1_links" width="100%">
               <TR align="right">
                 <TD class="top">
                 <A class="nodec" href="./"><FONT color=
                 "#DDDDDD" size="2">&lt;--</FONT></A> &nbsp;| 
                 <A class="nodec" href="../index.shtml"><FONT color=
                 "#DDDDDD" size="2">Ana Sayfa</FONT></A> &nbsp;| 
                 <A class="nodec" href="../map.html"><FONT color=
                 "#DDDDDD" size="2">Eriþimdüzeni</FONT></A> &nbsp;| 
                 <A class="nodec" href="../indice.html"><FONT color=
                 "#DDDDDD" size="2">Ýçindekiler</FONT></A> &nbsp;| 
                 <A class="nodec" href="../Search/index.shtml"><FONT color=
                 "#DDDDDD" size="2">Arama</FONT></A> </TD>
               </TR>

               <TR align="right">
                 <TD class="top">
                   <HR width="100%" noshade size="1">
                 </TD>
               </TR>
             </TABLE>
           </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end top navegation bar -->
 <!-- blue bar -->
 <TABLE summary="topbar_2" cellspacing="0" cellpadding="0" border="0" align="center"
 width="90%">
   <TR bgcolor="#00ffff">
     <TD><IMG src="../../common/images/transpix.gif" width="1" height=
     "2" alt=""></TD>
   </TR>
 </TABLE>
 <!-- end blue bar -->
 <!-- bottom navegation bar -->
 <TABLE summary="topbar_3" cellspacing="0" cellpadding="0" border="0" align="center"
 width="94%">
   <TR bgcolor="#000000">
     <TD>
       <TABLE summary="topbar_3_links" cellspacing="0" cellpadding="1" border="0" width=
       "100%">
         <TR align="center">
           <TD WIDTH="20%"><A class="nodec" href="../News/index.html"><FONT color=
           "#FFFFFF">Duyumlar</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Archives/"><FONT color=
           "#FFFFFF">Belgelikler</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Links/index.html"><FONT color=
           "#FFFFFF">Baðlantýlar</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../aboutus.html"><FONT color=
           "#FFFFFF">LF Nedir</FONT></A> </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end bottom navegation bar -->
<!-- stop navegation bar -->

<!-- SSI_INFO -->

<!-- tr_staticssi include virtual -->
<!-- tr_staticssi exec cmd -->
<!-- addedByLfdynahead ver 1.5 --><TABLE ALIGN="right" border=0><TR><TD ALIGN="right"><FONT SIZE="-1" FACE="Arial,Helvetica">Bu makalenin farklý dillerde bulunduðu adresler: <A href="../../English/March2005/article370.shtml">English</a> &nbsp;<A href="../../Castellano/March2005/article370.shtml">Castellano</a> &nbsp;<A href="../../ChineseGB/March2005/article370.shtml">ChineseGB</a> &nbsp;<A href="../../Francais/March2005/article370.shtml">Francais</a> &nbsp;<A href="../../Indonesian/March2005/article370.shtml">Indonesian</a> &nbsp;<A href="../../Turkce/March2005/article370.shtml">Turkce</a> &nbsp;</FONT></TD></TR></TABLE><br>
 


<!-- SSI_INFO STOP -->
<!-- 2pdaIgnoreStop -->

<!-- SHORT BIO ABOUT THE AUTHOR -->
<TABLE ALIGN=LEFT BORDER=0  WIDTH="190" summary="about the author">
<TR>
<TD>

<img alt="this is me" src="../../common/images2/GerritRenker.jpg" height="213" width="175">
<BR>   Gerrit Renker <br> <small>&lt;gerrit.renker(at)gmx.de&gt;</small>
<BR><BR>
<I>Yazar hakkýnda:</I><BR>
<!-- aboutauthor_start -->

Obtained a computer science degree in 2001.


<!-- aboutauthor_stop -->
<!-- TRANSLATED TO tr -->
<BR><BR><I>Türkçe'ye çeviri:</I><BR>
Cem Aytar <small>&lt;cemaytar(at)gmail.com&gt;</small>
<br>
<!--
 =LF=TRANSTO=tr: Cem Aytar
-->
<!-- TRANSLATED TO STOP -->
<BR><i>Ýçerik</i>:
<UL>
  <LI><A HREF="#370lfindex0">Senaryo</A></LI>
  <LI><A HREF="#370lfindex1">Olasý Yöntemler</A></LI>
  <LI><A HREF="#370lfindex2">ssh'ý kurmak</A></LI>
  <LI><A HREF="#370lfindex3"> Hedef bilgisayarda bir dosya sistemi oluþturmak</A></LI>
  <LI><A HREF="#370lfindex4">Diðer Sistemler</A></LI>
  <LI><A HREF="#370lfindex5">Kaynaklar </A></LI>
  <LI><A HREF="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=370">Bu yazý için görüþ bildiriminde bulunabilirsiniz</A></LI>
</UL>

</TD></TR></TABLE>
<!-- HEAD OF THE ARTICLE -->
<br>&nbsp;
<table border="0"><tr><td>
<H2>LF Tip:Bir að üzerindeki bilgisayarlarý klonlamak</H2>
 <img src="../../common/images2/article370.png" alt="[Illustration]" height="150" hspace="10" width="136">
<!-- ABSTRACT OF THE ARTICLE -->
<P><i>Özet</i>:
<P>
<!-- articleabstract_start -->

Çoðu zaman problem olan konulardan bir tanesi de bir bilgisayarý baþka bir
bilgisayara kopyalamaktýr. Güvenilir, kolay ve kullanýþlý bir yöntem de bu
makalede anlatýldýðý gibi að tabanlý klonlamadýr.


<!-- articleabstract_stop -->

<br><!-- HR divider --><center><font color="#8282e0"><b>_________________ _________________ _________________</b></font></center><br>
</td></tr></table>
<!-- BODY OF THE ARTICLE -->



<A NAME="370lfindex0">&nbsp;</A>
<H2>Senaryo</H2>

Hayvanlarýn (''koyun Dolly'') klonlanmasý ve hatta insanlarýn klonlanmasý çok tartýþýlan ve
kuþkuyla bakýlan bir konu olmasýnýn yanýnda hiç þüphe yok ki bazý
verilerin bilgisayarlar arasýnda klonlanmasýnýn (doðru yapýlýrsa) fazla bir zararý yok,
bunun yanýnda dikkatlice yazýlmýþ yapýlandýrým betiklerinin ve
ayarlamalarýn evrimi konusunda faydalý bir þeydir.
Hemen hemen herkes Moore Kanunu'ndan ve bilgisayar üretýmýndeki hýzlý ilerlemeden dolayý,
kullandýðý daðýtýmla hayatýnda en az bir kere de olsa mutlaka klonlama
senaryosuyla karþý karþýya kalmýþtýr - yeni bir bilgisayar veya dizüstü aldýðýnýzda veya
daha hýzlý bir iþlemci ile sisteminizi yenilediðinizde. Amacýmýz A
bilgisayarýndaki <i>bütün dosya sistemini</i> B bilgisayarýna kopyalamak.
Bunun yapmanýn iki yolu var; bir tanesi kasayý açýp, fiziksel olarak sabit
disk sürücüsünü baþka bir bilgisayara baðlayarak kopyalama iþlemini
yapmak, ki bu makalede bundan bahsetmeyeceðiz. Genelde bu pek mümkün olmaz
- kasayý açmak genelde garanti süresini bitirir -
ve ayný zamanda tehlikelidir, tecrübesiz birisi donanýma fiziksel veya
elektrik gücüyle bir zarar verebilir. Hatta daha fazlasý olabilir, bir
keresinde düþük seviyeli hatalý bir program yüzünden diskimdeki verileri
kaybetmiþtim. Ýkinci seçenek ise eðer iki bilgisayarda da að kartý varsa
(artýk ev bilgisayarlarýnda bile genelde bulunuyor) daha güvenli ve burada anlatýlmýþ durumda.

<p>
Aþaðýda anlatýlan yömtemlere mahsus öncelikli konu ''<i>kaynak</i>''
bilgisayar (klonlanacak olan) ile ''<i>hedef</i>'' bilgisayar (kopya) arasýnda bir að kurmak
olacaktýr. Her iki bilgisayar da bir hub'a baðlýysa iþimiz kolay, deðilse
að kartlarýný köprülü (crossover) kabloyla birbirine baðlamalýsýnýz
(normal düz kablolar kullanýlamaz). Hedef bilgisayar için bir çalýþan
linux (Knoppix, LNX-BBC gibi) veya network kartýný çalýþtýrabilecek küçük bir sistem ve
<tt>ssh</tt> ve/veya <tt>netcat</tt> kullanýlabilir olmasý gerekir.
Hatta bunlarý yapabileceðiniz disketler bile var (Bilgisayarýmdada
<tt>tomsrtb</tt> olmasýna raðmen, network kartýmý geç tanýyor).
Yeni bir sistem kurmak isterseniz, bu da belki kolay bir alternatif
olabilir. Her iki bilgisayar da resimde olduðu gibi IP adresleri birbirleriyle ''konuþabilecek''
tarzda ve ayný að üzerinde olacak þekilde ayarlanmalý.

</p>


<A NAME="370lfindex1">&nbsp;</A>
<H2>Olasý Yöntemler</H2>



<p>
Bu temel yapýlandýrmalardan sonra klonlama yapmak için bir kaç yol var:
</p>


<ul>
<li><tt>dd</tt> ile ikili sistemle (binary) kopyalama</li>
<li><tt>tar / cpio</tt> borularýyla (pipes)</li>
<li><tt>rsync </tt> </li>
<li><tt>dump</tt> ve <tt>restore</tt></li>
</ul>
Ýlki karýþýk bir þey ve sabit diskleriniz tam olarak ayný þekil ve
geometride deðilse bunu uygulamanýz mümkün deðil. Bunun yanýnda iso
görüntülerini veya disketleri - <a
href="../../common/src2/article370/diskcopy.txt">
burada bir örnek bulabilirsiniz (diskcopy kabuk betiði)</a>
- kopyalamada ideal olacaktýr.
<tt>dd</tt> yönteminin bir diðer dezavantajý ise boþ yerlerin de
kopyalanmasý ki bu da ekstradan zaman alacaktýr.
<tt>tar</tt> ve <tt>cpio</tt> borularý ise çok uzun zaman alacaktýr ve bir
çok problemi de beraberinde getirecektir. Örneðin; dosya isimlerinde ve
kýsa yollarda bazý kýsýtlamalar olacak, <tt>/dev</tt> gibi dizininlerdeki
dosyalarda sorun çýkacaktýr. Klonlamak için genellikle bu yolu tavsiye
etmem. Eðer kaynak ve hedef bilgisayarlarda farklý dosya sistemleri mevcut
ise muhtemelen en iyi çözüm <b><tt>rsync(1)</tt></b> olacaktýr.
Sadece <tt>ssh</tt> protokolünün etkin bir þekilde çalýþmasý ve dosya
transferi yapabilmesi gerekli. Hatta aygýt dosyalarý için <tt>-D</tt>
seçeneði ve bir çok pratik senaryolar için de farklý seçenekler mevcut.
Günlük yedeklemeler, yansý oluþturma gibi þeyler için çok kullanýþlý bir
araç, örnekli man-sayfalarý da çalýþýlabilecek bir çok þey içeriyor.
<tt>rsync</tt> ile bir klonlama örneðini [<a href="#key-2">1</a>]
adresinde bulabilirsiniz. Biz burada bütün dosya sistemini tekrar yaratmak
manasýna gelen <tt>dump</tt> ve <tt>restore</tt> metodunu kullandýk.
Hýzlý, etkili ve istenen sonuca en az güç harcanarak ulaþtýrýr, kýsaca
tam yedek alma iþlemi için ideal. Aslýnda hedef bilgisayar çaðrýlýp tekrar
yerleþtirilene kadar bütün klonlama prosedürünü iki
defa uygulamak zorunda kaldým. Her iki durumda da her hangi bir sorunla
karþýlaþmadým, GB'larca verinin kopyalanarak iþlevsel ve önyüklenebilir
bir klon kabaca bir saatte meydana geldi. Bu yöntemi kullanabilmek için
hem hedef hem de kaynak bilgisayarda ayný dosya sistemi olmak zorunda.
<tt>ext2</tt> ve <tt>ext3</tt> en yaygýn kullanýlanlar (notlara bakýnýz <a
href="#sec:Other-systems">aþaðýda</a>) olduðundan bu
ikisinden birini kullanýyorsunuz diye farzediyoruz.

<A NAME="370lfindex2">&nbsp;</A>
<H2>ssh'ý kurmak</H2>

Minimum bir sistem kurduktan veya doðrudan çalýþan cd ile bilgisayarýnýzý
açtýktan sonra ilk adým <tt>ssh</tt>'ý kurmak olacak (eðer transfer için
<tt>netcat</tt> kullanmayacaksanýz ki o da detaylý bir þekilde biraz
aþaðýda anlatýlýyor). Kaynak bilgisayarda <tt>sshd</tt>'nin (secure shell
deamon) çalýþýyor olmasý lazým. Emin deðilseniz <tt>/etc/init.d/</tt>'den
kontrol edebilirsiniz. Kaynak bilgisayarda (root olarak)
<pre class="code">ssh-keygen -t rsa</pre> yazýn.
Ýþleri kolaylaþtýrmak için bir þifre girmeyin. Ortak anahtara
<tt>/root/.ssh/id_rsa.pub</tt> dosyasýndan ulaþabilirsiniz. Bu dosyayý
kaynak bilgisayara
<pre class="code">scp /root/.ssh/id_rsa   KaynakBilgisayar:/tmp</pre>
komut satýrý ile yükleyebilirsiniz. KaynakBilgisayar yazan yere IP nosunu
yazýn. Emin olup olmadýðýnýzý sorunca ''<tt>yes</tt>'' yazýn
(''<tt>y</tt>'' bazen çalýþmayabilir). Hala kaynak bilgisayarda root
parolasý için bekleniyor olacak. Þimdi de hedef bilgisayarýn güvenilir bir
að elemaný olduðunu göstermek için
<pre class="code">cat /tmp/id_rsa.pub &gt;&gt; /root/.ssh/authorized_keys</pre>
komutunu kaynak bilgisayarda yazýn. Her þeyden emin olmak için yukarýdaki
komut satýrýný hedef bilgisayarýnda da uygulayýn. Artýk bir parola
istenmeyecektir.


<A NAME="370lfindex3">&nbsp;</A>
<H2> Hedef bilgisayarda bir dosya sistemi oluþturmak</H2>


<p>
Ýlk adým her zaman hedef bilgisayarýn sabit sürücüsünü bölümlemek ve daha
sonra <tt>ext2/ext3</tt> dosya sistemini oluþturmaktýr. Bir sonraki adým
ise journalling seçeneðinin <tt>mke2fs</tt> komutuna <tt>-j</tt>
seçeneðinin de eklenerek etkin hale getirilmesi olacak (çekirdekte
<tt>ext3</tt> desteðinin olmasý gerekli). Hatta isterseniz <b><tt>tune2fs(8</tt>)</b>
komutu ile <tt>ext2</tt> sisteminizi <tt>ext3</tt>'e çevirebilirsiniz.
Kaynak bilgisayarda þu konfigurasyon var diyelim:
</p>

<table align="center" bgcolor="#000000" border="0" cellpadding="2" cellspacing="2" width="56%">
  <tbody>
    <tr>
      <th bgcolor="#ffffff" valign="top">Dosya Sistemi</th>
      <th bgcolor="#ffffff" valign="top">Büyüklük</th>
      <th bgcolor="#ffffff" valign="top">Kullanýlan</th>
      <th bgcolor="#ffffff" valign="top">Kullaným %</th>
      <th bgcolor="#ffffff" valign="top">Baðlandýðý yer</th>

    </tr>
    <tr>
      <td bgcolor="#ffffff" valign="top">/dev/hda3
      </td>
      <td bgcolor="#ffffff" valign="top">2.7G</td>
      <td bgcolor="#ffffff" valign="top">552M</td>
      <td bgcolor="#ffffff" valign="top">22%</td>
      <td bgcolor="#ffffff" valign="top">/</td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" valign="top">/dev/hda5
      </td>
      <td bgcolor="#ffffff" valign="top">7.8G <br>
      </td>
      <td bgcolor="#ffffff" valign="top">1.6G</td>
      <td bgcolor="#ffffff" valign="top">22%</td>
      <td bgcolor="#ffffff" valign="top">/usr</td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" valign="top">/dev/hda7
      </td>
      <td bgcolor="#ffffff" valign="top">6.3G</td>
      <td bgcolor="#ffffff" valign="top">1.7G</td>
      <td bgcolor="#ffffff" valign="top">28%</td>
      <td bgcolor="#ffffff" valign="top">/usr/share</td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" valign="top">/dev/hda8
      </td>
      <td bgcolor="#ffffff" valign="top">3.4G</td>
      <td bgcolor="#ffffff" valign="top">601M</td>
      <td bgcolor="#ffffff" valign="top">19%</td>
      <td bgcolor="#ffffff" valign="top">/home</td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" valign="top">/dev/hda12
      </td>
      <td bgcolor="#ffffff" valign="top">5.3G</td>
      <td bgcolor="#ffffff" valign="top">1.9G</td>
      <td bgcolor="#ffffff" valign="top">37%</td>
      <td bgcolor="#ffffff" valign="top"> /opt</td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" valign="top">/dev/hda1
      </td>
      <td bgcolor="#ffffff" valign="top">587M</td>
      <td bgcolor="#ffffff" valign="top">70M</td>
      <td bgcolor="#ffffff" valign="top">13% <br>
      </td>
      <td bgcolor="#ffffff" valign="top">/var/backup</td>
    </tr>
  </tbody>
</table>


<p>
Genellikle bir kaç çeþit bölümlemeyi tavsiye ederim. Aksi takdirde dosya
sistemindeki her hangi bir hata veya sabit sürücünüzdeki bir kaç sektörün
bozulmasýndan dolayý <em>bütün</em> bilgilerinizi kaybedebilirsiniz. Ve
Murphy Kanuna göre tek parçadan oluþan bir sürücü yerine farklý
bölümlemeler yaparak tedbir almazsanýz böyle kötü bir hadiseyle
karþýlaþacaðýnýzdan emin olabilirsiniz. Yakýnlarda böyle bir durumla
karþýlaþtým, güzel bir çekirdek vardý ve ben sürücüyü bölümlere
ayýrmamýþtým; ve bütün bilgilerimi root dosya sistemiyle birlikte
kaybettim. Bu da bana <tt>/usr</tt>'nin çok hýzlý büyüdüðünü gösterdi, dolayýsýyla
<tt>/usr/share</tt> dizini eklendi. Daha büyük bir sabit disk almanýn vakti
geldi.
</p>
Hedef bilgisayarda <tt>parted</tt> (tavsiye edilebilir) veya favori
bölümleme programýnýzý çalýþtýrýn (Qtparted iyi bir grafik arabirimine
sahip ve Partition Magic'e benzer bir program). En az kaynak
bilgisayardaki bölümler büyüklüðünde parçalar oluþturun. Takas alanýný da
unutmayýn. Bölümleme tablosunu oluþturduktan sonra, her yeni bölüme
<pre class="code">mke2fs -j -L &lt;label&gt; /dev/xxx</pre>
komutuyla dosya sistemini yükleyin. <tt>xxx</tt> yerine bölümün ismini, <tt>&lt;label&gt;</tt>
yerine etiket ismini yazýn.Ben genellikle etiket yerine ''<tt>/usr</tt>''
gibi þeyler kullanýrým (açýlýþ esnasýnda bunlarý göreceksiniz).
<tt><b>tune2fs(8)</b></tt> ile düzenli sistem denetim aralýðýný ayarlamak
gibi bir çok ayarý yapabilirsiniz.

<h1>Dosya sistemini aktarmak</h1>
Öncelikle oluþturduðunuz yeni bölümleri sisteme baðlamalýsýnýz. Kök dosya
sistemi (''/'') ile baþlayalým, kalanlarýný da ilerledikçe sisteme baðlayacaðýz.
Kaynak bilgisayardaki iki bölümü hedef bilgisayara bir bölüm olarak
aktarmak mümkün, aslýnda aþaðýda yaptýðýmýz örnekte <tt>/usr/</tt> ve <tt>/usr/share</tt>
bölümlerini böyle birleþtirdik. Yani gelecek kök dosya sisteminizi þöyle
baðlayabilirsiniz:
<pre class="code">mount /dev/xxx   /mnt</pre>
Klonlama yaparken hedef bilgisayarda bulunduðumuz dizini
<pre class="code">cd /mnt</pre>
olarak deðiþtirmemiz gerekli. Þimdi de hedef bilgisayarda að biti için
þunlarý yapýn:
<pre class="code">ssh kaynakBilgisayar 'dump -0 -f - /' | restore -r -f -</pre>
''<tt>-0</tt>'' tam yedekle, ''<tt>-f -</tt>'' dosya tanýmlayicilar için
<tt>stdin</tt>/<tt>stdout</tt> kullan, ''<tt>-r</tt>'' að üzerinde baðlý
hedef bilgisayarýn dosya sisteminin tekrar oluþturmasý için gerkli olan
yüklemeyi yap manalarýna gelmektedir.
Daha fazla seçenek için <b><tt>dump(8)</tt></b> ve
<b><tt>restore(8)</tt></b> kelimelerine bakabilirsiniz. Aþaðýda kök dizini
transfer edilirken oluþan çýktýyý göreceksiniz.

<pre class="code">$ ssh 10.42.3.42 'dump -0 -f - /' | restore -r -f -
DUMP: Date of this level 0 dump: Tue Feb 22 15:50:12 2005
DUMP: Dumping /dev/hda3 (/) to standard output
DUMP: Label: debian
DUMP: Writing 10 Kilobyte records
DUMP: mapping (Pass I) [regular files]
DUMP: mapping (Pass II) [directories]
DUMP: estimated 547312 blocks.
DUMP: Volume 1 started with block 1 at: Tue Feb 22 15:50:14 2005
DUMP: dumping (Pass III) [directories]
DUMP: dumping (Pass IV) [regular files]
DUMP: Volume 1 completed at: Tue Feb 22 15:51:43 2005
DUMP: Volume 1 546590 blocks (533.78MB)
DUMP: Volume 1 took 0:01:29
DUMP: Volume 1 transfer rate: 6141 kB/s
DUMP: 546590 blocks (533.78MB)
DUMP: finished in 89 seconds, throughput 6141 kBytes/sec
DUMP: Date of this level 0 dump: Tue Feb 22 15:50:12 2005
DUMP: Date this dump completed: Tue Feb 22 15:51:43 2005
DUMP: Average transfer rate: 6141 kB/s
DUMP: DUMP IS DONE
</pre>

Geri yükleme her zaman <tt>restoresymtable</tt> adýnda bir dosya oluþturur.
Dosya sistemi yüklenirken bir hata oluþmadýðýndan eminseniz
bir defaya mahsus olarak bu dosyayý silebilirsiniz.

Kök dosya sistemi bittikten sonra, diðer baðlý alt-sistemleri de
<tt>/usr</tt> ile baþlayarak ayný þekilde halledebiliriz (çalýþma
dizininin yeni sistemin kökünde olduðunu kabul ediyoruz).


<pre class="code">mount /dev/xxx  ./usr

cd ./usr

ssh hedefBilgisayar 'dump -0 -f - /usr' | restore -r -f -
</pre>

Bu þekilde mount-cd-dump/restore döngüsünü bütün bölümler için
gerçekleþtirin. <tt>/usr/share</tt> (kaynak bilgisayarda
kendine has bir bölümü olan) bölümüne gelince, yukarýdaki adýmlardan sonra
bulunduðunuz dizini <tt>./usr/share</tt> olarak deðiþtirin ("."
karakterine dikkat edin) ve þunlarý tekrarlayýn

<pre class="code">ssh hedefBilgisayar 'dump -0 -f - /usr/share' | restore -r -f -</pre>

Sadece varolan dosyalarý tekrar yükleme sorulursa yükleyin, dolayýsýyla
kaynak bilgisayardaki iki farklý bölümün hedef bilgisayardaki bir bölüme
konmasýnda her hangi bir problem olmayacaktýr. Bütün sistemi klonlamak
ssh ve 100MB að kartlarý ile yaklaþýk bir saat sürecektir (köprülü kablo
da bir bonus).

<p>
<strong>Not: </strong>Bir dosya sisteminin dökümünü almak için sisteme
baðlý olmasýna gerek yoktur. Ayný zamanda baðlanmýþ bir bölüm için dizin
ismini kullanmaktansa <big><tt>/dev/hda6</tt></big> gibi <i>bölüm
etiketi</i> de kullanabilirsiniz.
</p>




<h1>Alternatif: &nbsp;<tt>netcat</tt> </h1>


<p>
ssh'a alternatif olarak kýsaltmasý nc olan <tt>netcat(1)</tt> 'i de
kullanabilirsiniz. Netcat að üzerinde borular oluþturmanýza izin veren
TCP/IP istemci sunucu iþerinde kolay bir kullanýma sahip isviçre çakýsý
gibi bir þey. Yukarýdaki örnekler sadece aþaðýdaki gibi deðiþtirildiðinde
sorun kalmayacaktýr. <big><tt>/var/backup</tt></big> bölümünün kaynak
bilgisayardan hedef bilgisayara <big><tt>dump/restore</tt></big> ile
taþýndýðýný varsayýyoruz.
</p>
Alýcý tarafýnda (<em>hedef Bilgisayar</em>) ise bir dinleyici oluþturmak için
<tt>netcat -l</tt> komutunun çýkýþýný <tt>restore</tt> komutuna baðlayýn.

<pre class="code">nc -l -p 2000 -q 1 | restore -r -f -</pre>

<em>Kaynak Bilgisayar</em>'da girdisi <tt>Hedef Bilgisayarýn IP'si</tt>
olan bir <tt>netcat</tt> durumu oluþturun.

<pre class="code">dump -0 -f - /var/backup | nc &lt;HedefBilgisayar-ip&gt;   2000</pre>

<tt>-q</tt> seçeneði <tt>nc</tt>'nin dosya-sonu (EOF) karakteri alýnca
durmasýný saðlayacak, fakat benim yöntemimde elle durdurmak zorunda
kalacaðým. Zaten <tt>ssh</tt> kullanmanýzý tavsiye ederim.

<h1> Derleme </h1>
Tebrikler, buraya kadar bir sorun çýkmadýysa klonlanmýþ bir sisteme sahip
oldunuz. Þimdi de bu klonu çalýþabilir hale getirelim. Ýlk olarak
<tt>/etc/fstab</tt> dosyasýný yeni ayarlar göre güncelleyin, aksi takdirde
klonlanmýþ bölümleri kullanamazsýnýz. IP adresi deðiþtiyse (<tt>/etc/hosts</tt>,
Debian'da <tt>/etc/network/interfaces</tt>) dosyasýný da
güncellemelisiniz. Önemli bir konu da neredeyse tamamý deðiþecek olan <i>açýlýþ yöneticisi</i>nin
güncellenmesi. <tt>lilo</tt> kullanýyorsanýz, <tt>/etc/lilo.conf</tt>
dosyasýný düzenleyin (özellikle <tt>root=...</tt> kýsmýný) ve sonra
<tt>lilo -v</tt> komutunu çalýþtýrýn. grub kullanýyorsanýz,
<tt>/boot/grub/menu.lst</tt> düzenleyin
(veya <tt>/boot/grub/grub.conf</tt> hangisinin sembolik link olduðuna
baðlý) ve sonra da <tt>grub</tt> komutunu çalýþtýrýn,

<pre class="code">grub&gt; root (hd0,xxx)

... filesystem is ...

grub&gt; setup (hd0)

... lots of output here

grub&gt; quit
</pre>

veya <tt>xxx</tt> yerine sabit sürücünüzü yazýn ve þu komutu kullanýn:
<tt>grub-install /dev/xxx</tt>. Burada hem <tt>root (hdn,xx)</tt> kýsmýný
hem de <tt>root=/dev/xxx</tt> kýsmýný kontrol edin.

<p>

Eðer klonlanmýþ bilgisayarda donanýmýnýz daha iyiyse <i>özel-çekirdek
ayarlarý</i>'ný güncellemek isteyebilirsiniz. Eðer önceden
ayarlanmýþ birçok modüllü bir sistem kullanýyorsanýz (RedHat, SuSe,
Mandrake, Fedora ... gibi) endiþelenmeyin, büyük bir olasýlýkla uygun bir
modül vardýr. Yoksa, <tt>lspci -vv</tt> ve baþka yerlerde açýklandýðý gibi
çekirdeðin derlenmesi ile sorunu çözebilirsiniz. Ekran kartýnýz farklýysa
<tt>/etc/X11/XF86Config-4</tt> dosyasýný güncelleyin (veya
<tt>xorg.conf</tt> RH/Fedora'da), aksi takdirde ekran çýktýsý alamazsýnýz.
Mümkünse ve elinizde gerekli araçlar mevcut ise 3. çalýþma düzeyinde
bilgisayarý açýp grafik araçlarýnýn yardýmýyla X ortamýnýn ayarlarýný
yapabilirsiniz. Debian altýnda biraz araþtýrma gerekiyor, bende sürücü
<tt>r128</tt>'den <tt>radeon</tt>'a deðiþtiði için þanslýydým.
</p>

<a name="sec:Other-systems"></a>
<A NAME="370lfindex4">&nbsp;</A>
<H2>Diðer Sistemler</H2>



<p>
Bu belge <tt>ext2/ext3</tt> dosya sistemlerinin nasýl klonlandýðýný
anlatýyor. Birçok benzer komut diðer birçok Linux sistemlerinde
bulunabilir. Mesela, FreeBSD, HP-UX, IRIX gibi birçok Unix sistemleri
<tt>dump/restore</tt> komutlarýný destekler; Solaris'te
<tt>ufsdump/ufsrestore</tt> diye adlandýrýlmýþtýr. ReiserFS gibi dump
fonksiyonunu tavsiye etmeyen dosya sistemleri de mevcut. Burada kendisine
<tt>rsync</tt> kullanmayý tavsiye ediyor. <tt>rsync</tt> ile bir Linux
sistemin nasýl baþarýlý bir þekilde klonlanabileceðini burada
görebilirsiniz [<a href="#key-2">1</a>].
</p>


<A NAME="370lfindex5">&nbsp;</A>
<H2>Kaynaklar </H2>


<dl compact="compact">
<dt><a name="key-2">[1]</a>
<i>''<a href="http://www.linuxgazette.com/issue83/okopnik.html">Farklý Bir
    Metotla - Bir Linux Sistemin Klonlanmasý</a></i>.'' Ben Okopnik, Linux Gazette Issue 83, October 2002.
</dt>
</dl>


<!-- vim: set sw=2 ts=2 et tw=74: -->


<!-- 2pdaIgnoreStart -->
<A NAME="talkback">&nbsp;</a>
<h2>Bu yazý için görüþ bildiriminde bulunabilirsiniz</h2>
Her yazý kendi görüþ bildirim sayfasýna sahiptir. Bu sayfaya yorumlarýnýzý yazabilir ve diðer okuyucularýn yorumlarýna bakabilirsiniz.
<center>
<table border="0"  CELLSPACING="2" CELLPADDING="1" summary="tb-button-outerpart">
 <tr BGCOLOR="#C2C2C2"><td align=center>
  <table border="3"  CELLSPACING="2" CELLPADDING="1" summary="tb-button">
   <tr BGCOLOR="#C2C2C2"><td align=center>
    <A href="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=370"><b>&nbsp;talkback page&nbsp;</b></a>
   </td></tr></table>
</td></tr></table>
</center>

<HR size="2" noshade>
<a style="background-color:#bdc6d5" href="./">&lt;--, Bu sayýnýn ana sayfasýna gider </a><br><HR size="2" noshade>
<!-- ARTICLE FOOT -->
<CENTER><TABLE WIDTH="98%" summary="footer">
<TR><TD ALIGN=CENTER BGCOLOR="#bdc6d5" WIDTH="50%">
<A HREF="../../common/lfteam.html">Görselyöre sayfalarýnýn bakýmý, LinuxFocus Editörleri tarafýndan yapýlmaktadýr</A>
<BR><FONT COLOR="#FFFFFF">&copy; Gerrit Renker, <a href="../../common/copy.html">FDL</a> <BR><a href="http://www.linuxfocus.org">LinuxFocus.org</a></FONT>
</TD>
<TD BGCOLOR="#bdc6d5">
<!-- TRANSLATION INFO -->
<font size=2>Çeviri bilgisi:</font>
<TABLE summary="translators">
  <tr><td><font size="2">en --&gt; -- : Gerrit Renker <small>&lt;gerrit.renker(at)gmx.de&gt;</small></font></td></tr>
  <tr><td><font size="2">en --&gt; tr: Cem Aytar &lt;cemaytar(at)gmail.com&gt;</font></td></tr>
</TABLE>
</TD>
</TR></TABLE></CENTER>
<p><font size=1>2005-08-30, generated by lfparser version 2.46</font></p>
<!-- 2pdaIgnoreStop -->
</BODY>
</HTML>
