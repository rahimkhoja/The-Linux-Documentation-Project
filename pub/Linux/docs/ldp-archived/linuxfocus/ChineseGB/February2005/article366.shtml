<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
 <META http-equiv="Content-Type" content="text/html; charset=gb2312">
 <META NAME="GENERATOR" CONTENT="lfparser_2.51">
 <META NAME="LFCATEGORY" CONTENT="Applications">
 <link rel="icon" href="../../common/images/lf-16.png" type="image/png">
 <TITLE>lf366, Applications: LF Tip: 从HTML文件生成PDF</TITLE>
<style type="text/css">
<!--
 td.top {font-family: Arial,Geneva,Verdana,Helvetica,sans-serif; font-size:12 }
 pre { font-family:monospace,Courier }
 pre.code { font-family:monospace,Courier;background-color:#aedbe8; }
 p.cl { color:#EE9500 }
 table.left { margin-right:0.3cm }
 a.nodec { text-decoration:none }
 p.trans { font-size:8pt; text-align:right }
 p.clbox { width:50%; alignment:center; background-color:#FFD700; 
           border-style:none; border-width:medium; border-color:#FFD700; 
           padding:0.5cm;  text-align:center }
 p.code { width:80%; alignment:center; background-color:#aedbe8; 
          border-style:none; border-width:medium; border-color:#aedbe8; 
          padding:0.1cm;  text-align:left }
 p.foot { background-color:#AAAAAA; color:#FFFFFF; border-style:none; 
          border-width:medium; border-color:#AAAAAA; padding:0.5cm ; 
          margin-top:0.1cm; margin-right:1cm; margin-left:1cm; 
          text-align:center }
 div.tbbutton {
   background: #ddd;
   border-right: 1px solid #aaa;
   border-bottom: 1px solid #aaa;
   margin: 2px 5px 2px 5px;
   text-align: center;
   width: 20em;
   line-height: 1.2em;
   padding: 2px;
   font-size: 12px;
   white-space: nowrap;
   color: #555;
 }
 div.bbutton {
   background: #ddd;
   border-right: 1px solid #aaa;
   border-bottom: 1px solid #aaa;
   float: left;
   margin: 2px 5px 2px 5px;
   text-align: center;
   line-height: 1.2em;
   padding: 2px;
   font-size: 12px;
   white-space: nowrap;
   color: #555;
 }
-->
</style>
 
</HEAD>
<BODY bgcolor="#ffffff" text="#000000">
 <!-- this is generated html code. NEVER use this file for your
 translation work. Instead get the file with the same article number
 and .meta.shtml in its name. Translate this meta file and then
 use lfparser program to generate the final article -->
 <!-- lfparser can be obtained from http://main.linuxfocus.org/~guido/dev/lfparser.html -->

<!-- this is used by a number of tools:
 =LF=AUTHOR: Guido Socher
 =LF=CAT___: Applications
 =LF=TITLE_: LF Tip: 从HTML文件生成PDF
 =LF=NUMBER: 366
 =LF=ANAME_: article366.shtml
 =LF=PARSER: 2.51
 -->

<!-- 2pdaIgnoreStart -->

<!-- start navegation bar, current, style=2 -->
 <!-- top navegation bar -->
 <TABLE summary="topbar_1" cellspacing="0" cellpadding="0" border="0" align="center" width="90%">
   <TR bgcolor="#2e2292">
     <TD class="top"><TABLE summary="topbar_1_logo" cellspacing="0" cellpadding="0" border="0" width=
       "100%">
         <TR><TD width="319"><a href="../../index.shtml"><IMG src="../../common/images/logolftop_319x45.gif"
           alt="[LinuxFocus-icon]" width="319" height="45" align="left" 
           border="0"></a></TD>

           <TD class="top">
             <TABLE summary="topbar_1_links" width="100%">
               <TR align="right">
                 <TD class="top">
                 
                 <A class="nodec" href="../../index.shtml"><FONT color=
                 "#DDDDDD" size="2">&lt;--</FONT></A> &nbsp;| 
                 <A class="nodec" href="../map.html"><FONT color=
                 "#DDDDDD" size="2">站点地图</FONT></A> &nbsp;| 
                 <A class="nodec" href="../indice.html"><FONT color=
                 "#DDDDDD" size="2">索引</FONT></A> &nbsp;| 
                 <A class="nodec" href="../Search/index.shtml"><FONT color=
                 "#DDDDDD" size="2">搜索</FONT></A> </TD>
                 
               </TR>

               <TR align="right">
                 <TD class="top">
                   <HR width="100%" noshade size="1">
                 </TD>
               </TR>
             </TABLE>
           </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end top navegation bar -->
 <!-- blue bar -->
 <TABLE summary="topbar_2" cellspacing="0" cellpadding="0" border="0" align="center"
 width="90%">
   <TR bgcolor="#00ffff">
     <TD><IMG src="../../common/images/transpix.gif" width="1" height=
     "2" alt=""></TD>
   </TR>
 </TABLE>
 <!-- end blue bar -->
 <!-- bottom navegation bar -->
 <TABLE summary="topbar_3" cellspacing="0" cellpadding="0" border="0" align="center"
 width="94%">
   <TR bgcolor="#000000">
     <TD>
       <TABLE summary="topbar_3_links" cellspacing="0" cellpadding="1" border="0" width=
       "100%">
         <TR align="center">
           <TD WIDTH="20%"><A class="nodec" href="../News/index.shtml"><FONT color=
           "#FFFFFF">新闻</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Archives/"><FONT color=
           "#FFFFFF">过往期刊</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Links/index.shtml"><FONT color=
           "#FFFFFF">链接</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../aboutus.html"><FONT color=
           "#FFFFFF">关于LF</FONT></A> </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end bottom navegation bar -->
<!-- stop navegation bar -->

<!-- SSI_INFO -->

<!-- tr_staticssi include virtual -->
<!-- tr_staticssi exec cmd -->
<!-- addedByLfdynahead ver 1.5 --><TABLE ALIGN="right" border=0><TR><TD ALIGN="right"><FONT SIZE="-1" FACE="Arial,Helvetica">This document is available in: <A href="../../English/February2005/article366.shtml">English</a> &nbsp;<A href="../../Castellano/February2005/article366.shtml">Castellano</a> &nbsp;<A href="../../ChineseGB/February2005/article366.shtml">ChineseGB</a> &nbsp;<A href="../../Deutsch/February2005/article366.shtml">Deutsch</a> &nbsp;<A href="../../Francais/February2005/article366.shtml">Francais</a> &nbsp;<A href="../../Nederlands/February2005/article366.shtml">Nederlands</a> &nbsp;<A href="../../Russian/February2005/article366.shtml">Russian</a> &nbsp;</FONT></TD></TR></TABLE><br>
 


<!-- SSI_INFO STOP -->
<!-- 2pdaIgnoreStop -->

<!-- SHORT_BIO_ABOUT_THE_AUTHOR_AND_INDEX_START -->
<TABLE ALIGN="LEFT" BORDER="0" WIDTH="195" summary="about the author" class="left">
<TR>
<TD>

<img src="../../common/images/Guido-S.gif" alt=
    "[Photo of the Author]" height="164" width="173">
<BR>by  Guido Socher <a href="http://main.linuxfocus.org/%7Eguido/"><font size="1">(homepage)</font></a>
<BR><BR>
<I>关于作者:</I><BR>
<!-- aboutauthor_start -->
<p>
    以前我们说希望Linuxfocus的文章能用PDF格式的文件存放并让大家下载。
    作为回应我们收到好多的建议并把它们总结成了这个tip。感谢所有的建议。

    
<!-- aboutauthor_stop -->
<!-- TRANSLATED_TO gb -->
<!-- TRANSLATED_TO_STOP -->
<!-- INDEX_START -->
<BR><i>目录</i>:
<UL>
  <LI><A HREF="#366lfindex0">简介</A></LI>
  <LI><A HREF="#366lfindex1">思想</A></LI>
  <LI><A HREF="#366lfindex2">候选项</A></LI>
  <LI><A HREF="#366lfindex3">结论Conclusion</A></LI>
  <LI><A HREF="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=366">对这篇文章发表评论</A></LI>
</UL>

</TD></TR></TABLE>
<!-- INDEX_STOP -->
<!-- SHORT_BIO_ABOUT_THE_AUTHOR_AND_INDEX_STOP -->
<!-- HEAD_OF_THE_ARTICLE_START -->
<br>&nbsp;
<table border="0"><tr><td>
<H2>LF Tip: 从HTML文件生成PDF</H2>
 <img src="../../common/images2/article366.gif" alt="mozilla firefox" hspace="10" width="50" height="50">
<!-- ABSTRACT OF THE ARTICLE -->
<P><i>摘要</i>:
<P>
<!-- articleabstract_start -->

    这是一个小技巧，从现在开始，LinuxFocus每月都会至少提供一个这样的技巧。
    如果你有有关这些小技巧的新想法，请发邮件到：guido(at)linuxfocus.org。
<br>
<!-- articleabstract_stop -->

<br><!-- HR divider --><center><font color="#8282e0"><b>_________________ _________________ _________________</b></font></center><br>
</td></tr></table>
<!-- HEAD_OF_THE_ARTICLE_STOP -->
<!-- BODY_OF_THE_ARTICLE_START -->


    <A NAME="366lfindex0">&nbsp;</A>
<H2>简介</H2>

你可能已经看到我们已经把所有使用ISO8859-1字符集的文章转换成PDF文件了。
这是很不容易实现的。特别是因为我们想自动生成它们而又不想它们与对应的HTML
文件有所不同。
<br>
<br>
下面就是现在我们怎样使用一系列的选项生成PDF文件的一些经验。


    <A NAME="366lfindex1">&nbsp;</A>
<H2>思想</H2>

所有的Linux系统都有ghostscript工具ps2pdf。它工作的非常好并且生成的PDF文件也非常漂亮。
换句话说如果我们使用postscript文件管理我们的文档，我们就总是能够生成PDF文件。
<br>
<br>
整个Linux打印系统都是基于postscript的，所以这项工作应该很容易？！
但问题是我们必须寻找一个使用命令行脚本的方法。
因为我想假设有几千个文件需要打印的话你肯定不想用鼠标一直点下去。

<br><br>
如果你不关心表格、颜色和图像的话，那么命令组合“lynx -dump .... | nenscript”肯定是可以的。
但如果你想要表格或者图像，那就继续往下看。

    <A NAME="366lfindex2">&nbsp;</A>
<H2>候选项</H2>

<h4>html2ps</h4>
这是一个perl脚本。我们进行测试的版本号是html2ps 1.0 beta3。
它的主页是http://user.it.uu.se/~jan/html2ps.html<br>
该程序工作的相当好。但它需要依赖好多perl模块并且在处理含有表格的页面时会有些问题。
如果你的页面布局比较简单的话这还是一个很好的选择。

<h4>Latex</h4>
有一个Latex到PDF的转换工具。你可以先使用xslt将HTML转为Latex。
但要使用它你的HTML必须有正确的语法结构。当然你可以使用Tidy工具来完成：
<pre class="code">
HTML --(tidy)--&gt; XHTML --(XSLT)--&gt; Latex --(pdflatex)--&gt; PDF
</pre>
因为我发现xslt和Latex太过于笨重和复杂，所以对此没有进行深入研究。
<h4>远程控制Web浏览器</h4>
如果我们可以对web浏览器进行远程控制的话我们就可以生成跟你通常从浏览器里看到的一模一样的PDF。
问题是我们需要X11显示，而这不大可能由cron-job来执行的。
<br>
<br>
Mozilla项目增强了打印和显示功能，但是去除了一些在netscape communicator中存在的一些远程控制特性。
下面的解决方案只有使用communicator 4.x才能工作。
<pre class="code">
netscape -noraise -remote &quot;openurl(http://somepage)&quot;
sleep(10) # there is no way to know if the page is completely loaded
          # so we just wait a bit
          # 我们无法知道页面是否已经装载完毕，所有只好等一会儿了
netscape -noraise -remote saveas(somepage.ps,PostScript)
sleep(10)
ps2pdf somepage.ps
</pre>

有些读者告诉我说他们认为在konqueror中使用远程打印也是可能的，但没有人提供一个可行的解决方案。


<h4>htmldoc</h4>
Htmldoc是一个写得很好的工具（http://www.htmldoc.org/）。
下面的命令可以得到我们需要的结果（非常完美）：
<pre class="code">
htmldoc -t pdf -webpage -f file.pdf file.html
</pre>
我们使用版本1.8.24，它做的非常完美。唯一的问题是无论我们在Htmldoc中使用何种压缩选项，
它生成的PDF都会比任何其他的解决方案生成的文件平均大10倍。
如果你有几千个文档那肯定是个大问题。

<A NAME="366lfindex3">&nbsp;</A>
<H2>结论Conclusion</H2>

我们现在结合使用netscape远程控制和Htmldoc。
由于Htmldoc生成的文件太大，我们不能仅仅指望它。
如果你有关于该主题进一步的解决方案请给我们发邮件。

  



<!-- BODY_OF_THE_ARTICLE_STOP -->
<!-- 2pdaIgnoreStart -->
<A NAME="talkback">&nbsp;</a>
<h2>对这篇文章发表评论</h2>
每篇文章都有各自的反馈页面。在这个页面里，您可以提交评论，也可以查看其他读者的评论：
<center>
    <table width="250" border=0><tr><td>
    <div class="tbbutton"><A class="nodec" href="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=366">&nbsp;反馈页面&nbsp;</a></div>
    </td></tr></table>
</center>

<br clear="all">
<HR size="2" noshade>
<table width="250" border=0><tr><td>
<div class="bbutton"><a class="nodec" href="../../index.shtml">&lt;--, LF 首页</a></div>
</td><td>
<div class="bbutton"><a class="nodec" href="index.shtml">Go to the index of this issue</a></div>
</td></tr></table>
<br clear="all">
<HR size="2" noshade>
<!-- ARTICLE FOOT -->
<CENTER><TABLE WIDTH="98%" summary="footer">
<TR><TD ALIGN=CENTER BGCOLOR="#bdc6d5" WIDTH="50%">
<A HREF="../../common/lfteam.html">主页由LinuxFocus编辑组维护</A>
<BR><FONT COLOR="#1111aa"><a href="../../common/copy.html">&copy; Guido Socher</a><br>&quot;some rights reserved&quot; see <a href="../../license/index.shtml">linuxfocus.org/license/</a><br><a href="http://www.linuxfocus.org">http://www.LinuxFocus.org</a></FONT>
</TD>
<TD BGCOLOR="#bdc6d5">
<!-- TRANSLATION INFO -->
<font size=2>翻译信息:</font>
<TABLE summary="translators">
  <tr><td><font size="2">en --&gt; -- : Guido Socher (<a href="http://main.linuxfocus.org/%7Eguido/"><font size="1">homepage</font></a>)</font></td></tr>
  <tr><td><font size="2">en --&gt; zh_CN: SEVEN &lt;seven1240(at)163.com&gt;</font></td></tr>
</TABLE>
</TD>
</TR></TABLE></CENTER>
<p><font size=1>2005-02-07, generated by lfparser version 2.51</font></p>
<!-- 2pdaIgnoreStop -->
</BODY>
</HTML>
