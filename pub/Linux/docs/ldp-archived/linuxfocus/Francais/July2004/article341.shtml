<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
 <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
 <META NAME="GENERATOR" CONTENT="lfparser_2.52">
 <META NAME="LFCATEGORY" CONTENT="SystemAdministration">
 <link rel="icon" href="../../common/images/lf-16.png" type="image/png">
 <TITLE>lf341, SystemAdministration: vsftpd - une introduction au Very Secure FTP Daemon.</TITLE>
<style type="text/css">
<!--
 td.top {font-family: Arial,Geneva,Verdana,Helvetica,sans-serif; font-size:12 }
 pre { font-family:monospace,Courier }
 pre.code { font-family:monospace,Courier;background-color:#aedbe8; }
 p.cl { color:#EE9500 }
 table.left { margin-right:0.3cm }
 a.nodec { text-decoration:none }
 p.trans { font-size:8pt; text-align:right }
 p.clbox { width:50%; alignment:center; background-color:#FFD700; 
           border-style:none; border-width:medium; border-color:#FFD700; 
           padding:0.5cm;  text-align:center }
 p.code { width:80%; alignment:center; background-color:#aedbe8; 
          border-style:none; border-width:medium; border-color:#aedbe8; 
          padding:0.1cm;  text-align:left }
 p.foot { background-color:#AAAAAA; color:#FFFFFF; border-style:none; 
          border-width:medium; border-color:#AAAAAA; padding:0.5cm ; 
          margin-top:0.1cm; margin-right:1cm; margin-left:1cm; 
          text-align:center }
 div.tbbutton {
   background: #ddd;
   border-right: 1px solid #aaa;
   border-bottom: 1px solid #aaa;
   margin: 2px 5px 2px 5px;
   text-align: center;
   width: 20em;
   line-height: 1.2em;
   padding: 2px;
   font-size: 12px;
   white-space: nowrap;
   color: #555;
 }
 div.bbutton {
   background: #ddd;
   border-right: 1px solid #aaa;
   border-bottom: 1px solid #aaa;
   float: left;
   margin: 2px 5px 2px 5px;
   text-align: center;
   line-height: 1.2em;
   padding: 2px;
   font-size: 12px;
   white-space: nowrap;
   color: #555;
 }
-->
</style>
 
</HEAD>
<BODY bgcolor="#ffffff" text="#000000">
 <!-- this is generated html code. NEVER use this file for your
 translation work. Instead get the file with the same article number
 and .meta.shtml in its name. Translate this meta file and then
 use lfparser program to generate the final article -->
 <!-- lfparser can be obtained from http://main.linuxfocus.org/~guido/dev/lfparser.html -->

<!-- this is used by a number of tools:
 =LF=AUTHOR: Mario M. Knopf
 =LF=CAT___: SystemAdministration
 =LF=TITLE_: vsftpd - une introduction au Very Secure FTP Daemon.
 =LF=NUMBER: 341
 =LF=ANAME_: article341.shtml
 =LF=PARSER: 2.52
 -->

<!-- 2pdaIgnoreStart -->

<!-- start navegation bar, current, style=2 -->
 <!-- top navegation bar -->
 <TABLE summary="topbar_1" cellspacing="0" cellpadding="0" border="0" align="center" width="90%">
   <TR bgcolor="#2e2292">
     <TD class="top"><TABLE summary="topbar_1_logo" cellspacing="0" cellpadding="0" border="0" width=
       "100%">
         <TR><TD width="319"><a href="../../index.shtml"><IMG src="../../common/images/logolftop_319x45.gif"
           alt="[LinuxFocus-icon]" width="319" height="45" align="left" 
           border="0"></a></TD>

           <TD class="top">
             <TABLE summary="topbar_1_links" width="100%">
               <TR align="right">
                 <TD class="top">
                 
                 <A class="nodec" href="../../index.shtml"><FONT color=
                 "#DDDDDD" size="2">&lt;--</FONT></A> &nbsp;| 
                 <A class="nodec" href="../index.shtml"><FONT color=
                 "#DDDDDD" size="2">Sommaire</FONT></A> &nbsp;| 
                 <A class="nodec" href="../map.html"><FONT color=
                 "#DDDDDD" size="2">Carte</FONT></A> &nbsp;| 
                 <A class="nodec" href="../indice.html"><FONT color=
                 "#DDDDDD" size="2">Index</FONT></A> &nbsp;| 
                 <A class="nodec" href="../Search/index.html"><FONT color=
                 "#DDDDDD" size="2">Recherche</FONT></A> </TD>
                 
               </TR>

               <TR align="right">
                 <TD class="top">
                   <HR width="100%" noshade size="1">
                 </TD>
               </TR>
             </TABLE>
           </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end top navegation bar -->
 <!-- blue bar -->
 <TABLE summary="topbar_2" cellspacing="0" cellpadding="0" border="0" align="center"
 width="90%">
   <TR bgcolor="#00ffff">
     <TD><IMG src="../../common/images/transpix.gif" width="1" height=
     "2" alt=""></TD>
   </TR>
 </TABLE>
 <!-- end blue bar -->
 <!-- bottom navegation bar -->
 <TABLE summary="topbar_3" cellspacing="0" cellpadding="0" border="0" align="center"
 width="94%">
   <TR bgcolor="#000000">
     <TD>
       <TABLE summary="topbar_3_links" cellspacing="0" cellpadding="1" border="0" width=
       "100%">
         <TR align="center">
           <TD WIDTH="20%"><A class="nodec" href="../News/index.shtml"><FONT color=
           "#FFFFFF">Nouvelles</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Archives/index.html"><FONT color=
           "#FFFFFF">Archives</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Links/index.html"><FONT color=
           "#FFFFFF">Liens</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../aboutus.html"><FONT color=
           "#FFFFFF">A propos</FONT></A> </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end bottom navegation bar -->
<!-- stop navegation bar -->

<!-- SSI_INFO -->

<!-- tr_staticssi include virtual -->
<!-- tr_staticssi exec cmd -->
<!-- addedByLfdynahead ver 1.5 --><TABLE ALIGN="right" border=0><TR><TD ALIGN="right"><FONT SIZE="-1" FACE="Arial,Helvetica">Ce document est disponible en: <A href="../../English/July2004/article341.shtml">English</a> &nbsp;<A href="../../ChineseGB/July2004/article341.shtml">ChineseGB</a> &nbsp;<A href="../../Deutsch/July2004/article341.shtml">Deutsch</a> &nbsp;<A href="../../Francais/July2004/article341.shtml">Francais</a> &nbsp;<A href="../../Italiano/July2004/article341.shtml">Italiano</a> &nbsp;<A href="../../Nederlands/July2004/article341.shtml">Nederlands</a> &nbsp;<A href="../../Russian/July2004/article341.shtml">Russian</a> &nbsp;<A href="../../Turkce/July2004/article341.shtml">Turkce</a> &nbsp;<A href="../../Polish/July2004/article341.shtml">Polish</a> &nbsp;</FONT></TD></TR></TABLE><br>
 


<!-- SSI_INFO STOP -->
<!-- 2pdaIgnoreStop -->

<!-- SHORT_BIO_ABOUT_THE_AUTHOR_AND_INDEX_START -->
<TABLE ALIGN="LEFT" BORDER="0" WIDTH="195" summary="about the author" class="left">
<TR>
<TD>

<img width="150" height="130" alt="[Photo de l'auteur]" src="../../common/images2/MarioMKnopf.jpg">
<BR>par  Mario M. Knopf <br> <small>&lt;netzmeister/at/neo5k/dot/org&gt;</small>
<BR><BR>
<I>L&acute;auteur:</I><BR>
<!-- aboutauthor_start -->
<p>Mario s'occupe volontiers, avec Linux, des r&eacute;seaux et
    ce qui touche &agrave; la s&eacute;curit&eacute;. Pendant son temps libre, il maintient les sites <a href="http://www.neo5k.org/">neo5k.org</a> et <a href="http://www.linuxwallpapers.de/">linuxwallpapers.de</a>.</p>
<!-- aboutauthor_stop -->
<!-- TRANSLATED_TO fr -->
<BR><BR><I>Traduit en Français par:</I><BR>
Marc Remy <small>&lt;mremy(at)gmx(punkt)ch&gt;</small>
<br>
<!--
 =LF=TRANSTO=fr: Marc Remy
-->
<!-- TRANSLATED_TO_STOP -->
<!-- INDEX_START -->
<BR><i>Sommaire</i>:
<UL>
  <LI><A HREF="#341lfindex0">Introduction</A></LI>
  <LI><A HREF="#341lfindex1">vsftpd</A></LI>
  <LI><A HREF="#341lfindex2">Installation</A></LI>
  <LI><A HREF="#341lfindex3">Configuration</A></LI>
  <LI><A HREF="#341lfindex4">D&eacute;marrage du service FTP</A></LI>
  <LI><A HREF="#341lfindex5">inetd</A></LI>
  <LI><A HREF="#341lfindex6">xinetd</A></LI>
  <LI><A HREF="#341lfindex7">Utilisation autonome</A></LI>
  <LI><A HREF="#341lfindex8">Essai</A></LI>
  <LI><A HREF="#341lfindex9">Conclusion</A></LI>
  <LI><A HREF="#341lfindex10">Liens</A></LI>
  <LI><A HREF="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=341">Talkback form for this article</A></LI>
</UL>

</TD></TR></TABLE>
<!-- INDEX_STOP -->
<!-- SHORT_BIO_ABOUT_THE_AUTHOR_AND_INDEX_STOP -->
<!-- HEAD_OF_THE_ARTICLE_START -->
<br>&nbsp;
<table border="0"><tr><td>
<!-- tr_staticssi include virtual -->
<!-- tr_staticssi exec cmd -->
<!-- addedByLfPdf ver 0.1 -->
<TABLE style="border-style:outset; border-width:1px" align="right" bgcolor="#ff9616" cellspacing="1"><TR><TD bgcolor="#ff9616">
        <a href="../Archives/lf-2004_07-0341.pdf"><small>PDF</small></a>
        </TD></TR></TABLE>
         

<H2>vsftpd - une introduction au Very Secure FTP Daemon.</H2>
 <img src="../../common/images2/illustration341.jpg" hspace="10" alt="vsftp" width="300" height="150">
<!-- ABSTRACT OF THE ARTICLE -->
<P><i>R&eacute;sum&eacute;</i>:
<P>
<!-- articleabstract_start -->

    Cet article donne une petite introduction au "Very
    Secure FTP Daemon". Je commence par une introduction g&eacute;n&eacute;rale du protocole FTP puis de vsftpd. Ensuite nous regarderons l'installation, la configuration et les options de d&eacute;marrage du d&eacute;mon vsftpd. Nous terminerons avec un petit essai.

    
<!-- articleabstract_stop -->

<br><!-- HR divider --><center><font color="#8282e0"><b>_________________ _________________ _________________</b></font></center><br>
</td></tr></table>
<!-- HEAD_OF_THE_ARTICLE_STOP -->
<!-- BODY_OF_THE_ARTICLE_START -->


    <A NAME="341lfindex0">&nbsp;</A>
<H2>Introduction</H2>

    Le File Transfer Protocol (FTP) sert &agrave; l'&eacute;change de donn&eacute;es sur internet, ind&eacute;pendamment de la plate-forme et il est bas&eacute; sur une architecture client-serveur. La RFC 959 [1] d&eacute;crit que le protocole FTP est s&eacute;par&eacute; en deux canaux, l'un pour les donn&eacute;es (TCP-Port 20) et l'autre sert pour l'administration (TCP-Port 21). Le canal de commande sert &agrave; l'&eacute;change des commandes entre les deux cot&eacute;s (Serveur et Client), qui pr&eacute;parent les transferts des donn&eacute;es.<br>
    Une session FTP se d&eacute;roule en quatre &eacute;tapes:

    <ul class="noindent">
      <li>Authentification de l'utilisateur</li>

      <li>Etablissement du canal de contr&ocirc;le</li>

      <li>Etablissement du canal de donn&eacute;es</li>

      <li>Fermeture de la connexion</li>
    </ul>

    <p>FTP utilise TCP (Transmission Control Protocol), qui est orient&eacute; connexion comme protocole de transport garantissant l'acheminement des donn&eacute;es jusqu'au destinataire. Ainsi, FTP n'a pas &agrave; se pr&eacute;occuper d'une possible perte de paquet ou de contr&ocirc;le d'erreur lors du transfert. Simplement dit, TCP s'assure que chaque paquet de donn&eacute;es arrive une et une seule fois, sans erreur et dans le bon ordre.</p>

    <p>Il existe trois modes de transmission des donn&eacute;es. La fin de la
    transmission est indiqu&eacute;e par un End-of-File EOF en mode stream,
    par un End-of-Record (EOR) pour les deux autres.</p>

    <ul class="noindent">
      <li>Stream</li>

      <li>Block</li>

      <li>Compressed</li>
    </ul>

    <p>En plus, il y a deux modes de transfert diff&eacute;rents:</p>

    <ul class="noindent">
      <li>ASCII</li>

      <li>Binary</li>
    </ul>

    <p>Le mode ASCII est utilis&eacute; pour le transfert de fichiers texte, tandis
    que le mode binary l'est pour le transfert de programmes ou de donn&eacute;es
    similaires.
    L'utilisateur n'a pas besoin de choisir entre ces deux modes car, aujourd'hui,
    tous les clients FTP reconnaissent le type de fichier &agrave; transf&eacute;rer et
    choisissent le mode ad&eacute;quat.</p>

    <p>Puisque le transfert du nom d'utilisateur et du mot de passe pour
    l'authentification <u>n'est pas s&eacute;curis&eacute;</u>, il est tr&egrave;s important
    d'attirer l'attention sur ce risque potentiel pour la s&eacute;curit&eacute;. C'est pour
    cette raison qu'il y a eu beaucoup de r&eacute;flexion sur la s&eacute;curit&eacute; de FTP. En
    octobre 1997 a &eacute;t&eacute; publi&eacute;e la RFC 2228[2], qui d&eacute;finit des ajouts
    sp&eacute;cifiques au File Transfer Protocol.</p>

    <p></p>

    <A NAME="341lfindex1">&nbsp;</A>
<H2>vsftpd</H2>

    vsftpd est un serveur FTP pour les syst&egrave;mes d'exploitation de type UNIX et
    il fonctionne sur des plates-formes telles que Linux, *BSD, Solaris, HP-UX et IRIX.
    Il poss&egrave;de de nombreuses caract&eacute;ristiques qui manquent sur les autres serveurs FTP,
    comme:


    <ul class="noindent">
      <li>tr&egrave;s haut niveau de s&eacute;curit&eacute;</li>

      <li>limitation de la bande passante</li>

      <li>bonne ajustabilit&eacute;</li>

      <li>possibilit&eacute; de d&eacute;finir des utilisateurs virtuels</li>

      <li>support IPnG</li>

      <li>performance meilleure que la moyenne</li>

      <li>possibilit&eacute; d'attribuer des adresses IP virtuelles</li>

      <li>haute vitesse</li>
    </ul>

    <p>L'acronyme vsftpd signifie "Very Secure FTP Daemon", qui &eacute;tait le
    souci du d&eacute;veloppeur, Chris Evans. Depuis le d&eacute;but de la conception
    et du d&eacute;veloppement du serveur FTP, la haute s&eacute;curit&eacute; a &eacute;t&eacute; une de ses
    principales exigences.</p>

    <p>Par exemple, on peut citer le fait que vsftpd fonctionne en mode chroot.
    Cela signifie que le programme (ici vsftpd) s'ex&eacute;cute dans un nouveau r&eacute;pertoire
    racine (/) et ne peut donc pas acc&eacute;der aux autres programmes et fichiers en
    dehors de ce r&eacute;pertoire. Il est en quelque sorte «&nbsp;emprisonn&eacute;&nbsp;» dans cet environnement.
    Si un attaquant potentiel compromettait le serveur FTP, il serait isol&eacute; du reste
    du syst&egrave;me et limiterait les risques de d&eacute;g&acirc;ts. On trouve plus
    d'informations sur l'environnement chroot dans l'article [3].
    L'article [4] est &agrave; recommander &agrave; ceux qui s'int&eacute;ressent &agrave; la conception et
    aux m&eacute;canismes de s&eacute;curit&eacute; de vsftpd.</p>

    <p>Avec toutes ses capacit&eacute;s - parmi lesquelles le besoin de s&eacute;curit&eacute;
    est la plus haute priorit&eacute; - vsftpd se positionne nettement au dessus des autres
    serveurs FTP. WU-FTP[5] peut &ecirc;tre cit&eacute; comme exemple n&eacute;gatif, car il a pr&eacute;sent&eacute;
    de nombreuses failles de s&eacute;curit&eacute; ses derni&egrave;res ann&eacute;es.
</p>

    <p></p>

    <A NAME="341lfindex2">&nbsp;</A>
<H2>Installation</H2>

    L'installation du d&eacute;mon vsftpd est tr&egrave;s simple, puisque la
    plupart des grandes distributions proposent un paquet RPM pour l'installer.
    Il l'est d'ailleurs d&eacute;j&agrave; dans la plupart des cas. Sinon, il est possible
    de t&eacute;l&eacute;charger le code source ici [6] et l'installer manuellement.

    <p>Une fois le code source t&eacute;l&eacute;charg&eacute;, d&eacute;compressez le fichier tar,
    allez dans le r&eacute;pertoire, cr&eacute;ez et tapez la commande make. Voici un exemple
    des commandes n&eacute;cessaires:</p>

    <p class="code">neo5k@phobos&gt; tar xzvf
    vsftpd-x.x.x.tar.gz<br>
    neo5k@phobos&gt; cd vsftpd-x.x.x<br>
    neo5k@phobos&gt; make</p>
    Avant cela, il faut s'assurer que l'utilisateur «&nbsp;nobody&nbsp;» et que le
    r&eacute;pertoire «&nbsp;/usr/share/empty&nbsp;» existent et les cr&eacute;er si besoin. Pour
    pr&eacute;voir un acc&egrave;s aux utilisateurs anonymes, il faut cr&eacute;er un
    utilisateur «&nbsp;ftp&nbsp;», avec pour r&eacute;pertoire racine «&nbsp;/var/ftp&nbsp;». Cela se
    fait &agrave; l'aide des deux commandes suivantes:

    <p class="code">neo5k@phobos&gt; mkdir /var/ftp<br>
    neo5k@phobos&gt; useradd -d /var/ftp ftp</p>
    Pour des raisons de s&eacute;curit&eacute;, le r&eacute;pertoire «&nbsp;/var/ftp&nbsp;» ne
    doit pas appartenir &agrave; l'utilisateur «&nbsp;ftp&nbsp;» et il ne doit pas non
    plus avoir le droit d'&eacute;criture dedans. Lorsque l'utilisateur existe,
    on peut changer le propri&eacute;taire et les droits d'acc&egrave;s avec les deux
    commandes suivantes:

    <p class="code">neo5k@phobos&gt; chown root.root /var/ftp<br>
    neo5k@phobos&gt; chmod og-w /var/ftp</p>
    Lorsque les pr&eacute;-requis sont satisfaits, on peut installer le d&eacute;mon vsftpd:

    <p class="code">neo5k@phobos&gt; make install</p>
    Il faut normalement copier maintenant les pages de manuels et le
    programme au bon endroit. Dans le cas de probl&egrave;mes, on peut le faire
    &agrave; la main.

    <p class="code">neo5k@phobos&gt; cp vsftpd /usr/sbin/vsftpd<br>
    neo5k@phobos&gt; cp vsftpd.conf.5 /usr/share/man/man5<br>
    neo5k@phobos&gt; cp vsftpd.8 /usr/share/man/man8<br>
    </p>
    Le fichier de configuration d'exemple n'a pas encore &eacute;t&eacute; copi&eacute; &agrave; ce stade
    - il facilite l'introduction -  il faut encore taper:

    <p class="code">neo5k@phobos&gt; cp vsftpd.conf /etc</p>

    <A NAME="341lfindex3">&nbsp;</A>
<H2>Configuration</H2>

    Le fichier de configuration de vsftpd est
    «&nbsp;/etc/vsftpd.conf&nbsp;». Comme dans la plupart des fichiers de configuration,
    les lignes commen&ccedil;ant par un di&egrave;se sont des commentaires

    <p class="code"># Ligne de commentaire<br>
    </p>
    Une configuration d'exemple pourrait ressembler &agrave; &ccedil;a:

    <p class="code"><i># Autoriser le FTP anonyme?
    YES/NO</i><br>
    anonymous_enable=NO<br>
    &nbsp;<br>
    <i># Autoriser l'upload anonyme? YES/NO</i><br>
    anon_upload_enable=NO<br>
    &nbsp;<br>
    <i># Autoriser les utilisateur anonymes &agrave; cr&eacute;er des r&eacute;pertoires?
    YES/NO</i><br>
    anon_mkdir_write_enable=NO<br>
    &nbsp;<br>
    <i># Autoriser les autres op&eacute;rations d'&eacute;criture, comme renommer ou effacer,
    aux utilisateurs anonymes? YES/NO</i><br>
    anon_other_write_enable=NO<br>
    &nbsp;<br>
    <i># Autoriser les utilisateurs locaux &agrave; se connecter? YES/NO</i><br>
    local_enable=YES<br>
    &nbsp;<br>
    <i># Les utilisateurs locaux doivent-ils &ecirc;tre bloqu&eacute;s dans leur
    r&eacute;pertoires racine? YES/NO</i><br>
    chroot_local_user=YES<br>
    &nbsp;<br>
    <i># Taux de transfert maximum autoris&eacute; aux utilisateurs locaux en bytes/seconde.
    Par d&eacute;faut = 0 (illimit&eacute;)</i><br>
    local_max_rate=7200<br>
    &nbsp;<br>
    <i># Autoriser le droit d'&eacute;criture principal? YES/NO</i><br>
    write_enable=YES<br>
    &nbsp;<br>
    <i># Montrer le message lors du changement de r&eacute;pertoire?
    YES/NO</i><br>
    dirmessage_enable=YES<br>
    &nbsp;<br>
    <i># Banni&egrave;re de connexion.</i><br>
    ftpd_banner="Bienvenu sur le service FTP de neo5k."<br>
    &nbsp;<br>
    <i># Activer le fichier de log? YES/NO</i><br>
    xferlog_enable=YES<br>
    &nbsp;<br>
    <i># Collecter toutes les activit&eacute;s du serveur dans le fichier de log? YES/NO</i><br>
    <i># Attention! Cela g&eacute;n&egrave;re un gros volume de donn&eacute;es.</i><br>
    log_ftp_protocol=NO<br>
    &nbsp;<br>
    <i># Confirmer que les connexions se font seulement sur le port 20 (ftp-data).
    YES/NO</i><br>
    connect_from_port_20=YES<br>
    &nbsp;<br>
    <i># D&eacute;connexion en cas d'inactivit&eacute; (time out) apr&egrave;s (idle
    sessions)</i><br>
    idle_session_timeout=600<br>
    &nbsp;<br>
    <i># Dur&eacute;e, apr&egrave;s laquelle la connexion est interrompue.</i><br>
    data_connection_timeout=120<br>
    &nbsp;<br>
    <i># Acc&egrave;s g&eacute;r&eacute;s avec Pluggable Authentication Modules (PAM).</i><br>
    pam_service_name=vsftpd<br>
    &nbsp;<br>
    <i># Utilisation en ligne de commande? YES/NO - d&eacute;pendant de l'utilisation
    (inetd, xinetd, Standalone)</i><br>
    <i># Le serveur FTP de l'auteur est g&eacute;r&eacute; par xinetd, donc NO.</i><br>
    listen=NO<br>
    </p>

    <A NAME="341lfindex4">&nbsp;</A>
<H2>D&eacute;marrage du service FTP</H2>

    vsftpd peut &ecirc;tre utilis&eacute; de trois mani&egrave;res diff&eacute;rentes. Soit avec inetd
    ou xinetd, soit en mode autonome.

    <p></p>

    <A NAME="341lfindex5">&nbsp;</A>
<H3><i>inetd</i></H3>

    Si le service FTP est g&eacute;r&eacute; par inetd, il faut ouvrir le fichier de configuration
    "/etc/inetd.conf" avec un &eacute;diteur:

    <p class="code">neo5k@phobos&gt; vi /etc/inetd.conf<br>
    </p>
    Ensuite, chercher la ligne concernant le service FTP et supprimer le signe de
    commentaire en d&eacute;but de ligne. S'il n'y a pas d&eacute;j&agrave; une ligne, il suffit
    de l'ins&eacute;rer manuellement. Puis, red&eacute;marrer inetd. L'entr&eacute;e doit ressembler
    &agrave; &ccedil;a:

    <p class="code">#
ftp&nbsp;&nbsp;&nbsp;stream&nbsp;&nbsp;&nbsp;tcp&nbsp;&nbsp;&nbsp;nowait&nbsp;&nbsp;&nbsp;root&nbsp;&nbsp;&nbsp;/usr/sbin/tcpd&nbsp;&nbsp;&nbsp;in.ftpd<br>
ftp&nbsp;&nbsp;&nbsp;stream&nbsp;&nbsp;&nbsp;tcp&nbsp;&nbsp;&nbsp;nowait&nbsp;&nbsp;&nbsp;root&nbsp;&nbsp;&nbsp;/usr/sbin/tcpd&nbsp;&nbsp;&nbsp;vsftpd</p>

    <A NAME="341lfindex6">&nbsp;</A>
<H3><i>xinetd</i></H3>

    Il est recommand&eacute; de d&eacute;marrer le d&eacute;mon vsftpd avec xinetd, qui
    apporte beaucoup d'am&eacute;liorations par rapport &agrave; inetd.
    Quelques une d'entre elles sont, par exemple, l'enregistrement des requ&ecirc;tes, le
    contr&ocirc;le des acc&egrave;s, l'association du service &agrave; une interface r&eacute;seau
    particuli&egrave;re, etc... Une tr&egrave;s bonne introduction &agrave; xinetd se trouve
    l&agrave; [7]. Apr&egrave;s avoir modifi&eacute; le fichier, il est n&eacute;cessaire de
   red&eacute;marrer xinetd. La configuration peut ressembler &agrave; &ccedil;a:

    <p class="code"># vsftp daemon.<br>
    service ftp<br>
    {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;disable = no<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket_type = stream<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wait = no<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user = root<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server = /usr/sbin/vsftpd<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;per_source = 5<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instances = 200<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no_access = 192.168.1.3<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;banner_fail = /etc/vsftpd.busy_banner<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log_on_success += PID HOST DURATION<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log_on_failure += HOST<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nice = 10<br>
    }</p>

    <A NAME="341lfindex7">&nbsp;</A>
<H3><i>Utilisation autonome</i></H3>

    Il est &eacute;galement possible d'utiliser le d&eacute;mon vsftpd
    en mode autonome. Pour cela, il faut de nouveau &eacute;diter le
    fichier de configuration «&nbsp;/etc/vsftpd.conf&nbsp;» et de changer la ligne suivante:

    <p class="code"><i># Le d&eacute;mon vsftp doit-il tourner
    en mode Standalone? YES/NO</i><br>
    listen=YES</p>
    Ensuite, le d&eacute;mon est d&eacute;marr&eacute; de la mani&egrave;re suivante

    <p class="code">neo5k@phobos&gt; /usr/sbin/vsftpd &amp;</p>
    Si le chemin de recherche est correctement renseign&eacute;, cette commande suffit

    <p class="code">neo5k@phobos&gt; vsftpd &amp;</p>
    L'entr&eacute;e suivante permet de voir si le chemin de recherche
    est correctement initialis&eacute;:

    <p class="code">neo5k@phobos&gt; echo $PATH<br>
    /usr/sbin:/bin:/usr/bin:/sbin:/usr/X11R6/bin</p>
    Naturellement, en mode autonome, il faut faire attention que le
    d&eacute;mon vsftpd n'est d&eacute;marr&eacute; ni par inetd, ni par xinetd.

    <p></p>

    <A NAME="341lfindex8">&nbsp;</A>
<H2>Essai</H2>

    Apr&egrave;s avoir install&eacute; et configur&eacute; avec succ&egrave;s, nous pouvons nous
    connecter une premi&egrave;re fois &agrave; notre serveur FTP.
<pre class="code">neo5k@phobos&gt; ftp phobos
Connected to phobos
220 "Welcome to neo5k's FTP service."
Name (phobos:neo5k): testuser
331 Please specify the password.
Password:
230 Login successful
Remote system type is UNIX.
Using binary mode to transfer files.
ftp&gt; ls -l
229 Entering Extended Passive Mode
150 Here comes the directory listing
drwxr-xr-x      11  500      100         400  May 07 16:22  docs
drwxr-xr-x        9  500      100         464  Feb   01 23:05  hlds
drwxr-xr-x      39  500      100       4168  May 10 09:15  projects
226 Directory send OK.
ftp&gt;
</pre>

    <A NAME="341lfindex9">&nbsp;</A>
<H2>Conclusion</H2>

    Comme nous l'avons vu, le d&eacute;mon vsftpd n'est pas difficile &agrave;
    installer, ni &agrave; configurer. Malgr&eacute; tout, il offre de nombreuses
    possibilit&eacute;s de configuration et un tr&egrave;s bon niveau de s&eacute;curit&eacute;.

    <p>Il est &eacute;vident que cette introduction ne donne qu'un petit aper&ccedil;u
    des multiples possibilit&eacute;s de configuration offertes par vsftpd.
    Ceux d'entre vous qui veulent en apprendre plus sur vsftpd doivent se rendre
    sur la page du projet [6] et lire la volumineuse documentation.</p>

    <p></p>

    <A NAME="341lfindex10">&nbsp;</A>
<H2>Liens</H2>

    [1] <a href="ftp://ftp.rfc-editor.org/in-notes/rfc959.txt">ftp://ftp.rfc-editor.org/in-notes/rfc959.txt</a> [RFC
    959 - File Transfer Protocol]<br>
    [2] <a href="ftp://ftp.rfc-editor.org/in-notes/rfc2228.txt">ftp://ftp.rfc-editor.org/in-notes/rfc2228.txt</a> [RFC
    2228 - FTP Security Extensions]<br>
    [3] <a href="../../Francais/January2002/article225.shtml">article 225, Janvier 2002</a>
    [chroot]<br>
    [4] <a href="http://vsftpd.beasts.org/DESIGN">http://vsftpd.beasts.org/DESIGN</a>
    [M&eacute;canisme de s&eacute;curit&eacute; de vsftpd]<br>
    [5] <a href="http://www.wu-ftpd.org/">http://www.wu-ftpd.org/</a> [WU-FTPD]<br>
    [6] <a href="http://www.vsftpd.beasts.org/">http://www.vsftpd.beasts.org/</a> [Home of vsftpd]<br>
    [7] <a href="../../Francais/November2000/article175.shtml">article 175, Novembre 2000</a>
    [xinetd]

    <p><!-- vim: set sw=2 ts=2 et tw=74: -->
    </p>
  

<!-- BODY_OF_THE_ARTICLE_STOP -->
<!-- 2pdaIgnoreStart -->
<A NAME="talkback">&nbsp;</a>
<h2>Talkback form for this article</h2>
Every article has its own talkback page. On this page you can submit a comment or look at comments from other readers:
<center>
    <table width="250" border=0><tr><td>
    <div class="tbbutton"><A class="nodec" href="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=341">&nbsp;talkback page&nbsp;</a></div>
    </td></tr></table>
</center>

<br clear="all">
<HR size="2" noshade>
<table width="250" border=0><tr><td>
<div class="bbutton"><a class="nodec" href="../../index.shtml">&lt;--, LF Sommaire</a></div>
</td><td>
<div class="bbutton"><a class="nodec" href="index.shtml">Sommaire de ce num&eacute;ro</a></div>
</td></tr></table>
<br clear="all">
<HR size="2" noshade>
<!-- ARTICLE FOOT -->
<CENTER><TABLE WIDTH="98%" summary="footer">
<TR><TD ALIGN=CENTER BGCOLOR="#bdc6d5" WIDTH="50%">
<A HREF="../../common/lfteam.html">Site Web maintenu par l&acute;&eacute;quipe d&acute;&eacute;dition LinuxFocus</A>
<BR><FONT COLOR="#1111aa"><a href="../../common/copy.html">&copy; Mario M. Knopf</a><br>&quot;some rights reserved&quot; see <a href="../../license/index.shtml">linuxfocus.org/license/</a><br><a href="http://www.linuxfocus.org">http://www.LinuxFocus.org</a></FONT>
</TD>
<TD BGCOLOR="#bdc6d5">
<!-- TRANSLATION INFO -->
<font size=2>Translation information:</font>
<TABLE summary="translators">
  <tr><td><font size="2">de --&gt; -- : Mario M. Knopf <small>&lt;netzmeister/at/neo5k/dot/org&gt;</small></font></td></tr>
  <tr><td><font size="2">de --&gt; fr: Marc Remy &lt;mremy(at)gmx(punkt)ch&gt;</font></td></tr>
</TABLE>
</TD>
</TR></TABLE></CENTER>
<p><font size=1>2005-01-21, generated by lfparser version 2.52</font></p>
<!-- 2pdaIgnoreStop -->
</BODY>
</HTML>
