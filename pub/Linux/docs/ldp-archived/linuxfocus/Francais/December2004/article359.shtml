<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
 <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
 <META NAME="GENERATOR" CONTENT="lfparser_2.52">
 <META NAME="LFCATEGORY" CONTENT="Hardware">
 <link rel="icon" href="../../common/images/lf-16.png" type="image/png">
 <TITLE>lf359, Hardware: Fn-F12: Geler un laptop Thinkpad T20 d'IBM</TITLE>
<style type="text/css">
<!--
 td.top {font-family: Arial,Geneva,Verdana,Helvetica,sans-serif; font-size:12 }
 pre { font-family:monospace,Courier }
 pre.code { font-family:monospace,Courier;background-color:#aedbe8; }
 p.cl { color:#EE9500 }
 table.left { margin-right:0.3cm }
 a.nodec { text-decoration:none }
 p.trans { font-size:8pt; text-align:right }
 p.clbox { width:50%; alignment:center; background-color:#FFD700; 
           border-style:none; border-width:medium; border-color:#FFD700; 
           padding:0.5cm;  text-align:center }
 p.code { width:80%; alignment:center; background-color:#aedbe8; 
          border-style:none; border-width:medium; border-color:#aedbe8; 
          padding:0.1cm;  text-align:left }
 p.foot { background-color:#AAAAAA; color:#FFFFFF; border-style:none; 
          border-width:medium; border-color:#AAAAAA; padding:0.5cm ; 
          margin-top:0.1cm; margin-right:1cm; margin-left:1cm; 
          text-align:center }
 div.tbbutton {
   background: #ddd;
   border-right: 1px solid #aaa;
   border-bottom: 1px solid #aaa;
   margin: 2px 5px 2px 5px;
   text-align: center;
   width: 20em;
   line-height: 1.2em;
   padding: 2px;
   font-size: 12px;
   white-space: nowrap;
   color: #555;
 }
 div.bbutton {
   background: #ddd;
   border-right: 1px solid #aaa;
   border-bottom: 1px solid #aaa;
   float: left;
   margin: 2px 5px 2px 5px;
   text-align: center;
   line-height: 1.2em;
   padding: 2px;
   font-size: 12px;
   white-space: nowrap;
   color: #555;
 }
-->
</style>
 
</HEAD>
<BODY bgcolor="#ffffff" text="#000000">
 <!-- this is generated html code. NEVER use this file for your
 translation work. Instead get the file with the same article number
 and .meta.shtml in its name. Translate this meta file and then
 use lfparser program to generate the final article -->
 <!-- lfparser can be obtained from http://main.linuxfocus.org/~guido/dev/lfparser.html -->

<!-- this is used by a number of tools:
 =LF=AUTHOR: Jan Alonzo
 =LF=CAT___: Hardware
 =LF=TITLE_: Fn-F12: Geler un laptop Thinkpad T20 d'IBM
 =LF=NUMBER: 359
 =LF=ANAME_: article359.shtml
 =LF=PARSER: 2.52
 -->

<!-- 2pdaIgnoreStart -->

<!-- start navegation bar, current, style=2 -->
 <!-- top navegation bar -->
 <TABLE summary="topbar_1" cellspacing="0" cellpadding="0" border="0" align="center" width="90%">
   <TR bgcolor="#2e2292">
     <TD class="top"><TABLE summary="topbar_1_logo" cellspacing="0" cellpadding="0" border="0" width=
       "100%">
         <TR><TD width="319"><a href="../../index.shtml"><IMG src="../../common/images/logolftop_319x45.gif"
           alt="[LinuxFocus-icon]" width="319" height="45" align="left" 
           border="0"></a></TD>

           <TD class="top">
             <TABLE summary="topbar_1_links" width="100%">
               <TR align="right">
                 <TD class="top">
                 
                 <A class="nodec" href="../../index.shtml"><FONT color=
                 "#DDDDDD" size="2">&lt;--</FONT></A> &nbsp;| 
                 <A class="nodec" href="../map.html"><FONT color=
                 "#DDDDDD" size="2">Carte</FONT></A> &nbsp;| 
                 <A class="nodec" href="../indice.html"><FONT color=
                 "#DDDDDD" size="2">Index</FONT></A> &nbsp;| 
                 <A class="nodec" href="../Search/index.html"><FONT color=
                 "#DDDDDD" size="2">Recherche</FONT></A> </TD>
                 
               </TR>

               <TR align="right">
                 <TD class="top">
                   <HR width="100%" noshade size="1">
                 </TD>
               </TR>
             </TABLE>
           </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end top navegation bar -->
 <!-- blue bar -->
 <TABLE summary="topbar_2" cellspacing="0" cellpadding="0" border="0" align="center"
 width="90%">
   <TR bgcolor="#00ffff">
     <TD><IMG src="../../common/images/transpix.gif" width="1" height=
     "2" alt=""></TD>
   </TR>
 </TABLE>
 <!-- end blue bar -->
 <!-- bottom navegation bar -->
 <TABLE summary="topbar_3" cellspacing="0" cellpadding="0" border="0" align="center"
 width="94%">
   <TR bgcolor="#000000">
     <TD>
       <TABLE summary="topbar_3_links" cellspacing="0" cellpadding="1" border="0" width=
       "100%">
         <TR align="center">
           <TD WIDTH="20%"><A class="nodec" href="../News/index.shtml"><FONT color=
           "#FFFFFF">Nouvelles</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Archives/index.html"><FONT color=
           "#FFFFFF">Archives</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Links/index.html"><FONT color=
           "#FFFFFF">Liens</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../aboutus.html"><FONT color=
           "#FFFFFF">A propos</FONT></A> </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end bottom navegation bar -->
<!-- stop navegation bar -->

<!-- SSI_INFO -->

<!-- tr_staticssi include virtual -->
<!-- tr_staticssi exec cmd -->
<!-- addedByLfdynahead ver 1.5 --><TABLE ALIGN="right" border=0><TR><TD ALIGN="right"><FONT SIZE="-1" FACE="Arial,Helvetica">Ce document est disponible en: <A href="../../English/December2004/article359.shtml">English</a> &nbsp;<A href="../../ChineseGB/December2004/article359.shtml">ChineseGB</a> &nbsp;<A href="../../Deutsch/December2004/article359.shtml">Deutsch</a> &nbsp;<A href="../../Francais/December2004/article359.shtml">Francais</a> &nbsp;<A href="../../Polish/December2004/article359.shtml">Polish</a> &nbsp;</FONT></TD></TR></TABLE><br>
 


<!-- SSI_INFO STOP -->
<!-- 2pdaIgnoreStop -->

<!-- SHORT_BIO_ABOUT_THE_AUTHOR_AND_INDEX_START -->
<TABLE ALIGN="LEFT" BORDER="0" WIDTH="195" summary="about the author" class="left">
<TR>
<TD>

<img src="../../common/images2/JanAlonzo.jpg" alt="[Photo of the Author]"
    width="150" height="155">
<BR>par  Jan Alonzo <a href="http://www.unpluggable.com/"><font size="1">(homepage)</font></a>
<BR><BR>
<I>L&acute;auteur:</I><BR>
<!-- aboutauthor_start -->
<p>Jan fait tourner Debian Linux sur son IBM T20</p>
<!-- aboutauthor_stop -->
<!-- TRANSLATED_TO fr -->
<BR><BR><I>Traduit en Français par:</I><BR>
Jean-Etienne Poirrier (<a href="http://www.poirrier.be"><font size="1">homepage</font></a>)
<br>
<!--
 =LF=TRANSTO=fr: Jean-Etienne Poirrier
-->
<!-- TRANSLATED_TO_STOP -->
<!-- INDEX_START -->
<BR><i>Sommaire</i>:
<UL>
  <LI><A HREF="#359lfindex0">Pr&eacute;requis logiciels</A></LI>
  <LI><A HREF="#359lfindex1">Cr&eacute;er la partition DOS</A></LI>
  <LI><A HREF="#359lfindex2">Formater la partition</A></LI>
  <LI><A HREF="#359lfindex3">Cr&eacute;er les fichiers d'hibernation</A></LI>
  <LI><A HREF="#359lfindex4">Son</A></LI>
  <LI><A HREF="#359lfindex5">Tests</A></LI>
  <LI><A HREF="#359lfindex6">D&eacute;pannage</A></LI>
  <LI><A HREF="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=359">Talkback form for this article</A></LI>
</UL>

</TD></TR></TABLE>
<!-- INDEX_STOP -->
<!-- SHORT_BIO_ABOUT_THE_AUTHOR_AND_INDEX_STOP -->
<!-- HEAD_OF_THE_ARTICLE_START -->
<br>&nbsp;
<table border="0"><tr><td>
<!-- tr_staticssi include virtual -->
<!-- tr_staticssi exec cmd -->
<!-- addedByLfPdf ver 0.1 -->
<TABLE style="border-style:outset; border-width:1px" align="right" bgcolor="#ff9616" cellspacing="1"><TR><TD bgcolor="#ff9616">
        <a href="../Archives/lf-2004_12-0359.pdf"><small>PDF</small></a>
        </TD></TR></TABLE>
         

<H2>Fn-F12: Geler un laptop Thinkpad T20 d'IBM</H2>
 <img src="../../common/images2/article359/t20.jpg" alt="t20" hspace="10"
    width="200" height="111">
<!-- ABSTRACT OF THE ARTICLE -->
<P><i>R&eacute;sum&eacute;</i>:
<P>
<!-- articleabstract_start -->

    Cet article explique comment faire fonctionner l'hibernation
    (suspend-to-disk) sur un IBM Thinkpad T20 sans MS-Windows install&eacute;. La
    solution pr&eacute;sent&eacute;e ici pourrait aussi fonctionner sur d'autres Thinkpads
    avec un BIOS Phoenix mais je ne l'ai test&eacute;e qu'avec un T20.

    
<!-- articleabstract_stop -->

<br><!-- HR divider --><center><font color="#8282e0"><b>_________________ _________________ _________________</b></font></center><br>
</td></tr></table>
<!-- HEAD_OF_THE_ARTICLE_STOP -->
<!-- BODY_OF_THE_ARTICLE_START -->


    <A NAME="359lfindex0">&nbsp;</A>
<H2>Pr&eacute;requis logiciels</H2>


    <p>Vous devez avoir les programmes suivants install&eacute;s pour que
    l'hibernation fonctionne :</p>

<table>
   <tr>
      <td>
	    <ul>
	       <li>fdisk ou cfdisk pour partitionner votre disque dur.</li>
		  <li>dosfstools pour cr&eacute;er le syst&egrave;me de fichiers FAT16.</li>
		  <li><a href="http://samba.org/ftp/unpacked/junkcode/tphdisk.c">
		  tphdisk.c (de samba.org)</a> pour cr&eacute;er le fichier
		  <em>hibernate</em> (copie locale : <a
		href="../../common/src2/article359/tphdisk.tar.gz">
		  tphdisk.tar.gz</a>)</li>
	    </ul>
      </td>
   </tr>
</table>

    <p>D'habitude, fdisk est fourni avec votre installation Linux par d&eacute;faut.
    cfdisk est fourni habituellement avec l'installation par d&eacute;faut de <a
  href="http://www.debian.org">Debian</a>. tphdisk a &eacute;t&eacute; &eacute;crit par Andrew
  Tridgell pour son Thinkpad T20.</p>

    <A NAME="359lfindex1">&nbsp;</A>
<H2>Cr&eacute;er la partition DOS</H2>


    <p>Tout d'abord, vous devez &ecirc;tre s&ucirc;r que vous avez un bloc
    <em>PRIMAIRE</em> libre dans votre p&eacute;riph&eacute;rique. Cela est important
    puisque les Thinkpads hibernent seulement sur les partitions PRIMAIRES,
    pas sur les partitions &eacute;tendues. S'il y en a, on peut le faire.</p>

    <p>La r&egrave;gle empirique est : « taille de la RAM + taille de la RAM de
    l'adaptateur graphique + quelques Mo extra pour la s&eacute;curit&eacute; ». Si vous
    envisagez de mettre &agrave; jour votre RAM bient&ocirc;t, assurez-vous de prendre en
    consid&eacute;ration la taille votre RAM future ou vous auriez &agrave; recr&eacute;er de
    nouveau les partitions.</p>

    <p>Une fois que vous avez cr&eacute;&eacute; la partition, d&eacute;finissez son type comme
    « Hidden Win95 (FAT16) LBA ». Le code de partition est le « 1E ».</p>
<pre class="code">
RAM :     128 MB
VGA RAM :   8 MB

Partition d'hibernation : 150 MB (pour la s&eacute;curit&eacute;)
</pre>

    <p>C'est &agrave; vous de d&eacute;cider combien de Mo en extra vous voulez placer dans
    la partition. Si vous avez des probl&egrave;mes, r&eacute;f&eacute;rez-vous &agrave; la section
    <strong>D&eacute;pannage</strong>.</p>

    <p>Maintenant, relancez votre portable.</p>

    <A NAME="359lfindex2">&nbsp;</A>
<H2>Formater la partition</H2>


    <p>mkdosfs fait partie du paquet dosfstools.</p>

<pre class="code">
Comme root:

$ mkdosfs /dev/hdaX
</pre>

    <p>... o&ugrave; hdaX est la partition que vous venez juste de cr&eacute;er ci-dessus
    (section <em>Cr&eacute;er la partition DOS</em>).</p>

    <p>Maintenant, montez la partition:</p>

<pre class="code">
$ mount /dev/hdaX /mnt/hibernate
</pre>

    <A NAME="359lfindex3">&nbsp;</A>
<H2>Cr&eacute;er les fichiers d'hibernation</H2>


    <ol>
       <li>T&eacute;l&eacute;chargez tphdisk &agrave;
	  <a href="http://samba.org/ftp/unpacked/junkcode/tphdisk.c">
	  http://samba.org/ftp/unpacked/junkcode/tphdisk.c</a> ou la copie
	  locale : <a href="../../common/src2/article359/tphdisk.tar.gz">
	  tphdisk.tar.gz</a></li>
	  <li>Compilez tphdisk.</li>
	  <li>Cr&eacute;ez le fichier « save2dsk.bin ». <strong>save2dsk.bin</strong> est
	  le nom du fichier d'hibernation. Non, ce n'est pas un nom de fichier
	  optionnel.</li>
    </ol>

<pre class="code">
$ gcc -o tphdisk tphdisk.c
$ ./tphdisk N &gt; /mnt/hibernate/save2dsk.bin
</pre>

    <p>... o&ugrave; :</p>

    <p><strong>N</strong> = taille du fichier. Voir la r&egrave;gle intuitive
    ci-dessus.</p>

    <p>Relancez votre laptop.</p>

    <A NAME="359lfindex4">&nbsp;</A>
<H2>Son</H2>


    <p>C'est un probl&egrave;me connu que le pilote pour la carte son cs46xx du T20
    ne r&eacute;-initialise pas les registres mat&eacute;riel apr&egrave;s une op&eacute;ration de
    suspension ou d'hibernation. En d'autres mots, Linux sera compl&egrave;tement
    op&eacute;rationel mais nous n'entendrez aucun son apr&egrave;s une suspension vers la
    RAM ou une suspension vers le disque. Un palliatif est de lancer
    manuellement « /etc/init.d/alsasound restart » si le son vous pr&eacute;occupe.<br>
    Voyez aussi <a
  href="http://panopticon.csustan.edu/thood/tp600lnx.htm#secsnd">
  http://panopticon.csustan.edu/thood/tp600lnx.htm#secsnd</a> pour plus de
  suggestions sur la mani&egrave;re de r&eacute;soudre ce « probl&egrave;me de son silencieux ».</p>

    <A NAME="359lfindex5">&nbsp;</A>
<H2>Tests</H2>


    <ul>
       <li>Appuyez sur <strong>Fn-F12</strong>.</li>
    </ul>

    <p>Votre &eacute;cran devrait devenir blanc et, apr&egrave;s quelques secondes,
    l'utilitaire d'hibernation du BIOS Phoenix devrait se montrer et commencer
    &agrave; placer le contenu de votre RAM dans votre fichier d'hibernation
    nouvellement cr&eacute;&eacute; :<br></p>

    <center>
       <img src="../../common/images2/article359/t20-hibernate.jpg"
	  alt="Phoenix BIOS hibernate" width="320" height="299">
    </center>
    <br><br>

    <A NAME="359lfindex6">&nbsp;</A>
<H2>D&eacute;pannage</H2>


    <ol>
       <li>Lorsque vous cr&eacute;ez le fichier d'hibernation, je re&ccedil;ois une erreur
	  qui dit « Write Failed »!</li>
    </ol>

    <ul>
       <li>Assurez-vous que vous avez mis assez d'espace dans votre partition.
	  Essayez de la faire plus grande et voyez si &ccedil;&agrave; fonctionne.</li>
	  <li>Votre thinkpad devrait utiliser le BIOS Phoenix.</li>
    </ul>

    <ol start="2">
       <li>Lorsque j'essaie d'hiberner, le syst&egrave;me ne fait que se planter
	  !</li>
    </ol>

    <ul>
       <li>Soyez s&ucirc;r que votre partition d'hibernation est mont&eacute;e</li>
	  <li>Vous avez fait une erreur ! Revenez en arri&egrave;re et assurez-vous que
	  tout est correct.</li>
    </ul>

    <ol start="3">
       <li>« System is invalid »!</li>
    </ol>

    <ul>
       <li>Vous avez format&eacute; la partition avec le mauvais syst&egrave;me de fichier.
	  (Voyez <em>Cr&eacute;er la partition DOS</em> ci-dessus)</li>
	  <li>La partition est une partition &eacute;tendue (logique). Je vous ai dit
	  qu'elle devait &ecirc;tre PRIMAIRE.</li>
    </ul>
  



<!-- BODY_OF_THE_ARTICLE_STOP -->
<!-- 2pdaIgnoreStart -->
<A NAME="talkback">&nbsp;</a>
<h2>Talkback form for this article</h2>
Every article has its own talkback page. On this page you can submit a comment or look at comments from other readers:
<center>
    <table width="250" border=0><tr><td>
    <div class="tbbutton"><A class="nodec" href="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=359">&nbsp;talkback page&nbsp;</a></div>
    </td></tr></table>
</center>

<br clear="all">
<HR size="2" noshade>
<table width="250" border=0><tr><td>
<div class="bbutton"><a class="nodec" href="../../index.shtml">&lt;--, LF Sommaire</a></div>
</td><td>
<div class="bbutton"><a class="nodec" href="index.shtml">Sommaire de ce num&eacute;ro</a></div>
</td></tr></table>
<br clear="all">
<HR size="2" noshade>
<!-- ARTICLE FOOT -->
<CENTER><TABLE WIDTH="98%" summary="footer">
<TR><TD ALIGN=CENTER BGCOLOR="#bdc6d5" WIDTH="50%">
<A HREF="../../common/lfteam.html">Site Web maintenu par l&acute;&eacute;quipe d&acute;&eacute;dition LinuxFocus</A>
<BR><FONT COLOR="#1111aa"><a href="../../common/copy.html">&copy; Jan Alonzo</a><br>&quot;some rights reserved&quot; see <a href="../../license/index.shtml">linuxfocus.org/license/</a><br><a href="http://www.linuxfocus.org">http://www.LinuxFocus.org</a></FONT>
</TD>
<TD BGCOLOR="#bdc6d5">
<!-- TRANSLATION INFO -->
<font size=2>Translation information:</font>
<TABLE summary="translators">
  <tr><td><font size="2">en --&gt; -- : Jan Alonzo (<a href="http://www.unpluggable.com/"><font size="1">homepage</font></a>)</font></td></tr>
  <tr><td><font size="2">en --&gt; fr: Jean-Etienne Poirrier (<a href="http://www.poirrier.be"><font size="1">homepage</font></a>)</font></td></tr>
</TABLE>
</TD>
</TR></TABLE></CENTER>
<p><font size=1>2005-02-08, generated by lfparser version 2.52</font></p>
<!-- 2pdaIgnoreStop -->
</BODY>
</HTML>
