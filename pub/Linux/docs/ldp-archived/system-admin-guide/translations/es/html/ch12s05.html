<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>
Copias de seguridad de múltiples niveles</title><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="index.html" title="Guía Para Administradores de Sistemas GNU/Linux"><link rel="up" href="ch12.html" title="Capítulo 12. Copias de seguridad (Backups)"><link rel="prev" href="ch12s04.html" title="
Copias de respaldo simples"><link rel="next" href="ch12s06.html" title="
Que copiar"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">
Copias de seguridad de múltiples niveles</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch12s04.html">Anterior</a> </td><th width="60%" align="center">Capítulo 12. Copias de seguridad (Backups)</th><td width="20%" align="right"> <a accesskey="n" href="ch12s06.html">Siguiente</a></td></tr></table><hr></div><div class="sect1" lang="es"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2559933"></a>
Copias de seguridad de múltiples niveles</h2></div></div></div><p>

Las copias de respaldo simples que están explicadas en las secciones previas son 
frecuentemente adecuadas para uso personal o de pequeñas corporaciones. Para
tareas mas complejas puede ser apropiado el uso de copias de seguridad
de múltiples niveles.</p><p>

El método simple tiene dos niveles de copias: total e incremental. Es
posible generalizar este método para cualquier número de niveles. Una copia completa
sería el nivel 0, y los niveles diferentes de copias incrementales 1, 2, 
3, etc. Por cada nivel de copia incremental se copia todo lo que haya sido 
modificado desde la copia previa del mismo nivel o de uno menor.</p><p>

El propósito de este procedimiento es mantener un <em class="glossterm">histórico de copias (backup history)</em>
amplio de manera económica.
En el ejemplo de la sección previa, el histórico del backup
se remonta a la copia de respaldo completa previa (una semana).
Si agrega mas cintas este tiempo puede ser extendido, aunque 
el costo (monetario) es bastante alto, y solo puede ampliar 
el histórico en una semana por cada cinta nueva.
Aún así, un histórico mas amplio es
muy útil, ya que los archivos que se dañan o son borrados pueden pasar desapercibidos
por un largo período de tiempo.
Por lo que recuperar al menos una versión no muy 
actual de un archivo es mejor que nada.</p><p>


El histórico de copias de seguridad multiniveles puede ser extendido de una 
forma más económica.
Por ejemplo, en caso de que contemos con 10 cintas disponibles, podemos 
utilizar las cintas 1 y 2 para las copias mensuales (primer Viernes de cada mes), 
las cintas 3 a 6 para las copias semanales (otros Viernes del mes; note que 
utilizamos 4 cintas debido a que pueden existir cinco Viernes en un mes),
y las cintas 7 a 10 para las copias diarias (Lunes a Jueves). Con solo 
cuatro cintas más que el caso anterior, estamos en condiciones de extender 
de dos semanas a dos meses el histórico de los backups.
Es cierto que no podemos recuperar todas las 
versiones de cada archivo durante esos dos meses, pero 
que sea posible recuperarlo es normalmente suficiente.</p><p>La <a href="ch12s05.html#backup-history-timeline" title="Figura 12.1. A sample multilevel backup schedule.">Figura 12.1, &#8220;A sample multilevel backup schedule.&#8221;</a>

muestra el nivel de backup que es utilizado cada día, 
y desde cuales copias se pueden recuperar archivos.</p><div class="figure-float"><div class="figure"><a name="backup-history-timeline"></a><p class="title"><b>Figura 12.1. A sample multilevel backup schedule.</b></p><div><img src="backup-timeline.png" alt="A sample multilevel backup schedule."></div></div></div><p>

Los niveles de backups pueden también ser utilizados para minimizar el tiempo de
restauración de los sistemas de archivos.
En caso de que existan muchas copias incrementales con números de niveles
de crecimiento muy grande, es muy probable que necesite recuperar de todas 
ellas para reconstruir el sistema de archivos entero.
Sin embargo, puede utilizar números de niveles que no sean monótonos, y mantener
bajo el número de copias que debe utilizar en cada restauración.</p><p>

Para minimizar el número de cintas necesarias en cada recuperación, puede utilizar un 
un número de nivel mas chico por cada cinta incremental.
Sin embargo, el tiempo necesario para realizar las copias crece (en cada backup se debe
copiar todo lo que ha sido modificado desde la última copia total).
Existe un mejor esquema sugerido por
la página de manual de <span><strong class="command">dump</strong></span>, el cual es presentado en la tabla
(niveles-de-copias-de-respaldo-eficientes). Utilizar la siguiente sucesión de 
niveles de copias de seguridad: 3, 2, 5, 4, 7, 6, 9, 8, 9, etc. Este esquema mantiene
bajo los tiempos de copia y de recuperación, y note que lo máximo que se copia son 
dos días.
El número de cintas a ser restauradas depende del intervalo entre las copias completas,
pero ciertamente será menor que el de los esquemas mas simples.</p><div class="table"><a name="efficient-backup-levels"></a><p class="title"><b>Tabla 12.1. Efficient backup scheme using many backup levels</b></p><table summary="Efficient backup scheme using many backup levels" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Tape</th><th>Level</th><th>Backup 
(days)</th><th>Restore 
tapes</th></tr></thead><tbody><tr><td>1</td><td>0</td><td>n/a</td><td>1</td></tr><tr><td>2</td><td>3</td><td>1</td><td>1, 
2</td></tr><tr><td>3</td><td>2</td><td>2</td><td>1, 
3</td></tr><tr><td>4</td><td>5</td><td>1</td><td>1, 2, 
4</td></tr><tr><td>5</td><td>4</td><td>2</td><td>1, 2, 
5</td></tr><tr><td>6</td><td>7</td><td>1</td><td>1, 2, 
5, 6</td></tr><tr><td>7</td><td>6</td><td>2</td><td>1, 2, 
5, 7</td></tr><tr><td>8</td><td>9</td><td>1</td><td>1, 2, 
5, 7, 8</td></tr><tr><td>9</td><td>8</td><td>2</td><td>1, 2, 
5, 7, 9</td></tr><tr><td>10</td><td>9</td><td>1</td><td>1, 2, 
5, 7, 9, 10</td></tr><tr><td>11</td><td>9</td><td>1</td><td>1, 2, 
5, 7, 9, 10, 
11</td></tr><tr><td>...</td><td>9</td><td>1</td><td>1, 
2, 5, 7, 9, 10, 11, 
...</td></tr></tbody></table></div><p>

Un esquema elegante puede reducir la cantidad de trabajo necesaria, pero esto 
no significa que existan menos cosas a seguir. Usted decide si vale o no la pena.</p><p> <span><strong class="command">dump</strong></span>
tiene soporte para copias multiniveles, pero para <span><strong class="command">tar</strong></span> y <span><strong class="command">cpio</strong></span>
debe ser implementado con scripts del shell.</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch12s04.html">Anterior</a> </td><td width="20%" align="center"><a accesskey="u" href="ch12.html">Subir</a></td><td width="40%" align="right"> <a accesskey="n" href="ch12s06.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">
Copias de respaldo simples </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> 
Que copiar</td></tr></table></div></body></html>
