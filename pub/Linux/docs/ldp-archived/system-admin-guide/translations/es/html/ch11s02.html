<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Crear una cuenta de usuario</title><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="index.html" title="Guía Para Administradores de Sistemas GNU/Linux"><link rel="up" href="ch11.html" title="Capítulo 11. Administrando cuentas de usuario"><link rel="prev" href="ch11.html" title="Capítulo 11. Administrando cuentas de usuario"><link rel="next" href="ch11s03.html" title="Cambiar las propiedades del usuario"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Crear una cuenta de usuario</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch11.html">Anterior</a> </td><th width="60%" align="center">Capítulo 11. Administrando cuentas de usuario</th><td width="20%" align="right"> <a accesskey="n" href="ch11s03.html">Siguiente</a></td></tr></table><hr></div><div class="sect1" lang="es"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2557008"></a>Crear una cuenta de usuario</h2></div></div></div><p>El núcleo de Linux en sí trata a los usuario como meros números. Cada
usuario es identificado por un único numero entero, el  <em class="glossterm">uid
(identificación de usuario)</em> esto debido a que un numero es mas fácil
y rápido de procesarlo que un nombre para un sistema. Una base de datos o tabla
asociada a dichos UIds y GIds, por fuera del núcleo asigna un nombre textual, un
único <em class="glossterm">nombre de usuario</em> para cada id. La base de datos
que también contiene información adicional. </p><p>Para crear un usuario, necesita agregar información sobre el usuario a la
base de datos (ver arriba) y crear un directorio "inicio" (directorio principal
del usuario) para él. También puede ser necesario educar al usuario, y
configurar un ambiente conveniente para él.</p><p>La mayoría de las distribuciones de Linux cuentan con programas para crear
cuentas. Existen muchos de estos programas disponibles 

	<sup>[<a name="id2557057" href="#ftn.id2557057">32</a>]</sup>. Contamos con dos
comandos alternativos que son  <span><strong class="command">adduser</strong></span> y
<span><strong class="command">useradd</strong></span>, así también como con herramientas gráficas
	<sup>[<a name="id2557081" href="#ftn.id2557081">33</a>]</sup>. Cualquiera sea 
el programa, resulta muy poco el trabajo manual por hacer. Aun
cuando los detalles son muchos e intrincados, estos programas hace parecer todo
trivial. Como sea, en la sección <a href="ch11s02.html#manual-adduser" title="Crear un usuario a mano">&#8220;Crear un usuario a mano&#8221;</a> se describe
cómo hacerlo a mano.</p><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="id2557103"></a><code class="filename">/etc/passwd</code> y otros archivos informativos/de
información <code class="filename">/etc/shadow</code></h3></div></div></div><p>La base de datos básica de usuarios en un sistema Unix es un archivo de
texto  <code class="filename">/etc/passwd</code> (llamado el <em class="glossterm">archivo de
contraseñas</em>), que lista todos los nombres de usuarios validos y su
información asociada. El archivo tiene una línea por usuario, y es dividido en
siete colon-delimited campos.


	</p><div class="itemizedlist"><ul type="disc"><li><p>nombre de usuario</p></li><li><p>contraseña, de modo encriptado</p></li><li><p>Identificación (Id) de numero de
	usuario</p></li><li><p>Identificación (Id) de numero
	de grupo</p></li><li><p>Nombre completo u otra
	información descriptiva de la cuenta</p></li><li><p>Directorio Inicio (directorio principal del
	usuario)</p></li><li><p>Interprete de comandos
	(programa a ejecutar al ingresar al sistema)</p></li></ul></div><p>

El formato esta explicado con mas detalles en la pagina de manual del comando
<code class="filename">passwd</code>.</p><p>Cualquier usuario del sistema puede leer el archivo de contraseñas, para
por ejemplo conocer el nombre de otro usuario del mismo. Esto significa que la
contraseña (el segundo campo) esta también disponible para todos. El archivo de
contraseñas encripta las contraseñas, así que en teoría no hay problema, pero
dicho encriptado puede ser quebrado, sobre todo si dicha contraseña es
"débil"

	<sup>[<a name="id2557205" href="#ftn.id2557205">34</a>]</sup>.  Por lo tanto no es buena idea tener las contraseñas en el archivo
de contraseñas.</p><p>Muchos sistemas GNU/Linux tienen contraseñas
<em class="glossterm">"sombra"</em>.Esto es una  alternativa en la manera de
almacenar las contraseñas: las claves encriptadas se guardan en un archivo
separado <code class="filename">/etc/shadow</code> que solo puede ser leído por el
administrador del sistema. Así el archivo <code class="filename">/etc/passwd</code> solo
contiene un marcador especial en ese segundo campo. Cualquier programa que
necesite verificar un usuario o uid, pueden también acceder al archivo
shadow/sombra.  Significa también que programas normales que solo usan otros
campos del archivo de contraseñas, no pueden acceder a las contraseñas.
Paralelamente también existe <code class="filename">/etc/gshadow</code> para cierta
información según grupos	<sup>[<a name="id2557268" href="#ftn.id2557268">35</a>]</sup>

	</p></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="id2557283"></a> Elegir números de identificación de usuario y grupo</h3></div></div></div><p>En la mayoría de los sistemas, no importa cuales son los números de
usuario y grupo, pero si usa un sistema de archivos de red 
	<sup>[<a name="id2557297" href="#ftn.id2557297">36</a>]</sup>, necesitará que
sean los mismo números de identificación de usuario (uid) y grupo (gid) en todos
los sistemas. Esto es porque el sistema de archivos de red también identifica al
usuarios (nombre de usuario) con su ++respectivo++ numero de identificación de
usuario (uid). </p><p>Si esta usando un sistema de archivos de red NFS
<sup>[<a name="id2557315" href="#ftn.id2557315">37</a>]</sup>, tiene que inventar un mecanismo para sincronizar la información de cada
cuenta. Una alternativa es el sistema NIS
	<sup>[<a name="id2557324" href="#ftn.id2557324">38</a>]</sup>(ver Guía de Administración de
Redes con Linux, Capítulo 13)</p><p>Como sea, trate de evitar re-usar
números de identificación de usuario (UIds) y nombres de usuario exactamente
iguales entre si entre sistemas, porque el nuevo dueño de ese numero de
identificación de usuario o nombre de usuario puede tener (o tendrá seguro?)
acceso a los archivos o correos-e del anterior dueño.</p></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="id2557347"></a>Ambiente inicial: <code class="filename">/etc/skel</code>
	<sup>[<a name="id2557358" href="#ftn.id2557358">39</a>]</sup></h3></div></div></div><p>Cuando el directorio Inicio para un nuevo usuario es creado es
inicializado por medio del directorio <code class="filename">/etc/skel</code>. El
administrado del sistema puede crear archivos dentro de
<code class="filename">/etc/skel</code> que proveerán un amable entorno predeterminado
para los usuarios. Por ejemplo, el puede crear un
<code class="filename">/etc/skel/.profile</code> que configura  las variable de entorno
de algún editor mas amigable para los usuarios nuevos.</p><p>Como sea, usualmente lo mejor es conservar dicho directorio lo mas pequeño
que sea posible, ya que en el futuro será imposible actualizar los archivos de
los usuarios. Por ejemplo, si cambia el nombre de un editor a uno mas amigable,
todos los usuarios tendrán que editar su archivo  <code class="filename">.profile</code>.
El administrador del sistema podría tratar de hacer esto automáticamente con un
script
	<sup>[<a name="id2557418" href="#ftn.id2557418">40</a>]</sup>, pero
	casi con seguridad resultará que se corrompa el archivo de
alguno.  Siempre que sea posible, es mejor poner lo que sea configuración global
dentro de archivos globales, como es /etc/profile. De esta manera es posible
actualizarlo sin corromper la configuración de ningún usuario.  </p></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="manual-adduser"></a>Crear un usuario a mano</h3></div></div></div><p>Para crear una nueva cuenta a mano, sigue estos pasos: </p><div class="itemizedlist"><ul type="disc"><li><p> Editar <code class="filename">/etc/passwd</code> con
	<span><strong class="command">vipw</strong></span> y agregar una nueva linea por cada nueva cuenta.
	Teniendo cuidado con la sintaxis.  <span class="emphasis"><em>No lo edite directamente
	con un editor!</em></span> Use <span><strong class="command">vipw</strong></span> que bloquea el
	archivo, así otros comandos no tratarán de actualizarlo al mismo tiempo.
	Debería hacer que el campo de la contraseña sea `<code class="literal">*</code>',
	de esta forma es imposible ingresar al sistema.</p></li><li><p> Similarmente, edite <code class="filename">/etc/group</code> con
	<span><strong class="command">vigr</strong></span>, si necesita crear también un
	grupo.</p></li><li><p> Cree el directorio Inicio del
	usuario con el comando <span><strong class="command">mkdir</strong></span>.</p></li><li><p> Copie los archivos de <code class="filename">/etc/skel</code> al
	nuevo directorio creado 
	<sup>[<a name="id2557539" href="#ftn.id2557539">41</a>]</sup></p></li><li><p> Corrija
	la pertenencia del dueño y permisos con los comandos
	<span><strong class="command">chown</strong></span> y <span><strong class="command">chmod</strong></span> (Ver paginas de
	manual de los respectivos comandos). La opción <code class="option">-R</code> es
	muy útil. Los permisos correctos varían un poco de un sitio a otro, pero
	generalmente los siguientes comandos harán lo correcto:

</p><pre class="screen">
<strong class="userinput"><code>cd /home/nuevo-nombre-de-usuario
chown -R nombre-de-usuario.group .  
chmod -R go=u,go-w .  chmod go= .</code></strong>
</pre><p>

	</p></li><li><p> Asigne una contraseña con el comando
	<span><strong class="command">passwd</strong></span></p></li></ul></div><p> </p><p>Después de asignar la contraseña del usuario en el ultimo paso, la
	cuenta funcionara. No debería configurar esto hasta que todo lo demás
	este hecho, de otra manera el usuario puede inadvertidamente ingresar al
	sistema mientras copias los archivos de configuración de su entorno de
	trabajo.</p><p>A veces es necesario crear cuentas "falsas"
		
		<sup>[<a name="id2557616" href="#ftn.id2557616">42</a>]</sup> que no son
		usadas por personas. Por ejemplo, para configurar un servidor
		FTP
		<sup>[<a name="id2557622" href="#ftn.id2557622">43</a>]</sup> anónimo (así cualquiera podrá acceder a los archivos por
		él, sin tener que conseguir una cuenta de usuario en el sistema
		primero) podría crear una cuenta llamada "ftp". En esos casos,
		usualmente no es necesario asignar una contraseña (el ultimo
		paso de arriba).  Verdaderamente, es mejor no hacerlo, para que
		nadie puede usar la cuenta, a menos que primero sea root/cuenta
		administrador, y así convertirse en cualquier usuario.</p></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a name="ftn.id2557057" href="#id2557057">32</a>] </sup>En Internet puede comenzar buscando en:
	http://sourceforge.com y http://freshmeat.com</p></div><div class="footnote"><p><sup>[<a name="ftn.id2557081" href="#id2557081">33</a>] </sup>GUI: Grafic User Interface. En
	KDE dispone de Kuser. En Gnome ?XXX?</p></div><div class="footnote"><p><sup>[<a name="ftn.id2557205" href="#id2557205">34</a>] </sup> Estadísticamente, según el estudio de
los métodos para romper claves encriptadas, se ha establecido que aumenta
significativamente la seguridad una suma de características: tener mas de 6
caracteres, combinar letras mayúsculas y minúsculas, a la vez que intercalar
también números.</p></div><div class="footnote"><p><sup>[<a name="ftn.id2557268" href="#id2557268">35</a>] </sup>
 Si, esto significa que en el archivo de contraseña contiene toda la
información sobre un usuario <span class="emphasis"><em>excepto</em></span> su contraseña. Una maravilla del
desarrollo.</p></div><div class="footnote"><p><sup>[<a name="ftn.id2557297" href="#id2557297">36</a>] </sup>NFS: Network file System</p></div><div class="footnote"><p><sup>[<a name="ftn.id2557315" href="#id2557315">37</a>] </sup>NFS: Network file System</p></div><div class="footnote"><p><sup>[<a name="ftn.id2557324" href="#id2557324">38</a>] </sup>NIS:
	Network Information Service</p></div><div class="footnote"><p><sup>[<a name="ftn.id2557358" href="#id2557358">39</a>] </sup> Apocope de la palabra inglesa
	skeleton, que en castellano significa esqueleto, asiendo referencia al función
de estructura.</p></div><div class="footnote"><p><sup>[<a name="ftn.id2557418" href="#id2557418">40</a>] </sup>Lenguaje de programación cuyo código no necesita ser
compilado para ser ejecutado, por lo general conjunto de instrucciones a
ejecutar por el interprete de comandos (Shell). Se llamar también script a un
programa o fragmento de código escrito en algún lenguaje de scripts,
interpretados por ejemplo por Perl (Mundo Unix y en general para todas las demás
plataformas) Visual Basic Script (Microsoft Windows) JavaScript (Todas las
plataformas).  Ver también "Expresiones regulares".</p></div><div class="footnote"><p><sup>[<a name="ftn.id2557539" href="#id2557539">41</a>] </sup>cp /etc/skel/* /ruta
(donde ruta será por convención /home/"nombre de usuario"</p></div><div class="footnote"><p><sup>[<a name="ftn.id2557616" href="#id2557616">42</a>] </sup>¿Usuarios Surrealistas?</p></div><div class="footnote"><p><sup>[<a name="ftn.id2557622" href="#id2557622">43</a>] </sup>FTP: File
		transfer Protocol.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch11.html">Anterior</a> </td><td width="20%" align="center"><a accesskey="u" href="ch11.html">Subir</a></td><td width="40%" align="right"> <a accesskey="n" href="ch11s03.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">Capítulo 11. Administrando cuentas de usuario </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> Cambiar las propiedades del usuario</td></tr></table></div></body></html>
