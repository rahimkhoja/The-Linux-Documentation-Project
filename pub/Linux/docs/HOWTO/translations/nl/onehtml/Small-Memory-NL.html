<HTML
><HEAD
><TITLE
>Small Memory mini-HOWTO</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"></HEAD
><BODY
CLASS="ARTICLE"
BACKGROUND="../IMAGES/back.gif"
LINK="#000099"
><DIV
CLASS="ARTICLE"
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="TITLE"
><A
NAME="AEN2"
></A
>Small Memory mini-HOWTO</H1
><H3
CLASS="AUTHOR"
><A
NAME="AEN4"
>Todd Burgess</A
></H3
><DIV
CLASS="AFFILIATION"
><DIV
CLASS="ADDRESS"
><P
CLASS="ADDRESS"
>&nbsp;<TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:tburgess@uoguelph.ca"
>tburgess@uoguelph.ca</A
>&#62;</TT
>&nbsp;</P
></DIV
></DIV
><H3
CLASS="AUTHOR"
><A
NAME="AEN10"
>Vertaald door: Ellen Bokhorst</A
></H3
><DIV
CLASS="AFFILIATION"
><DIV
CLASS="ADDRESS"
><P
CLASS="ADDRESS"
>&nbsp;<TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:tburgess@uoguelph.ca"
>tburgess@uoguelph.ca</A
>&#62;</TT
>&nbsp;</P
></DIV
></DIV
><P
CLASS="PUBDATE"
>12-12-2000<BR></P
><DIV
CLASS="REVHISTORY"
><TABLE
WIDTH="100%"
BORDER="0"
><TR
><TH
ALIGN="LEFT"
VALIGN="TOP"
COLSPAN="3"
><B
>Wijzigingen</B
></TH
></TR
><TR
><TD
ALIGN="LEFT"
>Herziening 0.1</TD
><TD
ALIGN="LEFT"
>01-12-2000</TD
><TD
ALIGN="LEFT"
>Herzien door: tb</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
></TD
></TR
></TABLE
></DIV
><DIV
><DIV
CLASS="ABSTRACT"
><A
NAME="AEN16"
></A
><P
></P
><P
>Beschrijft hoe Linux op een systeem met weinig geheugen te draaien.</P
><P
></P
></DIV
></DIV
><HR></DIV
><DIV
CLASS="TOC"
><DL
><DT
><B
>Inhoudsopgave</B
></DT
><DT
><A
HREF="#INTRODUCTION"
>Introductie</A
></DT
><DT
><A
HREF="#LINUXKERNEL"
>Linux Kernel</A
></DT
><DT
><A
HREF="#VCONSOLES"
>Virtuele Consoles</A
></DT
><DT
><A
HREF="#DAEMONS"
>Daemons</A
></DT
><DT
><A
HREF="#CONCLUSION"
>Conclusies</A
></DT
></DL
></DIV
><DIV
CLASS="SECT1"
><H2
CLASS="SECT1"
><A
NAME="INTRODUCTION"
></A
>Introductie</H2
><P
>Ervan uitgaande dat er geen sprake kan zijn van het kopen van meer 
geheugen, dan kun je een aantal dingen doen om het geheugengebruik onder Linux
terug te dringen.</P
><P
>Veel Linux distributies die klaar voor gebruik worden geleverd, zijn
vanuit geheugenperspectief nogal overbeladen. Ze draaien meer services
en bieden meer features dan de meesten van ons ooit nodig zullen hebben.
Door veel van deze services uit te schakelen kun je verscheidene megabytes
aan geheugen vrijmaken.</P
><P
>Mijn eigen systeem is een 486DX2-66 met 12MB fysiek geheugen en 12 MB
swap space. Hierop heeft Linux de afgelopen jaren prima gedraaid en hopelijk
zal het Linux nog aardig wat meer jaren draaien. :)</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="LINUXKERNEL"
></A
>Linux Kernel</H2
><P
>Alle Linux kernels die met distributies worden geleverd zijn nogal
overbeladen en bevatten meer features dan iemand van ons ooit nodig zal
hebben. Als je je eigen kernel nog nooit hebt gecompileerd, dan is het
zeer aan te raden dat je dit doet. Hoe je een kernel compileert valt buiten
het kader van dit document, maar veel uitstekende Linux boeken en handleidingen
die dit onderwerp in uitzonderlijk detail behandelen.</P
><P
>Denk eraan niet meer features te configureren dat je nodig hebt
wanneer je de kernel gaat compileren. Als voorbeeld: hoeveel van jullie
sluiten PLIP ondersteuning in, in de kernel? En hoeveel van jullie die
het opnemen in de kernel gebruiken het daadwerkelijk? Kleinere kernels
hebben minder tijd nodig om te worden geladen, gebruiken minder geheugen
en gebruiken minder CPU cycli. </P
><P
>Nog iets anders is het gebruik van modules. Persoonlijk maak ik hier
geen gebruik van, omdat ik ze omslachtig vind. Als je er wel prijs op stelt
en ze gebruikt, kunnen ze overbeladen kernels voorkomen.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="VCONSOLES"
></A
>Virtuele Consoles</H2
><P
>Een uitstekende manier om geheugen vrij te maken is het verlagen
van het aantal VC's. Een kant-en-klare Linux distributie draait er ongeveer
6 van. Gemiddeld vereist het draaien van 6 VC's ongeveer 4MB geheugen.
Een paar ervan verwijderen kan een paar MB's geheugen vrij maken.
De meeste gebruikers hebben genoeg aan slechts 3 of 4 VC's. Hoeveel je 
ervan wilt uitschakelen is een kwestie van persoonlijke voorkeur. Denk er 
gewoon aan dat hoe minder je ervan draait, des te meer geheugen er voor 
je applicaties over zal blijven. </P
><P
>Het bestand waarin wordt aangegeven hoeveel VC's worden geladen is
<TT
CLASS="FILENAME"
>/etc/inittab</TT
>. Voor het deactiveren van VC's: </P
><P
></P
><OL
TYPE="1"
><LI
><P
>Laad <TT
CLASS="FILENAME"
>/etc/inittab</TT
> in een teksteditor.</P
></LI
><LI
><P
>Zoek naar een regel die lijkt op de volgende regel (met als
belangrijkste kenmerk een regel die begint met c1):</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>c1:12345:respawn:/sbin/getty tty1 38400
linux</PRE
></TD
></TR
></TABLE
><P
>Begin bij het hoogste nummer (d.w.z. c6) een plaats hier een
commentaarteken voor (een '#'). Herhaal deze stap zo vaak als nodig is.
Elke regel waar je een commentaarteken voor plaatst, is &eacute;&eacute;n
VC minder draaiend. </P
></LI
><LI
><P
>Start het systeem opnieuw op om de wijzigingen te activeren.</P
></LI
></OL
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="DAEMONS"
></A
>Daemons</H2
><P
>Veel Linux distributies draaien daemons die de meesten van ons
nooit zullen gebruiken. De meeste daemons worden door scripts geladen.
Waar deze scripts zijn te vinden en hoe ze worden genoemd is afhankelijk
van je Linux distributie. Slackware setup scripts
zijn te vinden in <TT
CLASS="FILENAME"
>/etc/rc.d/rc.*</TT
>. </P
><P
>Voor je verdergaat, is kennis van Unix shellscript programmering
beslist een pluspunt. Als je echter geen ervaring hebt in het schrijven
van Unix shellscripts, is wat hieronder volgt waarschijnlijk de snelste
introductie in shellscript programmering die ooit is geschreven.</P
><P
>Neem het volgende shellscript:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>#!/bin/sh echo "hello world" 
#echo "good bye cruel world"</PRE
></TD
></TR
></TABLE
><P
>De voorgaande code zal de string "Hello world" op het scherm
weergeven. In shellscripts moet op de eerste regel
<TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>"#!/bin/sh"</PRE
></TD
></TR
></TABLE
> voorkomen.
Daarna wordt elke regel uitgevoerd alsof je deze zou hebben getypt vanaf
je toetsenbord (denk aan shellscripts als niets meer dan veredelde
toetsenbordmacro's).</P
><P
>Regels beginnend met een '#' worden beschouwd als commentaarregels,
omdat ze niet door de shell worden uitgevoerd. 
De meeste opstartscripts die daemons laden zien er ongeveer zo uit: </P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>if eenconditie 
        doe iets
  fi</PRE
></TD
></TR
></TABLE
><P
>Wat je kunt doen om het laden van een daemon uit te schakelen, is het
plaatsen van een commentaarteken voor elke regel beginnend met
<TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>if</PRE
></TD
></TR
></TABLE
> en elke regel eindigend op
<TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>fi</PRE
></TD
></TR
></TABLE
>. </P
><P
>Als je erachter wilt komen vanuit welk script een daemon wordt geladen.
doorzoek je de opstartscripts op de naam van de daemon.
Wanneer ik wil weten vanwaar
<SPAN
CLASS="APPLICATION"
>inetd</SPAN
> wordt geladen onder Slackware dan doe ik
het volgende:
<TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>$ cd /edt/rc/d $grep -n inetd rd.*</PRE
></TD
></TR
></TABLE
> </P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN66"
></A
><SPAN
CLASS="APPLICATION"
>inetd</SPAN
></H3
><P
><SPAN
CLASS="APPLICATION"
>inetd</SPAN
> staat mensen toe dingen te doen als
<B
CLASS="COMMAND"
>telnet</B
>, <B
CLASS="COMMAND"
>ftp</B
>, en het sturen van
<B
CLASS="COMMAND"
>talk</B
> verzoeken naar je machine.
Als je je systeem nooit als een server gebruikt
of op afstand een van de services hoeft te benaderen, dan kun je
<SPAN
CLASS="APPLICATION"
>inetd</SPAN
> verwijderen.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN75"
></A
><SPAN
CLASS="APPLICATION"
>lpd</SPAN
></H3
><P
><SPAN
CLASS="APPLICATION"
>lpd</SPAN
> wordt gebruikt om bestanden op je
printer af te drukken met behulp van de opdracht
<B
CLASS="COMMAND"
>lpr</B
>. Je kunt <SPAN
CLASS="APPLICATION"
>lpd</SPAN
> verwijderen
als je nooit iets afdrukt vanaf je Linux box. Als je echter een HP Deskjet
&trade; printer hebt en wel wilt kunnen afdrukken, dan raad ik je van harte
het package aan dat ik samen heb gesteld met de naam dj-printcap. Het is
beschikbaar vanaf:</P
><P
> 
<A
HREF="ftp://ftp.redhat.com/pub/redhat/redhat-4.2/i386/RedHat/RPMS/dhcpcd-0.6-2.i386.rpm"
TARGET="_top"
>ftp://sunsite.unc.edu/pub/Linux/system/Printing/dj-printcap.tar.gz</A
></P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN84"
></A
><SPAN
CLASS="APPLICATION"
>nfsd</SPAN
> en <SPAN
CLASS="APPLICATION"
>mountd</SPAN
></H3
><P
>Deze twee daemons worden gebruikt om een NFS-server te draaien.
Als je je Linux systeem nooit als een NFS server gebruikt, dan kun je
deze twee daemons veilig verwijderen.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN89"
></A
><SPAN
CLASS="APPLICATION"
>portmap</SPAN
></H3
><P
>De <SPAN
CLASS="APPLICATION"
>portmap</SPAN
> daemon wordt gebruikt voor het
afhandelen van RPC services. Je kunt <SPAN
CLASS="APPLICATION"
>portmap</SPAN
>
verwijderen als je nooit een NFS-server draait of enig ander RPC programma.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN95"
></A
><SPAN
CLASS="APPLICATION"
>sendmail</SPAN
></H3
><P
><SPAN
CLASS="APPLICATION"
>sendmail</SPAN
> is een andere daemon waarvoor
flink wat geheugen nodig is. Gebruik je je Linux box nooit als een relay
voor het versturen van e-mail of ontvang je nooit mail op je Linux box, dan
kun je <SPAN
CLASS="APPLICATION"
>sendmail</SPAN
> waarschijnlijk wel verwijderen.
Verstuur je e-mail vanaf je Linux box, dan kunnen de meeste e-mail clients
zo worden ingesteld dat ze e-mail versturen vanaf een andere mailserver.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN101"
></A
>anderen</H3
><P
>Het kan zijn dat er nog andere daemons worden geladen wanneer je je
systeem start die je niet nodig hebt.
Verwijder datgeen waarvan je denkt dat dit nodig is. Twee daemons die moeten
blijven draaien zijn
<SPAN
CLASS="APPLICATION"
>syslogd</SPAN
> en <SPAN
CLASS="APPLICATION"
>klogd</SPAN
>. </P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="CONCLUSION"
></A
>Conclusies</H2
><P
>De voorgaande bespreking illustreert de stappen die ik nam om het
geheugengebruik op mijn Linux box terug te dringen. Hopelijk heb ik je 
voldoende inzicht kunnen geven in wat je kunt doen met je Linux box om
geheugen te besparen. Veel geluk en happy hacking!</P
></DIV
></DIV
></BODY
></HTML
>