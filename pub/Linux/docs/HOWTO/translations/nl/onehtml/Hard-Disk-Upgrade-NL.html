<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>Hard Disk Upgrade Mini Howto</TITLE>


</HEAD>
<BODY>
<H1>Hard Disk Upgrade Mini Howto</H1>

<H2>Yves Bellefeuille 
<A HREF="mailto:yan@storm.ca">yan@storm.ca</A> &amp; Konrad Hinsen 
<A HREF="mailto:hinsen@cnrs-orleans.fr">hinsen@cnrs-orleans.fr</A> <BR>
Vertaler: 
<A HREF="http://people.zeelandnet.nl/reggye/"> Reggy Ekkebus</A>, 
<A HREF="mailto:reggy@zeelandnet.nl">reggy@zeelandnet.nl</A></H2>v2.1, 20 oktober 1999
<P><HR>
<EM> Hoe een Linux systeem overzetten van de ene naar de andere
harddisk </EM>
<HR>
<H2><A NAME="s1">1.  Introductie</A></H2>

<P>Dit document beschrijft hoe je een geheel Linux systeem van de ene naar de
andere harddisk kunt migreren incl Lilo
<P>In deze beschrijving is "<CODE>/dev/hda</CODE>" (de eerste IDE hard disk) dit is
de "old" disk en "<CODE>/dev/hdb</CODE>" (tweede IDE hard disk) dit is de
"new" disk.
<P>Specifieke partities op de "old" disk verwijzen naar "<CODE>/dev/hda1</CODE>",
"<CODE>/dev/hda2</CODE>", en zo verder. Specifieke partities op de "new" disk 
verwijzen naar "<CODE>/dev/hdb1</CODE>", "<CODE>/dev/hdb2</CODE>", en zo verder.
<P>De uitleg van dit document is gebaseerd op een Red Hat 6.0 systeem,
maar het is ook getest op een Debian 2.1, Slackware 3.5 and SuSE 6.2
systeem en daar hebben we een paar verschillen ontdekt die we genoteerd
hebben.
<P>Als de commando's niet goed werken op jouw systeem laat het ons dan weten
en vertel tevens welke distributie je gebruikt.
<H2><A NAME="s2">2. Installeer de beide schijven in je systeem</A></H2>

<P>Op moderne systemen kunnen vier "EIDE" devices aangesloten worden 
op de controller, dus het zou geen probleem moeten zijn om beide harddisks
in je systeem te installeren, ook al heb je al andere EIDE devices.  
Hard disks en CD-ROM drives zijn typische EIDE devices. Floppy drives en
tape drives zijn normaal op de floppy drive controller aangesloten.
<P>SCSI adapters zijn flexibeler: zij accepteren zeven devices. Dus
als jij geluk hebt (of rijk bent) en je hebt een SCSI adapter, dan wist je
dit misschien al en je weet waarschijnlijk ook al welke devices SCSI
devices zijn! Voor meer informatie zie:
<A HREF="ftp://sunsite.unc.edu/pub/Linux/docs/HOWTO/unmaintained/SCSI-HOWTO">SCSI How-To</A>.
<P>Zelfs op de oudere systemen kun je twee harddisks op de controller aansluiten,
zodat je toch nog beide harddisks tegelijkertijd kan installeren.
Alhoewel, als je een ander device naast de harddisk hebt ge&iuml;nstalleerd 
bv een CD-ROM dan moet je deze CD-ROM eerst verwijderen alvorens je de 
de nieuwe harddisk kan installeren naast de oude.
<P>Je moet de harddisk wel als "master" of als "slave" installeren
(zie de jumper settings). Normaal kan je de jumper setting op de disks 
zelf vinden, zo niet kijk dan in de manual of kijk bij de fabrikant.
<P>Je moet ook de BIOS op de hoogte stellen van je nieuwe disk
"geometry". Normaal kom je in het BIOS setup programma door 
tijdens het booten een bepaalde key combinatie in te typen.
Hier onder staan wat key combinaties:
<P>
<UL>
<LI>Acer notebooks: F2 key tijdens Power-On Self-Test (POST)</LI>
<LI>American Megatrends (AMI): Del tijdens Power-On Self-Test</LI>
<LI>Award: Del, of Ctrl-Alt-Esc</LI>
<LI>Compaq: F10 key nadat het vierkantje verschijnt boven in de
rechter hoek van het scherm gedurende de boot-up</LI>
<LI>Dell: Ctrl-Alt-Enter</LI>
<LI>DTK: Esc key tijdens Power-On Self-Test</LI>
<LI>IBM Aptiva 535: F1 gedurende power-on schuift het vierkantje
met de golvende streepjes in de rechter boven hoek.
(Is dit ook zo met andere Aptiva modellen?)</LI>
<LI>IBM PS/2: Ctrl-Alt-Del, dan Ctrl-Alt-Ins wanneer de cursor in
de rechter hoek is.</LI>
<LI>Mr. BIOS: Ctrl-Alt-S tijdens Power-On Self-Test</LI>
<LI>Packard Bell: Voor sommige modellen, F1 or F2 key tijdens
Power-On Self-Test</LI>
<LI>Phoenix: Ctrl-Alt-Esc, of Ctrl-Alt-S, of Ctrl-Alt-Enter</LI>
<LI> Veel oude systemen hebben een installatie of referentie diskette
nodig </LI>
</UL>
<P>(We zijn ge&iuml;nteresseerd in informatie over andere Bios-en en ontvangen
graag de info zodat we ze aan de lijst kunnen toevoegen).
<P>Re-boot je systeem en log-in als <CODE>root</CODE>. Als je het "<CODE>su</CODE>"
commando gebruikt om <CODE>root</CODE> te worden, gebruik dan "<CODE>su -</CODE>",
met de hypen optie
<H2><A NAME="s3">3.  Unmount niet Linux partities en netwerk drives</A></H2>

<P>Sommige mensen vinden het leuk om andere partities van andere besturings
systemen te mounten (DOS,Windows, OS/2, etc.) zodat ze ze onder Linux kunnen
gebruiken. Enkel deze partities moet je maken en kopi&euml;ren onder hun eigen
besturingssysteem, je moet ze wel eerst Unmount-en alvorens een Linux
partitie te kopi&euml;ren. 
Als je bijvoorbeeld een DOS partitie hebt gemount onder
<CODE>/dos</CODE> dan moet je deze eerst Unmount-en met het commando: 
<P>
<UL>
<LI><CODE>umount /dos</CODE></LI>
</UL>
<P>Note: Het commando is "<CODE>umount</CODE>" zonder de eerste letter "n" in het
woord "Unmount".
<P>Je moet ook de netwerk drives Unmount-en.
<H2><A NAME="s4">4. De nieuwe disk partitioneren</A></H2>

<P>Gebruik dit commando om de nieuwe disk te paritioneren:
<P>
<UL>
<LI><CODE>fdisk /dev/hdb</CODE></LI>
</UL>
<P>EIDE devices zijn gedefinieerd als <CODE>hda</CODE>, <CODE>hdb</CODE>, <CODE>hdc</CODE>,
en <CODE>hdd</CODE> in de <CODE>/dev</CODE> directory. 
Partities op deze disks kunnen een range hebben van 1 tot 16 ook in de
<CODE>/dev</CODE> directory. Bijvoorbeeld, <CODE>/dev/hda4</CODE> verwijst naar
partitie 4 op hard disk <CODE>a</CODE> (Eerste EIDE hard disk).
<P>SCSI devices worden genoteerd als devices <CODE>sda</CODE>, <CODE>sdb</CODE>,
<CODE>sdc</CODE>, <CODE>sdd</CODE>, <CODE>sde</CODE>, <CODE>sdf</CODE> en <CODE>sdg</CODE>
in de <CODE>/dev</CODE> directory. Op dezelfde manier, partities op deze disks
kunnen een range hebben van 1 tot 16 en ook in de <CODE>/dev</CODE> directory.
Bijvoorbeeld, <CODE>/dev/sda3</CODE> verwijst naar partitie 3 op SCSI disk
<CODE>a</CODE> (Eerste SCSI hard disk).
<P>Voor Linux partities met het <CODE>ext2</CODE> file systeem, gebruik je systeem
ID 83. Voor swap partities, gebruik je ID 82. 
<P>Voor meer informatie over partitionering zie:
<A HREF="http://metalab.unc.edu/mdw/HOWTO/Installation-HOWTO.html">Installation Howto</A> 
en de 
<A HREF="http://metalab.unc.edu/mdw/HOWTO/mini/Partition.html">Partition Mini How-To</A>.
<P>Als je harddisk meer dan 1024 cylinders heeft, bekijk dan even de
<A HREF="http://metalab.unc.edu/mdw/HOWTO/mini/Large-Disk.html">Large Disk Mini How-To</A>.
In het kort, je moet alle files die Linux gebruikt om te booten binnen de 1024 hebben staan.
Een manier om dit te doen is een kleine partitie te maken van ca (5 mb o.i.d.) 
enkel voor de <CODE>/boot</CODE> directory  aan het begin van de disk.
(<EM>Slackware enkel:</EM> De kernel is in <CODE>/vmlinuz</CODE>
anders dan <CODE>/boot/vmlinuz</CODE>. Dus je moet ze beiden in de <CODE>/</CODE>
directory zetten en de <CODE>/boot</CODE> directory in deze partitie.)
<P>Partities voor systemen anders dan Linux moeten gemaakt worden met hun 
eigen <CODE>fdisk</CODE> of equivalent commando.
<H2><A NAME="s5">5. De nieuwe disk formateren</A></H2>

<P>Gebruik het volgende commando om een nieuwe disk te formateren
<CODE>ext2fs</CODE> 
<P>
<UL>
<LI><CODE>mkfs.ext2 /dev/hdb1</CODE></LI>
</UL>
<P>Om de disk op slechte blokken te checken (physical defects), kun je de
<CODE>-c</CODE> optie toevoegen dit voor "<CODE>/dev/hdb1</CODE>".
<P>Als de nieuwe disk meer dan een Linux partitie heeft, formateer dan de andere
partities met "<CODE>mkfs.ext2 /dev/hdb2</CODE>", "<CODE>mkfs.ext2 /dev/hdb3</CODE>",
en zo verder. En voeg de <CODE>-c</CODE> optie toe als nodig.
<P>(Note: met oudere distributies, werkte het commando "<CODE>mkfs -t ext2 -c
/dev/hdb1</CODE>" niet om te checken op slechte blokken. Dit in tegen stelling
met wat er in de  <CODE>man</CODE> pages stond bij Red-Hat, Debian or Slackware.
Dit is nu gefixed.)
<P>Gebruik het volgende commando een swap partitie te formateren: 
<P>
<UL>
<LI><CODE>mkswap /dev/hdb1</CODE></LI>
</UL>
<P>Je kunt ook hier de <CODE>-c</CODE> optie gebruiken voor "<CODE>/dev/hdb1</CODE>"
om te kijken voor bad blocks.
<H2><A NAME="s6">6. De nieuwe disk mounten.</A></H2>

<P>Maak een directory waar je de disk wil mounten, bv
<CODE>/new-disk</CODE> en mount hem hier:
<P>
<UL>
<LI><CODE>mkdir /new-disk
mount -t ext2 /dev/hdb1 /new-disk</CODE></LI>
</UL>
<P>Als de nieuwe disk meer dan een Linux partitie heeft, mount ze dan allemaal
onder de directory <CODE>/new-disk</CODE> in hetzelfde patroon zoals je ze 
later wil gebruiken.
<P>Bijvoorbeeld: De nieuwe disk heeft vier partities, als volgt:
<P>
<UL>
<LI>/dev/hdb1:    /</LI>
<LI>/dev/hdb2:    /home</LI>
<LI>/dev/hdb3:    /var</LI>
<LI>/dev/hdb4:    /var/spool</LI>
</UL>
<P>Mount de vier partities onder <CODE>/new-disk</CODE> als volgt:
<P>
<UL>
<LI>/dev/hdb1:    /new-disk</LI>
<LI>/dev/hdb2:    /new-disk/home</LI>
<LI>/dev/hdb3:    /new-disk/var</LI>
<LI>/dev/hdb4:    /new-disk/var/spool</LI>
</UL>
<P>Je moet de mount punten maken voor elk "level" voordat je de
partities mount op dat level. bv:
<P>
<UL>
<LI>mkdir /new-disk                                 (1st level)
mount -t ext2 /dev/hdb1 /new-disk</LI>
<LI>mkdir /new-disk/home                            (2nd level)
mount -t ext2 /dev/hdb2 /new-disk/home</LI>
<LI>mkdir /new-disk/var                             (2nd level also)
mount -t ext2 /dev/hdb3 /new-disk/var</LI>
<LI>mkdir /new-disk/var/spool                       (3rd level)
mount -t ext2 /dev/hdb4 /new-disk/var/spool</LI>
</UL>
<P>Als je een mount punt hebt gemaakt <CODE>/new-disk/tmp</CODE> dan moet je wel
de directory's permissies goed zetten zodat alle gebruikers er gebruik van kunnen maken:
<P>
<UL>
<LI><CODE>chmod 1777 /new-disk/tmp</CODE></LI>
</UL>
<H2><A NAME="s7">7. Het kopi&euml;ren van de files van de oude naar de nieuwe</A>disk</H2>

<P>Je kunt het best naar single-user mode gaan voordat je begint met
het kopi&euml;ren van de files, dit omdat er dan geen daemons  meer draaien en 
niemand meer kan inloggen en er ook geen log-files meer lopen.
<P>
<UL>
<LI><CODE>/sbin/telinit 1</CODE></LI>
</UL>
<P>Als je de harddisk wil kopi&euml;ren dan wil je alles kopi&euml;ren incl
directory's en bestanden, inclusief links.
<P>Alhoewel, je <EM>niet</EM> de directory <CODE>/new-disk</CODE> wilt kopi&euml;ren,
want dan kopieer je de disk in-zichzelf!
<P>Verder moet je een <CODE>/proc</CODE> directory maken op de nieuwe disk, maar
je wilt niet de inhoud ervan kopi&euml;ren: <CODE>/proc</CODE> is een "virtueel" file
systeem en heeft eigenlijk geen files. Maar bevat informatie over processen
die op het systeem draaien.
<P>Hier zijn verschillende mogelijkheden om de schijf te kopi&euml;ren.
Als je een grote schijf hebt of weinig geheugen hebt dan duurt het een tijdje
Je kan ervan uitgaan dat je ca 10 Mb/min kan kopi&euml;ren, maar soms meer.
<P>Je kan het kopieerproces volgen door gebruik te maken van het
"<CODE>df</CODE>" commando op een andere terminal. Je kunt ook "<CODE>watch df</CODE>"
of "<CODE>watch ls -l /new-disk</CODE>" gebruiken zodat het scherm elke 2 seconden
wordt ververst; druk <CODE>Ctrl-C</CODE> om  het af te breken. Let wel dat als je
"<CODE>watch</CODE>" gebruikt dit ook het kopi&euml;ren kan vertragen.
<P>
<UL>
<LI><CODE>cp -ax / /new-disk</CODE></LI>
</UL>
<P>
<P>Dit is de simpelste methode, maar werkt alleen als je
Linux systeem op een schijf staat. 
<P>De <CODE>-a</CODE> optie behoud het origineel systeem zo goed als mogelijk.
De <CODE>-x</CODE> optie limiteert <CODE>cp</CODE> tot een enkel file systeem; dit is
nodig om te vermijden dat de <CODE>/new-disk</CODE> en <CODE>/proc</CODE> 
directory's worden gekopieerd.
<P>(<EM>SuSE enkel:</EM> Enkel met deze methode , moet je ook 
een directory <CODE>/dev/pts</CODE> maken op de nieuwe disk. gebruik hiervoor het 
commando "<CODE>mkdir /new-disk/dev/pts</CODE>".)
<P>(Note: Als je de <CODE>-x</CODE> optie gebruikt, recente versies van <CODE>cp</CODE> 
maken dan de directory's <CODE>/new-disk/new-disk</CODE> en 
<CODE>/new-disk/proc</CODE>, hoewel de directory's leeg blijven. 
Als deze directory's zijn aangemaakt moet je
deze <CODE>/new-disk/new-disk</CODE> verwijderen , en <CODE>/new-disk/proc</CODE> houden .)
<P>
<P>
<UL>
<LI><CODE>cd / &amp;&amp; echo cp -a `/bin/ls -1Ab | egrep -v "^new-disk$|^proc$"` /new-disk | sh</CODE></LI>
</UL>
<P>
<P>(Typ dit allemaal op een regel)
<P>Deze gaat naar de root directory en copieert dan alle files 
behalve <CODE>/new-disk</CODE> en <CODE>/proc</CODE> naar <CODE>/new-disk</CODE>.
Note De eerste optie achter <CODE>ls</CODE> is het nummer 1 en niet letter L!
<P>Dit commando zou in alle omstandigheden moeten werken.        
<P>
<UL>
<LI><CODE>(cd / &amp;&amp; tar cpf - . --exclude new-disk --exclude proc) | (cd /new-disk &amp;&amp; tar xpf -)</CODE></LI>
</UL>
<P>(Typ dit allemaal op een regel)
<P>Deze gaat naar de root directory "tart" alles behalve
<CODE>/new-disk</CODE> en <CODE>/proc</CODE>, gaat dan naar <CODE>/new-disk</CODE> en "untart"
daar alles. Note: er moet geen slash voor of achter de namen van 
directory's in de <CODE>--exclude</CODE> opties
<P>(Noot: De optie <CODE>-l</CODE> werkt niet, als <CODE>tar</CODE> de directory's
<CODE>/new-disk</CODE> en <CODE>/proc</CODE> aan het maken is, alhoewel het
niet de inhoud copieert. Daarom heeft de <CODE>tar</CODE> <CODE>-l</CODE>
optie niet hetzelfde gedrag als de <CODE>-x</CODE> optie met oudere
versies van <CODE>cp</CODE>.)
<P>Deze methode is wat langzamer dan de andere.          
<P>
<P>
<UL>
<LI><CODE>cp -a /bin /boot /dev /etc /home /lib /lost+found /mnt /root/sbin /tmp /usr /var /new-disk</CODE></LI>
</UL>
<P>(Typ dit allemaal op een regel)
<P>
<P>De laatste directory, <CODE>/new-disk</CODE>, is de bestemming voor het <CODE>cp</CODE>
commando. Alle andere directory's zijn de bronnen. Daarvoor,
kopi&euml;ren we alle directory's in de lijst naar <CODE>/new-disk</CODE>.
<P>Met deze methode kun je simpel een lijst maken van alle directory's 
die je wilt kopi&euml;ren. Hier hebben we alle directory's in een lijst gezet 
behalve <CODE>/new-disk</CODE> en <CODE>/proc</CODE>. als je om een of andere redenen geen
andere methode kan gebruiken, kun je altijd deze methode gebruiken om handmatig
alle directory's te kopi&euml;ren die jij selecteert. 
<P>Als je deze methode gebruikt, en er staan files in de root  
directory zelf, dan heb je een ander commando nodig om deze te kopi&euml;ren. 
Dit is speciaal nodig met Debian en Slackware sinds deze 
distributies files root directory hebben gezet:
<P><CODE>cp -dp /* /.* /new-disk</CODE>
<P>Nadat je een van deze commando's hebt gebruikt, moet je ook nog de <CODE>/proc</CODE>
directory maken op de nieuwe disk, als deze nog niet bestaat:
<P>
<UL>
<LI>mkdir /new-disk/proc</LI>
</UL>
<P>Als je wilt kun je nu de file structuur laten nakijken op de nieuwe disk:
<P>
<UL>
<LI>umount /new-disk</LI>
<LI>fsck.ext2 -f /dev/hdb1</LI>
<LI>mount -t ext2 /dev/hdb1 /new-disk</LI>
</UL>
<P>Als de nieuwe disk meer dan een partitie heeft, dan moet je hem 
Unmount-en vanaf "onder af" voordat je <CODE>fsck.ext2</CODE> gaat runnen:
Zoals in het voorbeeld hier boven moet je eerst de 3e level partities Unmount-en,
dan de 2e level partities, en dan de 1e level partities.
<P>Je kan ook twee disks met elkaar vergelijken, om er zeker van te zijn 
dat de files goed zijn gecopieerd:
<P>
<UL>
<LI><CODE>find / -path /proc -prune -o -path /new-disk -prune -o -xtype f -exec cmp {} /new-disk{} \;</CODE></LI>
</UL>
<P>(Typ dit allemaal op een regel)   
<P>(<EM>Slackware enkel:</EM> Een basis Slackware installatie ("A" series enkel)
zit het "<CODE>cmp</CODE>" commando niet in, dus als een een basis installatie hebt
dan kun je dit commando niet runnen. De "<CODE>cmp</CODE>" commando zit in de "AP1" series.)
<P>Deze vergelijkt enkel reguliere files, dus geen character of block special
files (in de <CODE>/dev</CODE> directory), sockets, etc.,sinds het "<CODE>cmp</CODE>"
niet goed werkte. Wij ontvangen graag suggesties over hoe deze "special" files
te vergelijken. 
<H2><A NAME="s8">8. Het aanpassen van <CODE>/new-disk/etc/fstab</CODE> als</A>nodig.</H2>

<P>Als je nieuwe disk niet dezelfde partities of verband heeft als de 
oude disk, dan moet je de <CODE>/new-disk/etc/fstab</CODE> file aanpassen. 
<P>Wees er zeker van dat de disk partities van de (eerste column) overeenkomen
met het verband dat je hebt op de nieuwe disk, als eenmaal de oude disk is weggehaald
en je mount enkel de "<CODE>/</CODE>" partitie zoals hierboven in de tweede column.
<P>Voor meer informatie over de file <CODE>/etc/fstab</CODE>, zie
<A HREF="http://www.nl.linux.org/doc/books/sag/book1.html">Linux System Administrator's Guide</A>,
sectie 4, onder "Mounting and unmounting".
<P>Voor swap partities, gebruik een lijn als hieronder:
<P>
<UL>
<LI>/dev/hda1   swap    swap    defaults    0  0</LI>
</UL>
<H2><A NAME="s9">9. LILO voorbereiden om van de nieuwe disk te booten</A></H2>

<P>(Dank aan Rick Masters voor het helpen hierbij)
<P>We gaan ervan uit dat LILO op de Master Boot Record (MBR) is 
geinstalleerd. Dit schijnt de meest normale configuratie te zijn.
Als je LILO wilt installeren op de tweede harddisk, die later de 
eerste harddisk wordt.
<P>Edit de file <CODE>/new-disk/etc/lilo.conf</CODE> als volgt:
<P>
<BLOCKQUOTE><CODE>
<PRE>


              disk=/dev/hdb bios=0x80       # vertel LILO dat de tweede
                                            # disk moet behandelen als is het
                                            # de eerste disk (BIOS ID 0x80).
              boot=/dev/hdb                 # Installeer LILO op de tweede
                                            # hard disk.
              map=/new-disk/boot/map        # Locatie van de "map file".
              install=/new-disk/boot/boot.b # File om naar de hard disk's
                                            # boot sector te kopi&euml;ren.
              prompt                        # Heb LILO laat "LILO boot:"
                                            # prompt zien.
              timeout=50                    # Boot default systeem na 5
                                            # seconden. (Het getal is in
                                            # seconden.)
              image=/new-disk/boot/vmlinuz  # Locatie van de Linux kernel. De
                                            # actuele naam met nummer
                                            # Voorbeeld:
                                            # "vmlinuz-2.0.35".
                 label=linux                # Label voor Linux systeem.
                 root=/dev/hda1             # Locatie van de root partitie op
                                            # de nieuwe hard disk. Verander dit 
                                            # als nodig voor jou systeem.
                                            # Note  Je moet wel de toekomstige
                                            # locatie opgeven, als de oude
                                            # eruit gehaald wordt
                  read-only                 # Mount partitie read-only 
                                            # eerst, om fsck te runnen.
</PRE>
</CODE></BLOCKQUOTE>
<P>(<EM>Slackware enkel:</EM> gebruik "<CODE>image=/new-disk/vmlinuz</CODE>".)
<P>Als je een SCSI harddisk gebruikt, dan moet je de regel die  
"<CODE>initrd</CODE>" bevat aanpassen, zie je bestaande <CODE>/etc/lilo.conf</CODE> file.
<P>Installeer LILO op de new disk:
<P>
<UL>
<LI><CODE>/sbin/lilo -C /new-disk/etc/lilo.conf</CODE></LI>
</UL>
<P>De <CODE>-C</CODE> optie vertelt LILO welke configuratie file te gebruiken.
<H2><A NAME="s10">10. Een boot diskette maken (optioneel)</A></H2>

<P>Als je wilt kun je ook een boot diskette maken, voor het geval als je problemen
hebt tijdens het booten van de nieuwe disk.
<P>Doe een lege diskette in de A: drive, formateer hem en maak er een
filesysteem op en mount hem hierna:
<P>
<UL>
<LI>fdformat /dev/fd0H1440</LI>
<LI>mkfs.ext2 /dev/fd0</LI>
<LI>mount -t ext2 /dev/fd0 /mnt</LI>
</UL>
<P>(<EM>Debian enkel:</EM> Met Debian 2.x, gebruik "<CODE>/dev/fd0u1440</CODE>" in
plaat van  "<CODE>/dev/fd0H1440</CODE>". Met Debian 1.x, gebruik
"<CODE>/dev/fd0h1440</CODE>", met een kleine "h".)
<P>(<EM>Debian enkel:</EM> Met Debian 2.x, gebruik "<CODE>superformat</CODE>" in
plaats van  "<CODE>fdformat</CODE>". Je kan de fout negeren "<CODE>mformat: command
not found</CODE>". Met Debian 1.x, als je het commando "<CODE>fdformat</CODE>" niet
hebt, dan kun je het  weg laten als de floppy al geformateerd is. In dit
geval, moet je de diskette nakijken op bad blocks door gebruik te maken van de
"<CODE>-c</CODE>" na de "<CODE>mkfs.ext2</CODE>" commando.)
<P>(<EM>Slackware enkel:</EM> gebruik "<CODE>/dev/fd0u1440</CODE>" in plaats
van "<CODE>/dev/fd0H1440</CODE>". Met oudere versies
probeer "<CODE>/dev/fd0h1440</CODE>", met een kleine "h".)
<P>(<EM>SuSE enkel:</EM> Gebruik "<CODE>/dev/fd0u1440</CODE>" in plaats
van "<CODE>/dev/fd0H1440</CODE>".)
<P>Kopieer alle files in de  <CODE>/boot</CODE> op de diskette:
<P>
<UL>
<LI><CODE>cp -dp /boot/* /mnt</CODE></LI>
</UL>
<P>(<EM>Red Hat enkel:</EM> als de <CODE>/boot</CODE> directory twee files 
bevat t.w.<CODE>vmlinux</CODE> and <CODE>vmlinuz</CODE>
(Note: het verschil zit hem in de laatste letter), je moet dan enkel
de <CODE>vmlinuz</CODE> file nar de boot diskette kopi&euml;ren. 
De <CODE>vmlinux</CODE> file is het zelfde enkel deze is 
gecomprimeerd om ruimte te besparen
<P>(<EM>Slackware enkel:</EM> Kopieer de file <CODE>/vmlinuz</CODE> naar
de boot diskette; gebruik hiervoor het commando "<CODE>cp /vmlinuz /mnt</CODE>".)
<P>Maak een nieuwe <CODE>/mnt/lilo.conf</CODE> als volgt:
<P>
<P>
<BLOCKQUOTE><CODE>
<PRE>


              boot=/dev/fd0                 # Installeer LILO op floppy disk.
              map=/mnt/map                  # Locatie van de "map file".
              install=/mnt/boot.b           # File de floppy zijn 
                                            # boot sector te kopi&euml;ren.
              prompt                        # Have LILO show "LILO boot:"
                                            # prompt.
              timeout=50                    # Boot default systeem after 5
                                            # seconds. (Value is in tenths of
                                            # seconds.)
              image=/mnt/vmlinuz            # Locatie van de Linux kernel. De
                                            # actuele naam met nummer
                                            # Voorbeeld:
                                            # "vmlinuz-2.0.35".
                 label=linux                # Label voor Linux systeem.
                 root=/dev/hda1             # Locatie van de root partitie op
                                            # de nieuwe hard disk. Verander dit
                                            # als nodig voor jou systeem.
                                            # Note  Je moet wel de toekomstige
                                            # locatie opgeven, als de oude
                                            # eruit gehaald wordt
                  read-only                 # Mount partitie read-only
                                            # eerst, om fsck te runnen.
</PRE>
</CODE></BLOCKQUOTE>
<P>Installeer LILO op de boot diskette:
<P>
<UL>
<LI><CODE>/sbin/lilo -C /mnt/lilo.conf</CODE></LI>
</UL>
<P>De <CODE>-C</CODE> optie vertelt LILO welke configuratie file te gebruiken.
<P>Unmount de diskette:
<P>
<UL>
<LI><CODE>umount /mnt</CODE></LI>
</UL>
<H2><A NAME="s11">11. De oude disk verwijderen</A></H2>

<P>Zet je systeem uit en verwijder de oude disk. Vergeet niet 
de jumpers op de disk en de BIOS aan te passen om de veranderingen door te voeren.
<H2><A NAME="s12">12. Re-boot je systeem, en pas de LILO configuration file</A>aan</H2>

<P>Re-boot het systeem. Als je problemen hebt, dan kun je de boot diskette 
gebruiken die je net hebt gemaakt. Om van diskette te booten moet je je
BIOS boot-up sequence veranderen  "<CODE>A:, C:</CODE>".
<P>Je moet de file <CODE>/etc/lilo.conf</CODE> aanpassen, voor het geval je later
nog eens LILO wilt runnen. Hieronder is een voorbeeld LILO file:
<P>
<BLOCKQUOTE><CODE>
<PRE>


              boot=/dev/hda                 # Installeer LILO op de eerste
                                            # disk.
              map=/boot/map                 # Locatie of "map file".
              install=/boot/boot.b          # File om de floppy's
                                            # boot sector te kopi&euml;ren.
              prompt                        # Heb LILO laat "LILO boot:"
                                            # prompt zien.
              timeout=50                    # Boot default systeem na 50
                                            # seconden. (Het getal is in
                                            # seconden.)
              image=/boot/vmlinuz           # Locatie van de Linux kernel. 
                                            # De actueel naam met nummer
                                            # Voorbeeld:
                                            # "vmlinuz-2.0.35".
                  label=linux               # Label voor Linux systeem.
                  root=/dev/hda1             # Locatie van de root partitie op
                                            # de nieuwe hard disk. Verander dit
                                            # als nodig voor jou systeem.
                                            # Note  Je moet wel de toekomstige
                                            # locatie opgeven, als de oude
                                            # eruit gehaald wordt
                  read-only                 # Mount partitie read-only  
                                            # eerst, om fsck te runnen.
                  
</PRE>
</CODE></BLOCKQUOTE>
<P>(<EM>Slackware enkel:</EM> Use "<CODE>image=/vmlinuz</CODE>".)
<H2><A NAME="s13">13. Erkentenis</A></H2>

<P>Dank aan: Scott Christensen, Frank Damgaard, Alexandre Fornieles, David
Fullerton, Jerry Gaines, Chris Gillespie, Nicola Girardi, Per Gunnar Hans&ouml;,
Richard Hawes, Ralph Heimueller, Gerald Hermant, Andy Heynderickx, Paul Koning, 
Hannu Liljemark, Claes M&aring;nsson, Rick Masters, Jason Priebe, 
Josh Rabinowitz, Douglas Rhodes, Valentijn Sessink, Kragen Sitaker, 
Stephen Thomas, and Gerald Willman.
<P>Dit document mag in elke taal worden vertaald, als je dat doet
stuur mij dan A.U.B. een kopie van de vertaling.
Konrad Hinsen 
<A HREF="mailto:hinsen@cnrs-orleans.fr">hinsen@cnrs-orleans.fr</A> 
</BODY>
</HTML>
