<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>Linux Installatie vanaf PPA-Zip drive mini-HOWTO</TITLE>


</HEAD>
<BODY>
<H1>Linux Installatie vanaf PPA-Zip drive mini-HOWTO</H1>

<H2>door Kevin Snively, <CODE>
<A HREF="mailto:k.snively@seaslug.org">k.snively@seaslug.org</A></CODE><BR>
Vertaald door: Ellen Bokhorst, <CODE>bokkie@nl.linux.org</CODE></H2>v01.04, 29 april 1998
<P><HR>
<EM>In dit document wordt beschreven hoe de Slackware Linux distributie van
Linux te installeren vanaf een parallelle poort zipdrive.</EM>
<HR>
<H2><A NAME="s1">1. Inleiding</A></H2>

<H2>1.1 Intro:</H2>

<P>De volgende methode is geschreven voor gebruik met de Slackware
Linux distributie. Het veronderstelt wat bekendheid met de installatie.
Degene die de installatie uitvoert moet ook toegang hebben tot een 
werkend Linuxsysteem van een willekeurige distributie. 
Tevens wordt uitgegaan van een doelsysteem
met 4 tot 6 meg RAM. Voor krachtiger systemen kan deze methode ook worden
gebruikt, maar waarschijnlijk lukt het je een eenvoudiger en snellere methode
te vinden. Het is niet bedoeld voor mensen die het voor de eerste keer
installeren of voor mensen voor wie Linux nieuw is. Alleen onderwerpen
specifiek voor het gebruik van een zipdrive als source media zullen hierin
worden behandeld.
<H2>1.2 Achtergrond:</H2>

<P> 
Ik heb een OUDE 486/20 slc met een 120 meg hd, 4 meg ram en een 2400 
baud modem waarop ik Linux wilde draaien. Het heeft geen cdrom station
of pcmcia connectiviteit, en het zal nooit een netwerkkaart te zien krijgen
(parallelle poortstijl). Er is niets meer over wat op deze unit kan worden
geupgrade.
<P>Linux ligt vanaf het begin voor, maar blaast ook nieuw
leven in op een aantal oudere 386'rs en 486'rs. De documentatie
zegt "386 met 2 meg ram zonder math coprocessor" maar probeer vandaag de
dag maar eens een distributie te vinden die dit doet.
Slackware kan met wat werk en een schietgebedje worden geplaatst op 
een machine met 4 meg. Het volgende systeem vermindert het werk enorm.
Een schietgebedje helpt altijd, zelfs met de beste systemen.
<P>Ik heb het volgende systeem met 3 andere laptops en een 386
desktop machine gebruikt. Waarvan de minst beste een 386'r met 4 meg ram
&amp; 60 meg HD zonder math coprocessor.  Ondanks dat dit systeem goed
werkt, zou ik er graag vergelijkbare truuken mee uithalen met Debian,
RedHat, Caldera Lite en nog wat andere populaire distributies die meer
keuze bieden aan Linux gebruikers die ik op deze wijze help.
<H2>1.3 Voordelen:</H2>

<P>Installeren vanaf cdrom of Ethernet zijn voorkeursmethoden als die
beschikbaar zijn. In die gevallen waarbij de diskette de enige keuze blijkt
te zijn, biedt de parallelle poort zipdrive talrijke voordelen.
Deze bestaan uit de betere snelheid dan een diskette, en wat minder
verwisselingen van de diskette. Bovendien vereenvoudigt de mogelijkheid
een swapbestand op de rootdisk te installeren op systemen met 6 meg ram of
minder de installatie enorm door je te besparen er &eacute;&eacute;n
op de harddisk aan te maken voor het uitvoeren van de setup. 
Bij het installeren van Slackware maakt het swapbestand installeerders
mogelijk de <B>color.gz</B> rootdisk of <B>text.gz</B> te kiezen.
De <B>color.gz</B> is niet aan te bevelen voor installaties
gebaseerd op diskettes op machines met dergelijke beperkte bronnen.
Met een zipdisk kun je ook een nooddisk produceren tijdens de initi&euml;le
installatie, door het eerste diskettestation vrij te maken. Iets dat tijdens
een normale installatie gebaseerd op diskettes niet mogelijk is op 
systemen van dit type.
<H2>1.4 Materiaal:</H2>

<P> 
Deze methode is gebruikt met Slackware de versies 3.1, tot aan 3.4 
Voor een volledige Slackware installatie zijn 2 zipdisks nodig, packages
met broncode niet meetellend wanneer deze gewenst zijn. Je hebt een
parallelle poort zipdrive &amp; kabels nodig en een 1.44 meg bootdiskette.
Pen en papier zijn optioneel voor het maken van een paar aantekeningen
tijdens de installatie.
<P>Er zijn minstens twee systemen nodig om deze installatiemethode te kunnen
gebruiken. Het eerste (host) systeem wordt gebruikt om de installatie-media
te prepareren en hierop moet een werkend Linux systeem voorkomen.
De tweede zal het doelsysteem zijn. Zodra de media is geprepareerd, kan 
het worden gebruikt om zoveel doelsystemen te installeren als je wilt.
Ik werk vanaf cdrom, maar je kunt je distributie ook vanaf het Internet
downloaden als je een verbinding hebt die daarvoor snel genoeg is.
Dit is voor mij niet praktisch.
<H2>1.5 Conventies:</H2>

<P>
<BLOCKQUOTE><CODE>
<PRE>
let (diskette)  stelt het pad en directory voor waarop
                je je 1.44 meg diskette mount.

let    (zip)    stelt het pad en de directory voor waarop
                je je zipdisk mount.

let  (cdrom)    stelt het pad en de directory voor waarop
                je je cdrom mount.

let (verx.x)    stelt de distributieversie voor die je
                gaat installeren.
</PRE>
</CODE></BLOCKQUOTE>
<P>Laat als je je diskimages download (cdrom)/slakware alsjeblieft het pad
en de directory zijn naar die images. Mijn parallelle poort zipdrive komt op
mijn systeem tevoorschijn als
<BLOCKQUOTE><CODE>
<PRE>

        /dev/sda4
</PRE>
</CODE></BLOCKQUOTE>

Ik heb het nooit als iets anders tevoorschijn zien komen,
tenzij ik er fdisk op toepas
en de partitietabel wijzig, waarbij ik meer dan &eacute;&eacute;n partitie
op de disk aanmaak. Vervolgens krijg ik altijd foutmeldingen over een
beschadigde disk als ik het probeer te gebruiken. Je kunt het echter markeren
met partitie type 83 Linux enz... als je het zonder problemen wilt gebruiken.
Je moet ook weten wat de devicenaam van je cdrom en 1.44 meg diskettestation
is. De mijne zijn
<BLOCKQUOTE><CODE>
<PRE>

       /dev/hdc     cdrom
       /dev/fd0     1.44 meg floppy
     
</PRE>
</CODE></BLOCKQUOTE>

Ik gebruik mijn devicenamen, jij de jouwe;-|
<P>Over Slackware en slakware (let op de ontbrekende c in slakware). 
Slackware is de naam van de gehele distributie en slakware is de naam
van de directory waar Patrick Volkerding de stabiele "niet experimentele
of ontwikkelaars" packages voor de installatie plaatst. Wanneer ik
over slakware schrijf, schrijf ik over de directory.
<H2>1.6 Ander leesmateriaal:</H2>

<P> 
<CODE>
<A HREF="http://sunsite.unc.edu/LDP/LDP/gs/gs.html">Linux Installation and Getting Started</A></CODE> van Matt Welsh
<P>Als je problemen ondervindt bij het benaderen van je zipdrive kijk dan
alsjeblieft in de Linux 
<CODE>
<A HREF="ftp://sunsite.unc.edu/pub/Linux/docs/HOWTO/mini/ZIP-Drive">ZIP drive mini-HOWTO</A></CODE> van Grant Guenther.
<P>Wanneer je de installatie hebt voltooid, kan ik je niet sterk genoeg
aanbevelen dat je je door de
<CODE>
<A HREF="http://sunsite.unc.edu/LDP/HOWTO/mini/Small-Memory.html">Small-Memory mini-HOWTO</A></CODE> van Todd Burgess heenwerkt.
<H3>Slackware</H3>

<P>Ik raad je ook het LOWMEM.TXT document aan van de Slackware documentatie
op je cdrom of Slackware ftp-site. Dit document beschrijft
een systeem die veel van de problemen elimineert, 
die in dat document worden beschreven.
<H2><A NAME="s2">2. Slackware</A></H2>

<H2>2.1 Aanmaken van de eerste zipdisk.</H2>

<P>
<P>1)    Koppel de zipdrive aan het hostsysteem, doe een lege zipdisk in
het station en boot het systeem in Linux
<P>2)    Log in. Je moet waarschijnlijk als root inloggen of 
de gebruiker waaronder je inlogt moet bestandssystemen kunnen beschrijven,
disks kunnen mounten en unmounten, enz....
<P>3)    Installeer een ext2fs bestandssysteem op de zipdisk met de opdracht:
<BLOCKQUOTE><CODE>
<PRE>
         /sbin/mke2fs -b 1024 /dev/sda4
 
</PRE>
</CODE></BLOCKQUOTE>

4)    Mount de zipdisk met:
<BLOCKQUOTE><CODE>
<PRE>
         mount /dev/sda4 /(zip)
 
</PRE>
</CODE></BLOCKQUOTE>

5)    Doe de cdrom in het station en mount het:
<BLOCKQUOTE><CODE>
<PRE>
         mount /dev/hdc /(cdrom)
 
</PRE>
</CODE></BLOCKQUOTE>

6)    Maak een directory aan om de slakware diskimages in te installeren:
<BLOCKQUOTE><CODE>
<PRE>
         mkdir /(zip)/slakware
 
</PRE>
</CODE></BLOCKQUOTE>

7)    Maak een beschrijfbare ( niet op een zip disk ) tijdelijke directory 
aan op je hoofddisk om in te werken. 
Ik stel voor:
<BLOCKQUOTE><CODE>
<PRE>
         mkdir /root/slakware/(verx.x)
 
</PRE>
</CODE></BLOCKQUOTE>

8)
<A NAME="In-8"></A>     Kopieer de rootdiskimage naar de hierboven 
genoemde directory:
<BLOCKQUOTE><CODE>
<PRE>
         cp /(cdrom)/rootdsks/text.gz /root/slakware/(verx.x)/
 
</PRE>
</CODE></BLOCKQUOTE>

9)    Wijzig van directory naar die directory waar het rootdisk image
naartoe werd gekopieerd en decomprimeer het met de opdrachten:
<BLOCKQUOTE><CODE>
<PRE>
         cd /root/slakware/(verx.x)
         gunzip text.gz
</PRE>
</CODE></BLOCKQUOTE>

10)   Installeer een 1.44 meg diskette met een dos of ext2fs bestandssysteem
erop in de drive en kopieer er de rootdiskimage deze keer met de opdracht
dd naartoe:
<BLOCKQUOTE><CODE>
<PRE>
         dd if=text of=/dev/fd0
 
</PRE>
</CODE></BLOCKQUOTE>

11)   Mount de 1.44 meg diskette met de opdracht:
<BLOCKQUOTE><CODE>
<PRE>
         mount /dev/fd0 /(floppy)
 
</PRE>
</CODE></BLOCKQUOTE>

12)   Kopieer de rootdisk-image naar de zipdisk:
<BLOCKQUOTE><CODE>
<PRE>
         cp -dpR /(floppy)/* /(zip)/
</PRE>
</CODE></BLOCKQUOTE>

13)   Om het installatieproces later te vereenvoudigen, maken we
een swapbestand op de zipdisk aan van ongeveer 8 meg, met:
<BLOCKQUOTE><CODE>
<PRE>
         dd if=/dev/zero of=/(zip)/swap bs=1024 count=8208
</PRE>
</CODE></BLOCKQUOTE>

14)    Initialiseer het swapbestand met:
<BLOCKQUOTE><CODE>
<PRE>
         /sbin/mkswap /(zip)/swap 8208
</PRE>
</CODE></BLOCKQUOTE>

15)    Vervolgens moet je met je favoriete teksteditor het bestand
<B>/(zip)/etc/rc</B>  wijzigen en na de regel <B>/bin/mount 
-av -t nonfs</B> een nieuwe regel invoegen
<BLOCKQUOTE><CODE>
<PRE>
         /sbin/swapon /swap
</PRE>
</CODE></BLOCKQUOTE>

16)   Kopieer de diskimages naar de zipdisk:
<BLOCKQUOTE><CODE>
<PRE>
         cp -r /(cdrom)/slakware/[a-ty]* /(zip)/slakware/ &amp;
</PRE>
</CODE></BLOCKQUOTE>

neem de vierkante haken exact [a-ty]* exactly zoals hierboven getoond.
Het &amp; teken
aan het einde van de regel maakt dat deze opdracht in de achtergrond wordt
uitgevoerd. Het duurt ongeveer 20 min eer het voltooid is. Gebruik deze tijd
voor wat koffie en het lezen van meer HOWTO's.
<P>17)  Externe zipdrives hebben twee leds--de mijne zijn groen en geel;
de interne drives schijnen er slechts &eacute;&eacute;n te hebben. 
Toen mijn zipdisk klaar was met het ontvangen van de informatie, ging het
gele lichtje uit en bleef ik achter met slechts het groene stroomlichtje aan.
Bij interne drives zal het enkele "status?" lichtje uitgaan.
<P>Het is nu tijd de diskette en zipdisks voor te bereiden op de verwijdering
uit de drives door ze te unmounten:
<BLOCKQUOTE><CODE>
<PRE>
         cd
         umount /dev/fd0
         umount /dev/sda4
</PRE>
</CODE></BLOCKQUOTE>
<P>18)  Het zal er voor later alleen maar makkelijker op worden als we,
voordat we het proberen te gebruiken,
het bestandssysteem van de rootdisk controleren met de opdracht:
<BLOCKQUOTE><CODE>
<PRE>
         /sbin/e2fsck -f /dev/sda4
</PRE>
</CODE></BLOCKQUOTE>
<P>Wanneer er geen diskactiviteit meer is en er geen fouten zijn opgetreden,
kun je de zipdisk uit de drive verwijderen en het labelen met Slackware
rootdisk. Met potlood schrijf ik er ook het versienummer op. 
<H2>2.2 Aanmaken van de tweede zipdisk.</H2>

<P>Als het X-window systeem zal worden ge&iuml;nstalleerd of als je 
&eacute;&eacute;n van de andere van te voren gebouwde kernels nodig
zal hebben, dan is het er nu de tijd voor de 2e zipdisk voor te bereiden.
<P>
<P>x1)  Doe disk 2 in de zipdrive. Ik vind het prettig om ook op deze
disk een ext2fs bestandssysteem weg te schrijven, 
maar als het een M$ Dos bestandssysteem bevat,
zal ook dat werken. Ik gebruik de pijltjestoets naar boven op mijn toetsenbord
om eerder gebruikte opdrachten vanuit mijn historybestand terug te halen,
omdat ik een beetje lui ben, maar als je de opdracht opnieuw in wilt tikken,
gebruik je de instructies 3), 4), en 6) van hierboven. 
<P>x2)  Kopieer de X11R6 "X Window" packages naar zip
<BLOCKQUOTE><CODE>
<PRE>
         cp -r /(cdrom)/slakware/x* /(zip)/slakware/ &amp;
</PRE>
</CODE></BLOCKQUOTE>

wederom in de achtergrond. Dit zal ongeveer de helft van de tijd in beslag
nemen als de hoeveelheid in stap 9). 
Als je systeem traag was dan zal dit weer zo zijn.
Meer koffie en het lezen van HOWTO's.
<P>
<P>x3)  Er is ook nog ruimte op deze disk voor de aangepaste kerneldirectory.
Het is superieur er een te installeren die zo goed mogelijk tegemoet komt 
aan wat nodig is voor het systeem in combinatie met degene die nodig is
om de zipdrive te benaderen. Maak deze kernel de systeemdefault.
We zullen er nu een directory voor aanmaken
en er dan de informatie naar toe kopi&euml;ren:
<BLOCKQUOTE><CODE>
<PRE>

         mkdir /(zip)/kernels
         cp -r /(cdrom)/kernels/* /(zip)/kernels/ &amp;
</PRE>
</CODE></BLOCKQUOTE>

Dit kost nog eens 10 of 15 minuten. Nog zin in de oude koffie? 
Meer Linux documentatie lezen?
<P>x4)  Wanneer de diskactiviteit stopt, unmount je de disk en past er fsck
op toe:
<BLOCKQUOTE><CODE>
<PRE>
         umount /dev/sda4
         /sbin/e2fsck -f /dev/sda4
</PRE>
</CODE></BLOCKQUOTE>

x5)  Wanneer e2fsck klaar is met de disk en de opdrachtprompt op het scherm
terugkeert, werp je de disk eruit en label je het.
<H2><A NAME="boot"></A> 2.3 Aanmaken van de bootdiskette.</H2>

<P> 
b1)  Nu maak ik een 1.44 meg bootdisk aan. Gebruik het
<B>/(cdrom)/bootdsks.144/iomega.s</B> image. Doe een nieuwe 1.44 meg 
diskette in het juiste station. De opdracht om de disk aan te maken is:
<BLOCKQUOTE><CODE>
<PRE>
         dd if=/(cdrom)/bootdsks.144/iomega.s of=/dev/fd0
</PRE>
</CODE></BLOCKQUOTE>
<P>b2)  Controleer de bestandssystemen van de bootdisk:
<BLOCKQUOTE><CODE>
<PRE>
         /sbin/e2fsck -f /dev/fd0
</PRE>
</CODE></BLOCKQUOTE>

Wanneer de diskactiviteit ophoudt en er geen fouten zijn opgetreden, dan
mg je alle disks verwijderen, de bootdiskette schrijfbeveiligen en
het labelen inclusief het versienummer.
<H2><A NAME="s3">3. De installatie:</A></H2>

<P>Na alles op de doelmachine te hebben aangesloten en de zipdisk in
het station te hebben gedaan, boot ik de machine met de van toepassing
zijnde bootdisk. Voor het inloggen is het een goed idee de in Linux 
ingebouwde scroll back feature te gebruiken en te controleren of alle
hardware juist werd herkend. Houd hiervoor de shift-toets ingedrukt
en gebruik de page up en page down toetsen zover van toepassing.
Dat je een loginprompt krijgt betekent gewoonlijk dat de foutmeldingen
die je tijdens het booten kreeg niet al te ernstig zijn.
<H2>3.1 Ronde 1.</H2>

<P>Slackware zal een aantal instructies presenteren. Lees ze alsjeblieft
zorgvuldig door. Login als root en maak met fdisk zonodig
root en swap partities op de doelschijf.
Herstart de machine als je fdisk uitvoerde an lees nogmaals
<B>zorgvuldig</B> de instructies op het scherm als die er zijn, en
log dan in als root.
<P>Zelfs met machines met slechts 4 meg ram, hoef je geen swappartitie aan
te maken totdat het setupprogramma aangeeft dit te doen.
We hebben reeds swap actief op de zipdisk. Voer het Slackware setupprogramma
uit:
<BLOCKQUOTE><CODE>
<PRE>
          setup
</PRE>
</CODE></BLOCKQUOTE>

Lees ZORGVULDIG de instructies waarin de menu's voorzien en volg ze op.
Het eerste dat de setup zal willen doen is op je harddisk de swappartitie
aanmaken en initialiseren. Dit is ok ondanks de
vervelende waarschuwingen en ze zullen niet van invloed zijn op het
swapbestand op de zipdrive.
<P>Je wilt vast niet dat /dev/sda4 automatisch zal worden gemount als
hierover vragen opkomen in de menu's. Voeg het niet toe tenzij
deze zipdrive full-time aan de doelmachine is toegewijd.
Wanneer je het menu krijgt waarin wordt gevraagd naar de source
van de installatiemedia, selecteer je nummer 4. 
"Install from a premounted directory".
Het volgende scherm zal vragen naar de naam, dit is /slakware.
<P>Ik raad je aan ditmaal alleen de "a" diskset te installeren. 
De installatie loopt vast als de persoon die de packages selecteert te
gretig wordt en de disk vol raakt voordat lilo is weggeschreven en de 
kernel is ge&iuml;nstalleerd. Tijdens de basisinstallatie installeerde
ik alleen de kernel vanaf de bootdisk. Er zijn vanaf hier 
relatief weinig keuzes te maken en de Slackware documentatie van de
cdrom of de ftp-site kan je meer bieden dan ik hier kan.
<P>Laat de zipdrive en disk waar ze zijn als de initi&euml;le installatie
compleet is. Verwijder de diskette pas wanneer je de melding krijgt dit te doen
en reboot.  
<H2>3.2 Ronde 2.</H2>

<P>Log na de reboot van het systeem in als root en mount de zipdisk weer:
<BLOCKQUOTE><CODE>
<PRE>
          mount /dev/sda4 /mnt
 
</PRE>
</CODE></BLOCKQUOTE>

Controleer de beschikbare diskruimte:
<BLOCKQUOTE><CODE>
<PRE>
          df
 
</PRE>
</CODE></BLOCKQUOTE>

Start setup nogmaals op vanaf je nieuwe systeem:
<BLOCKQUOTE><CODE>
<PRE>
          setup
 
</PRE>
</CODE></BLOCKQUOTE>

Kies "s" SOURCE vanuit het menu en druk op de Enter-toets.
Selecteer itemnummer 4. "Install from a premounted directory" en druk
nogmaals op de Enter-toets.
<P>Vul de naam van de directory in. Gebruik ditmaal:
<BLOCKQUOTE><CODE>
<PRE>
          /mnt/slakware
 
</PRE>
</CODE></BLOCKQUOTE>

Kies de packages die je wilt of nodig hebt. Ze zijn allen beschikbaar, behalve
die beginnen met "x". Wanneer je klaar bent met het installeren van de
packages vanaf deze disk verlaat je de setup en geef je de opdracht:
<BLOCKQUOTE><CODE>
<PRE>
          umount /dev/sda4
</PRE>
</CODE></BLOCKQUOTE>
<P>Je kunt de disk nu verwijderen en de 2e zipdisk erin doen als X zal
worden ge&iuml;nstalleerd en de setup nogmaals doorlopen, ditmaal zullen
alleen packages beginnend met X beschikbaar zijn. Als je een aangepaste
kernel van de vooraf samengestelde kernels gaat installeren, dan kun je dit
ook doen terwijl de 2e zipdisk is ge&iuml;nstalleerd.
<H2>3.3 Library problemen</H2>

<P>Soms heb ik moeite met de links voor de library's op wel de root zipdisk
als of de uiteindelijke doelmachine.
Hier zijn twee mogelijke correcties voor.
<P>Fix 1) Als het systeem boot tot aan een command prompt en je kunt
als root in single user modus inloggen, probeer dan de opdracht:
<BLOCKQUOTE><CODE>
<PRE>
          ldconfig
</PRE>
</CODE></BLOCKQUOTE>

Als het allemaal wel meevalt en deze opdracht gewoon kan worden uitgevoerd,
let dan op aan library gerelateerde foutmeldingen. Als die er niet zijn
dan is het weer in orde.
<P>Correctie 2) Als <B>ldconfig</B> niets uithaalt dan zul je de
root diskette weer nodig hebben en moet je de bestanden van deze
diskette opnieuw kopi&euml;ren zoals in instructie
<A HREF="#In-8">8)</A> tot 12) of Linux opnieuw naar het
doelsysteem moeten installeren.
<H2><A NAME="s4">4. Dank je</A></H2>

<P>Deze mini-HOWTO je bijgebracht door de letters G. N. en U. en het
Linux documentatie project.
<P>Met speciale dank aan Dr. Randolph Bentson wiens toewijding aan Linux
me inspireerde om iets terug te geven aan de mensen die ons het
<B>ENIGE ECHTE BESTURINGSSYSTEEM</B> gaven.
<BLOCKQUOTE><CODE>
<PRE>
    Ik hoop dat iemand hiermee geholpen is.
 
    Sincerely
 
    Kevin Snively
    P.O. Box 1013
    Everett Wa. 98206-1013
    USA
</PRE>
</CODE></BLOCKQUOTE>
<P><CODE>
<A HREF="mailto:k.snively@seaslug.org">k.snively@seaslug.org</A></CODE>
<BLOCKQUOTE><CODE>
<PRE>
    root@aldrovanda
</PRE>
</CODE></BLOCKQUOTE>
</BODY>
</HTML>
