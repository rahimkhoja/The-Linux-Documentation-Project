<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>Linux Touch Screen HOWTO</TITLE>


</HEAD>
<BODY>
<H1>Linux Touch Screen HOWTO</H1>

<H2>Christoph Baumann, cgb@debian.org,<BR>
Vertaald door: Ellen Bokhorst, bokkie@nl.linux.org</H2>v3.1, 06-11-2002
<P><HR>
<EM>In dit document wordt beschreven hoe een aanraakscherm als invoerapparaat
onder XFree86 in te stellen. Aangezien de auteur slechts de kans kreeg te
werken met apparaten van EloTouch(R) en MicroTouch(R) is deze HOWTO nogal
specifiek op deze apparaten gericht. De voorbeelden gegeven in deze
HOWTO concentreren zich rondom apparaten die op de seri&euml;le poorten
worden aangesloten, d.w.z. /dev/ttyS0 of /dev/ttyS1.
(Informatie over USB-devices wordt gewaardeerd!)
(c) 2002 door Christoph Baumann.
Op dit document is de GNU Free Documentation License van toepassing.</EM>
<HR>
<H2><A NAME="s1">1. Hoe het device te configureren</A></H2>

<P>Aanraakschermen worden geconfigureerd in de Xinput section in het XF86Config
bestand (meestal in /etc/X11/XF86Config of /etc/XF86Config).
Verifieer als eerste dat de devicedrivermodules bestaan.  Ze zijn te vinden
in /usr/X11R6/lib/modules/ (de modules voor de bovengenoemde devices zijn
xf86Elo.so en xf86MuTouch.so). Kijk nu eens in XF86Config.
Er zou zich een section in moeten bevinden dat er ongeveer zo uitziet;
<P>
<PRE>
Section "Files"
...
ModulePath "/usr/X11R6/lib/modules"
...
EndSection
</PRE>
<P>Om de module geladen te krijgen door de X-server, moet er een section 
voorkomen als de volgende:
<P>
<PRE>
Section "Module"
Load "xf86Elo.so"
EndSection
</PRE>
<P>Nu het lastiger deel. X heeft een aantal parameters over het device nodig.
De section hiervoor ziet er zo uit (zie "man XF86Config" voor meer details):
<P>
<PRE>
Section "Xinput"
 SubSection "Elographics"  
#the entry for a MicroTouch device would be SubSection "MicrotouchFinger"
  Port "/dev/ttyS1" # voor een device aangesloten op de seri&euml;le poort 2
  DeviceName "TouchScreen" # zou iedere ondubbelzinnige naam kunnen zijn
  MinimumXPosition 300
  MaximumXPosition 3700
  MinimumYPosition 300
  MaximumYPosition 3700
  UntouchDelay 10 # niet ondersteund door MuTouch
  ReportDelay 10  # niet ondersteund door MuTouch
  AlwaysCore # activeert het device bij het opstarten
 EndSubSection
EndSection
</PRE>
<P>De waarden voor de regels MinimumXPosition enz. zijn natuurlijk specifiek
voor de setup van de hardware (d.w.z. hangt af van de positie van het
aanraakscherm relatief t.o.v. de monitor). De waarden bepalen waar de
punten (0,0) en (xmax,ymax) op je monitor, zoals 1024x768) zijn ingedeeld
op het aanraakscherm. De devicedriver leest deze waarden in en interpoleert 
de andere co&ouml;rdinaten. Ter illustratie:
<P>
<PRE>
 --------------aanraakschermgebied---------------
 I                                              I
 I  ########zichtbaar monitor gebied##########  I
 I  #x                                       #  I
 I  # (0,0)                                  #  I
 I  # (MinimumXPosition,MinimumYPosition)    #  I
 I  #                                        #  I
 I  #                                        #  I
 I  #                                        #  I
 I  #                                        #  I
 I  #                                        #  I
 I  #                                        #  I
 I  #                                        #  I
 I  #     (MaximumXPosition,MaximumYPosition)#  I
 I  #                             (xmax,ymax)#  I
 I  #                                       x#  I
 I  ##########################################  I
 I                                              I
 ------------------------------------------------
</PRE>
<P>Deze indeling kan worden verkregen door uitproberen of door het lezen van
de uitvoer van het device (hiervoor is wat seri&euml;le poortprogrammering
nodig, zie "De Linux Serial Programming HOWTO"). Voor de typen EloTouch 
en MicroTouch bestaat een rudimentair calibratie hulpmiddel (geschreven
door de auteur van dit document, welke is te vinden op
<A HREF="ftp://metalab.unc.edu/pub/linux/X11/xutils/touchcal-0.1.tar.gz">ftp://metalab.unc.edu/pub/linux/X11/xutils/touchcal-0.1.tar.gz</A>).
<H2><A NAME="s2">2. Activeren van het device</A></H2>

<P>Typ na het opstarten van X in een Xterminal de opdracht
<CODE>xsetpointer &lt;devicename&gt;</CODE>
<P>waarbij <CODE>&lt;devicename&gt;</CODE> de naam is in XF86Config die is
gedefinieerd met de regel
<CODE>DeviceName "....."</CODE>, in dit voorbeeld zou dit TouchScreen zijn.
<P>Om het device bij het opstarten te activeren gebruik je de optie
AlwaysCore in de touch screen section (zie hierboven)
<H2><A NAME="s3">3. Aanraakscherm en muis parallel gebruiken</A></H2>

<P>Om het aanraakscherm en een muis parallel te gebruiken, moet je de 
specificaties van de muis in de Xinput-section invullen. Deze definities
moeten hetzelfde zijn als in de Pointer-section. Het volgende voorbeeld
dient voor een PS/2-muis:
<PRE>
Section "Xinput" 
   SubSection "Mouse" 
      Protocol "PS/2" 
      Port "/dev/mouse" #kan ook /dev/psaux zijn
      DeviceName "Mouse" 
      AlwaysCore 
   EndSubSection
...
EndSection 
</PRE>

Verscheidene mensen wezen hierop, vooral het gebruik van de optie
AlwaysCore. Bedankt allemaal.
<H2><A NAME="s4">4. Configuratie onder XFree86 4</A></H2>

<P>(van Lee Monamy)
<P>Voorbeeld XF86Config-4 voor een ELO aanraakscherm:
<P>
<PRE>
Section "InputDevice"
        Identifier "ELO touchscreen"
        Driver "elographics"
        Option  "Device"        "/dev/ttyS0"
        Option  "MinimumXPosition"      "300"
        Option  "MaximumXPosition"      "3700"
        Option  "MinimumYPosition"      "300"
        Option  "MaximumYPosition"      "3700"
        Option  "UntouchDelay"  "10"
        Option  "ReportDelay"   "10"
        Option  "SendCoreEvents"        "yes"
EndSection
</PRE>
<P>Opmerkelijke verschillen hiertussen en de configuratie van versie 3 zijn
dat je een Device specificeert, *geen* "Port", anders krijg je een foutmelding.
Bovendien is AlwaysCore van v3 vervangen door SendCoreEvents.
<P>Je moet ook de ServerLayout section toevoegen, ondanks dat X dan wellicht
komt met:
"(II) XINPUT: Adding extended input device "TOUCHSCREEN" (type:
Elographics Touch Screen)"
<P>
<PRE>
Section "ServerLayout"
        Identifier      "Default Layout"
        Screen  "Default Screen"
        InputDevice "Generic Keyboard"
...
        InputDevice "ELO touchscreen"
EndSection
</PRE>
<H2>4.1 Een ander configuratievoorbeeld</H2>

<P>van Dirk Mueller 
(voor Microtouch SMT3 Series):
<P>
<PRE>
Section "InputDevice"
        Identifier  "MicroTouchFinger"
        Driver      "mutouch"
        Option      "Type" "finger"
        Option      "Device" "/dev/ttyS0"
        Option      "ScreenNo" "0"
        Option      "MinimumXPosition" "0"
        Option      "MaximumXPosition" "16383"
        Option      "MinimumYPosition" "0"
        Option      "MaximumYPosition" "16383"
EndSection
</PRE>
<P>De Optie "Type" kan "finger" zijn of "stylus"
Aangezien Microtouch werd opgekocht door 3M-Touch, zijn de bronnen te
vinden op
<A HREF="http://www.3M.com/3MTouchSystems/downloads/legacy.jhtml#Linux">http://www.3M.com/3MTouchSystems/downloads/legacy.jhtml#Linux</A><H2>4.2 Addendum</H2>

<P>Volgens Wong Yeow Sen zijn de namen van configuratie-opties in XFree86 4.2
gewijzigd (tenminste bij Red Hat 7.3). Probeer het volgende als het erop
lijkt dat je calibratiewaarden niet worden verwerkt:
<P>
<PRE>
...
        Option  "MinX"      "100"
        Option  "MaxX"      "4000"
        Option  "MinY"      "100"
        Option  "MaxY"      "4000"
...
</PRE>
<H2><A NAME="s5">5. Aanraakschermen op Fujitsu LifeBooks</A></H2>

<P>(van Joerg Hau)
<P>Informatie over deze devices is hier te vinden:
<P>"...
<P>Harald Hoyer's Linux Touch Panel Drivers voor de Fujitsu Lifebooks
B112/B142/B2130, 
<A HREF="http://parzelle.de/Linux/Lifebook/">http://parzelle.de/Linux/Lifebook/</A>. Helaas gaat dit alleen
over XFree 3.x en het schijnt dat deze informatie nu "statisch" (uitgedoofd?)
is.
<P>Kenan Esau's Lifebook Series B Touchscreen driver, wat de aanpassing
is van Harald's driver voor XFree 4.x.
<A HREF="http://www.conan.de/lifebook/lifebook.html">http://www.conan.de/lifebook/lifebook.html</A>.
<P>Ik [Joerg Hau] heb Kenan's driver op mijn Fujitsu LifeBook B142 
gebruikt (beschreven op
<A HREF="http://www.mysunrise.ch/users/joerg.hau/linux/b142.htm">http://www.mysunrise.ch/users/joerg.hau/linux/b142.htm</A>), 
en het werkt als een tierelier.
<P>..."
<H2><A NAME="s6">6. Aanbevolen leesstof</A></H2>

<P>
<UL>
<LI>Manpage voor XF86Config</LI>
<LI>
<A HREF="http://www.elotouch.com/support/linux.asp">http://www.elotouch.com/Support/linux.asp</A></LI>
<LI>
<A HREF="http://www.3M.com/3MTouchSystems/downloads/legacy.jhtml#Linux">http://www.3M.com/3MTouchSystems/downloads/legacy.jhtml#Linux</A></LI>
<LI>
<A HREF="http://www.hof-berlin.de/tablet/tablet.html">http://www.hof-berlin.de/tablet/tablet.html</A> (Met dank aan
Christer Olofsson voor het opsturen van deze URL)</LI>
<LI>De handleiding die bij je aanraakscherm wordt geleverd :-)</LI>
</UL>
</BODY>
</HTML>
