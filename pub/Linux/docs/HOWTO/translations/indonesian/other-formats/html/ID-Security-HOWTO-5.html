<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.7">
 <TITLE>Linux Security HOWTO versi Bahasa Indonesia: Keamanan File dan Sistem File</TITLE>
 <LINK HREF="ID-Security-HOWTO-6.html" REL=next>
 <LINK HREF="ID-Security-HOWTO-4.html" REL=previous>
 <LINK HREF="ID-Security-HOWTO.html#toc5" REL=contents>
</HEAD>
<BODY>
<A HREF="ID-Security-HOWTO-6.html">Next</A>
<A HREF="ID-Security-HOWTO-4.html">Previous</A>
<A HREF="ID-Security-HOWTO.html#toc5">Contents</A>
<HR>
<H2><A NAME="s5">5. Keamanan File dan Sistem File</A></H2>

<P>Beberapa menit persiapan dan perencanaan sebelum menaruh sistem anda online dapat membantu melindungi sistem anda, dan data yang disimpan.
<UL>
<LI> Tidak ada alasan bagi direktori home pemakai agar memungkinkan menjalankan program SUID/SGID dari sana. Gunakan opsi "nosuid" dalam /etc/fstab untuk partisi yang dapat ditulis oleh orang selain root. Anda mungkin ingin menggunakan "nodev" dan "noexec" di partisi home pemakai, juga di /var, yang melarang eksekusi program, dan penciptaan device karakter atau blok, yang sebenarnya tidak perlu.</LI>
<LI> Jika anda mengekspor sistem file menggunakan NFS, pastikan mengkonfigurasi /etc/exports dengan akses yang seketat mungkin. Artinya tidak menggunakan wildcard, tidak membolehkan root akses menulis, dan melakukan mount read-only jika mungkin.</LI>
<LI> Konfigurasi umask penciptaan file pemakai anda seketat mungkin. Setting yang biasa digunakan adalah 022, 033, dan yang paling ketat adalah 077, dan ditambahkan ke /etc/profile.</LI>
<LI> Set limit sistem file. Anda dapat mengendalikan limit tiap pemakai menggunakan module PAM dan /etc/pam.d/limits.conf. Sebagai contoh, limit untuk kelompok "users" mungkin tampak sebagai berikut :
<BLOCKQUOTE><CODE>
<PRE>
                       @users     hard  core    0
                       @users     hard  nproc   50
                       @users     hard  rss     5000
</PRE>
</CODE></BLOCKQUOTE>

Perintah ini berarti melarang penciptaan file core, membatasi jumlah proses hingga 50, dan membatasi penggunaan memori tiap user hingga 5M.</LI>
<LI> File /var/log/wtmp dan /var/run/utmp berisi catatan login seluruh pemakai sistem anda. Integritasnya harus dipelihara karena dapat digunakan untuk menentukan kapan dan dari mana seorang pemakai (atau penyusup potensial) memasuki sistem anda. File-file ini harus memiliki permisi 644, tanpa mempengaruhi operasi sistem normal.</LI>
<LI> Bit immutable dapat digunakan untuk mencegah penghapusan atau penimpahan sebuah file yang harus dilindungi tanpa sengaja. Juga dapat mencegah seseorang menciptakan link simbolik ke file ini, yang telah merupakan sumber penyerangan melibatkan penghapusan /etc/passwd atau /etc/shadow. Lihat man page chattr(1) untuk informasi bit immutable.</LI>
<LI> File-file SUID dan SGID pada sistem anda adalah risiko keamanan potensial, dan harus diawasi dengan baik. Oleh karena program-program ini memberi ijin khusus bagi pemakai yang mengeksekusinya, maka perlu dipastikan bahwa program yang tidak aman tidak diinstal. Trik favorit cracker adalah mengeksploitasi program SUID "root", lalu meninggalkan program SUID sebagai backdoor untuk masuk di saat lain, meski lubang yang asli telah ditutup.

Carilah seluruh program SUID/SGID di sistem anda, dan catatlah, sehingga anda mengerti setiap perubahan yang dapat mengindikasikan penyusup potensial. Gunakan perintah berikut untuk mencari seluruh program SUID/SGID di sistem anda:
<BLOCKQUOTE><CODE>
<HR>
<PRE>
root#  find / -type f \( -perm -04000 -o -perm -02000 \)
</PRE>
<HR>
</CODE></BLOCKQUOTE>


Anda dapat menghapus ijin SUID atau SGID pada program yang dicurigai menggunakan chmod(1), lalu rubah kembali jika anda rasa perlu.</LI>
<LI> File-file world-writable, utamanya file sistem, dapat menjadi lubang keamanan jika seorang cracker memperoleh akses ke sistem anda dan memodifikasinya. Selain itu direktori world-writable berbahaya, karena memungkinkan cracker menambah atau menghapus file sesuai keinginannya. Untuk mencari seluruh file world-writable di sistem anda, gunakan perintah berikut:
<BLOCKQUOTE><CODE>
<HR>
<PRE>
root# find / -perm -2 -print
</PRE>
<HR>
</CODE></BLOCKQUOTE>

dan pastikan anda paham mengapa file tersebut world-writable. Dalam operasi normal, terdapat beberapa file writable, termasuk beberapa dari /dev, dan link simbolik.</LI>
<LI> File-file yang tidak ada pemiliknya juga dapat menjadi indikasi penyusup telah mengakses sistem anda. Anda dapat menemukan file-file di sistem anda yang tidak memiliki pemilik, atau milik suatu kelompok dengan perintah :
<BLOCKQUOTE><CODE>
<HR>
<PRE>
root# find / -nouser -o -nogroup -print
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</LI>
<LI> Mencari file .rhosts seharusnya menjadi bagian tugas reguler anda sebagai sistem administrator, karena file ini tidak diijinkan ada di sistem anda. Ingat, cracker hanya perlu satu rekening tidak aman untuk secara potensial memperolah akses ke seluruh jaringan anda. Anda dapat melihat seluruh file .rhosts di sistem anda dengan perintah :
<BLOCKQUOTE><CODE>
<HR>
<PRE>
root# find /home -name .rhosts -print
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</LI>
<LI> Akhirnya, sebelum merubah permisi di sembarang sistem file, pastikan anda paham apa yang anda lakukan. Jangan pernah merubah permisi suatu file hanya karena ini tampaknya merupakan cara termudah menyelesaikan sesuatu. Selalu tentukan mengapa file memiliki permisi tersebut sebelum merubahnya.</LI>
</UL>
 
<P>
<H2><A NAME="ss5.1">5.1 Setting Umask</A>
</H2>

<P>Perintah umask dapat digunakan untuk menentukan mode penciptaan file baku di sistem anda. Ia merupakan komplemen oktal mode file yang diinginkan. Jika file diciptakan tanpa mengindahkan setting permisi, pemakai secara tidak sengaja dapat memberi permisi membaca atau menulis kepada seseorang yang tidak seharusnya memiliki permisi ini. Umumnya setting umask mencakup 022, 027, dan 077, yang paling terbatas. Normalnya umask diset dalam /etc/profile, sehingga berlaku untuk semua pemakai sistem. Sebagai contoh, anda mungkin memiliki sebuah baris yang tampak seperti berikut:
<BLOCKQUOTE><CODE>
<HR>
<PRE>
                       # Set the user's default umask
                       umask 033
</PRE>
<HR>
</CODE></BLOCKQUOTE>
<P>Pastikan untuk membuat umask root 077, yang akan meniadakan permisi membaca, menulis, dan mengeksekusi bagi pemakai lain, kecuali dirubah secara eksplisit menggunakan chmod(1).
<P>Jika anda menggunakan RedHat, dan mengikuti skema penciptaan ID pemakai dan kelompok (User Private Groups), hanya perlu menggunakan 002 sebagai umask. Hal ini disebabkan kenyataan bahwa konfigurasi baku adalah satu orang untuk satu kelompok.
<P>
<H2><A NAME="ss5.2">5.2 Permisi File</A>
</H2>

<P>Penting untuk memastikan bahwa file sistem anda tidak terbuka untuk pengeditan oleh pemakai dan grup yang tidak seharusnya melakukan pemeliharaan sistem semacam itu.
<P>UNIX membedakan kendali akses pada file dan direktori berdasarkan tiga karakteristik: pemilik (<CODE>owner</CODE>), grup, dan yang lain (<CODE>other</CODE>). Selalu terdapat satu pemilik, sejumlah anggota grup, dan setiap orang lain.
<P>Penjelasan singkat permisi UNIX:
<P>Kepemilikan - Pemakai dan grup mana saja yang memperoleh kendali atas setting permisi node dan node induk.
<P>Permisi - Bit yang mampu diset atau direset untuk memungkinkan beberapa tipe akses tertentu terhadapnya. Permisi direktori mungkin memiliki arti berbeda dengan permisi set yang sama untuk file.
<P>Read (Baca):
<UL>
<LI> Mampu melihat isi file.</LI>
<LI> Mampu membaca direktori.</LI>
</UL>
<P>Write (Menulis):
<UL>
<LI> Mampu menambah atau merubah file.</LI>
<LI> Mampu menghapus atau memindah file dalam sebuah direktori.</LI>
</UL>
<P>Execute (Eksekusi):
<UL>
<LI> Mampu menjalankan program biner atau script shell.</LI>
<LI> Mampu mencari dalam sebuah direktori, dikombinasikan dengan permisi read.</LI>
</UL>
<P>Menyimpan atribut teks: (untuk direktori)
Bit sticky juga memiliki arti lain ketika diaplikasikan pada direktori. Jika bit sticky diset pada direktori, maka seorang pemakai hanya boleh menghapus file yang dimiliki atau diberi ijin menulis secara eksplisit, walaupun ia memiliki akses ke direktori. Hal ini dirancang untuk direktori seperti /tmp, yang bersifat world-writable, tetapi tidak diinginkan setiap pemakai dapat menghapus file sesukanya. Bit sticky dilihat sebagai sebuah 't' dalam daftar direktori.
<P>Atribut SUID: (untuk file)
Atribut ini menggambarkan permisi set ID pemakai atas file. Ketika mode akses permisi set ID diset dalam permisi pemilik, dan file adalah eksekutabel, proses yang menjalankannya diberi ijin akses kepada sumber daya sistem berdasarkan pemakai yang membuat proses. Inilah penyebab eksploitasi 'buffer overflow'.
<P>Atribut SGID: (untuk file)
Jika diset dalam permisi grup, bit ini mengendalikan status "set group id" file. Ia berlaku serupa dengan SUID, kecuali grup terpengaruh. File harus eksekutabel agar dapat berlaku.
<P>Atribut SGID: (untuk direktori)
Jika anda menset bit SGID pada direktori (dengan "chmod g+s direktori"), file yang tercipta di direktori akan memiliki grup yang sama dengan grup direktori.
<P>Anda - Pemilik file
<P>Grup - Grup anda berada.
<P>Orang lain - Setiap orang yang ada di sistem yang bukan pemilik atau anggota grup.
<P>Contoh File :
<BLOCKQUOTE><CODE>
<PRE>
               -rw-r--r--  1 kevin  users         114 Aug 28  1997 .zlogin
               1st bit - direktori?               (tidak)
                2nd bit - baca oleh pemilik?       (ya, oleh kevin)
                 3rd bit - tulis oleh pemilik?      (ya, oleh kevin)
                  4th bit - eksekusi oleh pemilik?   (tidak)
                   5th bit - baca oleh grup?          (ya, oleh users)
                    6th bit - tulis oleh grup?         (tidak)
                     7th bit - eksekusi oleh grup?      (tidak)
                      8th bit - baca oleh tiap orang?    (ya, o/ tiap orang)
                       9th bit - tulis oleh tiap orang?   (tidak)
                        10th bit - eksekusi o/ tiap orang? (tidak)
</PRE>
</CODE></BLOCKQUOTE>
<P>Baris berikut merupakan contoh set minimum permisi yang dibutuhkan untuk melakukan akses yang dideskripsikan. Anda mungkin ingin memberi permisi lebih daripada yang ditampilkan, tetapi ini akan mendeskripsikan apa yang dilakukan oleh permisi minimum :
<BLOCKQUOTE><CODE>
<PRE>
      -r--------  Membolehkan akses baca file oleh pemilik
      --w-------  Membolehkan pemilik untuk modifikasi/hapus file
      ---x------  Pemilik dapat mengeksekusi program, tapi bukan shell script,
                  yang masih perlu ijin baca
      ---s------  Akan mengeksekusi dengan ID pemakai efektif = pemilik
      -------s--  Akan mengeksekusi dengan ID pemakai efektif = grup
      -rw------T  Tdk ada update "last modified time". Biasanya untuk file swap
      ---t------  Tidak ada efek. (dulunya bit sticky)
</PRE>
</CODE></BLOCKQUOTE>
<P>Contoh direktori:
<BLOCKQUOTE><CODE>
<PRE>
              drwxr-xr-x  3 kevin  users         512 Sep 19 13:47 .public_html/
              1st bit - direktori?             (ya, berisi banyak file)
               2nd bit - baca oleh pemilik?     (ya, oleh kevin)
                3rd bit - tulis oleh pemilik?    (ya, oleh kevin)
                 4th bit - eksekusi oleh pemilik? (ya, oleh kevin)
                  5th bit - baca oleh grup?        (ya, oleh pemakai)
                   6th bit - tulis oleh grup?       (tidak)
                    7th bit - eksekusi oleh grup?    (ya, oleh pemakai)
                     8th bit - baca oleh tiap orang?  (ya, oleh setiap orang)
                      9th bit - tulis oleh tiap orang?  (tidak)
                       10th bit - eksekusi oleh everyone? (ya, oleh tiap orang)
</PRE>
</CODE></BLOCKQUOTE>
<P>Baris-baris berikut adalah contoh set permisi minimum yang diperlukan untuk melakukan akses yang dideskripsikan. Anda mungkin ingin memberi lebih permisi daripada yang didaftarkan, namun contoh ini dapat menggambarkan apa yang dilakukan permisi minimum pada direktori:
<BLOCKQUOTE><CODE>
<PRE>
     dr--------  Isi dpt ditampilkan, tapi atribut file tidak dapat dibaca
     d--x------  Direktori dapat dimasuki, dan digunakan dl path eksekusi penuh
     dr-x------  Atribut file dapat dibaca oleh pemilik
     d-wx------  File dapat diciptakan/dihapus, meski bukan direktori saat ini
     d------x-t  Mencegah file dihapus oleh orang lain dengan akses tulis.
                 Digunakan di /tmp
     d---s--s--  Tidak ada efek
</PRE>
</CODE></BLOCKQUOTE>
<P>File konfigurasi sistem (biasanya di /etc/) biasanya mode 640 (-rw-r-----), dan dimiliki oleh root. Tergantung pada persyaratan keamanan site anda, anda mungkin perlu menyesuaikannya. Jangan pernah meninggalkan file sistem dapat ditulisi oleh grup atau tiap orang. Beberapa file konfigurasi, termasuk /etc/shadow, hanya boleh dibaca oleh root, dan direktori dalam /etc tidak boleh diakses oleh orang lain.
<P>Script Shell SUID
Script shell SUID merupakan risiko keamanan yang serius, dan oleh karena itu kernel tidak akan menganggapnya. Meski anda menganggap betapa aman script shell, ia dapat dieksploitasi untuk memberi cracker shell root.
<P>
<H2><A NAME="ss5.3">5.3 Pemeriksaan Integritas dengan Tripwire</A>
</H2>

<P>Cara baik lain untuk mendeteksi serangan lokal (dan juga jaringan) pada sistem anda adalah dengan menjalankan pemeriksa integritas seperti Tripwire. Tripwire menjalankan sejumlah checksum di seluruh file biner dan config penting anda dan membandingkannya dengan database terdahulu, yang diketahui baik sebagai referensi. Oleh karena itu, setiap perubahan dalam file akan diketahui.
<P>Merupakan ide yang baik untuk menginstal tripwire ke floppy, dan kemudian mengeset write protect secara fisik pada floppy. Dengan demikian penyusup tidak dapat mengganggu tripwire atau merubah database. Sekali anda telah memiliki setup tripwire, merupakan ide yang baik untuk menjalankannya sebagai tugas administrasi keamanan normal anda untuk melihat jika ada perubahan.
<P>Anda bahkan dapat menambahkan entry crontab untuk menjalankan tripwire dari floppy setiap malam dan mengirimkan hasilnya kepada anda di pagi hari. Sesuatu seperti :
<BLOCKQUOTE><CODE>
<HR>
<PRE>
                       # set mailto
                       MAILTO=kevin
                       # run tripwire
                       15 05 * * * root /usr/local/adm/tcheck/tripwire
</PRE>
<HR>
</CODE></BLOCKQUOTE>

akan mengirimkan laporan kepada anda di jam 5:15 pagi hari.
<P>Tripwire dapat pula menjadi petunjuk yang baik untuk mendeteksi penyusup sebelum anda mengetahuinya. Oleh karena banyaknya file yang berubah pada rata-rata sistem, anda harus berhati-hati tentang aktivitas cracker dan apa yang anda lakukan.
<P>
<H2><A NAME="ss5.4">5.4 Trojan Horses (Kuda-kuda Troya)</A>
</H2>

<P>Kuda troya diambil namanya dari fabel sastra besar Homer. Idenya adalah anda menaruh program atau biner yang tampaknya bagus, dan membuat orang lain mendownloadnya dan menjalankannya sebagai root. Kemudian, anda dapat mengganggu sistem mereka sementara mereka tidak memperhatikan. Sementara mereka berpikir bahwa file biner yang mereka ambil hanya melakukan satu hal (dan mungkin sangat baik), namun ia juga mengganggu keamanan mereka.
<P>Anda perlu waspada terhadap program apa yang anda instal di mesin anda. RedHat menyediakan checksum MD5, dan tanda PGP, file RPM sehingga anda dapat memverifikasi bahwa anda menginstal hal yang sebenarnya. Distribusi lain memiliki metode yang serupa. Anda sebaiknya tidak menjalankan sembarang file biner yang kode sumbernya tidak anda miliki atau kenal sebagai root! Sedikit penyerang yang bersedia mengeluarkan kode sumber untuk dilihat publik.
<P>Meski dapat menjadi kompleks, pastikan anda memperoleh kode sumber untuk beberapa program dari site distribusi sebenarnya. Jika program akan berjalan sebagai root pastikan anda atau seseorang yang anda percayai telah melihat kode sumber dan memverifikasinya.
<P>
<HR>
<A HREF="ID-Security-HOWTO-6.html">Next</A>
<A HREF="ID-Security-HOWTO-4.html">Previous</A>
<A HREF="ID-Security-HOWTO.html#toc5">Contents</A>
</BODY>
</HTML>
