
Le Linux Installation HOWTO

Eric Steven Raymond

   Thyrsus Enterprises

       <esr@thyrsus.com>

   Copyright © 2000 Eric S. Raymond

   Ce document décrit comment obtenir et installer Linux. C'est le
   premier document qu'un nouvel utilisateur de Linux devrait lire pour
   débuter.

   _Historique des versions_
   Version 5.7 06 juillet 2002   Revu par : esr
   Nouvelles traductions
   Version 5.6 04 janvier 2002   Revu par : esr
   Corrections mineures.
   Version 5.6 06 septembre 2001 Revu par : esr
   Ajout d'une section concernant les traductions.
   Version 5.5 11 juillet 2001   Revu par : esr
   Les cartes PnP ne sont plus un problème.
   Version 5.4 14 juin 2001      Revu par : esr
   Ajout d'un lien vers le document Post-Installation-HOWTO.
   Version 5.3 9 mars 2001       Revu par : esr
   Corrections concernant divers liens.
   Version 5.2 22 février 2001   Revu par : esr
   Corrections concernant la mise en forme suivant le guide LDP.
   Version 5.1 29 janvier 2001   Revu par : esr
   Corrections mineures concernant le monde après les versions 2.1
   Version 5.0 21 Août 2000      Revu par : esr
   Première version Docbook.
     _________________________________________________________________

   _Table des matières_
   1. Introduction

        1.1. But de ce document
        1.2. Traductions
        1.3. Autres sources d'informations
        1.4. Nouvelles versions de ce document
        1.5. Réactions et corrections

   2. Dernières modifications
   3. L'option la plus simple : achetez, ne construisez pas
   4. Avant de commencer

        4.1. Matériel nécessaire
        4.2. Espace disque nécessaire et coexistence
        4.3. Temps nécessaire
        4.4. Choisir une distribution Linux

   5. Présentation de l'installation

        5.1. Les premiers pas : par le chemin facile
        5.2. Les premiers pas : par le chemin difficile
        5.3. Continuer l'installation
        5.4. Parties fondamentales d'un kit d'installation

   6. L'installation en détail

        6.1. Se préparer pour l'installation
        6.2. Créer les disquettes de « boot » et de « root  »
        6.3. Repartitionner les disques DOS/Windows
        6.4. Créer des partitions pour Linux
        6.5. Démarrer la disquette d'installation
        6.6. Installer les paquetages
        6.7. Après l'installation des paquetages

   7. Démarrer votre nouveau système
   8. Après votre premier démarrage

        8.1. Début de l'administration système
        8.2. Configuration personnalisée de LILO

   9. Administrivia

        9.1. Conditions d'utilisations
        9.2. Remerciements

1. Introduction

1.1. But de ce document

   Linux est une implantation librement diffusable d'Unix pour des
   ordinateurs personnels courants (à l'origine développé sur des 386s,
   il est maintenant adapté aux architectures 486, 586, Pentium, PowerPC,
   Sun Sparc, ARM, DEC Alpha, et même un gros système comme l'IBM 390!).
   Il supporte un grand nombre de programmes, parmi lesquels X-Window et
   Emacs, les réseaux TCP/IP (dont SLIP), et de nombreuses applications.

   Ce document suppose que vous ayez entendu parler de Linux, que vous
   connaissez son existence, et que vous voulez maintenant le faire
   tourner. Il s'intéresse à la version Intel qui est la plus courante,
   mais la plupart de ce qui y est dit s'applique aussi aux versions
   PowerPC, Sparc, et Alpha.
     _________________________________________________________________

1.2. Traductions

   Ce document a été traduit en Catalan, en Slovène et en Tchèque.
     _________________________________________________________________

1.3. Autres sources d'informations

   Si vous n'avez encore jamais entendu parler de Linux, il existe
   plusieurs sources d'informations de base. Le meilleur endroit pour les
   trouver est la page d'accueil du Linux Documentation project à
   l'adresse http://www.tldp.org. Vous pourrez y trouver la dernière
   version mise à jour de ce document.

   Vous commencerez probablement vos recherches par les informations
   générales sur Linux : la Page d'informations Linux et la META-FAQ
   Linux. Le document « Linux Frequently Asked Questions  » (FAQ)
   contient un grand nombre de questions (et de réponses !) courantes sur
   Linux -- c'est un « devoir de lecture » pour les nouveaux
   utilisateurs.

   Le « Linux Documentation Project » écrit un ensemble de manuels et de
   livres sur Linux, tous librement diffusables sur le réseau et
   disponibles à partir de la page d'accueil du LDP.

   Le livre _« Linux Installation and Getting Started » _est un guide
   complet décrivant comment obtenir et installer Linux, et comment
   l'utiliser une fois qu'il est installé. Il contient un didacticiel
   complet sur le lancement et l'utilisation du système, et beaucoup plus
   d'informations que vous ne pourrez en trouver ici. Vous pouvez le
   consulter, ou en télécharger une copie, à partir de la page d'accueil
   du LDP.

   NdT : Cet ouvrage a été traduit en français, comme la majeure partie
   des documents du LDP. Le site de référence pour toutes ces traductions
   est www.traduc.org.

   Enfin, il existe un « Guide to x86 Bootstrapping » qui est assez
   technique. Ce document est orienté vers NetBSD plutôt que vers Linux,
   mais il contient des informations utiles sur la configuration des
   disques et des gestionnaires de boot pour les configurations multi-OS.

   S'il vous plaît, _ne m'envoyez pas_ de courrier électronique pour
   demander de l'aide pour l'installation. Même si j'ai la disponibilité
   pour prendre en compte ces demandes, la résolution des problèmes par
   courrier est moins efficace qu'une demande d'aide à un groupe local
   d'utilisateurs de Linux. Vous pouvez trouver des informations sur les
   possibilités de contacts avec les groupes d'utilisateurs de Linux dans
   le monde entier sur le site LDP.
     _________________________________________________________________

1.4. Nouvelles versions de ce document

   De nouvelles versions du « Linux Installation HOWTO » sont postées
   périodiquement dans les groupes de nouvelles comp.os.linux.help,
   comp.os.linux.announce et news.answers. Elles sont aussi téléchargées
   sur les différents sites WWW et FTP Linux, dont la page d'accueil du
   LDP.

   Vous pouvez y consulter la dernière version. (NdT : La version
   française de ce document se trouve sur www.traduc.org).
     _________________________________________________________________

1.5. Réactions et corrections

   Si vous avez des questions ou des commentaires concernant ce document,
   n'hésitez pas à contacter Eric S. Raymond, à <esr@thyrsus.com>". Je
   recevrai avec plaisir toute suggestion ou critique. Si vous trouvez
   une erreur dans ce document, merci de me la signaler afin que je
   puisse la corriger dans la prochaine version.

   _Ne m'envoyez pas_ de questions à propos des problèmes de matériels
   rencontrés lors de l'installation. Consultez le _« Linux Installation
   and Getting Started »_, votre revendeur, ou le forum Linux
   comp.os.linux.setup. Ce HOWTO se veut un guide rapide et indolore pour
   une installation _normale_ -- un autre HOWTO sur les problèmes de
   matériel et leurs diagnostics est en préparation.

   Tout ce qui concerne la traduction française : fautes d'orthographe,
   erreurs de traduction, est dû à Éric Jacoboni <jaco@mail.dotcom.fr>.
   Jacques Chion <jacques.chion@wanadoo.fr> en a rajoutées lors du
   passage de la version v4.13 à la version v5.0 (et ultérieures) de ce
   document.

   Merci à Jean-Claude Repetto pour ses corrections pertinentes.

   La traduction originale de ce document a été faite par René Cougnenc.
     _________________________________________________________________

2. Dernières modifications

     * Ajout de « Achetez, ne construisez pas ».
     * Ajout concernant le démarrage à partir d'un CD-ROM.
     _________________________________________________________________

3. L'option la plus simple : achetez, ne construisez pas

   Linux est maintenant suffisamment mature pour qu'il y ait des
   intégrateurs de systèmes qui assembleront pour vous une station de
   travail, installeront et configureront Linux dessus et feront des
   tests intensifs avant de vous la livrer. Si vous disposez de plus
   d'argent que de temps, ou si vous avez des exigences de performance et
   de fiabilité rigoureuses, ces intégrateurs offrent un service valable
   en garantissant que vous n'aurez pas un matériel qui sera mort deux
   jours après son déballage.

   Pour ceux qui n'ont pas un tel budget, le reste de ce HOWTO explique
   comment installer soi-même Linux.
     _________________________________________________________________

4. Avant de commencer

   Avant de pouvoir installer Linux, vous devez être sûr que votre
   machine soit capable de le supporter, puis vous devrez choisir une
   distribution Linux. La « Linux Pre-installation checklist » vous
   aidera à organiser vos données de configuration avant de commencer.
     _________________________________________________________________

4.1. Matériel nécessaire

   Quel type de système est nécessaire pour faire tourner Linux ? Bonne
   question, la liste des matériels reconnus par le système change
   fréquemment. Le « Linux Hardware-HOWTO » donne une liste plus ou moins
   complète des matériels reconnus par Linux. La « Linux INFO-SHEET » en
   donne une autre.

   Pour les versions Intel, une configuration matérielle similaire à
   celle qui suit est nécessaire :

   N'importe quel processeur 80386, 80486, Pentium ou Pentium II
   convient. Les clones Non-Intel des 80386 et au-dessus fonctionneront
   généralement. Vous n'avez pas besoin de coprocesseur arithmétique bien
   qu'il soit agréable d'en avoir un.

   Les architectures de bus ISA, EISA, VESA Local Bus et PCI sont
   reconnues. L'architecture de bus MCA (propre aux machines IBM PS/2)
   est reconnue dans les noyaux de développement les plus récents
   (2.1.x), mais peut ne pas être disponible tout de suite.

   Au moins 4 Mo de mémoire sont nécessaires. En théorie, Linux pourrait
   se suffire de 2 Mo, mais la plupart des installations et des
   programmes nécessitent 4 Mo. Plus vous aurez de mémoire, et plus vous
   serez heureux. Je vous conseille un minimum de 16 Mo si vous avez
   l'intention d'utiliser X-Window, 64 étant préférable.

   Évidemment, vous avez besoin d'un disque dur et d'un contrôleur disque
   au standard AT. Tous les disques et contrôleurs MFM, RLL et IDE
   devraient fonctionner. De nombreux disques et contrôleurs SCSI sont
   aussi reconnus ; le « Linux SCSI-HOWTO » contient plus d'informations
   sur le matériel SCSI. Si vous achetez un nouveau système pour faire
   tourner Linux, le faible surcoût du SCSI est dérisoire face à
   l'amélioration des performances et de la fiabilité qu'il apporte.

   Vous aurez besoin d'un lecteur de CD-ROM; de fait toutes les
   distributions Linux sont maintenant sur CD-ROM. Si votre machine a été
   élaborée en 1998, ou plus tard, vous devriez être en mesure de
   démarrer l'installation directement à partir du CD-ROM sans utiliser
   de disquette d'amorçage.

   Si votre CD-ROM est ATAPI, SCSI, ou véritable IDE vous ne devriez pas
   avoir de problèmes pour le faire fonctionner (mais faites attention
   aux lecteurs bon marché annonçant une interface « IDE » qui n'en est
   pas une vraie). Si votre CD-ROM utilise une carte d'interface
   propriétaire, il se peut que le noyau d'installation que vous avez
   lancé à partir de la disquette ne le reconnaisse pas -- et un CD-ROM
   inaccessible peut empêcher l'installation. De plus, les CD-ROM reliés
   au port parallèle ne fonctionnent pas du tout. Si vous avez un doute,
   lisez le « Linux CD-ROM HOWTO » pour obtenir une liste avec le détail
   des matériels supportés.

   Si votre CD-ROM n'apparaît pas dans la séquence d'amorçage de votre
   machine, vous aurez besoin d'un lecteur de disquette 3.5". Bien que
   les disquettes 5.25" soient reconnues par Linux, elles sont si
   obsolètes que vous ne devez pas compter trouver des images disques qui
   tiendront dessus. (Un Linux minimal peut, en fait, tourner sur une
   seule disquette, mais cela n'est utile que pour l'installation et
   certaines tâches de maintenance).

   Vous avez aussi besoin d'une carte vidéo et d'un écran MDA , Hercules,
   CGA, EGA, VGA, ou Super VGA . En général, si votre carte et votre
   écran vidéo fonctionnent sous MS-DOS, ils devraient fonctionner sous
   Linux. Cependant, si vous voulez faire tourner X-Window, d'autres
   restrictions s'appliquent sur les matériels vidéo reconnus. Le « Linux
   XFree-HOWTO », contient plus d'informations sur l'exécution de X et
   sur ses besoins.

   Si vous travaillez sur une machine utilisant l'un des processeurs 68k
   de Motorola (ordinateurs Amiga, Atari, ou VMEbus), lisez la « FAQ
   Linux/m68k » pour obtenir des informations sur les configurations
   minimales requises et la situation actuelle du portage. Actuellement,
   la FAQ dit que Linux m68k est aussi stable et utilisable que les
   versions Intel.
     _________________________________________________________________

4.2. Espace disque nécessaire et coexistence

   Vous avez besoin d'espace libre sur votre disque pour y mettre Linux.
   La taille de cet espace dépend de la quantité de programmes que vous
   comptez installer. La plupart des installations demandent quelque
   chose comme 1 Go, ce qui inclut l'espace pour les programmes, l'espace
   de swap (utilisé comme mémoire virtuelle sur votre machine), l'espace
   disponible pour les utilisateurs, etc.

   Il est possible de faire tourner un système Linux minimal dans 80 Mo,
   voire moins (c'était le cas lorsque les distributions Linux étaient
   moins importantes), tout comme il est possible d'utiliser 2 Go, ou
   bien plus, pour tous vos programmes Linux. La place utilisée dépend en
   grande partie du nombre de programmes que vous installez et de
   l'espace de travail dont vous avez besoin. Nous reviendrons sur ce
   point plus tard.

   Linux peut coexister sur votre disque dur avec d'autres systèmes
   d'exploitation, comme MS-DOS, Microsoft Windows, ou OS/2 (En fait,
   vous pouvez même accéder aux fichiers MS-DOS, voire exécuter certains
   programmes MS-DOS, à partir de Linux). En d'autres termes, lorsque
   vous partitionnez votre disque pour Linux, MS-DOS ou OS/2 sont dans
   leurs propres partitions, et Linux dans la sienne. Nous détaillerons
   ce mécanisme de « dual-boot » plus loin.

   Vous n'avez PAS besoin d'être sous MS-DOS, OS/2, ou un autre système
   d'exploitation pour utiliser Linux. Linux est un système
   d'exploitation complètement différent et autonome ; il n'a pas besoin
   d'autre OS pour son installation et son utilisation.

   Pour résumer, la configuration minimale pour Linux n'est pas beaucoup
   plus importante que celle nécessaire à la plupart des systèmes MS-DOS
   ou Windows 3.1 actuels (et c'est moins que le minimum pour Windows 95
   !). Si vous possédez un 386, ou un 486, avec au moins 4 Mo de RAM,
   vous serez heureux sous Linux. Linux ne demande pas un énorme espace
   disque ou mémoire, ni un processeur ultra rapide. Matt Welsh, le
   créateur de ce HOWTO, utilisait Linux sur un 386 à 16 MHz (la machine
   la plus lente que l'on puisse posséder), avec 4 Mo de RAM, et en était
   très content. Plus vous voudrez faire de choses, plus vous aurez
   besoin de mémoire et d'un processeur plus rapide. D'après mon
   expérience, un 486 avec 16 Mo de RAM, et tournant sous Linux, est plus
   performant que certains modèles de stations de travail d'un prix bien
   plus élevé.
     _________________________________________________________________

4.3. Temps nécessaire

   Du début à la fin, une installation moderne de Linux à partir d'un
   CD-ROM demande de 90 mn à 3 heures.
     _________________________________________________________________

4.4. Choisir une distribution Linux

   Avant d'installer Linux, vous devez choisir une des « distributions  »
   Linux disponibles. Il n'y a pas de distribution standard unique -- il
   y en a beaucoup. Chaque distribution a sa propre documentation et sa
   propre procédure d'installation. Cependant toutes les distributions
   partagent le même code source de base.

   Les distributions Linux sont disponibles par FTP anonyme et par
   correspondance sur disquettes, bandes ou CD-ROMs. Le site Linux Weekly
   News, en plus d'être une excellente source d'information et de
   nouveautés, fournit un report hebdomadaire sur les distributions avec
   des pointeurs sur la plupart d'entr'elles.

   Lorsque ce HOWTO fut écrit pour la première fois, dans un passé
   lointain (1992 - 1993), la plupart des gens récupéraient Linux en
   utilisant des chemins tortueux. Cela impliquait de longs
   téléchargements à partir d'Internet ou d'un BBS sur leur machines DOS,
   suivis d'une procédure élaborée permettant de transférer ce qui avait
   été récupéré sur de multiples disquettes. Une de ces disquettes était
   alors bootée et utilisée pour l'installation de l'autre douzaine. Avec
   de la chance (et sans erreurs sur les supports), l'installation se
   finissait plusieurs heures plus tard par un Linux en état de marche.
   Ou peut-être pas.

   Bien que cette façon de procéder reste encore possible (vous pouvez
   télécharger une des nombreuses distributions à partir du site
   Metalab), il existe des méthodes beaucoup moins fatigantes. La plus
   facile consiste à acheter l'une des excellentes distributions
   commerciales de Linux sur CD-ROMs comme Red Hat, Debian, Linux Pro, ou
   WGS. Elles sont généralement vendues moins de 50 $; dans des
   librairies ou des boutiques d'Informatique et vous économiseront
   plusieurs heures d'énervement.

   Vous pouvez aussi achetez des CD-ROMs « compilation » comme l'ensemble
   Linux Developer's Resource d'InfoMagic. Ceux-ci contiennent
   généralement plusieurs distributions et un contenu récent des sites
   les plus importants de Linux, comme metalab ou tsx-11.

   Dans la suite de ce HOWTO, nous décrirons les étapes d'une
   installation à partir d'un CD-ROM « compilation », ou de l'un des
   Linux commerciaux n'incluant pas de manuel d'installation imprimé. Si
   votre Linux contient un manuel, certaines informations de ce HOWTO
   peuvent vous être utiles, mais il est préférable de consulter le
   manuel pour les instructions d'installation détaillées.
     _________________________________________________________________

5. Présentation de l'installation

   Il est prudent de rassembler les informations sur la configuration de
   votre matériel avant de commencer l'installation. Prenez connaissance
   du vendeur et des références de chaque carte de votre machine ;
   renseignez-vous sur les IRQ et DMA. Vous n'aurez probablement pas
   besoin de ces informations -- mais si cela devient nécessaire, vous en
   aurez vraiment besoin.

   Si vous voulez tourner avec un système « dual-boot » (Linux et DOS ou
   Windows ou les deux à la fois), réarrangez (repartitionnez) votre
   disque pour faire de la place pour Linux. Si vous êtes avisé, vous
   _faites une sauvegarde générale avant toute chose!_
     _________________________________________________________________

5.1. Les premiers pas : par le chemin facile

   Si vous possédez un CDROM EIDE/ATAPI (habituel par les temps qui
   courent), vérifiez les réglages du BIOS de votre machine pour voir si
   vous avez la possibilité de « booter » à partir d'un CD-ROM. La
   plupart des machines construites après la mi-97 peuvent le faire.

   Si c'est la cas, changez les réglages de telle sorte que le CD-ROM
   soit examiné en premier. Ceux-ci se trouvent souvent dans un sous-menu
   « BIOS FEATURES » faisant partie du menu principal de configuration du
   BIOS.

   Insérez ensuite le CD-ROM. Redémarrez, et c'est parti.

   Si vous avez un CD-ROM SCSI, il y a souvent possibilité de « booter »
   à partir de lui, mais cela dépend souvent du couple carte-mère/BIOS.
   Ceux qui en savent assez pour être en mesure de supporter le
   supplément de coût nécessité par l'achat d'un lecteur SCSI CDROM
   sauront sûrement s'en tirer.
     _________________________________________________________________

5.2. Les premiers pas : par le chemin difficile

     * Créez les disquettes d'installation.
     * Démarrez un mini-Linux d'installation à partir des disquettes afin
       d'accéder au CD-ROM.
     _________________________________________________________________

5.3. Continuer l'installation

     * Préparez les systèmes de fichiers Linux. (Si vous n'avez pas déjà
       ouvert la table de partition, vous le ferez à ce moment).
     * Installez un système Linux de base à partir du CDROM.
     * Démarrez Linux à partir du disque dur.
     * (Optionnel) Installez d'autres paquetages à partir du CD-ROM.
     _________________________________________________________________

5.4. Parties fondamentales d'un kit d'installation

   Voici les parties fondamentales d'une distribution installable :

     * Les fichiers README et FAQ. Ceux-ci se trouvent habituellement
       dans le répertoire racine de votre CD-ROM et peuvent être lus dès
       que le disque a été monté sous Linux. (En fonction de la façon
       dont le CD-ROM a été fait, ils peuvent même être visibles sous
       DOS/Windows.) Il est souhaitable de lire ces fichiers dès que vous
       pourrez y accéder afin d'être tenu au courant des changements et
       des mises à jour importantes.
     * Plusieurs images de « bootdisk » (souvent dans un
       sous-répertoire). Si le CD-ROM n'est pas bootable, l'une de
       celles-ci est le fichier que vous copierez sur une disquette afin
       de créer la disquette de boot. Vous choisirez _une _de ces images
       en fonction du type de matériel dont vous disposez sur votre
       système.

   Le problème est que certains pilotes de matériel entrent bizarrement
   en conflit les uns avec les autres et, au lieu d'essayer de déceler
   les problèmes de matériel sur votre système, il est plus facile
   d'utiliser une disquette image de boot qui ne lancera que les pilotes
   nécessaires. (Ceci aura, en plus, l'avantage de réduire la taille de
   votre noyau.)

     * Une disquette image de dépannage. C'est une disquette contenant un
       noyau de base et des outils pour réparer les dégâts au cas où
       quelque chose n'irait pas avec le noyau ou si le démarrage se
       bloquait sur votre disque dur.
     * RAWRITE.EXE. C'est un programme MS-DOS permettant d'écrire le
       contenu d'un fichier (comme l'image de boot ou de rootdisk)
       directement sur une disquette, sans se soucier du formatage.

   Vous n'avez besoin de RAWRITE.EXE que si vous prévoyez de créer vos
   disquettes « boot » et « root » à partir d'un système MS-DOS. Si vous
   avez accès à une station de travail UNIX disposant d'un lecteur de
   disquettes, vous pouvez vous en servir pour créer les disquettes en
   utilisant la commande « dd », ou un script fourni par le vendeur.
   Lisez la page de man sur dd(1) et demandez de l'aide aux gourous UNIX
   de votre entourage. Vous trouverez un exemple concernant « dd » un peu
   plus loin dans ce document.

     * Le CD-ROM lui-même. Le but de la disquette « boot » est de
       préparer votre machine au chargement des disquettes « root » ou
       d'installation, qui ne sont elles-mêmes que des moyens pour
       préparer votre disque dur et copier dessus des parties du CD-ROM.
     _________________________________________________________________

6. L'installation en détail

6.1. Se préparer pour l'installation

   Linux utilise les composants d'un PC plus efficacement que MS-DOS,
   Windows ou NT, et est donc moins tolérant vis-à-vis des matériels mal
   configurés. Il y a un minimum de choses à faire avant de commencer
   pour diminuer les risques d'être arrêté par ce genre de problèmes.

   Tout d'abord, récupérez toutes les documentations que vous possédez
   sur votre matériel -- carte mère, carte vidéo, écran, modem, etc. --
   et gardez-les à portée de main.

   Puis, rassemblez les informations détaillées sur votre configuration
   matérielle. Une façon de réaliser cela facilement, si vous disposez de
   MS-DOS 5.0 ou supérieur, est d'imprimer un rapport en utilisant
   l'utilitaire de diagnostic « msd.exe » de Microsoft (vous pouvez
   ignorer les parties concernant les programmes résidents, la carte
   mémoire, les chaînes d'environnement et la version du système). Entre
   autres choses, ceci vous garantit une information complète et correcte
   sur votre carte graphique et le type de votre souris, ce qui sera
   utile lors de la configuration de X.

   Enfin, vérifiez que votre machine ne pose pas de problèmes de
   configuration lors de la reconnaissance du matériel, ce qui pourrait
   causer un bloquage irrémédiable pendant l'installation de Linux.

     * Un système DOS/Windows peut utiliser un (des) disque(s) dur(s) et
       un CD-ROM IDE même si les jumpers maître/esclave ne sont pas
       correctement positionnés sur ces disques. Linux ne fonctionne pas
       ainsi. En cas de doute, vérifiez vos jumpers maître/esclave !
     * Est-ce que l'un de vos périphériques ne possède ni jumper, ni
       mémoire de configuration non volatile ? Si c'est le cas, vous
       pouvez avoir besoin d'une initialisation au démarrage via un
       utilitaire MS-DOS pour démarrer, et il peut être difficilement
       accessible par Linux. Les CD-ROMs, les cartes sons, les cartes
       Ethernet et les lecteurs de bande de bas de gamme peuvent avoir ce
       problème. Vous pourrez peut-être contourner le problème au moyen
       de paramètres donnés à l'invite du démarrage ; lisez le « Linux
       Boot Prompt HOWTO » pour les détails.
     * Certains systèmes d'exploitation permettent à une souris de type
       bus de partager une IRQ avec d'autres dispositifs. Linux ne le
       permet pas; en fait, ce genre de choses peut entraîner le bloquage
       de votre machine. Si vous utilisez une souris de type bus, lisez
       le « Linux Bus Mouse HOWTO », pour les détails.

   Si possible, récupérez le numéro de téléphone d'un utilisateur Linux
   expérimenté que vous pourrez appeler en cas d'urgence. Neuf fois sur
   dix vous n'en aurez pas besoin, mais c'est rassurant de l'avoir.

   Évaluez le temps nécessaire à l'installation. Il sera d'à peu près une
   heure sur un système vierge ou converti en tout Linux, ou jusqu'à
   trois heures pour un système « dual-boot » (ceux-ci ont un taux de
   mauvais démarrage et de plantage bien plus élevé).
     _________________________________________________________________

6.2. Créer les disquettes de « boot » et de « root  »

   (Cette étape n'est nécessaire que dans le cas où vous ne pouvez pas
   « booter » à partir du CD-ROM).

   Votre CD-ROM Linux peut contenir des aides à l'installation qui vous
   guideront de façon interactive pendant le processus de création des
   disquettes de « boot », de « root » et de récupération. Ce peut être
   un programme d'installation MS-DOS (comme le programme _redhat.exe_ de
   Red Hat), un script Unix, ou les deux.

   Si vous avez un tel programme et que vous pouvez l'utiliser, lisez le
   reste de cette section seulement pour information. Lancez le programme
   pour réaliser l'installation -- ses auteurs connaissent certainement
   mieux les spécificités de la distribution que moi, et vous éviterez de
   nombreuses étapes manuelles sujettes aux erreurs.

   Des informations plus détaillées sur la façon de réaliser les
   disquettes de « boot » et de « root » se trouvent dans le « Linux
   Bootdisk HOWTO » .

   Votre première étape sera de choisir une image de disquette de
   « boot » convenant à votre matériel. Si vous devez le faire
   manuellement, vous constaterez généralement que soit (a) les images de
   « boot » sur votre CD-ROM portent un nom qui vous aidera à trouver
   celle qui convient, soit (b) il y a un fichier index décrivant chaque
   image.

   Puis, vous devrez créer des disquettes à partir de l'image « boot »
   que vous avez choisie, et éventuellement à partir des images
   « rescue ». C'est là que le programme MS-DOS RAWRITE.EXE entre en jeu.

   Ensuite, vous devrez avoir deux ou trois disquettes _haute densité_
   formatées MS-DOS. (Elles doivent être du même type ; si le lecteur de
   disquettes sur lequel vous démarrez est un lecteur 3.5" vos disquettes
   doivent toutes être des disquettes haute densité de 3.5".) Vous
   utiliserez RAWRITE.EXE pour copier les images de « boot » et de
   « root » sur les disquettes.

   Appelez-le sans paramètre, de la façon suivante :
   C:\> RAWRITE

   Répondez aux questions concernant le nom du fichier à copier et la
   disquette de destination (A:, par exemple). RAWRITE copiera le
   fichier, bloc par bloc, directement sur la disquette. Utilisez aussi
   RAWRITE pour l'image de la disquette « root » (COLOR144, par exemple).
   Quand c'est fait, vous avez deux disquettes : l'une est la disquette
   « boot », l'autre la disquette « root ». Ces deux disquettes ne sont
   plus lisibles par MS-DOS (dans un certain sens, ce sont des disquettes
   « formatées Linux »).

   Vous pouvez utiliser les commandes dd(1) sur un système UNIX pour
   faire la même chose. (Pour cela, vous aurez besoin d'une station de
   travail UNIX disposant d'un lecteur de disquettes, bien sûr.) Par
   exemple, sur une station de travail Sun, avec un lecteur de disquette
   piloté par /dev/rfd0, vous pouvez utiliser la commande :
   $ dd if=bare of=/dev/rfd0 obs=18k

   Sur certaines stations de travail (celles de Sun, par exemple), vous
   devrez fournir en paramètre la bonne taille de bloc de sortie (le
   paramètre « obs ») ou bien la commande échouera. Si vous rencontrez
   des problèmes, la page du manuel sur dd(1) peut s'avérer instructive.

   Assurez-vous d'utiliser des disquettes neuves et sans erreur. Les
   disquettes ne doivent pas avoir de blocs défectueux.

   Vous n'avez pas besoin de faire tourner Linux ou MS-DOS pour installer
   Linux. Cependant, cela facilite la création des disquettes de « boot »
   et de « root » à partir de votre CD-ROM. Si vous n'avez pas de système
   d'exploitation installé sur votre machine, vous pouvez utiliser le
   Linux ou le MS-DOS de quelqu'un d'autre juste pour créer les
   disquettes, et installer à partir de là.
     _________________________________________________________________

6.3. Repartitionner les disques DOS/Windows

   Sur beaucoup de systèmes, le disque dur est déjà consacré à des
   partitions MS-DOS, OS/2, etc. Vous devez modifier la taille de ces
   partitions pour faire de la place à Linux. Si vous comptez avoir un
   système « dual boot », il vous est vivement conseillé de lire un, ou
   plusieurs, des mini-HOWTO suivants qui décrivent certaines
   configurations « dual boot ». (NdT : Les traductions françaises de ces
   documents se trouvent sur www.traduc.org).

     * Le DOS-Win95-OS2-Linux mini-HOWTO,
     * Le Linux+Win95 mini-HOWTO,
     * Le Linux+NT mini-HOWTO

   Même s'ils ne sont pas directement applicables à votre système, ils
   vous aideront à comprendre tout ce qui est mis en jeu.

   Note

   Certains Linux peuvent s'installer dans un répertoire de votre
   partition MS-DOS. (Ce qui n'est pas la même chose qu'installer Linux
   _à partir _d'une partition MS-DOS). Vous utiliserez alors le système de
   fichiers « UMSDOS » qui vous permet de traiter un répertoire de votre
   partition MS-DOS comme un système de fichiers Linux. Vous n'aurez donc
   pas besoin de repartitionner votre disque dur.

   Je ne recommande cette méthode que dans le cas où votre disque a déjà
   quatre partitions (c'est le maximum pour DOS) et qu'un repartionnement
   serait problématique (il ralentirait Linux à cause du surcoût engendré
   par la traduction des noms de fichiers). Une autre raison d'utiliser
   « UMSDOS » est que cela permet d'essayer Linux avant de
   repartitionner. Cependant, dans la majeure partie des cas, vous devrez
   repartitionner votre disque comme cela est décrit ici. Si vous avez
   l'intention d'utiliser « UMSDOS », vous devrez vous débrouiller par
   vous-même -- ce type d'installation n'est pas décrit ici. A partir de
   maintenant, nous considérons que vous n'utilisez PAS « UMSDOS », et
   que vous devez repartitionner votre disque dur.

   Une _partition_ est simplement une section du disque dur, réservée
   pour un système d'exploitation particulier. Si vous n'avez que MS-DOS
   installé, votre disque dur n'a probablement qu'une seule partition qui
   lui est entièrement consacrée. Pour utiliser Linux, il faut
   repartitionner le disque afin d'avoir une partition pour MS-DOS, et
   une (ou plusieurs) pour Linux.

   Il y a trois types de partitions : _primaire_, _étendue_, et
   _logique_. Sans entrer dans les détails, les partitions primaires
   correspondent aux quatre partitions principales de votre disque.
   Cependant, si vous désirez avoir plus de quatre partitions par disque,
   vous devez créer une partition étendue qui peut contenir plusieurs
   partitions logiques. On ne stocke pas les données directement sur une
   partition étendue -- celle-ci ne sert qu'à contenir les partitions
   logiques. Les données ne sont stockées que sur des partitions
   primaires ou logiques.

   Autrement dit, la plupart des gens n'utilisent que des partitions
   primaires. Cependant, si vous avez besoin de plus de quatre partitions
   sur un disque, vous devrez créer une partition étendue. Les partitions
   logiques seront ensuite créées dans la partition étendue et vous aurez
   alors plus de quatre partitions par disque.

   Notez aussi que vous pouvez facilement installer Linux sur le second
   disque de votre machine (D: sous MS-DOS). Il suffit de préciser le nom
   du périphérique approprié lors de la création des partitions Linux.
   Ceci est décrit en détail plus loin.

   Revenons au repartitionnement du disque. Le problème avec le
   changement de taille des partitions est qu'il n'y a pas de moyen de le
   faire sans détruire les données stockées dans ces partitions.
   Aujourd'hui, il existe des utilitaires de partitionnement permettant
   de modifier la taille sans perte de données ; ils connaissent la
   structure des systèmes de fichiers, peuvent trouver la place libre sur
   un système de fichier, et peuvent déplacer les données sur la
   partition pour pouvoir faire de la place là où c'est nécessaire, pour
   qu'une modification de taille soit effectuée correctement. Je suggère
   quand même d'effectuer une sauvegarde complète de votre système avant
   de repartitionner, en cas d'erreur du programme ou d'erreur humaine.

   Lorsque vous êtes sous Linux, « GNU parted » vous permet de créer, de
   détruire, de redimensionner et de copier des partitions. Il supporte
   les systèmes de fichier ext2, FAT16 et FAT32, et les partitions swap
   Linux ; il reconnaît également les disques MS-DOS. « parted » est
   utile pour faire de la place pour les nouveaux systèmes
   d'exploitation, pour réorganiser l'occupation du disque, pour copier
   des données entre disques et pour réaliser des images de disques. Il
   est de conception relativement récente, mais a la réputation de bien
   fonctionner sans provoquer de pertes de données.

   Il existe une programme MS-DOS appelé FIPSqui permet de repartitionner
   un disque sans détruire les données. Avec ce programme, un optimiseur
   disque (comme Norton Speed Disk), et un peu de chance, vous devriez
   pouvoir changer la taille de vos partitions MS-DOS sans perdre les
   données qui s'y trouvent.

   La méthode de redimensionnement plus ancienne, si vous ne possédez pas
   l'un de ces éditeurs de partition, consiste à détruire la ou les
   partitions, et à en recréer avec des tailles plus petites. Si vous
   utilisez cette méthode, vous devez absolument faire une sauvegarde
   pour conserver toutes vos données.

   La méthode classique pour modifier les partitions est d'utiliser le
   programme FDISK. Par exemple, supposons que vous ayez un disque dur de
   80 Mo entièrement dédié à MS-DOS. Vous voulez le couper en deux -- 40
   Mo pour MS-DOS et 40 Mo pour Linux. Pour ce faire, lancez _FDISK_ sous
   MS-DOS, détruisez la partition MS-DOS de 80 Mo, et recréez une
   partition MS-DOS de 40 Mo à la place. Vous pouvez alors formater la
   nouvelle partition et réinstaller vos programmes MS-DOS à partir des
   sauvegardes. 40 Mo sur le disque sont inoccupés. Plus tard, vous
   créerez des partitions Linux sur cette portion inutilisée du disque.

   En résumé, pour modifier la taille de vos partitions MS-DOS avec
   _FDISK_, vous devez :

    1. Faire une sauvegarde complète de votre système.
    2. Créer une disquette système MS-DOS avec une commande comme :

FORMAT /S A:

       Copier les fichiers _FDISK.EXE_ et _FORMAT.COM_ sur cette
       disquette, ainsi que tous les autres utilitaires dont vous
       pourriez avoir besoin. (Par exemple, ceux permettant de restaurer
       la sauvegarde).
    3. Redémarrer votre ordinateur à partir de cette disquette.
    4. Lancer _FDISK_, en lui précisant éventuellement le disque à
       modifier (C: ou D:, par exemple).
    5. Utiliser les options du menu de FDISK afin de détruire les
       partitions dont vous voulez changer la taille. _Cette opération
       détruira toutes les données de ces partitions._
    6. Utiliser les options du menu de FDISK pour recréer ces partitions
       avec des tailles inférieures.
    7. Quitter FDISK et reformater les nouvelles partitions avec la
       commande _FORMAT._
    8. Restaurer les fichiers originaux à partir de la sauvegarde.

   Notez que le FDISK de MS-DOS vous permettra de créer un « disque DOS
   logique ». Un disque DOS logique est simplement une partition logique
   sur votre disque dur. Vous pouvez installer Linux sur une partition
   logique, mais ne la créez pas avec le programme FDISK de MS-DOS.
   Ainsi, si vous utilisez actuellement un disque DOS logique, et que
   vous voulez installer Linux à sa place, vous devez détruire le disque
   logique avec le FDISK de MS-DOS, et (plus tard) créer une partition
   logique pour mettre Linux à sa place.

   Le mécanisme utilisé par OS/2 et d'autres systèmes d'exploitation est
   similaire. Lisez la documentation de ces systèmes pour obtenir les
   détails.
     _________________________________________________________________

6.4. Créer des partitions pour Linux

   Après avoir repartitionné votre disque, vous devez créer des
   partitions pour Linux. Avant d'expliquer comment faire, nous allons
   parler des partitions et des systèmes de fichiers sous Linux.
     _________________________________________________________________

6.4.1. Partitions : les bases

   Linux demande au moins une partition, pour le _système de fichier
   racine_ qui contiendra le noyau Linux.

   Vous pouvez vous représenter un _système de fichiers_ comme une
   partition formatée pour Linux. Les systèmes de fichiers servent à
   stocker les fichiers. Chaque système doit avoir au moins un système de
   fichiers racine. Cependant, de nombreux utilisateurs préfèrent
   utiliser plusieurs systèmes de fichiers -- un pour chaque partie
   importante de l'arborescence des répertoires. Par exemple, vous pouvez
   créer un système de fichiers séparé pour y stocker tous les fichiers
   se trouvant sous le répertoire /usr. (Notez que sur les systèmes UNIX,
   ce sont les « / » qui délimitent les répertoires et non les '\' comme
   sous MS-DOS). En ce cas, vous aurez un système de fichiers racine et
   un système de fichiers /usr.

   Chaque système de fichiers nécessite sa propre partition. Par
   conséquent, si vous utilisez les systèmes de fichiers racine et /usr,
   vous devrez créer deux partitions Linux.

   De plus, beaucoup d'utilisateurs créent une _partition de swap_,
   utilisée pour la mémoire virtuelle. Si vous avez, disons, 4 Mo de
   mémoire installés sur votre machine, et une partition de swap de 10
   Mo, pour Linux vous aurez 14 Mo de mémoire virtuelle.

   Lorsqu'il utilise l'espace de swap, Linux déplace les pages mémoire
   inutilisées pour les mettre sur le disque, ce qui permet d'exécuter
   plus d'applications en même temps sur votre système. Cependant, ce
   déplacement est lent, et ne peut remplacer la mémoire physique réelle.
   Les applications qui nécessitent beaucoup de mémoire (comme X-Window)
   utilisent souvent un espace de swap lorsqu'ils n'ont pas assez de
   mémoire physique.

   Presque tous les utilisateurs de Linux emploient une partition de
   swap. Si vous avez 4 Mo de mémoire voire moins, une partition de swap
   est nécessaire pour installer Linux. De toutes façons, il est
   fortement recommandé d'avoir une partition de swap, sauf si vous
   disposez de beaucoup de RAM physique.

   La taille de votre partition de swap dépend de vos besoins en mémoire
   virtuelle. On conseille souvent d'avoir au moins 16 Mo de mémoire
   virtuelle : par conséquent, si vous avez 8 Mo de RAM physique, vous
   créerez une partition de swap de 8 Mo. Notez que la taille maximale
   des partitions de swap dépend de la plateforme; lisez le
   Partition-HOWTO si vous voulez créer une partition de swap de taille
   supérieure à 1 Go.

   Vous trouverez plus d'informations sur la théorie de la configuration
   de l'espace de swap et sur le partitionnement des disques dans le
   Linux Partition mini-HOWTO.

   Note : Il est possible, bien qu'un peu délicat, de partager les
   partitions de swap entre Linux et Windows 95 sur un système « dual
   boot ». Pour les détails, consultez le Linux Swap Space Mini-HOWTO.

   Remarque #1 : Si vous avez un disque EIDE avec une partition dépassant
   504 Mo, votre BIOS peut ne pas vous permettre de démarrer un système
   Linux qui y serait installé. Par conséquent, mettez votre partition
   racine sous ces 504 Mo. Il ne devrait pas y avoir de problèmes avec
   les disques SCSI qui ont généralement leur propre BIOS disque. Pour
   les détails techniques, consultez le Large Disk mini-HOWTO.

   Remarque #2 : Vous mélangez les disques IDE et SCSI ? Alors attention.
   Votre BIOS ne vous permettra peut-être pas de démarrer directement à
   partir d'un disque SCSI.
     _________________________________________________________________

6.4.2. Taille des partitions

   A côté de vos partitions racine et de swap, vous créerez une ou
   plusieurs partitions pour y mettre vos programmes et les répertoires
   d'accueil des utilisateurs.

   Bien qu'en théorie vous puissiez tout faire marcher avec une seule
   grosse partition, presque personne ne le fait. Disposer de plusieurs
   partitions a de nombreux avantages :

     * souvent, cela diminue le temps nécessaire aux vérifications des
       systèmes de fichiers qui sont effectuées au démarrage ;
     * les fichiers ne peuvent grandir au delà des frontières de
       partitions. En conséquence, vous pouvez utiliser ces frontières de
       partition comme des protections contre les programmes (comme les
       news Usenet) qui voudraient consommer d'énormes quantités de
       disque, afin de les empêcher de surpeupler l'espace disque
       nécessaire à votre noyau et au reste de vos applications ;
     * si jamais vous avez un problème sur votre disque, formater et
       récupérer une seule partition est une opération moins pénible que
       d'avoir à tout refaire en partant de zéro.

   Sur les disques actuels, une bonne configuration de base consiste en
   une petite partition racine (moins de 80 Mo), une partition /usr
   moyenne (environ jusqu'à 300 Mo) pour contenir les logiciels systèmes,
   et une partition /home occupant le reste de l'espace disque disponible
   pour les répertoires utilisateurs.

   Vous pouvez faire des choses plus élaborées. Par exemple, si vous
   savez que vous allez utiliser les forums Usenet, vous pouvez leur
   attribuer une partition qui leur sera dédiée afin de contrôler leur
   occupation disque maximale, ou créer une partition /var regroupant les
   fichiers du courrier, des news, et les fichiers temporaires. Mais, à
   l'heure des disques de très grandes capacités et très peu chers, ces
   complications semblent de moins en moins nécessaires pour les
   premières installations Linux. Pour votre premier essai, surtout,
   restez simple.
     _________________________________________________________________

6.5. Démarrer la disquette d'installation

   La première étape consiste à lancer la disquette de boot que vous avez
   créée. Normalement, tout devrait se passer sans problème ; le prompt
   de démarrage du noyau devrait se terminer automatiquement après 10
   secondes. Normalement, c'est ainsi que vous démarrerez à partir d'un
   disque IDE.

   Voilà ce qui se passe réellement : la disquette de boot fournit un
   système d'exploitation miniature qui (parce que le disque dur n'est
   pas prêt) utilise une partie de votre mémoire vive comme disque
   virtuel (appelée, tout à fait logiquement, « ramdisk »).

   La disquette de boot dépose dans le « ramdisk » un petit ensemble de
   fichiers et d'outils d'installation que vous utiliserez pour préparer
   votre disque dur et y installer un système Linux à partir de votre
   CD-ROM.

   (Autrefois cela se passait en deux temps, en faisant appel à une
   seconde disquette appelée « root disk » (disquette root) ; ceci a
   changé lorsque les modules noyau sont apparus).

   En donnant certaines options à la suite du nom du noyau, vous pouvez
   préciser différents paramètres matériels, comme l'IRQ et l'adresse de
   votre contrôleur SCSI, ou la géométrie du disque, avant de lancer le
   noyau Linux. Ce sera peut-être nécessaire si Linux ne détecte pas
   votre contrôleur SCSI ou la géométrie de votre disque, par exemple.

   Notamment, de nombreux contrôleurs SCSI nécessitent de spécifier
   l'adresse du port et l'IRQ au moment du démarrage. De même, les
   machines PS/1, ThinkPad, et ValuePoint d'IBM ne mémorisent pas la
   géométrie des disques dans la CMOS, et vous devrez alors la spécifier
   au démarrage. (Plus tard, vous saurez configurer votre système afin
   qu'il fournisse lui-même ces paramètres.)

   Faites attention aux messages qui s'affichent lors du démarrage du
   système. Ils énumèreront et décriront le matériel que votre
   installation Linux a détecté. Notamment, si vous avez un contrôleur
   SCSI, vous devriez voir une liste des hôtes SCSI détectés. Si vous
   voyez le message
   SCSI: 0 hosts

   cela veut dire que votre contrôleur SCSI n'a pas été reconnu, et que
   vous devez vous poser la question de savoir comment informer le noyau
   de son emplacement.

   Le système affichera aussi des informations sur les partitions et les
   périphériques détectés. Si l'une de ces informations n'est pas
   correcte, ou manque, vous devrez provoquer une détection du matériel.

   Si tout va bien et que votre matériel semble avoir été reconnu, vous
   pouvez passer à la section suivante, « Utiliser la disquette root ».

   Pour forcer la détection de votre matériel, vous devez entrer les
   paramètres corrects au prompt du démarrage en utilisant la syntaxe
   suivante :
   linux <paramètres...>

   Un bon nombre de paramètres sont disponibles ; nous donnons ci-dessous
   la liste des plus courants. Les disquettes de boot Linux récentes vous
   permettront, le plus souvent, de consulter un écran d'aide décrivant
   ceux-ci avant de démarrer.

     * _hd=cylindres,têtes,secteurs _: précise la géométrie du disque
       dur. Nécessaire pour des machines comme le PS/1, ValuePoint, et
       ThinkPad d'IBM. Par exemple, si votre disque dur a 683 cylindres,
       16 têtes et 32 secteurs par piste, entrez :

linux hd=683,16,32

       _tmc8xx=memaddr,irq _: précise l'adresse et l'IRQ pour les
       contrôleurs SCSI TMC-8xx de Future Domain. Par exemple :

linux tmc8xx=0xca000,5

       Notez que le préfixe _0x_ doit être utilisé pour les valeurs
       exprimées en hexadécimal. Ceci est vrai pour toutes les options
       suivantes.
     * _st0x=memaddr,irq _: précise l'adresse et l'IRQ pour les
       contrôleurs STO2 de Seagate.
     * _t128=memaddr,irq _: précise l'adresse et l'IRQ pour les
       contrôleurs T128B de Trantor.
     * _ncr5380=port,irq,dma _:précise le port, l'IRQ, et le canal DMA
       pour les contrôleurs NCR5380 génériques.
     * _aha152x=port,irq,scsi_id,1 _Précise le port, l'IRQ et
       l'identificateur SCSI pour les contrôleurs AIC-6260. Ceci
       s'applique aux contrôleurs Adaptec 1510, 152x, et
       Soundblaster-SCSI.

   Si vous avez des questions sur ces options de démarrage, lisez le
   _SCSI HOWTO_, disponible sur tous les sites archives FTP Linux (NdT :
   Une version française se trouve, comme pour tous les autres HOWTO
   traduits sur www.traduc.org. Ce document explique la compatibilité
   Linux et le SCSI bien plus en détail.
     _________________________________________________________________

6.5.1. Choisir une installation en mode texte ou graphique.

   Après l'installation, toutes les versions récentes de Linux démarrent
   en lançant un programme d'installation fenêtré qui vous guide de façon
   interactive à travers ces étapes en vous fournissant un maximum
   d'aide.

   Vous aurez sûrement la possibilité de configurer X, ainsi le programme
   d'installation pourra être graphique. Si vous choisissez cette façon
   de faire, le programme vous questionnera sur votre souris et votre
   type d'écran avant de commencer l'installation proprement dite.
   Lorsque l'installation de Linux aura été réalisée, cette configuration
   sera sauvegardée. Vous pourrez affiner le fonctionnement de votre
   écran plus tard, par conséquent, lors de cette étape, vous pouvez
   commencer avec un mode SVGA 640x480 de base.

   X n'est pas nécessaire pour l'installation, mais (en supposant que
   l'on sache configurer la souris et l'écran), beaucoup de gens trouvent
   l'interface graphique plus facile à utiliser. De toutes façons, vous
   serez amenés à installer X, donc le faire dès le début est une chose
   plutôt sensée.

   Suivez simplement les indications du programme. Elles vous guideront à
   travers les étapes nécessaires à la préparation du disque, à la
   création des comptes utilisateurs et à l'installation des paquetages à
   partir du CD-ROM.

   Dans ce qui suit, nous décrirons quelques parties épineuses de
   l'installation comme si vous les réalisiez à la main. Ceci devrait
   vous aider à comprendre ce que fait le programme d'installation, et
   pourquoi.
     _________________________________________________________________

6.5.2. Utiliser _fdisk_ et _cfdisk_

   Votre première étape d'installation, une fois que la disquette root
   Linux a été lancée, sera de créer ou d'éditer les tables de partitions
   de vos disques. Même si vous avez déjà utilisé FDISK pour configurer
   vos partitions, vous devez revenir à la table des partitions et
   rajouter des informations spécifiques à Linux.

   Pour créer ou éditer des partitions Linux, nous utiliserons la version
   Linux du programme _fdisk_, ou sa version orientée écran _cfdisk_.
   Notez que l'argument qui doit être donné à _fdisk_ doit être le
   périphérique correspondant à la totalité du disque (par exemple
   /dev/sda) et non le nom de l'une de ses partitions (comme /dev/sda1).

   En général, le programme d'installation recherchera une table des
   partitions déjà existante et proposera de lancer _fdisk_ ou _cfdisk_
   sur elle pour vous. Des deux programmes, _cfdisk_ est vraiment le plus
   facile à utiliser, mais ses versions actuelles sont aussi moins
   tolérantes vis-à-vis d'une table de partitions inexistante ou mal
   faite.

   Par conséquent, vous pouvez (surtout si vous faites une installation
   sur du matériel vierge) devoir commencer avec _fdisk_ afin de vous
   placer dans une situation que _cfdisk_ saura gérer. Essayez de lancer
   _cfdisk_ ; s'il y a des problèmes, lancez _fdisk_. (Une bonne façon de
   procéder, si vous créez un système tout Linux et que _cfdisk_ provoque
   des erreurs, est d'utiliser _fdisk_ pour détruire toutes les
   partitions existantes et de relancer _cfdisk_ pour éditer la table
   vide.)

   Quelques remarques sur _fdisk_ et _cfdisk_ : les deux programmes
   prennent en paramètre le nom du disque sur lequel vous souhaitez créer
   les partitions Linux. Les noms des pilotes de disques durs sont :

     * /dev/hda Premier disque IDE
     * /dev/hdb Second disque IDE
     * /dev/sda Premier disque SCSI
     * /dev/sdb Second disque SCSI

   Par exemple, pour créer des partitions Linux sur le premier disque dur
   SCSI de votre système, utilisez la commande (votre programme
   d'installation peut la générer à partir d'un choix du menu) :
   cfdisk /dev/sda

   Si vous utilisez _fdisk_ ou _cfdisk_ sans paramètre, /dev/hda est pris
   par défaut.

   Pour créer des partitions Linux sur le second disque de votre système,
   spécifiez simplement soit /dev/hdb (pour un disque IDE), soit /dev/sdb
   (pour un disque SCSI) au moment de lancer _fdisk_.

   Vos partitions Linux n'ont pas besoin d'être toutes sur le même
   disque. Par exemple, vous pouvez créer la partition du système de
   fichier racine sur /dev/hda et votre partition de swap sur /dev/hdb.
   Pour ce faire, lancez simplement _fdisk_ ou _cfdisk_ une seule fois
   pour chaque disque.

   Sous Linux, les partitions ont un nom basé sur le disque auquel elles
   appartiennent. Par exemple, la première partition du disque /dev/hda
   s'appelle /dev/hda1, la seconde /dev/hda2, et ainsi de suite. Si vous
   avez des partitions logiques, elles sont numérotées en partant de
   /dev/hda5, /dev/hda6 etc.

   Note

   Il est préférable de ne pas créer, ou détruire, des partitions
   d'autres systèmes d'exploitation que Linux avec les programmes _fdisk_
   ou _cfdisk_ de Linux. Autrement dit, ne créez pas ou ne supprimez pas
   des partitions MS-DOS avec cette version de _fdisk_ ; utilisez plutôt
   la version MS-DOS de _FDISK_. Si vous essayez de créer une partition
   MS-DOS avec le _fdisk_ de Linux, il y a de grandes chances pour que
   MS-DOS ne reconnaisse pas cette partition et ne se lance pas
   correctement.

   Voici un exemple d'utilisation de _fdisk_. Nous avons une unique
   partition MS-DOS occupant 61693 blocs sur le disque, le reste est
   disponible pour Linux. Sous Linux, un bloc fait 1024 octets, par
   conséquent 61693 blocs représentent à peu près 61 Mo. Nous ne créerons
   que deux partitions dans cet exemple : une pour le swap et une pour la
   racine. Vous étendrez probablement cette configuration à quatre
   partitions en ligne selon les recommandations suivantes : une pour le
   swap, une pour le système de fichiers racine, une pour les logiciels
   systèmes et une pour la zone des répertoires des utilisateurs.

   D'abord, nous utilisons la commande «_ p _» pour afficher la table de
   partition courante. Comme on peut le constater, /dev/hda1 (qui est la
   première partition de /dev/hda) est une partition DOS de 61693 blocs.
Command (m for help):   p
Disk /dev/hda: 16 heads, 38 sectors, 683 cylinders
Units = cylinders of 608 * 512 bytes

  Device Boot  Begin   Start     End  Blocks   Id  System
/dev/hda1   *       1       1     203   61693    6  DOS 16-bit >=32M

Command (m for help):

   Puis, nous utilisons la commande «_ n _» pour créer une nouvelle
   partition. La partition racine Linux aura une taille de 80 Mo.
Command (m for help):  n
Command action
    e   extended
    p   primary partition (1-4)
p

   On nous donne alors le choix entre la création d'une partition étendue
   ou primaire. Dans la plupart des cas, on utilisera des partitions
   primaires, à moins que l'on ait besoin de plus de quatre partitions
   sur un même disque. Voir la section sur le repartitionnement,
   ci-dessous, pour plus d'informations.
Partition number (1-4): 2
First cylinder (204-683):  204
Last cylinder or +size or +sizeM or +sizeK (204-683): +80M

   Le premier cylindre doit être le premier cylindre libre APRÈS la fin
   de la partition précédente.. Dans notre cas, /dev/hda1 se termine sur
   le cylindre 203, nous démarrerons donc la nouvelle partition au
   cylindre 204.

   Comme on peut le constater, si l'on utilise la notation « +80M »,
   celle-ci spécifie une partition de 80 Mo. De même, la notation
   « +80K » spécifierait une partition de 80 Ko, et « +80 » une partition
   qui ne ferait que 80 octets.
   Warning: Linux cannot currently use 33090 sectors of this partition

   Si vous voyez cet avertissement, vous pouvez l'ignorer. Il provient
   d'une ancienne restriction qui limitait les systèmes de fichiers Linux
   à 64 Mo. Cependant, avec les nouveaux types de systèmes de fichiers,
   ce n'est plus le cas... Les partitions peuvent aller jusqu'à 4 To.

   Puis, nous créeons notre partition de swap de 10 Mo, /dev/hda3.
Command (m for help): n
Command action
    e   extended
    p   primary partition (1-4)
p

Partition number (1-4): 3
First cylinder (474-683):  474
Last cylinder or +size or +sizeM or +sizeK (474-683):  +10M

   À nouveau, nous affichons le contenu de la table de partition.
   Assurez-vous de noter ces informations, notamment la taille de chaque
   partition en blocs. Vous en aurez besoin plus tard.
Command (m for help): p
Disk /dev/hda: 16 heads, 38 sectors, 683 cylinders
Units = cylinders of 608 * 512 bytes

   Device Boot  Begin   Start     End  Blocks   Id  System
/dev/hda1   *       1       1     203   61693    6  DOS 16-bit >=32M
/dev/hda2         204     204     473   82080   83  Linux native
/dev/hda3         474     474     507   10336   83  Linux native

   Notez que la partition de swap Linux (ici, /dev/hda3) a le type
   « Linux native ». On doit changer ce type en « Linux swap  » afin que
   le programme d'installation la reconnaisse comme partition de swap.
   Pour ce faire, on utilise la commande «_ t _» de _fdisk_ :
Command (m for help): t
Partition number (1-4): 3
Hex code (type L to list codes): 82

   Si vous utilisez «_ L _» pour obtenir la liste des types, vous verrez
   que 82 est le type qui correspond au swap Linux.

   Pour quitter _fdisk_ et sauvegarder les changements dans la table de
   partition, on utilise la commande «_ w _». Pour quitter _fdisk_ SANS
   sauvegarder les changements, on utilise la commande «_ q _».

   Après avoir quitté _fdisk_, le système peut vous demander de relancer
   le système afin d'être sûr que les modifications soient prises en
   compte. En général, on n'a pas besoin de redémarrer après avoir
   utilisé _fdisk_ -- les versions récentes de _fdisk_ et _cfdisk_ sont
   suffisamment évoluées pour mettre à jour les partitions sans
   redémarrer.
     _________________________________________________________________

6.5.3. Étapes suivantes

   Après avoir édité les tables de partitions, le programme
   d'installation devrait les consulter et vous proposer d'activer la
   partition de swap. Répondez oui.

   (Attention, il se peut que, sur un système « dual boot », l'une des
   partitions non Linux apparaisse comme une partition de swap)

   Puis, le programme vous demandera d'associer des noms de systèmes de
   fichiers Linux (comme /, /usr, /var, /tmp, /home, /home2, etc.) à
   chacune des partitions non swap que vous désirez utiliser.

   Il existe une seule règle pour cela. Il doit y avoir un système de
   fichiers racine, appelé /, et on doit pouvoir démarrer dessus. Vous
   pouvez appeler vos autres partitions Linux comme vous voulez, mais
   certaines conventions concernant leurs noms vous simplifieront
   probablement la vie plus tard.

   Plus haut, je recommandais une configuration basée sur trois
   partitions comprenant une petite racine, une partition système moyenne
   et une grosse partition utilisateur. Traditionnellement, elles doivent
   s'appeler /, /usr, et /home. Le nom peu intuitif « /usr » vient des
   temps où les systèmes Unix (beaucoup plus petits) mélangaient les
   logiciels systèmes et les répertoires utilisateurs sur une seule
   partition non racine. Le fonctionnement de certains logiciels dépend
   de son existence.

   Si vous avez plus d'une zone pour les répertoires des utilisateurs, la
   convention veut qu'on les nomme /home, /home2, /home3, etc. Ceci peut
   arriver lorsque l'on a deux disques physiques. Sur mon système, par
   exemple, la configuration est la suivante :
Filesystem         1024-blocks  Used Available Capacity Mounted on
/dev/sda1              30719   22337     6796     77%   /
/dev/sda3             595663  327608   237284     58%   /usr
/dev/sda4            1371370    1174  1299336      0%   /home
/dev/sdb1            1000949  643108   306130     68%   /home2

   En réalité, le second disque (/sdb1) n'est pas entièrement dédié à
   /home2 ; les partitions de swap sur sda et sdb ne sont pas montrées
   dans cette liste. Vous pouvez constater que /home est l'importante
   zone libre sur sda et /home2 la zone utilisateurs sur sdb.

   Si vous voulez créer une partition pour les fichiers spool,
   temporaires, de courriers, et des news, appelez-la /var. Sinon, faites
   un /usr/var et créez un lien symbolique nommé /var pointant dessus (le
   programme d'installation peut vous proposer de le faire).
     _________________________________________________________________

6.6. Installer les paquetages

   Lorsque vos partitions ont été préparées, le reste de l'installation
   est presque automatique. Votre programme d'installation (qu'il soit en
   mode texte ou graphique X) vous guidera à travers une série de menus
   qui vous permettront de spécifier le CD-ROM à partir duquel vous
   installez, les partitions à utiliser, etc.

   Nous n'allons pas décrire ici la plupart des spécificités de cette
   étape d'installation. C'est une des parties qui varie le plus entre
   les distributions Linux (généralement, les distributeurs y rivalisent
   entre eux pour valoriser leur produit), mais c'est aussi la plus
   simple. Les programmes d'installation sont plutôt bien auto-documentés
   et avec de bons écrans d'aide.
     _________________________________________________________________

6.7. Après l'installation des paquetages

   Lorsque l'installation est finie, et que tout s'est bien passé, le
   programme vous proposera plusieurs options pour configurer votre
   système avant son premier démarrage à partir du disque dur.
     _________________________________________________________________

6.7.1. LILO, le LInux LOader

   LILO (qui signifie LInux LOader) est un programme vous permettant de
   lancer Linux (ainsi que d'autres systèmes d'exploitation comme MS-DOS)
   à partir de votre disque dur.

   On peut vous donner la possibilité d'installer LILO sur votre disque
   dur. A moins que vous n'utilisiez OS/2, répondez « oui ». OS/2 a des
   besoins particuliers, voir la section Configuration personnalisée de
   LILO ci-dessous.

   Installer LILO comme chargeur principal évite d'avoir besoin d'une
   disquette de démarrage ; au lieu de cela, à chaque démarrage, vous
   pouvez indiquer à LILO quel système lancer.
     _________________________________________________________________

6.7.2. Créer une disquette de démarrage (option)

   Il est possible que l'on vous propose de créer une « disquette de
   démarrage standard », que vous pourrez utiliser pour lancer votre
   système Linux nouvellement installé. (Il s'agit d'une ancienne
   méthode, plutôt peu pratique, qui suppose que vous démarrez
   normalement sur DOS et que vous utilisez une disquette de démarrage
   pour lancer Linux.)

   Pour la créer, vous aurez besoin d'une disquette haute-densité,
   formatée MS-DOS et vierge. Insérez celle-ci lorsqu'on vous le demande
   et la disquette de démarrage sera générée. (Ce n'est pas la même chose
   qu'une disquette de démarrage d'installation, et vous ne pouvez
   remplacer l'une par l'autre !)
     _________________________________________________________________

6.7.3. Configurations système diverses

   La procédure qui suit l'installation peut aussi vous conduire à
   travers différents menus vous permettant de configurer votre système.
   Ceci comprend la spécification de votre modem et de votre souris,
   ainsi que votre zone horaire. Laissez-vous guider par les options du
   menu.

   Elle peut aussi vous demander de créer des comptes utilisateurs ou de
   donner un mot de passe pour le compte root (administrateur). Ce n'est
   pas compliqué et vous n'avez qu'à suivre les instructions affichées à
   l'écran.
     _________________________________________________________________

7. Démarrer votre nouveau système

   Si tout se passe comme prévu, vous devriez pouvoir démarrer Linux à
   partir du disque dur en utilisant LILO. Sinon, vous devriez pouvoir
   lancer votre disquette de démarrage Linux (pas la disquette de
   démarrage originale, mais celle créée après l'installation des
   paquetages). Après le démarrage, loggez vous sous le login _root_.
   Bravo ! Vous avez votre système Linux personnel.

   Si vous démarrez en utilisant LILO, essayez de presser les touches
   _shift_ ou _contrôle_ pendant le démarrage. Ceci vous présentera une
   invite de démarrage ; pressez la touche _tab_ pour avoir la liste des
   options. De cette façon, vous pourrez lancer Linux, MS-DOS, ou
   n'importe quel système directement à partir de LILO.
     _________________________________________________________________

8. Après votre premier démarrage

   Vous devriez maintenant voir l'invite de login de Linux. Félicitations
   !

   Le document « GNU/Linux post-install procedures »donne quelques bonnes
   suggestions concernant ce que vous devez faire juste après
   l'installation pour avoir moins de problèmes après.
     _________________________________________________________________

8.1. Début de l'administration système

   Selon les phases d'installation, vous pouvez maintenant être amenés à
   créer des comptes, changer le nom de votre machine, ou (re)configurer
   X. Il y a beaucoup d'autres choses que vous pouvez mettre en place et
   configurer, par exemple les dispositifs de sauvegarde, les liaisons
   SLIP/PPP vers un fournisseur d'accès Internet, etc.

   Un bon livre sur l'administration des systèmes UNIX devrait vous y
   aider. Je suggère _Essential Systems Administration_, édité par
   O'Reilly and Associates (NdT: disponible en français sous le titre
   « _Les bases de l'administration système_ »). Vous devriez aussi lire
   les divers autres HOWTO Linux, comme le _NET-3-HOWTO_ et
   _Printing-HOWTO_ (NdT : disponibles en français, comme la majeure
   partie des autres HOWTO , sur le site www.traduc.org), pour obtenir
   des informations sur les autres tâches de configuration.
     _________________________________________________________________

8.2. Configuration personnalisée de LILO

   LILO est un chargeur de boot pouvant être utilisé pour choisir soit
   Linux, soit MS-DOS ou un autre système d'exploitation au démarrage. Il
   y a de grandes chances pour que votre distribution ait automatiquement
   configuré LILO pour vous lors de l'installation (à moins que vous
   n'utilisiez OS/2, c'est ce que vous devriez avoir fait). Si c'est le
   cas vous pouvez sauter le reste de cette section.

   Si vous avez installé LILO comme chargeur de boot _principal_,
   celui-ci prendra en charge la première étape du processus de démarrage
   pour tous les systèmes d'exploitation présents sur votre disque. Ceci
   fonctionne bien si MS-DOS est le seul autre système d'exploitation
   installé. Cependant, vous pouvez aussi utiliser OS/2, qui a son propre
   gestionnaire de démarrage. En ce cas, le gestionnaire de démarrage
   d'OS/2 doit être le chargeur de boot principal et vous n'utiliserez
   LILO (comme chargeur de boot _secondaire_) que pour lancer Linux.

   Remarque importante pour ceux qui utilisent des systèmes EIDE : à
   cause d'une limitation du BIOS, vos secteurs de boot doivent se
   trouver sur l'un des deux premiers disques physiques, ceci quel que
   soit le système d'exploitation. Sinon, LILO s'arrêtera après avoir
   affiché « LI », d'où que vous le lanciez.

   Si vous devez configurer LILO manuellement, il faut éditer le fichier
   /etc/lilo.conf. Nous présentons ci-dessous un exemple de fichier de
   configuration LILO, où la partition racine de Linux se trouve sur
   /dev/hda2, et où MS-DOS est installé sur /dev/hdb1 (second disque
   dur).
# Indique à LILO qu'il doit s'installer comme chargeur principal sur /dev/hda.
boot = /dev/hda
# Image de démarrage à installer ; vous n'avez probablement pas à la changer
install = /boot/boot.b

# Enchainement pour le démarrage de Linux.
image = /vmlinuz       # Le noyau est dans /vmlinuz
label = linux        # on lui donne le nom "linux"
root = /dev/hda2     # on utilise /dev/hda2 comme système de fichiers racine
vga = ask            # Demande pour le mode VGA
append = "aha152x=0x340,11,7,1"  # Ajoutez ceci aux options de démarrage,
                                   pour détecter le contrôleur SCSI

# Enchaînement pour le démarrage de MS-DOS
other = /dev/hdb1      # La partition MS-DOS
label = msdos        # on lui donne le nom "msdos"
table = /dev/hdb     # Table de partition pour le second disque

   Après avoir édité etc/lilo.conf, lancez la commande _/sbin/lilo_ sous
   le compte _root_. Ceci installera LILO sur votre disque. Notez que
   vous devez relancer _/sbin/lilo_ à chaque recompilation de votre noyau
   afin de faire correctement pointer le chargeur de boot sur le nouveau
   noyau (vous n'avez pas besoin de vous soucier de cela pour le moment,
   mais rappelez-vous en).

   Remarquez comment l'option _append_ est utilisée dans /etc/lilo.conf
   pour spécifier les paramètres de démarrage comme nous l'avons fait
   lorsque nous avons démarré à partir de la disquette de boot.

   Vous pouvez maintenant relancer votre système à partir du disque dur.
   Par défaut, LILO lancera le premier système d'exploitation présent
   dans la liste du fichier de configuration : Linux dans notre cas. Afin
   de disposer d'un menu de démarrage vous permettant de choisir un autre
   système d'exploitation, maintenez les touches _shift_ ou _ctrl_
   enfoncées pendant que le système démarre ; vous devriez voir le
   message suivant (ou équivalent) :
   Boot:

   Entrez alors le nom du système d'exploitation que vous voulez lancer
   (donné par la ligne _label_ du fichier de configuration ; ici, soit
   _linux_ soit _msdos_), ou pressez _tab_ pour en avoir la liste.

   (NdT : Attention, à ce moment votre clavier est encore en QWERTY !)

   Supposons maintenant que vous utilisiez LILO comme chargeur de boot
   secondaire ; si vous voulez lancer Linux à partir du gestionnaire de
   démarrage d'OS/2, par exemple. Afin de démarrer une partition Linux à
   partir du gestionnaire de démarrage d'OS/2, malheureusement, vous
   devez créer la partition en utilisant le _FDISK_ d'OS/2 (pas celui de
   Linux), et formater celle-ci en type FAT ou HPFS pour qu'OS/2 la
   reconnaisse. (Merci IBM...)

   Afin que LILO lance Linux à partir du gestionnaire de démarrage
   d'OS/2, installez LILO sur votre système de fichiers racine
   (/dev/hda2, dans l'exemple). En ce cas, le fichier de configuration
   devrait ressembler à ceci :
boot = /dev/hda2
install = /boot/boot.b
compact

image = /vmlinuz
  label = linux
  root = /dev/hda2
  vga = ask

   Notez le changement dans la ligne _boot_. Après avoir lancé
   _/sbin/lilo_ vous devriez pouvoir ajouter la partition Linux au
   gestionnaire de démarrage. Ce mécanisme devrait fonctionner pour les
   chargeurs de boot d'autres systèmes d'exploitation.
     _________________________________________________________________

9. Administrivia

9.1. Conditions d'utilisations

   Ce document est copyright 1998 par Eric S. Raymond. Vous pouvez
   l'utiliser, le distribuer et le reproduire librement à condition de :

     * ne pas omettre ou modifier cette note de copyright (vous pouvez la
       traduire) ;
     * ne pas omettre ou modifier le numéro de version et la date ;
     * ne pas omettre ou modifier le pointeur du document sur la version
       WWW actuelle ;
     * clairement indiquer les versions résumées ou modifiées comme
       telles.

   Ces restrictions sont destinées à protéger les lecteurs potentiels
   contre des versions obsolètes ou mutilées. Si vous pensez avoir une
   bonne raison qui pourrait justifier une exception, demandez-le moi.
     _________________________________________________________________

9.2. Remerciements

   Merci à Matt D. Welsh, qui est à l'origine de ce HOWTO. J'ai ôté
   beaucoup des contenus spécifiques à la distribution Slackware et
   recentré le reste de ce document sur une installation CD-ROM, mais une
   part importante de son contenu est toujours de lui.

   La version 4.1 a été susbtantiellement améliorée par les suggestions
   de David Shao <dshao@best.com>.
