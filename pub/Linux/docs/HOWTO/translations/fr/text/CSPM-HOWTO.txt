  Guide pratique de CSPM, l'outil de suivi des performances du système

  Version française du Complete System Performance Monitor HOWTO

  Chris Lorenz

   <lorenzc CHEZ us POINT ibm POINT com>

   Adaptation française: Simon Depiets

   Relecture de la version française: Guillaume Lelarge,
   Jean-Philippe Guérard

   Préparation de la publication de la v.f.: Jean-Philippe Guérard

   Version : 2.0.fr.1.0

   3 décembre 2004

   +----------------------------------------------------------------+
   | Historique des versions                                        |
   |----------------------------------------------------------------|
   | Version 2.0.fr.1.0       | 2004-12-03       | SD, GL, JPG      |
   |----------------------------------------------------------------|
   | Première adaptation française.                                 |
   |----------------------------------------------------------------|
   | Version 2.0              | 2003-06-10       | CL               |
   +----------------------------------------------------------------+

   Résumé

   L'outil de suivi des performances du système (CSPM, acronyme de
   Complete System Performance Monitor) est un outil graphique qui
   surveille l'utilisation du processeur, de la mémoire, du stockage,
   du réseau et des IRQ d'un système Linux. CSPM recueille ces
   données automatiquement et génère des histogrammes de
   l'utilisation du système.

   Ce guide pratique fournit un aperçu de CSPM, une description du
   produit et des informations sur la façon de le configurer.

   -------------------------------------------------------------------

   Table des matières

   1. Droits d'utilisations et informations légales

   2. Copyright and legal notice

   3. Qu'est-ce que CSPM ?

   4. Configuration minimale

   5. Installer CSPM et ses dépendances

                5.1. Installer Qt, version 3.0 ou ultérieure

                5.2. Installer CSPM

                5.3. Lancer CSPM

   6. Modifier les options de CSPM

   7. Affichage des données

                7.1. Onglet System Overview (aperçu du système)

                7.2. Onglet IRQ (interruptions)

                7.3. Onglet CPU Utilization (utilisation du
                processeur)

                7.4. Onglet Memory (mémoire)

                7.5. Onglet Network (réseau)

                7.6. Onglet Storage (stockage)

                7.7. Onglet Tests

                7.8. Onglet Tests summary (synthèse des tests)

1. Droits d'utilisations et informations légales

   [1][Important] Important                      
                  Le texte ci-dessous est la version française de la
                  licence de ce document. Seule la version originale
                  de cette licence, présentée dans la section
                  suivante, fait foi.            

   Copyright © 2003 IBM Corporation. Tous droits réservés.

   Ce document vous est fourni tel quel, sans garantie explicite ou
   implicite. L'utilisation des informations contenues dans ce
   document est à vos risques et périls.

   Linux est une marque déposée par Linus Torvalds. Les autres noms
   d'entreprises, de produits et de services peuvent avoir été
   déposés.

   Vous est autorisé à copier, distribuer et modifier la version
   originale de ce document selon les termes de la Licence de
   documentation libre GNU (GFDL), version 1.1 ou ultérieure, telle
   que publiée par la Free Software Foundation ; sans section
   inaltérable, ni texte de première de couverture, ni texte de
   quatrième de couverture. Une copie de cette licence est disponible
   sur : http://www.gnu.org/licenses/fdl.txt
   [http://www.gnu.org/licenses/fdl.txt].

   Copyright © 2004 Simon Depiets, Guillaume Lelarge et Jean-Philippe
   Guérard pour la version française

   La version française de ce guide pratique est publiée en accord
   avec les termes de la licence de documentation libre GNU (GFDL)
   sans section invariante, sans texte de première de couverture ni
   texte de quatrième de couverture. Une copie (en anglais) de la
   licence est disponible sur http://www.gnu.org/copyleft/fdl.html
   [http://www.gnu.org/copyleft/fdl.html].

2. Copyright and legal notice

   [2][Important] Important                      
                  Le texte ci-dessous est la licence de ce document.
                  Ce texte fait foi. Il est composé de la licence en
                  anglais du document orignal, suivi de la licence en
                  français de sa traduction.     

   Copyright © 2003 IBM Corporation. All rights reserved.

   This document is provided "AS IS," with no express or implied
   warranties. Use the information in this document at your own risk.

   Linux is a registered trademark of Linus Torvalds. Other company,
   product, and service names may be trademarks or service marks of
   others.

   Permission is granted to copy, distribute, and/or modify this
   document under the terms of the GNU Free Documentation License,
   Version 1.1 or any later version published by the Free Software
   Foundation with no Invariant Sections, no Front-Cover text, and no
   Back-Cover text. A copy of the license can be found at
   http://www.gnu.org/licenses/fdl.txt
   [http://www.gnu.org/licenses/fdl.txt].

   Copyright © 2004 Simon Depiets, Guillaume Lelarge et Jean-Philippe
   Guérard pour la version française

   La version française de ce guide pratique est publiée en accord
   avec les termes de la licence de documentation libre GNU (GFDL)
   sans section invariante, sans texte de première de couverture ni
   texte de quatrième de couverture. Une copie (en anglais) de la
   licence est disponible sur http://www.gnu.org/copyleft/fdl.html
   [http://www.gnu.org/copyleft/fdl.html].

3. Qu'est-ce que CSPM ?

   L'outil de suivi des performances du système (CSPM, acronyme de
   Complete System Performance Monitor), écrit par Don Dupuis de la
   société Compaq, est un outil graphique qui surveille l'utilisation
   du processeur, de la mémoire, du stockage, du réseau et des IRQ
   d'un système Linux. CSPM recueille ces données automatiquement et
   génère des histogrammes de l'utilisation du système.

4. Configuration minimale

   CSPM, version 1.0 ou ultérieure, nécessite :

     o Une distribution Linux Red Hat 7.2 ou ultérieure, Mandrake 8.2
       ou ultérieure, ou toute distribution utilisant un noyau Linux
       dans lequel la modification de Stephen Tweedie pour sar ou
       sysstat a été appliqué (c'est le cas des noyaux Linux 2.4.20
       et ultérieurs).

     o L'environnement de développement C++ Trolltech Qt3.0 ou
       ultérieure, qui est disponible gratuitement sur le site de
       Trolltech.

5. Installer CSPM et ses dépendances

   Cette section explique comment récupérer l'environnement de
   développement Qt et l'installer.

  5.1. Installer Qt, version 3.0 ou ultérieure

   Qt, version 3.0 ou ultérieure, doit être installé sur le système
   avant d'installer CSPM. Suivez ces étapes pour récupérer et
   installer Qt :

    1. téléchargez la dernière version de la version libre de Qt pour
       X11 (« Qt/X11 Open Source Edition ») sur www.trolltech.com
       [http://www.trolltech.com] (Attention ! Ce site est en anglais
       uniquement) ;

    2. suivez les instructions (en anglais) de Trolltech pour
       installer Qt ;

    3. lancez ./configure avec l'option -thread pour que Qt
       fonctionne en mode multifils :

 # ./configure -thread

    4. assurez-vous que vous exportez les variables d'environnement
       QTDIR et LD_LIBRARY_PATH, ainsi que le décrivent les
       instructions d'installation de Qt distribuées avec le
       logiciel.

  5.2. Installer CSPM

   Les sections suivantes expliquent comment télécharger et installer
   CSPM. Ces étapes doivent être effectuées sous le compte
   utilisateur root. Le processus d'installation crée un répertoire
   appelé spm et place tous les fichiers dans ce répertoire.

    5.2.1. Installer depuis le rpm

   Suivez ces étapes pour installer CSPM depuis le paquet RPM :

    1. Téléchargez le paquet RPM de CSPM depuis le site de
       SourceForge sur http://sourceforge.net/projects/cspm/
       [http://sourceforge.net/projects/cspm/]. Le nom du programme
       pour CSPM est spm2.

    2. Installez le logiciel avec la commande

 # rpm -ihv --nodeps spm2-1.0-1.586.rpm

       Le RPM crée le binaire appelé spm2 dans le répertoire courant.

    5.2.2. Installer depuis l'archive tar

   Suivez ces étapes pour installer CSPM depuis l'archive tar :

    1. Téléchargez l'archive tar de CSPM depuis le site de
       SourceForge sur http://sourceforge.net/projects/cspm/
       [http://sourceforge.net/projects/cspm/]. Le nom du programme
       pour CSPM est spm2.

    2. Décompressez le fichier spm2.tar.gz avec la commande :

 # tar xvzf spm2.tar.gz

    3. Compilez CSPM :

 # make all

       La commande make crée le fichier binaire appelé spm2 dans le
       répertoire courant.

  5.3. Lancer CSPM

   Le programme spm2 devrait être lancé sous un compte utilisateur
   non privilégié, car autement les préférences utilisateurs ne sont
   pas enregistrées.

   Saisissez la commande suivante dans le répertoire où CSPM est
   installé :

 # ./spm2

   Si une erreur de segmentation intervient durant le démarrage de
   spm2, assurez-vous d'avoir défini les variables QTDIR et
   LD_LIBRARY_PATH, comme décrit dans les instructions d'installation
   livrées avec Qt.

6. Modifier les options de CSPM

   Par défaut, il y a 5 lignes de quadrillage le long de l'axe des y
   de chaque histogramme. Quand il n'y a pas d'activité pour un
   périphérique particulier, CSPM utilise les graduations par défaut
   0  0,2 ; 0,4 ; 0,6 et 0,8. Lorsque l'activité commence, CSPM
   défini les cinq graduations à intervalle régulier de 0 à la plus
   haute valeur collectée. Parfois, le quadrillage tombera pile sur
   les nombres de la barre, rendant ces nombres difficiles à lire.
   Vous pourrez soit ajuster la couleur du quadrillage, soit ajuster
   l'intervalle, soit essayer d'ignorer le quadrillage.

   Vous pouvez modifier le quadrillage, la taille et les options du
   contrôleur pour chaque vue depuis le menu Preferences
   (préférences). Depuis ce menu, vous pourrez sélectionner les
   entrées System (système), Tests, CPU (processeur), Memory
   (mémoire), Network (réseau), Storage (stockage) et IRQ
   (interruptions). Une fois que vous aurez sélectionné une de ces
   entrées, vous pourrez voir Grid (quadrillage) et Monitor
   (contrôleurs) ou Sizing (taille) pour chaque élément.

   Depuis l'onglet Grid (quadrillage), vous pourrez modifier des
   éléments comme :

     o la couleur des lignes du quadrillage ;

     o la distance (ou le temps) en secondes séparant les collectes
       de données (des barres apparaissent à chaque collecte) ;

     o la couleur des différentes barres, comme read (lectures),
       write (écritures), user (utilisateur), nice (priorité
       modifiée) et sys (système) ;

     o le nombre de barres horizontales (cinq par défaut) ;

     o la taille des titres d'histogrammes.

   Depuis l'onglet Monitor (contrôleur), vous pourrez par exemple
   modifier :

     o la largeur et la hauteur des boîtes d'affichage (en points) ;

     o la couleur de ces boîtes ;

     o le type de données devant être contrôlé (entrée/sortie,
       données, lectures et écritures, secteurs et blocs).

   Depuis l'onglet Taille, vous pourrez changer la largeur et la
   hauteur minimale des boîtes d'affichage (en points).

7. Affichage des données

   CSPM affiche des histogrammes fournissant des informations sur
   l'utilisation du système. Le programme a huit onglets d'affichage
   pour les différents types d'informations système que CSPM
   collecte. Ces onglets sont :

     o System Overview (aperçu du système) ;

     o IRQ (interruptions) ;

     o CPU Utilization (utilisation du processeur) ;

     o Memory (mémoire) ;

     o Network (réseau) ;

     o Storage (stockage) ;

     o Tests ;

     o Tests summary (synthèse des tests).

   Les légendes en bas de chaque table d'histogrammes vous expliquent
   comment interpréter les différentes couleurs représentant les
   données.

   Utilisez les barres de défilement verticales et horizontales pour
   voir les histogrammes qui ne tiennent pas sur l'écran initial.

  7.1. Onglet System Overview (aperçu du système)

   Quand CSPM démarre, l'onglet System Overview est affiché. Les
   histogrammes de cet l'onglet montrent les informations relatives
   au système entier, notamment l'utilisation du processeur, de la
   mémoire, du réseau et du stockage. La capture d'écran suivante
   montre un exemple de ce qu'affiche cet onglet.

   [3][IMG]

   Sous chaque histogramme se trouve une légende décrivant les
   données représentées. Par exemple dans l'histogramme Cpu Total
   (utilisation globale du processeur), les barres rouges
   représentent l'utilisation du processeur par l'utilisateur, les
   barres vertes représentent les commandes ayant une priorité
   modifiée et les barres bleues représentent l'utilisation du
   processeur par le système.

  7.2. Onglet IRQ (interruptions)

   Quand vous cliquez sur l'onglet IRQ, un histogramme s'ouvre pour
   chaque ligne d'interruption (IRQ) reliée à un connecteur ISA du
   système. La capture d'écran suivante montre un exemple de cet
   onglet.

   [4][Note] Note                           
             Avec Qt 3.0, les barres de défilement horizontales de
             l'onglet IRQ ne fonctionnent pas. Ce problème disparaît
             avec Qt 3.1.                   

   [5][IMG]

   Le nombre de grande taille en bleu à gauche de l'histogramme est
   le numéro de l'interruption. Les barres rouges représentent le
   nombre d'interruptions utilisées par secondes par le périphérique
   connecté au connecteur ISA de cette ligne d'interruption.

  7.3. Onglet CPU Utilization (utilisation du processeur)

   Quand vous cliquez sur l'onglet CPU Utilization (utilisation du
   processeur), un histogramme s'ouvre pour chaque processeur du
   système, comme dans la capture d'écran suivante :

   [6][IMG]

   L'histogramme montre des informations sur les processus
   utilisateur (rouge), les processus système (bleu) et ceux dont la
   priorité a été modifiée (vert).

  7.4. Onglet Memory (mémoire)

   Cet onglet est encore en développement. Dans une version future de
   CSPM, il montrera graphiquement la quantité de mémoire utilisée
   par les processus.

  7.5. Onglet Network (réseau)

   Quand vous cliquez sur cet onglet, des histogrammes montrant la
   quantité de données transitant sur la carte réseau virtuelle
   loopback (en boucle) du système et sur chaque périphérique réseau
   sont affichés, comme on peut le voir dans la capture d'écran qui
   suit.

   [7][IMG]

   Les envois sont en rouge et les réceptions en bleu.

  7.6. Onglet Storage (stockage)

   Quand vous cliquez sur cet onglet, un groupe d'histogrammes
   s'ouvre, montrant des données sur les contrôleurs, les disques et
   les partitions. La légende en bas de l'histogramme indique quelle
   couleur d'histogramme correspond à quel type de périphérique.

   [8][IMG]

   Sur la capture d'écran, les couleurs sont le mauve pour les
   contrôleurs, le vert pour les disques et l'orange pour les
   partitions. Les barres rouges représentent les lectures depuis le
   périphérique et les barres bleues les écritures vers le
   périphérique.

   Pour avoir des informations sur une partition (comme son nom dans
   le système de fichier, l'espace utilisé et l'espace disponible),
   faites un clic droit sur le histogramme de la partition puis un
   clic gauche sur Properties (propriétés). Une fenêtre d'état de la
   partition apparaîtra montrant les informations relatives à la
   partition sélectionnée.

   [9][IMG]

  7.7. Onglet Tests

   Cet onglet ouvre une liste de tests qui peuvent être lancés sur le
   système, ce qui est pratique, par exemple, pour les techniciens
   réalisant des contrôles d'assurance qualité et qui ont besoin de
   charger des systèmes de test pour des essais matériels et
   logiciels.

  7.8. Onglet Tests summary (synthèse des tests)

   Cet onglet contient les sorties des tests et le nombre de fois où
   ils ont été lancés. Vous pouvez imprimer ces résultats et les
   garder.

