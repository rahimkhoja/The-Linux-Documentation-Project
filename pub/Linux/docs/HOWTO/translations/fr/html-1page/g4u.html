<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>g4u — Un cloneur d'image système pour PC</title><link href="style.css" rel="stylesheet" type="text/css" /><meta content="DocBook XSL Stylesheets V1.71.0" name="generator" /><meta name="description" content="Ce document décrit la configuration et l'exploitation du logiciel libre g4u, un programme permettant de sauvegarder, sur un serveur FTP, une image disque de la machine locale. Simple, robuste et efficace, cette application ne manquera pas de séduire bon nombre d'administrateurs." /></head><body><div class="article" lang="fr"><div class="titlepage"><div><div><h1 class="title"><a id="N10001" />g4u — Un cloneur d'image système pour PC</h1></div><div><h3 class="subtitle"><i>Version française de <span class="foreignphrase"><em class="foreignphrase"> <a href="http://www.feyrer.de/g4u/">g4u — Harddisk Image Cloning for
    PCs</a></em></span></i></h3></div><div><div class="author"><h3 class="author"><span class="firstname">Hubert</span> <span class="surname">Feyrer</span></h3><div class="affiliation"><div class="address"><p><span style="white-space: pre;"><code class="email">&lt;<a href="mailto:hubert CHEZ feyrer POINT de">hubert CHEZ feyrer POINT de</a>&gt;</code></span></p></div></div></div></div><div><div class="othercredit"><h3 class="othercredit"><span class="firstname">Joseph</span> <span class="surname">Boiteau</span></h3><span class="contrib">Adaptation française</span><code class="email">&lt;<a href="mailto:josephboiteau CHEZ gmail POINT com">josephboiteau CHEZ gmail POINT com</a>&gt;</code></div></div><div><div class="othercredit"><h3 class="othercredit"><span class="firstname">François-Xavier</span> <span class="surname">Detournière</span></h3><span class="contrib">Relecture de la version française</span><code class="email">&lt;<a href="mailto:fx POINT detourniere CHEZ wanadoo POINT fr">fx POINT detourniere CHEZ wanadoo POINT fr</a>&gt;</code></div></div><div><div class="othercredit"><h3 class="othercredit"><span class="firstname">Jean-Philippe</span> <span class="surname">Guérard</span></h3><span class="contrib">Préparation de la publication de la v.f.</span><code class="email">&lt;<a href="mailto:fevrier CHEZ tigreraye POINT org">fevrier CHEZ tigreraye POINT org</a>&gt;</code></div></div><div><p class="releaseinfo">Version : 2.2.fr.0.3</p></div><div><p class="pubdate">5 octobre 2006</p></div><div><div class="revhistory"><table summary="Revision history" width="100%" border="1"><tr><th colspan="3" valign="top" align="left"><b>Historique des versions</b></th></tr><tr><td align="left">Version 2.2.fr.0.3</td><td align="left">14-09-2006</td><td align="left">JB,FXD</td></tr><tr><td colspan="3" align="left">Mises à jour du document (formatage) et
        relecture</td></tr><tr><td align="left">Version 2.2.fr.0.2</td><td align="left">24-07-2006</td><td align="left">JB</td></tr><tr><td colspan="3" align="left">Première publication en français</td></tr><tr><td align="left">Version 2.2</td><td align="left">31-05-2006</td><td align="left">HF</td></tr></table></div></div><div><div class="abstract"><p class="title"><b>Résumé</b></p><p>Ce document décrit la configuration et l'exploitation du logiciel
      libre g4u, un programme permettant de sauvegarder, sur un serveur FTP,
      une image disque de la machine locale. Simple, robuste et efficace,
      cette application ne manquera pas de séduire bon nombre
      d'administrateurs.</p></div></div></div><hr /></div><div class="toc"><p><b>Table des matières</b></p><dl><dt><span class="section"><a href="#whatisit">Qu'est ce que c'est ?</a></span></dt><dt><span class="section"><a href="#badalternatives">Pourquoi pas une des alternatives existantes ?</a></span></dt><dt><span class="section"><a href="#reqs">Prérequis &amp; téléchargement</a></span></dt><dt><span class="section"><a href="#using">L'utiliser</a></span></dt><dd><dl><dt><span class="section"><a href="#prep">Préparations</a></span></dt><dt><span class="section"><a href="#imgcreate">Création de l'image</a></span></dt><dt><span class="section"><a href="#imgdeploy">Déploiement de l'image</a></span></dt><dt><span class="section"><a href="#copydisk">Copier un disque localement</a></span></dt><dt><span class="section"><a href="#copypart">Copier une partition localement</a></span></dt></dl></dd><dt><span class="section"><a href="#hints">FAQ et autres détails sur le clonage de disque</a></span></dt><dd><dl><dt><span class="section"><a href="#filesystems">Systèmes de fichiers supportés</a></span></dt><dt><span class="section"><a href="#oss">Systèmes d'exploitations supportés</a></span></dt><dt><span class="section"><a href="#hw">Matériel supporté</a></span></dt><dt><span class="section"><a href="#disks">Un mot sur les disques de différentes tailles</a></span></dt><dt><span class="section"><a href="#gzip">Changer le niveau de compression</a></span></dt><dt><span class="section"><a href="#knowndisks">Liste des disques reconnus</a></span></dt><dt><span class="section"><a href="#linux2gb">Problèmes avec les images de 2 giga-octets</a></span></dt><dt><span class="section"><a href="#xxx">Pouvez-vous ajouter une fonctionnalité XXX ?</a></span></dt><dt><span class="section"><a href="#perf">Problèmes de performance réseau</a></span></dt><dt><span class="section"><a href="#shrinking">Réduire la taille de l'image</a></span></dt><dt><span class="section"><a href="#ifconfig">Paramétrer l'IP manuellement</a></span></dt><dt><span class="section"><a href="#kernel">Extraire le noyau g4u</a></span></dt><dt><span class="section"><a href="#netboot">Boot réseau de g4u via PXE</a></span></dt><dt><span class="section"><a href="#ftpd">Quel serveur FTP utiliser ?</a></span></dt></dl></dd><dt><span class="section"><a href="#support_and_pr">Aide et rapports d'erreurs</a></span></dt><dd><dl><dt><span class="section"><a href="#support">Aide</a></span></dt><dt><span class="section"><a href="#bugreporting">Rapport d'erreur</a></span></dt><dt><span class="section"><a href="#blog">Blog</a></span></dt></dl></dd><dt><span class="section"><a href="#N10486">Recompiler depuis les sources</a></span></dt><dt><span class="section"><a href="#links">Liens &amp; Ressources (en langue anglaise)</a></span></dt><dt><span class="section"><a href="#history">Historique</a></span></dt><dt><span class="section"><a href="#copying">Copies, licences &amp; donations</a></span></dt></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td valign="top" align="center" rowspan="2" width="25"><img alt="[Note]" src="images/note.png" /></td><th align="left">Note</th></tr><tr><td valign="top" align="left"><p>Traduction en français basée sur la <a href="http://www.feyrer.de/g4u/#history">version 2.2</a> de <a href="http://www.feyrer.de/g4u/">la documentation officielle</a></p></td></tr></table></div><div class="section" lang="fr"><div class="titlepage"><div><div><h2 class="title"><a id="whatisit" />Qu'est ce que c'est ?</h2></div></div></div><p>g4u (« <span class="quote">ghost for unix</span> ») est un système à base NetBSD,
    amorçable (disquette/cdrom), qui permet de cloner facilement des images
    disques, permettant ainsi de déployer un même système sur de multiples
    machines via FTP. Le support amorçable offre 2 options : l'une est de
    remonter, compressée, l'image d'une machine locale via FTP, l'autre est la
    restauration via FTP, suivi d'une décompression et d'un remplacement du
    disque original. La configuration réseau se fait via DHCP. L'exploitation
    du disque se faisant comme une image, tout système de fichier ou
    d'exploitation peut être déployé en utilisant g4u. Le clonage des disques
    et partitions locales est tout aussi facilement possible.</p><p>Pour les impatients curieux, quelques captures d'écran sont
    disponibles :</p><div class="orderedlist"><ol type="1"><li><p><a href="http://www.feyrer.de/g4u/screenshot1-booting.gif">Démarrage de
        g4u dans bochs</a></p></li><li><p><a href="http://www.feyrer.de/g4u/screenshot2-devices.gif">Détection de
        périphériques</a></p></li><li><p><a href="http://www.feyrer.de/g4u/screenshot3-welcome.gif">Bienvenue dans
        g4u !</a></p></li><li><p><a href="http://www.feyrer.de/g4u/screenshot4-commands.gif">Quelques
        commandes g4u</a></p></li><li><p><a href="http://www.feyrer.de/g4u/screenshot5-uploaddisk.gif">Envoi d'une
        image avec uploaddisk</a></p></li><li><p><a href="http://www.feyrer.de/g4u/screenshot6-slurpdisk.gif">Restauration
        avec slurpdisk</a></p></li></ol></div></div><div class="section" lang="fr"><div class="titlepage"><div><div><h2 class="title"><a id="badalternatives" />Pourquoi pas une des alternatives existantes ?</h2></div></div></div><div class="itemizedlist"><ul><li><p>La partie serveur est souvent prévue pour être sous DOS/Windows.
        Je voulais utiliser un serveur de type Unix.</p></li><li><p>Les systèmes de fichiers supportés comptent tous ceux de
        Microsoft, mais les autres sont mal supportés (Solaris/x86, NetBSD, et
        cætera.)</p></li><li><p>Je n'ai pas envie de m'infliger (plus jamais) la mise en place
        d'une disquette de boot DOS qui configure le réseau via DHCP.</p></li><li><p>Je me suis amusé à faire un déploiement multiple avec IMM, mais
        cela fut trop lent, j'ai donc décidé d'aller plus loin.</p></li></ul></div></div><div class="section" lang="fr"><div class="titlepage"><div><div><h2 class="title"><a id="reqs" />Prérequis &amp; téléchargement</h2></div></div></div><div class="itemizedlist"><ul><li><p>Trois disquettes vierges 1.44MB, ou un CD-R/RW vierge</p></li><li><p>Un serveur FTP avec quelques Giga de libres</p></li><li><p>Un serveur DHCP</p></li></ul></div><p>Ajouté à ça, vous pourriez avoir besoin des éléments
    suivants :</p><div class="itemizedlist"><ul><li><p>Les images disquettes g4u 2.2 (<a href="http://www.feyrer.de/g4u/g4u-2.2.fs.zip">zippées</a> / non
        compressées : <a href="http://www.feyrer.de/g4u/g4u-2.2-1.fs">disquette une</a>,
        <a href="http://www.feyrer.de/g4u/g4u-2.2-2.fs">disquette
        deux</a> et <a href="http://www.feyrer.de/g4u/g4u-2.2-3.fs">disquette
        trois</a>)</p></li><li><p>L'image ISO CD g4u 2.2 (<a href="http://www.feyrer.de/g4u/g4u-2.2.iso.zip">zippée</a> / <a href="http://www.feyrer.de/g4u/g4u-2.2.iso">non
        compressée</a>)</p></li><li><p><a href="http://www.feyrer.de/g4u/g4u-2.2.tgz">Le code
        source</a> de g4u 2.2</p><p>Les checksums MD5 associés :</p><pre class="screen">MD5 (g4u-2.2-1.fs) = 195d8e8efe4a5ae30ab9c3f9c4714927
MD5 (g4u-2.2-2.fs) = b0244439fb3f3826a8915d27fc9008e3
MD5 (g4u-2.2-3.fs) = aac41da46ee3f3c420eea5cdf45877d6
MD5 (g4u-2.2.iso) = f0e884c04b332e0b029b1a7b2ed98f2c
MD5 (g4u-2.2.tgz) = f3e05d5953c4b43f37812362665fcdae
MD5 (g4u-2.2.fs.zip) = 3de640a7c53704980f416b740512ddf6
MD5 (g4u-2.2.iso.zip) = 5b0252a83fb432e51d2fbdf3bcc310d8    </pre></li></ul></div><p>D'anciennes versions sont également disponibles :</p><div class="itemizedlist"><ul><li><p>Image disquette g4u 1.17 (<a href="http://www.feyrer.de/g4u/g4u-1.17.fs.zip">zippée</a> / <a href="http://www.feyrer.de/g4u/g4u-1.17.fs">non
        compressées</a>)</p></li><li><p>ISO du CD g4u 1.17 (<a href="http://www.feyrer.de/g4u/g4u-1.17.iso.zip">zippée</a> /
        <a href="http://www.feyrer.de/g4u/g4u-1.17.iso">
        compressées</a>)</p></li><li><p><a href="http://www.feyrer.de/g4u/g4u-1.17.tgz">Les sources
        g4u 1.17</a></p></li></ul></div><p>Vous pouvez aussi télécharger une image d'un de ces
    miroirs :</p><div class="itemizedlist"><ul><li><p><a href="http://planetmirror.com/pub/g4u/">Australie</a></p></li><li><p><a href="http://theatomicmoose.ca/g4u/">Canada</a></p></li></ul></div></div><div class="section" lang="fr"><div class="titlepage"><div><div><h2 class="title"><a id="using" />L'utiliser</h2></div></div></div><div class="section" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a id="prep" />Préparations</h3></div></div></div><div class="itemizedlist"><ul><li><p>En utilisant les images disquettes :</p><div class="orderedlist"><ol type="1"><li><p><a href="#reqs" title="Prérequis &amp; téléchargement">Téléchargez</a> les images
              disquettes, g4u-2.2-1.fs, g4u-2.2-3.fs et g4u-2.2-3.fs ou
              g4u-2.3.fs.zip, qui contient ces fichiers.</p></li><li><p>Si vous avez téléchargé le fichier g4u-2.1.fs.zip,
              décompressez le, vous obtiendrez les 2 fichiers g4u-2.1-1.fs et
              g4u-2.1-2.fs</p></li><li><p>Mettez chacune de ces images sur des disquettes
              distinctes. Sur un système Unix, un simple « <span class="quote">cat
              g4u-2.2-1.fs &gt;/dev/diskette</span> » fera l'affaire (et de
              même pour -2.fs). Le chemin du lecteur de disquette devrait vous
              être familier, les chemins courants sont :</p><div class="itemizedlist"><ul><li><p>NetBSD : /dev/fd0a</p></li><li><p>Solaris : /dev/diskette</p></li><li><p>Linux : /dev/fd0</p></li></ul></div><p>Il en va de même pour les périphériques USB (clés et
              autres mémoires flash), mais vous devrez y mettre l'image g4u.fs
              venant de l'ISO :</p><div class="itemizedlist"><ul><li><p>NetBSD : /dev/sd0d</p></li><li><p>Linux : /dev/sd0</p></li></ul></div><p>Si vous utilisez Microsoft Windows ou DOS, utilisez <a href="ftp://ftp.netbsd.org/pub/NetBSD/NetBSD-1.6.2/i386/installation/misc/rawrite.exe">rawrite.exe</a>.
              Il y a aussi un programme Windows appelé <a href="ftp://ftp.netbsd.org/pub/NetBSD/NetBSD-1.6.2/i386/installation/misc/rawr32.zip">rawr32.zip</a>
              qui vous le permettra.</p></li></ol></div></li><li><p>Utilisation de l'image CDROM de g4u :</p><div class="orderedlist"><ol type="1"><li><p><a href="#reqs" title="Prérequis &amp; téléchargement">Téléchargez</a> l'image CD,
              g4u-2.2.iso ou g4u-2.2.iso.zip</p></li><li><p>Si vous téléchargez le fichier g4u-2.1.iso.zip,
              décompressez le pour avoir g4u-2.1.iso.</p></li><li><p>Référez vous au manuel de votre logiciel de gravure (Nero,
              DiskJuggler, WinOnCD, cdrecord, et cætera), pour réussir votre
              coup. Notez bien que l'image est amorçable.</p></li></ol></div></li><li><p>Sur le serveur FTP de votre choix, créez un compte utilisateur
          appelé <code class="varname">install</code>, et protégez-le d'un mot de passe.
          Vérifiez que l'utilisateur « install » puisse se connecter via
          ftp.</p><p>Si vous voulez utiliser un compte différent, vous pouvez
          spécifier <em class="parameter"><code>login@server</code></em> pour slurpdisk,
          uploaddisk, et cætera.</p></li><li><p>Assurez vous d'avoir un service DHCP fonctionnel vous
          permettant d'accéder par la suite au serveur ftp (name server,
          netmask, default gateway). Dans le cas contraire vous pourrez
          toujours <a href="#ifconfig" title="Paramétrer l'IP manuellement">faire un paramétrage manuel de
          l'IP</a>.</p></li></ul></div></div><div class="section" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a id="imgcreate" />Création de l'image</h3></div></div></div><div class="itemizedlist"><ul><li><p>Démarrez sur la machine à cloner à l'aide du CD ou des
          disquettes g4u. Vous verrez le noyau se charger depuis le support,
          puis la liste des périphériques trouvés sur la machine. Ensuite
          l'appel au DHCP (veillez bien à ce que celui-ci soit correctement
          configuré !). A la fin, une brève description des commandes
          disponibles est affichée et un shell est à disposition.</p></li><li><p>Tout le disque :</p><p>Tapez <span><strong class="command">uploaddisk adresse.serveur.ftp
          nomdefichier.gz</strong></span> pour opérer une copie intégrale du disque,
          et la mettre sur le compte "install" de votre serveur ftp sous le
          nomdefichier donné. L'image disque est compressée (avec gzip -9), il
          est donc usuel d'apposer l'extension ".gz" au fichier
          concerné ; mais pas obligatoire :). Avant que l'envoi des
          données ne se fasse, le mot de passe du compte « install » vous sera
          demandé.</p><p>Si vous voulez cloner le disque secondaire, ajoutez son nom
          sur la ligne de commande d'uploaddisk : "uploaddisk
          adresse.serveur.ftp nomdefichier.gz wd1". De la même manière vous
          pourrez utilisez des disques SCSI : <span><strong class="command">uploaddisk
          adresse.serveur.ftp nomdefichier.gz sd0</strong></span>.</p><p>Si vous avez préféré utiliser un nom de compte différent du
          compte "install", faites-en précédé le nom du serveur, tel que
          <span><strong class="command">moncompte@adresse.serveur.ftp</strong></span> pour chaque
          commande, uploaddisk et slurpdisk.</p></li><li><p>Seulement une partition :</p><p>Affichez la liste des différents disques identifiés par g4u
          via la commande <span><strong class="command">disks</strong></span>, la liste des partitions
          d'un disque est disponible via la commande <span><strong class="command">parts
          disk</strong></span>, où disk est le nom du disque à afficher tel que wd0,
          wd1, sd0, et cætera. Les partitions sont numérotées avec des lettres
          commençant à 'a', où les partitions de a à d sont communément
          prédéfinies, avec vos propres partitions commençant à 'e'. Ces
          partitions sont de type BSD, qui ont quelques similitudes avec les
          partitions DOS [dixit l'auteur]. Pour spécifier une partition,
          utilisez "wd0e" ou "sd0f" : <span><strong class="command">uploadpart
          adresse.serveur.ftp nomdefichier.gz wd0e</strong></span>. Lancez
          "uploadpart" sans options pour faire afficher détails et exemples
          sur la commande.</p></li><li><p>Suite au traitement (ignorez les erreurs :-), vous devez
          retrouver le shell. Selon vos capacités réseau, CPU, disques et le
          contenu, la création et l'envoi de l'image peut durer plusieurs
          heures !</p></li><li><p>Vous pouvez éteindre la machine à l'aide de la commande
          <span><strong class="command">halt</strong></span> ou simplement en pressant le bouton
          reset/power - aucun système de fichier n'étant monté, aucun dommage
          ne peut être occasionné.</p></li><li><p>Vérifiez que le compte "install" de votre serveur FTP a reçu
          le(s) fichier(s) image.</p></li></ul></div></div><div class="section" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a id="imgdeploy" />Déploiement de l'image</h3></div></div></div><div class="itemizedlist"><ul><li><p>Amorcez la machine à l'aide des disquette ou du CD, puis, au
          prompt, effetuez l'une des actions suivantes :</p></li><li><p>Pour un disque complet :</p><p>Tapez la commande <span><strong class="command">slurpdisk adresse.serveur.ftp
          nomdefichier.gz</strong></span>. Celle-ci va se connecter au serveur ftp,
          compte <code class="varname">install</code>, vérifier le mot de passe,
          récupérer l'image, la décompresser et la remettre en place sur
          /dev/rwd0d.</p><p>Si vous voulez restaurer une image sur un disque SCSI, ajouter
          son nom à la commande, comme suit : <span><strong class="command">slurpdisk
          adresse.serveur.ftp nomdefichier.gz sd0</strong></span>.</p><p>Voir plus haut pour l'utilisation d'un compte FTP autre que
          <code class="varname">install</code>.</p></li><li><p>Une partition :</p><p>Utilisez <span><strong class="command">slurppart yadresse.serveur.ftp
          nomdefichier.gz wd0e</strong></span> ou toute valeur passée précédement à
          uploadpart. Notez bien que l'information du positionnement de la
          partition vient du MBR, qui devra être la même qu'au moment de la
          création de l'image - attendez vous à quelques surprises si la table
          de partitionnement a été modifiée entre la création de l'image et la
          restauration. Dans le cas de modifications à ce niveau, vérifiez le
          secteur de début ainsi que la taille de la partition (commande
          <span><strong class="command">parts</strong></span>). Pour une image disque complète, pas de
          soucis, faites une restauration complète avec
          <span><strong class="command">uploaddisk</strong></span> (le MBR étant inclus).</p><p>Redémarrez la machine (commande <span><strong class="command">reboot</strong></span> ou
          bouton reset), et votre machine est comme avant (elle le doit en
          tout cas).</p></li></ul></div></div><div class="section" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a id="copydisk" />Copier un disque localement</h3></div></div></div><p>Si vous souhaitez simplement copier un disque local vers un autre
      (ce qui correspond aux commandes <span><strong class="command">uploaddisk</strong></span> et
      <span><strong class="command">slurpdisk</strong></span>, au FTP près), vous pouvez le faire avec la
      commande <span><strong class="command">copydisk</strong></span>. La commande prend les noms des 2
      disks en paramètres, la source puis la cible, et copie les données de
      l'une à l'autre. Si par exemple l'on veut copier le premier disque
      « <span class="quote">wd0</span> » vers le deuxième « <span class="quote">wd1</span> » :</p><pre class="screen">copydisk wd0 wd1</pre><p>De même pour des disques SCSI : <span><strong class="command">copydisk sd0
      sd1</strong></span>, et cætera.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning: Attention !"><tr><td valign="top" align="center" rowspan="2" width="25"><img alt="[Avertissement]" src="images/warning.png" /></td><th align="left">Attention !</th></tr><tr><td valign="top" align="left"><p>Toutes les données du disque cible seront écrasées !</p></td></tr></table></div><p>Je rappelle que la liste des disques est disponible avec la
      commande <span><strong class="command">disks</strong></span>.</p></div><div class="section" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a id="copypart" />Copier une partition localement</h3></div></div></div><p>De même qu'avec la copie locale de disques, si vous souhaitez
      simplement copier une partition locale vers une autre, vous pouvez le
      faire avec la commande <span><strong class="command">copypart</strong></span>. La commande prend
      les 2 noms des partitions en paramètres, la source puis la cible, et
      copie les données de l'une à l'autre. Si par exemple l'on veut copier la
      première partition « <span class="quote">wd0e</span> » vers la seconde
      « <span class="quote">wd0f</span> », faites :</p><pre class="screen">copypart wd0e wd0f</pre><p>Encore une fois, la liste des disques est disponible via la
      commande <span><strong class="command">disk</strong></span>, et la liste des partitions d'un disk
      via la commande <span><strong class="command">parts</strong></span>. Les noms de partitions sont de
      la forme « <span class="quote">wd0d</span> », « <span class="quote">w1e</span> », « <span class="quote">sd1f </span> »
      (système BSD) ; « <span class="quote">hda1</span> », « <span class="quote">hda2</span> »,
      « <span class="quote">sda1</span> » (linux), et cætera.</p><p>Attention à ce que les partitions source et cible aient la même
      taille (en nombre de secteurs), sinon de drôles de choses peuvent
      arriver. En copiant une partition trop grande pour la partition cible,
      g4u ne va pas écraser les données suivants la petite partition, mais la
      copie restera partielle. Gardez l'idée en tête, cela arrive dans ce
      genre de copie et ne pose d'ailleurs pas de problème à l'inverse en
      copiant une petite partition dans une plus grande !</p></div></div><div class="section" lang="fr"><div class="titlepage"><div><div><h2 class="title"><a id="hints" />FAQ et autres détails sur le clonage de disque</h2></div></div></div><div class="section" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a id="filesystems" />Systèmes de fichiers supportés</h3></div></div></div><p>L'une des questions des plus courantes : « <span class="quote">quels
      systèmes de fichiers supporte g4u</span> ». La réponse est :
      « <span class="quote">tous</span> ». g4u lit le disque bit à bit, du premier au dernier.
      Ceci inclut le MBR, la table de partition ainsi que les partitions
      elles-mêmes sans même aller voir ce qu'il se trouve dans
      celles-ci.</p></div><div class="section" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a id="oss" />Systèmes d'exploitations supportés</h3></div></div></div><p>La liste des systèmes d'exploitation supportés par g4u se
      rapproche de la liste précédente, TOUS. Encore une fois, étant donné
      l'approche « <span class="quote">image</span> » de g4u, tout système peut être
      copié.</p><p>En plaçant un disque dur « <span class="quote">conteneur</span> » dans un PC, g4u
      peut même copier/déployer un système d'exploitation non-PC sur ce
      périphérique. Des systèmes tels que HP-UX, Irix, Solaris, AIX par
      exemple.</p></div><div class="section" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a id="hw" />Matériel supporté</h3></div></div></div><p>Le système utilisant g4u peut avoir des disques de type IDE, SATA,
      SCSI ou RAID avec de multiples contrôleurs (Adaptec, et cætera). Il en
      est de même pour bon nombre de cartes PCMCIA, Cardbus, ISA et autres
      cartes PCI. Jetez un oeil à <a href="http://www.feyrer.de/g4u/G4U-KERNEL-2.2">la configuration du noyau
      de g4u</a> pour une liste plus complète du matériel supporté.</p><p>Pour vous assurer le bon support d'un type matériel, il vous
      suffit d'amorcer votre système avec g4u et de vérifier avec la commande
      <span><strong class="command">ifconfig -a</strong></span> que votre carte réseau est listée et donc
      reconnue, et de même pour les disques avec la commande <span><strong class="command">disks
      </strong></span>. Dans le cas contraire, un long périple peut vous être
      nécessaire pour arriver à vos fins... analysez la sortie de <span><strong class="command">
      dmesg</strong></span> (sous g4u ;touche espace pour faire défiler
      l'affichage). Si besoin, <a href="#support" title="Aide">demandez de l'aide
      </a>. Voyez la partie « <span class="quote"><a href="#bugreporting" title="Rapport d'erreur">Retour
      d'erreurs</a></span> » pour plus d'informations à ce sujet.</p></div><div class="section" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a id="disks" />Un mot sur les disques de différentes tailles</h3></div></div></div><p>A la question « <span class="quote">comment g4u gère les disques de différentes
      tailles</span> », qui d'ailleurs revient souvent aussi, la réponse est
      que g4u travaille avec des disques de tailles et de géométries
      identiques. Mettre une image d'un petit disque sur un disque plus grand
      est possible ; c'est l'inverse qui pause problème.</p><p>Si vous ne pouvez faire autrement que de préparer un système sur
      un gros disque qui sera amené à être re-déployé vers un disque plus
      petit, assurez-vous que l'espace excédentaire sur le gros disque n'est
      pas occupé par une partition ou un système de fichier actif ; ou
      des données seront perdues.</p><p>Si vous déployez une petite image sur un plus gros disque,
      l'espace non exploité par g4u peut être exploité par une autre
      partition, un autre système de fichier. Vous aurez en revanche à le
      faire en utilisant vos outils / votre système d'exploitation.</p></div><div class="section" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a id="gzip" />Changer le niveau de compression</h3></div></div></div><p>Par défaut, les images disques remontées sur le serveur FTP sont
      compressées avec <span><strong class="command">gzip -9</strong></span>. Ceci permet d'économiser de
      l'espace disque mais rallonge l'opération, plusieurs heures de
      traitement est chose courante. Vous pouvez réduire le niveau de
      compression de gzip lors du <span><strong class="command">uploaddisk</strong></span> avec la
      variable d'environnement correspondante :</p><pre class="screen"># GZIP=-1</pre><p>Vous pouvez modifier le niveau de compression allant de 1 (rapide
      mais faible taux de compression) à 9 (lent mais taux intéressant). Le
      reste des options de la commande uploaddisk restant évidemment
      inchangées.</p></div><div class="section" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a id="knowndisks" />Liste des disques reconnus</h3></div></div></div><p>Pendant le démarrage de g4u, tous les périphériques reconnus sont
      listés ; mais très vite. Pour obtenir à tout moment cette liste des
      disques, utilisez la commande <span><strong class="command">disks</strong></span> :</p><pre class="screen"># disks
wd0 at pciide0 channel 0 drive 0:
wd0: drive supports 16-sector pio transfers, lba addressing
wd0: 6149 MB, 13328 cyl, 15 head, 63 sec, 512 bytes/sect x 12594960 sectors
wd0: 32-bit data port
wd0: drive supports PIO mode 4, DMA mode 2, Ultra-DMA mode 2
wd0(pciide0:0:0): using PIO mode 4, Ultra-DMA mode 2 (using DMA data transfers)   </pre><p>Cet exemple liste un disque dur de 6Giga.</p></div><div class="section" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a id="linux2gb" />Problèmes avec les images de 2 giga-octets</h3></div></div></div><p>Vous avez expérimenté un g4u qui plante lors du transfert ftp
      d'une image dépassant les 2 giga ? Ce problème ne vient pas de g4u
      mais de votre serveur FTP. D'anciennes distributions Linux sont connues
      pour n'accepter que des fichiers de taille inférieure à 2 giga, et si ce
      Linux a un kernel 2.4, rien n'est garantit. Assurez-vous d'avoir un
      démon FTP à jour et installez un système d'exploitation décent (dixit
      l'auteur, le rustre !).</p><p>Sinon, jusqu'ici, quel que soit le serveur FTP employé (NetBSD,
      Solaris and Windows 2000), aucun problème n'a été répertorié.</p></div><div class="section" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a id="xxx" />Pouvez-vous ajouter une fonctionnalité XXX ?</h3></div></div></div><p>J'ai des demandes pour ajouter certaines fonctionnalités à
      g4u :</p><div class="itemizedlist"><ul><li><p>l'utilisation de TFTP</p></li><li><p>l'utilisation de SSH/scp</p></li><li><p>l'utilisation de NFS</p></li><li><p>l'ajout d'une interface X ou de type
          « <span class="quote">curses</span> »</p></li><li><p>l'écriture des images vers CDROM / un déploiement depuis un
          CDROM</p></li><li><p>la compression bzip2</p></li></ul></div><p>Après avoir migré vers une gestion de boot g4u en 2 disquettes,
      certaines de ces fonctionnalités seront ajoutés, mais d'autres (X, et
      cætera) n'ont que peu de chances d'être intégrées. Tenez-vous au courant
      des prochaines mises à jour !</p></div><div class="section" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a id="perf" />Problèmes de performance réseau</h3></div></div></div><p>Si les performances réseaux sont faibles (moins de 5 Mo/s via un
      switch ethernet 100BaseT par exemple) malgré un processeur rapide, un
      disque qui ne sature pas et un taux de compression faible, doutez de
      votre configuration réseau ! Un problème courant sur les réseaux
      switchés est une discordance de duplex entre la carte réseau et le
      switch. Sous NetBSD, par défaut, les vitesses et le duplex sont négociés
      automatiquement mais peuvent l'être manuellement.</p><p>Forcer un 100BaseTX/Full-duplex :</p><pre class="screen"># ifconfig fxp0 media 100BaseTX mediaopt Full-duplex
# ifconfig -a
    fxp0: flags=[...]
        media: Ethernet 100baseTX full-duplex</pre><p>Utiliser l'auto-négociation (par défaut) :</p><pre class="screen"># ifconfig fxp0 media auto
# ifconfig -a
    fxp0: flags=[...]
        media: Ethernet autoselect (100baseTX)</pre><p>Pour plus d'informations à ce sujet, voyez les pages de manuels de
      <a href="http://netbsd.gw.com/cgi-bin/man-cgi?ifconfig++NetBSD-current">
      ifconfig(8)</a> ou encore le document <a href="http://www.cisco.com/warp/public/473/46.html#auto_neg_valid">
      Auto-Negotiation Valid Configuration Table</a> à l'étape « <span class="quote">Why
      Is It That the Speed and Duplex Cannot Be Hardcoded on Only One Link
      Partner ?</span> ».</p></div><div class="section" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a id="shrinking" />Réduire la taille de l'image</h3></div></div></div><p>Des gens se plaignent de la taille trop importante des images
      créées par g4u. Ces tailles de fichiers sont normales, elles sont dues
      au fait que g4u clone tout le disque, tous les blocs, sans se soucier de
      savoir si ils contiennent une quelconque donnée. Pour différencier un
      bloc utilisé d'un non utilisé, g4u devrait connaître le système de
      fichier employé - Windows FAT, Linux Ext2/3/ReiserFS/et cætera, BSD FFS,
      Solaris UFS, et cætera. Etant donnée la faible capacité d'une disquette,
      et le nombre d'implémentations nécessaires pour couvrir différents
      systèmes de fichiers, il est peu probable qu'un tel tri soit ajouté aux
      fonctionnalités de g4u.</p><p>Malgré tout il y a un moyen plutôt simple de contourner le
      problème : utiliser le système d'exploitation d'origine afin
      d'optimiser l'occupation du système de fichiers. Il suffit de faire en
      sorte que les blocs non utilisés / vides ne soient pas remplis de
      données aléatoires, mais au contraire de valeurs facilement
      compressibles par g4u. Ceci donnant lieu à des images disques plus
      petites.</p><p>En clair, remplacez les blocs non-utilisés de votre disque avec
      des octets à 0. Ouvrez un fichier et remplissez-le d'octets à 0 jusqu'à
      ce que le disque soit plein, puis fermez le fichier et effacez le. Le
      résultat est que tous les blocs non utilisés contiennent maintenant des
      données que g4u peut facilement compresser. En toute logique le système
      d'exploitation marque juste les blocs inutilisés comme 'inutilisés' mais
      ne modifie en rien leur contenu.</p><p>L'utilisation de cette technique sur un disque de 20Go avec un
      système Solaris 8/x86 de 6Go et le reste en Windows 2000 Workstation a
      permis de diminuer l'image compressée de ~6Go à ~2Go. Vous imaginez bien
      sûr le gain de temps au déploiement. :)</p><p>Pour effectuer le remplissage des blocs non utilisés avec des
      octets à 0, il y a plusieurs méthodes, dépendant du système
      d'exploitation de la machine et des logiciels disponibles :</p><div class="itemizedlist"><ul><li><p>Unix standard : (fonctionne sur toutes les variantes
          Unix : Linux, NetBSD, Solaris, et cætera.) :</p><pre class="screen"># dd if=/dev/zero of=/0bits bs=20971520 # bs=20m
# rm /0bits     </pre></li><li><p>Solution Perl pour Windows : Ceci nécessite <a href="http://www.activestate.com/Products/ActivePerl/"> perl</a>
          d'installé. Dans un shell, tapez :</p><pre class="screen">cd /d c:\
c:\win-preclone.pl c:     </pre><p>Cliquez <a href="http://www.feyrer.de/g4u/win-preclone.pl">
          ici</a> pour télécharger le script perl win-preclone.pl.</p></li><li><p>Une solution en Pascal pour Windows :</p><p>Ce programme en pascal est une contribution de Matthias Jordan
          [mjordan CHEZ code TIRET fu POINT de] :</p><div class="itemizedlist"><ul><li><p><a href="http://www.feyrer.de/g4u/nullfile-1.02.exe">nullfile-1.02.exe</a></p></li><li><p><a href="http://www.feyrer.de/g4u/nullfile-1.02.pas">nullfile-1.02.pas</a></p></li></ul></div><p>Ce programme est fourni sans aucune garantie.</p></li><li><p>La solution Windows 64bit :</p><p>Dominic Leelodharry [dominic CHEZ authorsoftware POINT com] a
          envoyé à l'auteur une version 64bit pour Windows :</p><div class="itemizedlist"><ul><li><p><a href="http://www.feyrer.de/g4u/nullfile-1.01_64bit.exe">nullfile-1.01_64bit.exe</a></p></li></ul></div><p>Ce programme est fourni sans aucune garantie.</p></li><li><p>Windows « <span class="quote">Erasor</span> » :</p><p>Ce programme freeware peut effacer votre disque de manière
          sûre, mais il est aussi capable de remplir le disque de
          « <span class="quote">0-bits</span> ». Téléchargeable sur <a href="www.heidi.ie/eraser">www.heidi.ie/eraser</a>. Merci à
          Stephen Krans [s040 CHEZ krans POINT org] pour le
          tuyau !</p></li><li><p>Soluce Windows embarquée :</p><p>Apparemment Windows XP fournit un outil d'encryption de disque
          permettant l'écriture d'octets à 0. Pour se faire, lancez la
          commande : <span class="emphasis"><em>cipher /W:C:</em></span> (pour le lecteur
          C:). Vous devrez quitter l'opération (Control+C) après la première
          opération, sinon des données aléatoires seront écrites suites au
          remplissage de « <span class="quote">0-bytes</span> ».</p></li></ul></div><p>Lancez l'une de ces commandes avant d'éteindre le système
      d'exploitation, puis créez une image avec g4u, vous verrez une nette
      différence de taille d'image.</p></div><div class="section" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a id="ifconfig" />Paramétrer l'IP manuellement</h3></div></div></div><p>Vous voudrez ou devrez parfois vous passez d'un DHCP. Dans ce cas,
      une configuration manuelle du réseau est aussi possible :</p><div class="orderedlist"><ol type="1"><li><p>Regardez si votre interface réseau est reconnue, et sous quel
          nom, avec la commande :</p><pre class="screen"># ifconfig -a</pre><p>Le nom de l'interface sera du type « <span class="quote">ex0</span> »,
          « <span class="quote">tlp0</span> », et cætera. (Contrairement à Linux, les
          interfaces réseaux NetBSD ne s'appellent pas
          « <span class="quote">eth0</span> » !)</p></li><li><p>Ensuite configurez l'IP et le masque réseau de cette
          interface. J'utiliserai ici la dénomination xx0 pour l'interface
          réseau, et la machine devrait porter l'IP 1.2.3.4 et le masque
          réseau 255.255.255.0 :</p><pre class="screen"># ifconfig xx0 1.2.3.4 netmask 255.255.255.0     </pre></li><li><p>Enfin, vous pouvez spécifier le router par défaut, si votre
          serveur FTP est sur un sous-réseau IP différent de celui où se
          trouve la machine g4u. Spécifions une IP router 2.3.4.5, voici la
          commande à saisir :</p><pre class="screen">route add default 2.3.4.5</pre></li></ol></div><p>C'est tout ? Simple, non ? Rappelez-vous que nous
      traitons de l'Unix ! Après ces quelques étapes, vous pouvez
      utiliser g4u comme s'il utilisait un DHCP.</p></div><div class="section" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a id="kernel" />Extraire le noyau g4u</h3></div></div></div><p>On m'a demandé comment démarrer depuis le disque dur (en utilisant
      grub par exemple). L'idée est d'extraire le noyau de la disquette de
      démarrage, et de l'associer à grub (ou n'importe quel autre bootloader -
      voyez peut-être avec <a href="#netboot" title="Boot réseau de g4u via PXE">PXE to netboot g4u</a>).
      Voici comment extraire le noyau, appelé
      « <span class="quote">netbsd</span> » :</p><pre class="screen">% ( cat g4u-2.2-1.fs | dd bs=512 skip=16 ; \
? cat g4u-2.2-2.fs | dd bs=512 skip=16 \
? ) | tar vxf -
-r--r--r-- 1 feyrer netbsd 53948 Nov 3 23:08 boot
-rw-rw-r-- 1 feyrer netbsd 1479905 Nov 3 23:08 netbsd   </pre><p>Notez que le noyau à ce niveau (« <span class="quote">netbsd</span> ») est
      toujours compressé, ce qui va très bien à un bootloader comme grub, mais
      au cas où vous voudriez le décompresser :</p><pre class="screen">% file netbsd
netbsd: gzip compressed data, was "netbsd-INSTALL_G4U", from Unix
% mv netbsd netbsd.gz
% gunzip netbsd.gz
% ls -la netbsd
-rw-rw-r-- 1 feyrer wheel 5523084 Dec 7 18:08 netbsd
% file netbsd
netbsd: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), statically linked, stripped   </pre></div><div class="section" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a id="netboot" />Boot réseau de g4u via PXE</h3></div></div></div><p>Afin de faire un boot réseau de g4u via PXE, vous devrez d'abord
      <a href="#kernel" title="Extraire le noyau g4u">extraire le noyau des disquettes</a> , puis
      suivre les étapes qui décrivent un boot réseau, dit « <span class="quote">diskless
      boot</span> » (sans disquette), voir <a href="http://www.netbsd.org/Documentation/network/netboot/intro.i386.html">
      la documentation NetBSD pour les nombreux moyens de réaliser une telle
      chose</a>.</p><p>Un condensé des étapes nécessaires à g4u est disponible dans les
      archives, soit <a href="http://sourceforge.net/mailarchive/message.php?msg_id=13050093"> en
      français</a> par Jean-Christophe Guis ou <a href="http://sourceforge.net/mailarchive/message.php?msg_id=13051496">
      une traduction en anglaise</a> de Steve Clement.</p><p>Un autre petit rapport sur <a href="http://www.tuxdocs.net/wiki/index.php/G4u_configure_for_pxe_boot">
      Comment configurer une Fedora Core 5 en tant que serveur PXE</a> de
      Aaron Axelsen est disponible en anglais.</p></div><div class="section" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a id="ftpd" />Quel serveur FTP utiliser ?</h3></div></div></div><p>Lorsque vous récupérez ou envoyez des images sur votre serveur FTP
      et que vous voyez une ligne du style :</p><pre class="screen">553 Cannot send file larger than 4 gigabytes   </pre><p>vous pouvez être sûr que cette ligne (ou tout autre ligne avec un
      numéro en entête) vient de votre serveur FTP, et de la même manière, que
      ce n'est pas g4u qui a un problème mais le serveur FTP.</p><p>Quelques programmes connus de serveurs FTP :</p><div class="itemizedlist"><ul><li><p>ftpd(8) de <a href="http://www.netbsd.org/"> NetBSD</a>
          qui est disponible sur une installation par défaut.</p></li><li><p>GuildFTPd pour Windows XP.</p></li><li><p>Le service FTP de Microsoft Windows 2000 et 2003 Server (à
          savoir qu'il existe quelques soucis avec les services FTP des
          versions MS Windows non serveur.).</p></li><li><p>Le démon vsftp de votre distribution Linux favorite (reconnu
          fonctionnel sur Fedora 2 et Debian Sarge).</p></li><li><p><a href="http://www.cerberusftp.com/">Cerberus
          FTP.</a></p></li><li><p>Le service FTP de Novell Netware (reconnu fonctionnel sur
          Netware 6).</p></li><li><p>TYPSoft FTP Server sur une clé USB avec Windows XP.</p></li><li><p>Filezilla Server sur Windows 98SE et XP.</p></li><li><p>Le démon FTP de Mac OS X et Mac OS X Server.</p></li><li><p>(D'autres ? Faites m'en part !).</p></li></ul></div></div></div><div class="section" lang="fr"><div class="titlepage"><div><div><h2 class="title"><a id="support_and_pr" />Aide et rapports d'erreurs</h2></div></div></div><div class="section" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a id="support" />Aide</h3></div></div></div><p>Voici la liste des éléments permettant d'obtenir de
      l'aide :</p><div class="itemizedlist"><ul><li><p>Liste de diffusion : <code class="email">&lt;<a href="mailto:g4u TIRET announce CHEZ&#10;          feyrer POINT de">g4u TIRET announce CHEZ
          feyrer POINT de</a>&gt;</code></p><p>Cette liste contient seulement les annonces faites à propos de
          g4u.</p><div class="itemizedlist"><ul><li><p>Inscriptions et configuration <a href="http://lists.sourceforge.net/mailman/listinfo/g4u-announce">
              via web</a> , ou</p></li><li><p>Envoyez un email nommé « <span class="quote">subscribe
              yourpassword</span> » à l'adresse <code class="email">&lt;<a href="mailto:g4u TIRET announce TIRET&#10;              request CHEZ feyrer POINT de">g4u TIRET announce TIRET
              request CHEZ feyrer POINT de</a>&gt;</code> pour vous inscrire. S'il
              vous plait, remplacez <code class="varname">yourpassword</code> par un mot
              de passe personnel, votre mot de passe secret pour cette liste
              de diffusion.</p></li><li><p>Les archives : <a href="http://sourceforge.net/mailarchive/forum.php?forum_id=43206">g4uannounce
              list archive</a>.</p></li></ul></div></li><li><p>Liste de diffusion : <code class="email">&lt;<a href="mailto:g4u TIRET help CHEZ feyrer&#10;          POINT de">g4u TIRET help CHEZ feyrer
          POINT de</a>&gt;</code></p><p>Cette liste contient les questions et réponses faites à propos
          de g4u.</p><div class="itemizedlist"><ul><li><p>Inscriptions et configuration <a href="http://lists.sourceforge.net/mailman/listinfo/g4u-help">
              via web</a> , ou</p></li><li><p>Envoyez un email nommé « <span class="quote">subscribe
              yourpassword</span> » à l'adresse <code class="email">&lt;<a href="mailto:g4u TIRET help TIRET&#10;              request CHEZ feyrer POINT de">g4u TIRET help TIRET
              request CHEZ feyrer POINT de</a>&gt;</code> pour vous inscrire. S'il
              vous plait, remplacez <code class="varname">yourpassword</code> par un mot
              de passe personnel, votre mot de passe secret pour cette liste
              de diffusion.</p></li><li><p>Les archives : <a href="http://sourceforge.net/mailarchive/forum.php?forum_id=43203">g4u-help
              list archive</a>.</p></li></ul></div></li><li><p>Communauté Orkut « <span class="quote">g4u</span> » :</p><p>Il existe une communauté « <span class="quote">g4u</span> » sur Orkut qui a
          créé un forum pour g4u. Comme Orkut a beaucoup ralenti aujourd'hui,
          je ne suis plus vraiment sur ce forum ; je vous conseille plus
          vivement d'utiliser les listes de diffusion précédentes.</p></li><li><p>Optionnel (!) une licence commerciale est disponible,
          regardez la page « <span class="quote"><a href="http://www.feyrer.de/g4u/commercial.html">Commercial
          licence</a></span> » pour plus d'informations.</p></li></ul></div></div><div class="section" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a id="bugreporting" />Rapport d'erreur</h3></div></div></div><p>Si vous avez des problèmes avec g4u et que vous souhaitez les
      remonter, S'IL VOUS PLAIT précisez les informations suivantes. Il est
      impossible de vous aider sans savoir de quel système/configuration l'on
      parle.</p><div class="itemizedlist"><ul><li><p>Quelle version de g4u utilisez-vous ?</p></li><li><p>Quelles commandes exactement avez-vous utilisées ?</p></li><li><p>Quelle sortie précise avez-vous eu du programme (précise, sans
          aucune modification, oeil pour oeil, dent pour dent de votre
          part) ?</p></li><li><p>Si le système bloque au démarrage, quelles sont les 3
          dernières lignes affichés à l'écran (toujours copie conforme
          svp)</p></li><li><p>Que donne la commande « <span class="quote">disks</span> » ? la commande
          « <span class="quote">parts</span> » ?</p></li><li><p>Si vous avez des soucis liés à un périphérique (carte réseau
          ou disque dur) ; ajoutez s'il vous plait les lignes relatives
          venant de la sortie de la commande « <span class="quote">dmesg</span> »</p></li><li><p>Quel système d'exploitation, système de fichiers et service
          FTP utilisez-vous coté serveur FTP ?</p></li></ul></div><p>Envoyez vos rapports d'erreurs à la liste de diffusion <a href="http://www.feyrer.de/g4u/#support">g4u-help</a>.</p></div><div class="section" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a id="blog" />Blog</h3></div></div></div><p>Suivant la mode du moment, j'ai créé un <a href="http://www.feyrer.de/NetBSD/blog.html?-tags=g4u">blog g4u</a>
      pour les gens s'intéressant de près à l'actualité des développements.
      Celui-ci fait partie de <a href="http://www.feyrer.de/NetBSD/blog.html">mon blog
      NetBSD</a>.</p><p>Et pour ceux que ça intéresse, il y a aussi le <a href="http://www.feyrer.de/NetBSD/bx/blosxom.cgi/index.rss?-tags=g4u">
      feed RSS de la partie g4u</a> de disponible (en addition au <a href="http://www.feyrer.de/NetBSD/blog-rss.xml">feed RSS complet de mon
      blog NetBSD</a> ).</p></div></div><div class="section" lang="fr"><div class="titlepage"><div><div><h2 class="title"><a id="N10486" />Recompiler depuis les sources</h2></div></div></div><p>G4u est construit sur les bases de la disquette de démarrage NetBSD.
    Un noyau ainsi qu'une disquette de boot personnalisés, tous deux ramenés à
    la taille minime de 3 disquettes de 1.44Mo ou un cdrom.</p><p>Pour recompiler ces images :</p><div class="itemizedlist"><ul><li><p>Il est à noter que la compilation depuis les sources ne
        nécessite pas les droits 'root'. Ci-dessous, les actions précédées du
        prompt « <span class="quote">#</span> » sont à exécuter en tant que root, celles
        précédées de « <span class="quote">%</span> » sont les commandes à exécuter en tant
        que simple utilisateur.</p></li><li><p>Munissez-vous d'une machine i386/PC sous <a href="ftp://ftp.netbsd.org/pub/NetBSD/NetBSD-3.0/">NetBSD 3.0</a>.
        Tout autre système d'architecture Unix-like devrait faire l'affaire
        aussi, ceci restant non testé à ma connaissance.</p></li><li><p>Installez mkisofs (contenu dans le package cdrecord), via le
        paquet de binaires :</p><pre class="screen"># PKG_PATH=ftp://ftp.NetBSD.org/pub/NetBSD/packages/3.0/i386/All
# export PKG_PATH
# pkg_add -v cdrecord</pre><p>ou, si vous avez pkgsrc d'installé :</p><pre class="screen"># cd /usr/pkgsrc/sysutils/cdrecord
# make install    </pre></li><li><p>Récupérez les sources NetBSD-current (~23 mai 2006) dans
        /usr/src :</p><pre class="screen">% su
# mkdir /usr/cvs
# chown $USER /usr/cvs
# ln -s cvs/src /usr/src
# exit
% cd /usr/cvs
% env CVS_RSH=ssh cvs -d anoncvs@anoncvs.netbsd.org:/cvsroot co -D 20060523 src    </pre></li><li><p>Pour être sûr de votre coup, recompilez complètement la version
        (afin d'exécuter les tests de régression et autres) :</p><pre class="screen">% ./build.sh -N 1 -U release</pre></li><li><p>Rappelez-vous où récupérer le nouveau compilateur - ajustez si
        nécessaire :</p><pre class="screen">% setenv T /usr/src/obj.i386/tooldir.NetBSD-3.0-i386/bin    </pre></li><li><p>Récupérez les <a href="http://www.feyrer.de/g4u/g4u-2.2.tgz">source de g4u
        2.2</a></p></li><li><p>Décompressez-les :</p><pre class="screen">% cd /usr/src
% tar plzvxf .../g4u-2.2.tgz    </pre></li><li><p>Appliq<code class="varname">uez les patch</code>es :</p><pre class="screen">% cd /usr/src/sys/dev/ata
% patch &lt;wd.c.patch-g4u
% cd /usr/src/sys/dev/scsipi
% patch &lt;sd.c.patch-g4u
% cd /usr/src/sys/kern
% patch &lt;subr_prf.c.patch-g4u    </pre></li><li><p>Compilez les images disquettes et ISO de G4U :</p><pre class="screen">% cd /usr/src/distrib/i386/floppies/g4u
% $T/nbmake-i386    </pre></li><li><p>Après ça, vous devrez trouver les fichiers images
        « <span class="quote">g4u1.fs</span> », « <span class="quote">g4u1.fs</span> » et
        « <span class="quote">g4u.iso</span> » dans le répertoire
        /usr/src/distrib/i386/floppies/g4u :</p><pre class="screen">% pwd /usr/cvs/src/distrib/i386/floppies/g4u
% ls -l g4u.*
-rw-rw-r-- 1 feyrer netbsd 3309568 Nov 3 23:09 g4u.iso
-rw-rw-r-- 1 feyrer netbsd 1474560 Nov 3 23:08 g4u1.fs
-rw-rw-r-- 1 feyrer netbsd 1474560 Nov 3 23:08 g4u2.fs    </pre></li></ul></div></div><div class="section" lang="fr"><div class="titlepage"><div><div><h2 class="title"><a id="links" />Liens &amp; Ressources (en langue anglaise)</h2></div></div></div><div class="itemizedlist"><ul><li><p><b>Un tutoriel pour installer M0n0wall avec g4u. </b>Pereyra a fournit <a href="http://contenidosonline.blogspot.com/2006/05/tutorial-for-installing-m0n0wall-with.html">les
          instructions</a> pour installer <a href="http://m0n0.ch/wall/">M0n0wall</a> firewall avec
          g4u.</p></li><li><p><b>Récolter les GUIDs / UUIDs afin de procéder à une
          installation distante (RIS) des comptes utilisateurs. </b>« <span class="quote">Une activité coûteuse en terme de temps, et qui de
          surcroît se veut extrêmement répétitive lorsque vous avez un parc
          d'un grand nombre de machines, c'est d'avoir à gérer le remplacement
          des anciennes machines ainsi que de commander des nouvelles. La
          méthode traditionnelle consiste à noter la MAC adresse et le nom de
          la machine, envoyer via email les données à quelqu'un d'autre,
          mettre à jour les données du serveur DHCP, et cætera, et cætera. Ce
          projet cherche à minimiser le temps d'intervention humain nécessaire
          à mettre une machine en place.</span> » Et en plus, ceci est basé sur
          du NetBSD ! :)[<a href="http://user.dtcc.edu/~ctribo/guid.html">le lien du site
          d'origine (en anglais)</a>].</p></li><li><p><b>MIDS - g4u avec un menu. </b>Rob Bennett a modifié g4u afin que celui-ci charge du code
          additionnel depuis un serveur FTP, et d'implémenter une interface
          graphique (des boîtes de dialogues de type 'curses'). Comme le but
          premier de g4u est de tenir sur une disquette, cette extension
          <a href="http://www.robbennett.co.uk/mids/">mérite d'y jetter un
          oeil !</a></p></li><li><p><b>La page iR110/150 (sparc64) dd Network Backup : </b>Des gens cherchaient une version UltraSPARC (sparc64) based de
          g4u. Eh bien messieurs, elle existe : <a href="http://www.digitalissues.co.uk/html/hardware/bw/ir110-dd-backup.html">The
          iR110/150 dd Network Backup Page</a> vous donnera les scripts
          vous permettant de faire les sauvegardes des disques d'un UltraSPARC
          sur un serveur NFS distant. Bravo à l'auteur !</p></li><li><p><b>Yet Another Ghost Installer (YAGI) : </b><a href="http://dan.deam.org/code/yagi.pdf">La
          thèse</a> de Daniel Ettle, que l'auteur a supervisé, porte sur
          un <a href="http://dan.deam.org/yagi.php">installeur
          réseau</a> au Toshiba Regensburg Operations.</p></li><li><p><b>Symantec Ghost. </b><a href="http://www.symantec.com/sabu/ghost/">La solution
          commerciale</a> qui ne faisait pas ce dont j'avais besoin et qui
          m'a poussé à créer g4u. Essayez-le si vous ne voulez pas d'un
          système de sauvegarde à images. Et si vous le trouvez trop cher,
          dites-vous bien que <a href="#copying" title="Copies, licences &amp; donations"> moi-même je ne
          souhaites pas mourir de faim</a>. :)</p></li></ul></div></div><div class="section" lang="fr"><div class="titlepage"><div><div><h2 class="title"><a id="history" />Historique</h2></div></div></div><p><a href="http://www.feyrer.de/g4u/#history">Voir l'historique de
    l'auteur (anglais)</a></p></div><div class="section" lang="fr"><div class="titlepage"><div><div><h2 class="title"><a id="copying" />Copies, licences &amp; donations</h2></div></div></div><p>Aucune licence n'est nécessaire, excepté pour le domaine militaire
    et usages associés, un <a href="http://www.feyrer.de/g4u/commercial.html">licence commerciale</a>
    est disponible, et les donations sont toujours les bienvenues ! Vous
    pouvez envoyer de l'argent via <a href="https://www.paypal.com/affil/pal=paypal%40feyrer.de"> paypal</a>
    ou m'acheter un livre depuis <a href="http://www.amazon.de/exec/obidos/redirect?path=registry/RN1HSNXQBSE6">
    ma liste de souhaits Amazon</a>, comme tous <a href="http://www.feyrer.de/g4u/donations.html">les gens qui ont déjà tant
    donné</a> - Merci beaucoup !</p><p>g4u est distribué sous la licence « <span class="quote">standard BSD
    license</span> » :</p><pre class="screen">/*
 * Copyright (c) 1999-2006
 * Hubert Feyrer &lt;hubert CHEZ feyrer POINT de&gt;.  All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met :
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 * This product includes software developed for g4u by 
 * Hubert Feyrer &lt;hubert CHEZ feyrer POINT de&gt;.
 * 4. Neither the name of the author nor the names of its contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 */  </pre><p>et voici une version française « <span class="quote">non-officielle</span> » de la
    licence BSD :</p><pre class="screen">
   Copyright © 1999-2006 Hubert Feyrer &lt;hubert CHEZ feyrer POINT 
   de&gt;. Tous droits réservés.
   
   La redistribution du code source, modifié ou non, sous forme de binaire
   est soumise aux conditions suivantes :
        * Le copyright ci-dessus, la présente liste des conditions et
   l'avertissement qui la suit doivent figurer dans le code source.
        * La documentation et/ou les fichiers accompagnant le code source 
   distribué sous forme de binaire doivent faire apparaître le copyright 
   ci-dessus, la présente liste des conditions et l'avertissement qui la suit.
        * Tout produit incluant tout ou partie du code de ce programme doit
   comporter la mention : Ce produit s'inspire d'un programme développé par
   l'université de Californie Berkeley et ses collaborateurs.
        * Le nom de la dite université, pas plus que ceux de ses collaborateurs,
   ne sauraient être utilisés dans le but de promouvoir ou de légitimer un
   produit dérivé de ce programme sans autorisation écrite préalable à cette
   effet.

    CE PROGRAMME EST FOURNI « TEL QU'EN L'ÉTAT » PAR LES MEMBRES DU CONSEIL 
    D'ADMINISTRATION ET LEURS COLLABORATEURS ET IL N'EST DONNÉ AUCUNE GARANTIE,
    IMPLICITE OU EXPLICITE, QUANT À SON UTILISATION COMMERCIALE, PROFESSIONNELLE 
    OU AUTRE. LES MEMBRES DU CONSEIL D'ADMINISTRATION ET LEURS COLLABORATEURS NE 
    PEUVENT EN AUCUN CAS ÊTRE TENUS POUR RESPONSABLES DE QUELQUE DOMMAGE OU 
    PRÉJUDICE DIRECT, INDIRECT, SECONDAIRE OU ACCESSOIRE (Y COMPRIS LES PERTES
    FINANCIÈRES DUES AU MANQUE À GAGNER, À L'INTERRUPTION D'ACTIVITÉS, OU 
    LA PERTE D'INFORMATIONS ET AUTRES) DÉCOULANT DE L'UTILISATION DU PROGRAMME,
    OU DE L'IMPOSSIBILITÉ D'UTILISER CELUI-CI, ET DONT L'UTILISATEUR ACCEPTE 
    L'ENTIÈRE RESPONSABILITÉ.</pre></div></div></body></html>