<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>

    Linux/GNU : aide-mémoire post-installation

</title><link rel="stylesheet" href="style.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.64.1"><meta name="description" content="

         Ce document est un aide-mémoire de ce que vous devriez
         immédiatement faire après l'installation d'un système
         Linux/GNU. Ces précautions vous éviteront de vous inquiéter si,
         plus tard, vous rencontrez des problèmes. Ce document contient
         aussi un script permettant d'automatiser cette démarche.

    "></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article" lang="fr"><div class="titlepage"><div><div><h1 class="title"><a name="id2393981"></a>

    Linux/GNU : aide-mémoire post-installation

</h1></div><div><h3 class="subtitle"><i>

    Défiant les lois de Murphy — version française du
    <span class="foreignphrase"><i class="foreignphrase">GNU/Linux Post-Installation Checklist</i></span>

</i></h3></div><div><div class="author"><h3 class="author"></h3><div class="affiliation"><span class="orgname">
	    <a href="http://members.tripod.com/~algolog/index.htm" target="_top">Algologic Research &amp;
	    Solutions</a>
	<br></span><div class="address"><p><br>
	     <tt class="email">&lt;<a href="mailto:algolog%20CHEZ%20hd1%20POINT%20vsnl%20POINT%20net%20POINT%20in">algolog CHEZ hd1 POINT vsnl POINT net POINT in</a>&gt;</tt><br>
	</p></div></div></div></div><div><p class="othercredit"><span class="contrib">Adaptation française</span>: <span class="firstname">Simon</span> <span class="surname">Depiets</span></p><div class="affiliation"><div class="address"><p><br>
          <tt class="email">&lt;<a href="mailto:sdepiets%20CHEZ%20hotmail%20POINT%20com">sdepiets CHEZ hotmail POINT com</a>&gt;</tt><br>
        </p></div></div></div><div><p class="othercredit"><span class="contrib">Relecture de la version française</span>: <span class="firstname">Dorian</span> <span class="surname">Musso</span></p><div class="affiliation"><div class="address"><p><tt class="email">&lt;<a href="mailto:dodolecyclo%20CHEZ%20wanadoo%20POINT%20fr">dodolecyclo CHEZ wanadoo POINT fr</a>&gt;</tt></p></div></div></div><div><p class="othercredit"><span class="contrib">Préparation de la publication de la v.f.</span>: <span class="firstname">Jean-Philippe</span> <span class="surname">Guérard</span></p><div class="affiliation"><div class="address"><p><br>
        <tt class="email">&lt;<a href="mailto:jean%20TIRET%20philippe%20POINT%20guerard%20CHEZ%20tigreraye%20POINT%20org">jean TIRET philippe POINT guerard CHEZ tigreraye POINT org</a>&gt;</tt><br>
    </p></div></div></div><div><p class="releaseinfo">Version : 1.0.fr.1.0</p></div><div><p class="pubdate">12 décembre 2003</p></div><div><div class="revhistory"><table border="1" width="100%" summary="Revision history"><tr><th align="left" valign="top" colspan="3"><b>Historique des versions</b></th></tr><tr><td align="left">Version 1.0.fr.1.0</td><td align="left">2003-12-12</td><td align="left">SD,DM,JPG</td></tr><tr><td align="left" colspan="3">
		Première adaptation française
	    </td></tr><tr><td align="left">Version 1.0</td><td align="left">2001-06-12</td><td align="left"></td></tr><tr><td align="left" colspan="3">
		Version originale en SGML Docbook
	    </td></tr></table></div></div><div><div class="abstract"><p class="title"><b>Résumé</b></p><p>

         Ce document est un aide-mémoire de ce que vous devriez
         immédiatement faire après l'installation d'un système
         Linux/GNU. Ces précautions vous éviteront de vous inquiéter si,
         plus tard, vous rencontrez des problèmes. Ce document contient
         aussi un script permettant d'automatiser cette démarche.

    </p></div></div></div><div></div><hr></div><div class="toc"><p><b>Table des matières</b></p><dl><dt><span class="sect1"><a href="#intro">1. Introduction</a></span></dt><dd><dl><dt><span class="sect2"><a href="#copyright">1.1. Droits d'utilisation</a></span></dt><dt><span class="sect2"><a href="#limitations-de-responsabilite">1.2. Limitations de responsabilité</a></span></dt><dt><span class="sect2"><a href="#voscommentaires">1.3. Commentaires</a></span></dt></dl></dd><dt><span class="sect1"><a href="#steps">2. Étapes à suivre après l'installation</a></span></dt><dt><span class="sect1"><a href="#le-script">3. Le script bash</a></span></dt><dd><dl><dt><span class="sect2"><a href="#script">3.1. Le script…</a></span></dt></dl></dd></dl></div><div class="sect1" lang="fr"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="intro"></a>1. Introduction</h2></div></div><div></div></div><p>

        Vous venez de finir l'installation de votre système Linux. Vous
        venez de mettre à jour votre système Linux existant. Vous êtes
        heureux de vos premières expériences sur Linux. Vous voulez être
        sûrs que vous pourrez profiter de ce système en dépit des dégâts
        que vous pourriez lui causer par une éventuelle bévue

   </p><p>

       Conserver un instantané de votre nouveau système est une bonne
       idée. Cela vous permettra, en cas de mauvaise manipulation, de le
       récupérer sans séquelles permanentes. Cet aide-mémoire vous
       aidera à prendre les précautions nécessaires, après avoir terminé
       l'installation d'un système Linux. C'est la suite du guide
       pratique <a href="http://www.traduc.org/docs/howto/lecture/Pre-Installation-Checklist.html" target="_top">Linux/GNU :
       aide-mémoire avant installation</a>. Il accompagne le très
       officiel <a href="http://www.traduc.org/docs/howto/lecture/Installation-HOWTO.html" target="_top">Guide
       pratique d'installation de Linux</a>. Ce document contient
       aussi le <a href="#le-script" title="3. Le script bash">script</a> qui automatisera
       la démarche de réalisation d'un instantané de votre système.
       
   </p><div class="sect2" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a name="copyright"></a>1.1. Droits d'utilisation</h3></div></div><div></div></div><p>
	
	    Copyright © 2001 <a href="http://members.tripod.com/~algolog/index.htm" target="_top">Algologic
	    Research &amp; Solutions</a> pour la version originale.

	</p><p>
	
	    Copyright © 2003-2004 Simon Depiets, Dorian Musso et 
	    Jean-Philippe Guérard pour la version française.
	
	</p><p>

            Ce document est distribué selon les termes de la licence du
            Projet de Documentation Linux (LDP) telle qu'elle est
            rédigée ci-dessous.
	
	</p><p><span class="foreignphrase"><i class="foreignphrase">

            This document is distributed under the terms of the Linux
            Documentation Project (LDP) license, stated below. 
	
	</i></span></p><p>
	
	    À moins d'une mention explicite du contraire, les guides
	    pratiques Linux sont sous copyright de leurs auteurs
	    respectifs. Les guides pratiques Linux peuvent être
	    distribués ou reproduits, en partie ou dans leur
	    intégralité, par tout moyen physique ou électronique, tant
	    que cette licence est conservée dans toutes les copies. La
	    redistribution commerciale est autorisée et encouragée, mais
	    l'auteur souhaiterait être tenu informé de telles
	    distributions.
	
	</p><p><span class="foreignphrase"><i class="foreignphrase">

            Unless otherwise stated, Linux HOWTO documents are 
            copyrighted by their respective authors. Linux HOWTO 
            documents may be reproduced and distributed in whole or in 
            part, in any medium physical or electronic, as long as this 
            copyright notice is retained on all copies. Commercial 
            redistribution is allowed and encouraged; however, the 
            author would like to be notified of any such distributions.
	
	</i></span></p><p>

	    Toute traduction, travail dérivé ou assemblage incorporant
	    un quelconque guide pratique Linux doit être distribué selon
	    les termes de cette licence. Autrement dit, vous n'avez pas
	    le droit de réaliser un travail dérivant d'un guide pratique
	    et d'imposer des restrictions supplémentaire à sa
	    distribution. Des exceptions à ces règles peuvent être
	    accordées selon certaines conditions ; veuillez
	    contacter le coordinateur des guides pratiques Linux à
	    l'adresse indiquée ci-dessous.

	</p><p><span class="foreignphrase"><i class="foreignphrase">

            All translations, derivative works, or aggregate works
            incorporating any Linux HOWTO documents must be covered
            under this copyright notice. That is, you may not produce a
            derivative work from a HOWTO and impose additional
            restrictions on its distribution. Exceptions to these rules
            may be granted under certain conditions; please contact the
            Linux HOWTO coordinator at the address given below. 
	
	</i></span></p><p>

            En résumé, nous voulons promouvoir la diffusion de ces
            informations par tous les circuits possibles. Cependant,
            nous souhaitons conserver nos droits d'auteurs sur les
            guides pratiques et nous voudrions être informés de tout
            plan de redistribution de ceux-ci.

	</p><p><span class="foreignphrase"><i class="foreignphrase">

            In short, we wish to promote dissemination of this
            information through as many channels as possible. However,
            we do wish to retain copyright on the HOWTO documents, and
            would like to be notified of any plans to redistribute the
            HOWTOs.
	
	</i></span></p><p>
	
	    Si vous avez des questions, envoyez un message en anglais à
	    <tt class="email">&lt;<a href="mailto:feedback%20CHEZ%20en%20POINT%20tldp%20POINT%20org">feedback CHEZ en POINT tldp POINT org</a>&gt;</tt>
	
	</p><p><span class="foreignphrase"><i class="foreignphrase">

            If you have any questions, please contact 
            <tt class="email">&lt;<a href="mailto:feedback%20CHEZ%20en%20POINT%20tldp%20POINT%20org">feedback CHEZ en POINT tldp POINT org</a>&gt;</tt>. 
	
	</i></span></p></div><div class="sect2" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a name="limitations-de-responsabilite"></a>1.2. Limitations de responsabilité</h3></div></div><div></div></div><p>
	
            Aucune responsabilité ne pourra être retenue concernant le
            contenu de ces documents. Vous utilisez les concepts, les
            exemples et les autres informations à vos risques et périls. 
            Comme il s'agit d'une nouvelle édition de ce document, elle
            peut comporter des erreurs ou des inexactitudes, ce qui
            pourrait bien sûr endommager votre système. Procédez avec
            prudence. Bien que ce soit hautement improbable, les auteurs
            n'engageront en aucun cas leur responsabilité sur ce point.
            
	</p><p><span class="foreignphrase"><i class="foreignphrase">

            No liability for the contents of this documents can be 
            accepted. Use the concepts, examples and other content at 
            your own risk. As this is a new edition of this document, 
            there may be errors and inaccuracies, that may of course be 
            damaging to your system. Proceed with caution, and although 
            this is highly unlikely, the author(s) do not take any 
            responsibility for that.
	
	</i></span></p><p>
	
	    Tous les copyrights sont détenus par leurs auteurs
	    respectifs, à moins que le contraire ne soit explicitement
	    indiqué. L'utilisation d'un terme dans ce document ne doit
	    pas être considéré comme suceptible d'affecter la validité
	    d'une marque déposée.
	
	</p><p><span class="foreignphrase"><i class="foreignphrase">

            All copyrights are held by their respective owners, unless 
            specifically noted otherwise. Use of a term in this document 
            should not be regarded as affecting the validity of any 
            trademark or service mark. 
	
	</i></span></p><p>
	    
	    Le fait de nommer un produit particulier ne peut être perçu
	    comme une approbation de ce produit.
	    
	</p><p><span class="foreignphrase"><i class="foreignphrase">

            Naming of particular products or brands should not be seen 
            as endorsements. 
	
	</i></span></p><p>
	
	    Il est fortement recommandé d'effectuer une sauvegarde de
	    votre système avant une installation majeure et de continuer
	    de le faire à intervalles régulières.
	    
	</p><p><span class="foreignphrase"><i class="foreignphrase">

            You are strongly recommended to make a backup of your system 
            before major installation and continue to do so at regular 
            intervals.
	
	</i></span></p></div><div class="sect2" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a name="voscommentaires"></a>1.3. Commentaires</h3></div></div><div></div></div><p>
        
            Ce document, et particulièrement le <a href="#le-script" title="3. Le script bash">script</a>, sont continuellement mis
            à jour. Soyez sûrs que vous utilisez la dernière version de
            ce document, en visitant régulièrement le <a href="http://algolog.tripod.com/postlnx.htm" target="_top">site de la version originale 
            de l'aide mémoire de post-installation</a>.
             
	</p><p>
	 
	    La <a href="http://www.traduc.org/docs/howto/lecture/Post-Installation-Checklist.html" target="_top">dernière
	    version française</a> de ce document est toujours
	    disponible sur le site du projet <a href="http://www.traduc.org" target="_top">traduc.org</a>.
	 
	</p><p>
	 
	    Vous pouvez écrire vos suggestions et réactions à l'adresse
            suivante :
            <tt class="email">&lt;<a href="mailto:algolog%20CHEZ%20hd1%20POINT%20vsnl%20POINT%20net%20POINT%20in">algolog CHEZ hd1 POINT vsnl POINT net POINT in</a>&gt;</tt>
        
	 
	</p><p>

            N'hésitez pas à faire parvenir tout commentaire relatif à la 
            version française de ce document à 
            <tt class="email">&lt;<a href="mailto:commentaires%20CHEZ%20traduc%20POINT%20org">commentaires CHEZ traduc POINT org</a>&gt;</tt> en précisant le titre et la 
            version de ce document.
	 
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>
        
            Nous ne répondrons pas aux questions générales sur Linux. Si
            vous avez besoin d'une assistance professionelle sur Linux,
            contactez <a href="http://algolog.tripod.com/tools.htm#linux" target="_top">Algologic</a>. 
            Vous pouvez aussi visiter notre page web : <a href="http://algolog.tripod.com/" target="_top">Algologic Research &amp;
            Solutions</a>.
            
        </p></td></tr></table></div></div></div><div class="sect1" lang="fr"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="steps"></a>2. Étapes à suivre après l'installation</h2></div></div><div></div></div><p>
        
        Pour profiter pleinement de votre nouvelle installation Linux
        sans jamais rencontrer de soucis, il est important de prendre
        quelques précautions élémentaires. Ceci doit être fait dès que
        vous aurez fini d'installer Linux sur votre machine pour la
        première fois.
    
    </p><div class="orderedlist"><ol type="1"><li><p>
    
        Créez une <a href="http://www.traduc.org/docs/howto/lecture/Bootdisk-HOWTO.html" target="_top">disquette de
        démarrage</a> et une disquette de secours. Les utilitaires
        permettant de créer ces disquettes sont inclus dans votre
        distribution Linux.
        
    </p></li><li><p>
    
        Si vous êtes paranoïaque (comme moi), vous pouvez faire deux
        copies de chacune de ces disquettes. En effet les disquettes
        sont connues pour ne jamais marcher quand on en a le plus
        besoin.
        
    </p></li><li><p>
    
        <span class="emphasis"><em>Testez votre disquette de démarrage</em></span>. 
        Assurez-vous que vous pouvez lancer Linux en utilisant votre
        disquette. Souvenez vous que la loi de Murphy peut vous frapper
        au moment où vous vous y attendez le moins.
        
    </p></li><li><p>
    
        Vérifiez à fond votre nouveau système. Essayez tous les
        principaux paquets.
        
    </p></li><li><p>
    
        Essayez le système X-Windows, le bureau et le gestionnaire de
        fenêtres, si vous les avez installés.
        
    </p></li><li><p>
    
        Essayez de vous connecter à votre réseau local et à l'internet.
        
    </p></li><li><p>
    
        Créez au moins un compte utilisateur pour vérifier et trouver
        les défauts de votre installation. Refaites toutes les
        verifications précédentes en utilisant le compte utilisateur que
        vous venez de créer.
        
    </p></li><li><p>
    
        Rejoingnez un Groupe d'Utilisateurs de Linux (GUL). Vous devez
        découvrir s'il en existe un près de chez vous. Pour cela, vous
        pouvez consulter la <a href="http://www.aful.org/gul" target="_top">liste
        des GUL francophones</a> de l'AFUL, la <a href="http://www.linuxfrench.net/Carte/" target="_top">carte des GUL</a> de
        LinuxFrench ou la <a href="http://www.traduc.org/docs/bd_assos/etat_assos.php" target="_top">liste
        des associations et GUL</a> de traduc.org. Si il n'y en a
        pas, créez-en un vous-même, dans votre voisinage, votre campus,
        votre ville…
        
    </p></li><li><p>
    
        Rejoignez au moins une liste de discussion Linux pour vous tenir
        au courant et avoir des nouvelles. Des listes francophones
        existent pour les principales distributions Linux et certains
        groupes d'utilisateurs. Le plus simple est de commencer par
        regarder le site de la distribution que vous utilisez, afin de
        trouver une liste de discussion destinée aux utilisateurs
        francophones. Si vous ne trouvez pas, un recherche sur <a href="http://www.google.fr" target="_top">Google</a> devrait permettre
        assez simplement de trouver des listes intéressantes. Il existe
        également un <a href="http://oslab.snu.ac.kr/%7Edjshin/linux/mail-list/index.shtml" target="_top">index
        des listes anglophones</a> comprenant une centaine de
        listes.
        
    </p></li><li><p>
    
        Enregistrez-vous avec votre machine sur le <a href="http://counter.li.org/" target="_top">Compteur mondial des 
        utilisateur de Linux</a> (site en anglais).
        
    </p></li><li><p>
    
        <span class="emphasis"><em>Et pour finir… </em></span>Téléchargez <a href="http://algolog.tripod.com/shivalik.gz" target="_top">le script</a> et
        lancez-le. Faites une copie de sauvegarde (sur une disquette ou
        un CD) du répertoire : <tt class="filename">/root/postinfo</tt> que le script a
        créé. Vous devriez aussi imprimer le rapport de synthèse
        <tt class="filename">/root/postinfo/summary</tt> créé par le script.
    
    </p></li><li><p>
    
        Vous devez lancer ce script dès que vous aurez installé Linux
        pour la première fois, puis après chaque mise à jour importante
        du système. Vous pouvez aussi enregistrer ce script dans la
        table des chronologies systèmes (<tt class="literal">crontab</tt>),
        afin que le script se lance de lui-même périodiquement. Cela
        vous évitera des tracas si des dysfonctionnements survenaient
        plus tard.

    </p></li></ol></div></div><div class="sect1" lang="fr"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="le-script"></a>3. Le script bash</h2></div></div><div></div></div><p>

        Le <a href="http://algolog.tripod.com/shivalik.gz" target="_top">script
        bash</a> (shivalik version 1.0) est un programme permettant
        de sauvegarder les informations et les fichiers essentiels.
        Après avoir téléchargé ce script :
    
    </p><div class="itemizedlist"><ul type="disc"><li><p>
    
        Assurez-vous d'être connecté sous le compte
        <tt class="literal">root</tt> ;
        
    </p></li><li><p>
    
        Créez un répertoire avec les permissions de l'utilisateur
        <tt class="literal">root</tt>. Disons : <tt class="filename">/root/mon_script</tt> ;
    
    </p></li><li><p>
    
        Enregistrez le script <a href="http://algolog.tripod.com/shivalik.gz" target="_top">shivalik.gz</a>
        dans ce répertoire ;
        
    </p></li><li><p>
    
        Allez dans ce répertoire avec la commande <b class="userinput"><tt>cd
        /root/mon_script</tt></b>, puis décompressez le script avec
        la commande <b class="userinput"><tt>gunzip shivalik.gz</tt></b> ;
    
    </p></li></ul></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/important.png"></td><th align="left">Important</th></tr><tr><td colspan="2" align="left" valign="top"><p>

        Vous devez lire l'avertissement donné à la fin du script. Ne
        passez aux étapes suivantes que si vous êtes d'accord avec les
        conditions indiquées dans cet avertissement…

    </p></td></tr></table></div><div class="itemizedlist"><ul type="disc"><li><p>

        Pour lancer le script : vous devez le rendre exécutable
        (uniquement par root) avec la commande <b class="userinput"><tt>chmod 700
        shivalik</tt></b> ;

    </p></li><li><p>

        Vérifiez que les chemins des divers fichiers qui doivent être
        sauvés sont corrects et conformes à votre installation ;

    </p></li><li><p>

        Vous ne pourrez exécuter le script correctement que si vous êtes
        connectés sous le compte <tt class="literal">root</tt>. En effet, un
        grand nombre des fichiers à sauvegarder ne sont accessibles que
        par l'utilisateur <tt class="literal">root</tt>.

    </p></li></ul></div><p>
    
        Maintenant vous pouvez exécuter le script (sous le compte
        <tt class="literal">root</tt>, ne l'oubliez pas) en lançant la
        commande : <b class="userinput"><tt>./shivalik</tt></b>
        
    </p><p>

        Ce script est très documenté. En aucun cas il ne modifiera ni ne
        détruira vos fichiers et vos répertoires. Il va créer une copie
        de sauvegarde bien protégée de quelques informations et fichiers
        essentiels. Le script entier est disponible ci-dessous pour que
        vous puissiez le parcourir et comprendre son fonctionnement. 
        Sentez-vous libre d'ajouter au script des fonctions
        supplémentaires ou des fichiers que vous souhaiteriez voir
        sauvegarder. N'hésitez pas à envoyer un petit mot en anglais à
        l'auteur de ce script (<tt class="email">&lt;<a href="mailto:algolog%20CHEZ%20hd1%20POINT%20vsnl%20POINT%20net%20POINT%20in">algolog CHEZ hd1 POINT vsnl POINT net POINT in</a>&gt;</tt>) pour lui
        indiquer vos modifications.
        
    </p><p>
    
        Rappelez-vous que le script <span><b class="command">shivalik</b></span> n'est
        pas un outil destiné à sauvegarder et à restaurer totalement
        votre système. L'idéal étant de faire une copie intégrale de
        votre installation Linux, incluant tous les fichiers et tous les
        répertoires. Ce qui n'est pas toujours possible, nécessaire ou
        conseillé. La seconde meilleure chose étant de sauvegarder les
        informations et les fichiers les plus essentiels. Le script
        <span><b class="command">shivalik</b></span> le fait pour vous. Le script crée le
        répertoire <tt class="filename">/root/postinfo/</tt>, et y stocke les
        informations et fichiers essentiels. Pour être préparé à toute
        éventualité, vous devrez intégralement copier le répertoire
        <tt class="filename">/root/postinfo/</tt> sur un
        disque ou une disquette dès que le script aura été exécuté.
        
    </p><p>
    
        <span class="emphasis"><em>Récupération et réparation :</em></span> en cas de
        problème, plus tard, vous pourrez réparer les fichiers
        endommagés en les recopiant depuis le répertoire <tt class="filename">/root/postinfo/</tt>. C'est aussi simple
        que ça.
    
    </p><p>
    
        La structure du répertoire <tt class="filename">/root/postinfo/</tt> et les fichiers
        qu'il contient seront comme suit :
     
    </p><div class="variablelist"><dl><dt><span class="term">
        <tt class="filename">/root/postinfo/summary</tt>
    </span></dt><dd><p>
    
        Ce fichier contient un rapport de synthèse de la situation de
        votre système (mémoire, partitions, points de montage,
        utilisation du disque). Ce fichier contient aussi la liste des
        fichiers qui ont été sauvegardés. Il contient enfin des
        informations destinées à l'administrateur comme la date et
        l'heure de la sauvegarde, la version de shivalik utilisée, et
        cætera.
    
    </p></dd><dt><span class="term">
        <tt class="filename">/root/postinfo/postinfo.tar.gz</tt>
    </span></dt><dd><p>
    
        Contient une copie du précédent postinfo (s'il y en a eu un).
    
    </p></dd><dt><span class="term">
        <tt class="filename">/root/postinfo/snapshot.gz</tt>
    </span></dt><dd><p>
    
        Ce fichier compressé contient une liste structurée de
        <span class="emphasis"><em>tous</em></span> les fichiers et répertoires de votre
        système Linux. Vous pouvez décompresser ce fichier et utiliser
        un éditeur de texte pour retrouver l'emplacement de n'importe
        quel fichier. Bien sûr, vous ne pourrez retrouver le contenu
        d'un fichier à moins que vous l'ayez sauvegardé explicitement
        ailleurs.
    
    </p></dd><dt><span class="term"><tt class="filename">/root/postinfo/shivalik</tt></span></dt><dd><p>

        C'est une copie du script shivalik qui a été utilisé pour faire
        la sauvegarde post-installation. Après un incident, lors de la
        récupération, vous pourrez toujours examiner ce script pour voir
        comment la sauvegarde a été faite. Vous aurez toujours une copie
        du script cohérentes avec les fichiers créés par le script.
    
    </p></dd><dt><span class="term"><tt class="filename">/root/postinfo/etcfiles/</tt></span></dt><dd><p>

        Ce <span class="emphasis"><em>sous-répertoire</em></span> contient la copie d'un
        grand nombre de fichiers essentiels contenus dans le répertoire
        <tt class="filename">/etc/</tt> de votre
        installation Linux. Il contient aussi les copies de divers
        fichiers de configuration contenus dans le répertoire
        <tt class="filename">/etc/</tt>.
        
    </p></dd><dt><span class="term"><tt class="filename">/root/postinfo/otherfiles/</tt></span></dt><dd><p>

        Ce <span class="emphasis"><em>sous-répertoire</em></span> contient une copie de
        quelques fichiers essentiels (ceux qui ne sont pas dans le
        répertoire <tt class="filename">/etc/</tt> de votre
        installation Linux. Si vous voulez, vous pouvez ajouter
        n'importe quel autre fichier ici, et le sauvegarder
        automatiquement avec les autres.
    
    </p></dd></dl></div><div class="sect2" lang="fr"><div class="titlepage"><div><div><h3 class="title"><a name="script"></a>3.1. Le script…</h3></div></div><div></div></div><pre class="programlisting">
# ---------------------------------------------------------------------
#                       shivalik (version 1.0)
#                 Adaptation française de Simon Depiets
#
# Lisez d'abord la section AVERTISSEMENT de ce script.
#
# Ce script collecte après installation des informations
# essentielles sur votre système. Il peut aussi être lancé 
# à l'occasion pour rassembler en un endroit unique toutes 
# les informations utiles sur votre installation Linux.
#
# Les données du script seront stockées dans :
# /root/postinfo/
#
# Un rapport de synthèse sera écrit dans :
# /root/postinfo/summary

# Pour le mode d'emploi et les informations associées, consultez :
# http://algolog.tripod.com/postlnx.htm
# ---------------------------------------------------------------------

clear

cat &lt;&lt; EOF

---------------------------------------------------------------
Ce texte est la sortie du script shivalik (version 1.0) de
M. Partha, d'Algologic Research &amp; Solutions.
Pour que ce script fonctionne correctement, vous devez être
connecté sous le compte « root ». Vous devez aussi
lire et accepter les termes et les avertissements donnés dans
la section AVERTISSSEMENT à la fin de ce script.
---------------------------------------------------------------

### ÉTAPE 0 ### Travail préparatoire

Premièrement, nous créons le répertoire /root/postinfo/
si ce n'est pas encore fait
EOF

test ! -d /root/postinfo &amp;&amp; mkdir /root/postinfo

cat &lt;&lt; EOF

Nous sauvegardons la version actuelle de tous les fichiers
contenus dans le répertoire « postinfo »

Mais tout d'abord nous supprimons la version précédente,
c'est-à-dire la version actuelle - 1

EOF

test -e /root/postinfo/oldpostinfo* &amp;&amp; \
    rm -v /root/postinfo/oldpostinfo.tar.gz

echo

# Le fichier oldpostinfo est créé temporairement dans /root ;
# il sera déplacé dans /root/postinfo

tar czvf /root/oldpostinfo.tar.gz /root/postinfo/*

# Vérification du fonctionnement de la compression

if `test -s /root/oldpostinfo.tar.gz` ; then 
    echo "Ancien répertoire postinfo copié dans /root/oldpostinfo.tar.gz"
    ls -l /root/oldpostinfo*
else
    echo "Impossible de sauvegarder oldpostinfo."
    echo "Abandon. Arrêt du script."
    exit 1
fi

# Maintenant nous supprimons tous les fichiers postinfo actuels

rm -rf /root/postinfo/*

# Et nous créons un nouveau fichier de synthèse

echo "shivalik (version 1.0)" &gt; /root/postinfo/summary
echo -n "Rapport créé le : " &gt;&gt; /root/postinfo/summary

date -R &gt;&gt; /root/postinfo/summary

echo
echo "Et maintenant, nous déplaçons le fichier oldpostinfo"
echo "dans le répertoire /root/postinfo/"

mv -v /root/oldpostinfo.tar.gz /root/postinfo
#

# Copie du script schivalik

echo "Charité bien ordonnée commence par soi-même."
echo "Nous faisons une copie du script shivalik."

cat &lt;&lt; EOF &gt;&gt; /root/postinfo/summary
Nous faisons une copie du script shivalik dans /root/postinfo/
EOF


cp -v ./shivalik /root/postinfo/shivalik

# Faisons le point

echo
echo "Contenu du répertoire /root/postinfo à la fin de l'étape 0"

ls -AlR /root/postinfo

echo "Fin de l'"### ÉTAPE 0 ###"
echo
#
#
echo

echo "### ÉTAPE 1 ### Prendre un instantané de votre système"

cat &lt;&lt; EOF &gt;&gt; /root/postinfo/summary

### ÉTAPE 1 ### Un instantané de tous vos répertoires
                et de tous vos fichiers

EOF

cat &lt;&lt; EOF
La première étape est de faire le point sur le contenu
de votre ordinateur. Cela peut prendre plusieurs minutes.
Donc, allez chercher votre tasse à café !
EOF

ls -AlRH / &gt;&gt; /root/postinfo/snapshot

rm -f /root/postinfo/snapshot.gz

gzip /root/postinfo/snapshot

echo "Le petit oiseau va sortir !"
echo "Photo prise"

cat &lt;&lt; EOF &gt;&gt; /root/postinfo/summary
Une liste exhaustive de tous les fichiers a été crée et enregistrée
dans /root/postinfo/snapshot.gz
EOF

ls -l /root/postinfo/snapshot.gz &gt;&gt; /root/postinfo/summary

# Faisons le point à la fin de cette étape

echo
echo "Contenu du répertoire /root/postinfo à la fin de cette étape"

ls -l /root/postinfo

echo "Fin de l'"### ÉTAPE 1 ###"
echo
#
#

echo
echo "### ÉTAPE 2 ### Informations sur le système"

cat &lt;&lt; EOF &gt;&gt; /root/postinfo/summary

### ÉTAPE 2 ### Informations sur le système

EOF

echo "Récolte des informations sur le système"

echo "... sur la mémoire"
echo "---- cat /proc/meminfo ---------" &gt;&gt; /root/postinfo/summary
cat /proc/meminfo &gt;&gt; /root/postinfo/summary

echo "... sur les partitions et les points de montage"
echo "---- cat /proc/partitions ------" &gt;&gt; /root/postinfo/summary
cat /proc/partitions &gt;&gt; /root/postinfo/summary

echo "... sur l'espace disque utilisé"
echo "---- df ------------------------" &gt;&gt; /root/postinfo/summary
df &gt;&gt; /root/postinfo/summary

echo "... sur les modules"
echo "---- cat /proc/modules ---------" &gt;&gt; /root/postinfo/summary
cat /proc/modules &gt;&gt; /root/postinfo/summary

# Faisons le point à la fin de cette étape

echo
echo "Contenu du répertoire /root/postinfo à la fin de l'ÉTAPE 2"
ls -AlR /root/postinfo
echo "Fin de l'"### ÉTAPE 2 ###"
echo
#
#
cat &lt;&lt; EOF

### ÉTAPE 3 ### Maintenant nous copions quelques fichiers
                importants du répertoire « /etc ».

Cette section pourrait avoir besoin d'être adaptée à vos besoins.
Cela dépend de l'installation que vous avez faite, de la distribution
que vous avez utilisé et des options que vous avez choisies durant 
l'installation.
EOF

cat &lt;&lt; EOF &gt;&gt; /root/postinfo/summary

### ÉTAPE 3 ### Maintenant nous sauvegardons quelques fichiers
                importants du répertoire /etc
EOF

test ! -d /root/postinfo/etcfiles \
    &amp;&amp; mkdir /root/postinfo/etcfiles

echo "... sauvegarde de XF86Config -- \
votre fichier de configuration de XWindows"

cp /etc/XF86Config /root/postinfo/etcfiles

echo "copie /etc/XF86Config dans /root/postinfo/" \
    &gt;&gt; /root/postinfo/summary

echo "... sauvegarde du fichier /etc/fstab"
cp /etc/fstab  /root/postinfo/etcfiles
echo "copie /etc/fstab dans /root/postinfo/" \
    &gt;&gt; /root/postinfo/summary

echo "... sauvegarde du fichier /etc/profile"
cp /etc/profile  /root/postinfo/etcfiles
echo "copie /etc/profile dans /root/postinfo/" \
    &gt;&gt; /root/postinfo/summary

echo "... sauvegarde du fichier /etc/profile.local"
cp /etc/profile.local  /root/postinfo/etcfiles
echo "copie /etc/profile.local dans /root/postinfo/" &gt;&gt; /root/postinfo/summary

echo "... sauvegarde des fichiers /etc/*conf"
cp /etc/*conf /root/postinfo/etcfiles

echo "... sauvegarde des fichiers /etc/*config"
cp /etc/*config /root/postinfo/etcfiles

cat &lt;&lt; EOF &gt;&gt; /root/postinfo/summary
Les fichiers suivants ont été copiés de /etc vers /root/postinfo/etcfiles
EOF

echo "/etc/*conf" &gt;&gt; /root/postinfo/summary
echo "/etc/*config" &gt;&gt; /root/postinfo/summary

# Faisons le point à la fin de cette étape

echo
echo "Contenu de /root/postinfo à la fin de l'ÉTAPE 3"

ls -AlR /root/postinfo

echo "Fin de l'"### ÉTAPE 3 ###"
echo
#
#

cat &lt;&lt; EOF

### ÉTAPE 4 ### Maintenant nous sauvegardons d'autres fichiers importants

Cette section à besoin d'être personnalisée selon
l'installation que vous avez faite, la distribution utilisée
et les options choisies durant l'installation
Cette partie du script a été personnalisée pour SuSe 7.1
EOF

cat &lt;&lt; EOF &gt;&gt; /root/postinfo/summary

### ÉTAPE 4 ### Maintenant nous copions quelques autres
                fichiers importants
                
dans /root/postinfo/otherfiles
Vous pouvez ajouter d'autres fichiers à copier à cette étape
EOF

test ! -d /root/postinfo/otherfiles \
    &amp;&amp; mkdir /root/postinfo/otherfiles

ls -l /root/postinfo/

echo "... sauvegarde de /etc/init.d/boot.local --"
cp /etc/init.d/boot.local /root/postinfo/otherfiles
echo "copie de /etc/init.d/boot.local dans \
/root/postinfo/otherfiles" &gt;&gt; /root/postinfo/summary

echo "... sauvegarde de /etc/init.d/halt.local --"
cp /etc/init.d/halt.local /root/postinfo/otherfiles
echo "copie de /etc/init.d/halt.local vers \
/root/postinfo/otherfiles" &gt;&gt; /root/postinfo/summary

# faisons le point à la fin de cette étape

echo
echo "Contenu de /root/postinfo à la fin de l'ÉTAPE 4"

ls -AlR /root/postinfo

echo "Fin de l'"### ÉTAPE 4 ###"
echo

echo
echo "### ÉTAPE 999 ### Emballage, nettoyage"

cat &lt;&lt; EOF &gt;&gt; /root/postinfo/summary

### ÉTAPE 999 ### Emballage, nettoyage, bilan
EOF

echo "résumé, nettoyage"

# Pour des raisons de sécurité nous rendons /root/postinfo
# inaccessible et invisible aux non-root

chmod 700 /root/postinfo
chmod 700 /root/postinfo/etcfiles
chmod 700 /root/postinfo/otherfiles
chmod 700 /root/postinfo/*
chmod 700 /root/postinfo/etcfiles/*
chmod 700 /root/postinfo/otherfiles/*

echo "Ceci est le contenu de /root/postinfo" &gt;&gt; /root/postinfo/summary
ls -AlR /root/postinfo &gt;&gt; /root/postinfo/summary
echo "###### FIN #####" &gt;&gt; /root/postinfo/summary

# faisons le point à la fin de cette étape

echo
echo "Contenu de of /root/postinfo à la fin de l'ÉTAPE 999"
ls -AlR /root/postinfo

cat &lt;&lt; EOF
Fin de l\'### ÉTAPE 999 ###

###### THE END #####

IMPORTANT : Vous devez maintenant copier tous les fichiers
de /root/postinfo dans un endroit sûr, de préférence sur un disque
différent ou sur un support de sauvegarde extractible.

Vous trouverez un rapport de synthèse de cette procédure dans
/root/postinfo/summary

Vous trouverez la précedente version de ce rapport (s'il y en a une)
dans /root/postinfo/oldpostinfo.tar.gz
EOF

#---------------------------------------------------------
#        AVERTISSEMENT AVERTISSEMENT AVERTISSEMENT 
#                shivalik (ver. 1.0)
#
# Ce script est mis à votre disposition sans aucune
# garantie ou assurance de performance ou de sa capacité
# à remplir une tâche quelconque.
#
# Sachez que vous utilisez ce script de par votre propre volonté et 
# votre propre initiative et à vos risques et perils.
#
# Vous trouverez la dernière version de ce script, et des informations
# liées à ce script sur : http://algolog.tripod.com/postlnx.htm
#
# Le copyright et tous autres droits sont réservés par
# le Dr. S. Parthasarathy (algolog CHEZ hd1 POINT vsnl POINT net POINT in)
#--------------------------------------------------------

</pre></div></div></div></body></html>
