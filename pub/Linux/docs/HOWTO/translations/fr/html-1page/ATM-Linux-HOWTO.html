<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>        Guide pratique de la gestion d'ATM sous Linux
    </TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"></HEAD
><BODY
CLASS="ARTICLE"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="ARTICLE"
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="TITLE"
><A
NAME="AEN2"
>Guide pratique de la gestion d'ATM sous Linux</A
></H1
><H2
CLASS="SUBTITLE"
>Version française du <I
CLASS="FOREIGNPHRASE"
>ATM on Linux 
        HOWTO</I
></H2
><H3
CLASS="AUTHOR"
><A
NAME="AEN6"
>Paul B Schroeder</A
></H3
><DIV
CLASS="AFFILIATION"
><SPAN
CLASS="ORGNAME"
>IBM Corporation<BR></SPAN
><DIV
CLASS="ADDRESS"
><P
CLASS="ADDRESS"
><CODE
CLASS="EMAIL"
>&#60;<A
HREF="mailto:paulsch@us.ibm.com"
>paulsch@us.ibm.com</A
>&#62;</CODE
></P
></DIV
></DIV
><P
CLASS="OTHERCREDIT"
><B
>François Romieu - </B
><SPAN
CLASS="CONTRIB"
>Traduction française</SPAN
></P
><P
CLASS="OTHERCREDIT"
><B
>Frédéric Delanoy - </B
><SPAN
CLASS="CONTRIB"
>Relecture de la version française</SPAN
></P
><SPAN
CLASS="RELEASEINFO"
>    Version 2.4.0.fr.1.0
    <BR></SPAN
><P
CLASS="PUBDATE"
>2003-03-11<BR></P
><DIV
CLASS="REVHISTORY"
><TABLE
WIDTH="100%"
BORDER="0"
><TR
><TH
ALIGN="LEFT"
VALIGN="TOP"
COLSPAN="3"
><B
>Historique des versions</B
></TH
></TR
><TR
><TD
ALIGN="LEFT"
>Version 2.4.0.fr.1.0</TD
><TD
ALIGN="LEFT"
>11/03/2003</TD
><TD
ALIGN="LEFT"
>Revu par : FRom, FDel</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Traduction de la version 2.4.0 de
				« ATM-Linux-HOWTO ».</TD
></TR
><TR
><TD
ALIGN="LEFT"
>Version 2.4.0</TD
><TD
ALIGN="LEFT"
>18/10/2001</TD
><TD
ALIGN="LEFT"
>Revu par : PBS</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Converti de LaTeX en DocBook avec 
				quelques ajouts et changements 
				supplémentaires.
				<EM
>(Converted from LaTeX to 
				DocBook along with some other additions 
				and changes.)</EM
></TD
></TR
></TABLE
></DIV
><DIV
><DIV
CLASS="ABSTRACT"
><P
></P
><A
NAME="AEN30"
></A
><P
>        Ce document décrit l'installation et la configuration des 
        pilotes et outils nécessaires au fonctionnement d'ATM sous Linux.
      </P
><P
>        Pour les dernières informations, reportez-vous à la <A
HREF="http://linux-atm.sourceforge.net/"
TARGET="_top"
>page d'accueil</A
> 
        de <I
CLASS="CITETITLE"
>ATM sous Linux</I
>.
      </P
><P
>        La prise en charge d'ATM par Linux est encore au stade 
        pré-alpha. La version actuelle gère les connexions ATM brutes au 
        niveau PVC et SVC, IP sur ATM, l'émulation LAN, MPOA, Arequipa 
        et d'autres choses.
      </P
><P
></P
></DIV
></DIV
><HR></DIV
><DIV
CLASS="TOC"
><DL
><DT
><B
>Table des matières</B
></DT
><DT
>1. <A
HREF="#INTRODUCTION"
>Introduction</A
></DT
><DD
><DL
><DT
>1.1. <A
HREF="#INTRODUCTION.REMERCIEMENTS"
>Origine et remerciements</A
></DT
><DT
>1.2. <A
HREF="#INTRODUCTION.COPYRIGHT"
>Droits d'utilisation</A
></DT
><DT
>1.3. <A
HREF="#AEN78"
>Copyright</A
></DT
><DT
>1.4. <A
HREF="#INTRODUCTION.MAILING-LIST"
>Liste de diffusion</A
></DT
><DT
>1.5. <A
HREF="#INTRODUCTION.CVS-ACCESS"
>Accès CVS</A
></DT
></DL
></DD
><DT
>2. <A
HREF="#INSTALLATION"
>Installation</A
></DT
><DD
><DL
><DT
>2.1. <A
HREF="#INSTALLATION.THE-BINARY-RPMS"
>Les binaires RPM</A
></DT
><DT
>2.2. <A
HREF="#INSTALLATION.THE-SOURCE-TREE"
>L'arborescence des sources</A
></DT
><DT
>2.3. <A
HREF="#INSTALLATION.KERNEL-CONFIGURATION"
>Configuration du noyau</A
></DT
><DT
>2.4. <A
HREF="#INSTALLATION.DRIVER-MESSAGES"
>Messages des gestionnaires de périphériques</A
></DT
><DT
>2.5. <A
HREF="#INSTALLATION.MEMORY-DEBUGGING"
>Débogage mémoire</A
></DT
><DT
>2.6. <A
HREF="#INSTALLATION.ATM-TOOLS"
>Utilitaires ATM</A
></DT
><DT
>2.7. <A
HREF="#INSTALLATION.EXTRA-PACKAGES"
>Paquets supplémentaires</A
></DT
></DL
></DD
><DT
>3. <A
HREF="#DEVICE-SETUP"
>Configuration des périphériques</A
></DT
><DD
><DL
><DT
>3.1. <A
HREF="#DEVICE-SETUP.ATM-OVER-TCP-SETUP"
>ATM au-dessus de TCP</A
></DT
><DT
>3.2. <A
HREF="#DEVICE-SETUP.ZN1221-ZN1225-TUNING"
>ZN1221 / ZN1225</A
></DT
><DT
>3.3. <A
HREF="#DEVICE-SETUP.FILES-IN-PROC-NET-ATM"
>Fichiers du répertoire
<TT
CLASS="FILENAME"
>/proc/net/atm/</TT
></A
></DT
><DT
>3.4. <A
HREF="#DEVICE-SETUP.ATM-DIAGNOSTICS"
>Diagnostic ATM</A
></DT
><DT
>3.5. <A
HREF="#DEVICE-SETUP.SONET-DIAGNOSTICS"
>Diagnostic SONET</A
></DT
></DL
></DD
><DT
>4. <A
HREF="#NATIVE-ATM-PVCS"
>Circuits virtuels permanents ATM natifs (PVC)</A
></DT
><DD
><DL
><DT
>4.1. <A
HREF="#NATIVE-ATM-PVCS.TRAFFIC-TOOLS"
>Outils de génération de trafic</A
></DT
><DT
>4.2. <A
HREF="#NATIVE-ATM-PVCS.DIRECT-CELL-ACCESS"
>Accès direct aux cellules</A
></DT
></DL
></DD
><DT
>5. <A
HREF="#SIGNALING"
>Signalisation</A
></DT
><DD
><DL
><DT
>5.1. <A
HREF="#SIGNALING.ATM-HOSTS-FILE"
>Fichier des hôtes ATM</A
></DT
><DT
>5.2. <A
HREF="#SIGNALING.ANS"
>ANS</A
></DT
><DT
>5.3. <A
HREF="#SIGNALING.SIGNALING-DEMON"
>Démon de signalisation</A
></DT
><DT
>5.4. <A
HREF="#SIGNALING.ILMI-DEMON"
>Démon ILMI</A
></DT
><DT
>5.5. <A
HREF="#SIGNALING.MANUAL-ADDRESS-CONFIGURATION"
>Configuration manuelle d'adresse</A
></DT
><DT
>5.6. <A
HREF="#SIGNALING.RUNNING-TWO-ATM-NICS-BACK-TO-BACK"
>Emploi de deux adaptateurs ATM
directement connectés</A
></DT
><DT
>5.7. <A
HREF="#SIGNALING.Q-2931-MESSAGE-DUMPER"
>Analyseur-producteur de messages Q.2931</A
></DT
></DL
></DD
><DT
>6. <A
HREF="#IP-OVER-ATM"
>IP au-dessus d'ATM</A
></DT
><DD
><DL
><DT
>6.1. <A
HREF="#IP-OVER-ATM.CLIP"
>CLIP</A
></DT
><DT
>6.2. <A
HREF="#IP-OVER-ATM.LAN-EMULATION"
>Émulation de LAN</A
></DT
><DT
>6.3. <A
HREF="#IP-OVER-ATM.MPOA"
>MPOA</A
></DT
></DL
></DD
><DT
><A
HREF="#BIBLIOGRAPHY"
>Bibliographie</A
></DT
></DL
></DIV
><DIV
CLASS="SECT1"
><H2
CLASS="SECT1"
><A
NAME="INTRODUCTION"
>1. Introduction</A
></H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="INTRODUCTION.REMERCIEMENTS"
>1.1. Origine et remerciements</A
></H3
><P
>Ce guide s'inspire largement du document 
<I
CLASS="CITETITLE"
>Usage Instructions</I
> qui a été inclus dans le
paquet <EM
>ATM on Linux</EM
> jusqu'à la version 0.79.
Werner Almesberger <CODE
CLASS="EMAIL"
>&#60;<A
HREF="mailto:wa@almsesberger.net"
>wa@almsesberger.net</A
>&#62;</CODE
> l'a rédigé pendant
son séjour au
<A
HREF="http://icawww.epfl.ch/"
TARGET="_top"
>Institute for computer Communications
and Applications (ICA)</A
>.</P
><P
>Richard Jones <CODE
CLASS="EMAIL"
>&#60;<A
HREF="mailto:rjones@imcl.com"
>rjones@imcl.com</A
>&#62;</CODE
> est à l'origine de la partie
<A
HREF="#SIGNALING.RUNNING-TWO-ATM-NICS-BACK-TO-BACK"
><I
>Emploi de deux adaptateurs ATM
directement connectés</I
></A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INTRODUCTION.COPYRIGHT"
>1.2. Droits d'utilisation</A
></H3
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Le texte ci-dessous est la version française de la licence de ce 
document. Seule la version originale de cette licence, présentée dans la 
section suivante, fait foi.</P
></TD
></TR
></TABLE
></DIV
><P
>La version originale de ce document a été réalisé par la société 
<EM
>IBM Corporation</EM
> en 2001.</P
><P
>Vous avez le droit de copier, distribuer et modifier la version 
originale de ce document selon les termes de la <A
HREF="http://www.gnu.org/copyleft/fdl.html"
TARGET="_top"
>licence de documentation libre GNU (GFDL)</A
> 
version 1.1 ou ultérieures, telle que publiée par la Free Software 
Foundation ; sans section invariante, sans texte de première de 
couverture ni texte de quatrième de couverture. Une copie de la licence 
est disponible sur <A
HREF="http://www.gnu.org/copyleft/fdl.html"
TARGET="_top"
>http://www.gnu.org/copyleft/fdl.html</A
>.</P
><P
>Une partie importante de ce document provient du guide <I
CLASS="CITETITLE"
>Usage 
Instructions</I
>, inclus dans le paquet <SPAN
CLASS="PRODUCTNAME"
>ATM on 
Linux</SPAN
> jusqu'à la version 0.79, qui a été disponible sous 
les licences BSD, GNU General Public License (GPL) et GNU Lesser General 
Public License (LGPL).</P
><P
>La version française de document a été réalisée par François Romieu et 
Frédéric Delanoy. La version française de ce guide pratique est publiée 
en accord avec les termes de la <A
HREF="http://www.gnu.org/copyleft/fdl.html"
TARGET="_top"
>licence de 
documentation libre GNU (GFDL)</A
> ; sans section invariante, 
sans texte de première de couverture ni texte de quatrième de 
couverture. Une copie de la licence est disponible sur <A
HREF="http://www.gnu.org/copyleft/fdl.html"
TARGET="_top"
>http://www.gnu.org/copyleft/fdl.html</A
>. Une version française non officielle de cette 
licence est disponible sur <A
HREF="http://cesarx.free.fr/gfdlf.html"
TARGET="_top"
>http://cesarx.free.fr/gfdlf.html</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN78"
>1.3. Copyright</A
></H3
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Le texte ci-dessous est la licence de ce document. Ce texte fait foi. Il 
est composé de la licence en anglais du document orignal, suivi de la 
licence en français de sa traduction.</P
></TD
></TR
></TABLE
></DIV
><P
>Copyright 2001 IBM Corporation.</P
><P
>Permission is granted to copy, distribute and/or modify this document under
the terms of the <A
HREF="http://www.gnu.org/copyleft/fdl.html"
TARGET="_top"
>GNU Free Documentation 
License</A
>, Version 1.1 or any later version published by the Free 
Software Foundation; with no Invariant Sections, with no Front-Cover 
Texts, and with no Back-Cover Texts. A copy of the license can be found 
at <A
HREF="http://www.gnu.org/copyleft/fdl.html"
TARGET="_top"
>http://www.gnu.org/copyleft/fdl.html</A
>.</P
><P
>A large portion of this document is derived from the <I
CLASS="CITETITLE"
>Usage 
Instructions</I
> included with the <SPAN
CLASS="PRODUCTNAME"
>ATM on 
Linux</SPAN
> distribution up to version 0.79 which was released 
under the BSD License, GNU General Public License (GPL), and GNU Lesser 
General Public License (LGPL).</P
><P
>La version française de document a été réalisée par François Romieu et
Frédéric Delanoy. La version française de ce guide pratique est publiée
en accord avec les termes de la <A
HREF="http://www.gnu.org/copyleft/fdl.html"
TARGET="_top"
>licence de 
documentation libre GNU (GFDL)</A
> ; sans section invariante, 
sans texte de première de couverture ni texte de quatrième de 
couverture. Une copie de la licence est disponible sur <A
HREF="http://www.gnu.org/copyleft/fdl.html"
TARGET="_top"
>http://www.gnu.org/copyleft/fdl.html</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INTRODUCTION.MAILING-LIST"
>1.4. Liste de diffusion</A
></H3
><P
>Il existe une liste de diffusion pour discuter d'ATM sous Linux. Pour faire
part de remarques, poser des questions ou vous impliquer, n'hésitez pas à
rejoindre cette liste.
Vous pouvez vous y abonner (<EM
>subscribe</EM
>) et vous en
désabonner (<EM
>unsubscribe</EM
>) à l'adresse
<A
HREF="http://lists.sourceforge.net/lists/listinfo/linux-atm-general"
TARGET="_top"
>http://lists.sourceforge.net/lists/listinfo/linux-atm-general</A
>.</P
><P
>La liste de diffusion est archivée sur
<A
HREF="http://www.geocrawler.com/lists/3/SourceForge/6487/0/"
TARGET="_top"
>http://www.geocrawler.com/lists/3/SourceForge/6487/0/</A
>. </P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INTRODUCTION.CVS-ACCESS"
>1.5. Accès CVS</A
></H3
><P
>Il est conseillé aux utilisateurs d'employer les publications stables
plutôt que de récupérer la dernière version depuis le référentiel CVS.
Voici néanmoins la marche à suivre pour les amateurs de sensations fortes.</P
><P
>Commencez par vous connecter de façon anonyme :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN104"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>% cvs -d:pserver:anonymous@cvs.linux-atm.sourceforge.net.:/cvsroot/linux-atm login</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Appuyez sur Entrée à l'invite du mot de passe. Récupérez ensuite
l'arborescence :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN107"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>% cvs -z6 -d:pserver:anonymous@cvs.linux-atm.sourceforge.net.:/cvsroot/linux-atm co -P linux-atm</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Il est possible de spécifier une branche particulière :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN110"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>% cvs -z6 -d:pserver:anonymous@cvs.linux-atm.sourceforge.net.:/cvsroot/linux-atm co -r V2_5_0 linux-atm</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Dans tous les cas, un répertoire « linux-atm »
contenant la dernière version des sources est créé. Une fois à l'intérieur
de ce répertoire, l'option « -d » de CVS n'est plus
nécessaire. Par exemple, tapez :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN113"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>% cvs -z6 up -d</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>pour obtenir les modifications apportées au référentiel (l'option
« -d » de l'exemple se rapporte à la sous-commande
« up » et n'a rien à voir avec le paramètre
« -d » employé pour spécifier l'emplacement de la
racine CVS).</P
><P
>Après avoir récupéré l'arborescence, exécutez le script 
<SPAN
CLASS="APPLICATION"
>autotools</SPAN
> dans le répertoire de plus haut niveau
avant d'entamer la configuration, la compilation et l'installation. </P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN118"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># ./autotools 
Running aclocal...
Running autoconf...
Running autoheader...
Running automake...
automake: configure.in: installing `./install-sh'
automake: configure.in: installing `./mkinstalldirs'
automake: configure.in: installing `./missing'
configure.in: 26: required file `./ltconfig' not found
automake: Makefile.am: installing `./INSTALL'
automake: configure.in: installing `src/lane/ylwrap'
Finished...  Now run './configure' and 'make'...</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Pour construire un paquet .tar.gz ou un RPM, exécutez respectivement
<KBD
CLASS="USERINPUT"
>make dist</KBD
> ou <KBD
CLASS="USERINPUT"
>make rpm</KBD
>.
Le fichier .tar.gz se trouvera dans le répertoire de plus haut niveau de
l'arborescence tandis que le RPM sera placé dans le répertoire
<TT
CLASS="FILENAME"
>src/extra/RPMS</TT
>.</P
><P
>Une interface web permet de visualiser le contenu du référentiel CVS :
<A
HREF="http://cvs.linux-atm.sourceforge.net/cgi-bin/viewcvs.cgi/linux-atm/linux-atm/"
TARGET="_top"
>http://cvs.linux-atm.sourceforge.net/cgi-bin/viewcvs.cgi/linux-atm/linux-atm/</A
>.</P
><P
>Enfin, si vous souhaitez recevoir un courrier électronique pour chaque
modification apportée au référentiel, abonnez-vous à la liste de
diffusion « linux-atm-commits » : <A
HREF="http://lists.sourceforge.net/lists/listinfo/linux-atm-commits"
TARGET="_top"
>http://lists.sourceforge.net/lists/listinfo/linux-atm-commits</A
>.</P
><P
>Cette liste de diffusion est en lecture seule et aucune discussion ni question
n'y est autorisée (idem pour les patches). Les discussions ont lieu sur la
liste de diffusion linux-atm-general.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="INSTALLATION"
>2. Installation</A
></H2
><P
>Pour installer le paquet, il vous faut :

<P
></P
><UL
><LI
><P
>le paquet lui-même <A
HREF="http://linux-atm.sourceforge.net/dist.php"
TARGET="_top"
>http://linux-atm.sourceforge.net/dist.php</A
></P
></LI
><LI
><P
>un noyau Linux de type 2.4.x, p.ex. depuis <A
HREF="ftp://ftp.kernel.org/pub/linux/kernel/v2.4/"
TARGET="_top"
>ftp://ftp.kernel.org/pub/linux/kernel/v2.4/</A
></P
></LI
><LI
><P
>Perl, version 4 ou 5</P
></LI
><LI
><P
>(si vous souhaitez déverminer les accès mémoire) MPR, p.ex. depuis <A
HREF="ftp://ibiblio.org/pub/Linux/devel/lang/c/"
TARGET="_top"
>ftp://ibiblio.org/pub/Linux/devel/lang/c/</A
></P
></LI
></UL
></P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INSTALLATION.THE-BINARY-RPMS"
>2.1. Les binaires RPM</A
></H3
><P
>Si vous ne souhaitez pas extraire et compiler les sources vous-même, les
utilitaires ATM existent également sous forme de paquet RPM installable
comme suit :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN147"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>rpm -ivh <VAR
CLASS="REPLACEABLE"
>linux-atm-x.x.x-x.rpm</VAR
></PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INSTALLATION.THE-SOURCE-TREE"
>2.2. L'arborescence des sources</A
></H3
><P
>Commencez par décompacter le paquet ATM pour Linux :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN153"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>tar xzvf <VAR
CLASS="REPLACEABLE"
>linux-atm-x.x.x.tar.gz</VAR
></PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Ceci crée une arborescence de racine
<TT
CLASS="FILENAME"
>linux-atm-x.x.x/</TT
>.
On notera les répertoires suivants :</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="FILENAME"
>doc/</TT
></DT
><DD
><P
>documentation au format SGML DocBook (ce HOWTO compris)</P
></DD
><DT
><TT
CLASS="FILENAME"
>src/sigd/</TT
></DT
><DD
><P
>démon de signalisation UNI 3.0, UNI 3.1 et UNI 4.0 
				<SPAN
CLASS="APPLICATION"
>atmsigd</SPAN
></P
></DD
><DT
><TT
CLASS="FILENAME"
>src/saal/</TT
></DT
><DD
><P
>bibliothèque de signalisation AAL (SSCOP, SSCF et SAAL)</P
></DD
><DT
><TT
CLASS="FILENAME"
>src/qgen/</TT
></DT
><DD
><P
>gestion des messages de type Q.2931</P
></DD
><DT
><TT
CLASS="FILENAME"
>src/ilmid/</TT
></DT
><DD
><P
>démon d'enregistrement d'adresses ILMI : <SPAN
CLASS="APPLICATION"
>ilmid</SPAN
></P
></DD
><DT
><TT
CLASS="FILENAME"
>src/maint/</TT
></DT
><DD
><P
>utilitaires de maintenance ATM : <SPAN
CLASS="APPLICATION"
>atmaddr</SPAN
>,
<SPAN
CLASS="APPLICATION"
>atmdiag</SPAN
>, <SPAN
CLASS="APPLICATION"
>atmdump</SPAN
>,
<SPAN
CLASS="APPLICATION"
>atmloop</SPAN
>, <SPAN
CLASS="APPLICATION"
>atmtcp</SPAN
>,
<SPAN
CLASS="APPLICATION"
>enitune</SPAN
>, <SPAN
CLASS="APPLICATION"
>esi</SPAN
>,
<SPAN
CLASS="APPLICATION"
>sonetdiag</SPAN
>, <SPAN
CLASS="APPLICATION"
>saaldump</SPAN
> et
<SPAN
CLASS="APPLICATION"
>zntune</SPAN
></P
></DD
><DT
><TT
CLASS="FILENAME"
>src/test/</TT
></DT
><DD
><P
>programmes de test : <SPAN
CLASS="APPLICATION"
>align</SPAN
>,
<SPAN
CLASS="APPLICATION"
>aping</SPAN
>, <SPAN
CLASS="APPLICATION"
>aread</SPAN
>,
<SPAN
CLASS="APPLICATION"
>awrite</SPAN
>, <SPAN
CLASS="APPLICATION"
>br</SPAN
>,
<SPAN
CLASS="APPLICATION"
>bw</SPAN
>, <SPAN
CLASS="APPLICATION"
>isp</SPAN
>,
<SPAN
CLASS="APPLICATION"
>ttcp_atm</SPAN
>, <SPAN
CLASS="APPLICATION"
>window</SPAN
></P
></DD
><DT
><TT
CLASS="FILENAME"
>src/arpd/</TT
></DT
><DD
><P
>outils et démon ATMARP : <SPAN
CLASS="APPLICATION"
>atmarp</SPAN
>,
<SPAN
CLASS="APPLICATION"
>atmarpd</SPAN
></P
></DD
><DT
><TT
CLASS="FILENAME"
>src/led/</TT
></DT
><DD
><P
>démon LAN Emulation : <SPAN
CLASS="APPLICATION"
>zeppelin</SPAN
></P
></DD
><DT
><TT
CLASS="FILENAME"
>src/lane/</TT
></DT
><DD
><P
>serveurs LAN Emulation : <SPAN
CLASS="APPLICATION"
>bus</SPAN
>,
<SPAN
CLASS="APPLICATION"
>lecs</SPAN
>, <SPAN
CLASS="APPLICATION"
>les</SPAN
></P
></DD
><DT
><TT
CLASS="FILENAME"
>src/mpoad/</TT
></DT
><DD
><P
>démon MPOA (Multi-Protocol Over ATM) : <SPAN
CLASS="APPLICATION"
>mpcd</SPAN
></P
></DD
><DT
><TT
CLASS="FILENAME"
>src/debug/</TT
></DT
><DD
><P
>outils d'examen : <SPAN
CLASS="APPLICATION"
>delay</SPAN
>,
<SPAN
CLASS="APPLICATION"
>ed</SPAN
>, <SPAN
CLASS="APPLICATION"
>encopy</SPAN
>,
<SPAN
CLASS="APPLICATION"
>endump</SPAN
>,
<SPAN
CLASS="APPLICATION"
>svctor</SPAN
>, <SPAN
CLASS="APPLICATION"
>zndump</SPAN
> et
<SPAN
CLASS="APPLICATION"
>znth</SPAN
></P
></DD
><DT
><TT
CLASS="FILENAME"
>src/lib/</TT
></DT
><DD
><P
>bibliothèques pour démons et applications</P
></DD
><DT
><TT
CLASS="FILENAME"
>src/man/</TT
></DT
><DD
><P
>pages de manuel diverses</P
></DD
><DT
><TT
CLASS="FILENAME"
>src/extra/</TT
></DT
><DD
><P
>outils supplémentaires et fichiers de directives RPM.</P
></DD
><DT
><TT
CLASS="FILENAME"
>src/config/</TT
></DT
><DD
><P
>fichiers de configuration et exemples de fichiers de type rc</P
></DD
><DT
><TT
CLASS="FILENAME"
>src/switch/</TT
></DT
><DD
><P
>unité de commutation (en cours de développement)</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INSTALLATION.KERNEL-CONFIGURATION"
>2.3. Configuration du noyau</A
></H3
><DIV
CLASS="WARNING"
><P
></P
><TABLE
CLASS="WARNING"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/warning.gif"
HSPACE="5"
ALT="Avertissement"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Si vous n'avez pas l'habitude de compiler et d'installer un nouveau noyau,
reportez-vous au <A
HREF="http://www.traduc.org/docs/HOWTO/lecture/Kernel-HOWTO.html"
TARGET="_top"
><I
CLASS="CITETITLE"
>guide 
pratique du noyau Linux</I
></A
> (<I
CLASS="FOREIGNPHRASE"
>Linux Kernel 
HOWTO</I
>).</P
></TD
></TR
></TABLE
></DIV
><P
>Après avoir décompacté le paquet du noyau, exécutez la commande
habituelle au sommet de l'arborescence des sources du noyau :
<B
CLASS="COMMAND"
>make config</B
>, <B
CLASS="COMMAND"
>make menuconfig</B
> ou
<B
CLASS="COMMAND"
>make xconfig</B
>. Activez ensuite :</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Prompt for development and/or incomplete code/drivers
  (CONFIG_EXPERIMENTAL)</PRE
></FONT
></TD
></TR
></TABLE
><P
>Les options suivantes doivent apparaitre :</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Asynchronous Transfer Mode (ATM, EXPERIMENTAL) (CONFIG_ATM)
  Use "new" skb structure (CONFIG_ATM_SKB)
  Classical IP over ATM (CONFIG_ATM_CLIP)
    Do NOT send ICMP if no neighbour (CONFIG_ATM_CLIP_NO_ICMP)
  LAN Emulation (LANE) support (CONFIG_ATM_LANE)
    Multi-Protocol Over ATM (MPOA) support (CONFIG_ATM_MPOA)
ATM over TCP (CONFIG_ATM_TCP)
Efficient Networks ENI155P (CONFIG_ATM_ENI)
  Enable extended debugging (CONFIG_ATM_ENI_DEBUG)
  Fine-tune burst settings (CONFIG_ATM_ENI_TUNE_BURST)
    Enable 16W TX bursts (discouraged) (CONFIG_ATM_ENI_BURST_TX_16W)
    Enable 8W TX bursts (recommended) (CONFIG_ATM_ENI_BURST_TX_8W)
    Enable 4W TX bursts (optional) (CONFIG_ATM_ENI_BURST_TX_4W)
    Enable 2W TX bursts (optional) (CONFIG_ATM_ENI_BURST_TX_2W)
    Enable 16W RX bursts (discouraged) (CONFIG_ATM_ENI_BURST_RX_16W)
    Enable 8W RX bursts (discouraged) (CONFIG_ATM_ENI_BURST_RX_8W)
    Enable 4W RX bursts (recommended) (CONFIG_ATM_ENI_BURST_RX_4W)
    Enable 2W RX bursts (optional) (CONFIG_ATM_ENI_BURST_RX_2W)
ZeitNet ZN1221/ZN1225 (CONFIG_ATM_ZATM)
  Enable extended debugging (CONFIG_ATM_ZATM_DEBUG)
  Enable usec resolution timestamps (CONFIG_ATM_ZATM_EXACT_TS)
IDT 77201 (NICStAR) (CONFIG_ATM_NICSTAR)
  Use suni PHY driver (155Mbps) (CONFIG_ATM_NICSTAR_USE_SUNI)
  Use IDT77015 PHY driver (25Mbps) (CONFIG_ATM_NICSTAR_USE_IDT77105)
Madge Ambassador (Collage PCI 155 Server) (CONFIG_ATM_AMBASSADOR)
  Enable debugging messages (CONFIG_ATM_AMBASSADOR_DEBUG)
Madge Horizon [Ultra] (Collage PCI 25 and Collage PCI 155 Client)
  Enable debugging messages (CONFIG_ATM_HORIZON_DEBUG)
Interphase ATM PCI x575/x525/x531 (CONFIG_ATM_IA)
  Enable debugging messages (CONFIG_ATM_IA_DEBUG)</PRE
></FONT
></TD
></TR
></TABLE
><P
>Les paramètres « burst » du gestionnaire ENI sont
ajustables. Les modifier peut s'avérer nécessaire si le positionnement par
défaut provoque des épuisements de tampons mémoire lors des transferts PCI.
On se reportera à la documentation en ligne relative à
« CONFIG_ATM_ENI_TUNE_BURST » pour une explication
détaillée de l'impact de ce paramètre.</P
><P
>Le fichier <TT
CLASS="FILENAME"
>drivers/atm/nicstar.h</TT
> 
contient les variables sur lesquelles on peut jouer pour le pilote IDT 77201.</P
><P
>Les gestionnaires peuvent être employés avec certaines cartes compatibles.
La référence la plus à jour pour ces dernières se trouve sur la <A
HREF="http://linux-atm.sourceforge.net/info.php"
TARGET="_top"
>page d'information</A
>
relative à <I
CLASS="CITETITLE"
>ATM on Linux</I
>.</P
><P
>Recompilez ensuite le noyau et redémarrez.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INSTALLATION.DRIVER-MESSAGES"
>2.4. Messages des gestionnaires de périphériques</A
></H3
><P
>Si vous avez activé le pilote ENI155p-MF, deux lignes semblables aux 
suivantes devraient apparaître (512kB pour la version -C, 2048kB 
pour la version -S) :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN303"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>eni(itf 0): rev.0,base=0xff400000,irq=10,mem=512kB (00-20-EA-00-07-56)
eni(itf 0): FPGA,MMF</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Si vous avez activé le pilote ZN1221 / ZN1225, il apparaît des 
messages du genre :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN306"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>zatm(itf 0): rev.3,base=0xf800,irq=11,mem=128kB,MMF (00-20-D4-10-2A-80)
zatm(itf 0): uPD98401 0.5 at 30.024 MHz
zatm(itf 0): 16 shapers, 32 pools, 2048 RX, 3958 VCs</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Notez qu'une carte de révision 3 ou plus est nécessaire pour une carte-mère
équipée d'un jeu de composants Triton.</P
><P
>Si vous n'avez activé que le pilote ATM au-dessus de TCP, aucun message
n'apparaît au démarrage parce que les périphériques correspondants ne sont
créés qu'au moment de l'invocation de la commande <B
CLASS="COMMAND"
>atmtcp</B
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INSTALLATION.MEMORY-DEBUGGING"
>2.5. Débogage mémoire</A
></H3
><P
>Si on désire analyser d'éventuels problèmes relatifs aux allocations mémoire,
il est nécessaire d'installer MPR avant de compiler les outils ATM.</P
><P
>Si vous récupérez un paquet RPM binaire, MPR s'installe comme suit :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN315"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>rpm -ivh <VAR
CLASS="REPLACEABLE"
>mpr-x.x-x.rpm</VAR
></PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Si vous partez des sources, décompactez
<TT
CLASS="FILENAME"
>mpr-x.x.tar.gz</TT
> ainsi :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN320"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>tar xzvf <VAR
CLASS="REPLACEABLE"
>mpr-x.x.tar.gz</VAR
></PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Puis exécutez les commandes suivantes :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN324"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>cd <VAR
CLASS="REPLACEABLE"
>mpr-x.x</VAR
>
./configure x86-linux
make
make install</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Une détection automatique de certains usages erronés des fonctions
<CODE
CLASS="FUNCTION"
>malloc</CODE
> et <CODE
CLASS="FUNCTION"
>free</CODE
> aura alors lieu
automatiquement si les utilitaires ont été compilés après installation de MPR.
Le suivi des allocations est activé en positionnant <CODE
CLASS="FUNCTION"
>MPRPC</CODE
> 
et <CODE
CLASS="FUNCTION"
>MPRFI</CODE
>.
Reportez-vous aux fichiers <TT
CLASS="FILENAME"
>doc/mpr.html</TT
> et
<TT
CLASS="FILENAME"
>doc/mpr.ps</TT
> dans le paquet MPR pour davantage de 
détails.</P
><P
>Bien que le débogage des allocations n'implique qu'un léger surcoût à
l'exécution, ces variables d'environnement ne sont pas positionnées par
défaut.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INSTALLATION.ATM-TOOLS"
>2.6. Utilitaires ATM</A
></H3
><P
>Pour finir, configurez et compilez les outils ATM. La configuration n'est
requise que si votre commutateur utilise UNI 3.1 ou 4.0 ou s'il présente
certains dysfonctionnements. Les options de configuration sont activées par
passage au script <B
CLASS="COMMAND"
>./configure</B
> du paquet linux-atm.</P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Exécutez <B
CLASS="COMMAND"
>./configure --help</B
> à partir de la racine de l'arborescence linux-atm pour visualiser toutes les options
disponibles.</P
></TD
></TR
></TABLE
></DIV
><P
>Les commandes suivantes compilent les utilitaires ATM :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN343"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>cd <VAR
CLASS="REPLACEABLE"
>linux-atm-x.x.x</VAR
>
./configure
make
make install</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Sauf spécification particulière lors de l'invocation de la commande
<B
CLASS="COMMAND"
>./configure</B
>, <B
CLASS="COMMAND"
>make install</B
> installera
les exécutables dans les répertoires 
<TT
CLASS="FILENAME"
>/usr/local/bin</TT
> et
<TT
CLASS="FILENAME"
>/usr/local/sbin</TT
>.
À l'exception du fichier <TT
CLASS="FILENAME"
>hosts.atm</TT
> (qui est installé dans
le répertoire <TT
CLASS="FILENAME"
>/etc</TT
>), les fichiers de
configuration se situeront en
<TT
CLASS="FILENAME"
>/usr/local/etc</TT
>.
Les bibliothèques et les fichiers d'en-tête sont respectivement copiés dans
<TT
CLASS="FILENAME"
>/usr/local/lib</TT
> et
<TT
CLASS="FILENAME"
>/usr/local/include</TT
>. Les pages de manuel
se retrouvent dans <TT
CLASS="FILENAME"
>/usr/local/man</TT
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INSTALLATION.EXTRA-PACKAGES"
>2.7. Paquets supplémentaires</A
></H3
><P
>Certains programmes reposent sur des paquets de grande taille qui ne
sont pas contrôlés par linux-atm. Pour d'autres, des patches sont fournis dans
le paquet ATM-Linux. Ils se trouvent dans le répertoire
<TT
CLASS="FILENAME"
>src/extra</TT
> de la distribution ATM-Linux.</P
><P
>Les paquets suivants sont disponibles :</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><SPAN
CLASS="APPLICATION"
><A
HREF="http://www.tcpdump.org/"
TARGET="_top"
>tcpdump</A
></SPAN
></DT
><DD
><P
>capture de trafic réseau (amélioré pour ATM)</P
></DD
><DT
><SPAN
CLASS="APPLICATION"
>ANS</SPAN
></DT
><DD
><P
>serveur de noms ATM (repose sur 
				<SPAN
CLASS="APPLICATION"
>named</SPAN
> 4.9.5)</P
></DD
></DL
></DIV
><P
>Notez que <SPAN
CLASS="APPLICATION"
>text2atm</SPAN
> emploie automatiquement ANS
s'il est disponible, et que celui-ci ne doit dès lors être installé que sur
les systèmes qui fournissent le service de résolution de noms ou lorsque
des outils de maintenance au fait d'ATM sont requis 
(<SPAN
CLASS="APPLICATION"
>nslookup</SPAN
>, &#8230;).</P
><P
>Le script <SPAN
CLASS="APPLICATION"
>hosts2ans.pl</SPAN
> dans le répertoire
<TT
CLASS="FILENAME"
>src/extra/ANS/</TT
> convertit un fichier
<TT
CLASS="FILENAME"
>/etc/hosts.atm</TT
> en un fichier de zone ANS. Son
utilisation est décrite en tête de fichier.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="DEVICE-SETUP"
>3. Configuration des périphériques</A
></H2
><P
>Cette partie décrit des options de configuration propres à chaque type
de périphériques ainsi que des méthodes de diagnostic ATM ou SONET générales.
Reportez-vous à la documentation du périphérique pour les détails relatifs
à son installation et aux méthodes de diagnostic.</P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="DEVICE-SETUP.ATM-OVER-TCP-SETUP"
>3.1. ATM au-dessus de TCP</A
></H3
><P
>En l'absence de véritable matériel ATM, vous pouvez utiliser l'API
par l'intermédiaire du gestionnaire ATM au-dessus de TCP. Il émule des
périphériques ATM qui sont directement connectés les uns aux autres à distance
(c.-à-d. sans manipulation de paires VPI/VCI).</P
><P
>Pour établir un lien (bidirectionnel) entre deux systèmes, devenez root sur
chacun d'entre eux (ou exécutez les deux commandes sur le même système pour
connecter deux interfaces) et exécutez la commande suivante sur l'un
d'eux (que l'on désignera par « a ») :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN389"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># atmtcp virtual listen</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Puis, sur l'autre système (« b ») :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN392"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># atmtcp virtual connect <VAR
CLASS="REPLACEABLE"
>adresse_de_a</VAR
></PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Les utilitaires <B
CLASS="COMMAND"
>atmtcp</B
> émettront des messages au fur et à
mesure de leur avancement. Par exemple :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN397"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Link 0: virtual interface 2
Link 1: incoming ATMTCP connection from 127.0.0.1</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>et</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN400"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Link 0: virtual interface 3
Link 1: ATMTCP connection to localhost</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>On notera que la commande <B
CLASS="COMMAND"
>atmtcp</B
> s'exécute en permanence
et que l'interrompre brise le lien virtuel.</P
><P
>Une même machine peut accepter plusieurs liens en spécifiant des numéros de
port différents (2812 par défaut). Aucun traitement AAL n'est effectué et
il n'est par conséquent pas possible d'employer une couche d'adaptation
différente (p.ex. AAL0) de celle utilisée à l'émission.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="DEVICE-SETUP.ZN1221-ZN1225-TUNING"
>3.2. ZN1221 / ZN1225</A
></H3
><P
>Les cartes ZeitNet ZN1221 et ZN1225 emploient des réserves de mémoire
allouées à l'avance pour la réception. Dés qu'un circuit virtuel d'une
certaine SDU est activé en réception, la réserve correspondante est 
remplie de tampons vides par le gestionnaire. La carte consomme les 
tampons lors de la réception et, lorsque leur nombre passe en dessous 
d'une certaine limite, le gestionnaire alloue à nouveau la réserve.</P
><P
>Les limites inférieures et supérieures du nombre de tampons libres ainsi
que la valeur limite pour l'adaptation à un nouveau décalage de données (voir
ci-dessous) sont ajustables grâce au programme
<SPAN
CLASS="APPLICATION"
>zntune</SPAN
>. Emploi :</P
><P
><B
CLASS="COMMAND"
>zntune</B
>  [-l <VAR
CLASS="REPLACEABLE"
>marque_basse</VAR
>] [-h <VAR
CLASS="REPLACEABLE"
>marque_haute</VAR
>] [-t <VAR
CLASS="REPLACEABLE"
>seuil</VAR
>]  <VAR
CLASS="REPLACEABLE"
>interface</VAR
>  [<VAR
CLASS="REPLACEABLE"
>réserve</VAR
>]</P
><P
>Les modifications sont appliquées à toutes les réserves si aucun indice
de réserve n'est spécifié. La réserve 2 stocke les paquets de 64 octets,
la réserve 3 les paquets de 128 octets, etc. Les réserves 0 et 1 ne sont
pour l'instant pas utilisées.</P
><P
>La configuration courante ainsi que des statistiques d'utilisation peuvent
être obtenues en invoquant la commande <B
CLASS="COMMAND"
>zntune</B
> sans
paramètre supplémentaire :</P
><P
><B
CLASS="COMMAND"
>zntune</B
>  [-z]  <VAR
CLASS="REPLACEABLE"
>interface</VAR
>  [<VAR
CLASS="REPLACEABLE"
>réserve</VAR
>]</P
><P
>La colonne « Size » indique la taille de tampon
mémoire en octets. La colonne « Ref » correspond au
nombre de VC ouverts qui emploient cette réserve. La colonne
« Alarm » indique combien de fois le nombre de
tampons mémoire disponibles a franchi la limite basse depuis la dernière
remise à zéro des compteurs. De même, la colonne
« « Under » » fournit le nombre
d'unités de données de protocole (PDU, Protocol Data Unit) jetées à cause
d'un manque de mémoire.</P
><P
>Les colonnes « Offs »,
« NxOf », « Count » et
« Thres » indiquent l'état d'alignement.
« Offs » est le décalage des données utiles dans les
PDU attendues. Dans le cas d'une copie simple, les tampons de réception
sont alignés de telle sorte que les données soient reçues à partir de
frontières de page. « NxOf » correspond au décalage
des données utiles de la dernière PDU reçue pour laquelle le décalage
diffère de celui attendu. « Count » indique le nombre
de PDU reçues consécutivement avec un décalage de
« NxOf ». Enfin, lorsque
« Count » atteint « Thres »,
« NxOf » devient la nouvelle valeur de décalage.</P
><P
>L'option <VAR
CLASS="PARAMETER"
>-z</VAR
> permet de remettre à zéro
les compteurs « Alarm » et
« Under ».</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="DEVICE-SETUP.FILES-IN-PROC-NET-ATM"
>3.3. Fichiers du répertoire
<TT
CLASS="FILENAME"
>/proc/net/atm/</TT
></A
></H3
><P
>Des informations sur l'état du système ATM sont accessibles via les
fichiers du répertoire <TT
CLASS="FILENAME"
>/proc/net/atm/</TT
>.
<TT
CLASS="FILENAME"
>/proc/net/atm/arp</TT
> contient des informations propres
à CLIP (Classical IP over ATM), cf.
<A
HREF="#IP-OVER-ATM.CLIP"
><I
>CLIP</I
></A
>.</P
><P
>Les périphériques ATM actifs sont énumérés dans le fichier
<TT
CLASS="FILENAME"
>/proc/net/atm/devices</TT
>.
Chaque entrée comprend le numéro de l'interface, son type, l'identifiant
ESI (End System Identifier) ainsi que des compteurs d'usage. Ces derniers
correspondent à ceux fournis par l'utilitaire
<SPAN
CLASS="APPLICATION"
>atmdiag</SPAN
>.</P
><P
>Les périphériques ATM peuvent déclarer des enregistrements de la forme
<VAR
CLASS="LITERAL"
><VAR
CLASS="REPLACEABLE"
>type:indice</VAR
></VAR
>
(par exemple <VAR
CLASS="LITERAL"
>eni:0</VAR
>).</P
><P
>Les fichiers <TT
CLASS="FILENAME"
>/proc/net/atm/pvc</TT
> et
<TT
CLASS="FILENAME"
>/proc/net/atm/svc</TT
> énumèrent les sockets de type PVC et
SVC. L'interface et la paire d'indices VPI, VCI est donnée pour chaque
socket. Dans le cas des PVC, cette information est suivie du type d'AAL, de
la classe de trafic et du PCR en réception et en émission. Pour les SVC, on
trouve l'état du SVC et l'adresse du correspondant. Les SVC de numéro
d'interface 999 sont destinés à des mesures de contrôle particulières comme
indiqué dans la colonne « State ».</P
><P
>Enfin, le fichier <TT
CLASS="FILENAME"
>/proc/net/atm/vc</TT
> comprend
les tailles de tampon mémoire et d'autres données internes pour
les sockets ATM.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="DEVICE-SETUP.ATM-DIAGNOSTICS"
>3.4. Diagnostic ATM</A
></H3
><P
>L'utilitaire <SPAN
CLASS="APPLICATION"
>atmdiag</SPAN
> permet de récupérer
divers compteurs d'usage des gestionnaires de périphériques ATM.
Reportez-vous à la page de manuel associée pour davantage de détails.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="DEVICE-SETUP.SONET-DIAGNOSTICS"
>3.5. Diagnostic SONET</A
></H3
><P
>L'outil de diagnostic SONET peut s'employer pour surveiller l'état du lien
et pour simuler des erreurs. Pour obtenir les compteurs d'usage SONET,
invoquez-le avec l'indice de l'interface ATM en argument. Par exemple :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN462"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>% sonetdiag 0</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>L'option <VAR
CLASS="PARAMETER"
>-z</VAR
> remet les compteurs
à zéro :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN466"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># sonetdiag -z 0</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Les erreurs suivantes peuvent être simulées<A
NAME="AEN469"
HREF="#FTN.AEN469"
><SPAN
CLASS="footnote"
>[1]</SPAN
></A
>
 :</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><SPAN
CLASS="ERRORCODE"
>sbip</SPAN
></DT
><DD
><P
>insertion d'erreur de section (B1)</P
></DD
><DT
><SPAN
CLASS="ERRORCODE"
>lbip</SPAN
></DT
><DD
><P
>insertion d'erreur de ligne (B2)</P
></DD
><DT
><SPAN
CLASS="ERRORCODE"
>pbip</SPAN
></DT
><DD
><P
>insertion d'erreur de chemin (B3)</P
></DD
><DT
><SPAN
CLASS="ERRORCODE"
>frame</SPAN
></DT
><DD
><P
>perte de trame en réception (RX)</P
></DD
><DT
><SPAN
CLASS="ERRORCODE"
>los</SPAN
></DT
><DD
><P
>perte de signal</P
></DD
><DT
><SPAN
CLASS="ERRORCODE"
>lais</SPAN
></DT
><DD
><P
>insertion d'un signal d'alarme de ligne</P
></DD
><DT
><SPAN
CLASS="ERRORCODE"
>pais</SPAN
></DT
><DD
><P
>insertion d'un signal d'alarme de chemin</P
></DD
><DT
><SPAN
CLASS="ERRORCODE"
>hcs</SPAN
></DT
><DD
><P
>insertion d'erreurs de somme de contrôle de l'en-tête</P
></DD
></DL
></DIV
><P
>Une erreur est activée par ajout du mot-clé correspondant à la ligne
de commande. L'erreur est désactivée en préfixant le mot-clé par un
signe négatif, par exemple :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN513"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>a# sonetdiag -z 0 &#62;/dev/null
b# sonetdiag -z 0 &#62;/dev/null
a# sonetdiag 0 los
a# sonetdiag 0 -los
b# sonetdiag 0 | grep BIP
Section BIP errors:      56200
Line BIP errors:           342
Path BIP errors:           152
a# sonetdiag 0 | grep FEBE
Line FEBE:                 342
Path FEBE:                 152</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Si des insertions d'erreurs sont demandées, leurs identifiants sont
indiqués lorsque les compteurs sont relevés via
<SPAN
CLASS="APPLICATION"
>sonetdiag</SPAN
>. On notera que le matériel peut
spontanément désactiver certaines insertions d'erreur.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="NATIVE-ATM-PVCS"
>4. Circuits virtuels permanents ATM natifs (PVC)</A
></H2
><P
>Les circuits permanents s'utilisent pour des machines directement
connectées ou reliées à un commutateur. Dans le dernier cas, la
transmission des cellules doit être activée manuellement au niveau du
commutateur.</P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="NATIVE-ATM-PVCS.TRAFFIC-TOOLS"
>4.1. Outils de génération de trafic</A
></H3
><P
><SPAN
CLASS="APPLICATION"
>aread</SPAN
>/<SPAN
CLASS="APPLICATION"
>awrite</SPAN
> et
<SPAN
CLASS="APPLICATION"
>br</SPAN
>/<SPAN
CLASS="APPLICATION"
>bw</SPAN
> sont des
programmes élementaires donnant accès à l'API ATM.
<SPAN
CLASS="APPLICATION"
>awrite</SPAN
> transmet la chaîne de texte donnée en
deuxième argument via une PDU AAL5. <SPAN
CLASS="APPLICATION"
>aread</SPAN
> reçoit
une PDU AAL5 et l'affiche en hexadécimal. Ces deux programmes affichent
également la valeur de retour des appels système correspondants ainsi que
celle de <SPAN
CLASS="ERRORCODE"
>errno</SPAN
>.</P
><P
><SPAN
CLASS="APPLICATION"
>bw</SPAN
> transmet le contenu de son entrée standard ou
un flux de données arbitraires (si on lui passe un nombre en quatrième
argument). Les données transitent dans des PDU AAL5 de 8 Ko.
<SPAN
CLASS="APPLICATION"
>br</SPAN
> reçoit les PDU AAL5 et les affiche sur sa
sortie standard.</P
><P
>Le premier argument des commandes <SPAN
CLASS="APPLICATION"
>aread</SPAN
>,
<SPAN
CLASS="APPLICATION"
>awrite</SPAN
>, <SPAN
CLASS="APPLICATION"
>br</SPAN
> et
<SPAN
CLASS="APPLICATION"
>bw</SPAN
> correspond à l'adresse du circuit permanent,
à savoir le numéro de l'interface ATM, le VPI et le VCI séparés à chaque
fois par un point. Le numéro de l'interface peut être omis s'il est nul.
Par exemple :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN538"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>% awrite 1.0.42 hi</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Certains matériels ne supportent qu'un VPI nul. Par ailleurs, la plage
des VCI peut être limitée, p.ex. entre 0 et 1023.
Le numéro de l'interface ATM s'obtient à partir des messages
d'initialisation du gestionnaire ATM concerné.
<FONT
COLOR="RED"
>atm0</FONT
> correspond à l'interface 0,
<FONT
COLOR="RED"
>atm1</FONT
> correspond à l'interface 1, etc.
Dans un système muni d'un véritable périphérique ATM (autre que
<SPAN
CLASS="APPLICATION"
>atmtcp</SPAN
> donc), celui-ci se situe normalement
en <FONT
COLOR="RED"
>atm0</FONT
>.</P
><P
>L'utilitaire <SPAN
CLASS="APPLICATION"
>aping</SPAN
> émet et reçoit de petites PDU
AAL5 via un PVC. Il s'attend à ce que les messages soient renvoyés en écho
à l'autre extrémité ou à ce qu'une application similaire y émette un flux
de messages. <SPAN
CLASS="APPLICATION"
>aping</SPAN
> signale une erreur si rien
n'est reçu pendant une certaine durée. Il s'invoque comme
<SPAN
CLASS="APPLICATION"
>aread</SPAN
>, en spécifiant le PVC.</P
><P
>Pour des tests plus poussés, servez-vous de la version modifiée de 
<SPAN
CLASS="APPLICATION"
>ttcp</SPAN
> incluse dans le paquet.
La version originale est disponible à l'adresse :
<A
HREF="ftp://ftp.sgi.com/sgi/src/ttcp/"
TARGET="_top"
>ftp://ftp.sgi.com/sgi/src/ttcp/</A
>.
Les options suivantes ont été ajoutées :</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><VAR
CLASS="PARAMETER"
>-a</VAR
></DT
><DD
><P
>emploi natif d'ATM au lieu d'UDP/TCP. L'adresse doit être de cette forme
pour les PVC :
<VAR
CLASS="PARAMETER"
>[<VAR
CLASS="REPLACEABLE"
>itf.</VAR
>]vpi.vci</VAR
>.
Pour les SVC, il s'agit d'une adresse terminale ATM.</P
></DD
><DT
><VAR
CLASS="PARAMETER"
>-P</VAR
> <VAR
CLASS="REPLACEABLE"
>num</VAR
></DT
><DD
><P
>utilisation d'une connexion CBR avec un débit crête de
<VAR
CLASS="REPLACEABLE"
>num</VAR
> cellules par secondes. Une classe de trafic UBR
est appliquée par défaut.</P
></DD
><DT
><VAR
CLASS="PARAMETER"
>-C</VAR
></DT
><DD
><P
>désactivation des sommes de contrôle (UDP)</P
></DD
></DL
></DIV
><P
>Exemples :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN573"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>%a ttcp_atm -r -a -s 0.90
%b ttcp_atm -t -a -s 0.90</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="NATIVE-ATM-PVCS.DIRECT-CELL-ACCESS"
>4.2. Accès direct aux cellules</A
></H3
><P
>Les cellules peuvent être formées et analysées avec l'utilitaire
<SPAN
CLASS="APPLICATION"
>atmdump</SPAN
> pour les périphériques dont le
gestionnaire permet les accès directs aux cellules (mode AAL0).

Par exemple :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN579"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>a% sleep 10; date | ./atmdump -t 1 -c 0.51
b% ./atmdump 0.51
825079645.192480: VPI=0 VCI=51, GFC=0x0, CLP=1, Data SDU 1 (PTI 1)
   46 72 69 20 46 65 62 20 32 33 20 31 32 3a 34 37 
   3a 32 35 20 47 4d 54 20 31 39 39 36 0a 00 00 00 
   00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 </PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="SIGNALING"
>5. Signalisation</A
></H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="SIGNALING.ATM-HOSTS-FILE"
>5.1. Fichier des hôtes ATM</A
></H3
><P
>Les adresses ATM étant peu pratiques à manipuler, la plupart des outils
ATM acceptent également des noms au lieu des adresses numériques.
La conversion entre les noms et les adresses s'effectue via le fichier
<TT
CLASS="FILENAME"
>/etc/hosts.atm</TT
> dont la structure est analogue à celle
du fichier <TT
CLASS="FILENAME"
>/etc/hosts</TT
> :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN588"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
><VAR
CLASS="REPLACEABLE"
>adresse_numérique</VAR
> <VAR
CLASS="REPLACEABLE"
>nom(s)</VAR
></PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Par exemple :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN593"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>47.0005.80FFE1000000F21A26D8.0020EA000EE0.00 pc2-a.fqdn pc2-a
47.0005.80FFE1000000F21A26D8.0020D4102A80.00 pc3-a.fqdn pc3-a</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>L'adresse numérique est spécifiée dans un des formats décrits dans
[<A
HREF="#API"
>api</A
>].
L'adresse d'un système Linux peut être déterminée avec la commande
<B
CLASS="COMMAND"
>atmaddr <VAR
CLASS="OPTION"
>-n</VAR
></B
> (voir également la
section
<A
HREF="#SIGNALING.MANUAL-ADDRESS-CONFIGURATION"
><I
>Configuration manuelle d'adresse</I
></A
>).</P
><P
>De nombreux outils ATM tentent également d'obtenir le nom qui correspond
à une adresse lorsqu'ils affichent cette dernière. Le premier nom qui
apparaît dans le fichier en regard d'une adresse est alors utilisé.</P
><P
>Outre les adresses ATM pour les SVC, les adresses des PVC peuvent également
être stockées dans le fichier <TT
CLASS="FILENAME"
>/etc/hosts.atm</TT
>.
Lorsque différents types d'adresses correspondent au même nom d'hôte, la
première dont le type convient est employée. Ainsi, lorsqu'une application
ne demande que des adresses de SVC, celles des PVC sont ignorées.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="SIGNALING.ANS"
>5.2. ANS</A
></H3
><P
>Si vous avez accès au service de nom ATM (ATM Name Service), par exemple
parce que vous avez installé l'option ANS, vous pouvez l'employer en
remplacement ou en complément du fichier de noms en spécifiant le nom 
de l'hôte qui héberge le service ANS dans le fichier
<TT
CLASS="FILENAME"
>/etc/resolv.conf</TT
>.</P
><P
>La liste des codes téléphoniques doit être connue pour effectuer la
résolution inverse des adresses E.164. Cette liste se trouve sur le site
de <A
HREF="http://www.itu.org/"
TARGET="_top"
>l'ITU-T</A
> (International
Telecommunications Union). La <A
HREF="http://www.itu.int/itudoc/itu-t/ob-lists/icc/e164_717.html"
TARGET="_top"
><I
CLASS="CITETITLE"
>liste 
des codes E.164 nationaux assignés par l'ITU-T</I
></A
> est 
disponible aux formats PDF et Word.</P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Si l'URL venait à changer, le document devrait être facilement localisé
en utilisant le moteur de recherche du site.</P
></TD
></TR
></TABLE
></DIV
><P
>Le script <B
CLASS="COMMAND"
>src/lib/pdf2e164_cc.pl</B
> du paquet atm-linux 
permet de créer un tableau des codes nationaux E.164 à partir de la 
version PDF. Par exemple :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN615"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>perl pdf2e164_cc.pl <VAR
CLASS="REPLACEABLE"
>e164_xxx.pdf</VAR
> &#62;/etc/e164_cc</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Le script s'appuie sur l'utilitaire <SPAN
CLASS="APPLICATION"
>pdftotext</SPAN
>.
Celui-ci est disponible avec l'application
<A
HREF="http://www.foolabs.com/xpdf/"
TARGET="_top"
><SPAN
CLASS="APPLICATION"
>xpdf</SPAN
></A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="SIGNALING.SIGNALING-DEMON"
>5.3. Démon de signalisation</A
></H3
><P
>Pages de manuel :
<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>atmsigd</SPAN
>(8)</SPAN
>
<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>atmsigd.conf</SPAN
>(4)</SPAN
></P
><P
>Notez que la prise en charge point-à-multipoint 
d'<SPAN
CLASS="APPLICATION"
>atmsigd</SPAN
> est très limitée : seul l'emploi en tant
que feuille d'un arbre point-à-multipoint fonctionne.</P
><P
>Par défaut, <SPAN
CLASS="APPLICATION"
>atmsigd</SPAN
> est configuré pour se
conformer à la version d'UNI choisie dynamiquement. Il peut être compilé
pour UNI 3.0, 3.1 ou 4.0 en employant l'argument
<VAR
CLASS="PARAMETER"
>--with-uni=VERSION</VAR
> du script 
<B
CLASS="COMMAND"
>./configure</B
> au sommet des sources du paquet 
linux-atm.</P
><P
>Notez que la configuration de <SPAN
CLASS="APPLICATION"
>atmsigd</SPAN
> est assez
contraignante. Il s'arrête souvent en cas d'anomalie. Ceci devrait changer
dans le futur.</P
><P
><SPAN
CLASS="APPLICATION"
>atmsigd</SPAN
> cherche un fichier de configuration
à l'emplacement spécifié via l'option
<VAR
CLASS="PARAMETER"
>-c</VAR
>.
<TT
CLASS="FILENAME"
>/usr/local/etc/atmsigd.conf</TT
> correspond à l'emplacement
par défaut.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="SIGNALING.ILMI-DEMON"
>5.4. Démon ILMI</A
></H3
><P
>ILMI offre un mécanisme de configuration automatique des adresses. En
l'absence de commutateur ou si celui-ci ne gère pas ILMI, les adresses
ATM doivent être renseignées manuellement (se reporter à la section
<A
HREF="#SIGNALING.MANUAL-ADDRESS-CONFIGURATION"
><I
>Configuration manuelle d'adresse</I
></A
>).
On notera que le démon ILMI ne doit pas être employé avec des interfaces
pour lesquelles les adresses sont positionnées manuellement.</P
><P
>Le démon ILMI est invoqué comme suit :</P
><P
><B
CLASS="COMMAND"
>ilmid</B
>  [-b] [-d] [-i <VAR
CLASS="REPLACEABLE"
>ip_locale</VAR
>] [-l <VAR
CLASS="REPLACEABLE"
>fichier_journal</VAR
>] [-q <VAR
CLASS="REPLACEABLE"
>qos</VAR
>] [-u <VAR
CLASS="REPLACEABLE"
>version_uni</VAR
>] [-v] [-x] [<VAR
CLASS="REPLACEABLE"
>itf</VAR
>]</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><VAR
CLASS="PARAMETER"
>-b</VAR
></DT
><DD
><P
>arrière-plan. S'exécute dans un processus fils
après initialisation.</P
></DD
><DT
><VAR
CLASS="PARAMETER"
>-d</VAR
></DT
><DD
><P
>messages de débogage. Par défaut,
<SPAN
CLASS="APPLICATION"
>ilmid</SPAN
> est très discret.</P
></DD
><DT
><VAR
CLASS="PARAMETER"
>-i</VAR
> <VAR
CLASS="REPLACEABLE"
>ip_locale</VAR
></DT
><DD
><P
>adresse IP à annoncer au commutateur quand il en demande une. Elle est
spécifiée sous forme décimale pointée ou textuelle. Par défaut,
<SPAN
CLASS="APPLICATION"
>ilmid</SPAN
> la détermine de façon heuristique.</P
></DD
><DT
><VAR
CLASS="PARAMETER"
>-l</VAR
> <VAR
CLASS="REPLACEABLE"
>fichier_journal</VAR
></DT
><DD
><P
>fichier d'enregistrement des messages de diagnostic (au lieu de la sortie
standard). Le nom spécial <VAR
CLASS="PARAMETER"
>syslog</VAR
> implique
l'envoi des messages vers l'enregistreur système syslog.</P
></DD
><DT
><VAR
CLASS="PARAMETER"
>-q</VAR
> <VAR
CLASS="REPLACEABLE"
>qos</VAR
></DT
><DD
><P
>configure la classe de service pour le circuit ILMI. Par défaut une classe
UBR à la vitesse du lien est employée.</P
></DD
><DT
><VAR
CLASS="PARAMETER"
>-u</VAR
> <VAR
CLASS="REPLACEABLE"
>version_uni</VAR
></DT
><DD
><P
>version d'UNI. Les valeurs possibles sont :
<VAR
CLASS="PARAMETER"
>3.0</VAR
>,
<VAR
CLASS="PARAMETER"
>3.1</VAR
>, et
<VAR
CLASS="PARAMETER"
>4.0</VAR
>. Le point est facultatif. La valeur
employée par défaut dépend de la façon dont <SPAN
CLASS="APPLICATION"
>ilmid</SPAN
>
a été compilé. Il s'agit typiquement de la valeur
<VAR
CLASS="PARAMETER"
>3.0</VAR
>.</P
></DD
><DT
><VAR
CLASS="PARAMETER"
>-v</VAR
></DT
><DD
><P
>verbosité de débogage accrue.</P
></DD
><DT
><VAR
CLASS="PARAMETER"
>-x</VAR
></DT
><DD
><P
>désactive l'inclusion des liaisons de variables dans les ColdstartTrap
SNMP. Certains commutateurs (les LS1000 par exemple) ne fonctionnent que
si cette option est activée.</P
></DD
></DL
></DIV
><P
>En l'absence de numéro d'interface, <SPAN
CLASS="APPLICATION"
>ilmid</SPAN
>
se sert de l'interface 0. La commande <B
CLASS="COMMAND"
>atmaddr</B
> permet
de vérifier le succès de l'enregistrement d'adresse.</P
><P
>L'agent ne supporte que les procédures d'enregistrement d'adresse
spécifiées dans la section 5.8 des spécification UNI 3.1 d'ATM Forum.
Ces procédures impliquent l'enregistrement du préfixe réseau de l'hôte
par le commutateur tandis que l'hôte enregistre en retour l'adresse
finale auprès du commutateur. L'hôte y parvient en ajoutant un
identificateur de système (ESI/End System Identifier) et un
octet sélecteur nul au préfixe réseau enregistré par le commutateur.
L'identificateur correspond à l'adresse physique ou MAC de l'interface
ATM.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="SIGNALING.MANUAL-ADDRESS-CONFIGURATION"
>5.5. Configuration manuelle d'adresse</A
></H3
><P
>Si votre commutateur ne prend pas en charge ILMI, vous devez positionner
manuellement l'adresse ATM au niveau du commutateur et de l'ordinateur. Vérifiez
au préalable qu'<SPAN
CLASS="APPLICATION"
>ilmid</SPAN
> est désactivé et utilisez
la commande <B
CLASS="COMMAND"
>atmaddr</B
> pour spécifier la ou les adresses.</P
><P
>Page de manuel :
<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>atmaddr</SPAN
>(8)</SPAN
></P
><P
>La configuration du commutateur dépend de son modèle. Par exemple, pour
un Fore ASX-200 :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN731"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>conf nsap route new <VAR
CLASS="REPLACEABLE"
>adresse_nsap</VAR
> 152 <VAR
CLASS="REPLACEABLE"
>port</VAR
> <VAR
CLASS="REPLACEABLE"
>vpi</VAR
></PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>c'est-à-dire</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN737"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>conf nsap route new 47000580ffe1000000f21510650020ea000ee000 152 1a2 0
                    |&#60;---- préfixe NSAP ----&#62;||&#60;--ESI---&#62;|^^
                                                          SEL</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>La longueur de l'adresse NSAP complète doit toujours être de 40 chiffres
hexadécimaux. Il est possible d'employer des adresses avec un préfixe
différent et un ESI différent de ceux des périphériques. La valeur de
l'octet de sélection (SEL) est ignorée.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="SIGNALING.RUNNING-TWO-ATM-NICS-BACK-TO-BACK"
>5.6. Emploi de deux adaptateurs ATM
directement connectés</A
></H3
><P
>Il est également possible d'utiliser deux cartes ATM directement connectées
sans avoir besoin de commutateur. Ceci est très pratique pour des
environnements de test simples.</P
><P
>Un câblage adéquat est nécessaire si vous employez du câble UTP ou STP-5.
Nos essais avec des câbles croisés standard 100Base-T n'ont rien donné.
Le câblage est différent comme indiqué sur la figure suivante :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN744"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>RJ45                            RJ45
   1        ------------        7
   2        ------------        8

   7        ------------        1
   8        ------------        2

Les broches 3, 4, 5, 6 ne sont pas connectées.</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Les couleurs aux extrémités des connecteurs RJ45 permettent de mieux 
illustrer ce montage.
Le premier connecteur utilise le câblage ci-dessous :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN747"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>RJ45-1
   1 - marron
   2 - blanc/marron
   3 - non connecté
   4 - non connecté
   5 - non connecté
   6 - non connecté
   7 - orange
   8 - blanc/orange</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Et le second connecteur le câblage suivant :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN750"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>RJ45-2
   1 - orange
   2 - blanc/orange
   3 - non connecté
   4 - non connecté
   5 - non connecté
   6 - non connecté
   7 - marron
   8 - blanc/marron</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Un câblage 1 -- 7 et 2 -- 8 fournit une boucle des plus 
économiques.</P
><P
>On considérera par la suite deux machines nommées
« virgil » et « nestor ».</P
><P
>Une extrémité de la connexion ATM doit activer le démon réseau
<SPAN
CLASS="APPLICATION"
>atmsigd</SPAN
> tandis que l'autre se sert de la
version utilisateur usuelle. On exécute sur nestor la commande :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN756"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>atmsigd -b -m network</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>et sur virgil :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN759"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>atmsigd -b</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>ILMI n'est pas utilisable sans commutateur ATM. Créez un fichier
<TT
CLASS="FILENAME"
>/etc/hosts.atm</TT
> avec deux adresses bidon, par 
exemple :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN763"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>47.0005.80FFE1000000F21A26D8.0020EA000EE0.00    nestor-atm
47.0005.80FFE1000000F21A26D8.0020D4102A80.00    virgil-atm</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Ces adresses sont complètement fantaisistes mais cela n'a pas grande
importance tant qu'on n'est pas connecté à un réseau ATM public ou privé.
Les adresses sont transmises aux gestionnaires de périphériques via (sur
virgil) :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN766"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>atmaddr -a virgil-atm</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>et (sur nestor) :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN769"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>atmaddr -a nestor-atm</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Démarrez à présent <SPAN
CLASS="APPLICATION"
>atmarpd</SPAN
> sur les deux
machines de la façon habituelle. Vous devriez (en principe) disposer
d'un système ATM opérationnel. Pour activer IP au-dessus d'ATM, suivez
les instructions données à la section
<A
HREF="#IP-OVER-ATM"
><I
>IP au-dessus d'ATM</I
></A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="SIGNALING.Q-2931-MESSAGE-DUMPER"
>5.7. Analyseur-producteur de messages Q.2931</A
></H3
><P
>Le compilateur de messages Q.2931 génère également un embellificateur pour
les messages Q.2931. L'exécutable se nomme <SPAN
CLASS="APPLICATION"
>q.dump</SPAN
>
et se trouve dans le répertoire <TT
CLASS="FILENAME"
>src/qgen</TT
>. Notez que
la commande <B
CLASS="COMMAND"
>make install</B
> ne le copiera nulle part.</P
><P
><SPAN
CLASS="APPLICATION"
>q.dump</SPAN
> attend une suite d'octets sous forme
de chiffres hexadécimaux séparés par des espaces sur l'entrée standard et
affiche la structure du message si celui-ci est analysable.

Exemple :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN782"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>% echo 09 03 80 00 05 5A 80 00 06 08 80 00 02 81 83 00 48 \
  00 00 08 | ./q.dump
_pdsc = 9 "Q.2931 user-network call/connection control message"
_cr_len = 3
call_ref = 8388613 (0x800005)
msg_type = 0x5a "RELEASE COMPLETE"
_ext = 1
_flag = 0 "instruction field not significant"
_action_ind = 0 "clear call"
msg_len = 6 (0x6)
  _ie_id = 0x08 "Cause"
    _ext = 1
    cause_cs = 0 "ITU-T standardized"
    _flag = 0 "instruction field not significant"
    _action_ind = 0 "clear call"
    _ie_len = 2 (0x2)
      _ext = 1
      location = 1 "private network serving the local user"
      _ext = 1
      cause = 3 "no route to destination"</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="IP-OVER-ATM"
>6. IP au-dessus d'ATM</A
></H2
><P
>IP via ATM est pris en charge via CLIP (Classical IP over ATM) comme
défini dans la RFC1577 [<A
HREF="#RFC1577"
>RFC1577</A
>], LANE (LAN Emulation,
cf. [<A
HREF="#LANEV1"
>lanev1</A
>] et [<A
HREF="#LANEV2"
>lanev2</A
>]) et MPOA
(Multi-Protocol Over ATM, cf. [<A
HREF="#MPOAV1"
>mpoav1</A
>]) en mode client.</P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="IP-OVER-ATM.CLIP"
>6.1. CLIP</A
></H3
><P
>Un démon gère la génération et l'analyse des requêtes ARP. Le noyau ne
maintient qu'une petite table de recherche avec des informations partielles.</P
><P
>Pages de manuel :
<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>atmarpd</SPAN
>(8)</SPAN
>,
<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>atmarp</SPAN
>(8)</SPAN
></P
><P
><SPAN
CLASS="APPLICATION"
>atmsigd</SPAN
> et <SPAN
CLASS="APPLICATION"
>ilmid</SPAN
>
doivent être démarrés avant <SPAN
CLASS="APPLICATION"
>atmarpd</SPAN
>. Utilisez
l'option <VAR
CLASS="PARAMETER"
>-b</VAR
> pour être sûr que ces
démons sont correctement synchronisés. Par exemple :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN806"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>#!/bin/sh
atmsigd -b
ilmid -b
atmarpd -b
...</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Le script suivant ne fonctionnera par contre que rarement :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN809"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>#!/bin/sh
atmsigd &#38;
ilmid &#38;
atmarpd &#38;
...</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
><SPAN
CLASS="APPLICATION"
>atmarp</SPAN
> permet de configurer ATMARP.
Une fois <SPAN
CLASS="APPLICATION"
>atmsigd</SPAN
>, <SPAN
CLASS="APPLICATION"
>ilmid</SPAN
>
et <SPAN
CLASS="APPLICATION"
>atmarpd</SPAN
> démarrés, créez une interface et
configurez-la :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN816"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># atmarp -c <VAR
CLASS="REPLACEABLE"
>nom_interface</VAR
>
# ifconfig atm0 <VAR
CLASS="REPLACEABLE"
>adresse_locale</VAR
> <VAR
CLASS="REPLACEABLE"
>options_supplémentaires_éventuelles</VAR
> up</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Par exemple :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN822"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># atmarp -c atm0
# ifconfig atm0 10.0.0.3 up</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Dans le cas où seuls des PVC sont employés, on peut les créer avec :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN825"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># atmarp -s 10.0.0.4 0.0.70</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>L'encapsulation est de type NULL si le mot clef 
<VAR
CLASS="PARAMETER"
>null</VAR
> est passé en argument.
Notez qu'ARP demande une encapsulation de type LLC/SNAP. Le type NULL
est donc limité aux PVC.</P
><P
>L'usage de SVC peut nécessiter davantage de configuration. Si l'hôte joue
le rôle de serveur ATMARP sur ce sous-réseau IP logique (LIS, Logical IP
Subnet), aucune autre opération n'est nécessaire. Sinon, l'adresse ATM du
serveur ARP doit être renseignée. Ceci s'effectue en créant une entrée avec
l'option <VAR
CLASS="PARAMETER"
>arpsrv</VAR
>. Par exemple :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN831"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># atmarp -s \
  10.0.0.0 47.0005.80.ffe100.0000.f215.1065.0020EA000756.00 \
  arpsrv</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Le serveur ATMARP doit être opérationnel en préalable à la configuration
des clients.</P
><P
>La table ATMARP du noyau peut se lire via
<TT
CLASS="FILENAME"
>/proc/net/atm/arp</TT
>.
La table utilisée par <SPAN
CLASS="APPLICATION"
>atmarpd</SPAN
> est 
régulièrement affichée sur la sortie standard lorsque le démon a été
invoqué avec l'option <VAR
CLASS="PARAMETER"
>-d</VAR
>.
Sans cette option de configuration, la table est écrite dans le fichier
<TT
CLASS="FILENAME"
>atmarpd.table</TT
> du répertoire de sortie (par défaut
<TT
CLASS="FILENAME"
>/var/run</TT
>, modifiable avec l'option
<VAR
CLASS="PARAMETER"
>-D</VAR
>). La commande
<B
CLASS="COMMAND"
>atmarp -a</B
> permet de la lire.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="IP-OVER-ATM.LAN-EMULATION"
>6.2. Émulation de LAN</A
></H3
><P
>Outre CLIP, LANE (Lan Emulation) convoie du trafic IP au-dessus d'ATM. LANE
émule le comportement d'un (ancien) réseau local, par exemple dans son
aspect diffusion des messages. Le serveur LANE est décrit dans le fichier
<TT
CLASS="FILENAME"
>src/lane/USAGE</TT
> du paquet linux-atm.</P
><P
>Pages de manuel :
<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>bus</SPAN
>(8)</SPAN
>,
<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>lecs</SPAN
>(8)</SPAN
>,
<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>les</SPAN
>(8)</SPAN
> et
<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>zeppelin</SPAN
>(8)</SPAN
></P
><P
>Si vous comptez utiliser plusieurs clients ou services LANE, chaque démon
doit disposer de sa propre adresse ATM locale. Tous les démons emploient la
même prise d'accès (SAP, Service Access Point) et la distinction entre
connexions s'effectue donc avec les adresses ATM.</P
><P
>Tout comme CLIP, LANE se compose d'un processus démon en espace
utilisateur, <SPAN
CLASS="APPLICATION"
>zeppelin</SPAN
>, qui gère le protocole
LANE, et d'une partie noyau qui s'occupe du cache ARP LANE.</P
><P
><SPAN
CLASS="APPLICATION"
>atmsigd</SPAN
> et <SPAN
CLASS="APPLICATION"
>ilmid</SPAN
>
doivent être lancés avant
<SPAN
CLASS="APPLICATION"
>zeppelin</SPAN
>. Le noyau crée une nouvelle interface
au démarrage de <SPAN
CLASS="APPLICATION"
>zeppelin</SPAN
>. Celle-ci peut alors
être configurée :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN867"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># zeppelin <VAR
CLASS="REPLACEABLE"
>options_supplémentaires_éventuelles</VAR
> &#38;
# ifconfig lec0 <VAR
CLASS="REPLACEABLE"
>adresse_locale</VAR
> <VAR
CLASS="REPLACEABLE"
>options_supplémentaires_éventuelles</VAR
> up</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Dans l'exemple suivant, deux clients LANE sont démarrés. Le premier client
utilise l'interface par défaut <SPAN
CLASS="INTERFACE"
>lec0</SPAN
>, l'adresse
d'écoute par défaut et se connecte au pseudo-réseau par défaut. Le second
client LANE se voit attribuer l'interface <SPAN
CLASS="INTERFACE"
>lec2</SPAN
>,
s'attache à l'adresse locale <VAR
CLASS="PARAMETER"
>ma_machine3</VAR
>,
essaie de joindre le pseudo-réseau <VAR
CLASS="PARAMETER"
>mon_réseau</VAR
>
et fait office de pont entre le pseudo-réseau et le segment
Ethernet. L'adresse <VAR
CLASS="PARAMETER"
>ma_machine3</VAR
> est
spécifiée dans le fichier <TT
CLASS="FILENAME"
>/etc/hosts.atm</TT
>. Le reste du
fonctionnement du pont est décrit dans le mini-HOWTO correspondant,
[<A
HREF="#BRIDGE-HOWTO"
>bridge-howto</A
>].</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN880"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># zeppelin &#38;
# ifconfig lec0 10.1.1.42 netmask 255.255.255.0 \
                          broadcast 10.1.1.255 up
#
# zeppelin -i 2 -l ma_machine3 -n mon_réseau -p &#38;
# ifconfig lec2 10.1.2.42 netmask 255.255.255.0 \
                          broadcast 10.1.2.255 up</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
><SPAN
CLASS="APPLICATION"
>zeppelin</SPAN
> emploie l'interface
<SPAN
CLASS="INTERFACE"
>lec0</SPAN
> par défaut et s'attache à une adresse ATM dont
l'octet de sélection est à zéro. Il essaie de contacter le LECS (LAN
Emulation Configuration Server) à l'adresse standard et de joindre le
pseudo-réseau spécifié par ce dernier. <SPAN
CLASS="APPLICATION"
>zeppelin</SPAN
>
utilise la MTU définie par le LES et n'agit pas en tant que proxy LEC (LAN
Emulation Client). Ce paramétrage est modifiable avec les options de ligne
de commandes définies dans
<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>zeppelin</SPAN
>(8)</SPAN
>.</P
><P
><SPAN
CLASS="APPLICATION"
>zeppelin</SPAN
> rejoint automatiquement tout
pseudo-réseau dont la MTU dépasse les 1516 octets de MTU par défaut.
La MTU de l'interface LANE s'ajuste en fonction de la MTU du pseudo-réseau
courant.</P
><P
>L'état du cache ARP LANE est accessible via le fichier
<TT
CLASS="FILENAME"
>/proc/net/atm/lec</TT
>. Les adresses MAC, ATM et l'état de
chaque entrée sont affichés. Les identifiants de connexion pour les
enregistrement actifs sont également présents.</P
><P
>Le service LANE
(<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>lecs</SPAN
>(8)</SPAN
>,
<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>les</SPAN
>(8)</SPAN
>
et
<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>bus</SPAN
>(8)</SPAN
>)
se configure au moyen de fichiers. La syntaxe des fichiers de configuration
est décrite dans les pages de manuel respectives.</P
><P
>Une description plus détaillée des services LANE de Linux se trouve dans
le mémoire d'études de Marko Kiiskilä [<A
HREF="#KIIS"
>kiis</A
>].</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="IP-OVER-ATM.MPOA"
>6.3. MPOA</A
></H3
><P
>Le client MPOA de Linux s'inscrit dans la tradition des services ATM
divisés en un démon utilisateur et un service noyau. Le démon
<SPAN
CLASS="APPLICATION"
>mpcd</SPAN
> traite les paquets de contrôle MPOA
tandis que le noyau tient à jour les caches entrant et sortant et
effectue le renvoi des paquets.</P
><P
>Page de manuel :
<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>mpcd</SPAN
>(8)</SPAN
></P
><P
><SPAN
CLASS="APPLICATION"
>atmsigd</SPAN
> et <SPAN
CLASS="APPLICATION"
>ilmid</SPAN
>
doivent être lancés avant <SPAN
CLASS="APPLICATION"
>mpcd</SPAN
>. Puisque MPOA
détecte les flux IP à partir du trafic LANE,
<SPAN
CLASS="APPLICATION"
>zeppelin</SPAN
> doit être démarré au préalable. L'ordre
de lancement des démons <SPAN
CLASS="APPLICATION"
>zeppelin</SPAN
> et
<SPAN
CLASS="APPLICATION"
>mpcd</SPAN
> n'est toutefois pas fixé. Ils peuvent être
arrêtés et redémarrés indépendamment l'un de l'autre. La méthode la plus
simple pour désactiver MPOA consiste à envoyer un signal au démon
<SPAN
CLASS="APPLICATION"
>mpcd</SPAN
>.</P
><P
>Ci-dessous se trouve un exemple tiré de la section
<A
HREF="#IP-OVER-ATM.LAN-EMULATION"
><I
>Émulation de LAN</I
></A
>
qui démarre deux clients LANE. La configuration a été enrichie de deux clients
MPOA alimentés par les clients LANE :</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN923"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># zeppelin &#38;
# ifconfig lec0 10.1.1.42 netmask 255.255.255.0 \
                          broadcast 10.1.1.255 up
# mpcd -s ma_machine1 -l ma_machine2 &#38;
#
# zeppelin -i 2 -l ma_machine3 -n mon_réseau -p &#38;
# ifconfig lec2 10.1.2.42 netmask 255.255.255.0 \
                          broadcast 10.1.2.255 up
# mpcd -i 2 -s ma_machine4 -l ma_machine5 &#38;</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Le démon MPOA a besoin de deux adresses ATM locales qu'il emploie pour
initialiser et recevoir les connexions de contrôle et de données. Les
adresses peuvent être les mêmes que pour <SPAN
CLASS="APPLICATION"
>zeppelin</SPAN
>,
par exemple, mais elles doivent différer entre démons
<SPAN
CLASS="APPLICATION"
>mpcd</SPAN
>. Par défaut, 
<SPAN
CLASS="APPLICATION"
>mpcd</SPAN
> ne récupère pas les informations de
configuration du LECS. Les options de ligne de commande et un exemple
d'emploi de LECS se trouvent dans la page de manuel de
<SPAN
CLASS="APPLICATION"
>mpcd</SPAN
>.</P
><P
>Le contenu des caches entrant et sortant de MPOA peut être contrôlé via le
fichier <TT
CLASS="FILENAME"
>/proc/net/atm/mpc</TT
>.</P
><P
>Le client MPOA Linux accepte la classe de trafic CBR pour les SVC directs
au lieu de la classe par défaut UBR. La QoS des SVC à venir est
modifiable par l'intermédiaire de <TT
CLASS="FILENAME"
>/proc/net/atm/mpc</TT
>.</P
><DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN934"
></A
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># echo add 130.230.54.146 tx=80000,1600 rx=tx &#62; /proc/net/atm/mpc
#             # créer assez de trafic pour déclencher un raccourci
# cat /proc/net/atm/mpc 
QoS entries for shortcuts:
IP address
  TX:max_pcr pcr     min_pcr max_cdv max_sdu
  RX:max_pcr pcr     min_pcr max_cdv max_sdu
130.230.54.146  
     80000   0       0       0       1600   
     80000   0       0       0       1600   

Interface 2:

Ingress Entries:
IP address      State     Holding time  Packets fwded  VPI VCI
130.230.4.3     invalid   1160          0           
130.230.54.146  resolved  542           151            0   109
...</PRE
></FONT
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>Le raccourci avec l'adresse IP
<VAR
CLASS="PARAMETER"
>130.230.54.146</VAR
> a été établi avec
les paramètres ci-dessus. Des patches étendent la détection de flux à
un support complet de niveau 4. Les flux de niveau 4 sont exprimés
sous la forme d'un quintuplet (protocole, adresse locale, port local,
adresse distance, port distant). Ils identifient des flux applicatifs.</P
></DIV
></DIV
><A
NAME="BIBLIOGRAPHY"
></A
><HR><H1
><A
NAME="BIBLIOGRAPHY"
></A
>Bibliographie</H1
><H2
CLASS="BIBLIODIV"
><A
NAME="AEN940"
>Références</A
></H2
><DIV
CLASS="BIBLIOENTRY"
><A
NAME="API"
></A
><P
>[api]&nbsp;<I
>Linux ATM API</I
>, <SPAN
CLASS="AUTHOR"
>Werner Almesberger</SPAN
>,     		<A
HREF="http://linux-atm.sourceforge.net/API/"
TARGET="_top"
>http://linux-atm.sourceforge.net/API/</A
>
	, juillet 1996.</P
><DIV
CLASS="BIBLIOENTRYBLOCK"
STYLE="margin-left: 0.5in"
></DIV
></DIV
><DIV
CLASS="BIBLIOENTRY"
><A
NAME="RFC1577"
></A
><P
>[RFC1577]&nbsp;<I
>Classical IP and ARP over ATM (RFC1577)</I
>, <SPAN
CLASS="AUTHOR"
>Mark Laubach</SPAN
>, janvier 1994.</P
><DIV
CLASS="BIBLIOENTRYBLOCK"
STYLE="margin-left: 0.5in"
></DIV
></DIV
><DIV
CLASS="BIBLIOENTRY"
><A
NAME="LANEV1"
></A
><P
>[lanev1]&nbsp;<I
>LAN Emulation Over ATM -- Version 1.0</I
>, ATM Forum, février 1996.</P
><DIV
CLASS="BIBLIOENTRYBLOCK"
STYLE="margin-left: 0.5in"
></DIV
></DIV
><DIV
CLASS="BIBLIOENTRY"
><A
NAME="LANEV2"
></A
><P
>[lanev2]&nbsp;<I
>LAN Emulation Over ATM -- Version 2 -- LUNI Specification</I
>, ATM Forum, juillet 1997.</P
><DIV
CLASS="BIBLIOENTRYBLOCK"
STYLE="margin-left: 0.5in"
></DIV
></DIV
><DIV
CLASS="BIBLIOENTRY"
><A
NAME="MPOAV1"
></A
><P
>[mpoav1]&nbsp;<I
>Multi-Protocol Over ATM -- Version 1.0</I
>, ATM Forum, juillet 1997.</P
><DIV
CLASS="BIBLIOENTRYBLOCK"
STYLE="margin-left: 0.5in"
></DIV
></DIV
><DIV
CLASS="BIBLIOENTRY"
><A
NAME="BRIDGE-HOWTO"
></A
><P
>[bridge-howto]&nbsp;<I
>Bridging mini-Howto</I
>, <SPAN
CLASS="AUTHOR"
>Christopher Cole</SPAN
>, 		<A
HREF="http://www.traduc.org/docs/HOWTO/mini/lecture/Bridge.html"
TARGET="_top"
>http://www.traduc.org/docs/HOWTO/mini/lecture/Bridge.html</A
>
	, mars 2001.</P
><DIV
CLASS="BIBLIOENTRYBLOCK"
STYLE="margin-left: 0.5in"
></DIV
></DIV
><DIV
CLASS="BIBLIOENTRY"
><A
NAME="KIIS"
></A
><P
>[kiis]&nbsp;<I
>Implementation of LAN Emulation Over ATM in Linux</I
>, <SPAN
CLASS="AUTHOR"
>Marko Kiiskilä</SPAN
>, 		<A
HREF="http://linux-atm.sourceforge.net/misc.php"
TARGET="_top"
>http://linux-atm.sourceforge.net/misc.php</A
>
	, octobre 1996.</P
><DIV
CLASS="BIBLIOENTRYBLOCK"
STYLE="margin-left: 0.5in"
></DIV
></DIV
></DIV
><H3
CLASS="FOOTNOTES"
>Notes</H3
><TABLE
BORDER="0"
CLASS="FOOTNOTES"
WIDTH="100%"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN469"
HREF="#AEN469"
><SPAN
CLASS="footnote"
>[1]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>Certains périphériques ne gèrent qu'un sous-ensemble de cette liste.</P
></TD
></TR
></TABLE
></BODY
></HTML
>