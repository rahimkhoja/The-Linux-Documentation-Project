<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
 <TITLE>TkRat mini-HOWTO</TITLE>
</HEAD>
<BODY>
<H1>TkRat mini-HOWTO</H1>

      
<H2>Dave Whitinger, 
<A HREF="mailto:dave@linuxtoday.com">dave@linuxtoday.com</A><BR>
          Version française&nbsp;: Philippe Martin, 
<A HREF="mailto:feloy@wanadoo.fr">feloy@wanadoo.fr</A>
      </H2>v1.2, 15 Septembre 1999
      
<HR>
<EM>    Voici le TkRat mini-HOWTO.
        Ce document est destiné à quiconque voudrait utiliser Linux pour envoyer et
        recevoir des messages électroniques par l'Internet.
      </EM>
<HR>
<H2><A NAME="s1">1. Introduction</A>      </H2>

<P>Ce document est maintenu par Dave Whitinger (
<A HREF="mailto:dave@linuxtoday.com">dave@linuxtoday.com</A>). Merci de me
contacter pour toutes questions ou idées relatives à cet HOWTO.</P>
<P>Ce document va tenter de décrire comment&nbsp;:</P>
<P>
<OL>
<LI>Installer le programme de messagerie TkRat,</LI>
<LI>Récupérer ses messages chez un Fournisseur de Services Internet (<B>FSI</B>),</LI>
<LI>Lire, stocker et envoyer des messages,</LI>
<LI>Trier ses messages dans différents classeurs.</LI>
</OL>
</P>
<P>Ce document suppose que vous utilisez Linux avec le système X Window, avez
déjà établi une connexion avec votre Fournisseur de Services Internet, et
avez un compte POP chez ce fournisseur.</P>
<P>Responsabilités&nbsp;: Toutes responsabilités habituelles s'appliquent. L'auteur
ne peut en aucun cas être tenu responsable d'une (mauvaise) utilisation des
informations données ici.  Ce document ne tente en aucun cas de faire
autorité. L'auteur a volontairement créé ce document séparément de toute
entité avec laquelle il pourrait être impliqué. En lisant ce document, vous
acceptez de ne créer à l'auteur ni ennuis ni griefs.  :)</P>

<H2><A NAME="s2">2. Installer TkRat</A>      </H2>

<P>Je voudrais souligner qu'il existe un grand nombre d'excellents programmes
de messagerie disponibles sous Linux. C'est toujours une question de goût
personnel que de choisir lequel utiliser.</P>
<P>Cela dit, je dois vous avouer que j'utilise un programme appelé
<CODE>TkRat</CODE> depuis plus de deux ans maintenant --&nbsp;et je l'adore. C'est un
programme avec une interface graphique qui a toutes les caractéristiques que
vous attendez d'un programme de messagerie de qualité&nbsp;: il est simple
d'apprentissage, il est puissant, et il est libre. Pour ces raisons, cet
HOWTO ne traitera que de TkRat.</P>
<P>La première chose à faire est de récupérer <CODE>TkRat</CODE>. Vous pouvez soit
obtenir les sources que vous compilerez, soit obtenir les exécutables.</P>
<P>Voici quelques URL pour le logiciel&nbsp;:</P>
<P>
<UL>
<LI>
<A HREF="ftp://ftp.md.chalmers.se/pub/tkrat/tkrat-2.0b3.tar.gz">ftp://ftp.md.chalmers.se/pub/tkrat/tkrat-2.0b3.tar.gz</A>
(Téléchargement via ftp)
            </LI>
<LI>
<A HREF="http://www.dtek.chalmers.se/~maf/ratatosk/tkrat-2.0b3.tar.gz">http://www.dtek.chalmers.se/~maf/ratatosk/tkrat-2.0b3.tar.gz</A>
(Téléchargement via http) 
            </LI>
<LI>
<A HREF="http://www.dtek.chalmers.se/~maf/ratatosk/download.html">http://www.dtek.chalmers.se/~maf/ratatosk/download.html</A>
(Page de téléchargement - vérifiez la dernière version&nbsp;!) 
            </LI>
</UL>
</P>
<P>Lorsque vous avez téléchargé l'archive, vous êtes prêt à l'installer
sur votre système.</P>
<P>Pour installer les sources <CODE>tar.gz</CODE>, utilisez les commandes&nbsp;:
<HR>
<PRE>
          tar -zcvpf tkrat-2.0b3.tar.gz
          cd tkrat-2.0b3
          ./configure
          make
          make install
        
</PRE>
<HR>

Si quelque chose échoue, consultez les fichiers <CODE>INSTALL</CODE> et
<CODE>README</CODE> se trouvant dans le répertoire
<CODE>tkrat-2.0b3</CODE>. Notez que vous aurez besoin d'une version de tcl
supérieure à 8.1 pour compiler.  Vous pouvez obtenir la dernière version
de tcl depuis 
<A HREF="http://www.scriptics.com/">scriptics.com</A>.</P>
<P>Bravo - <CODE>TkRat</CODE> devrait être installé sur votre système maintenant.</P>

<H2><A NAME="s3">3. Récupérer vos messages</A>      </H2>

<P>Afin de lire vos messages, le mieux est généralement d'utiliser le programme
appelé <CODE>fetchmail</CODE>. Les instructions suivantes sont réputées marcher
parfaitement pour la version 2.2 de <CODE>fetchmail</CODE> --&nbsp;bien qu'elles
doivent être applicables à d'autres versions.</P>
<P>(Note : <CODE>fetchmail</CODE> est très certainement déjà installé sur votre
système, celui-ci étant inclus dans toutes les distributions Linux que je
connaisse -&nbsp;si tel n'est pas le cas, prière de me le faire savoir !)</P>
<P>Exécutez les étapes suivantes&nbsp;:</P>
<P>
<HR>
<PRE>
          echo "server pop.fr protocol pop3 username dave password xxxxx" > ~/.fetchmailrc
        
</PRE>
<HR>
</P>
<P>(N'oubliez pas de remplacer <EM>pop.fr</EM> par le nom du serveur POP de
votre FSI. Remplacez <EM>dave</EM> par votre identifiant de messagerie et
<EM>xxxxx</EM> par votre mot de passe associé.)</P>
<P>À partir de maintenant, chaque fois que vous voulez voir si vous avez des
messages, tapez juste <CODE>fetchmail</CODE> sur la ligne de
commande. <CODE>fetchmail</CODE> va partir récupérer tous vos messages et les
stocker dans votre classeur de messages local.</P>

<H2><A NAME="s4">4. Configurer <CODE>TkRat</CODE></A>      </H2>


<P>Depuis la ligne de commande, tapez <CODE>tkrat</CODE> suivi d'<EM>Entrée</EM>.<BR>
Cliquez sur <CODE>Create</CODE>.<BR>
Lisez le message qu'il vous présente, puis cliquez sur <CODE>Continue</CODE>.</P>
<P>À ce point, vous êtes amené au programme principal de <CODE>TkRat</CODE>. La
première chose à faire est de l'adapter à votre système local.</P>
<P>
<OL>
<LI>Allez dans le menu <CODE>Admin</CODE>, et choisissez <CODE>Preferences</CODE>,</LI>
<LI>Cliquez sur <CODE>Sending</CODE>,</LI>
<LI>Entrez votre adresse électronique dans le champ <CODE>Default Reply-To</CODE>,</LI>
<LI>Entrez votre adresse électronique, suivie de votre nom entre
parenthèses dans le champ <CODE>Use from address</CODE>, par exemple
dave@linuxtoday.com (Dave Whitinger)</LI>
<LI>Entrez votre nom de domaine dans le champ <CODE>Domain</CODE>. Si votre
adresse électronique est <CODE>utilisateur@xyz.fr</CODE>, entrez <CODE>xyz.fr</CODE></LI>
<LI>Cliquez sur <CODE>Apply</CODE>,</LI>
<LI>Cliquez sur <CODE>Method</CODE>,</LI>
<LI>Pour <CODE>Send Via</CODE>, sélectionnez <CODE>SMTP</CODE>,</LI>
<LI>Dans le champ <CODE>SMTP host</CODE>, entrez l'adresse du serveur SMTP de
votre FSI (ils devraient être capable de vous fournir cette information),</LI>
<LI>Cliquez sur <CODE>Apply</CODE>, puis sur <CODE>Dismiss</CODE>.</LI>
</OL>
</P>

<H2><A NAME="s5">5. Utiliser <CODE>TkRat</CODE></A>      </H2>

<P>Au démarrage de <CODE>TkRat</CODE>, vous noterez que vous êtes dans un classeur
appelé <CODE>INBOX</CODE>. Utilisez <CODE>fetchmail</CODE> pour récupérer vos messages. Si
vous en avez, ils apparaîtront dans le classeur <CODE>INBOX</CODE>.</P>
<P><CODE>TkRat</CODE> a une interface intuitive. La moitié supérieure de l'écran montre
la liste des messages que vous avez reçus (chaque ligne étant un message
différent). La moitié inférieure montre le contenu du message sélectionné.</P>
<P>Vous pouvez lire un message en cliquant simplement sur ce message dans la liste.</P>
<P>Lorsque vous avez fini de lire un message, vous pouvez aller voir un autre
message, répondre à ce message, écrire un nouveau message, ou déplacer ce
message vers un autre classeur.</P>
<P>Les <CODE>Folders</CODE>
sont un moyen de stocker vos messages électroniques dans
différents <EM>classeurs</EM>. Ainsi, vous pouvez conserver plusieurs classeurs,
chacun contenant les messages sur un certain sujet.</P>
<P>Exécutez les instructions suivantes pour créer des classeurs&nbsp;:
<OL>
<LI>Choisissez le menu <CODE>Admin</CODE>, puis <CODE>New/Edit Folders</CODE></LI>
<LI>Vous voyez une boîte avec un classeur <CODE>INBOX</CODE>. Cliquez (avec le
bouton gauche) sur cette boîte.</LI>
<LI>Il vous est alors présenté un menu, sélectionnez-y <CODE>New File Folder</CODE>.</LI>
<LI>Il vous sera présenté une boîte de dialogue vous demandant des informations.</LI>
<LI>Dans le premier champ, entrez un nom pour le classeur.</LI>
<LI>Dans le second, entrez le nom de fichier qui sera utilisé pour
y stocker les messages.<BR>
Un petit conseil&nbsp;: utilisez quelque chose comme
<CODE>/home/utilisateur/mail/nom_du_classeur</CODE>. Par exemple, si le premier
champ est <EM>Personnel</EM>, le second serait quelque chose comme
<CODE>home/dave/mail/personnel</CODE> (en supposant que votre nom d'utilisateur
soit <EM>dave</EM>.)</LI>
<LI>Cliquez sur <CODE>OK</CODE>. Vous noterez que votre nouveau classeur apparaît
maintenant dans la liste des classeurs. Allez alors dans <CODE>Window</CODE>, puis
<CODE>Close</CODE>. </LI>
</OL>
</P>
<P>Vous pouvez maintenant déplacer vos messages vers le nouveau classeur - et
basculer vers ce classeur en sélectionnant son nom sous le menu <CODE>Folders</CODE>.</P>
<P>Envoyer des messages est aussi simple. Cliquez sur <CODE>Compose</CODE>, tapez
l'adresse électronique du destinataire, le sujet, puis le message.</P>
<P>Lorsque vous avez terminé, cliquez sur <CODE>Send</CODE>.</P>

<H2><A NAME="s6">6. Tri automatique des messages dans les classeurs</A>      </H2>

<P>Si vous êtes comme moi, vous recevez près de 3500 messages par jour. Chaque
fois que vous allez chercher vos messages 
(Note&nbsp;: <EM>fetch mail en anglais</EM>),
vous devez parcourir tous vos messages pour trouver ceux qui vous
intéressent.</P>
<P>Ce n'est plus un problème, grâce à <CODE>Procmail</CODE>.</P>
<P><CODE>Procmail</CODE> fonctionne ainsi&nbsp;:</P>
<P><CODE>Procmail</CODE> examine chaque message au moment où il est récupéré, et
exécute une série de tâches fondées sur certaines règles que vous lui avez
spécifiées. </P>
<P>Disons, par exemple, que je reçoive 200 messages par jour d'une certaine
liste (prenons ici la liste <EM>linux-machin</EM>). Plutôt que de voir tous ces
messages partir directement dans mon classeur <CODE>INBOX</CODE>, je préfère qu'ils
soient automatiquement filtrés et dirigés dans un classeur appelé
<EM>liste-machin</EM>.</P>
<P>La première chose à faire est de prendre quelques exemples de messages provenant de
cette liste et d'en examiner les entêtes.</P>
<P>Je commence à discerner un motif répétitif. Chaque message provenant de
cette liste contient une ligne disant&nbsp;:</P>
<P>
<PRE>
          Sender: owner-linux-machin@bidule.chouette.fr
        
</PRE>
</P>
<P>Je peux maintenant dire à <CODE>procmail</CODE> de placer chaque message contenant
cette ligne dans un certain classeur.</P>
<P>Je peux le préciser à <CODE>procmail</CODE> à travers un fichier <CODE>.procmailrc</CODE>.</P>
<P>Je vais utiliser mon éditeur de texte préféré pour créer un fichier texte
dans mon répertoire racine, appelé <CODE>.procmailrc</CODE>.</P>
<P>Ce fichier ressemblera à&nbsp;:</P>
<P>
<HR>
<PRE>
          LOGFILE=$HOME/.pmlog
          MAILDIR=$HOME/mail
          VERBOSE

          # liste linux-machin
          :0 Hw
          * ^.*[Ss]ender: owner-linux-machin@bidule.chouette.fr
          liste-machin

          # S'il arrive ici, l'envoyer dans mon classeur 'nouveaux'
          :0 Hw
          nouveaux

        
</PRE>
<HR>
</P>
<P>Examinez la ligne <CODE>[Ss]ender</CODE>. Vous noterez que cette ligne est ce
que tous les messages provenant de cette liste ont en commun. </P>
<P>Cette section dit à <CODE>procmail</CODE> de placer les messages arrivant avec une
entête comme celle-ci dans le classeur <EM>liste-machin</EM>.</P>
<P>La section suivante dit que si le message ne correspond à aucune règle
précédente, alors il faut le placer dans le classeur <EM>nouveaux</EM>.</P>
<P>Maintenant, disons que je veuille que les messages de la part de mon ami
<EM>EJ</EM> aillent dans un classeur nommé <EM>EJ</EM>.</P>
<P>Il suffit de rajouter une section à mon fichier <CODE>.procmailrc</CODE>&nbsp;:</P>
<P>
<HR>
<PRE>
          LOGFILE=$HOME/.pmlog
          MAILDIR=$HOME/mail
          VERBOSE
          
          # liste linux-machin
          :0 Hw
          * ^.*[Ss]ender: owner-linux-machin@bidule.chouette.fr
          liste-machin

          # Message de E.J. !
          :0 Hw
          * ^.*[Ff]rom: ej@monpote.fr
          ej

          # S'il arrive ici, l'envoyer dans mon classeur 'nouveaux'
          :0 Hw
          nouveaux
        
</PRE>
<HR>
</P>
<P>Remarquez la nouvelle section pour <EM>EJ</EM>. Lorsqu'un message y arrive avec
son adresse dans le champ <CODE>From</CODE>, il sera automatiquement placé dans mon
classeur <CODE>ej</CODE>.</P>
<P>Maintenant, disons qu'il y ait un boiteux par-là qui tienne à
m'écrire. Je ne veux pas entendre parler de lui, mais il insiste. Encore une
fois - <CODE>procmail</CODE> à la rescousse.</P>
<P>Disons alors que ne ne veuille recevoir aucun message de <EM>Bill Gates</EM>. Je
peux définir un expéditeur dont tous les messages seront effacés. Voyez alors
mon nouveau <CODE>.procmailrc</CODE>&nbsp;:</P>
<P>
<HR>
<PRE>

          LOGFILE=$HOME/.pmlog
          MAILDIR=$HOME/mail
          VERBOSE
          
          # Provient-il de Bill Gates?  Si oui, A LA POUBELLE !!!
          :0 Hw
          * ^.*[Ff]rom: bgates@microsoft.com
          /dev/null

          # liste linux-machin
          :0 Hw
          * ^.*[Ss]ender: owner-linux-machin@bidule.chouette.fr
          liste-machin

          # Message de EJ !
          :0 Hw
          * ^.*[Ff]rom: ej@monpote.fr
          ej

          # S'il arrive ici, l'envoyer dans mon classeur 'nouveaux'
          :0 Hw
          nouveaux
        
</PRE>
<HR>
</P>
<P>Maintenant, j'ai un fichier <CODE>.procmailrc</CODE> plutôt bien. Examinons 
ce que <CODE>procmail</CODE> va faire de chaque message qu'il reçoit.</P>
<P>Premièrement, il regarde si ce message provient de
<EM>bgates@microsoft.com</EM>. Si oui, il l'efface et c'est fait.</P>
<P>Si le message est passé à travers la première vérification, 
<CODE>procmail</CODE> regarde s'il
contient <EM>owner-linux-machin@bidule.chouette.fr</EM> dans l'entête. Si
oui, il le dépose dans le classeur <CODE>liste-machin</CODE>, et voilà.</P>
<P>Si le message est aussi passé à travers celle-là, il regarde s'il provient
d'<EM>EJ</EM>. Si oui, il le place dans le classeur <CODE>ej</CODE>.</P>
<P>Maintenant, si le message est passé à travers tous ces tests, alors il le
place dans le classeur <CODE>nouveaux</CODE>.</P>
<P>Une fois ces classeurs mis en place et <CODE>procmail</CODE> filtrant correctement
vos messages, vous pouvez aller dans <CODE>TkRat</CODE>, <CODE>Admin - New/Edit
Folder</CODE> et créer les classeurs pour chaque fichier. Ils seront placés
dans <CODE>/home/utilisateur/mail/nom_classeur</CODE></P>

<H2><A NAME="s7">7. Copyright</A>      </H2>

<P>Ce HOWTO est Copyright 1998, 1999 par Dave Whitinger, 
et c'est un document libre.
Vous pouvez le redistribuer et/ou le modifier sous les termes de la GPL (GNU
General Public License) publiée par la FSF (Free Software Foundation)&nbsp;; soit
la version 2 de la Licence, soit une version ultérieure.</P>


<H2><A NAME="s8">8. Remerciements</A>      </H2>

<P>Je remercie tout particulièrement Martin Forsse'n
(<EM>maf@dtek.chalmers.se</EM>) pour avoir créé l'<EM>agent utilisateur de
messagerie</EM> <CODE>TkRat</CODE>.</P>
<P>Je remercie également le <EM>North Texas Linux User's Group</EM> (Dallas, Texas),
pour qui j'ai à l'origine écrit ce document début
1998. Aujourd'hui aucun remerciement ne va plus à aucun groupe
d'utilisateurs, car je vis dans les montagnes de l'Est du Tennessee, où
je pense être le seul utilisateur de Linux (ou même utilisateur d'un
ordinateur) à 50 miles à la ronde.</P>
<P>Notez aussi&nbsp;: 
<A HREF="mailto:nic@postilion.org">Nic Bernstein</A>
a fait bifurquer le code de TkRat pour créer un agent de messagerie
appelé 
<A HREF="http://www.postilion.org/">Postilion</A>.  Il
semble être un excellent agent de messagerie avec un grand nombre de
nouvelles fonctionnalités qui ne sont pas dans TkRat, mais, néammoins, 
je continue à utiliser TkRat.</P>

</BODY>
</HTML>
