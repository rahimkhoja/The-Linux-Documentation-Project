<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
 <TITLE>HOW TO Tablette Wacom</TITLE>
</HEAD>
<BODY>
<H1>HOW TO Tablette Wacom</H1>

<H2>Stefan Runkel <CODE>&lt;runkel@runkeledv.de&gt;</CODE><BR>
Traduit de l'anglais par Aurélia Girod <CODE>&lt;agirod@lemel.fr&gt;</CODE></H2>Version 1.0.6, 28 Mars 2000
<HR>
<EM>Installation de tablettes graphiques Wacom (et pas seulement) sous Linux en console et/ou sous XFree86</EM>
<HR>
<H2><A NAME="s1">1. Copyright</A></H2>

<P>Copyright (c) 1999,2000 par Stefan Runkel 
<A HREF="mailto:Runkel@runkeledv.de">Runkel@runkeledv.de</A></P>
<P>Ce document décrit l'installation de tablettes Wacom sous Linux. <BR>
Vous pouvez le distribuer soit sous les termes de la licence GPL version 2 ou supérieur, soit sous les termes du Projet de Documentation de Linux (LPD). 
Ces licenses devraient être applicables quelque soit l'endroit où vous avez obtenu ce document. 
Dernière remarque, depuis que le LDP n'autorise pas de modifications autre que les traductions, les versions modifiées ne peuvent être distribuées que sous la license GPL. </P>

<H2><A NAME="s2">2. Introduction</A></H2>


<P>
<A NAME="_Toc465765693"></A> </P>
<P>Les tablettes graphiques sont aujourd'hui relativement bon marché. Elles sont d'un grand secours pour la retouche d'image. En plus de faire la même chose qu'une souris, elles proposent les caractéristiques suivantes : </P>
<P>
<UL>
<LI>la sensibilité à la pression et à l'inclinaison ; </LI>
<LI>une détection du mouvement d'une grande précision ; </LI>
<LI>le positionnement d'une précision inférieure au pixel ; </LI>
<LI>un périphérique qui ressemble et qui se manipule comme un stylo normal. </LI>
</UL>
</P>
<P>Ce document s'adresse principalement aux produits Wacom, parce que j'en possède trois différents et que ces produits sont assez courants en Europe. </P>

<P>Cependant, je pense que ce doit être facile d'adapter ces explications pour d'autres produits. </P>

<P>J'ai écrit ce document car je n'en ai pas trouvé sur ce sujet qui contenait tout ce que je voulais savoir. 
J'ai donc rassemblé toutes les parties d'informations trouvées sur le Net dans ce HowTo. 
Considérant les questions de mes lecteurs, je sais que ce document aussi n'est pas complet et qu'il ne le sera jamais, mais je peux dire qu'il aidera beaucoup de gens et chaque nouvelle question complétera ce HowTo. </P>

<H2><A NAME="ss2.1">2.1 Nouvelles versions de ce document </A>
</H2>


<P>
<A NAME="_Toc465765694"></A> 
La dernière version de ce document sera disponible sur 
<A HREF="http://www.runkeledv.de/linux.htm">http://www.runkeledv.de/linux.htm</A>.</P>

<H2><A NAME="ss2.2">2.2 Opinions et corrections</A>
</H2>


<P>
<A NAME="_Toc465765695"></A> 
Les commentaires, corrections et compléments sont les bienvenus. Contactez-moi à </P>
<P>
<A HREF="mailto:Runkel@runkeledv.de">Runkel@runkeledv.de</A>
ou à 
<A HREF="mailto:RunkelEDV@t-online.de">RunkelEDV@t-online.de</A></P>

<H2><A NAME="ss2.3">2.3 Remerciements</A>
</H2>


<P>
<A NAME="_Toc465765696"></A> 
Je voudrais remercier tous les auteurs listés sur la section 
<A HREF="#_Toc465765731">Plus d'informations / Documents utilisés</A>
ainsi que tous ceux qui ont répondu à mes questions par email. Ce HowTo reflète leur travail. </P>

<H2><A NAME="s3">3. Les indispensables</A></H2>


<P>
<A NAME="_Toc465765697"></A> 
Ce chapitre contient ce qui est nécessaire pour faire fonctionner votre tablette.</P>

<H2><A NAME="ss3.1">3.1 Matériel supporté</A>
</H2>


<P>
<A NAME="_Toc465765698"></A> 
Premièrement, vous devez bien sûr avoir une tablette graphique. 
Celle-ci doit pouvoir se connecter au port série (RS232) de votre ordinateur car le support USB pour Linux est encore en développement. 
Au moment où ce doument est écrit (mars 2000), le support du noyau est commencé pour les nouveaux produits USB de Graphire et Intuos et cela fonctionne avec XFree. 
Gpm n'est plus maintenu, donc il ne faudra pas s'attendre à un driver USB pour ce logiciel. </P>

<P>Les tablettes Wacom suivantes sont supportées : </P>

<P>
<UL>
<LI>les séries ArtZ II (connues en Europe sous les séries UltraPad - le même nom était aussi utilisé pour d'anciennes tablettes qui ne marchaient que partiellement) ; </LI>
<LI>ArtPad II ;</LI>
<LI>PL300 (écran LCD et tablettes combinés) ;</LI>
<LI>Pen Partner ; </LI>
<LI>Graphire (souris et stylo, le driver alpha 16 pour un support complet se trouve à 
<A HREF="http://www.lepied.com/xfree86/">http://www.lepied.com/xfree86/</A>) ;</LI>
<LI> les séries Intuos (support seulement partiel avec le driver livré avec, téléchargez les nouvelles versions alpha à la page Frederic Lepied :
<A NAME="_driverlepied"></A> <A HREF="http://www.lepied.com/xfree86/">http://www.lepied.com/xfree86/</A>).</LI>
</UL>
</P>
<P>Les plus anciennes séries SD et HD ne sont pas supportées par XFree86 standard. 
Cependant, un driver modifié qui supporte ces périphériques ainsi que quelques produits OEM avec un écran intégré comme le Thinkpad 360 PE d'IBM et le Toshiba T200 est téléchargeable à l'adresse : 
<A HREF="http://hwr.nici.kun.nl/pen-computing/pen-computing-formats.html">http://hwr.nici.kun.nl/pen-computing/pen-computing-formats.html</A></P>

<H2><A NAME="ss3.2">3.2 Logiciel nécessaire</A>
</H2>


<P>
<A NAME="_Toc465765699"></A> 
<UL>
<LI>
<A NAME="_gpm"></A> 
Si vous voulez un driver en mode texte sous Linux, téléchargez la dernière version de gpm à l'adresse
<A HREF="ftp://ftp.prosa.it/pub/gpm">ftp://ftp.prosa.it/pub/gpm</A>
ou 
<A HREF="ftp://animal.unipv.it/pub/gpm">ftp://animal.unipv.it/pub/gpm</A>
(miroir)


</LI>
<LI>
<A NAME="_xfree"></A> 
Si vous voulez un driver sous XFree86, utilisez au moins la version 3.3.3.1 ou téléchargez la dernière à  
<A HREF="http://www.xfree.org/">http://www.xfree.org</A></LI>
</UL>
</P>

<H2><A NAME="ss3.3">3.3 Logiciels supportés</A>
</H2>


<P>
<A NAME="_Toc465765700"></A> 
<UL>
<LI>Pour le mode texte, je ne connais que Gpm. 

</LI>
<LI>Sous XFree, le mot-clé est XInput. Les drivers supportent cette norme qui fournit des informations supplémentaires. Les programmes qui veulent utiliser des périphériques de pointage exotiques devront utiliser XInput. </LI>
</UL>
</P>
<P>Il existe un grand nombre de programmes basés sur la bibliothèque GTK. 
XInput est supporté par GTK ce qui le rend facile à utiliser. <BR>
Enfin, les applications suivantes supportent XInput : </P>

<P>
<UL>
<LI>The Gimp, un puissant logiciel de retouches d'images dans le style de Photoshop. 
La version 1.1.x en développement (non stable) inclut le support XInput en standard. 
On attend la prochaine version stable, la 1.2.x.
Vous pouvez télécharger Gimp à l'adresse 
<A NAME="_gimp"></A> 
<A HREF="http://www.gimp.org/">http://www.gimp.org</A>
, ça vaut vraiment le coup !
Je suis sûr que beaucoup le connaisse et c'est pourquoi vous avez acheté une tablette. 


</LI>
<LI>Gsumi, un logiciel de dessin noir et blanc tout simple qui permet de dessiner ou d'effacer grâce à la sensiblité de la pression et de l'inclinaison. 
Téléchargez le sur la page Gsumi à l'adresse : 
<A HREF="http://www.gtk.org/~otaylor/gsumi/">http://www.gtk.org/~otaylor/gsumi/</A>


</LI>
<LI>Xink (par Ralph Levien), un autre programme de dessin rudimentaire pour le mode X. 
<P>Il est disponible à l'adresse : 
<A HREF="ftp://kiwi.cs.berkeley.edu/pub/raph/xink.tar.gz">ftp://kiwi.cs.berkeley.edu/pub/raph/xink.tar.gz</A></P>

</LI>
<LI>RasMol, un logiciel de visualisation de molécule qui supporte un périphérique pour numéroter utilisant XInput. Regardez à 
<A HREF="http://www.umass.edu/microbio/rasmol/distrib/rasman.htm">http://www.umass.edu/microbio/rasmol/distrib/rasman.htm</A>
.


</LI>
<LI>xinput (par Frederic Lepied), un utilitaire très utile pour configurer et tester les périphériques XInput. 
<A NAME="_XInput"></A> 
xinput est disponible à :
<A HREF="ftp://ftp.x.org/contrib/utilities/xinput-1.2.tar.gz">ftp://ftp.x.org/contrib/utilities/xinput-1.2.tar.gz</A>
</LI>
</UL>
</P>

<H2><A NAME="s4">4. Les tablettes qui replacent les souris en console </A></H2>


<P>
<A NAME="_Toc465765701"></A> </P>

<H2><A NAME="ss4.1">4.1 Les tablettes et Gpm</A>
</H2>


<P>
<A NAME="_Toc46576570a"></A> 
Le  
<A HREF="#_gpm">gpm</A>
démon Gpm supporte beaucoup de périphériques d'entrée incluant les tablettes. Si vous voulez avoir la liste du matériel supporté par votre Gpm, tapez : 
<BLOCKQUOTE><CODE>
<EM>gpm -t help</EM>
</CODE></BLOCKQUOTE>

et vous l'obtiendrez.</P>
<P>Le driver Wacom de gpm 1.18.0 et inférieur semble aller pour les très vieux modèles artpad, mais la documentation n'en parle pas. Je l'ai testé avec les modèles ultrapad, penpartner, graphire et intuos mais ça ne marchait pas. J'ai réécrit le driver Wacom pour gpm et pour l'utiliser il faut au moins la version 1.18.2 de Gpm. 
Depuis cette version, l'ancien driver Wacom a été remplacé par mon driver Wacom pour les produits graphire, penpartner et ultrapad. </P>
<P>Cependant, si vous avez une vieille artpad, utilisez gpm &lt; 1.18.1 et essayez : 
<BLOCKQUOTE><CODE>
<EM>killall gpm ; gpm -t wacom -m /dev/ttyS0</EM>
</CODE></BLOCKQUOTE>

et ça devrait marcher. </P>
<P> 
Si vous possédez une graphire, utilisez plutôt gpm > 1.18.1 et pour le mode relatif (comme une souris) : 
<BLOCKQUOTE><CODE>
<EM>killall gpm ; gpm -t wacom -o relative -m /dev/ttyS0</EM>
</CODE></BLOCKQUOTE>

pour le mode absolu (comme une tablette) :
<BLOCKQUOTE><CODE>
<EM>killall gpm ; gpm -t wacom -o absolute -m /dev/ttyS0</EM>
</CODE></BLOCKQUOTE>
</P>
<P>Bien sûr, vous n'aurez que les boutons et le mouvement, la pression et la sensibilité ne sont pas implémentées parce qu'elles ne sont pas utiles dans les éditeurs de texte. <BR> 
Il n'y a pas de support pour les boutons de fonction d'ultrapad et la roulette de graphire. </P>

<P>Si vous utilisez gpm et XFree86, il se peut que vous ayez des problèmes car normalement un périphérique peut être utilisé par un seul programme à la fois. 
Pour cela, il y a deux solutions : </P>

<P>
<UL>
<LI>Le mode repeater de gpm. 
Si vous lancez gpm avec l'option &quot;-R protocol&quot;, cela balancera toutes les données qu'il contient dans le périphérique /dev/gpmdata. Ainsi, si vous avez une souris type ps/2 vous lancez gpm comme ça : 
<EM>gpm -t ps2 -Rmman</EM>
et gpm capture les données de la souris ps/2 et essaie de les traduire en un paquet mman, qui sera dirigé vers  /dev/gpmdata. 
Depuis gpm 1.18.1, les protocoles dans lesquels gpm traduit sont marqués d'une astérisque dans la première colonne. Une fois de plus, faite un 
<EM>gpm -t help</EM> 
pour obtenir la liste. 

<P>Si vous ne voulez pas de traductions et que vous ne voulez que les données octet par octet, tapez : 
<EM>gpm -t ps2 -R raw</EM>
. 
Vous pouvez ensuite demander à XFree d'utiliser ce second périphérique en ajoutant la ligne 
<EM>Device      "/dev/gpmdata"</EM>
dans XF86Config dans la section pointeur ou dans la section XInput. </P>


</LI>
<LI>Si vous utilisez startx, vous pouvez le modifier avec 
<EM>gpm -k</EM>
avant que le serveur X ne soit lancé. Cette option tue un gpm lancé. </LI>
</UL>
</P>

<H2><A NAME="s5">5. Tablettes sous XFree</A></H2>

<P>
<A NAME="_Toc465765702"></A> </P>

<H2><A NAME="ss5.1">5.1 Version de XFree requise</A>
</H2>


<P>
<A NAME="_Toc465765703"></A> 
Il faut au moins  
<A HREF="#_xfree">XFree</A>
la version 3.3.3.1 car elle a développé le support de XInput, le deuxième bouton fonctionne et il n'y a plus l'effet bloquant de la souris.</P>

<P>Si vous devez utiliser une version antérieure, Xinput est supporté depuis la 3.1.2.d.</P>

<P>Le support de XInput dans XFree est configuré dans un fichier appelé XF86Config. Dans la plupart des cas, ce fichier est placé dans /etc ou dans /etc/X11. 
Je vais présenter une très courte section de configuration et expliquer ce qui peut être changé et pourquoi.</P>

<H2><A NAME="ss5.2">5.2 Une partie de XF86Config</A>
</H2>

<P>
<A NAME="_Toc465765705"></A> 
<BLOCKQUOTE><CODE>
<PRE>
Section "Module"
# Wacom Device Driver
Load "xf86Wacom.so"
EndSection

Section "XInput"
# Settings for Wacom pen
  SubSection "WacomStylus"    # type of input device
    Port "/dev/ttyS0"         # Serial Port
    DeviceName "Pen1"         # Name, choose it free
    Baudrate 9600             # Usable only for intuos
    Mode Absolute             # Map Tablet Area to Screen
    AlwaysCore                # See text
    HistorySize 200           # Buffer size for motion events
  EndSubSection
EndSection
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="ss5.3">5.3 Section Module</A>
</H2>


<P>
<A NAME="_Toc465765706"></A> 
XFree supporte XInput grâce à l'utilisation de modules. Le module pour Wacom s'appelle 
<A HREF="#_driverlepied">xf86Wacom.so</A>.
Il se place dans la section &quot;Module&quot; et ne doit apparaître qu'une seule fois par fichier XF86Config. </P>

<H2><A NAME="ss5.4">5.4 Différents types de dispositifs</A>
</H2>

<P>
<A NAME="_Toc465765707"></A> 
Un dispositif peut être :
<UL>
<LI>La pointe de votre crayon ;</LI>
<LI>La gomme de votre crayon ;</LI>
<LI>Une souris comme le "lens cursor", la souris 4d ou la souris graphire de chez Wacom ; </LI>
<LI>l'aérographe.</LI>
</UL>
</P>
<P>Les produits pentpartner et graphire ne reconnaissent que le type de dispositif mais ne peuvent pas les distinguer. Par exemple, vous ne pouvez pas utilisez deux crayons différents, un configuré en rouge et l'autre configuré en bleu ; tout ce que diront ces produits c'est : "J'ai reconnu une pointe de crayon", ou "J'ai trouvé une gomme", ou "J'ai trouvé une souris".  </P>

<P>XInput décrit les types de dispositifs aux périphériques. Ces dispositifs sont ensuite spécifiés dans XF86Config comme une sous-section de la section XInput : 
<UL>
<LI><CODE>WacomStylus</CODE> Pointe d'un stylo ou aérographe.</LI>
<LI><CODE>WacomEraser</CODE> Gomme d'un stylo ou aérographe.</LI>
<LI><CODE>WacomCursor</CODE> Souris, par exemple souris graphire, "lens cursor", souris 4d.</LI>
</UL>
</P>


<H2><A NAME="ss5.5">5.5 Noms de périphériques</A>
</H2>

<P>
<A NAME="_Toc465765708"></A> 
Vous devez donner un nom à chaque périphérique configuré (vous pouvez choisir n'importe quel nom). Ce nom sera ensuite utilisé dans votre logiciel pour communiquer avec ce dispositif. </P>

<H2><A NAME="ss5.6">5.6 Port</A>
</H2>

<P>
<A NAME="_Toc465765709"></A> 
XInput doit connaître le port série où se trouve votre tablette. Cela me permet d'utiliser deux tablettes différentes en même temps, par exemple une graphire connectée à /dev/ttyS0 et une penpartner connectée à /dev/ttyS1.</P>

<H2><A NAME="ss5.7">5.7 Les niveaux de déboggage (DebugLevel)</A>
</H2>

<P>
<A NAME="_Toc465765710"></A> 
Ceci contrôle comment le driver Wacom fonctionne. Le niveau va de 0 à 10. Si cette spécification n'est pas indiquée, le DebugDevel 0 est utilisé, ce qui représente le niveau le plus bas. </P>

<P><B>Exemple :</B>
<BLOCKQUOTE><CODE>
<PRE>
SubSection "WacomStylus" # Pen
  DeviceName "PenRed"    # Name, choose it free
  ...
  DebugLevel 10          # be very verbose
  ...
EndSubSection
</PRE>
</CODE></BLOCKQUOTE>
</P>


<H2><A NAME="ss5.8">5.8 Numéro de série (séries intuos seulement)</A>
</H2>

<P>
<A NAME="_Toc465765711"></A> 
Le produit intuos est plus compétent que les produits penpartner et graphire car il peut distinguer plusieurs dispositifs en même temps. Cela signifie qu'il est maintenant possible d'utiliser deux crayons (un configuré en rouge et l'autre en bleu). Comme on l'a vu, l'utilisation de dispositifs (pointe, gomme, aérographe, souris) n'est pas assez documenté pour manipuler des stylos différents. Cependant, chaque dispositif intuos, que ce soit un stylo, une souris ou autre, a un numéro de série que l'on spécifie à XInput pour savoir ce qui est utilisé. 
Voici la section de configuration :   </P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
Section "XInput"
  SubSection "WacomStylus" # Pen
    DeviceName "PenRed"    # Name, choose it free
    ...
    Serial 2609917443      # Serial Number of that device
    ...
  EndSubSection
  SubSection "WacomStylus" # another Pen
    DeviceName "PenBlue"   # Name, choose it free
    ...
    Serial 2609918664      # Serial Number of that device
    ...
  EndSubSection
EndSection
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Notez que les dispositifs combinés comme les stylos ont seulement un numéro de série. 
Le driver utilise ce numéro de série pour reconnaître un stylo spécifique et le type de dispositif pour distinguer la pointe de ce stylo de sa gomme. </P>



<H3><A NAME="_Toc465765712"></A> Comment trouver le numéro de série d'un dispositif</H3>

<P>
<OL>
<LI>Configurer le DebugLevel à 6</LI>
<LI>Lancer le serveur X en tapant  
<EM>X 2&gt;t</EM></LI>
<LI>Passer tous les dispositifs (pointe, gomme...) sur la tablette en les notant dans l'ordre où ils sont passés</LI>
<LI>Tuer le serveur X (Ctrl + Alt + Backspace)</LI>
<LI>Faites un 
<EM>grep serial_num t</EM></LI>
</OL>
</P>
<P>Vous devriez obtenir la liste de vos différents numéros de série. </P>



<H3><A NAME="_Toc465765713"></A> Numéro de série - exemple de résultat obtenu</H3>

<P>
<BLOCKQUOTE><CODE>
<PRE>
BEGIN xf86WcmProc dev=0x8354d60 priv=0x833e3f0 type=stylus flags=9 what=1
xf86WcmProc pWcm=0x8354d60 what=ON
END xf86WcmProc Success what=1 dev=0x8354d60 priv=0x833e3f0
device_id=0x96 serial_num=2595227137 type=cursor
[cursor] abs prox=false x=0 y=0 z=0 button=false buttons=0
</PRE>
</CODE></BLOCKQUOTE>

(le numéro de série est à la ligne 4, 2e block).</P>


<H2><A NAME="ss5.9">5.9 Mode absolu, mode relatif</A>
</H2>

<P>
<A NAME="_Toc465765714"></A> 
Si vous configurez un dispositif en mode absolu, cela signifie que la surface active de la tablette représente votre écran. Chaque fois que vous pointez un point sur la tablette avec un dispositif absolu, votre pointeur de souris apparaîtra au même point sur votre écran. </P>

<P>Si vous avez configuré le dispositif en mode relatif, le comportement de votre souris sera plus intuitif, c'est-à-dire que si vous décollez la souris de la tablette, la bougez et que vous la remettez, le pointeur de souris n'aura (normalement) pas bougé. </P>

<P><B>Exemple :</B><BR>
Mode absolu</P>

<H2><A NAME="ss5.10">5.10 Pointeur en modes étendu, natif ou "AlwaysCore"</A>
</H2>


<P>
<A NAME="_Toc465765715"></A> 
XFree connait deux pointeurs : un avec seulement les caractéristiques standards (boutons, mouvements), qui est utilisé pour sélectionner les menus, du texte ou pour cliquer sur des boutons. Ceci est le <EM>pointeur natif</EM> (Core device). </P>

<P>L'autre pointeur est utilisé par des applications qui veulent plus d'informations, comme la pression ou l'inclinaison. </P>
<P><BR>Ceci est le pointeur étendu (Extension device).</P>
<P>Avec la version 3.3.3.1, l'expression "AlwaysCore" indique au driver qu'il doit envoyer les deux types d'événements. </P>
<P>Si vous ne spécifiez pas "AlwaysCore" dans votre XF86Config, alors le pointeur est initialement utilisé comme pointeur étendu, c'est-à-dire qu'il n'est utilisable qu'avec des applications et que vous ne pouvez pas l'utiliser pour sélectionner des menus dans votre gestionnaire de fenêtre.  </P>

<P>Sinon (si "AlwaysCore" est spécifié), votre pointeur réagit comme un pointeur natif (en plus de la souris) et donne des informations sur la pression et l'inclinaison aux applications qui ouvrent le pointeur en mode étendu.</P>

<P>Vous pouvez configurer deux pointeurs logiques, un en mode natif et un en mode étendu, pour un même pointeur physique. <BR>
Pour ce faire, tapez tout simplement deux sections identiques, seule la désignation du DeviceName doit changer, puis spécifiez "AlwaysCore" dans la dernière section seulement.   </P>

<P><B>Exemple :</B><BR>
AlwaysCore</P>

<H2><A NAME="ss5.11">5.11 La taille de l'historique (HistorySize)</A>
</H2>


<P>
<A NAME="_Toc465765716"></A> 
Ceci configure la taille du buffer qui est utilisé pour le cache des mouvements. </P>


<H2><A NAME="ss5.12">5.12 Dissimulation (Suppress)</A>
</H2>


<P>
<A NAME="_Toc465765717"></A> 
Ceci spécifie de combien d'unités le dispositif doit bouger avant que le driver bouge le pointeur. 
Ce peut être nécessaire quand de grandes résolutions sont utilisées.  </P>

<P><B>Exemple :</B><BR>
Suppress 6</P>


<H2><A NAME="ss5.13">5.13 Le mode inclinaison (intuos seulement) (Tilt Mode)</A>
</H2>


<P>
<A NAME="_Toc465765718"></A> 
Le mode inclinaison permet l'envoi d'informations sur l'inclinaison pour les pointeurs intuos. 
Si cette déclaration est omise, seule l'information sur la pression est transmise.  </P>



<H2><A NAME="ss5.14">5.14 Les spécifications TopX, TopY, BottomX, BottomY </A>
</H2>


<P>
<A NAME="_Toc465765719"></A> 
Ces quatre spécifications permettent de réduire la surface active de la tablette. Mon énorme tablette intuos A4, par exemple, est tellement grande que l'on ne peut pas l'utiliser pour un travail de peinture car les passages du stylo sont trop longs. J'utilise donc ces quatre spécifications pour indiquer au driver que l'écran sera représenté sur le quart en bas à gauche de la tablette. <BR>
Il est possible de définir plus d'une surface active sur la même tablette : 
définissez autant de sous sections que vous avez besoin avec la même spécification du Port mais avec des spécifications Top, Bottom... différents, ainsi que les noms de périphériques.
Ceci définit de multiples pointeurs logiques ayant chacun leurs limites individuelles. 
De même, vous pouvez utiliser un pointeur en mode absolu et un autre en mode relatif. </P>

<P><B>Exemple :</B>
<BLOCKQUOTE><CODE>
<PRE>
TopX        0 #coordonnees du coin en haut a gauche
TopY     5000
BottomX  5000 #coordonnees du coin en bas a droite
BottomY 10000
</PRE>
</CODE></BLOCKQUOTE>
</P>


<H3>Obtenir les valeurs X,Y maximales, la configuration courante et la résolution</H3>

<P>Si vous utilisez les quatre spécifications ci-avant, vous voulez parfois faire des calculs sur la taille et la position d'un rectangle qui doit être défini, et souvent les coordonnées maximales de la tablette et la résolution sont utiles. Pour obtenir ces valeurs, lancer votre serveur : 
<EM>X 2&gt;t</EM>.
Tuer le serveur X (Ctrl+Alt+Backspace)
et faites un 
<EM>grep &quot;X=&quot; t</EM>
. Vous devriez récupérer les valeurs en question.</P>


<H3>Obtenir la résolution - exemple de résultat </H3>

<P>
<BLOCKQUOTE><CODE>
<PRE>
(--) Wacom IV tablet maximum X=5103 maximum Y=3711 X 
     resolution=1000 Y resolution=1000 suppress=6
(--) Wacom tablet top X=0 top Y=0 bottom X=5103 bottom Y=3711
(--) Wacom tablet top X=0 top Y=0 bottom X=5103 bottom Y=3711
(--) Wacom tablet top X=0 top Y=0 bottom X=5103 bottom Y=3711
</PRE>
</CODE></BLOCKQUOTE>
</P>



<H2><A NAME="ss5.15">5.15 Conservation de la forme</A>
</H2>


<P>
<A NAME="_Toc465765720"></A> 
Cette option utilise les spécifications TopX, TopY (ou leurs valeurs par défaut, si rien n'est indiqué) et ajuste les valeurs BottomX et BottomY, ainsi :</P>
<P>
<UL>
<LI>La proportion hauteur / largeur de l'écran est la même que pour la tablette ;</LI>
<LI>la surface active commençant à HautX, HautY de la tablette est aussi grande que cela peut l'être avec les conditions ci-avant. </LI>
</UL>
</P>

<P>Les spécifications BottomX, BottomY sont ignorées, car ces valeurs seront calculées. </P>



<H2><A NAME="ss5.16">5.16 Seuil de pression</A>
</H2>

<P>Ceci est disponible depuis la version alpha 16 et est utilisé pour contrôler la pression minimum requise pour détecter qu'un outil est pressé sur la tablette. Cela fonctionne avec les gammes intuos et graphire. Notez que la valeur entière doit être codée comme une chaîne de caractère, contrairement à toutes les autres valeurs entières. </P>

<P><B>Exemple :</B>
<BLOCKQUOTE><CODE>
<PRE>
Threshold "5"
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="s6">6. Changer la configuration avec un serveur X lancé</A></H2>


<P>
<A NAME="_Toc465765721"></A> </P>
<H2><A NAME="ss6.1">6.1 Configurer The Gimp pour utiliser les périphériques XInput</A>
</H2>


<P>
<A NAME="_Toc465765722"></A> 
<A HREF="#_gimp">Gimp</A>
a été compilé avec le support XInput depuis la version 1.1.x.</P>
<P>Gimp doit connaître les périphériques qu'il peut utiliser et dans quel mode. Vous devez ouvrir la boite de dialogue 
<EM>Fichier/Dialogues/Périphériques d'Acquisition </EM>
pour le configurer. Vous trouverez deux listes déroulantes en haut de cette fenêtre appelée <EM>Périphérique</EM> et <EM>Mode</EM>. Choisissez le périphérique à configurer dans la liste des
<EM>Périphériques</EM>
et choisissez un mode dans la liste
<EM>Mode</EM>
.</P>
<P>Les modes sont :</P>
<P>
<UL>
<LI>désactivé (disabled) : Gimp n'utilise pas ce périphérique ;</LI>
<LI>fenêtre (window) : Gimp utilise ce périphérique. (Le curseur est dessiné par l'application) ;</LI>
<LI>écran (screen) : Gimp utilise ce périphérique. (Le curseur est dessiné par le serveur X). </LI>
</UL>
</P>

<P>Si vous avez deux curseurs liés à votre périphérique, vous avez deux solutions : </P>
<P>
<UL>
<LI>Utilisez le mode écran mais il se peut que vous perdiez les curseurs spéciaux de Gimp ; si tel est le cas, tous les curseurs seront remplacés par celui du stylo.  </LI>
<LI>Configurez deux périphériques différents dans le fichier XF86Config, un
<EM>AlwaysCore</EM>
et un autre différent. Dites à Gimp d'utiliser le dernier en mode fenêtre. Si vous le faites et avez une des quatres spécifications 
<EM>TopX, TopY, BottomX, BottomY</EM>
dans votre XF86Config, faites attention d'utiliser les mêmes ajustements pour ces spécifications dans les deux périphériques logiques. 
Si vous ne le faites pas, tout est confus car le serveur X dessine le curseur d'un périphérique tandis que l'autre est actif. Ceci aura pour effet d'afficher un curseur, très loin du point d'action (hotspot).  </LI>
</UL>
</P>

<P>Sous les deux listes déroulantes, se trouve un tableau avec deux registres 
<EM>Axes</EM> et <EM>Touches</EM>.
<EM>Axes</EM> assigne un axe a une fonction, ce n'est généralement pas nécessaire de le changer. Mais dans le cas d'un peripherique tactile construit dans une tablette qui bouge a 90 degres, vous pourrez echanger les axes x et y. </P>

<P>Certaines tablettes ont des touches programmables permettant d'appeler des fonctions souvent utilisées. La 
<A NAME="_macrokeys"></A>  partie <EM>Touches</EM> vous permet d'associer un caractere à une touche de fonction. Par exemple, vous pouvez associer Ctrl+Shift+R a une touche de fonction. Si vous activez cette touche, elle remplace Ctrl+Shift+R. <BR>
Le driver actuel de Wacom supporte seulement les touches de fonction de la serie ultrapad et la partie macro des produits intuos n'est pas encore utilisable.</P>
<P>Maintenant, nous allons vois commment les peripheriques peuvent être utilisés. Ouvrez la boite de dialogue dans <EM>Fichier/Dialogues/Device Status</EM>. Ouvrez une image.</P>
<P>Vous configurez chaque peripherique les uns indépendemment des autres dans Gimp.</P>
<P>Si vous utilisez le curseur avec plusieurs peripheriques dans la fenetre où se trouve l'image, vous verrez que les périphériques de la boite de dialogue Device Status changent. Si vous choisissez un outil, pinceau, couches ou couleur avec un périphérique, une fois encore les changements sont visibles dans la boite de dialogue. Vous pouvez sauvegarder les parametres de la boite de dialogue Status, pour qu'ils soient restorés a la prochaine session. </P>


<H2><A NAME="ss6.2">6.2 The Switch Device</A>
</H2>


<P>
<A NAME="_Toc465765723"></A> 
C'est un périphérique spécial toujours présent. Il génère un événement chaque fois qu'un nouveau périphérique devient un pointeur natif. Cela s'appelle &quot;axes&quot;, sa valeur est l'identificateur du périphérique de pointage natif. Je ne sais pas comment un utilisateur peut l'utiliser, c'est principalement utile pour une usage interne.</P>

<H2><A NAME="ss6.3">6.3 Boutons</A>
</H2>


<P>
<A NAME="_Toc465765724"></A> 
Les boutons des périphériques sont aussi différents que les périphériques le sont : <BR>
Un stylo a au moins une pointe, mais il peut avoir un ou deux côtés et une gomme. Une souris peut avoir jusqu'a 32 boutons (mais habituellement 3).Les boutons sont numerotés de 1 au nombre de boutons. Avec les deux prochaines "astuces" vous pouvez changer cette numerotation.</P>

<H2><A NAME="ss6.4">6.4 Bouton configuré avec xmodmap pour les périphériques en mode natif</A>
</H2>


<P>
<A NAME="_Toc465765725"></A> 
xmodmap ne change que le pointeur natif. Comme il n'y a qu'un pointeur natif a la fois, il ne fait pas de différence entre les périphériques physiques pouvant devenir un pointeur natif. Pour le moment, oublions tout ce qu'on a dit sur XInput et pensez au gaucher qui veut simplement échanger les boutons gauche et droit de la souris. Vous allez exécuter <EM>xmodmap -pp</EM> pour voir quel est le pointeur natif courant. Vous allez obtenir le tableau suivant : 
<BLOCKQUOTE><CODE>
<PRE>
Physical        Button
Button          Code
1              1      # ( Left   Button )
2              2      # ( Right  Button )
3              3      # ( Middle Button )
</PRE>
</CODE></BLOCKQUOTE>
</P>

<P>Pour échanger les boutons, tapez <EM>xmodmap -e &quot;pointer = 2 1 3&quot;</EM> et pour revenir a l'état d'origine <EM>xmodmap -e &quot;pointer = default&quot;</EM>. Ceci marche avec chaque périphérique avec au moins 2 boutons. Notez que l'expression <EM>&quot;pointer = x x x&quot;</EM> doit être accompagnée de guillemets pour éviter que cela soit changé par le shell.</P>


<H2><A NAME="ss6.5">6.5 Bouton configuré avec xinput pour les périphériques en mode extension</A>
</H2>


<P>
<A NAME="_Toc465765726"></A> 
Revenons a XInput. Si vous utilisez Gimp, vous voulez sans doute changer la configuration du bouton pour chaque périphérique séparément (échanger les deux côtés du crayon). Frederic Lepied ecrit un utilitaire, appelé 
<A HREF="#_XInput">xinput</A>.</P>
<P>Pour échanger les deux côtés, faites un <EM>xinput list</EM> pour avoir la liste des peripheriques et leur configuration actuelle. L'echange est fait avec <EM>xinput set-button-map Pen1 1 3 2</EM> ou <EM>Pen1</EM> est le périphérique à changer.</P>
<P>Lancez avec XFree 3.3.2, cela marche aussi avec les périphériques configurés avec <EM>AlwaysCore</EM> dans XF86Config.</P>

<H2><A NAME="ss6.6">6.6 xsetmode - changer le mode absolu / relatif</A>
</H2>


<P>
<A NAME="_Toc465765727"></A> </P>

<P>Avec xsetmode vous pouvez changer le mode d'un périphérique entre absolu et relatif.</P>
<P><B>Exemple :</B><BR>
<EM>xsetmode GraphireMouse ABSOLUTE</EM>
.</P>


<H2><A NAME="ss6.7">6.7 xsetpointer - configure le peripherique natif par défaut </A>
</H2>


<P>
<A NAME="_Toc465765728"></A> 
Si aucun des périphériques n'est configuré en <EM>AlwaysCore</EM> et que vous voulez en configurer un, utilisez xsetpointer.</P>
<P>Faites un <EM>xsetpointer Devicename</EM>. 
L'ancien périphérique natif (souvent une souris) n'est plus utilisable et celui specifié sera active. Par exemple, on peut configurer une souris graphire en périphérique natif standard avec un XFree lancé.</P>
<P><EM>xsetpointer -l</EM> liste tous les peripheriques et le mode dans lequel ils sont. </P>

<H2><A NAME="ss6.8">6.8 Touches</A>
</H2>

<P>
<A NAME="_Toc465765729"></A> 
Certains périphériques ont les boutons ou pads programmables pour lesquels un scancode ou une chaine peuvent etre associés. Cela ne fonctionne qu'avec des périphériques en mode extension et est fait pour l'application dans laquelle vous voulez utiliser ces touches. </P>
<P><EM>xinput -l</EM> donne des informations à propos du numéros des touches et autre comme le premier scancode. </P>


<H2><A NAME="ss6.9">6.9 Utilitaires pour utiliser plus d'une tablette </A>
</H2>


<P>
<A NAME="_Toc465765730"></A> 
Je possède trois tablettes Wacom et je les utilise sur mon portable. Quand aucune tablette n'est connectée et que je lance le mode X, je dois attendre longtemps jusqu'à ce que le driver abandonne. Si xdm est utilisé, cela augmente le nombre d'essais.</P>
<P>J'ai écrit deux utilitaires qui devrait faciliter ceci : </P>
<P>
<UL>
<LI>Le script shell <B>sx</B> pour ceux qui utilisent startx.
sx utilise un joli menu permettant à l'utilisateur de choisir :
<UL>
<LI>un des 10 peripheriques (tablette, joystick...) ;</LI>
<LI>pour les portables, l'écran a utiliser (interne ou externe) ;</LI>
<LI>le gestionnaire de fenêtre à utiliser.</LI>
</UL>



</LI>
<LI>La petite application écrite en gtk <B>xinput-chooser</B> pour ceux qui utilisent xdm.
xinput-chooser utilise un menu quand l'écran de connexion xdm s'affiche, où une parmi les 10 configurations peut être choisie.</LI>
</UL>
</P>

<P>Ceci est basé sur le fait qu'un fichier XF86Config est séparé en au moins un fichier XF86Config.bare, qui contient les informations communes à toutes les configurations et de nombreux exemples, chacun d'eux présentant une information spéciale d'une configuration particulière. </P>
<P>Les deux utilitaires sont mis ensemble pour une configuration qui marche. </P>
<P>Vous pouvez télécharger ce paquet à l'adresse 
<A HREF="http://www.runkeledv.de/download">http://www.runkeledv.de/download</A>, il se nomme xinput_chooser_sr.</P>


<H2><A NAME="s7">7. FAQ XFree - problèmes et questions</A></H2>

<P>
<A NAME="_xfreefaq"></A> </P>

<H2><A NAME="ss7.1">7.1 Gnome et Gimp ne travaillent qu'avec une souris normale, sans la pression, ni l'inclinaison. La boîte de dialogue des périphériques d'entrée de Gimp indique  &quot;No input devices&quot; ou  &quot;Pas de périphérique d'entrée&quot;. </A>
</H2>

<P>Il semble que vous n'avez pas compilé votre gtk avec le support XInput. 
Recompilez gtk et utilisez <EM>./configure --with-xinput=xfree</EM> pour compiler le Makefile, puis faites un <EM>make &amp;&amp; make install</EM>. Enfin, recompilez votre Gimp pour qu'il utilise ce gtk étendu. </P>

<H2><A NAME="ss7.2">7.2 Est-ce que la roulette de la souris (curseur) est supportée ? </A>
</H2>

<P>Oui, cela génère les événements bouton 4 et bouton 5.</P>

<H2><A NAME="ss7.3">7.3 Comment puis-je trouver le numéro de série intuos de mon outil ?</A>
</H2>

<P>Lisez la section à propos des 
<A HREF="#_Toc465765712">Numéros de série</A>. </P>

<H2><A NAME="ss7.4">7.4 Comment puis-je changer l'utilisation des boutons de mon outil ?</A>
</H2>

<P>Reportez vous à la section à propos des 
<A HREF="#_Toc465765724">boutons</A>.</P>

<H2><A NAME="ss7.5">7.5 Comment puis-je utiliser des macros sur intuos/artpad/ultrapad ?</A>
</H2>

<P>Désolé, vous ne pouvez pas utiliser les macros de l'intuos. <BR>
Seules les macros artpad/ultrapad fonctionnent. 
Lisez la section à propos des 
<A HREF="#_macrokeys">Clés de Gimp</A>.</P>

<H2><A NAME="ss7.6">7.6 Est-ce possible de définir plusieurs surfaces actives sur la même tablette ?</A>
</H2>

<P>Oui, lisez la section à propos des 
<A HREF="#_Toc465765719">Spécifications Haut...</A></P>

<H2><A NAME="ss7.7">7.7 Puis-je utiliser plus d'une tablette en même temps ?</A>
</H2>

<P>Oui, lisez la section à propos des 
<A HREF="#_Toc465765709">Spécification de port</A>.</P>

<H2><A NAME="s8">8. FAQ Gpm - problèmes et questions</A></H2>

<P>
<A NAME="_gpmfaq"></A> </P>

<H2><A NAME="ss8.1">8.1 Les programmes NCurses ne supportent que couper / coller avec mon nouveau gpm </A>
</H2>

<P>Vous avez probablement mélangé un nouveau gpm avec une ancienne bibliothèque gpm,  
ou vous utilisez un ancien client qui cherche la socket gpmctl dans /var/run au lieu de /dev. 
Dans le dernier cas, vous avez deux options : récupérer de nouveaux clients et les recompiler ou changer gpm.h pour qu'il utilise /var/run au lieu de /dev et recompiler gpm et libgpm. </P>

<P>  </P>

<H2><A NAME="s9">9. Plus d'informations / documents utilisés </A></H2>


<P>
<A NAME="_Toc465765731"></A> </P>

<P>gpm :<BR>
page de manuel gpm, FAQ gpm, code souce du fichier mice.c</P>
<P>XInput :<BR>
HOWTO XInput de Owen Taylor</P>
<P>XFree et Wacom :<BR>
page de manuel XF86Config</P>
<P>site de Frederic Lepied</P>
<P>beaucoup, beaucoup d'e-mails ...</P>
</BODY>
</HTML>
