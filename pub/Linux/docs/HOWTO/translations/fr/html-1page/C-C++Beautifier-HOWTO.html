<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
 <TITLE>Manuel de mise en forme de code C/C++</TITLE>
</HEAD>
<BODY>
<H1>Manuel de mise en forme de code C/C++</H1>

<H2>Al Dev (Alavoor Vasudevan) &lt;alavoor@yahoo.com&gt;<BR>
Traduction française de Robert Jacolin &lt;rjacolin@yahoo.fr&gt;<BR>
Relecture de Christophe Fergeau &lt;christophe.fergeau@ensimag.imag.fr&gt;<BR></H2>V 6.0, 1 août 2000
<HR>
<EM>Ce document vous aidera à mettre en forme (embellir) des programmes C/C++ pour qu'ils soient plus lisibles et conformes à vos standards de codage C/C++. Les informations présentes dans ce document s'appliquent à tous les systèmes d'exploitation existants - les systèmes d'exploitation GNU/Linux, MS DOS, Windows 95/NT, OS/2, IBM, tous les clones Unix comme Solaris, HPUX, AIX, SCO, Sinix, BSD, SCO, etc ... - et à tous les autres systèmes d'exploitation qui possèdent un compilateur "C" (ce qui veut dire presque tous les systèmes
d'exploitation de cette planète!).</EM>
<HR>
<H2><A NAME="s1">1. Introduction</A></H2>

<P>Les standards de codage pour le C/C++ ou d'autres langages sont utilisés
dans le but de rendre les programmes plus lisibles/compréhensibles par les
programmeurs. Pour cela, il existe des embellisseurs C/C++ (outils
de formatage). Le code formaté (embelli) augmente la <B>productivité</B>
des programmeurs de <B>100%</B>!!</P>
<P>Sur GNU/Linux/Unix, il existe des commandes appelées <B>"indent"</B> et <B>"cb"</B>. Référez-vous aux pages de manuel par 'man indent' et 'man cb'. Notez que
<B>indent</B> et <B>cb</B> fonctionnent uniquement pour les programmes "C".
Pour les programmes "C++", utilisez <B>"bcpp"</B>. Téléchargez ce programme
de mise en forme à partir des sites suivants :</P>
<P>
<UL>
<LI>C++ : le site de BCPP est à l'adresse
<A HREF="http://dickey.his.com/bcpp/bcpp.html">http://dickey.his.com/bcpp/bcpp.html</A>
ou sur 
<A HREF="http://www.clark.net/pub/dickey">http://www.clark.net/pub/dickey</A></LI>
<LI>C++ : le site ftp de BCPP est à l'adresse
<A HREF="ftp://dickey.his.com/bcpp/bcpp.tar.gz">ftp://dickey.his.com/bcpp/bcpp.tar.gz</A></LI>
<LI>C++ : 
<A HREF="http://www.consultix-inc.com/c++b.html">http://www.consultix-inc.com/c++b.html</A></LI>
<LI>C : 
<A HREF="http://www.chips.navy.mil/oasys/c/">http://www.chips.navy.mil/oasys/c/</A></LI>
</UL>

J'ai utilisé BCPP pour formater les programmes C++ et il m'a parfaitement
convenu. Vous préférerez peut-être essayer d'autres outils et utiliser celui
que vous apprécierez le plus.</P>
<P>BCPP a été écrit par 
<A HREF="mailto:steve@alpha.ocbbs.gen.nz">Steven De Toni</A></P>

<H2><A NAME="s2">2. Comment avoir confiance en un programme de mise en forme ??!!</A></H2>

<P>Pour être sur à 100%, vous devez utiliser une approche
<B>SCIENTIFIQUE</B> pour valider et avoir confiance en un programme
de mise en forme. La méthode décrite dans cette section permettra au
programme de mise en forme d'être agréé comme étant "vraiment fiable"
et sérieux.
Dans le but de vérifier qu'un programme de mise en forme comme <B>bcpp</B>,
<B>indent</B> ou <B>cb</B> ne provoque pas de dommage ou ne change pas
le code source d'entrée après formatage, vous pouvez utiliser le script shell
<A HREF="#verification">Programme de vérification</A> ou utiliser la
technique suivante :</P>
<P>Générez le code objet à partir du code source original en utilisant
le compilateur :</P>
<P>
<HR>
<PRE>
  g++ -c monprogramme.cpp
</PRE>
<HR>

Ici g++ est le compilateur C++ GNU. Le code objet monprogramme.o sera généré</P>
<P>Sauvez ce fichier :
<HR>
<PRE>
   mv monprogramme.o monprogramme_orig.o
</PRE>
<HR>
</P>
<P>Maintenant, lancez bcpp :
<HR>
<PRE>
   bcpp monprogramme.cpp
</PRE>
<HR>

Le fichier contenant le programme formaté monprogramme.cpp sera généré et le
fichier initial sera déplacé dans monprogramme.cpp.orig. Compilez le nouveau
fichier :
<HR>
<PRE>
   g++ -c monprogramme.cpp
</PRE>
<HR>

Maintenant utilisez la commande unix 'diff' pour comparer les 2 fichiers
objets :
<HR>
<PRE>
   diff monprogramme.o monprogramme_orig.o
</PRE>
<HR>

Les deux fichiers <B>DOIVENT ÊTRE IDENTIQUES</B>. Cette commande vérifie que bcpp
fonctionne parfaitement. Sous DOS ou sous Windows 95, vous
devrez utiliser les utilitaires 'diff' ou 'MKS' de Cygwin fournis sur le site de
<A HREF="http://www.cygnus.com">Cygnus</A>.
De plus, vous pouvez utiliser la sortie en assembleur à la place de la sortie
objet du compilateur. En faisant :
<HR>
<PRE>
    g++ -S monprogramme.cpp
</PRE>
<HR>

monprogramme.s sera créé. Vérifiez-le avec :</P>
<P>
<HR>
<PRE>
    diff monprogramme.s monprogramme_orig.s
</PRE>
<HR>

Cette étape vous garantit à 100% que votre précieux code source reste intact
et que bcpp fait UNIQUEMENT du formatage et NE change PAS ou n'endommage pas
votre code de quelque manière que ce soit. Cette méthode vous assure à 100 %
de sa qualité et une <B>GARANTIE</B> à vie ou à long terme
pour ces programmes de mise en forme comme 'bcpp', 'cb' ou 'indent'.</P>
<P>Il est fortement recommandé de faire ces deux étapes chaque fois que vous
lancerez un programme de mise en forme comme <B>bcpp</B>, <B>indent</B> ou 
<B>cb</B>.</P>

<H2><A NAME="s3">3. Embellisseurs pour d'autres langages</A></H2>

<P>Visitez les sites suivants pour obtenir des embellisseurs pour d'autres
langages comme HTML, SQL, Java, Perl, Fortran.</P>
<P>
<UL>
<LI> HTML : 
<A HREF="http://www.digital-mines.com/htb/">http://www.digital-mines.com/htb/</A></LI>
<LI> HTML : 
<A HREF="http://www.datacomm.ch/mwoog/software/perl/beautifier.html">http://www.datacomm.ch/mwoog/software/perl/beautifier.html</A></LI>
<LI> HTML : 
<A HREF="http://www.watson-net.com/free/perl/s_fhtml.asp">http://www.watson-net.com/free/perl/s_fhtml.asp</A></LI>
<LI> SQL : 
<A HREF="http://www.netbula.com/products/sqlb">http://www.netbula.com/products/sqlb</A></LI>
<LI> Java : 
<A HREF="http://home.wtal.de/software-solutions/jindent/frameset.html">http://home.wtal.de/software-solutions/jindent/frameset.html</A></LI>
<LI> Java JPretty : 
<A HREF="http://www.mmsindia.com/index.html">http://www.mmsindia.com/index.html</A> </LI>
<LI> Perl : 
<A HREF="http://www.consultix-inc.com/www.consultix-inc.com/talk.htm">http://www.consultix-inc.com/www.consultix-inc.com/talk.htm</A></LI>
<LI> Perl : 
<A HREF="http://www.consultix-inc.com/www.consultix-inc.com/perl_beautifier.html">http://www.consultix-inc.com/www.consultix-inc.com/perl_beautifier.html</A></LI>
<LI> Embellisseur Fortran  : 
<A HREF="http://www.aeem.iastate.edu/Fortran/tools.html">http://www.aeem.iastate.edu/Fortran/tools.html</A></LI>
<LI>C++ : Le site de BCPP est à l'adresse  
<A HREF="http://www.clark.net/pub/dickey/bcpp/bcpp.html">http://www.clark.net/pub/dickey/bcpp/bcpp.html</A></LI>
<LI>C++ : 
<A HREF="http://www.consultix-inc.com/www.consultix-inc.com/c++b.html">http://www.consultix-inc.com/www.consultix-inc.com/c++b.html</A></LI>
<LI>C : 
<A HREF="http://www.chips.navy.mil/oasys/c/">http://www.chips.navy.mil/oasys/c/</A></LI>
</UL>
</P>
<P>
<UL>
<LI>Livre blanc sur les embellisseurs : 
<A HREF="http://www.consultix-inc.com/www.consultix-inc.com/talk.htm">http://www.consultix-inc.com/www.consultix-inc.com/talk.htm</A></LI>
</UL>
</P>
<P>Pour présenter du code sous format HTML :</P>
<P>
<UL>
<LI>Présentation (C, C++, Java) en html : 
<A HREF="http://www.perlstudio.de/cbindex.html">http://www.perlstudio.de/cbindex.html</A></LI>
</UL>

Recherchez aussi dans les moteurs de recherches comme 
<A HREF="http://www.yahoo.com">http://www.yahoo.com</A>
ou 
<A HREF="http://www.lycos.com">http://www.lycos.com</A> et cherchez avec le mot-clé "embellisseur" (ou "beautifier" pour le terme anglais, NDT).</P>

<H2><A NAME="verification"></A> <A NAME="s4">4. Script de vérification</A> </H2>

<P>Ceci est un script pour le shell Korn pour vérifier les programmes de mise en forme.
Il a besoin de "pdksh*.rpm" à partir du cdrom 'contrib' de Linux. Sauvez ce fichier
en tant que fichier 'texte' et appliquez sur ce fichier la commande chmod a+rx.
Vous pouvez réécrire ce script shell en Perl pour pouvoir l'utiliser sous Windows
95/NT ou MSDOS. Enlevez les commentaires de la variable PRGM pour le faire pointer sur
<B>bcpp</B>, <B>cb</B> ou <B>indent</B>.</P>
<P>
<HR>
<PRE>
#!/bin/ksh

# Programme de vérification pour contrôler des embellisseurs C++ comme 'bcpp', 'indent' ou 'cb'
############################################################
# Copyright 
# Les droits d'auteurs sont sous les termes de la GNU/GPL.
# Auteur: Al Dev (Alavoor Vasudevan) alavoor@yahoo.com
# Traducteur : Robert Jacolin rjacolin@yahoo.fr
############################################################

check_beautify_now()
{
        # Efface tous les fichiers temporaires ...
        \rm -f ${TMP_FILE}
        \rm -f ${TMP_CPPFILE}*.*

        FNAME=$1
        if [ ! -f ${FNAME} ]; then
                print "\nErreur : Le fichier ${FNAME} n'existe pas!!. Arrêt immédiat ...."
                exit
        fi
        \cp  -f ${FNAME} ${TMP_CPPFILE}.cpp
        ${COMPILER} -c ${TMP_CPPFILE}.cpp
        if [ ! -f ${TMP_CPPFILE}.o ]; then
                print "Erreur Fatale : Impossible de compiler ${FNAME}. Arrêt immédiat ... "
                exit
        fi
        \mv -f ${TMP_CPPFILE}.o ${TMP_CPPFILE}_orig.o

        aa=`basename $PRGM`
        print "\nEn cours, vérification de $aa sur ${FNAME}"
        ${PRGM} ${TMP_CPPFILE}.cpp
        ${COMPILER} -c ${TMP_CPPFILE}.cpp
        \rm -f $TMP_FILE
        diff ${TMP_CPPFILE}.o ${TMP_CPPFILE}_orig.o 1> $TMP_FILE 2>> $TMP_FILE
        result=""
        result=`wc -c $TMP_FILE | awk '{print $1}' `
        if [ "$result" = "0" ]; then
                print "Succés!! La mise en forme de $aa fonctionne proprement!!\n"
        else
                print "Erreur Fatale : Quelque chose ne va pas!! La mise en forme ne fonctionne pas!!"
                exit
        fi
#       ${COMPILER} -S ${TMP_CPPFILE}.cpp
#       diff ${TMP_CPPFILE}.s ${TMP_CPPFILE}_orig.s

        # Efface tous les fichiers temporaires ....
        \rm -f ${TMP_FILE}
        \rm -f ${TMP_CPPFILE}*.*
}

########## La partie principale du programme commence ici ##################
#PRGM=/usr/bin/bcpp
#PRGM=/usr/bin/cb
PRGM=/usr/bin/indent
COMPILER=/usr/bin/g++

TMP_FILE=beautify.tmp
TMP_CPPFILE=beautify-tmp_cppfile

print -n "Entrez le nom du fichier C++ &lt;valeur par défaut *.cpp> : "
read ans
if [ "$ans" = "" -o "$ans" = " " ]; then
        ans="ALL"
else
        FILENAME=$ans
fi

# Efface tous les fichiers temporaires ....
\rm -f ${TMP_FILE}
\rm -f ${TMP_CPPFILE}*.*

if [ "$ans" != "ALL" ]; then
        check_beautify_now ${FILENAME}
else
        ls *.cpp |
        while read FILENAME 
        do
                check_beautify_now ${FILENAME}
        done
fi
</PRE>
<HR>
</P>
<H2><A NAME="s5">5. Des urls sur ce sujet</A></H2>

<P>Visitez les sites suivants en rapport avec le C, C++ :
<UL>
<LI> 
<A HREF="http://metalab.unc.edu/LDP/HOWTO/Vim-HOWTO.html">Editeur de texte en couleur Vim pour C++, C</A></LI>
<LI> 
<A HREF="http://metalab.unc.edu/LDP/HOWTO/C++Programming-HOWTO.html">Le manuel de programmation C++</A></LI>
<LI> 
<A HREF="http://metalab.unc.edu/LDP/HOWTO/CVS-HOWTO.html">Le manuel de CVS pour les programmes C++</A></LI>
<LI> Site principal de gâteries pour Linux sur 
<A HREF="http://www.aldev.8m.com">http://www.aldev.8m.com</A></LI>
<LI> Site miroir de gâteries pour Linux sur 
<A HREF="http://aldev.webjump.com">http://aldev.webjump.com</A></LI>
</UL>
</P>
<H2><A NAME="s6">6. Autres formats de ce document</A></H2>

<P>Ce document est publié dans 11 formats différents qui ont pour noms : DVI,
Postscript, Latex, Adobe Acrobat PDF, LyX, GNU-info, HTML, RTF (Rich Text
Format : Format de texte enrichi), texte simple, pages de manuel Unix et SGML.</P>
<P>
<UL>
<LI>Vous pouvez obtenir ce document comme une simple archive tar de fichiers HTML,
DVI, Postscript ou SGML (en anglais, NDT) sur
<A HREF="ftp://sunsite.unc.edu/pub/Linux/docs/HOWTO/other-formats/">ftp://sunsite.unc.edu/pub/Linux/docs/HOWTO/other-formats/</A>
</LI>
<LI>Le format texte est sur : 
<A HREF="ftp://sunsite.unc.edu/pub/Linux/docs/HOWTO">ftp://sunsite.unc.edu/pub/Linux/docs/HOWTO</A>
</LI>
<LI>Des traductions dans d'autres langues comme le français, l'allemand, l'espagnol,
le chinois, le japonais sont disponibles sur 
<A HREF="ftp://sunsite.unc.edu/pub/Linux/docs/HOWTO">ftp://sunsite.unc.edu/pub/Linux/docs/HOWTO</A>.

Toute aide que vous pouvez apporter pour des traductions dans d'autres langues
est la bienvenue.</LI>
</UL>

Le document a été écrit en utilisant un outil appelé "SGML-Tools" qui peut
être obtenu à partir du site 
<A HREF="http://www.sgmltools.com">http://www.sgmltools.com</A>.
Pour compiler les sources, vous devrez utiliser des commandes du genre :</P>
<P>
<UL>
<LI>sgml2html C-C++Beautifier-HOWTO.sgml     (pour générer des fichiers html)</LI>
<LI>sgml2rtf  C-C++Beautifier-HOWTO.sgml     (pour générer un fichier RTF)</LI>
<LI>sgml2latex C-C++Beautifier-HOWTO.sgml    (pour générer un fichier latex)</LI>
</UL>

Les documents Latex peuvent être convertis en fichier PDF simplement en
produisant du Postscript en utilisant <B>sgml2latex</B> (et dvips)
et en passant ce qui a été produit à la commande <B>distill</B> d'Acrobat
(
<A HREF="http://www.adobe.com">http://www.adobe.com</A>) comme suit :
<HR>
<PRE>
bash$ man sgml2latex
bash$ sgml2latex filename.sgml
bash$ man dvips
bash$ dvips -o filename.ps filename.dvi
bash$ distill filename.ps
bash$ man ghostscript
bash$ man ps2pdf
bash$ ps2pdf input.ps output.pdf
bash$ acroread output.pdf &amp;
</PRE>
<HR>

ou vous pouvez encore utiliser la commande <B>ps2pdf</B>.
ps2pdf fonctionne de façon analogue au
produit Acrobat Distiller d'Adobe et possède les mêmes fonctionnalités : il convertit les fichiers Postscript
en fichiers au format PDF (Portable Document Format, Format de Document Portable).
<B>ps2pdf</B> est  un petit script de commande (fichier
batch) qui invoque Ghostscript, en sélectionnant un "périphérique de sortie"
spécial appelé <B>pdfwrite</B>. Pour utiliser ps2pdf, le périphérique
pdfwrite doit être inclus dans le makefile lors de la compilation de Ghostscript ;
voir la documentation sur la compilation de Ghostscript pour plus de détails.</P>
<P>Ce document (version anglaise) est situé à :
<UL>
<LI> 
<A HREF="http://sunsite.unc.edu/LDP/HOWTO/C-C++Beautifier-HOWTO.html">http://sunsite.unc.edu/LDP/HOWTO/C-C++Beautifier-HOWTO.html</A></LI>
</UL>
</P>
<P>Vous pouvez aussi trouver ce document sur les sites miroirs suivant : </P>
<P>
<UL>
<LI> 
<A HREF="http://www.caldera.com/LDP/HOWTO/C-C++Beautifier-HOWTO.html">http://www.caldera.com/LDP/HOWTO/C-C++Beautifier-HOWTO.html</A></LI>
<LI> 
<A HREF="http://www.WGS.com/LDP/HOWTO/C-C++Beautifier-HOWTO.html">http://www.WGS.com/LDP/HOWTO/C-C++Beautifier-HOWTO.html</A></LI>
<LI> 
<A HREF="http://www.cc.gatech.edu/linux/LDP/HOWTO/C-C++Beautifier-HOWTO.html">http://www.cc.gatech.edu/linux/LDP/HOWTO/C-C++Beautifier-HOWTO.html</A></LI>
<LI> 
<A HREF="http://www.redhat.com/linux-info/ldp/HOWTO/C-C++Beautifier-HOWTO.html">http://www.redhat.com/linux-info/ldp/HOWTO/C-C++Beautifier-HOWTO.html</A>
</LI>
<LI> D'autres sites miroirs proches de vous (au sens de distance réseau) peuvent
être trouvé sur 
<A HREF="http://sunsite.unc.edu/LDP/hmirrors.html">http://sunsite.unc.edu/LDP/hmirrors.html</A>.
Choisissez un site et allez dans le répertoire /LDP/HOWTO/C-C++Beautifier-HOWTO.html.
</LI>
</UL>
</P>
<P>Pour visualiser un document au format DVI, utilisez le programme xdvi. Le
programme xdvi est situé dans le paquetage tetex-xdvi*.rpm dans la Linux
Redhat. Il peut être trouvé par l'intermédiaire des boutons de menu Panneau de Contrôle
(ControlPannel) | Applications (Applications) | Publications (Publishing) | TeX (TeX).</P>
<P>Pour lire un document dvi, utilisez la commande :
<BLOCKQUOTE><CODE>
<PRE>
        xdvi -geometry 80x90 howto.dvi
        man xdvi
</PRE>
</CODE></BLOCKQUOTE>

et changez la taille de la fenêtre avec la souris. Pour naviguer dans le
document, utiliser les touches fléchées, les touches de saut de page haut, saut de page bas, vous
pouvez aussi utiliser les lettres 'f', 'd', 'u', 'c', 'l', 'r', 'p', 'n' pour
vous déplacer vers le haut, le bas, au centre, à la page suivante, à la page précédente, etc.
Pour désactiver le mode expert, pressez 'x'.</P>
<P>Vous pouvez lire un fichier Postscript grâce au programme 'gv' (ghostview) ou
'ghostscript'. Le programme ghostscript est dans le paquetage ghostscript*.rpm
et le programme gv est dans le paquetage gv*.rpm dans la distribution linux
Redhat qui peut se trouver en utilisant les boutons du menu Panneau de Contrôle
(Control
panel) | Applications (Applications) | graphiques (Graphics). Le programme gv
est beaucoup plus facile à utiliser que ghostscript. Ghostscript et gv
existent aussi sous d'autres plate-formes comme OS/2, Windows 95 et NT. </P>
<P>
<UL>
<LI>Récupérez ghostscript pour Windows 95, OS/2 et pour tous les OS sur
<A HREF="http://www.cs.wisc.edu/~ghost">http://www.cs.wisc.edu/~ghost</A>.</LI>
</UL>

Pour lire un document postscript utilisez la commande :
<BLOCKQUOTE><CODE>
<PRE>
                gv howto.ps
                ghostscript howto.ps
</PRE>
</CODE></BLOCKQUOTE>

Vous pouvez lire un document au format HTML en utilisant Netscape Navigator, Microsoft
Internet Explorer, le navigateur Baron de Redhat ou le navigateur de votre choix
parmi les dizaines de navigateurs web existants.</P>
<P>Vous pouvez lire les documents latex ou Lyx générés en utilisant Lyx qui est une
interface graphique sous "X-Window" pour latex. </P>

<H2><A NAME="s7">7. Droits d'auteurs</A></H2>

<P>La licence du copyright est la licence GNU/GPL comme pour le LDP
(Linux Documentation Project, le projet de documentation de Linux). Le LDP
est un projet sous licence GNU/GPL. Les restrictions additionnelles sont :
vous devez laisser le nom de l'auteur, l'adresse email et cette note sur le
droit d'auteurs sur toutes les copies. Si vous faites un quelconque
changement ou addition dans ce document, vous devez alors prévenir tous
les auteurs de ce document.</P>
</BODY>
</HTML>
