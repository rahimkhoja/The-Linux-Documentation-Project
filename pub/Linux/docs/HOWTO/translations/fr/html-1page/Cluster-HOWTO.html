<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<meta name="generator" content=
"HTML Tidy for Linux (vers 6 November 2007), see www.w3.org">
<meta name="GENERATOR" content="LinuxDoc-Tools 0.9.21">
<title>Linux Cluster HOWTO</title>
</head>
<body>
<h1>Linux Cluster HOWTO</h1>
<h2>Ram Samudrala <code>(me@ram.org)</code></h2>
v1.1, June 17, 2003
<hr>
<em>Comment mettre en place un cluster de PC Linux pour le cacul
Haute Performance.</em>
<hr>
<h2><a name="s1">1. Introduction</a></h2>
<p>Ce document d&eacute;crit comment mettre en place un cluster de
PC sous Linux pour le calcul &agrave; haute performance (HPC) dont
j'ai eu besoin pour <a href="http://compbio.washington.edu">mes
recherches</a>.</p>
<p>Utilisez les informations ci-apr&egrave;s sous votre
enti&egrave;re reponsabilit&eacute;. Je d&eacute;cline toutes
reponsabilit&eacute;s pour tout incident qui pourrait survenir
apr&egrave;s avoir lu ce HOWTO. La derni&egrave;re version de ce
HOWTO sera toujours disponible &agrave; l'adresse <a href=
"http://www.ram.org/computing/linux/linux_cluster.html">http://www.ram.org/computing/linux/linux_cluster.html</a>.</p>
<p>A la diff&eacute;rence d'autres documentations qui parlent de la
mise en place de cluster de mani&egrave;re g&eacute;n&eacute;rale,
ceci est une description sp&eacute;cifique de la mani&egrave;re
dont notre laboratoire &agrave; install&eacute; le cluster, mais
aussi les aspects calculs, ainsi que les parties ordinateur de
bureau, portable et acc&egrave;s public.</p>
<p>Ceci est principalement fait pour un usage interne, mais j'ai
plac&eacute; ce document sur le web suite &agrave; la reception de
nombreux mails issuent de questions sur des newsfeed demandant ce
type d'information.</p>
<p>Actuellement, j'envisage la mise en place d'un cluster 64 bits,
je trouve qu'il y a un manque d'information sur la m&eacute;thode
&agrave; suivre pour assembler les composants pour former un noeud
qui fonctionne sous Linux et qui inclut, non seulement la
description du mat&eacute;riel, mais aussi du logiciel utile pour
arriver &agrave; un fonctionnement en production dans un
enviroennement de recherche.</p>
<p>Le but principal de ce HOWTO est de lister les types de
mat&eacute;riels qui fonctionnent bien ou mal avec Linux.</p>
<h2><a name="s2">2. Hardware</a></h2>
<p>Cette section couvre nos choix en mati&egrave;re de harware.
&agrave; part les points not&eacute;s dans la section des <a href=
"#known_hardware_issues">probl&egrave;mes rencontr&eacute;s</a> ,
tout ce qui est pr&eacute;sent&eacute; fonctionne
<i>r&eacute;ellement</i> bien.</p>
<p>L'installation du mat&eacute;riel est assez simple (les
particularit&eacute;es sont dans les notes), la plupart des
informations se trouvent dans les manuels. Pour chaque section, le
mat&eacute;riel est list&eacute; par ordre d'achat (le plus
r&eacute;cent est list&eacute; en premier).</p>
<h2><a name="ss2.1">2.1 Node hardware</a></h2>
<p>32 machines ont la configurations suivante:</p>
<ul>
<li>2 XEON 2.4GHZ 533FSB CPUs</li>
<li>Supermicro X5DPR-1G2 motherboard</li>
<li>2 512MB PC2100 DDR REG ECC RAM</li>
<li>1 40GB SEA 7200 HD</li>
<li>1 120GB SEA 7200 HD</li>
<li>Supermicro Slim 24X CDROM</li>
<li>CSE-812 400 C/B 1U case</li>
</ul>
<p>32 machines ont la configuration suivante:</p>
<ul>
<li>2 AMD Palamino MP XP 2000+ 1.67 GHz CPUs</li>
<li>Asus A7M266-D w/LAN Dual DDR motherboard</li>
<li>2 Kingston 512mb PC2100 DDR-266MHz REG ECC RAM</li>
<li>1 41 GB Maxtor 7200rpm ATA100 HD</li>
<li>1 120 GB Maxtor 5400rpm ATA100 HD</li>
<li>Asus CD-A520 52x CDROM</li>
<li>1.44mb floppy drive</li>
<li>ATI Expert 2000 Rage 128 32mb</li>
<li>IN-WIN P4 300ATX Mid Tower case</li>
<li>Enermax P4-430ATX power supply</li>
</ul>
<p>32 machines ont la configuration suivante:</p>
<ul>
<li>2 AMD Palamino MP XP 1800+ 1.53 GHz CPUs</li>
<li>Tyan S2460 Dual Socket-A/MP motherboard</li>
<li>Kingston 512mb PC2100 DDR-266MHz REG ECC RAM</li>
<li>1 20 GB Maxtor UDMA/100 7200rpm HD</li>
<li>1 120 GB Maxtor 5400rpm ATA100 HD</li>
<li>Asus CD-A520 52x CDROM</li>
<li>1.44mb floppy drive</li>
<li>ATI Expert 98 8mb AGP video card</li>
<li>IN-WIN P4 300ATX Mid Tower case</li>
<li>Intel PCI PRO-100 10/100Mbps network card</li>
<li>Enermax P4-430ATX power supply</li>
</ul>
<p>32 machines ont la configuration suivante:</p>
<ul>
<li>2 Pentium III 1 GHz Intel CPUs</li>
<li>Supermicro 370 DLE Dual PIII-FCPGA motherboard</li>
<li>2 256 MB 168-pin PC133 Registered ECC Micron RAM</li>
<li>1 20 GB Maxtor ATA/66 5400 RPM HD</li>
<li>1 40 GB Maxtor UDMA/100 7200 RPM HD</li>
<li>Asus CD-S500 50x CDROM</li>
<li>1.4 MB floppy drive</li>
<li>ATI Expert 98 8 MB PCI video card</li>
<li>IN-WIN P4 300ATX Mid Tower case</li>
</ul>
<h2><a name="ss2.2">2.2 Server hardware</a></h2>
<p>1 serveur pour utilisation externe (distribution des
syst&egrave;mes) avec la configuration suivante:</p>
<ul>
<li>2 AMD Palamino MP XP 2000+ 1.67 GHz CPUs</li>
<li>Asus A7M266-D w/LAN Dual DDR</li>
<li>4 Kingston 512mb PC2100 DDR-266MHz REG ECC RAM</li>
<li>Asus CD-A520 52x CDROM</li>
<li>1 41 GB Maxtor 7200rpm ATA100 HD</li>
<li>6 120 GB Maxtor 5400rpm ATA100 HD</li>
<li>lecteur de disquette 1.44Mo</li>
<li>ATI Expert 2000 Rage 128 32mb</li>
<li>IN-WIN P4 300ATX Mid Tower case</li>
<li>Enermax P4-430ATX power supply</li>
</ul>
<h2><a name="ss2.3">2.3 Desktop hardware</a></h2>
<p>1 PC desktop avec la configuration suivante:</p>
<ul>
<li>2 AMD XP 2600 MP</li>
<li>MSI K7D Master-L DUAL MS-6501 motherboard</li>
<li>4 1024MB PC2100 DDR REG ECC RAM</li>
<li>1 40GB SEA 7200 Maxtor harddisk</li>
<li>2 120GB SEA 7200 Maxtor hardidks</li>
<li>PIONEER DVR-AO5 IDE DVD-RW</li>
<li>1.44mb floppy drive</li>
<li>ATI Expert 2000 Rage 128 32mb video card</li>
<li>IN-WIN P4 300ATX Mid Tower case</li>
<li>Intel PCI PRO-100 10/100Mbps network card</li>
<li>450W ENERMAX P4-430ATX power supply</li>
<li>CREATIVE SB 128 5.1 PCI soundcard</li>
</ul>
<p>2 PC desktop avec la configuration suivante:</p>
<ul>
<li>2 AMD XP 2600 MP</li>
<li>MSI K7D Master-L DUAL MS-6501 motherboard</li>
<li>2 512MB PC2100 DDR REG ECC RAM</li>
<li>1 40GB SEA 7200 Maxtor harddisk</li>
<li>2 120GB SEA 7200 Maxtor hardidks</li>
<li>MSI 52X24X52X CR52-A2 CD-RW</li>
<li>1.44mb floppy drive</li>
<li>ATI Expert 2000 Rage 128 32mb video card</li>
<li>IN-WIN P4 300ATX Mid Tower case</li>
<li>Intel PCI PRO-100 10/100Mbps network card</li>
<li>450W ENERMAX P4-430ATX power supply</li>
<li>CREATIVE SB 128 5.1 PCI soundcard</li>
</ul>
<p>1 PC desktop avec la configuration suivante:</p>
<ul>
<li>2 AMD Palamino MP XP 2000+ 1.67 GHz CPUs</li>
<li>Asus A7M266-D w/LAN Dual DDR</li>
<li>2 Kingston 512mb PC2100 DDR-266MHz REG ECC RAM</li>
<li>Ricoh 32x12x10 CDRW/DVD Combo EIDE</li>
<li>1.44mb floppy drive</li>
<li>1 41 GB Maxtor 7200rpm ATA100 HD</li>
<li>1 120 GB Maxtor 5400rpm ATA100 HD</li>
<li>ATI Expert 2000 Rage 128 32mb video card</li>
<li>IN-WIN P4 300ATX Mid Tower case</li>
<li>Intel PCI PRO-100 10/100Mbps network card</li>
<li>Enermax P4-430ATX power supply</li>
</ul>
<p>1 PC desktop avec la configuration suivante:</p>
<ul>
<li>2 Intel Xeon 1.7 GHz 256K 400FS</li>
<li>Supermicro P4DCE Dual Xeon motherboard</li>
<li>4 256mb RAMBUS 184-Pin 800 MHz memory</li>
<li>2 120 GB Maxtor ATA/100 5400 RPM HD</li>
<li>1 60 GB Maxtor ATA/100 7200 RPM HD</li>
<li>52X Asus CD-A520 INT IDE CDROM</li>
<li>1.4 MB floppy drive</li>
<li>Leadtex 64 MB GF2 MX400 AGP</li>
<li>Creative SB LIVE Value PCI 5.1</li>
<li>Microsoft Natural Keyboard</li>
<li>Microsoft Intellimouse Explorer</li>
<li>Supermicro SC760 full-tower case with 400W PS</li>
</ul>
<p>2 PC desktop avec la configuration suivante:</p>
<ul>
<li>2 AMD K7 1.2g/266 MP Socket A CPU</li>
<li>Tyan S2462NG Dual Socket A motherboard</li>
<li>4 256mb PC2100 REG ECC DDR-266Mhz</li>
<li>3 40 GB Maxtor UDMA/100 7200 RPM HD</li>
<li>50X Asus CD-A520 INT IDE CDROM</li>
<li>1.4 MB floppy drive</li>
<li>Chaintech Geforce2 MX200 32mg AGP</li>
<li>Creative SB LIVE Value PCI</li>
<li>Microsoft Natural Keyboard</li>
<li>Microsoft Intellimouse Explorer</li>
<li>Full-tower case with 300W PS</li>
</ul>
<p>2 PC desktop avec la configuration suivante:</p>
<ul>
<li>2 Pentium III 1 GHz Intel CPUs</li>
<li>Supermicro 370 DLE Dual PIII-FCPGA motherboard</li>
<li>4 256 MB 168-pin PC133 Registered ECC Micron RAM</li>
<li>3 40 GB Maxtor UDMA/100 7200 RPM HD</li>
<li>Asus CD-S500 50x CDROM</li>
<li>1.4 MB floppy drive</li>
<li>Jaton Nvidia TNT2 32mb PCI</li>
<li>Creative SB LIVE Value PCI</li>
<li>Microsoft Natural Keyboard</li>
<li>Microsoft Intellimouse Explorer</li>
<li>Full-tower case with 300W PS</li>
</ul>
<p>2 PC desktop avec la configuration suivante:</p>
<ul>
<li>2 Pentium III 1 GHz Intel CPUs</li>
<li>Supermicro 370 DLE Dual PIII-FCPGA motherboard</li>
<li>4 256 MB 168-pin PC133 Registered ECC Micron RAM</li>
<li>3 40 GB Maxtor UDMA/100 7200 RPM HD</li>
<li>Mitsumi 8x/4x/32x CDRW</li>
<li>1.4 MB floppy drive</li>
<li>Jaton Nvidia TNT2 32mb PCI</li>
<li>Creative SB LIVE Value PCI</li>
<li>Microsoft Natural Keyboard</li>
<li>Microsoft Intellimouse Explorer</li>
<li>Full-tower case with 300W PS</li>
</ul>
<p>1 PC desktop avec la configuration suivante:</p>
<ul>
<li>2 Pentium III 1 GHz Intel CPUs</li>
<li>Supermicro 370 DE6 Dual PIII-FCPGA motherboard</li>
<li>4 256 MB 168-pin PC133 Registered ECC Micron RAM</li>
<li>3 40 GB Maxtor UDMA/100 7200 RPM HD</li>
<li>Ricoh 32x12x10 CDRW/DVD Combo EIDE</li>
<li>Asus CD-A520 52x CDROM</li>
<li>1.4 MB floppy drive</li>
<li>Asus V7700 64mb GeForce2-GTS AGP video card</li>
<li>Creative SB Live Platinum 5.1 sound card</li>
<li>Microsoft Natural Keyboard</li>
<li>Microsoft Intellimouse Explorer</li>
<li>Full-tower case with 300W PS</li>
</ul>
<p>3 PC desktop avec la configuration suivante:</p>
<ul>
<li>2 Pentium III 1 GHz Intel CPUs</li>
<li>Supermicro 370 DE6 Dual PIII-FCPGA motherboard</li>
<li>4 256 MB 168-pin PC133 Registered ECC Micron RAM</li>
<li>3 40 GB Maxtor UDMA/100 7200 RPM hard disk</li>
<li>Ricoh 32x12x10 CDRW/DVD Combo EIDE</li>
<li>1.4 MB floppy drive</li>
<li>Asus V7700 64mb GeForce2-GTS AGP video card</li>
<li>Creative SB Live Platinum 5.1 sound card</li>
<li>Microsoft Natural Keyboard</li>
<li>Microsoft Intellimouse Explorer</li>
<li>Full-tower case with 300W PS</li>
</ul>
<h2><a name="ss2.4">2.4 Firewall/gateway hardware</a></h2>
<p>Un firewall avec la configuration suivante:</p>
<ul>
<li>AMD Palamino XP 1700+ 1.47GHz CPU</li>
<li>MSI KT3 Ultra2 KT333 MS-6380E motherboard</li>
<li>512 MB PC2100 DDR-266MHz DIMM RAM</li>
<li>40GB Seagate 7200rpm ATA/100 hard disk</li>
<li>Asus 52X CD-A520 INT IDE cdrom</li>
<li>1.44 MB floppy drive</li>
<li>ATI Expert 2000 Rage 128 32mb video card</li>
<li>3 Intel Pro/1000T Gigabit Server ethernet cards</li>
<li>4U Black Rackmount Steel case</li>
</ul>
<p>Une passerelle avec la configuration suivante. LA passerelle est
un syst&egrave;me mirroir du firewall pour le cas ou le firewall
sera d&eacute;grad&eacute;.</p>
<ul>
<li>AMD Palamino XP 1800+ 1.57GHz CPU</li>
<li>MSI KT3 Ultra2 KT333 MS-6380E motherboard</li>
<li>512 MB PC2100 DDR-266MHz DIMM RAM</li>
<li>40GB Seagate 7200rpm ATA/100 hard disk</li>
<li>Asus 52X CD-A520 INT IDE cdrom</li>
<li>1.44 MB floppy drive</li>
<li>ATI Expert 2000 Rage 128 32mb video card</li>
<li>3 Intel Pro/1000T Gigabit Server ethernet cards</li>
<li>4U Black Rackmount Steel case</li>
</ul>
<h2><a name="ss2.5">2.5 Divers
mat&eacute;riels/accessoires</a></h2>
<p>Sauvegarde:</p>
<ul>
<li>2 lecteurs Sony 20/40 GB DSS4 SE LVD DAT</li>
</ul>
<p>Moniteurs:</p>
<ul>
<li>2 moniteurs 17" Viewsonic VE700 LCD</li>
<li>1 moniteurs 20.1" Viewsonic VP201M LCD</li>
<li>1 moniteurs 22" Viewsonic P220F 0.25-0.27m</li>
<li>4 moniteurs 21" Sony CPD-G500 .24mm</li>
<li>2 moniteurs 18" Viewsonic VP181 LCD</li>
<li>1 moniteurs 17" Viewsonic VE170 LCD</li>
<li>2 moniteurs Sun monitors</li>
</ul>
<p>Imprimantes:</p>
<ul>
<li>HP colour laserject 4600dn</li>
</ul>
<h2><a name="ss2.6">2.6 Relier toute la configuration
ensemble</a></h2>
<p>Nous avons utilis&eacute; un switch KVM avec un petit
&eacute;cran pour se connecter et "examiner" toutes les
machines:</p>
<ul>
<li>Moniteur 15" .28dp XLN CTL</li>
<li>3 Belkin Omniview 16-Port Pro Switches</li>
<li>Belkin Omniview 2-Port Switch</li>
<li>APC AR203 netshelter rack unit</li>
</ul>
<p>Pour parfaire tout cela et pour en faire une jolie solution,
nous autions besoin d'un petit PDA que nous pourrions connecter
&agrave; l'arri&egrave;re des PC (utilisable avec un stylet, comme
les Palm).</p>
<p>Je n'envisage pas d'utiliser d'avantage de connecteurs dans le
switch KVM.</p>
<p>Le reseau est important:</p>
<ul>
<li>2 Netgear FS750NA 48 port/1 git network switch</li>
<li>1 Netgear FSM750S 48 port/2 git network switch</li>
<li>1 Netgear FS517TS 16 port/1 git network switch</li>
<li>1 Netgear FS524 24 port network switch</li>
<li>1 Cisco Catalyst 3448 XL Enterprise Edition 48 port network
switch</li>
<li>1 Netgear ME102NA Wireless Access Point</li>
<li>1 Netgear MA401NA Wireless PCMCIA network card</li>
</ul>
<h2><a name="ss2.7">2.7 Couts</a></h2>
<p>Notre vendeur est Hard Drives Northwest ( <a href=
"http://www.hdnw.com">http://www.hdnw.com</a>). Pour chaque noeud
dans notre cluster (contenant 2 CPU chacun), nous avons pay&eacute;
entre 1500 et 2000 $, en incluant les taxes.
G&eacute;n&eacute;ralement, notre but est de garder le cout de
chaque processeur en dessous des 1000 $ (en incluant
l'emplacement).</p>
<h2><a name="s3">3. Logiciel</a></h2>
<h2><a name="ss3.1">3.1 Syst&egrave;me d'exploitation, Linux, bien
sur !</a></h2>
<p>Les version de Kernels et des distributions que nous avons
utilis&eacute;s :</p>
<ul>
<li>Kernel 2.2.16-22, distribution KRUD 7.0</li>
<li>Kernel 2.4.9-7, distribution KRUD 7.2</li>
<li>Kernel 2.4.18-10, distribution KRUD 7.3</li>
<li>Kernel 2.4.20-13.9, distribution KRUD 9.0</li>
</ul>
<p>Ces distributions fonctionne bien pour nous, les mise a jour
nous sont transmises sur CD et il n'y a aucune connexion avec le
reseau externe. Elles ont sembl&eacute;s plus "propre" que les
distributions standard RedHat, et la configuration est
extr&egrave;mement stable.</p>
<h2><a name="ss3.2">3.2 Logiciel reseau</a></h2>
<p>Nous utilisons Shorewall 1.3.14a (( <a href=
"http://www.shorewall.net">http://www.shorewall.net</a>) pour le
firewall.</p>
<h2><a name="ss3.3">3.3 Environnement parall&egrave;le</a></h2>
<p>Nous utilisons nos propres logiciels pour la
parall&eacute;lisation des applications mais nous avons
exp&eacute;riment&eacute; PVM et MPI. A mon avis l'overhead
g&eacute;n&eacute;r&eacute; par ces environnement est trop
important. Je recommande d'&eacute;crire son propre code pour les
taches que vous voulez remplir (c'est ma vue personnelle). (NDLR je
recommande &agrave; l'inverse l'utilisation de MPI, qui est
tr&egrave;s portable sur toute sortes de plateforme, et qui permet
de se d&eacute;tacher de l'architecture et de l'&eacute;criture du
logiciel pour se consacrer &agrave; son propre
probl&egrave;me).</p>
<h2><a name="ss3.4">3.4 Co&ucirc;ts</a></h2>
<p>Linux et la plupart des logiciels qui tourne sous Linux sont
librement copiable.</p>
<h2><a name="s4">4. D&eacute;marrage, configuration, et
maintenance</a></h2>
<h2><a name="ss4.1">4.1 Configuration disques</a></h2>
<p>Cette section d&eacute;crit la strat&eacute;gie de
partitionnement disques.</p>
<blockquote>
<pre>
<code>ferme/cluster machines:

hda1 - swap   (2 * RAM)
hda2 - /      (le reste de l'espace disque disponible)
hdb1 - /maxa  (totalit&eacute; disque)

PC desktops (sans windows):

hda1 - swap   (2 * RAM)
hda2 - /      (4 GB)
hda3 - /spare (le reste de l'espace disque disponible)
hdb1 - /maxa  (totalit&eacute; disque)
hdd1 - /maxb  (totalit&eacute; disque)

desktops (sans windows):

hda1 - /win   (totalit&eacute; disque)
hdb1 - swap   (2 * RAM)
hdb2 - /      (4 GB)
hdb3 - /spare (le reste de l'espace disque disponible)
hdd1 - /maxa  (totalit&eacute; disque)

laptops (un seul disque):

hda1 - /win   (la moiti&eacute; de la taille du disque)
hda2 - swap   (2 * RAM)
hda3 - /      (le reste de l'espace disque disponible)
</code>
</pre></blockquote>
<h2><a name="ss4.2">4.2 Configuration de l'environnement</a></h2>
<p>Installer un minimum de packages dans la ferme de PC. Les
utilisateurs sont autoris&eacute;s &agrave; configurer les PC
desktops comme ils le d&eacute;sirent.</p>
<h2><a name="ss4.3">4.3 Installation et maintenance des
syst&egrave;mes d'exploitation</a></h2>
<h3>Clonage et mintenance des packages</h3>
<h3>FAI</h3>
<p>FAI ( <a href=
"http://www.informatik.uni-koeln.de/fai/">http://www.informatik.uni-koeln.de/fai/</a>)
est un syst&egrave;me automatis&eacute; pour installer le
syst&egrave;me Debian GNU/Linux sur un cluster. Vous pouvez prendre
un ou plusieurs PC vierges, les allumer et apr&egrave;s quelques
minutes Linux est install&eacute;, configur&eacute; et en
&eacute;tat de fonctionner sur la totalit&eacute; du cluster, sans
qu'aucune interaction ne soit n&eacute;cessaire.</p>
<h3>SystemImager</h3>
<p>SystemImager ( <a href=
"http://systemimager.org">http://systemimager.org</a>) est un
logiciel qui automatise l'installation, la distribution et le
d&eacute;ploiement de Linux.</p>
<h3>Strat&eacute;gie personnelle de clonage</h3>
<p>Je crois dans un syst&egrave;me compl&egrave;tement
distribu&eacute;. Ceci veux dire que chaque machine contient une
copie du syst&egrave;me d'exploitation. Installer un syst&egrave;me
d'exploitation sur chaque machine manuellement est p&eacute;nible.
Pour optimiser ce processus, j'ai d'abord install&eacute; et
param&eacute;tr&eacute; le syst&egrave;me sur une machine. J'ai
ensuite cr&eacute;&eacute; un fichier tar (que j'ai zipp&eacute;
(gzip)) du syst&egrave;me tout entier. J'ai plac&eacute; ce fichier
sur un CDROM qui m'a ensuite servi plour le clonage de chaque
machine dans mon cluster.</p>
<p>Les commandes que j'ai utilis&eacute; pour cr&eacute;&eacute;er
le fichier tar sont les suivantes :</p>
<blockquote>
<pre>
<code>tar -czvlps --same-owner --atime-preserve -f /maxa/slash.tgz /
</code>
</pre></blockquote>
<p>J'ai utilis&eacute; un script apell&eacute; <code>go</code> qui
re&ccedil;oit comme param&egrave;tre le nom de la machine et
l'adresse IP, puis d&eacute;tarre le fichier <code>slash.tgz</code>
sur le CD-ROM, enfin remplace le nom de la machine et l'adresse IP
aux endroits appropri&eacute;s. Une version du script
<code>go</code> et du fichier d'entr&eacute;e peuvent &ecirc;tre
trouv&eacute;s &agrave; l'adresset: <a href=
"http://www.ram.org/computing/linux/cluster/">http://www.ram.org/computing/linux/linux/cluster/</a>.
Ce script devra &ecirc;tre &eacute;dit&eacute; pour correspondre au
design de votre cluster.</p>
<p>Pour faire fonctionner tout cela, j'ai aussi utilis&eacute; le
Tom's Root Boot package ( <a href=
"http://www.toms.net/rb/">http://www.toms.net/rb/</a>) pour booter
la machine et cloner le syst&egrave;me. Le script <code>go</code>
peut &ecirc;tre plac&eacute; sur un CDROM, ou sur une disquette
contenant le Tom's Root Boot package (vous devrez effacer quelques
programmes car la disquette est relativement limit&eacute; en place
libre).</p>
<p>Plus commod&eacute;ment, vous pouvez graver un CDROM bootable
contenant le Tom's Root Boot package, incluant le script
<code>go</code>, et le fichier tgz contenant le syst&egrave;me
&agrave; cloner. Vous pouvez aussi &eacute;diter le fichier init du
boot de mani&egrave;re &agrave; ce qu'il execute le script
<code>go</code> (vous devrez quand m&ecirc;me positionner l'adresse
IP si vous n'utilisez pas DHCP).</p>
<p>Vous pouvez cr&eacute;&eacute;er de mani&egrave;re alternative
votre propre disque (comme un disque de secours) qui contiennent le
kernel et les outils que vous voulez. Il y a de nombreux documents
qui d&eacute;crivent comment faire cela, incluant le Linux Bootdisk
HOWTO ( <a href=
"http://www.linuxdoc.org/HOWTO/Bootdisk-HOWTO/">http://www.linuxdoc.org/HOWTO/Bootdisk-HOWTO/</a>),
qui contient lui aussi des liens vers des images de disques
bootable.</p>
<p>Ainsi, vous pouvez d&eacute;velopper un syst&egrave;me ou tout
ce que vous avez &agrave; faire est d'ins&eacute;rer un CDROM,
allumer la machine, prendre un caf&eacute; (ou une canette de coca)
(NDLR: buvez de l'eau, c'est meilleur pour la sant&eacute; ;-)) et
retourner vous assoir pour constater un clonage complet. Vous
pouvez r&eacute;peter cette proc&eacute;dure pour autant de
machines que vous le d&eacute;sirez. Cette proc&eacute;dure
&agrave; extr&egrave;mement bien focntionn&eacute; pour moi, et si
de plus, vous trouvez quelqu'un (pour ins&eacute;rer et retirer les
CDROM !) c'est id&eacute;al.</p>
<p>Rob Fantini ( <a href=
"mailto:rob@fantinibakery.com">rob@fantinibakery.com</a>) a
contribu&eacute; aux modifications du script cit&eacute; si-dessus
pour cloner la Mandrake 8.2 qui est accessible &agrave; l'adresse
<a href=
"http://www.ram.org/computing/linux/cluster/fantini_contribution.tgz">
http://www.ram.org/computing/linux/cluster/fantini_contribution.tgz</a>.</p>
<p>J'avais travaill&eacute; sur une proc&eacute;dure ou tout ce que
vous aviez &agrave; faire &eacute;tait d'ins&eacute;rer un CD,
d&eacute;marrer la machine, et tout &eacute;tait clon&eacute;. Je
mettrai cela &agrave; disposition dans un futur proche.</p>
<h3>DHCP vs. adresse IP cod&eacute;es en dur</h3>
<p>Si vous avez DHCP d&eacute;j&agrave; en focntionnement, alors
vous n'aurez pas &agrave; changer l'adresse IP et cette partie
pourra &ecirc;tre retir&eacute;e du script <code>go</code>.</p>
<p>DHCP a l'avantage de ne plus avoir &agrave; se pr&eacute;ocuper
des adresses IP dans la mesure ou le serveur DHCP est correctement
configur&eacute;.</p>
<p>Il a le d&eacute;savantage li&eacute; &agrave; la centralisation
(and comme je le disais, j'essaye de r&eacute;partir les choses le
plus possible). En outre, lier l'adresse ethernet de la carte
&agrave; l'adresse IP peut devenir un inconv&eacute;nient si vous
voulez remplacer des machines, ou changer les noms de machines de
mani&egrave;re r&eacute;guli&egrave;re.</p>
<h2><a name="known_hardware_issues"></a> <a name="ss4.4">4.4
Particularit&eacute; du mat&eacute;riel</a></h2>
<p>Le mat&eacute;riel a fonctionn&eacute; correctement pour nous.
Les cas particuliers sont list&eacute;s ci-dessous :</p>
<p>Les machines bi-processeurs AMD 1.2 GHz chauffent beaucoup. Si
on en place deux dans une pi&egrave;ce, la temp&eacute;rature de
celle-ci s'accroit consid&eacute;rablement. En outre, leur
utilisation dans un cadre desktop, peux s'av&eacute;rer correct,
mais la temp&eacute;rarture, et la consommation electrique doivent
&ecirc;tre pris en consid&eacute;ration. La configuration AMD
Palmino d&eacute;crite pr&eacute;c&eacute;demmentn semble
tr&egrave;s bien fonctionner pour nous, mais je recommande d'avoir
deux ventilateurs au cas ou--ceci resoudra tout probl&egrave;me
d'instabilit&eacute;.</p>
<h2><a name="known_software_issues"></a> <a name="ss4.5">4.5
Particularit&eacute; du logiciel</a></h2>
<p>Certains commandes tar ne cr&eacute;&eacute;ent par un fichier
tar correct (et notanment en ce qui concerne les liens symboliques)
La solution est d'utiliser la commande tar qui se trouve dans la
distribution RedHat 7.0 (NDLR: La commande tar GNU fonctionne
tr&egrave;s bien)</p>
<h2><a name="s5">5. Les op&eacute;rations sur le cluster</a></h2>
<p>Cette section est encore en d&eacute;velopement dans la mesure
ou l'utilisation de mon cluster &eacute;volue, jusqu'ici nous
essayons d'&eacute;crire nos propres ensemble de routine de Message
Passing pour &eacute;tablir la communication entre les processus
des diff&eacute;rentes machines.</p>
<p>Beaucoup d'applications, en particulier dans les secteurs
informatiques de traitement du g&eacute;nome, sont massivement et
facilement parallelisable. Cela signifi que la r&eacute;partition
parfaite peut &ecirc;tre r&eacute;alis&eacute;e en distribuant des
t&acirc;ches de mani&egrave;re homog&egrave;ne entre les machines
(par exemple, en analysant un g&eacute;nome entier en utilisant une
technique qui travaille sur un seul g&egrave;ne, ou un seule
proteine, chaque processeur peut travailler &agrave; un
g&egrave;ne, ou &agrave; une seule proteine &agrave; la fois
ind&eacute;pendenment de tous les autres processeurs).</p>
<p>Jusqu'ici nous n'avons pas trouv&eacute; la
n&eacute;cessit&eacute; d'employer un syst&egrave;me de gestion de
file d'attente, mais &eacute;videmment ce d&eacute;pend fortement
du type d'applications que vous souhaitez faire tourner. (NDLR:
ceal d&eacute;pend aussi de votre environnement de travail,
&agrave; savoir si votre cluster est partag&eacute; entre plusieurs
utilisateurs en concurence ...).</p>
<h2><a name="ss5.1">5.1 Benchmarks bruts</a></h2>
<p>Pour le plus important programme que nous faisons tourner (notre
<i>ab initio</i> programme de simulation de pliage de proteine), en
utilisant la machine avec un Pentium 3 &agrave; 1GHz comme
r&eacute;f&eacute;rence, en moyenne :</p>
<blockquote>
<pre>
<code>Athlon 1.2 GHz est environ 16% plus rapide
Xeon   1.7 GHz est environ 27% plus rapide
Athlon 1.5 GHz est environ 38% plus rapide
Athlon 1.7 GHz est environ  46% plus rapide
Xeon   2.4 GHz est environ 62% plus rapide
</code>
</pre></blockquote>
<p>Oui, l'Athlon 1.5 GHz est plus rapide que le Xeon 1.7 GHz car le
Xeon execute seulement six instructions par horloge (IPC) alors que
l'Athlon en execute neuf IPC (vous faites le calcul!).</p>
<h2><a name="ss5.2">5.2 Stabilit&eacute;</a></h2>
<p>Ces machines sont incroyablement stables, aussi bien en terme de
mat&eacute;riel que logiciel une fois d&eacute;bugu&eacute;es
(habituellement les nouveaux batchs sur ls machines ont des
probl&egrave;mes), elles ont fonctionn&eacute; avec une grosse
charge . Un exemple est donn&eacute; ci-apr&egrave;s. Le reboot est
g&eacute;n&eacute;ralement arriv&eacute; quand un composant
electronique a grill&eacute;.</p>
<blockquote>
<pre>
<code>  2:29pm  up 495 days,  1:04,  2 users,  load average: 4.85, 7.15, 7.72
</code>
</pre></blockquote>
<h2><a name="s6">6. Remerciements</a></h2>
<p>Les personnes suivantes ont &eacute;t&eacute; d'une grande aide
pour r&eacute;aliser ce HOWTO:</p>
<ul>
<li>Michael Levitt ( <a href=
"mailto:michael.levitt@stanford.edu">Michael Levitt</a>)</li>
</ul>
<h2><a name="references"></a> <a name="s7">7.
Bibliographie</a></h2>
<p>Les documents suivants peuvent vous aider---ce sont des liens
vers des sources qui utilisent des clusters pour effectuer du
calcul haute performance:</p>
<ul>
<li><a href="http://www.ram.org/computing/rambin/rambin.html">Page
web de RAMBIN</a></li>
<li><a href="http://www.ram.org/computing/ramp/ramp.html">Page web
de RAMP</a></li>
<li><a href="http://www.ram.org/research/research.html">Page sur la
recherche de Ram Samudrala (qui d&eacute;crit quel type de
recherche est effectu&eacute; sur ces clusters)</a></li>
</ul>
</body>
</html>
