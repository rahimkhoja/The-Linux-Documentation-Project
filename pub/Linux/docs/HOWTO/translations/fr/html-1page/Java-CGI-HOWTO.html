<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
 <TITLE>Java CGI HOWTO</TITLE>
</HEAD>
<BODY>
<H1>Java CGI HOWTO</H1>

   
<H2>David H. Silber <CODE>
<A HREF="mailto:dhs@orbits.com">dhs@orbits.com</A></CODE>.    </H2>v0.4, 18 Novembre 1996.
   
<HR>
<EM>    Ce document vous explique comment convaincre votre serveur WWW
    d'utiliser des programmes de CGI écrits en Java, et montre l'emploi de
    Java dans l'écriture de programmes de CGI. Bien que les HOWTO se
    restreignent en principe au système Linux, celui-ci est indépendant de
    la version d'Unix utilisée. <EM>Traduction : 
<A HREF="mailto://xavier@oreilly.com">Xavier Cazin</A>, le 27
     novembre 1997</EM>.
   </EM>
<HR>
<H2><A NAME="s1">1. Introduction</A>   </H2>

<P>Par construction du language, les variables d'environnement du système
ne sont pas facilement accessibles au programmeur Java. Par ailleurs,
le JDK (Java Development Kit) rend impossible l'invocation directe d'un
programme, ce qui ne facilite pas le traitement standard par CGI des
formulaires HTML. On peut contourner ces limitations de plusieurs
façons. Vous saurez comment j'ai implémenté l'une d'elles en
poursuivant votre lecture.</P>

<H2><A NAME="ss1.1">1.1 Pré-requis</A>
    </H2>

<P>Je considère que vous êtes familiarisé avec les principes qui
sous-tendent HTML et CGI, et que vous possédez un minimum de
connaissances de votre serveur HTTP. La programmation Java ne devra
pas non plus vous être étrangère, à défaut de quoi ce qui va suivre ne
vous sera pas très parlant.</P>

<H2><A NAME="ss1.2">1.2 Ce document</A>
    </H2>

<P>
<A HREF="http://www.orbits.com/software/Java_CGI.html">http://www.orbits.com/software/Java_CGI.html</A> est
l'adresse où vous êtes sûr de trouver la dernière version de ce
document.</P>

<H2><A NAME="ss1.3">1.3 Le package lui-même</A>
    </H2>

<P>L'archive
<A HREF="ftp://ftp.orbits.com/pub/software/java_cgi-0.4.tgz">ftp://ftp.orbits.com/pub/software/java_cgi-0.4.tgz</A>
contient la dernière version du package décrit ici. Vous y trouverez
également le source SGML de ce document (en anglais bien sûr).</P>
<P>La distribution du package suit les recommandations de la LGPL (GNU
Library General Public License). Ce document peut être distribué selon
les termes gouvernant le copyright des Linux HOWTO.</P>
<P>Merci de bien vouloir mentionner le document
<A HREF="http://www.orbits.com/software/Java_CGI.html">http://www.orbits.com/software/Java_CGI.html</A> si vous
utilisez ce logiciel. Vous permettrez ainsi à d'autres d'accéder aux
classes Java CGI.</P>

<H2><A NAME="ss1.4">1.4 Publicité gratuite</A>
    </H2>

<P>Ce document a été mis au point avec la bienveillance de <B>Stellar
Orbits Technology Services</B>. Si vous voulez savoir ce que nous
faisons, allez voir à 
<A HREF="http://www.orbits.com/">http://www.orbits.com/</A>.</P>


<H2><A NAME="install-long"></A> <A NAME="s2">2. Configuration de votre serveur (avec explications)</A>       </H2>

<P>Cette section vous conduira à travers l'installation de mon package
<EM>Java CGI</EM>, et sera agrémentée d'explications généreuses qui
vous permettront de mesurer les conséquences de vos actes. Si vous
souhaitez simplement installer les programmes, sans vous soucier du
pourquoi et du comment, sautez directement à la section 
<A HREF="#install-short">Configuration du serveur (version courte)</A>.</P>

<H2><A NAME="ss2.1">2.1 Contraintes logicielles et matérielles</A>
    </H2>

<P>Ce logiciel devrait fonctionner sur n'importe quel système à la Unix
sur lequel se trouvent au moins installés le JDK et un serveur
Web. J'utilise pour ma part un <EM>Linux Debian</EM> sur lequel tourne
le démon HTTP <EM>apache</EM>. Si cela ne fonctionne pas sur votre
installation, n'hésitez pas à me contacter à
<CODE>
<A HREF="mailto:dhs@orbits.com">dhs@orbits.com</A></CODE>.</P>
<P>Malheureusement, l'interpréteur Java n'est pas particulièrement
économe en mémoire ; si vous devez utiliser souvent des programmes de
CGI en Java, quelques mégaoctets de RAM supplémentaires ne seront pas
de trop.</P>

<H2><A NAME="ss2.2">2.2 Java CGI</A>
    </H2>

<P>Le logiciel que j'ai écrit s'appelle <EM>Java CGI</EM> (Note: au
cas où vous ne l'auriez pas encore remarqué (NdT)). Vous
pouvez le récupérer par ftp anonyme à l'adresse 
<A HREF="ftp://www.orbits.com/pub/software/java_cgi-0.4.tgz">ftp://www.orbits.com/pub/software/java_cgi-0.4.tgz</A>.
(Le numéro de version peut avoir changé.)</P>

<H2><A NAME="ss2.3">2.3 Déploiement des sources</A>
    </H2>

<P>Choisissez un répertoire où vous pourrez tranquillement déployer
l'archive du package. Je suggère généralement <CODE>/usr/local/src</CODE>.
Désarchivez ensuite à l'aide de la commande (Note : les
"lignuxeurs" préfèreront sans doute le plus élégant <CODE>tar
xzvf java_cgi-0.4.tgz</CODE> (NdT).) : 
<PRE>
      gzip -dc java_cgi-0.4.tgz | tar -xvf - 
</PRE>

Cela aura pour effet de créer un répertoire de nom
<CODE>java_cgi-0.4</CODE>. Vous y trouverez les fichiers auxquels
nous feront référence dans la suite. (Si le numéro de version a
changé, suivez les instructions qui s'y trouvent à partir de
maintenant).</P>

<H2><A NAME="make-programs"></A> <A NAME="ss2.4">2.4 Chemins locaux</A>
         </H2>

<P>Vous allez devoir décider de l'endroit où vous souhaitez que les
programmes Java CGI résident. La plupart du temps, vous aurez intérêt
à les placer dans un répertoire parallèle au répertoire
<CODE>cgi-bin</CODE>. La configuration de mon serveur <EM>apache</EM>
indiquait <CODE>/var/web/cgi-bin</CODE> comme répertoire <CODE>cgi-bin</CODE>
par défaut. J'ai donc placé mes programmes Java CGI dans le répertoire
<CODE>/var/web/javacgi</CODE>. Il n'est pas conseillé de placer ces
programmes dans l'un des répertoires référencés par
<CODE>CLASSPATH</CODE>. &Eacute;ditez le Makefile pour refléter la
configuration de votre système. En tant qu'utilisateur root, lancez
<CODE>make install</CODE>. Cela aura pour effet de compiler vos programmes
Java, modifier le script <CODE>java.cgi</CODE> pour qu'il s'adapte à votre
système, et installer les programmes au bon endroit. Si vous souhaitez
également disposer d'une version HTML de ce document, et d'un document
test en HTML, lancez plutôt <CODE>make all</CODE>.</P>

<H2><A NAME="install-test"></A> <A NAME="ss2.5">2.5 Test de votre installation</A>
         </H2>

<P>Les documents <CODE>javacgitest.html</CODE>, <CODE>javaemailtest.html</CODE>
et <CODE>javahtmltest.html</CODE> devraient maintenant être installés. Si
vous avez choisi <CODE>make all</CODE>, ils se trouveront dans le
répertoire spécifié par la variable WEBDIR du <CODE>Makefile</CODE>. Dans
le cas contraire, vous pouvez lancer <CODE>make test</CODE> pour les créer
à partir de <CODE>javacgitest.html-dist</CODE>,
<CODE>javaemailtest.html-dist</CODE> et <CODE>javahtmltest.html-dist</CODE>.</P>
<P>Après vous être assuré que votre installation s'était déroulée
correctement, vous pouvez supprimer les fichiers
<CODE>CGI_Test.class</CODE>, <CODE>Email_Test.class</CODE> et
<CODE>HTML_Test.class</CODE> de votre répertoire JAVACGI, ainsi que
<CODE>javacgitest.html</CODE>, <CODE>javaemailtest.html</CODE> et
<CODE>javahtmltest.html</CODE> de votre répertoire WEBDIR. Ils montrent
les informations utilisateurs auxquelles le serveur est normalement
seul à avoir accès.</P>

<H2><A NAME="install-short"></A> <A NAME="s3">3. Configuration du serveur (version courte)</A>       </H2>

<P>
<UL>
<LI>Récupérez le package <EM>Java CGI</EM> à partir de
<A HREF="ftp://www.orbits.com/pub/software/java_cgi-0.4.tgz">ftp://www.orbits.com/pub/software/java_cgi-0.4.tgz</A>.
(Le numéro de version peut avoir changé.)</LI>
<LI>Déployez la distribution à l'aide de la commande
<PRE>
       gzip -dc java_cgi-0.4.tgz | tar -xvf -
</PRE>

(Si le numéro de version de la distribution a changé, utilisez les
instructions qui s'y trouvent à partir de maintenant.)</LI>
<LI>&Eacute;ditez le <CODE>Makefile</CODE> que vous trouverez dans le nouveau
répertoire <CODE>java_cgi-0.4</CODE> pour qu'il reflète la
configuration de votre système.</LI>
<LI>En tant que root, lancez <CODE>make install</CODE>. Cela aura pour effet
de compiler les programmes Java, prendre en compte les informations
propres à votre système, et installer les divers fichiers. 
<P> 
Si vous souhaitez disposer d'une version HTML de ce document, ainsi
que d'un document test en HTML, lancez plutôt <CODE>make all</CODE>.</P>
</LI>
<LI>Vous devriez maintenant être paré.</LI>
</UL>
</P>

<H2><A NAME="s4">4. Exécution d'un programme Java CGI</A>   </H2>



<H2><A NAME="ss4.1">4.1 Difficultés d'exécution de programmes Java avec le modèle CGI</A>
    </H2>

<P>L'exécution d'un programme Java depuis un serveur Web pose deux types
de problèmes majeurs :</P>
<H3>Les programmes Java ne s'exécutent pas comme des binaires ordinaires     </H3>

<P>Il faut lancer l'interpréteur Java et fournir la classe principale
(le programme à exécuter) sur la ligne de commande. Les formulaires
HTML ne permettent pas d'envoyer directement une ligne de commande au
serveur Web.</P>
<H3>Java n'accède pas <EM>a priori</EM> aux variables d'environnement     </H3>

<P>Toutes les variables d'environnement requises par le programme Java
doivent lui être passées explicitement. Il n'existe pas de méthode
similaire à la fonction <CODE>getenv()</CODE> de <B>C</B> .</P>

<H2><A NAME="ss4.2">4.2 Solutions proposées</A>
    </H2>

<P>Pour contourner ces obstacles, j'ai écrit une script shell de CGI, qui
fournit les informations nécessaires à l'interpréteur Java.</P>
<H3>Le script java.cgi     </H3>

<P>Ce script de shell se charge de l'interaction entre le démon HTTP et
le programme Java CGI que vous souhaitez utiliser. Il extrait le nom
du programme que vous souhaitez lancer à partir des données fournies
par le serveur. Il récupère ensuite toutes les valeurs
d'environnement dans un fichier temporaire. Enfin, il lance
l'interpréteur Java en lui passant le nom du fichier contenant les
informations d'environnement, ainsi que le nom du programme à
exécuter.</P>
<P>Le script <CODE>java.cgi</CODE> a été configuré et installé selon les
procédure décrites à la section
<A HREF="#make-programs">Decide On Your Local Path Policies</A>.</P>
<H3>Invocation de java.cgi depuis un formulaire HTML     </H3>

<P>Mes formulaires qui utilisent les programmes Java CGI spécifient
l'action à effectuer de la façon suivante :
<PRE>
 &lt;form action="/cgi-bin/java.cgi/CGI_Test" method="POST">
</PRE>
 où
<CODE>/cgi-bin/</CODE> est votre répertoire local d'exécutables CGI,
<CODE>java.cgi</CODE> est l'interface permettant de lancer les programmes
Java, et <CODE>CGI_Test</CODE> est un exemple de programme Java à
exécuter.</P>

<H2><A NAME="s5">5. Utilisation des classes Java CGI</A>   </H2>

<P>Trois classes principales sont pour l'instant supportées :
<A HREF="#cgi-class">CGI</A>,
<A HREF="#email-class">Email</A> et
<A HREF="#html-class">HTML</A>. Je pense y ajouter des classes
capables de gérer des entrées et des sorties formatées en MIME 
(respectivement MIMEin &amp; MIMEout).</P>
<P>Quelques classes de test et de support sont également disponibles :
<A HREF="#cgi-test-class">CGI_Test</A>,
<A HREF="#email-test-class">Email_Test</A> et
<A HREF="#email-test-class">HTML_Test</A> doivent permettre
de tester votre installation. Elles peuvent aussi servir de point de
départ à vos propres programmes Java basés sur cette bibliothèque de
classes. La classe 
<A HREF="#text-class">Text</A> est une superclasse
des classes <CODE>Email</CODE> et <CODE>HTML</CODE>.</P>

<H2><A NAME="cgi-class"></A> <A NAME="ss5.1">5.1 CGI</A>
    </H2>


<H3>Syntaxe     </H3>

<P><CODE>public class CGI</CODE></P>
<H3>Description     </H3>

<P>La classe CGI détient les "informations SGI" : les valeurs
d'environnement initialisées par le serveur Web ainsi que le nom et
la valeur issus du formulaire quand l'action <B>submit</B> est
sélectionnée. Toutes les informations sont stockées dans un objet de
classe <CODE>Properties</CODE>.</P>
<P>Cette classe se trouve dans le package "Orbits.net".</P>
<H3>Liste des membres     </H3>

<P>
<HR>
<PRE>
       CGI()         //  Constructeur.
       getNames()    //  Recupere la liste de noms.
       getValue()    //  Recupere la valeur a partir du nom.
      
</PRE>
<HR>
</P>
<H3>Voir aussi     </H3>

<P><CODE>CGI_Test</CODE>.</P>
<H3>CGI()     </H3>

<P>
<DL>
<DT><B>Finalité</B><DD><P>Construit un objet contenant les données CGI disponibles.</P>
<DT><B>Syntaxe</B><DD><P><CODE>public CGI()</CODE></P>
<DT><B>Description</B><DD><P>Lorsqu'un objet CGI est construit, toutes les
informations CGI disponibles sont récupérées et stockées dans le
nouvel objet.</P>
</DL>
</P>
<H3>getNames()     </H3>

<P>
<DL>
<DT><B>Finalité</B><DD><P>Dresse la liste des noms définis par le formulaire.</P>
<DT><B>Syntaxe</B><DD><P><CODE>public Enumeration getNames ()</CODE></P>
<DT><B>Description</B><DD><P>Fournit la liste complète des noms pour lesquels
des valeurs correspondantes ont été définies.</P>
<DT><B>Retourne</B><DD><P>Une <CODE>Enumeration</CODE> de tous les noms définis.</P>
</DL>
</P>
<H3>getValue()     </H3>

<P>
<DL>
<DT><B>Finalité</B><DD><P>Récupère la <B>valeur</B> associée au <B>nom</B>
spécifié.</P>
<DT><B>Syntaxe</B><DD><P><CODE>public String getValue ( String nom )</CODE></P>
<DT><B>Description</B><DD><P>Cette méthode fournit la correspondance entre les
<CODE>noms</CODE> et les <CODE>valeurs</CODE> envoyées depuis un formulaire
HTML.</P>
<DT><B>Paramètre</B><DD><P>
<DL>
<DT><B>nom</B><DD><P>La clé par laquelle les valeurs sont choisies.</P>
</DL>
</P>
<DT><B>Retourne</B><DD><P>Une <CODE>String</CODE> contenant la valeur.</P>
</DL>
</P>

<H2><A NAME="cgi-test-class"></A> <A NAME="ss5.2">5.2 CGI_Test</A>
    </H2>

<P>Cette classe fournit à la fois un exemple d'utilisation de la classe
CGI, et un programme de test, qu'on pourra utiliser pour confirmer que
le package <EM>Java CGI</EM> fonctionne correctement.</P>
<H3>Liste des membres     </H3>

<P>
<HR>
<PRE>
       main()      //   main() du programme
      
</PRE>
<HR>
</P>
<H3>Voir aussi     </H3>

<P><CODE>CGI</CODE>.</P>
<H3>main()     </H3>

<P>
<DL>
<DT><B>Finalité</B><DD><P>Fournit une méthode <CODE>main()</CODE>.</P>
<DT><B>Syntaxe</B><DD><P><CODE>public static void main( String argv[] )</CODE></P>
<DT><B>Description</B><DD><P>Il s'agit du point d'entrée d'un programme CGI qui
ne fait rien à part retourner la liste des couples nom/valeur.</P>
<DT><B>Paramètre</B><DD><P>
<DL>
<DT><B>argv[]</B><DD><P>Arguments passés au programme par le script
<CODE>java.cgi</CODE>.
Non utilisé pour l'instant.</P>
</DL>
</P>
</DL>
</P>

<H2><A NAME="email-class"></A> <A NAME="ss5.3">5.3 Email</A>
    </H2>


<H3>Syntaxe     </H3>

<P><CODE>public class Email extends Text</CODE></P>
<H3>Description     </H3>

<P>Les messages sont construits au moyen des méthodes <CODE>add*()</CODE> de
la classe <CODE>Text</CODE> et les méthodes spécifiques au courrier
électronique fournies par cette classe. Une fois composé, le message
est envoyé vers sa destination finale.</P>
<P>Cette classe se trouve dans le package "Orbits.net".</P>
<H3>Liste des membres     </H3>

<P>
<HR>
<PRE>
       Email()      //  Constructeur
       send()       //  Envoie le message e-mail
       sendTo()     //  Ajoute une destination au message
       subject()    //  Initialise le champ Subject: du message
      
</PRE>
<HR>
</P>
<H3>Voir aussi     </H3>

<P><CODE>Email_Test, Text</CODE>.</P>
<H3>Email()     </H3>

<P>
<DL>
<DT><B>Finalité</B><DD><P>Construit un objet qui contiendra un message
électronique.</P>
<DT><B>Syntaxe</B><DD><P><CODE>public Email()</CODE></P>
<DT><B>Description</B><DD><P>Crée un message vide qui sera rempli par les
méthodes Email.</P>
<DT><B>Voir aussi</B><DD><P><CODE>Text</CODE>.</P>
</DL>
</P>
<H3>send()     </H3>

<P>
<DL>
<DT><B>Finalité</B><DD><P>Envoie le message e-mail.</P>
<DT><B>Syntaxe</B><DD><P><CODE>public void send ()</CODE></P>
<DT><B>Description</B><DD><P>Formatage et envoi du message. Si aucune adresse
de destination n'a été précisée, ne fait rien.</P>
</DL>
</P>
<H3>sendTo()     </H3>

<P>
<DL>
<DT><B>Finalité</B><DD><P>Ajoute une destination pour ce message.</P>
<DT><B>Syntaxe</B><DD><P><CODE>public String sendTo ( String adresse )</CODE></P>
<DT><B>Description</B><DD><P>Ajoute <CODE>adresse</CODE> à la liste des
destinations pour cette méthode. Il n'existe pas de limite <EM>a
priori</EM> pour le nombre de destinations d'un message e-mail. Je
suis sûr qu'avec une liste assez grande, on peut dépasser la taille
acceptable pour le <EM>Mail Transport Agent</EM>, voire la mémoire
disponible sur votre système.</P>
<DT><B>Paramètre</B><DD><P>
<DL>
<DT><B>adresse</B><DD><P>Une destination à laquelle envoyer ce message.</P>
</DL>
</P>
</DL>
</P>
<H3>subject()     </H3>

<P>
<DL>
<DT><B>Finalité</B><DD><P>Initialise le sujet du message.</P>
<DT><B>Syntaxe</B><DD><P><CODE>public void subject ( String sujet )</CODE></P>
<DT><B>Description</B><DD><P>Cette méthode remplit le champ 
<CODE>Subject:</CODE> du message. Si elle est appelée plusieurs fois,
le sujet utilisé sera le dernier demandé.</P>
<DT><B>Paramètre</B><DD><P>
<DL>
<DT><B>sujet</B><DD><P>Le texte du champ <CODE>Subject:</CODE> du message.</P>
</DL>
</P>
</DL>
</P>

<H2><A NAME="email-test-class"></A> <A NAME="ss5.4">5.4 Email_Test</A>
    </H2>

<P>Cette classe fournit à la fois un exemple d'utilisation de la classe
<CODE>Email</CODE> et un programme de test qu'on pourra utiliser pour
s'assurer que le package <EM>Java CGI</EM> fonctionne correctement.</P>
<H3>Liste des membres     </H3>

<P>
<HR>
<PRE>
       main()      //  main() du programme
      
</PRE>
<HR>
</P>
<H3>Voir aussi     </H3>

<P><CODE>Email</CODE>.</P>
<H3>main()     </H3>

<P>
<DL>
<DT><B>Finalité</B><DD><P>Fournit une méthode <CODE>main()</CODE>.</P>
<DT><B>Syntaxe</B><DD><P><CODE>public static void main( String argv[] )</CODE></P>
<DT><B>Description</B><DD><P>Il s'agit du point d'entrée d'un programme CGI qui
retourne une liste des couples nom/valeur disponibles. Cette liste
sera également envoyée à l'adresse spécifiée dans la variable
<CODE>Email</CODE>. </P>
<DT><B>Paramètre </B><DD><P>
<DL>
<DT><B>argv[]</B><DD><P>Arguments passés au programme par le script
<CODE>java.cgi</CODE>. Non utilisé pour l'instant.</P>
</DL>
</P>
</DL>
</P>

<H2><A NAME="html-class"></A> <A NAME="ss5.5">5.5 HTML</A>
    </H2>


<H3>Syntaxe     </H3>

<P><CODE>public class HTML extends Text</CODE></P>
<H3>Description     </H3>

<P>Les messages sont créés à l'aide des méthodes <CODE>add*()</CODE> de la
classe <CODE>Text</CODE> et des méthodes spécifique au HTML ajoutées par
cette classe. Une fois terminé, le message est envoyé.</P>
<P>Aucun test n'est effectué pour l'instant pour s'asurer que les
méthodes de construction de liste sont utilisées dans le bon
ordre. C'est donc au programmeur de faire attention à ne pas violer
la syntaxe HTML.</P>
<P>Cette  classe se trouve dans le package "Orbits.net".</P>
<H3>Liste des membres     </H3>

<P>
<HR>
<PRE>
       HTML()                  //  Constructeur.
       author()                //  Initialise le nom de l'auteur du document.
       definitionList()        //  Cree une liste de definitions.
       definitionListTerm()    //  Ajoute un terme a la liste de definitions.
       endList()               //  Termine une liste.
       listItem()              //  Ajoute une entree a une liste.
       send()                  //  Envoie le message HTML.
       title()                 //  Initialise le titre du document.
      
</PRE>
<HR>
</P>
<H3>Voir aussi     </H3>

<P><CODE>HTML_Test, Text</CODE>.</P>
<H3>HTML()     </H3>

<P>
<DL>
<DT><B>Finalité</B><DD><P>Construit un objet qui contiendra un message HTML.</P>
<DT><B>Syntaxe</B><DD><P><CODE>public HTML()</CODE></P>
<DT><B>Description</B><DD><P>Crée un message vide qui sera rempli par les
méthodes HTML.</P>
<DT><B>Voir aussi</B><DD><P><CODE>Text</CODE>.</P>
</DL>
</P>
<H3>author()     </H3>

<P>
<DL>
<DT><B>Finalité</B><DD><P>Initialise le nom de l'auteur du document.</P>
<DT><B>Syntaxe</B><DD><P><CODE>public void author ( String auteur )</CODE></P>
<DT><B>Description</B><DD><P>Donne au document un nom d'auteur ayant pour
valeur <CODE>author</CODE>.</P>
<DT><B>Paramètre</B><DD><P>
<DL>
<DT><B>auteur</B><DD><P>Texte à utiliser en tant que nom d'auteur du message.</P>
</DL>
</P>
<DT><B>Voir aussi</B><DD><P><CODE>title()</CODE>.</P>
</DL>
</P>
<H3>definitionList()     </H3>

<P>
<DL>
<DT><B>Finalité</B><DD><P>Crée une liste de définitions.</P>
<DT><B>Syntaxe</B><DD><P><CODE>public void definitionList ()</CODE></P>
<DT><B>Description</B><DD><P>Initialise une liste de définition. Une <EM>liste
de définitions</EM> est une liste spécialisée telle que chaque
entrée de la liste soit un <EM>terme</EM> suivi du <EM>texte</EM>
correspondant à la définition de ce terme. La création d'une liste
de définitions doit être suivie par celle d'au moins un couple
terme/texte, et d'un appel à la méthode <CODE>endList()</CODE>.
<EM>Notons que, pour le moment, les listes ne peuvent pas être
imbriquées.</EM></P>
<DT><B>Voir aussi</B><DD><P><CODE>definitionListTerm()</CODE>, <CODE>endList()</CODE>,
<CODE>listItem()</CODE>.</P>
</DL>
</P>
<H3>definitionListTerm()     </H3>

<P>
<DL>
<DT><B>Finalité</B><DD><P>Ajoute un terme à la liste de définitions.</P>
<DT><B>Syntaxe</B><DD><P><CODE>public void definitionListTerm ()</CODE></P>
<DT><B>Description</B><DD><P>Ajoute un terme à la liste de définitions. Le texte
définissant le partie terme de l'entrée courante de la liste devra
être inséré dans le message après l'appel de cette méthode, et
avant qu'une méthode <CODE>listItem</CODE> correspondante soit appelée.</P>
<DT><B>Voir aussi</B><DD><P><CODE>definitionList()</CODE>, <CODE>listItem()</CODE>.</P>
</DL>
</P>
<H3>endList()     </H3>

<P>
<DL>
<DT><B>Finalité</B><DD><P>Termine une liste.</P>
<DT><B>Syntaxe</B><DD><P><CODE>public void endList ()</CODE></P>
<DT><B>Description</B><DD><P>Cette méthode permet de clore une liste.
<EM>Notons que, pour le moment, les listes ne peuvent pas être
imbriquées.</EM></P>
<DT><B>Voir aussi</B><DD><P><CODE>definitionList()</CODE>.</P>
</DL>
</P>
<H3>listItem()     </H3>

<P>
<DL>
<DT><B>Finalité</B><DD><P>Ajoute une entrée à une liste.</P>
<DT><B>Syntaxe</B><DD><P><CODE>public void listItem ()</CODE></P>
<DT><B></B><DD><P><CODE>public void listItem ( String article )</CODE></P>
<DT><B></B><DD><P><CODE>public boolean listItem ( String terme, String article )</CODE></P>
<DT><B>Description</B><DD><P>Ajoute une entrée à une liste. Si la première
forme est utilisée, le texte de l'article de liste courant devra
être ajouté au message après l'appel de cette méthode, et avant tout
autre appel à des méthodes de liste. Dans la deuxième et troisième
forme, le texte
<CODE>article</CODE> est passé comme paramètre à la méthode, au lieu (ou
en plus) d'être ajouté au message. La troisième forme est spécifique
aux listes de définitions et fournit à la fois le terme et la
définition de l'entrée de liste.</P>
<DT><B>Paramètres</B><DD><P>
<DL>
<DT><B>article</B><DD><P>Le texte de cette entrée de liste de définitions.</P>
<DT><B>terme</B><DD><P>Le texte de la partie terme de cette entrée de liste
de définitions.</P>
</DL>
</P>
<DT><B>Voir aussi</B><DD><P><CODE>definitionList()</CODE>,
<CODE>definitionListTerm()</CODE>,
<CODE>endList()</CODE>.</P>
</DL>
</P>
<H3>send()     </H3>

<P>
<DL>
<DT><B>Finalité</B><DD><P>Envoie le message HTML.</P>
<DT><B>Syntaxe</B><DD><P><CODE>public void send ()</CODE></P>
<DT><B>Description</B><DD><P>Envoie le message HTML.</P>
</DL>
</P>
<H3>title()     </H3>

<P>
<DL>
<DT><B>Finalité</B><DD><P>Donne une valeur au titre du document.</P>
<DT><B>Syntaxe</B><DD><P><CODE>public void title ( String titre )</CODE></P>
<DT><B>Description</B><DD><P>Initialise le texte du titre du document.</P>
<DT><B>Paramètre</B><DD><P>
<DL>
<DT><B>titre</B><DD><P>Le texte du titre de ce message.</P>
</DL>
</P>
<DT><B>Voir aussi</B><DD><P><CODE>author()</CODE>.</P>
</DL>
</P>
<H2><A NAME="html-test-class"></A> <A NAME="ss5.6">5.6 HTML_Test</A>
    </H2>

<P>Cette classe offre à la fois un exemple d'utilisation de la classe
<CODE>HTML</CODE> et un programme de test qui peu servir à s'assurer que
le package <EM>Java CGI</EM> fonctionne correctement.</P>
<H3>Liste des membres     </H3>

<P>
<HR>
<PRE>
       main()      //  main() du programme.
      
</PRE>
<HR>
</P>
<H3>Voir aussi     </H3>

<P><CODE>HTML</CODE>.</P>
<H3>main()     </H3>

<P>
<DL>
<DT><B>Finalité</B><DD><P>Fournit une méthode <CODE>main()</CODE>.</P>
<DT><B>Syntaxe</B><DD><P><CODE>public static void main( String argv[] )</CODE></P>
<DT><B>Description</B><DD><P>Il s'agit du point d'entrée pour un programme CGI
qui retourne une liste des couples nom/valeur d'un document HTML,
chaque couple étant un élément d'une liste de définitions.</P>
<DT><B>Paramètre </B><DD><P>
<DL>
<DT><B>argv[]</B><DD><P>Arguments passés au programme par le script
<CODE>java.cgi</CODE> Non utilisé pour l'instant.</P>
</DL>
</P>
</DL>
</P>

<H2><A NAME="text-class"></A> <A NAME="ss5.7">5.7 Text</A>
    </H2>


<H3>Syntaxe     </H3>

<P><CODE>public abstract class Text</CODE></P>
<H3>Description     </H3>

<P>Cette classe est la superclasse des classes <CODE>Email</CODE> et
<CODE>HTML</CODE>. Les messages sont construits à l'aide des méthodes de
cette classe, puis complétés et formatés grâce aux méthodes des
sous-classes.</P>
<P>Cette classe se trouve dans le package "Orbits.text".</P>
<H3>Liste des membres     </H3>

<P>
<HR>
<PRE>
       Text()            //  Constructeur.
       add()             //  Ajoute du texte a cet objet.
       addLineBreak()    //  Ajoute une rupture de ligne.
       addParagraph()    //  Ajoute une rupture de paragraphe.
      
</PRE>
<HR>
</P>
<H3>Voir aussi     </H3>

<P><CODE>Email</CODE>, <CODE>HTML</CODE>.</P>
<H3>add()     </H3>

<P>
<DL>
<DT><B>Finalité</B><DD><P>Ajoute du texte à cet article</P>
<DT><B>Syntaxe</B><DD><P><CODE>public void add ( char ajout )</CODE></P>
<DT><B></B><DD><P><CODE>public void add ( String ajout )</CODE></P>
<DT><B></B><DD><P><CODE>public void add ( StringBuffer ajout )</CODE></P>
<DT><B>Description</B><DD><P>Ajoute le texte <CODE>ajout</CODE> à la suite du
contenu de cet article.</P>
<DT><B>Paramètre</B><DD><P>
<DL>
<DT><B>ajout</B><DD><P>Texte à ajouter.</P>
</DL>
</P>
<DT><B>Voir aussi</B><DD><P><CODE>addLineBreak()</CODE>, <CODE>addParagraph()</CODE>.</P>
</DL>
</P>
<H3>addLineBreak()     </H3>

<P>
<DL>
<DT><B>Finalité</B><DD><P>Force une rupture de ligne à cet endroit dans le texte.</P>
<DT><B>Syntaxe</B><DD><P><CODE>public void addLineBreak ()</CODE></P>
<DT><B>Description</B><DD><P>Insère une rupture de ligne dans le texte, à
l'endroit du point courant.</P>
<DT><B>Voir aussi</B><DD><P><CODE>add()</CODE>, <CODE>addParagraph()</CODE>.</P>
</DL>
</P>
<H3>addParagraph()     </H3>

<P>
<DL>
<DT><B>Finalité</B><DD><P>Débute un nouveau paragraphe.</P>
<DT><B>Syntaxe</B><DD><P><CODE>public void add ()</CODE></P>
<DT><B>Description</B><DD><P>Débute un  nouveau paragraphe à ce point du flot
textuel.</P>
<DT><B>Voir aussi</B><DD><P><CODE>add()</CODE>, <CODE>addLineBreak()</CODE>.</P>
</DL>
</P>

<H2><A NAME="s6">6. Améliorations prévues</A>   </H2>

<P>
<UL>
<LI>Ajouter à la classe Email :
<DL>
<DT><B>Email( int capacité )</B><DD><P>Quand on connaît à l'avance l'espace à
alloué au message.</P>
<DT><B>sendTo( String [] adresse )</B><DD><P>Ajoute une liste de destinations
principales (champ <CODE>To:</CODE>) au message e-mail.</P>
<DT><B>sendCc( String adresse )</B><DD><P>Ajoute une destination au champ
<CODE>Cc:</CODE> (Carbon-Copy) du message e-mail.</P>
<DT><B>sendCc( String [] address )</B><DD><P>Ajoute une liste de destinations
au champ <CODE>Cc:</CODE> (Carbon-Copy) du message e-mail.</P>
<DT><B>sendBcc( String adresse )</B><DD><P>Ajoute une destination au champ
<CODE>Bcc:</CODE> (Blind Carbon-Copy) du message e-mail.</P>
<DT><B>sendBcc( String [] adresse )</B><DD><P>Ajoute une liste de destinations
au champ <CODE>Bcc:</CODE> (Blind Carbon-Copy) du message e-mail.</P>
</DL>
</LI>
<LI>Ajouter à la classe HTML :
<DL>
<DT><B>HTML( int capacité )</B><DD><P>Quand on connaît à l'avance l'espace à
alloué au message.</P>
<DT><B>public void unorderedList()</B><DD><P>Démarre une liste non ordonnée.</P>
<DT><B>public void orderedList()</B><DD><P>Démarre une liste ordonnée.</P>
<DT><B>public void directoryList()</B><DD><P>Démarre une liste de répertoires.</P>
<DT><B>public void menuList()</B><DD><P>Démarre une liste de menu.</P>
<DT><B>void anchor( String anchorName )</B><DD><P>Spécifie une ancre.</P>
<DT><B>void link( String url, String text )</B><DD><P>Spécifie un lien.</P>
<DT><B>void applet( String url, String altText )</B><DD><P>Spécifie un lien applet.</P>
</DL>
</LI>
<LI>Autoriser l'imbrication des listes HTML.</LI>
<LI>Ajouter du code de gestion d'erreur pour s'assurer que le formatage
des listes HTML s'effectue dans le bon ordre.</LI>
<LI>L'emplacement du fichier des informations d'environnement devra être
configurable à partir du <CODE>Makefile</CODE>.</LI>
<LI>&Eacute;liminer les couples nom/valeur vides qui apparaissent dans la
liste quand la méthode GET est utilisée pour le transfert des
données.</LI>
<LI>Réfléchir à un moyen d'implémenter l'interface java.util.Enumeration
avec CGI pour fournir des noms de variables.</LI>
<LI>Ajouter une classe <CODE>Test</CODE>, qui permettrait d'utiliser toutes
les méthodes de ce package.</LI>
<LI>Documenter la manière dont <CODE>CGI_Test</CODE>,
<CODE>Email_Test</CODE> et <CODE>HTML_Test</CODE> se réfèrent
mutuellement pour fournir des tests incrémentaux facilitant le
débogage.</LI>
<LI>Documenter la manière dont Test se sert de toutes les fonctionnalités
présentes dans le package.</LI>
</UL>
</P>

<H2><A NAME="s7">7. Modifications</A>   </H2>



<H2><A NAME="ss7.1">7.1 Modifications entre les versions 0.3 et 0.4</A>
    </H2>

<P>
<UL>
<LI>Développement de la classe HTML pour qu'elle fournisse des
fonctionnalités minimales.</LI>
<LI>&Eacute;criture de la classe HTML_Test et de
javahtmltest.html-dist.</LI>
<LI>Ajout des méthodes HTML gérant les listes de définitions.</LI>
</UL>
</P>

<H2><A NAME="ss7.2">7.2 Modifications entre les versions 0.2 et 0.3</A>
    </H2>

<P>
<UL>
<LI>Ajout des classes Text et Email. HTML a été également ajouté, sans
qu'il soit vraiment utilisable.</LI>
<LI>Placement des diverses classes dans des packages. Les classes
principales se trouvent dans <CODE>Orbits.net.*</CODE>, la classe de
support <CODE>Text</CODE> se trouve dans <CODE>Orbits.text.Text</CODE>.</LI>
<LI><CODE>CGItest</CODE> devient <CODE>CGI_Test</CODE>.</LI>
<LI>Ajout de la classe <CODE>Email_Test</CODE>.</LI>
</UL>
</P>

<H2><A NAME="ss7.3">7.3 Modifications entre les versions 0.1 et 0.2</A>
    </H2>

<P>
<UL>
<LI>Les variables d'environnement sont placées dans un fichier
temporaire, au lieu d'être passées à l'interpréteur Java sur la
ligne de commande. La classe <CODE>CGI</CODE> et le script
<CODE>java.cgi</CODE> durent être modifiés.</LI>
<LI>Le document <CODE>javacgitest.html</CODE> devient partie intégrante de
la distribution.</LI>
<LI>Les fichiers texte qui sont modifiés par <CODE>make</CODE> lors de
l'installation sont fournis avec des noms terminés par
<EM>-dist</EM>.</LI>
</UL>
</P>

</BODY>
</HTML>
