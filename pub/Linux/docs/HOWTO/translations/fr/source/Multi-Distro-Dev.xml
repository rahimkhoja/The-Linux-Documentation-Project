<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
  "http://www.docbook.org/xml/4.3/docbookx.dtd">

<article id="Developement-multi-distrib" lang="fr">

  <articleinfo>
  
    <title>
    
        Petit guide du développement multi-distributions
    
    </title>

    <subtitle>
        
        Traduction française du <foreignphrase>Development for Multiple 
        Linux Distributions mini-HOWTO</foreignphrase>
    
    </subtitle>

    <author>
      <firstname>Ed</firstname>
      <surname>Hill</surname>
      <email>ed CHEZ eh3 POINT com</email>
    </author>
    
    <othercredit role="traduction">
	<firstname>Joan</firstname>
	<surname>Goutte</surname>
	<contrib>Adaptation française</contrib>
	<email>joan CHEZ fra POINT net</email>
    </othercredit>
    
    <othercredit role="relecture">
        <firstname>Dorian</firstname>
        <surname>Musso</surname>
        <contrib>Relecture de la version française</contrib>
        <email>dodolecyclo CHEZ wanadoo POINT fr</email>
    </othercredit>

    <othercredit role="relecture">
        <firstname>Simon</firstname>
        <surname>Depiets</surname>
        <contrib>Relecture de la version française</contrib>
        <email>2df CHEZ tuxfamily POINT org</email>
    </othercredit>

    <othercredit role="publication">
        <firstname>Jean-Philippe</firstname>
        <surname>Guérard</surname>
        <contrib>Préparation de la publication de la v.f.</contrib>
	<email>fevrier CHEZ tigreraye POINT org</email>
    </othercredit>
    
    <abstract><para>
        
        Ce document décrit un bricolage rapide destiné à faciliter le
        développement et les tests de programmes tournant dans l'espace
        utilisateurs pour différentes distributions Linux.
    
    </para></abstract>
    
    <pubdate>2004-03-11</pubdate>
    <releaseinfo>Version&nbsp;: 0.9.1.fr.1.0</releaseinfo>
    
    <revhistory>
      <revision>
      <revnumber>0.9.1.fr.1.0</revnumber>
	<date>2004-03-11</date>
	<authorinitials>JG, DM, SD, JPG</authorinitials>
	<revremark>Traduction française</revremark>
      </revision>
      <revision>
	<revnumber>0.9.1</revnumber>
	<date>2002-08-14</date>
	<authorinitials>EH3</authorinitials>
	<revremark>
	    
	    Petite mise à jour pour l'utilisation de X11 (sockets).
	    <emphasis>Small update for using X11
	    (sockets).</emphasis>
	    
	</revremark>
      </revision>
      <revision>
	<revnumber>0.9</revnumber>
	<date>2001-12-03</date>
	<authorinitials>EH3</authorinitials>
	
	<revremark>
	
	    Version initiale. <emphasis>Initial
	    version.</emphasis>
	
	</revremark>

      </revision>
    </revhistory>
  </articleinfo>

  <section id="Introduction">
  
    <title>Introduction</title>

    <para>
          
        Lors du développement d'une application, il est parfois
        nécessaire de programmer ou de tester des programmes sur
        différentes distributions Linux. Ce petit guide trace les
        grandes lignes d'une utilisation élégante de
        <command>chroot</command> qui peut, dans bien des cas, éviter de
        redémarrer sous différentes distribution Linux pour réaliser des
        tests ou des développements.
          
    </para>

    <para>
        
        En quelques mots, l'astuce consiste à placer tous les fichiers
        d'une certaine distribution dans un simple répertoire et de
        faire un <command>chroot</command><footnote>
        
        <para> La commande <command>chroot</command> permet d'exécuter
        une commande ou un interpréteur de commandes en utilisant un
        répertoire racine différent. On parle d'une commande exécutée
        dans un <firstterm>environnement d'exécution
        restreint.</firstterm> </para> </footnote>
        
        vers l'intérieur de ce répertoire. Vous vous retrouverez ainsi
        dans un environnement d'exécution restreint qui vous permettra
        de développer, tester ou rechercher les erreurs de votre
        programme dans le contexte qui vous intéresse. Cette méthode
        fonctionnera à condition que&nbsp;:
        
    </para>
    
    <orderedlist>

    <listitem><para>
    
        la version du noyau de la distribution «&nbsp;principale&nbsp;»
        (ou «&nbsp;primaire&nbsp;») que vous exécutez soit (un minimum)
        compatible avec la distribution «&nbsp;secondaire&nbsp;»,
        c'est-à-dire la distribution exécutée en environnement
        restreint&nbsp;;
    
    </para></listitem>
    
    <listitem><para>
    
        votre application tourne principalement dans l'espace
        utilisateur (i. e.&nbsp;: ne soit pas un module du noyau) et ne
        dépende pas intimement d'un dispositif particulier du noyau (i.
        e.&nbsp;: du comportement de <filename>/proc</filename>).

    </para></listitem>
    
    </orderedlist>

    <section id="droits-d-utilisation">
    
      <title>Droits d'utilisation</title>

      <para>
          Copyright &copy; 2001 Ed Hill III.
      </para>
      
      <para>
          Copyright &copy; 2004 Joan Goutte, Dorian Musso, Simon Depiets 
          et Jean-Philippe Guérard pour la version française.
      </para>
      
      <para>
          
          Vous pouvez redistribuer et modifier ce document selon les
          termes de la Licence de documentation libre GNU (FDL) (version
          1.1 ou toute version ultérieure publiée par la Free Software
          Foundation), sans section invariante, ni texte de première ou
          de quatrième de couverture. Une copie de cette licence est
          accessible sur <ulink
          url="http://www.gnu.org/copyleft/fdl.html"/>.

      </para>

      <para><foreignphrase>
      
          Permission is granted to copy, distribute and/or modify this
          document under the terms of the GNU Free Documentation
          License, Version 1.1 or any later version published by the
          Free Software Foundation; with no Invariant Sections, with no
          Front-Cover Texts, and with no Back-Cover Texts. A copy of the
          license is available at <ulink
          url="http://www.gnu.org/copyleft/fdl.html"/>.
      
      </foreignphrase></para>

    </section>

    <section id="commentaires">
    
      <title>Commentaires et corrections</title>
      
      <para>
      
          Ce document a été traduit dans le cadre du projet 
          <ulink url="http://www.traduc.org">traduc.org</ulink>. 
          N'hésitez pas à faire parvenir vos commentaires, corrections 
          et suggestions d'améliorations à
          <email>commentaires CHEZ traduc POINT org</email>.
      
      </para>
      
    </section>
  </section>

  <section id="installation">
  
    <title>Installation</title>

    <para>
    
        Nous supposerons que vous avez déjà&nbsp;:
    
    </para>
    
    <orderedlist>
    
    <listitem><para>

        une distribution Linux «&nbsp;principale&nbsp;» (ou
        «&nbsp;primaire&nbsp;») installée avec un noyau 2.4 ou
        supérieur&nbsp;;
        
    </para></listitem>
    <listitem><para>
    
        une partition libre de 2 à 4&nbsp;Go&nbsp;;
    
    </para></listitem>

    <listitem><para>
    
        suffisamment d'espace disque pour l'installation des
        distributions secondaires (et pour les travaux de
        développement et de test en découlant).
        
    </para></listitem>
    
    </orderedlist>

    <para>
    
        Partant de ces hypothèses, voici les grandes lignes de l'une des
        solutions permettant d'installer plusieurs distributions
        secondaires qui seront utilisées pour des développements, des
        tests, ou d'autres choses&nbsp;:
        
    </para>

    <orderedlist>
    
    <listitem><para>
    
        Premièrement, créez ou allouez une partition non utilisée de
        votre disque dur qui soit assez grande (2 à 4&nbsp;Go seront en
        général suffisants) pour faire une installation de base de l'une
        des distributions Linux secondaires.
        
    </para></listitem>
    
    <listitem id="installez"><para>
    
        Installez la distribution secondaire sur cette partition mais ne
        l'ajoutez pas à votre configuration de démarrage. Notez que
        cette installation a seulement besoin d'inclure les paquets que
        votre application (ou votre essai) exige. Par exemple, il est
        possible que vous puissiez vous passez d'installer des
        applications très gourmandes en espaces telles que le serveur X.
    
    </para></listitem>

    <listitem id="copiez"><para>
        
        Redémarrez votre distribution Linux principale et montez la
        partition contenant la distribution fraîchement installée. 
        Copiez (de préférence en utilisant <filename>tar -cp</filename>
        ou une autre méthode conservant les droits) tous les fichiers de
        la distribution secondaire vers une destination telle que <filename
        class="directory">/opt/distributions/<replaceable>NOM_DE_LA_DISTRIBUTION</replaceable></filename>.
        
    </para></listitem>
 
    <listitem><para>

        Répétez les étapes <xref linkend="installez"
        xrefstyle="labelnumber"/> et <xref linkend="copiez"
        xrefstyle="labelnumber"/> pour toutes les distributions
        supplémentaires que vous souhaitez installer. Au bout du compte,
        vous devriez obtenir une structure de répertoires ressemblant à
        celle-ci&nbsp;:

    </para>
    
<programlisting>
/opt/distributions/redhat_6.2/
                   suse_7.2/
                   mandrake_8.1/
                   debian-potato/
                   slackware_8.0/
</programlisting>

    <para>
    
        où chaque répertoire contient la totalité des fichiers issus de 
        l'installation de chaque distribution.

    </para></listitem>
    
    </orderedlist>

  </section>

  <section id="utilisation">
  
    <title>
    
        Utiliser les distributions secondaires
    
    </title>

    <para>
        
        Une fois les distributions secondaires installées, les étapes à
        suivre pour les utiliser sont&nbsp;:
    
    </para>

    <orderedlist>
    
    <listitem><para>
    
        Il est important que la distribution Linux principale utilise un
        noyau Linux 2.4 ou plus récent, afin de profiter des
        possibilités de points de montage multiples qu'offrent ces
        noyaux. Pour de nombreuses tâches, les systèmes de fichiers
        <filename class="directory">/proc</filename> et <filename
        class="directory">/tmp</filename> devront être montés à nouveau
        dans la distribution secondaire en utilisant&nbsp;:
        
    </para>

<programlisting>
mount --bind /proc /opt/distributions/redhat_6.2/proc
mount --bind /tmp /opt/distributions/redhat_6.2/tmp
</programlisting>
    
    </listitem>
    
    <listitem><para>
    
        Aussi, il peut être utile de réaliser un nouveau montage (au
        lieu de la copier) de l'arborescence des sources de la première
        distribution dans la distribution secondaire&nbsp;:
        
    </para>

<programlisting>
mount --bind /home/<replaceable>UTILISATEUR</replaceable>/src/<replaceable>PROJET</replaceable> \
    /opt/distributions/redhat_6.2/home/<replaceable>UTILISATEUR</replaceable>/src/<replaceable>PROJET</replaceable>
</programlisting>

    </listitem>
    
    <listitem><para>
    
        Connectez-vous sous le compte <literal>root</literal> et
        faites&nbsp;:

    </para>

<programlisting>
xhost +localhost chroot /opt/distributions/redhat_6.2 /bin/bash
</programlisting>

    <para>
        
        pour obtenir un interpréteur de commandes
        (<foreignphrase>shell</foreignphrase>) dans l'une des
        distributions secondaires. Notez que la commande
        <command>xhost</command> n'est utile que si vous avez
        l'intention d'utiliser des applications X.
        
    </para></listitem>
    
    <listitem><para>
	
        Enfin (si nécessaire) créez un utilisateur dans l'environnement
        restreint. Vous pouvez maintenant développer, construire ou
        tester votre application dans cette distribution Linux
        «&nbsp;séparée&nbsp;»&nbsp;! Notez que vous aurez également à
        définir la variable d'environnement <literal>DISPLAY</literal>
        si vous désirez utiliser des applications X.
 
    </para></listitem>
    </orderedlist>

    <para>
        
        Bien&nbsp;! Vous disposez maintenant d'un interpréteur de 
        commandes que vous pouvez, à toutes fins utiles, exécuter sous 
        la distribution Linux secondaire de votre choix.
        
    </para>

  </section>

  <section id="remerciements">
  
      <title>Remerciements</title>

    <para>
        
        Je ne suis pas à l'origine des idées présentées dans ce petit
        guide. Elles ont été recueillies dans des messages de Ben Reed
        (de <ulink url="http://www.opennms.org/">OpenNMS</ulink>) pour
        l'une des listes de discussions du groupe d'utilisateurs de
        Linux <ulink url="http://www.trilug.org/">TriLUG</ulink>. J'ai
        trouvé que ces informations pouvaient être très utiles et j'ai
        voulu documenter ces idées pour les autres.
        
    </para>

  </section>

</article>

