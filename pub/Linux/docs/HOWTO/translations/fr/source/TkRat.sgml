<!doctype linuxdoc system>

  <article>
    
      <title>TkRat mini-HOWTO
      <author>Dave Whitinger, <htmlurl url="mailto:dave@linuxtoday.com"
	    name="dave@linuxtoday.com">&nl;
	  Version française&nbsp;: Philippe Martin, <htmlurl url="mailto:feloy@wanadoo.fr"
	    name="feloy@wanadoo.fr">
      <date>v1.2, 15 Septembre 1999
      <abstract>
	Voici le TkRat mini-HOWTO.
	Ce document est destiné à quiconque voudrait utiliser Linux pour envoyer et
	recevoir des messages électroniques par l'Internet.
      </abstract>
      
    <toc>
    
    <sect>Introduction
      <p>
	Ce document est maintenu par Dave Whitinger (<htmlurl
	  url="mailto:dave@linuxtoday.com" name="dave@linuxtoday.com">). Merci de me
	contacter pour toutes questions ou idées relatives à cet HOWTO.
	
	Ce document va tenter de décrire comment&nbsp;:
	
	<enum>
	  <item>Installer le programme de messagerie TkRat,
	  <item>Récupérer ses messages chez un Fournisseur de Services Internet (<bf/FSI/),
	  <item>Lire, stocker et envoyer des messages,
	  <item>Trier ses messages dans différents classeurs.
	</enum>
	
	Ce document suppose que vous utilisez Linux avec le système X Window, avez
	déjà établi une connexion avec votre Fournisseur de Services Internet, et
	avez un compte POP chez ce fournisseur.
	
	Responsabilités&nbsp;: Toutes responsabilités habituelles s'appliquent. L'auteur
	ne peut en aucun cas être tenu responsable d'une (mauvaise) utilisation des
	informations données ici.  Ce document ne tente en aucun cas de faire
	autorité. L'auteur a volontairement créé ce document séparément de toute
	entité avec laquelle il pourrait être impliqué. En lisant ce document, vous
	acceptez de ne créer à l'auteur ni ennuis ni griefs.  :)
	
    <sect>Installer TkRat
      <P>
	Je voudrais souligner qu'il existe un grand nombre d'excellents programmes
	de messagerie disponibles sous Linux. C'est toujours une question de goût
	personnel que de choisir lequel utiliser.
	
	Cela dit, je dois vous avouer que j'utilise un programme appelé
	<tt>TkRat</tt> depuis plus de deux ans maintenant --&nbsp;et je l'adore. C'est un
	programme avec une interface graphique qui a toutes les caractéristiques que
	vous attendez d'un programme de messagerie de qualité&nbsp;: il est simple
	d'apprentissage, il est puissant, et il est libre. Pour ces raisons, cet
	HOWTO ne traitera que de TkRat.
	
	La première chose à faire est de récupérer <tt>TkRat</tt>. Vous pouvez soit
	obtenir les sources que vous compilerez, soit obtenir les exécutables.
	
	Voici quelques URL pour le logiciel&nbsp;:
	
	<itemize>
	  <item><url url="ftp://ftp.md.chalmers.se/pub/tkrat/tkrat-2.0b3.tar.gz"
	      name="ftp://ftp.md.chalmers.se/pub/tkrat/tkrat-2.0b3.tar.gz">
	    (Téléchargement via ftp)
	    
	  <item><url
	      url="http://www.dtek.chalmers.se/~maf/ratatosk/tkrat-2.0b3.tar.gz"
	      name="http://www.dtek.chalmers.se/~maf/ratatosk/tkrat-2.0b3.tar.gz">
	    (Téléchargement via http) 
	    
	  <item><url
	      url="http://www.dtek.chalmers.se/~maf/ratatosk/download.html"
	      name="http://www.dtek.chalmers.se/~maf/ratatosk/download.html">
	    (Page de téléchargement - vérifiez la dernière version&nbsp;!) 
	    
	</itemize>

	Lorsque vous avez téléchargé l'archive, vous êtes prêt à l'installer
	sur votre système.

	Pour installer les sources <tt>tar.gz</tt>, utilisez les commandes&nbsp;:
	<code>
	  tar -zcvpf tkrat-2.0b3.tar.gz
	  cd tkrat-2.0b3
	  ./configure
	  make
	  make install
	</code>
	Si quelque chose échoue, consultez les fichiers <tt>INSTALL</tt> et
	<tt>README</tt> se trouvant dans le répertoire
	<tt>tkrat-2.0b3</tt>. Notez que vous aurez besoin d'une version de tcl
	supérieure à 8.1 pour compiler.  Vous pouvez obtenir la dernière version
	de tcl depuis <url url="http://www.scriptics.com/" name="scriptics.com">.

	Bravo - <tt>TkRat</tt> devrait être installé sur votre système maintenant.

    <sect>Récupérer vos messages
      <P>
	Afin de lire vos messages, le mieux est généralement d'utiliser le programme
	appelé <tt>fetchmail</tt>. Les instructions suivantes sont réputées marcher
	parfaitement pour la version 2.2 de <tt>fetchmail</tt> --&nbsp;bien qu'elles
	doivent être applicables à d'autres versions.

	(Note : <tt>fetchmail</tt> est très certainement déjà installé sur votre
	système, celui-ci étant inclus dans toutes les distributions Linux que je
	connaisse -&nbsp;si tel n'est pas le cas, prière de me le faire savoir !)

	Exécutez les étapes suivantes&nbsp;:

	<code>
	  echo "server pop.fr protocol pop3 username dave password xxxxx" > ~/.fetchmailrc
	</code>
	
	(N'oubliez pas de remplacer <em>pop.fr</em> par le nom du serveur POP de
	votre FSI. Remplacez <em/dave/ par votre identifiant de messagerie et
	<em/xxxxx/ par votre mot de passe associé.)
	
	À partir de maintenant, chaque fois que vous voulez voir si vous avez des
	messages, tapez juste <tt/fetchmail/ sur la ligne de
	commande. <tt/fetchmail/ va partir récupérer tous vos messages et les
	stocker dans votre classeur de messages local.

    <sect>Configurer <tt/TkRat/
      <p>

	Depuis la ligne de commande, tapez <tt/tkrat/ suivi d'<em/Entrée/.&nl;
	Cliquez sur <tt/Create/.&nl;
	Lisez le message qu'il vous présente, puis cliquez sur <tt/Continue/.

	À ce point, vous êtes amené au programme principal de <tt/TkRat/. La
	première chose à faire est de l'adapter à votre système local.

	<enum>
	  <item>Allez dans le menu <tt/Admin/, et choisissez <tt/Preferences/,
	  <item>Cliquez sur <tt/Sending/,
	  <item>Entrez votre adresse électronique dans le champ <tt/Default Reply-To/,
	  <item>Entrez votre adresse électronique, suivie de votre nom entre
	  parenthèses dans le champ <tt/Use from address/, par exemple
	  dave@linuxtoday.com (Dave Whitinger)
	  <item>Entrez votre nom de domaine dans le champ <tt/Domain/. Si votre
	  adresse électronique est <tt/utilisateur@xyz.fr/, entrez <tt/xyz.fr/
	  <item>Cliquez sur <tt/Apply/,
	  <item>Cliquez sur <tt/Method/,
	  <item>Pour <tt/Send Via/, sélectionnez <tt/SMTP/,
	  <item>Dans le champ <tt/SMTP host/, entrez l'adresse du serveur SMTP de
	    votre FSI (ils devraient être capable de vous fournir cette information),
	  <item>Cliquez sur <tt/Apply/, puis sur <tt/Dismiss/.
	</enum>
	
    <sect>Utiliser <tt/TkRat/
      <P>
	Au démarrage de <tt/TkRat/, vous noterez que vous êtes dans un classeur
	appelé <tt/INBOX/. Utilisez <tt/fetchmail/ pour récupérer vos messages. Si
	vous en avez, ils apparaîtront dans le classeur <tt/INBOX/.

	<tt/TkRat/ a une interface intuitive. La moitié supérieure de l'écran montre
	la liste des messages que vous avez reçus (chaque ligne étant un message
	différent). La moitié inférieure montre le contenu du message sélectionné.

	Vous pouvez lire un message en cliquant simplement sur ce message dans la liste.

	Lorsque vous avez fini de lire un message, vous pouvez aller voir un autre
	message, répondre à ce message, écrire un nouveau message, ou déplacer ce
	message vers un autre classeur.

	Les <tt>Folders</tt>
	sont un moyen de stocker vos messages électroniques dans
	différents <em/classeurs/. Ainsi, vous pouvez conserver plusieurs classeurs,
	chacun contenant les messages sur un certain sujet.

	Exécutez les instructions suivantes pour créer des classeurs&nbsp;:
	<enum>
	  <item>Choisissez le menu <tt/Admin/, puis <tt>New/Edit Folders</tt>
	  <item>Vous voyez une boîte avec un classeur <tt/INBOX/. Cliquez (avec le
	    bouton gauche) sur cette boîte.
	  <item>Il vous est alors présenté un menu, sélectionnez-y <tt/New File Folder/.
	  <item>Il vous sera présenté une boîte de dialogue vous demandant des informations.
	  <item>Dans le premier champ, entrez un nom pour le classeur.
	  <item>Dans le second, entrez le nom de fichier qui sera utilisé pour
	    y stocker les messages.&nl;
	    Un petit conseil&nbsp;: utilisez quelque chose comme
	    <tt>/home/utilisateur/mail/nom_du_classeur</tt>. Par exemple, si le premier
	    champ est <em/Personnel/, le second serait quelque chose comme
	    <tt>home/dave/mail/personnel</tt> (en supposant que votre nom d'utilisateur
	    soit <em/dave/.)
	  <item>Cliquez sur <tt/OK/. Vous noterez que votre nouveau classeur apparaît
	    maintenant dans la liste des classeurs. Allez alors dans <tt/Window/, puis
	    <tt/Close/. 
	</enum>

	Vous pouvez maintenant déplacer vos messages vers le nouveau classeur - et
	basculer vers ce classeur en sélectionnant son nom sous le menu <tt/Folders/.

	Envoyer des messages est aussi simple. Cliquez sur <tt/Compose/, tapez
	l'adresse électronique du destinataire, le sujet, puis le message.

	Lorsque vous avez terminé, cliquez sur <tt/Send/.

    <sect>Tri automatique des messages dans les classeurs
      <P>
	Si vous êtes comme moi, vous recevez près de 3500 messages par jour. Chaque
	fois que vous allez chercher vos messages 
	(Note&nbsp: <em/fetch mail en anglais/),
	vous devez parcourir tous vos messages pour trouver ceux qui vous
	intéressent.

	Ce n'est plus un problème, grâce à <tt/Procmail/.
	
	<tt/Procmail/ fonctionne ainsi&nbsp;:

	<tt/Procmail/ examine chaque message au moment où il est récupéré, et
	exécute une série de tâches fondées sur certaines règles que vous lui avez
	spécifiées. 

	Disons, par exemple, que je reçoive 200 messages par jour d'une certaine
	liste (prenons ici la liste <em/linux-machin/). Plutôt que de voir tous ces
	messages partir directement dans mon classeur <tt/INBOX/, je préfère qu'ils
	soient automatiquement filtrés et dirigés dans un classeur appelé
	<em/liste-machin/.
	
	La première chose à faire est de prendre quelques exemples de messages provenant de
	cette liste et d'en examiner les entêtes.

	Je commence à discerner un motif répétitif. Chaque message provenant de
	cette liste contient une ligne disant&nbsp;:

	<verb>
	  Sender: owner-linux-machin@bidule.chouette.fr
	</verb>

	Je peux maintenant dire à <tt/procmail/ de placer chaque message contenant
	cette ligne dans un certain classeur.

	Je peux le préciser à <tt/procmail/ à travers un fichier <tt/.procmailrc/.

	Je vais utiliser mon éditeur de texte préféré pour créer un fichier texte
	dans mon répertoire racine, appelé <tt/.procmailrc/.

	Ce fichier ressemblera à&nbsp;:

	<code>
	  LOGFILE=$HOME/.pmlog
	  MAILDIR=$HOME/mail
	  VERBOSE

	  # liste linux-machin
	  :0 Hw
	  * ^.*[Ss]ender: owner-linux-machin@bidule.chouette.fr
	  liste-machin

	  # S'il arrive ici, l'envoyer dans mon classeur 'nouveaux'
	  :0 Hw
	  nouveaux

	</code>
	
	Examinez la ligne <tt>[Ss]ender</tt>. Vous noterez que cette ligne est ce
	que tous les messages provenant de cette liste ont en commun. 

	Cette section dit à <tt/procmail/ de placer les messages arrivant avec une
	entête comme celle-ci dans le classeur <em/liste-machin/.

	La section suivante dit que si le message ne correspond à aucune règle
	précédente, alors il faut le placer dans le classeur <em/nouveaux/.

	Maintenant, disons que je veuille que les messages de la part de mon ami
	<em/EJ/ aillent dans un classeur nommé <em/EJ/.

	Il suffit de rajouter une section à mon fichier <tt/.procmailrc/&nbsp;:

	<code>
	  LOGFILE=$HOME/.pmlog
	  MAILDIR=$HOME/mail
	  VERBOSE
	  
	  # liste linux-machin
	  :0 Hw
	  * ^.*[Ss]ender: owner-linux-machin@bidule.chouette.fr
	  liste-machin

	  # Message de E.J. !
	  :0 Hw
	  * ^.*[Ff]rom: ej@monpote.fr
	  ej

	  # S'il arrive ici, l'envoyer dans mon classeur 'nouveaux'
	  :0 Hw
	  nouveaux
	</code>

	Remarquez la nouvelle section pour <em/EJ/. Lorsqu'un message y arrive avec
	son adresse dans le champ <tt/From/, il sera automatiquement placé dans mon
	classeur <tt/ej/.

	Maintenant, disons qu'il y ait un boiteux par-là qui tienne à
	m'écrire. Je ne veux pas entendre parler de lui, mais il insiste. Encore une
	fois - <tt/procmail/ à la rescousse.

	Disons alors que ne ne veuille recevoir aucun message de <em/Bill Gates/. Je
	peux définir un expéditeur dont tous les messages seront effacés. Voyez alors
	mon nouveau <tt/.procmailrc/&nbsp;:

	<code>

	  LOGFILE=$HOME/.pmlog
	  MAILDIR=$HOME/mail
	  VERBOSE
	  
	  # Provient-il de Bill Gates?  Si oui, A LA POUBELLE !!!
	  :0 Hw
	  * ^.*[Ff]rom: bgates@microsoft.com
	  /dev/null

	  # liste linux-machin
	  :0 Hw
	  * ^.*[Ss]ender: owner-linux-machin@bidule.chouette.fr
	  liste-machin

	  # Message de EJ !
	  :0 Hw
	  * ^.*[Ff]rom: ej@monpote.fr
	  ej

	  # S'il arrive ici, l'envoyer dans mon classeur 'nouveaux'
	  :0 Hw
	  nouveaux
	</code>

	Maintenant, j'ai un fichier <tt/.procmailrc/ plutôt bien. Examinons 
	ce que <tt/procmail/ va faire de chaque message qu'il reçoit.

	Premièrement, il regarde si ce message provient de
	<em/bgates@microsoft.com/. Si oui, il l'efface et c'est fait.
	
	Si le message est passé à travers la première vérification, 
	<tt>procmail</tt> regarde s'il
	contient <em/owner-linux-machin@bidule.chouette.fr/ dans l'entête. Si
	oui, il le dépose dans le classeur <tt/liste-machin/, et voilà.

	Si le message est aussi passé à travers celle-là, il regarde s'il provient
	d'<em/EJ/. Si oui, il le place dans le classeur <tt/ej/.

	Maintenant, si le message est passé à travers tous ces tests, alors il le
	place dans le classeur <tt/nouveaux/.

	Une fois ces classeurs mis en place et <tt/procmail/ filtrant correctement
	vos messages, vous pouvez aller dans <tt/TkRat/, <tt>Admin - New/Edit
	  Folder</tt> et créer les classeurs pour chaque fichier. Ils seront placés
	dans <tt>/home/utilisateur/mail/nom_classeur</tt>

    <sect>Copyright
      <P>
	Ce HOWTO est Copyright 1998, 1999 par Dave Whitinger, 
	et c'est un document libre.
	Vous pouvez le redistribuer et/ou le modifier sous les termes de la GPL (GNU
	General Public License) publiée par la FSF (Free Software Foundation)&nbsp;; soit
	la version 2 de la Licence, soit une version ultérieure.


    <sect>Remerciements
      <P>
	Je remercie tout particulièrement Martin Forsse'n
	(<em/maf@dtek.chalmers.se/) pour avoir créé l'<em/agent utilisateur de
	  messagerie/ <tt/TkRat/.

	Je remercie également le <em/North Texas Linux User's Group/ (Dallas, Texas),
	pour qui j'ai à l'origine écrit ce document début
	1998. Aujourd'hui aucun remerciement ne va plus à aucun groupe
	d'utilisateurs, car je vis dans les montagnes de l'Est du Tennessee, où
	je pense être le seul utilisateur de Linux (ou même utilisateur d'un
	ordinateur) à 50 miles à la ronde.

	Notez aussi&nbsp;: <url url="mailto:nic@postilion.org" name="Nic Bernstein">
	a fait bifurquer le code de TkRat pour créer un agent de messagerie
	appelé <url url="http://www.postilion.org/" name="Postilion">.  Il
	semble être un excellent agent de messagerie avec un grand nombre de
	nouvelles fonctionnalités qui ne sont pas dans TkRat, mais, néammoins, 
	je continue à utiliser TkRat.

  </article>

