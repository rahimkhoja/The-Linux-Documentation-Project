<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
 "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
<!ENTITY howto      "http://www.traduc.org/docs/howto/lecture/">
<!ENTITY guide      "http://www.traduc.org/docs/guides/lecture/">
<!ENTITY source     "http://www.traduc.org/cgi-bin/viewcvs.cgi/guides_pratiques/">
<!ENTITY ldp-base   "http://en.tldp.org/HOWTO/">
<!ENTITY ldp-other  "http://www.ibiblio.org/pub/Linux/docs/HOWTO/other-formats/">
<!ENTITY image      "images/TimePrecision-HOWTO/">
]>

<article lang="fr">
  <articleinfo>
    <title>
        Gestion précise de l'heure et de la date
    </title>
    <subtitle>
        Version française du <foreignphrase>Managing Accurate Date and 
        Time</foreignphrase>
    </subtitle>

    <copyright>
      <year>2002</year>
      <year>2003</year>
      <year>2004</year>
      <holder>Avi Alkalay</holder>
    </copyright>

    <copyright>
      <year>2004</year>
      <year>2005</year>
      <holder>Philippe Wautelet</holder>
      <holder>Raphaël Semeteys</holder>
      <holder>Jean-Philippe Guérard</holder>
    </copyright>

    <authorgroup>
      <author>
        <firstname>Avi</firstname>

        <surname>Alkalay</surname>

        <affiliation>

          <orgname>
            IBM équipe Impact Linux&nbsp;: <ulink 
            url="http://ibm.com/linux"/>
          </orgname>

          <orgdiv>
            Consultant Linux et normes ouvertes&nbsp;: architecte en 
            chef informatique et logiciels
          </orgdiv>

          <address>
            <email>avi CHEZ unix POINT sh</email>
          </address>

        </affiliation>
      </author>

      <othercredit>
        <firstname>Brad</firstname>
        <surname>Knowles</surname>
        <contrib>
          Suggestion d'utiliser pool.ntp.org et des serveurs publics de 
          temps NTP de strate 2
        </contrib>
      </othercredit>

      <othercredit>
        <firstname>Kent</firstname>
        <surname>Borg</surname>
        <contrib>Suggestion d'utiliser ntpq au lieu de ntpdc</contrib>
      </othercredit>

      <othercredit>
        <firstname>Yura</firstname>
        <surname>Moron</surname>
        <contrib>Explication des informations données par ntpq et 
        ntpdc</contrib>
      </othercredit>

      <othercredit role="translator">
        <firstname>Takeo</firstname>
        <surname>Nakano</surname>
        <contrib><ulink url="http://www.linux.or.jp/JF/JFdocs/TimePrecision-HOWTO/">Adaptation japonaise</ulink></contrib>
      </othercredit>

      <othercredit role="translator">
        <firstname>SHAKI</firstname>
	<contrib><ulink url="http://computerlib.narod.ru/html/linuxtime.htm">Adaptation russe</ulink></contrib>
      </othercredit>

      <othercredit role="translator">
        <firstname>Mihaly</firstname>
        <surname>Gyulai</surname>
	<contrib><ulink url="http://tldp.fsf.hu/HOWTO/TimePrecision-HOWTO-hu/index.html">Adaptation hongroise</ulink>, la section chrony et la toute première section</contrib>
      </othercredit>
      
      <othercredit role="traduction" class="translator">
        <firstname>Philippe</firstname>
        <surname>Wautelet</surname>
	<contrib><ulink url="http://www.traduc.org/docs/HOWTO/lecture/TimePrecision-HOWTO.html">Adaptation française</ulink></contrib>
        <email>traduc CHEZ fractalzone POINT be</email>
      </othercredit>
      
      <othercredit role="relecture" class="translator">
        <firstname>Raphaël</firstname>
        <surname>Semeteys</surname>
        <contrib>Relecture de la version française</contrib>
        <email>raphael POINT semeteys CHEZ wanadoo POINT fr</email>
      </othercredit>

      <othercredit role="publication" class="copyeditor">
        <firstname>Jean-Philippe</firstname>
        <surname>Guérard</surname>
        <contrib>Préparation de la publication de la v.f.</contrib>
        <email>fevrier CHEZ tigreraye POINT org</email>
      </othercredit>


    </authorgroup>

    <pubdate>2005-09-24</pubdate>
    <releaseinfo>Version&nbsp;: 1.0.9.fr.1.0</releaseinfo>

    <revhistory>
     <revision>
        <revnumber>1.0.9.fr.1.0</revnumber>
        <date>2005-09-24</date>
        <authorinitials>PW, RS, JPG</authorinitials>
        <revremark>
        
            Adaptation française de la version 1.0.9.
        
        </revremark>
      </revision>

      <revision>
        <revnumber>1.0.9</revnumber>
        <date>2005-05-03</date>
        <authorinitials>Avi</authorinitials>
        <revremark>Inclusion d'un lien vers la traduction française (<emphasis>Included link to french translation</emphasis>).</revremark>
      </revision>

      <revision>
        <revnumber>1.0.8</revnumber>
        <date>2004-10-29</date>
        <authorinitials>MG</authorinitials>
        <revremark>Adaptation hongroise, la section chrony et la toute première section (<emphasis>Hungarian translation, the chrony section and the very first section</emphasis>).</revremark>
      </revision>
      
      <revision>
        <revnumber>1.0.7.fr.1.0</revnumber>
        <date>2005-03-22</date>
        <authorinitials>PW, RS, JPG</authorinitials>
        <revremark>Première traduction française.</revremark>
      </revision>

      <revision>
        <revnumber>1.0.7</revnumber>
        <date>2004-07-09</date>
        <authorinitials>AVI</authorinitials>
        <revremark>
        
            Note près de la licence pour signaler qu'il n'est pas
            nécessaire de demander une autorisation pour traduire ce
            document&nbsp;; petites corrections pour plusieurs phrases
            (<emphasis>Disclaimer near to license, to let people know
            they can translate without asking permission; Small fixes in
            some phrases</emphasis>).
            
        </revremark>
      </revision>

      <revision>
        <revnumber>1.0.6</revnumber>
        <date>2004-02-25</date>
        <authorinitials>AVI</authorinitials>
        <revremark>Ajouté remerciements et lien vers la traduction russe (<emphasis>Included credits and link to russian translation</emphasis>).</revremark>
      </revision>

      <revision>
        <revnumber>1.0.5</revnumber>
        <date>2003-07-05</date>
        <authorinitials>AVI</authorinitials>
        <revremark>Changé l'adresse vers les serveurs de temps publics et ajouté pool.ntp.org (<emphasis>Changed public time servers list URL. Added pool.ntp.org</emphasis>).</revremark>
      </revision>

      <revision>
        <revnumber>1.0.4</revnumber>
        <date>2002-12-21</date>
        <authorinitials>AVI</authorinitials>
        <revremark>Ajouté remerciements et lien vers la traduction japonaise (<emphasis>Added japanese translation link and credits</emphasis>).</revremark>
      </revision>

      <revision>
        <revnumber>1.0.3</revnumber>
        <date>2002-08-24</date>
        <authorinitials>AVI</authorinitials>
        <revremark>Corrigé les largeurs d'écrans et de listings (<emphasis>Fixed wrong screen and programlisting widths</emphasis>).</revremark>
      </revision>

      <revision>
        <revnumber>1.0.2</revnumber>
        <date>2002-08-04</date>
        <authorinitials>AVI</authorinitials>
        <revremark>Lien vers une page de serveurs de temps publics (<emphasis>Link to public time servers page</emphasis>).</revremark>
      </revision>

      <revision>
        <revnumber>1.0.1</revnumber>
        <date>2002-05-07</date>
        <authorinitials>AVI</authorinitials>
        <revremark>Conversion finale en XML et réorganisation des fichiers (<emphasis>Final XML conversion. Files reorganization</emphasis>).</revremark>
      </revision>

      <revision>
        <revnumber>1.0</revnumber>
        <date>2002-04-28</date>
        <authorinitials>AVI</authorinitials>
        <revremark>Image terminée (<emphasis>Finalized image</emphasis>).</revremark>
      </revision>

      <revision>
        <revnumber>0.8</revnumber>
        <date>2002-04-27</date>
        <authorinitials>AVI</authorinitials>
        <revremark>Remplacé ntpdc par ntpq dans l'exemple (<emphasis>Switched from ntpdc example to ntpq, based on contributions</emphasis>).</revremark>
      </revision>

      <revision>
        <revnumber>0.8.1</revnumber>
        <date>2002-04-20</date>
        <authorinitials>AVI</authorinitials>
        <revremark>Graphique amélioré et liens vers d'autres documents (<emphasis>Improved graphic. Links to other doc locations</emphasis>).</revremark>
      </revision>

      <revision>
        <revnumber>0.8</revnumber>
        <date>2002-04-14</date>
        <authorinitials>AVI</authorinitials>
        <revremark>Amélioration de la figure NTP (<emphasis>Better tuning of NTP graphic</emphasis>).</revremark>
      </revision>

      <revision>
        <revnumber>0.76</revnumber>
        <date>2002-04-13</date>
        <authorinitials>AVI</authorinitials>
        <revremark>Ajouté une figure sur l'architecture (<emphasis>Inclusion of architecture graphic</emphasis>).</revremark>
      </revision>

      <revision>
        <revnumber>0.75</revnumber>
        <date>2002-04-10</date>
        <authorinitials>AVI</authorinitials>
        <revremark>Correction orthographe et utilisation DocBook XSLT 1.50 (<emphasis>Spell checked. Using DocBook XSLT 1.50</emphasis>).</revremark>
      </revision>

      <revision>
        <revnumber>0.65</revnumber>
        <date>2002-03-31</date>
        <authorinitials>AVI</authorinitials>
        <revremark>Passé au format XML 4.1.2 DocBook (<emphasis>Upgraded to XML 4.1.2 DocBook format</emphasis>).</revremark>
      </revision>

      <revision>
        <revnumber>0.6</revnumber>
        <date>2002-03-29</date>
        <authorinitials>AVI</authorinitials>
        <revremark>Terminé le mécanisme des fuseaux horaires sur Linux. Créé l'annexe. Il ne reste plus que les dessins. (<emphasis>Finished timezone mechanism on Linux. Created appendix. Now only drawings are needed</emphasis>).</revremark>
      </revision>

      <revision>
        <revnumber>0.4</revnumber>
        <date>2002-03-24</date>
        <authorinitials>AVI</authorinitials>
        <revremark>Toute la structure est définie. Tous les exemples de commandes sont écrits (<emphasis>All skeleton defined. All command examples written</emphasis>).</revremark>
      </revision>

      <revision>
        <revnumber>0.2</revnumber>
        <date>2002-03-19</date>
        <authorinitials>AVI</authorinitials>
        <revremark>Première version DocBook (<emphasis>First DocBook version</emphasis>).</revremark>
      </revision>
    </revhistory>

  <abstract><para>

      Ce document présente la gestion de la date et de l'heure sous 
      Linux. Il explique également comment régler la date et l'heure de 
      votre système et comment synchroniser votre machine via le 
      protocole NTP.

  </para></abstract>

  </articleinfo>

  <section id="why">
    <title>Pourquoi avoir une horloge précise&nbsp;?</title>

    <para>
    
        Si votre ordinateur ne se connecte jamais à d'autres ordinateurs 
        (ou à d'autres appareils utilisant une horloge), la précision de 
        l'horloge n'est pas critique en elle-même, elle dépend des 
        besoins de l'utilisateur. Cependant, les programmes qui d'une 
        façon ou l'autre utilisent internet dépendent d'une date et 
        d'une heure précises. Voici quelques situations où vous pourriez 
        en avoir besoin&nbsp;:
        
    </para>

    <itemizedlist>
      <listitem><para>Pour des logiciels effectuant des transactions&nbsp;;</para></listitem>
      <listitem><para>Pour des applications commerciales (p.ex. eBay)&nbsp;;</para></listitem>
      <listitem><para>Pour des clients et serveurs de messagerie&nbsp;;</para></listitem>
      <listitem><para>Pour des sites web qui utilisent des cookies&nbsp;;</para></listitem>
      <listitem><para>Pour des applications web distibuées&nbsp;;</para></listitem>
      <listitem><para>Pour certains services web&nbsp;;</para></listitem>
      <listitem><para>Pour des applications distribuées à base de 
      composants telles que <acronym>J2EE</acronym>, 
      <acronym>.NET</acronym>, et cætera&nbsp;;</para></listitem>
      <listitem><para>Pour des systèmes de fichiers modernes avancés et 
      parallèles tels que AFS, DFS, GFS, GPFS, et 
      cætera.</para></listitem>
    </itemizedlist>

    <para>Et bien sûr, pour utiliser votre ordinateur pour régler votre montre.</para>

    <section id="why.pcclock">
      <title>De quels facteurs dépend l'horloge matérielle&nbsp;?</title>

      <para>Ici, nous allons un peu parler de la précision de l'horloge matérielle.</para>

      <para>Dans les PC, des oscillateurs à quartz gèrent l'horloge matérielle. La fréquence de l'oscillateur est divisée et finalement on obtient un compteur qui est incrémenté d'une unité toutes les secondes (en réalité c'est plus compliqué que çà, mais c'est suffisant pour nous). L'oscillateur fonctionne même lorsque l'ordinateur est éteint. Dès lors, au démarrage de l'ordinateur (et de Linux), l'horloge matérielle peut donner l'heure actuelle. La stabilité de cette horloge dépend principalement de la température de son environnement mais aussi de la pression atmosphérique et de la stabilité de la tension de son alimentation électrique. L'horloge matérielle est fiable à court terme. Cependant, à long terme, elle dérive par rapport à l'heure exacte. Puisque l'on peut continuellement comparer la fréquence de notre horloge matérielle à celle d'une horloge exacte, on peut calculer la fréquence de l'horloge matérielle et ainsi reconstituer l'heure exacte. Si cette horloge exacte se trouve dans notre réseau local, la précision de l'horloge de votre machine Linux sera de l'ordre de 0.01s. Si vous utilisez plutôt internet, votre horloge sera au plus à 0.2s de l'heure exacte.</para>
    </section>
  </section>

  <section id="time">
  
    <title>L'heure et la date en informatique</title>

    <para>
    
        Pour déterminer l'heure actuelle en un endroit donné de la 
        planète, un ordinateur a besoin d'exactement deux 
        informations&nbsp;:
        
    </para>
    <orderedlist numeration="arabic">
      <listitem><para>
      
          l'heure <acronym>UTC</acronym> exacte (en français Temps 
          Universel Coordonné &mdash; qui a remplacé l'heure 
          <acronym>GMT</acronym>)&nbsp;;
      
      </para></listitem>

      <listitem><para>
      
          le fuseau horaire local.
          
      </para></listitem>
    </orderedlist>

    <para>
    
        Pour les ordinateurs, il y a aussi une horloge matérielle 
        interne qui sert de temps de base pour le système 
        d'exploitation.
    
    </para>

    <para>
    
        La date et l'heure du système d'exploitation (nous n'utiliserons 
        plus que le terme date <emphasis>ou</emphasis> heure pour 
        exprimer les deux à partir de maintenant) sont réglées au 
        démarrage par un script qui lit l'horloge matérielle et l'ajuste 
        en fonction du fuseau horaire (il n'est pas stocké dans le 
        <acronym>BIOS</acronym>). Après cette synchronisation, les 
        heures du <acronym>BIOS</acronym> et du système d'exploitation 
        sont complètement indépendantes. Dès lors, après un certain 
        temps, il peut y avoir plusieurs secondes de décalage. Laquelle 
        est correcte&nbsp;? Sans précautions particulières, aucune.
        
    </para>

    <para>Nous allons maintenant discuter comment les rendre toutes les deux <emphasis>100% fiables</emphasis>.</para>
  </section>

  <section id="tz">
    <title>Qu'est-ce qu'un fuseau horaire&nbsp;?</title>

    <para>Les fuseaux horaires sont des divisions géographiques du globe terrestre tous les 15° de longitude, commençant à Greenwich en Angleterre, créées pour aider les gens à déterminer l'heure qu'il est partout dans le monde.</para>

    <para>De nos jours, il s'agit plus de divisions politiques que géographiques, parce que parfois les gens ont besoin d'avoir la même heure que d'autres en des lieux pas trop éloignés. Et pour faire des économies d'énergies, nous avons aujourd'hui l'heure d'été qui correspond à un changement de fuseau horaire.</para>

    <para>Les fuseaux horaires sont généralement définis par les gouvernements ou par un institut d'astronomie et sont représentés par un code de 3 ou 4 lettres. Voir <xref linkend="tz.examples" /> pour des exemples.</para>

    <para>Si vous voulez connaître l'heure actuelle n'importe où dans le monde, vous pouvez utiliser les sites web <ulink url="http://www.timezoneconverter.com/">timezoneconverter.com</ulink> (en anglais) ou <ulink url="http://www.horlogeparlante.com/">horlogeparlante.com</ulink> (en français)</para>

    <section id="tz.dst">
      <title>L'heure d'été</title>

      <para>
      
          Pour faire des économies d'énergie, les gouvernements ont créé 
          l'heure d'été (appelée en anglais <foreignphrase 
          lang="en">Daylight Savings Time</foreignphrase> ou <acronym 
          lang="en">DST</acronym>). Nos horloges sont avancées d'une 
          heure et cela fait sembler nos journées plus longues. En fait, 
          cela revient seulement à changer de fuseau horaire. Le temps 
          primitif (<acronym lang="en">UTC</acronym>) est encore, et 
          restera toujours, le même.
      
      </para>

      <para>
      
          Nous verrons plus tard comment activer ou désactiver 
          automatiquement l'heure d'été dans Linux.
          
      </para>
    </section>

    <section id="tz.examples">
      <title>Exemples de fuseaux horaires</title>

      <para>Il n'y a rien de plus parlant que des exemples&nbsp;:</para>

      <table id="tz.ex.br" pgwide="0">
        <title>Fuseaux horaires du Brésil. Décalage par rapport à l'heure <acronym>UTC</acronym></title>

        <tgroup cols="3">
          <thead>
            <row>
              <entry>Nom et décalage</entry>

              <entry>Nom et décalage <link linkend="tz.dst">heure d'été</link></entry>

              <entry>Lieux</entry>
            </row>
          </thead>

          <tbody>
            <row>
              <entry>BREST -2:00</entry>

              <entry>BREDT -1:00</entry>

              <entry>Fernando de Noronha</entry>
            </row>

            <row>
              <entry>BRST -3:00</entry>

              <entry>BRDT -2:00</entry>

              <entry>Sao Paulo, Rio, Brasilia, Minas Gerais,
              Région Nord-Est, Région Sud, et cætera</entry>
            </row>

            <row>
              <entry>BRWST -4:00</entry>

              <entry>BRWDT -3:00</entry>

              <entry>Région Ouest</entry>
            </row>

            <row>
              <entry>BRAST -5:00</entry>

              <entry>BRADT -4:00</entry>

              <entry>Acre</entry>
            </row>
          </tbody>
        </tgroup>
      </table>

      <para>Si vous avez une table telle que celle-ci pour les USA ou 
      l'Europe, envoyez-la moi s'il-vous-plaît.</para>
    </section>

    <section id="tz.linux">
      <title>Les fuseaux horaires et Linux</title>

      <para>Les systèmes Linux utilisent les fuseaux horaires dynamiques GLIBC basés sur <filename>/etc/localtime</filename>. Ce fichier est un lien vers (ou une copie) d'un fichier d'information de fuseau horaire situé généralement dans le répertoire <filename class="directory">/usr/share/zoneinfo</filename>.</para>

      <para>D'un point de vue géophysique, il y a seulement 360°/15°=24 fuseaux horaires dans le monde. Mais pour rendre les choses faciles pour tous et pour tenir compte de toutes les variations politiques (comme l'heure d'été), vous trouverez des centaines de fichiers d'information de fuseau horaire dans <filename class="directory">/usr/share/zoneinfo</filename>, chacun valable pour une ville, un pays, et cætera.</para>

      <para>Certains pays, comme le Brésil, n'ont pas un jour fixe pour passer à l'heure d'été. Il est défini chaque année quelques mois avant l'été et peut vous obliger à changer votre fichier d'information de fuseau horaire qui peut être compilé avec la commande <command>zic</command> à partir d'un fichier comme celui-ci.</para>

      <example>
        <title>Fichier d'information de fuseau horaire pour le Brésil</title>

        <programlisting>
# Fuseaux horaires du Brésil
#
# Les fuseaux horaires brésiliens sont :
# BREST: Est de Brasilia. Fernando de Noronha.
# BRST:  Brasilia, Sao Paulo, Rio, Nord-est, Sud, et cætera
# BRWST: Ouest de Brasilia. Mato Grosso, Manaus
# BRAST: Acre.
#
# En heure d'été, la lettre 'S' devient 'D'.
#
# Pour installer, exécuter :
#
# # zic Brazil.txt
#
# Les fichiers de fuseaux horaires seront installés dans
# /usr/share/zoneinfo (dépend de votre distribution). Ensuite,
# créez un lien symbolique de votre zone vers /etc/localtime :
#
# # ln -sf /usr/share/zoneinfo/Brazil/Brasilia /etc/localtime
#
#
# Si vous avez des mises à jour ou de nouveaux standards pour ce
# fichier, envoyez-les en anglais à
#
# Avi Alkalay &lt;avi @ unix.sh&gt;
#
# Dernière mise à jour : 18 Nov 2000
# Ce fichier est disponible sur http://avi.alkalay.net/linux/zoneinfo/
#

# Rule  NAME    FROM  TO    TYPE  IN    ON   AT    SAVE   LETTER/S
Rule    Brazil  1931  1932  -     Oct   3    0:00  1:00   D
Rule    Brazil  1932  1933  -     Mar   31   0:00  0      S
Rule    Brazil  1949  only  -     Dec   1    0:00  1:00   D
Rule    Brazil  1950  only  -     Apr   30   0:00  0      S
Rule    Brazil  1950  1952  -     Dec   1    0:00  1:00   D
Rule    Brazil  1951  only  -     Apr   16   0:00  0      S
Rule    Brazil  1952  only  -     Mar   31   0:00  0      S
Rule    Brazil  1953  only  -     Feb   28   0:00  0      S
Rule    Brazil  1963  only  -     Oct   23   0:00  1:00   D
Rule    Brazil  1964  only  -     Mar   1    0:00  0      S
Rule    Brazil  1965  only  -     Jan   31   0:00  1:00   D
Rule    Brazil  1965  only  -     Mar   31   0:00  0      S
Rule    Brazil  1965  only  -     Dec   1    0:00  1:00   D
Rule    Brazil  1966  1968  -     Mar   1    0:00  0      S
Rule    Brazil  1966  1967  -     Nov   1    0:00  1:00   D
Rule    Brazil  1984  only  -     Nov   2    0:00  1:00   D
Rule    Brazil  1985  only  -     Mar   15   0:00  0      S
Rule    Brazil  1985  only  -     Nov   2    0:00  1:00   D
Rule    Brazil  1986  only  -     Mar   15   0:00  0      S
Rule    Brazil  1986  only  -     Oct   25   0:00  1:00   D
Rule    Brazil  1987  only  -     Feb   14   0:00  0      S
Rule    Brazil  1987  only  -     Oct   25   0:00  1:00   D
Rule    Brazil  1988  only  -     Feb   7    0:00  0      S
Rule    Brazil  1988  only  -     Oct   16   0:00  1:00   D
Rule    Brazil  1989  only  -     Jan   29   0:00  0      S
Rule    Brazil  1989  only  -     Oct   15   0:00  1:00   D
Rule    Brazil  1990  only  -     Feb   11   0:00  0      S
Rule    Brazil  1990  only  -     Oct   21   0:00  1:00   D
Rule    Brazil  1991  only  -     Feb   17   0:00  0      S
Rule    Brazil  1991  only  -     Oct   20   0:00  1:00   D
Rule    Brazil  1992  only  -     Feb   9    0:00  0      S
Rule    Brazil  1992  only  -     Oct   25   0:00  1:00   D
Rule    Brazil  1993  only  -     Jan   31   0:00  0      S
Rule    Brazil  1993  only  -     Oct   17   0:00  1:00   D
Rule    Brazil  1994  only  -     Feb   20   0:00  0      S
Rule    Brazil  1994  only  -     Oct   16   0:00  1:00   D
Rule    Brazil  1995  only  -     Feb   19   0:00  0      S
Rule    Brazil  1995  only  -     Oct   15   0:00  1:00   D
Rule    Brazil  1996  only  -     Feb   11   0:00  0      S
Rule    Brazil  1996  only  -     Oct   06   0:00  1:00   D
Rule    Brazil  1997  only  -     Feb   16   0:00  0      S
Rule    Brazil  1997  only  -     Oct   06   0:00  1:00   D
Rule    Brazil  1998  only  -     Mar   01   0:00  0      S
Rule    Brazil  1998  only  -     Oct   11   0:00  1:00   D
Rule    Brazil  1999  only  -     Feb   21   0:00  0      S
Rule    Brazil  1999  only  -     Oct   03   0:00  1:00   D
Rule    Brazil  2000  only  -     Feb   27   0:00  0      S
Rule    Brazil  2000  only  -     Oct   8    0:00  1:00   D
Rule    Brazil  2001  only  -     Feb   18   0:00  0      S


# Zone  NAME                          GMTOFF  RULES/SAVE    FORMAT  [UNTIL]
Zone    Brazil/DeNoronha              -2:00   Brazil        BRE%sT
Zone    posix/Brazil/DeNoronha        -2:00   Brazil        BRE%sT
Zone    right/Brazil/DeNoronha        -2:00   Brazil        BRE%sT
Zone    Brazil/East                   -2:00   Brazil        BRE%sT
Zone    posix/Brazil/East             -2:00   Brazil        BRE%sT
Zone    right/Brazil/East             -2:00   Brazil        BRE%sT

Zone    America/Sao_Paulo             -3:00   Brazil        BR%sT
Zone    America/Rio_de_Janeiro        -3:00   Brazil        BR%sT
Zone    America/Brasilia              -3:00   Brazil        BR%sT
Zone    posix/America/Sao_Paulo       -3:00   Brazil        BR%sT
Zone    posix/America/Rio_de_Janeiro  -3:00   Brazil        BR%sT
Zone    posix/America/Salvador        -3:00   Brazil        BR%sT
Zone    posix/America/Brasilia        -3:00   Brazil        BR%sT
Zone    posix/Brazil/Central          -3:00   Brazil        BR%sT
Zone    posix/Brazil/Brasilia         -3:00   Brazil        BR%sT
Zone    posix/Brazil/Sao_Paulo        -3:00   Brazil        BR%sT
Zone    posix/Brazil/Salvador         -3:00   Brazil        BR%sT
Zone    posix/Brazil/Rio_de_Janeiro   -3:00   Brazil        BR%sT
Zone    right/America/Sao_Paulo       -3:00   Brazil        BR%sT
Zone    right/America/Rio_de_Janeiro  -3:00   Brazil        BR%sT
Zone    right/America/Salvador        -3:00   Brazil        BR%sT
Zone    right/America/Brasilia        -3:00   Brazil        BR%sT
Zone    right/Brazil/Central          -3:00   Brazil        BR%sT
Zone    right/Brazil/Brasilia         -3:00   Brazil        BR%sT
Zone    right/Brazil/Sao_Paulo        -3:00   Brazil        BR%sT
Zone    right/Brazil/Salvador         -3:00   Brazil        BR%sT
Zone    right/Brazil/Rio_de_Janeiro   -3:00   Brazil        BR%sT
Zone    Brazil/Central                -3:00   Brazil        BR%sT
Zone    Brazil/Brasilia               -3:00   Brazil        BR%sT
Zone    Brazil/Sao_Paulo              -3:00   Brazil        BR%sT
Zone    Brazil/Rio_de_Janeiro         -3:00   Brazil        BR%sT
Zone    Brazil/Salvador               -3:00   Brazil        BR%sT

Zone    Brazil/West                   -4:00   Brazil        BRW%sT
Zone    Brazil/Manaus                 -4:00   Brazil        BRW%sT
Zone    Brazil/Rondonia               -4:00   Brazil        BRW%sT
Zone    Brazil/Roraima                -4:00   Brazil        BRW%sT
Zone    Brazil/Mato_Grosso            -4:00   Brazil        BRW%sT
Zone    posix/Brazil/Manaus           -4:00   Brazil        BRW%sT
Zone    posix/Brazil/Mato_Grosso      -4:00   Brazil        BRW%sT
Zone    right/Brazil/Manaus           -4:00   Brazil        BRW%sT
Zone    right/Brazil/Mato_Grosso      -4:00   Brazil        BRW%sT
Zone    posix/America/Manaus          -4:00   Brazil        BRW%sT
Zone    right/America/Manaus          -4:00   Brazil        BRW%sT

Zone    Brazil/Acre                   -5:00   Brazil        BRA%sT
</programlisting>
</example>

      <para>
      
          Une ligne <command>Rule</command> définit la date et l'heure à 
          laquelle s'effectue un changement de fuseau horaire, tandis 
          qu'une ligne <command>Zone</command> référence la règle 
          (<command>Rule</command>) qui la gérera. Notez que le nom de 
          la <command>Zone</command> est en fait le nom du fichier dans 
          le répertoire <filename 
          class="directory">/usr/share/zoneinfo</filename> et qu'il peut 
          y avoir plusieurs noms pour le même fuseau horaire afin qu'il 
          soit plus facile de trouver sa propre zone.
          
      </para>

      <para>Les commentaires du fichier expliquent comment installer ces fuseaux horaires en utilisant le compilateur de fichier d'information de fuseau horaire <command>zic</command>. Pour le rendre effectif, vous n'avez plus qu'à créer un lien (ou copier) du fichier d'information de fuseau horaire vers <filename>/etc/localtime</filename>. Pour certaines distributions, il y a une méthode de niveau supérieur (et préférable) pour régler le fuseau horaire décrite dans <xref linkend="set.tz" />.</para>

      <para>Après avoir fait pointer <filename>/etc/localtime</filename> vers le fichier de fuseau horaire correct, les règles de cette zone s'appliquent déjà et les changements de fuseau sont automatiques&nbsp;; vous n'avez plus à changer l'heure manuellement.</para>

      <para>La séquence suivante de commandes illustre la dynamique de la gestion des fuseaux horaires sous Linux. Notez qu'elles ont toutes été exécutées en moins d'une minute&nbsp;:</para>

<screen>
<prompt>bash$ </prompt><command>ls -al /etc/localtime</command>
lrwxrwxrwx  1 root root 35 May 22  2001 /etc/localtime -&gt; <emphasis>/usr/share/zoneinfo/Brazil/Brasilia</emphasis>
<prompt>bash$ </prompt><command>date</command>
Fri Mar 29 20:13:38 <emphasis>BRST</emphasis> 2002
<prompt>bash# </prompt><command>ln -sf /usr/share/zoneinfo/GMT /etc/localtime</command>
<prompt>bash$ </prompt><command>date</command>
Fri Mar 29 23:13:47 <emphasis>GMT</emphasis> 2002
<prompt>bash# </prompt><command>ln -sf /usr/share/zoneinfo/Brazil/Brasilia /etc/localtime</command>
<prompt>bash$ </prompt><command>date</command>
Fri Mar 29 20:14:03 <emphasis>BRST</emphasis> 2002
</screen>

      <para>
      
          À 20:13, j'étais dans le fuseau horaire par défaut du Brésil 
          (BRST)&nbsp;; ensuite, je suis passé à l'heure GMT et 
          l'horloge du système est passée à 23:13&nbsp;! Quand votre 
          fuseau horaire passera à l'heure d'été, vous verrez un effet 
          similaire, mais cette fois les règles sont toutes à 
          l'intérieur de votre fichier 
          <filename>/etc/localtime</filename> (qui ne change pas au 
          contraire de cet exemple).
      
      </para>

      <para>
      
          Une application tournant sur cette machine (par exemple un 
          serveur web générant des fichiers journaux) sera sensible à ce 
          changement&nbsp;; il est donc très important pour les 
          développeurs de se souvenir que l'heure locale est égale à 
          l'<emphasis>heure universelle</emphasis> actuelle plus le 
          <emphasis>fuseau horaire</emphasis> actuel, comme décrit dans 
          <xref linkend="time" />.
          
      </para>

      <para>Finalement, je suis revenu à mon fuseau horaire de départ.</para>
    </section>
  </section>

  <section id="set">
    <title>Les paramètres corrects pour votre machine Linux</title>

    <para>
    
        Quel que soit le système que vous voulez installer, vous devez 
        connaître votre fuseau horaire. Il peut être déterminé par une 
        ville, une région ou un pays. Vous devez aussi décider comment 
        régler l'heure du <acronym>BIOS</acronym>. Ici, vous pouvez 
        suivre deux stratégies&nbsp;:
    
    </para>

    <variablelist>
      <varlistentry>
        <term><emphasis>Machine avec seulement Linux</emphasis></term>

        <listitem><para>
        
            Dans ce cas, vous pouvez mettre l'heure du 
            <acronym>BIOS</acronym> à l'heure <acronym>UTC</acronym>. 
            Les changements de fuseaux horaires seront gérés 
            dynamiquement comme expliqué dans <xref 
            linkend="tz.linux"/>.
        
        </para></listitem>
      </varlistentry>

      <varlistentry>
        <term><emphasis>Machine avec Linux et MS Windows</emphasis></term>

        <listitem><para>
        
            Windows manipule l'heure d'une manière plus primitive que 
            Linux. Pour Windows, l'heure du <acronym>BIOS</acronym> 
            correspond toujours à l'heure locale, les changements de 
            fuseaux sont donc plus agressifs car ils changent 
            directement l'horloge matérielle. Et puisque Linux et 
            Windows initialisent tous deux leur heure à partir de 
            l'horloge matérielle, si les deux sont présents, Linux doit 
            la manipuler de la même façon. Dans ce cas, vous devez 
            mettre votre <acronym>BIOS</acronym> à l'heure locale.
        
        </para></listitem>
      </varlistentry>
    </variablelist>

    <section id="set.tz">
      <title>Sélection du fuseau horaire</title>

      <para>
          
          Sur les systèmes Red Hat Linux et dérivés, vous pouvez régler 
          la stratégie pour l'horloge matérielle et les fuseaux horaires 
          grâce à la commande <command>timeconfig</command>, qui utilise 
          une interface conviviale. Vous pouvez aussi le faire de façon 
          non-interactive&nbsp;:
      
      </para>

      <example>
        <title>Outil de configuration de l'heure</title>

<screen>
<prompt>bash# </prompt><command>timeconfig "Brasil/East"</command>         # règle l'horloge matérielle à l'heure locale
<prompt>bash# </prompt>                                 # et le fuseau horaire sur la zone est du Brésil
<prompt>bash# </prompt>
<prompt>bash# </prompt><command>timeconfig --utc "Brasil/East"</command>   # règle l'horloge matérielle à l'heure UTC
<prompt>bash# </prompt>                                 # et le fuseau horaire sur la zone est du Brésil
</screen>

</example>

      <para>De toute façon, cela change le fichier <filename>/etc/sysconfig/clock</filename> qui est lu au démarrage. Vous pouvez l'éditer manuellement. Il ressemble à ceci&nbsp;:</para>

      <example>
        <title><filename>/etc/sysconfig/clock</filename> file</title>

<programlisting>
ZONE="Brazil/East"
UTC=true
ARC=false
</programlisting>
      </example>
    </section>

    <section id="set.hwclock">
      <title>Régler l'horloge matérielle</title>

      <para>
      
          Je vous conseille de ne changer votre horloge matérielle que 
          si vous comprenez comment obtenir l'heure exacte, comme 
          expliqué dans <xref linkend="ntp"/>.
      
      </para>

      <para>
      
          La commande <command>hwclock</command> lit ou règle l'horloge 
          matérielle en fonction des paramètres que vous lui donnez et 
          qui sont documentés dans son manuel. Mais vous n'avez 
          normalement pas à l'utiliser si vous avez une distribution 
          moderne. Après avoir choisi votre stratégie pour l'horloge 
          matérielle et les fuseaux horaires, vous pouvez utiliser la 
          commande de haut niveau <command>setclock</command> pour 
          régler correctement votre horloge matérielle. Vous n'avez pas 
          besoin de passer de paramètres car <command>setclock</command> 
          appelle intelligemment <command>hwclock</command> pour régler 
          le <acronym>BIOS</acronym> en se basant sur l'heure courante 
          de votre système d'exploitation. <emphasis>Vous devriez donc 
          toujours utiliser la commande 
          <command>setclock</command>.</emphasis>
          
      </para>

      <para>
      
          Mais si vous êtes minimaliste et préférez la façon compliquée, 
          voici quelques exemples d'utilisation de 
          <command>hwclock</command>&nbsp;:
          
      </para>

      <example>
        <title>Utilisation de <command>setclock</command> et <command>hwclock</command></title>

<screen>
<prompt>bash# </prompt><command>setclock</command>                                  # La manière simple de régler l'horloge matérielle
<prompt>bash# </prompt>
<prompt>bash# </prompt><command>hwclock</command>                                   # Lit l'horloge matérielle
<prompt>bash# </prompt>
<prompt>bash# </prompt><command>hwclock --systohc --utc</command>                   # Règle l'horloge matérielle avec l'heure UTC
<prompt>bash# </prompt>                                          # basée sur l'heure actuelle du système
<prompt>bash# </prompt>
<prompt>bash# </prompt><command>hwclock --systohc</command>                         # Règle l'horloge matérielle avec l'heure actuelle
<prompt>bash# </prompt>                                          # basée sur l'heure actuelle du système
<prompt>bash# </prompt>
<prompt>bash# </prompt><command>hwclock --set --date "21 Oct 2004 21:17"</command>  # Règle l'horloge matérielle avec l'heure spécifiée
</screen>
</example>

      <para>
      
        Puisque l'heure du système est indépendante de l'horloge 
        matérielle, tout changement dans le <acronym>BIOS</acronym> 
        n'apparaîtra que lors du démarrage suivant.
        
      </para>

      <para>Une autre option pour changer l'horloge matérielle est de redémarrer l'ordinateur et d'accéder à l'écran de configuration du <acronym>BIOS</acronym>. Sur les plates-formes <ulink url="http://ibm.com/servers/eserver/zseries/os/linux/">IBM e-server zSeries</ulink> vous devez le faire au niveau de z/VM parce que Linux tourne sur des machines virtuelles créées par z/VM.</para>
    </section>
  </section>

  <section id="ntp">
    <title>Synchronisation précise de l'heure</title>

    <para>Avoir l'heure exacte sur tous vos systèmes est aussi important que d'avoir une stratégie solide de la sécurité du réseau (ce qui est bien plus qu'utiliser des pare-feu). C'est un des éléments essentiels d'une administration système basée sur de bonnes pratiques qui mène à des systèmes bien organisés et sûrs. Une heure précise est particulièrement nécessaire lorsqu'on travaille avec des applications distribuées, des services web ou des outils distribués de surveillance réseau.</para>

    <section id="ntp.ntp">
      <title><acronym>NTP</acronym>&nbsp;: protocole de diffusion du temps en réseau (Network Time Protocol)</title>

      <para>Nous ne décrirons pas ici le protocole, mais comment cette magnifique invention, ajoutée à la présence envahissante d'internet, peut nous être utile. Vous pouvez en apprendre plus sur <ulink url="http://www.ntp.org/">www.ntp.org</ulink>.</para>

      <para>Une fois le système configuré, <acronym>NTP</acronym> arrivera à garder l'heure exacte en ne faisant que de très petits ajustements pour ne pas perturber les applications en cours d'exécution.</para>

      <para>L'heure exacte peut être obtenue en utilisant des appareils basés sur la fréquence électronique des atomes. Il existe aussi une méthode basée sur le système de satellites <acronym>GPS</acronym>. La première est plus fiable, mais la seconde n'est pas si mauvaise. Les deux nécessitent un matériel très spécifique et très cher, mais leurs propriétaires (en général des universités ou des laboratoires de recherche) les connectent à des ordinateurs qui font tourner un serveur <acronym>NTP</acronym> qui sont connectés à internet et qui vous laissent y accéder gratuitement. Et c'est grâce à eux que nous synchroniserons nos systèmes.</para>
    </section>

    <section id="ntp.arch">
      <title>Construire une architecture simple de synchronisation de l'heure</title>

      <para>Vous aurez besoin de &nbsp;:</para>

      <orderedlist numeration="arabic">
        <listitem>
          <para>Une connexion directe ou indirecte (à travers un pare-feu) à internet.</para>
        </listitem>

        <listitem>
          <para>Choisir des serveurs <acronym>NTP</acronym>. Vous pouvez utiliser le serveur public <ulink url="http://www.fortytwo.ch/time/">pool.ntp.org</ulink> ou en choisir dans la <ulink url="http://www.eecis.udel.edu/~mills/ntp/clock2a.html">deuxième strate de serveurs de temps publics</ulink> sur le site web de <acronym>NTP</acronym>. Si vous n'avez pas d'accès à internet, votre administrateur <acronym>WAN</acronym> (ce doit être un type intelligent) peut probablement vous donner des adresses internes.</para>
        </listitem>

        <listitem>
          <para>Avoir le logiciel <acronym>NTP</acronym> installé sur tous les systèmes que vous voulez synchroniser. Vous pouvez trouver les RPM sur les cédéroms de votre distribution Linux favorite ou <ulink url="http://rpmfind.net/linux/rpm2html/search.php?query=ntp">faire une recherche</ulink> sur <ulink url="http://rpmfind.net/"/>.</para>
        </listitem>
      </orderedlist>

      <para>Voici un exemple d'une bonne architecture&nbsp;:</para>

      <figure>
        <title>Serveurs relais locaux pour NTP</title>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="&image;ntp.png"
            srccredit="ntp.prz (Lotus Freelance Graphics), Avi Alkalay, 2002"/>
          </imageobject>
          <textobject>
              <phrase>Architecture NTP</phrase>
          </textobject>
        </mediaobject>
      </figure>

      <para>
      
          Si vous avez plusieurs machines à synchroniser, <emphasis>ne 
          les faites pas</emphasis> toutes accéder aux serveurs 
          <acronym>NTP</acronym> externes que vous avez choisis. Seuls 
          deux de vos serveurs doivent accéder aux serveurs 
          <acronym>NTP</acronym> externes. Les autres machines se 
          synchroniseront sur ces deux dernières. Nous les appellerons 
          <emphasis>serveurs relais</emphasis>.
      
      </para>

      <para>
      
          Vos serveurs relais peuvent être n'importe lesquelles de vos 
          machines déjà disponibles sur votre réseau. 
          <acronym>NTP</acronym> consomme très peu de mémoire et de 
          processeur. Vous n'avez pas besoin d'une machine dédiée à 
          cette fonction.
      
      </para>

      <tip><para>
      
          Créer des alias pour les noms d'hôtes de vos serveurs relais 
          locaux est une bonne idée. Vous pouvez définir par exemple 
          ntp1.mon-domaine.fr et ntp2.mon-domaine.fr. Puis n'utilisez 
          que ces noms en configurant les machines clientes. De cette 
          façon, vous pouvez déplacer la fonctionnalité 
          <acronym>NTP</acronym> vers un nouveau serveur relais (avec un 
          adresse IP et un nom d'hôte différents) sans avoir à 
          reconfigurer les clients. Demandez à votre administrateur 
          <acronym>DNS</acronym> de créer ces alias.
      
      </para></tip>
    </section>

    <section id="ntp.configs">
      <title>Configuration <acronym>NTP</acronym></title>

      <variablelist>
        <varlistentry>
          <term><emphasis>Pour vos serveurs relais</emphasis></term>

          <listitem>
            <para>Éditez <filename>/etc/ntp.conf</filename> et ajoutez les serveurs distants que vous avez choisis&nbsp;:</para>

            <example>
              <title>Fichier <filename>/etc/ntp.conf</filename>des machines relais</title>

<programlisting>
server  ntp.cnrs.fr        # Un serveur de strate 1 de cnrs.fr
server  autre-ntp.gouv.fr  # Un serveur de strate 2 de gouv.fr
</programlisting>

            </example>

            <para>
            
                De nouveau, vous pouvez utiliser le serveur public 
                <ulink 
                url="http://www.fortytwo.ch/time/">pool.ntp.org</ulink> 
                ou obtenir une liste de <ulink 
                url="http://www.eecis.udel.edu/~mills/ntp/clock2a.html">serveurs 
                de temps publics</ulink> sur le site web de 
                <acronym>NTP</acronym>.
                        
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><emphasis>Pour vos clients</emphasis></term>

          <listitem>
            <para>Éditez <filename>/etc/ntp.conf</filename> et ajoutez vos serveurs relais avec un nom standard&nbsp;:</para>

            <example>
              <title>Fichier <filename>/etc/ntp.conf</filename> des machines clientes</title>

<programlisting>
server  ntp1.mon-domaine.fr   # Mon premier serveur relais local
server  ntp2.mon-domaine.fr   # Mon deuxième serveur relais local
</programlisting>
            </example>
          </listitem>
        </varlistentry>
      </variablelist>

      <para>Si votre machine a une heure UTC différente de plusieurs minutes par rapport aux serveurs <acronym>NTP</acronym>, <acronym>NTP</acronym> ne fonctionnera pas. Dans ce cas, vous devez d'abord faire un synchronisation complète. Je vous recommande de le faire en dehors des heures de production. Vous n'avez besoin de le faire que lors de l'initialisation de votre configuration <acronym>NTP</acronym>, jamais plus après&nbsp;:</para>

      <example>
        <title>Première synchronisation</title>

<screen>
<prompt>bash# </prompt><command>ntpdate autre-ntp.gouv.fr</command>	<co id="sync1" />
24 Mar 18:16:36 ntpdate[10254]: step time server 200.100.20.10 offset -15.266188 sec
<prompt>bash# </prompt><command>ntpdate autre-ntp.gouv.fr</command>	<co id="sync2" />
24 Mar 18:16:43 ntpdate[10255]: adjust time server 200.100.20.10 offset -0.000267 sec
</screen>

        <calloutlist>
          <callout arearefs="sync1">
            <para>Première synchronisation complète. L'horloge retardait de 15 secondes.</para>
          </callout>

          <callout arearefs="sync2">
            <para>Deuxième synchronisation complète, juste pour être sûr. Maintenant, nous ne retardons pratiquement plus, ce qui est une bonne chose.</para>
          </callout>
        </calloutlist>
      </example>

      <para>La dernière étape consiste à démarrer ou à redémarrer le démon <acronym>NTP</acronym> sur chaque machine&nbsp;:</para>

      <screen><prompt>bash# </prompt><command>service ntpd restart</command></screen>
    </section>

    <section id="ntp.watch">
      <title>Observer votre machine se synchroniser</title>

      <para>Maintenant que tout est configuré, <acronym>NTP</acronym> va garder l'heure de votre machine synchronisée. Vous pouvez observer ce processus en utilisant la commande d'interrogation NTP (<command>ntpq</command>)&nbsp;:</para>

      <example>
        <title>Un exemple d'interrogation de l'état de la synchronisation temporelle</title>

<screen>
<prompt>bash# </prompt><command>ntpq -p</command>
     remote           refid      st t when poll reach   delay   offset  jitter
==============================================================================
-jj.cs.umb.edu   gandalf.sigmaso  3 u   95 1024  377   31.681  -18.549   1.572
 milo.mcs.anl.go ntp0.mcs.anl.go  2 u  818 1024  125   41.993  -15.264   1.392
-mailer1.psc.edu ntp1.usno.navy.  2 u  972 1024  377   38.206   19.589  28.028
-dr-zaius.cs.wis ben.cs.wisc.edu  2 u  502 1024  357   55.098    3.979   0.333
+taylor.cs.wisc. ben.cs.wisc.edu  2 u  454 1024  347   54.127    3.379   0.047
-ntp0.cis.strath harris.cc.strat  3 u  507 1024  377  115.274   -5.025   1.642
*clock.via.net   .GPS.            1 u  426 1024  377  107.424   -3.018   2.534
 ntp1.conectiv.c 0.0.0.0         16 u    - 1024    0    0.000    0.000 4000.00
+bonehed.lcs.mit .GPS.            1 u  984 1024  377   25.126    0.131  30.939
-world.std.com   204.34.198.40    2 u  119 1024  377   24.229   -6.884   0.421
</screen>
</example>

      <variablelist>
        <title>La signification de chaque colonne</title>

        <varlistentry>
          <term><emphasis>remote</emphasis></term>

          <listitem>
            <para>Est le nom du serveur <acronym>NTP</acronym> distant. Si vous utilisez l'option <option>-n</option>, vous verrez les adresses IP de ces serveurs à la place de leurs noms.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><emphasis>refid</emphasis></term>

          <listitem>
            <para>Indique d'où chaque serveur obtient son heure. Il peut s'agir d'un nom d'hôte ou de quelque chose comme <acronym>.GPS.</acronym>, indiquant une source <acronym>GPS</acronym> (Global Positioning System).</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><emphasis>st</emphasis></term>

          <listitem>
            <para>La <emphasis>strate</emphasis> est un nombre allant de 1 à 16 qui indique la précision du serveur distant. 1 est le plus fiable, 16 signifie que le serveur n'est pas disponible. Votre strate sera égale à celle du serveur distant le plus fiable plus 1. Ne vous connectez jamais à un serveur de la strate 1, utilisez ceux de niveau 2&nbsp;! Ces serveurs sont largement suffisants pour nos besoins, et cette politique permet de réduire le trafic vers les serveurs de la première strate.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><emphasis>poll</emphasis></term>

          <listitem>
            <para>L'intervalle (en secondes) entre deux requêtes de temps. La valeur sera comprise entre les valeurs minimales et maximales autorisées. Initialement la valeur sera petite pour permettre une synchronisation rapide. Une fois que les horloges sont synchrones, le temps entre deux requêtes augmentera pour diminuer le trafic réseau et la charge sur les serveurs de temps populaires.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><emphasis>reach</emphasis></term>

          <listitem>
            <para>C'est une représentation en base 8 d'un tableau de 8 bits représentant les 8 dernières fois que la machine a essayé d'atteindre le serveur. Le bit est mis à 1 si le serveur distant a pu être atteint.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><emphasis>delay</emphasis></term>

          <listitem>
            <para>Le délai (en secondes) nécessaire pour recevoir une réponse à une demande de "quelle heure est-il&nbsp;?".</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><emphasis>offset</emphasis></term>

          <listitem>
            <para>La valeur la plus importante. Le décalage de temps entre le serveur local et le serveur distant. Pendant la synchronisation, le décalage diminue, indiquant que l'horloge locale devient plus précise.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><emphasis>jitter</emphasis></term>

          <listitem>
            <para>Cette colonne indique la dispersion, qui est une mesure de la variance statistique du décalage pendant plusieurs paires de requête/réponse successives. Des valeurs faibles de la dispersion sont meilleures que des valeurs élevées. Plus elles sont faibles, plus la synchronisation temporelle sera précise.</para>
          </listitem>
        </varlistentry>
      </variablelist>

      <variablelist>
        <title>Signification des signes devant les noms de serveur</title>

        <varlistentry>
          <term><emphasis>-</emphasis></term>

          <listitem>
            <para>Signifie que le service NTP local n'aime pas beaucoup ce serveur</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><emphasis>+</emphasis></term>

          <listitem>
            <para>Signifie que le service NTP local aime ce serveur</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><emphasis>x</emphasis></term>

          <listitem>
            <para>Marque un mauvais serveur</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><emphasis>*</emphasis></term>

          <listitem>
            <para>Indique le serveur préféré actuel</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>

    <section id="ntp.boot">
      <title>Lancer automatiquement <acronym>NTP</acronym> au démarrage</title>

      <para>Si vous voulez toujours avoir le service <acronym>NTP</acronym> sur votre machine même si vous la redémarrez, faites ceci sur chaque machine&nbsp;:</para>

      <screen><prompt>bash# </prompt><command>chkconfig --level 2345 ntpd on</command></screen>

      <para>Cela garantira un démarrage automatique.</para>

      <para>Si votre machine fonctionne longtemps sans redémarrage (des mois ou des années), vous remarquerez une importante différence entre la très imprécise horloge matérielle et l'heure système (maintenant très précise). Les distributions Linux modernes copient l'heure système dans l'horloge matérielle chaque fois que le système est arrêté en utilisant un <link linkend="set.hwclock">mécanisme similaire à la commande <command>setclock</command></link>. De cette façon, au démarrage suivant, vous obtiendrez une date et une heure presque aussi précises que ce qu'elles étaient lors de l'arrêt de votre ordinateur.</para>
    </section>
  </section>

  <section id="ntp.chrony">
    <title>Une horloge précise avec le programme <command>chrony</command></title>

    <section id="ntp.chrony.diff">
      <title>En quoi <command>chrony</command> diffère de <command>ntp</command>&nbsp;?</title>
      
      <para><command>Chrony</command> utilise aussi le protocole <acronym>NTP</acronym> et est aussi conçu pour rendre l'horloge de Linux plus fiable. Il est aussi adapté à des systèmes qui n'ont pas de connexion internet. La source d'heure exacte peut donc être n'importe quelle horloge précise à partir de laquelle on puisse lire l'heure et la transmettre au programme. De plus, il est également capable d'estimer la dérive de l'horloge matérielle et, en se basant sur celle-ci, d'ajuster l'horloge matérielle au démarrage de l'ordinateur.</para>

      <para>La version 1.20 de <command>chrony</command> ne supporte pas encore les horloges internes de type GPS ou les récepteurs radio DCF, mais la structure du programme rend de telles extensions possibles.</para>
    </section>

    <section id="ntp.chrony.how">
      <title>Comment utiliser <command>chrony</command>&nbsp;?</title>

      <para><command>Chrony</command> est constitué de deux parties&nbsp;: le démon <command>chronyd</command> et l'interface utilisateur<command>chronyc</command>.</para>
      
      <para>Vous pouvez trouver <command>chrony</command> sur <ulink url="http://chrony.sunsite.dk/index.php/">chrony.sunsite.dk/index.php</ulink></para>

    </section>
  </section>

  <appendix id="about">
    <title>À propos de ce document</title>

    <para>Copyright 2002, 2003, 2004 Avi Alkalay.</para>
    <para>Copyright 2004, 2005 Philippe Wautelet et copyright 2005 Raphaël Semeteys pour la traduction française.</para>

    <para><foreignphrase lang="en">
    
        This document must be distributed under the terms of <ulink 
        url=" http://www.gnu.org/copyleft/fdl.html">GNU Free 
        Documentation License</ulink>. Please translate, adapt, improve, 
        redistrubute using the original XML DocBook source right bellow. 
        Let me know if you want me to put a link to your 
        translation/adaptation/improvement here.
    
    </foreignphrase></para>

    <para>
    
        Ce document doit être distribué sous les termes de la <ulink 
        url="http://www.gnu.org/copyleft/fdl.html"> licence de 
        documentation libre GNU (GFDL)</ulink>. Traduisez, adaptez, 
        améliorez ou redistribuez SVP en utilisant le fichier source 
        original ci-dessous au format XML DocBook. Faites-moi savoir si 
        vous voulez que j'ajoute un lien ici vers votre version 
        traduite, adaptée ou améliorée.
        
    </para>

    <para>
    
        Ce document est disponible aux endroits suivants&nbsp;:
    
    </para>
    
    <itemizedlist>
    
        <listitem><para>
    
            <ulink 
            url="http://avi.alkalay.net/linux/docs/TimePrecision/">Site 
            officiel de la version originale</ulink> [<ulink 
            url="http://avi.alkalay.net/linux/docs/TimePrecision/timeprecision.tar.gz">Code 
            source XML DocBook</ulink>]&nbsp;;
    
        </para></listitem>

        <listitem><para>
        
            <ulink url="&ldp-base;TimePrecision-HOWTO/">LinuxDoc, en 
            tant que guide pratique (version anglaise)</ulink> [<ulink 
            url="&ldp-other;html_single/TimePrecision-HOWTO.html">une 
            seule page</ulink>] [<ulink 
            url="&ldp-other;pdf/TimePrecision-HOWTO.pdf">PDF</ulink>]&nbsp;;
        
        </para></listitem>

        <listitem><para>
        
            Takeo Nakano
            
            <email>nakano CHEZ apm POINT seikei POINT ac POINT jp</email>
            
            <ulink 
            url="http://www.linux.or.jp/JF/JFdocs/TimePrecision-HOWTO/">traduction 
            japonaise</ulink> [<ulink 
            url="http://www.linux.or.jp/JF/JFdocs/TimePrecision-HOWTO.txt">version 
            texte</ulink>]&nbsp;;
            
        </para></listitem>

        <listitem><para>
        
            SHAKI <email>sha-ki CHEZ narod POINT ru</email> <ulink 
            url="http://computerlib.narod.ru/html/linuxtime.htm">traduction 
            russe</ulink>&nbsp;;
            
        </para></listitem>

        <listitem><para>

            Mihaly Gyulai &lt;gyulai CHEZ fbi POINT hu&gt; <ulink 
            url="http://tldp.fsf.hu/HOWTO/TimePrecision-HOWTO-hu/index.html">traduction 
            hongroise</ulink>&nbsp;;
            
        </para></listitem>


        <listitem><para>
        
            <ulink url="&howto;TimePrecision-HOWTO.html">Dernière 
            version française de ce document</ulink> [<ulink 
            url="&source;TimePrecision-HOWTO.xml">Code source XML 
            DocBook</ulink>].

        </para></listitem>
      </itemizedlist>
  </appendix>
</article>
