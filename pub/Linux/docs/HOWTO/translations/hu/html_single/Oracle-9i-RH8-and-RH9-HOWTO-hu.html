<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-2">

 <TITLE>Oracle 9i egyszerû telepítése RedHat Linux 8.x és 9.x operációs rendszerekre HOGYAN</TITLE>
</HEAD>
<BODY>
<H1>Oracle 9i egyszerû telepítése RedHat Linux 8.x és 9.x operációs rendszerekre HOGYAN</H1>

<H2>Evgueni Tzvetanov</H2>v1.1, 2003 június 23.
<HR>
<EM>A dokumentum az Oracle 9i Standard Edition adatbázis kezelõ telepítését írja le RedHat 8.x és 9.x operációs rendszerekre.</EM>
<HR>
<H2><A NAME="s1">1. Bevezetés</A></H2>



<P>Feltételezem, hogy az olvasónak van ismerete a Linux fájlrendszerekrõl, parancsokról, eszközökrõl, shell-ekrõl és shell szkript programozásról.</P>
<H2><A NAME="ss1.1">1.1 Áttekintés</A>
</H2>

<P>A dokumentum egy egyszerûsített Oracle 9i adatbáziskezelõ telepítési folyamatát mutatja be RedHat 8.x és 9.x operációs rendszereken. Mivel csak telepítési segítség, a folyamat követése során figyelemebe kell venni az adott Linux operációs rendszer és az Oracle disztribúciójának verzióját, valamint a PC paramétereit is.</P>
<P>Az telepítés leírása csak Linux rendszerekre vonatkozik, Unix rendszerekre nem terjed ki. Más operációs rendszerhez az Oracle Installation Guide (Oracle telepítési kézikönyv) használatát javasoljuk.</P>
<P>Nem vagyok sem adatbázis-adminisztrátor (DBA; Database Administrator), sem nagy tudású Oracle adminisztrátor, ezért ne kérdezzetek tõlem ezzel kapcsolatban. Ezt a feladatot meghagyom a tapasztalt adatbázis-adminisztrátoroknak :)</P>
<H2><A NAME="ss1.2">1.2 Szerzõi jog</A>
</H2>

<P>This document is Copyright 2003 by Evgueni Tzvetanov (Speedy).
A dokumentum másolása, terjesztése és/vagy módosítása engedélyezett a Free Software Foundation (Szabad Szoftver Alapítvány) által közzétett GNU Free Documentation License 1.2, vagy annak késõbbi változatában leírt feltételek szerint; állandó fejezetek, elõoldali és hátoldali szövegek nélkül.</P>
<P>Licenc teljes szövege megtalálható a 
<A HREF="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License</A> honlapon.</P>
<H2><A NAME="ss1.3">1.3 A felelõsség teljes elhárítása</A>
</H2>

<P>A dokumentumban található információkat saját felelõsségre használjuk. A dokumentum tartalmára vonatkozóan semmilyen felelõsséget nem vállalok. A dokumentumban lévõ elképzelések, példák és/vagy minden más tartalmat teljes mértékben a saját felelõsségünkre használjuk.</P>
<P>Minden szerzõi jog a tulajdonosoké, hacsak arról konkrétan másképpen nem rendelkeznek. Ebben a dokumentumban szereplõ kifejezések használata semmi estere sem lehetnek hatással termék védjegyre vagy szolgáltatói védjegyre.</P>
<P>Bizonyos termékek vagy védjegyek megnevezése jóváhagyásként (hozzájárulásként) nem tekinthetõek.</P>
<P>Különösen ajánljuk, hogy elsõ telepítés elõtt és megszokott idõközönként is biztonsági mentéseket készítsünk.</P>
<H2><A NAME="ss1.4">1.4 Készítõk</A>
</H2>

<P>Ez a dokumentum különbözõ források (könyvek és honlapok) tudásanyagának felhasználásával készült.</P>
<P>
<UL>
<LI>Oracle 9i Installation Guide (Oracle 9i telepítési kézikönyv)</LI>
<LI>Oracle 9i Database Administrator's Guide (Oracle 9i adatbázis-adminisztrátorok kézikönyve)</LI>
<LI>DBA's guide to databases on Linux (adatbázis-adminisztrátorok kézikönyve Linuxhoz)</LI>
<LI>Oracle 8i: A beginner's guide (Oracle 8i: Kezdõk kézikönyve)</LI>
<LI>Oracle web site (
<A HREF="http://www.oracle.com">Oracle web site</A>) (az Oracle honlapja)</LI>
</UL>
</P>
<P>Ki szeretném fejezni õszinte köszönetem ezen mûvek készítõinek!</P>
<P>Azoknak az embereknek is köszönöm a segítséget, akik tippeket adtak, és megoldások széles választékával bõvítették a doksit.</P>
<P>
<UL>
<LI>Steve Schladel-nek, kollégának és egyben DBA-nak az UMDNJ-mél, aki a RedHat 9.x telepítési folyamat leállásainak számos kiküszöböléséhez adott útmutatást.</LI>
<LI>Rene Bauer-nek, aki részletes magyarázatokat küldött a JRE verziók eltéréseibõl adódó problémák megoldására a gcc 2.9.x vs. gcc 3.2 disztribúciók és a Legato Single Server Version telepítés összefüggéseiben.</LI>
</UL>
</P>

<P>A példákban felsorolt tapasztalatok sok teszt és tapasztalás eredményképpen bõvült ki. Próbáljunk ki mindent, amit csak akarunk; ez a legfõbb kulcsa annak, hogy megtaláljuk a kívánt megoldást. Még ha egy-két rendszeren károkat is okozunk, kreativitásunkat segíti és saját hibáinkból tanulunk.</P>
<P>Megjegyzéseket vagy javaslatokat nyugodtan küldjenek az 
<A HREF="mailto:evgueni@email.com">evgueni@email.com</A> e-mail címre.</P>
<H2><A NAME="ss1.5">1.5 Magyar fordítás</A>
</H2>

<P> A magyar fordítást 
<A HREF="mailto:  velan[kukac]primposta[pont]hu">Velancsics Anikó</A> készítette (2004.03.22). A lektorálást 
<A HREF="mailto: dacas[kukac]freemail[pont]hu">Daczi László</A> végezte el (2004.05.20). A dokumentum legfrissebb változata megtalálható a 
<A HREF="http://tldp.fsf.hu/">Magyar Linux Dokumentációs Projekt</A> honlapján.</P>

<H2><A NAME="s2">2. Elõkészületek</A></H2>

<H2><A NAME="ss2.1">2.1 Az Oracle 9i adatbázis kezelõ letöltése</A>
</H2>

<P>Az Oracle 9i adatbázis kezelõ könnyen beszerezhetõ az
<A HREF="http://www.oracle.com">Oracle webhelyérõl</A>. Ott 
kattintsunk a <B>Download</B> (letöltés) hivatkozásra és kövessük a disztribúciónk szerinti útmutatásokat. Néhány oldalt el kell olvasnunk, mielõtt eljuthatunk a letöltés hivatkozáshoz. Ezek a szerzõi jogokat, beleegyezõ nyilatkozatot tartalmazzák melyeket figyelmesen olvassunk át. Többi csak statisztikai információ. Amennyiben még nem vagyunk tagok, regisztráljuk magunkat az Oracle webhelyen, hogy a szabadon letölthetõ anyagokhoz hozzáférhessünk.</P>
<P>A szerver alkalmazások 3 fájlban tölthetõk le, ezekhez hasonló megnevezésekkel:
<UL>
<LI>lnx_920_disk1.cpio.gz</LI>
<LI>lnx_920_disk2.cpio.gz</LI>
<LI>lnx_920_disk3.cpio.gz</LI>
</UL>
</P>
<P>Más verziók nevükben eltérhetnek, de telepítés tekintetében hasonlóak.</P>
<P>Az Oracle telepítési útmutató kétféle telepítéshez használható - CD vagy merevlemez telepítéshez. Én az elsõt használtam.
A fájlok letöltése és a CD-k elkészítése (lásd. a következõ részt) sok idõt vesz igénybe, ezért legyünk türelemmel! 
Mindezen kívûl a telepítés sok lemezterületet is igényel, a 3 fájl kb. 1.5 GB. Háromszor ennyi területre lesz szükségünk, ha a lemezen akarjuk tartani az archív fájlokat, a könyvtárakat és a CD képfájlokat (image), míg biztosan el nem készülnek a hibátlan CD-k.</P>
<P>A következõ parancsokat adjuk ki a letöltött fájlok könyvtárában, <EM>mindhárom</EM> letöltött fájlra vonatkozóan:</P>
<P>
<BLOCKQUOTE><CODE>
<B>gunzip lnx_920_disk1.cpio.gz<BR>
cpio -idmv &lt; lnx_920_disk1.cpio</B>
</CODE></BLOCKQUOTE>
</P>
<P>Ezek a parancsok 3 könyvtárat készítenek Disk1, Disk2 Disk3 néven.</P>
<H2><A NAME="ss2.2">2.2 A CD lemezek elkészítése</A>
</H2>

<P>Mivel a Linux rendszeren történõ CD írást a CD-Writing-HOWTO (CD írás HOGYAN) teljességgel tartalmazza, ezért az alábbiak csak az Oracle adatbázis kezelõjéhez tartozó speciális lépéseket mutatják be.</P>
<H3>A CD képfájlok elkészítése</H3>

<P>Elsõ lépés, hogy az Oracle 3 CD-jérõl CD képfájlokat készítünk. A következõ parancsokat a megfelelõ fájlnév és könyvtár nevének megváltoztatásával mindhárom könyvtárra alkalmazzuk:</P>
<P>
<BLOCKQUOTE><CODE>
<B>mkisofs -r -o ora9id1.iso Disk1/</B>
</CODE></BLOCKQUOTE>
</P>
<P>Ez 3 ISO CD képfájlt készít el, melyek az telepítési folyamathoz szükségesek. Lehet, hogy a parancs több figyelmeztetõ információt is generál a szükséges névváltoztatásokat illetõen, de nem kell aggódni, az képfájlok a helyes könyvtár-fastruktúra információkat fogják tartalmazni. Ennek ellenõrzésére fel kell csatololni (mount) az képfájlokat egy könyvtárba a loopback eszköz használatával (ehhez a rendszermagnak támogatnia kell loopback eszközt), ahogyan az a CD-Writing-HOWTO (CD írás HOGYAN) leírásában is megtalálható:</P>
<P>
<BLOCKQUOTE><CODE>
<B>mount -t iso9660 -o ro,loop=/dev/loop0 cd_image mount_dir</B>
</CODE></BLOCKQUOTE>
</P>
<P>ahol a cd_image az <B>mkisofs</B> parancs által készített CD képfájl. felscatolás után könyvtárválásokkal ellenõrizhetõ a könyvtárstruktúra helyessége. Ha minden rendben van, jöhet a következõ lépés.</P>
<H3>A CD lemezek írása</H3>

<P>Az képfájlok CD lemezre írása akármilyen parancssorból indítható vagy GUI programmal elkészíthetõk, amik ISO CD képfájlokat használnak CD lemezek készítéséhez. Részletesebben errõl a CD-Writing-HOWTO (CD írás HOGYAN)dokumentumban olvashatunk. A CD-k írását követõen bizonyosodjunk meg arról, hogy azok pontosan ugyanazt a könyvtárstruktúrát tartalmazzák mint a Disk1, Disk2, Disk3 könyvtárak. Ehhez csatoljuk fel az új CD-ket és a megszokott módon járjuk be a könyvtárstruktúrát. Az képfájlok bármilyen CD íróval bármilyen operációs rendszeren CD-re írhatók, amennyiben támogatják az ISO képfájlok használatát CD íráshoz.</P>
<P>Az <B>mkisofs</B> parancs készíthet üres könyvtárakat magában a CD képfájl root (gyökér) könyvtárában. Ez semmilyen problémát nem okoz a telepítés tartalmára nézve. Egyszerûen figyelmen kívül kell hagyni.</P>
<H2><A NAME="s3">3. Telepítés elõtti teendõk</A></H2>

<P>A telepítés elõtt szükségünk lesz néhány lépés megtételére, melyek a következõ témaköröket érintik:</P>
<H2><A NAME="ss3.1">3.1 Rendszer követelmények</A>
</H2>

<H3>Hardver követelmények</H3>

<P>Az Oracle 9i teljesítménye miatt egy jobb számítógépre lesz szükségünk. Az Installation Guide ajánlása szerint:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
Paraméter       Szükséges       Elegendõ (tesztelt)
---------------------------------------------------
CPU             PII vagy K6     K6/2 *(1)
RAM             512 MB          256 MB
HDD tárhely     3.5 GB          2.5 GB *(2)
Swap tárhely    1GB vagy RAMx2  512 MB vagy több

</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>(1)Nagyobb adatbázisokhoz Dual CPU ajánlott. Általánosan nagyobb teherbírású CPU párok (Xeon vagy Athlon MP) vagy még a quad rendszerek is jó választás(ok)nak számítanak.</P>
<P>(2)több adatbázis használata esetén RAID SCSI HDD vagy külön HDD ajánlott az egyes adatbázisokhoz.</P>
<H3>Szoftver követelmények</H3>

<P>Oracle adatbázishoz szükséges minimális rendszermag és JRE szoftver:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
Paraméter            Szükséges       Elegendõ (tesztelt)
--------------------------------------------------------
Rendszermag-verzió   2.4.7           vagy újabb
JRE                  1.1.8v3         1.1.8v3
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Az Oracle 8i és ezt követõ verzióknál a telepítési folyamat java alapú GUI alkalmazás, így fõ követelmény az X szerver és valamilyen Window Manager megléte. Minimálisan a JRE 1.1.8v3 verzió ugyancsak elengedhetetlen. A leírt Oracle telepítés JRE 1.1.8v3 verzió mellett történt, és mivel más verzióval nem volt kipróbálva, más esetekben nem garantált a helyes mûködése. Csak saját kockázatra teszeljük.</P>
<P>A szükséges követelmények Enterprise Server telepítés mellett érvényesek. Standard Edition telepítéshez az elégséges értékek megfelelnek. Bizonyos esetekben pedig még ezeknél alacsonyabb paraméterek is lehetségesek.</P>
<H3>A konkrét telepítési környezet</H3>

<P>A bemutatott telepítés a következõ környezetet használja:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
CPU                     K6 III /400
RAM                     512 MB
HDD tárhely             2.3 GB
Swap tárhely            512 MB
CD ROM                  24x
Rendszermag-verzió      2.4.18-24.8.0
JRE                     1.1.8v3
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Ez a környezet csak kis adatbázis teszteléséhez elegendõ. Ahogy azt korábban említettük, nagyobb vagy igen nagy adatbázis használatához nagyobb teljesítményû hardvert használjunk.</P>
<H2><A NAME="ss3.2">3.2 Környezeti változók és profilok</A>
</H2>

<P>Telepítés elõtt néhány környezeti változó értékét be kell állítanunk. Ezeket a változókat beállíthatjuk konkrétan a sorok beírásával az összes olyan <B>.bash_profile</B> fájlban, amelyek tulajdonosa az adatbázis eléréséhez jogosult, vagy általánosabb megközelítésben - az <B>/etc/profile</B> fájlban (akárcsak a bemutatott telepítésünkben):</P>
<P>
<HR>
<PRE>

ORACLE_BASE=/u01/app/oracle
ORACLE_HOME=/u01/app/oracle/product/9.2.0.1.0
ORACLE_SID=ORTD

PATH=$PATH:$ORACLE_HOME/bin
LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$ORACLE_HOME/lib:$ORACLE_HOME/network/lib

export PATH ORACLE_BASE ORACLE_HOME ORACLE_SID LD_LIBRARY_PATH
</PRE>
<HR>
</P>
<P>Az említettek teljes mértékben érvényesek mind a RedHat8.x és 9.x operációs rendszerekre, bár úgy néz ki, hogy az Oracle egy másik változatot tervez RedHat 9.-re. Ennek megfelelõen tartalmaznia és exportálnia kell az elõzõeket. A következõ beállítás ahhoz szükséges, hogy ne ragadjon az telepítés egy végtelen ciklusba:</P>
<P>
<HR>
<PRE>
LD_ASSUME_KERNEL=2.4.1
</PRE>
<HR>
</P>

<P>Köszönet Steve Schladel kollégának és adatbázis-adminisztrátornak az telepítés problémamentesítéséért.</P>
<P>Az ORACLE_SID változó beállítására az Oracle Test Database rövidítését használtam. Ezt mindenki egy választott SID értékkel állíthatja be. Ez lesz az alapértelmezett adatbázis név, valamint a teljes adatbázis név része.</P>
<P>A változóról bõvebben a Oracle Administrator's Manual or Reference (Oracle Adminisztrator Kézikönyben vagy Referenciában) olvashatunk.</P>
<H2><A NAME="ss3.3">3.3 JRE</A>
</H2>

<P>A JRE (Java Runtime Enviroment) letölthetõ a 
<A HREF="http://www.blackdown.org">Blackdown website</A> - Blackdown webhelyrõl. Válasszuk az 1.1.8v3 verziót, ha nem tudjuk pontosan melyiket töltsük le, majd tömörítsük ki az /usr/local könyvtárba. Ez egy könyvtárt fog létrehozni a JRE verziójának megfelelõ elnevezéssel. Hozzuk létre a következõ hivatkozást (link) az /usr/local könyvtárban:</P>
<P>
<BLOCKQUOTE><CODE>
<B>ln -s jre118_v3 jre</B>
</CODE></BLOCKQUOTE>
</P>
<P>JRE 1.1.8v3 disztribúció esetén. Ha újabb verziót használunk akkor a parancsot annak megfelelõen változtassuk meg. Adjuk a PATH változóhoz a JRE bin könyvtárát:</P>
<P>
<BLOCKQUOTE><CODE>
<B>PATH=$PATH:/usr/local/jre/bin<BR>
export $PATH</B>
</CODE></BLOCKQUOTE>
</P>
<P>illetve a szükséges útvonalakat egészítsük ki vele.</P>
<H2><A NAME="ss3.4">3.4 Root felhasználóként végrehajtandó feladatok</A>
</H2>

<P>A telepítés megkezdése elõtt a Linux környezetet és könyvtársturktúrát elõ kell készítenünk. Néhány lépés részletes leírása következik. Ne feledjük el, hogy ezek a Standard Edition telepítéséhez szükséges minimális lépések. Ha valaki az Enterprise változatot vagy további szolgáltatásokat kíván telepíteni, annak azt ajánljuk, hogy az Oracle 9i Installation Guide (Oracle 9i telepítési útmutató) leírást tanulmányozza át hozzá.</P>
<P>Root felhasználóként jelentkezzünk be, majd kövessük az alábbiakat.</P>
<H3>A rendszermag beállítása</H3>

<P>Amennyiben a következõ rész nem teljesen világos, a Linux IPC programozói referenciában lehet a témának utánajárni.</P>
<P>A 2.2.1-es verzióktól kezdve a rendszermagot a /proc fájlrendszeren kersztül dinamikusan lehet paraméterezni, nem kell azt újra fordítani. A /proc fájlrendszer használata ezért a rendszer paraméterezéséhez nagy rugalmasságot biztosít. A következõkben a rendszermag átparaméterezéséhez szükséges, minden rendszerindításkor lefutó szkriptek elkészítését mutatjuk be.</P>
<P>Lépjünk be a /proc/sys/kernel könyvtárba.</P>
<P>A rendszermagnak a telepítéshez szükséges beállításairól lesz szó a következõkben.</P>
<H3>Nézzük meg és állítsuk be a szemafor paramétereit</H3>

<P>Az SEMMSL, SEMMNS, SEMOPM és SEMMNI szemaforok paramétereit a</P>
<P>
<BLOCKQUOTE><CODE>
<B>cat sem</B>
</CODE></BLOCKQUOTE>
</P>
<P>paranccsal tudjuk megnézni. Ehhez hasonló kimenetet kapunk:</P>
<P>
<BLOCKQUOTE><CODE>
<B>250  32000   32      128</B>
</CODE></BLOCKQUOTE>
</P>
<P>ami az említett szemaforok értékeit jelenti a fenti felsorolási sorrendben. Állítsuk át a paramétereket a következõképpen:</P>
<P>
<BLOCKQUOTE><CODE>
<B>echo 100 32000 100 100 &gt; sem</B>
</CODE></BLOCKQUOTE>
</P>
<H3>Nézzük meg és állítsuk be az osztott memória (shared memory) paramétereit</H3>

<P>Az SHMMAX, SHMMIN, SHMMNI, SHMSEG osztott memória paraméterek értékeit a</P>
<P>
<BLOCKQUOTE><CODE>
<B>cat shm_param</B>
</CODE></BLOCKQUOTE>
</P>
<P>paranccsal tudjuk lekérdezni, ahol az shm_param az említett SHMMAX, SHMMIN, SHMMNI, SHMSEG valamelyikét jelöli. A következõ beállításokat végezzük el:</P>
<P>
<BLOCKQUOTE><CODE>
<B>echo 2147483648 &gt; shmmax<BR>
echo 4096 &gt; shmmni<BR>
echo 2097152 &gt; shmall</B>
</CODE></BLOCKQUOTE>
</P>
<P>A fenti parancsokat az aktuális futási szinthez tartozó init szkriptekbe helyezve minden rendszerindításkor lefuttathatjuk, hogy meghatározzuk melyik Oracle adatbázist használjuk, de ne feledjük el ezeket a paramétereket beállítani még az adatbázis indítása <EM>elõtt</EM>. 
A futási szintekrõl és indító szkriptekrõl további információt találhatunk a Linux Administrator's guide (Linux adminisztrációs kézikönyv) leírásban.</P>
<H3>Fájlkezelõk (File handles)</H3>

<P>Állítsuk be a fájlkezelõket az alábbi parancsokkal:</P>
<P>
<BLOCKQUOTE><CODE>
<B>echo 65536 &gt; /proc/sys/fs/file-max<BR>
ulimit -n 65536</B>
</CODE></BLOCKQUOTE>
</P>
<H3>Socket-ek</H3>

<P>Soket-ek beállítása:</P>
<P>
<BLOCKQUOTE><CODE>
<B>echo 1024 65000 &gt; /proc/sys/net/ipv4/ip_local_port_range</B>
</CODE></BLOCKQUOTE>
</P>
<H3>Folyamatok (process) korlátozása</H3>

<P>Process limit beállítása:</P>
<P>
<BLOCKQUOTE><CODE>
<B>ulimit -u 16384</B>
</CODE></BLOCKQUOTE>
</P>
<H3>Csoportok és hozzáférések</H3>

<P>Ahogy minden Oracle adatbázis, a 9i tulajdonosához is tartozik egy felhasználó, amit tradicionálisan <B>oracle</B>-nek neveznek el. A csoportokkal szembeni elvárások kissé eltérnek a megszokottól; Kell hogy legyen egy OSDBA group, ami alapértelmezetten a <B>dba</B> nevet viseli. Szükség van továbbá egy másik group-ra is (általában <B>oinstall</B> névvel) ami a szoftver telepítéseket felügyeli. Operátorok csoportjára is szükség van (de ez tetszõleges), ami operátori  hozzáférést biztosít a felhasználók egy csoportjának.
A csoportok létrehozásának menete:</P>
<P>
<BLOCKQUOTE><CODE>
<B>groupadd dba<BR>
groupadd oinstall<BR>
groupadd oper</B>
</CODE></BLOCKQUOTE>
</P>
<P>Miután elkészítettük a csoportokat, adjunk hozzáférést az Oracle tulajdonosának:</P>
<P>
<BLOCKQUOTE><CODE>
<B>useradd -c DBA -g oinstall -G dba oracle</B>
</CODE></BLOCKQUOTE>
</P>
<P>ez létrehozza az <B>oracle</B> felhasználót, ami elsõdlegesen az <B>oinstall</B>, másodsorban  pedig a <B>dba</B> csoportba tartozik.</P>
<P>Az adatbázis felhasználóit a késõbbiekben az /etc/group fájlban kell a dba csoporthoz adni.</P>
<H3>Felcsatolási pontok (mount points) és hozzáférések</H3>

<P>Az Oracle telepítéshez minimálisan 2 csatolás szükséges - egy a szoftver és egy az adatbázis fájlokhoz. Abban az esetben ha OFA-t (Optimal Flexible architecture) használunk, akkor 4 csatolásra lesz szükség - egy a szoftverhez, három pedig az adatbázis fájlokhoz.</P>
<P>Oracle dokumentációs követelmény, hogy mindegyik csatolási pont külön külön lemez legyen, de minimálisan ahogy azt mi is használjuk, a csatolási helyeknek könyvtáraknak kell lenniük. Hagyományosan a csatolások elnevezései /u01, /u02, /u03, stb. Ezeket a rendszeren bárhol root alkönyvtárként kell felcsatolni. Én konkrétan kettõ könyvtárba, /u01, /u02 könyvtárként a root könyvtár alá készítettem csatolási pontot.</P>
<P>Ezekkel a parancsokkal elkészíthetjük a  megfelelõ csatolási pontokat (root felhasználóként).</P>
<P>
<BLOCKQUOTE><CODE>
<B>mkdir /u01 /u02<BR>
chown oracle.dba /u01 /u02<BR>
chmod 755 /u01 /u02</B>
</CODE></BLOCKQUOTE>
</P>
<P>Az utolsó két parancs az Oracle 9i telepítéséhez, az telepítés könyvtár tulajdonjogait állítja be a telepítõ felhasználóhoz (dba-hoz), de az telepítés után adminisztrátorként a legfelsõ könyvtár a root tulajdonává tehetõ.</P>
<H3>Fájl-létrehozási jogosultságok</H3>

<P>Legtöbbször a umask 0022-re van állítva. Oracle adatbázis telepítésénél ajánlott leellenõrizni, hogy ez a 0022 érték legyen beállítva. Ez biztosítja, hogy az telepítés a megfelelõ attribútumokkal jöjjön létre. Ellenõrizzük le a beállítást az</P>
<P>
<BLOCKQUOTE><CODE>
<B>umask</B>
</CODE></BLOCKQUOTE>
</P>
<P>paranccsal, majd állítsuk be a</P>
<P>
<BLOCKQUOTE><CODE>
<B>umask 0022</B>
</CODE></BLOCKQUOTE>
</P>
<P>paranccsal. Ha az umask alapértelmezett értéke nem a 0022, akkor azt akár profile-ból is érdemes beállítanunk.</P>
<H2><A NAME="ss3.5">3.5 <B>oracle</B> felhasználóként elvégzendõ beállítások</A>
</H2>

<P>Telepítés elõtt lépjünk be <B>oracle</B> felhasználóként egy X terminálról, és bizonyosodjunk meg a DISPLAY és PATH változók megfelelõ beállításáról. A DISPLAY változónak tartalmaznia kell az X szerver nevét, számát és screen számát, ahol  
az Oracle Univerzal Installer futni fog. Ez utóbbira csak akkor van szükség ha távoli X servert-t használunk. Helyi telepítés esetén az X szerver manager használatával minden probléma nélkül futtathatjuk a telepítõt. Ha az telepítõ futtatása során bármilyen problémába ütközünk a DISPLAY változó kapcsán, hajtsuk végre a következõket:</P>
<P>
<BLOCKQUOTE><CODE>
<B>xhost +localhost<BR>
export DISPLAY=localhost:0.0</B>
</CODE></BLOCKQUOTE>
</P>
<P>Ez egy trükk.</P>
<P>Továbbá <B>oracle</B> felhasználóként adjuk ki az</P>
<P>
<BLOCKQUOTE><CODE>
<B>env</B>
</CODE></BLOCKQUOTE>
</P>
<P>parancsot, majd ellenõrizzük le az összes elõzõekben említett változót. Ha úgy találjuk, hogy egy vagy több változónak nem megfelelõek az értékei, javítsuk ki õket és a környezeti változókat töltsük újra.</P>
<H2><A NAME="s4">4. Telepítés</A></H2>

<H2><A NAME="ss4.1">4.1 CD lemezek felcsatolása (az telepítés megkezdése elõtt ill. közben)</A>
</H2>

<P>Általában RedHat Linuxon önmûködõen felcsatolódnak a CD-ROM meghajtóba helyezett CD lemezek, de kézzel is felcsatolhatjuk õket, röviden a következõképpen:</P>
<P>Indítsunk egy terminál ablakot és váltsunk superuser-re. Hagyjuk a terminál ablakot nyitva a telepítés alatt. Szükség esetén majd kéznél lesz.</P>
<P>Helyezzük az elsõ CD lemezt a CD-ROM meghajtóba. Ellenõrizzük le, hogy a CD-k fel vannak-e csatolva valamelyik könyvtárba. Általában ez az /mnt/cdrom szokott lenni, de ha úgy tetszik, változtassuk meg, ahogy akarjuk. Futtassuk a következõket (feltéve persze, hogy a csatolási könyvtárunk az /mnt/cdrom ):</P>
<P>
<BLOCKQUOTE><CODE>
<B>mount /dev/cdrom /mnt/cdrom</B>
</CODE></BLOCKQUOTE>
</P>
<P>ami felcsatolja a CD lemezt az /mnt/cdrom könyvtárba. Ez lesz a telepítés könyvtára.</P>
<P>A telepítés folyamán, az Oracle Universal Installer kérni fogja, hogy cseréljünk CD-t, ezért ha a CD lecsatolása nem történik automatikusan, menjünk a root terminálunkhoz és végezzük el a következõket:</P>
<P>
<BLOCKQUOTE><CODE>
<B>cd /mnt<BR>
eject</B>
</CODE></BLOCKQUOTE>
</P>
<P>Ezzel lecsatoljuk a CD lemeztt és kinyitjuk a CD-ROM meghajtót. Ekkor helyezzük be a következõ CD lemezt és csukjuk be a CD-ROM-ot. Használjuk a mount parancsot újra, ha a felcsatolás nem automatikus, majd váltsunk át a telepítési képernyõhöz, hogy folytassuk az telepítést.</P>
<H2><A NAME="ss4.2">4.2 A telepítõ futtatása</A>
</H2>

<P>Miután felcsatoltuk az elsõ lemezt, indítsunk egy új terminált és váltsunk át az /mnt/cdrom könyvtárba. Ez a telepítés csatolási pontja. Innen futtassuk a következõt:</P>
<P>
<BLOCKQUOTE><CODE>
<B>./runInstaller &amp;</B>
</CODE></BLOCKQUOTE>
</P>
<P>Továbbiakban az ugyanebben a könyvtárban található index.html fájlt böngészõben megnyithatjuk, és telepítésünkhöz használhatjuk.</P>
<H2><A NAME="ss4.3">4.3 Telepítési képernyõk és lépések</A>
</H2>

<P>Az Oracle Universal Installer 2.2-nek egyszerû, természetes felülete van. A következõ telepítési rész átugorható, és saját belátás szerint is eredményesen folytatható a telepítés. A képernyõk jó és logikus sorrendben követik egymást.</P>
<P>Abban az esetben, ha ellenõrizni akarjuk, hogy hol tartunk, vessük össze a folyamatunkat az alábbiakban leírt képernyõkkel és lépésekkel.</P>
<H3>Üdvözlõ képernyõ (Welcome Screen)</H3>

<P>Itt határozhatjuk meg, hogy a terméket telepíteni vagy törölni kívánjuk. Elsõ telepítésünk esetén a folytatáshoz kattintsuk a "Next" gombra.</P>
<P>Egy új párbeszédablak (Inventory Location) fog megjelenni, ami az átmeneti telepítéshez a késõbbiekben is használatos könyvtár megjelölését kéri tõlünk. Válasszuk az OK gombot, ha rendben találunk mindent, máskülönben írjuk be a kívánt, telepítéshez használandó könyvtár nevét.</P>
<H3>UNIX csopornév képernyõ (UNIX Group Name Screen)</H3>

<P>Ez a képernyõ az Oracle Installation Group (Oracle telepítés csoport) meghatározására szolgál, ami alapértelmezésben az <B>oinstall</B>. Ha meg akarjuk változtatni a csoport nevét, vagy egy másik speciális csoportot akarunk használni az telepítéshez, akkor most végezzük azt el. Egyébként írjuk be az oinstall-t, és a "Next"-tel menjünk tovább. A megjelenõ párbeszédablak azt mutatja, hogy a root felhasználóként bejelentkezett terminálunkat kell használnunk (amit korábban indítottunk). Váltsunk át a root terminálhoz, és a kövessük képernyõn látható instrukciókat, ami az /tmp/ könyvtárban lévõ orainstRoot.sh szkriptet futtatja.</P>
<P>Sikeres futtatás esetén a képernyõn a következõ látható:</P>
<P>
<BLOCKQUOTE><CODE>
<B>Creating Oracle Inventory pointer file (/etc/oraInst.loc)<BR>
Changing groupname of /u01/app/oracle/oraInventory to oinstall.</B>
</CODE></BLOCKQUOTE>
</P>
<P>Váltsunk vissza a párbeszédablakhoz, és kattintsunk a "Continue" gomra.</P>
<H3>Fájl elhelyezések képernyõ (File Locations Screen)</H3>

<P>Ezen a képernyõn a telepítés forrás- és célkönyvtára látható. Amennyiben a környezeti változók rendben vannak, nem kell megváltoztatnunk semmit sem, de ha mégis változtatni akarunk rajta, akkor körültekintõen és tudatosan tegyük azt. 
Kattintsunk a "Next" gombra.</P>
<P>A képernyõ jobb felsõ részén látható folyamatjelzõ a hosszadalmas lemezolvasási mûveleteket jelzi. Legyünk türelemmel.</P>
<H3>Telepíthetõ programok képernyõ (Available Products Screen)</H3>

<P>A képernyõ a telepíthetõ termékeket mutatja. Mivel mi csak az adatbázis kezelõt akarjuk telepíteni, ez elsõ opció (alapértelmezett) érdekes számunkra. Tulajdonképpen ez néhány, a következõ részekben felsorolt termékeket tartalmazza. Kattintsunk a "Next" gombra.</P>
<H3>Telepítési típusok képernyõ (Installation Types Screen)</H3>

<P>Mivel példánk a Standard Edition Installation-t mutatja be, ezért válasszuk a Standard Installation-t. Választhatjuk az Enterprise-t is, de a két folyamat innentõl eltérhet, és további opciók beállítására is szükség lehet. Ennek eldöntése a telepítést végzõ személy feladata.</P>
<P>Kattintsunk a "Next" gombra. Egy kis várakozás után folytassuk a következõ lépéssel.</P>
<H3>Adatbázis beállítási képernyõ (Database Configuration Screen)</H3>

<P>Itt (operátorként) kiválasztható, hogy milyen céllal fog az adatbázis mûködni, annak érdekében, hogy a telepítés a paramétereket ahhoz igazíthassa. General Purpose-t válasszuk majd kattintsunk a "Next" gombra. Ismét egy rövid várakozás következik.</P>
<H3>Adatbázis azonosítás képernyõ (Database Identification Screen)</H3>

<P>Az operátor itt beírhatja az adatbázis nevét. Egyértelmûen értelmezhetõk a képernyõn a szövegrészek. Példánkban én következõt írtam be:</P>
<P>
<BLOCKQUOTE><CODE>
<B>ORTD.zeus</B>
</CODE></BLOCKQUOTE>
</P>
<P>mivel az adatbázis szerverem host neve "zeus". Használjuk a saját adatbázisunk host nevét, majd kattintsunk a "Next" gombra.</P>
<H3>Adatbázis fájlok elhelyezése képernyõ (Database File Location Screen)</H3>

<P>Ez a képernyõ arra szolgál, hogy meghatározzuk az adatbázis fájlok fizikai elhelyezkedését. Ajánlott hogy az adat fájlok egy elkülönített lemezen (könyvtárban) legyenek. Nálam például az alapértelmezett értéktõl eltérõen az</P>
<P>
<BLOCKQUOTE><CODE>
<B>/u02/oradata</B>
</CODE></BLOCKQUOTE>
</P>
<P>könyvtárban vannak, az alapértelmezett helyett. Mikor végeztünk kattintsunk a "Next" gombra.</P>
<H3>Adatbázis karakterkészlet képernyõ (Database Character Set Screen)</H3>

<P>Itt különbözõ karakterkészleteket állíthatunk be az adatbázisunkhoz. Én meghagytam a "Use the Default Character Set" beállítást. Lépjünk a "Next"-tel tovább.</P>
<H3>Összefoglaló képernyõ (Summary Screen)</H3>

<P>Ha ezt a  képernyõ látjuk, akkor az OUI-val elkészült a telepítési folyamat elõkészítése. Most át lehet nézi telepítési fát, és láthatjuk miket választottunk. Megengedi, hogy visszamenjünk és javítsuk, ha valahol nem értünk egyet a felsoroltakkal. Egyébként pedig kattintsunk az "Install" gombra és a telepítési folyamat elkezdõdik.</P>
<H3>Telepítõ képernyõ (Install Screen)</H3>

<P>Ez egy nagyon hosszadalmas és unalmas képernyõ, ami idõnként a CD lemezek cseréjét kéri. Egy folyamatkijelzõt jelenít meg, és tételesen összegzi az egyes részek százalékarányát a teljes folyamathoz képes.</P>
<P>A telepítési folyamat nagyon hosszú. Elõször a szoftverkomponensek telepítése történik, majd minden hivatkozás (link) elkészül.</P>
<P>Valamivel töltsük el az idõt, és idõnként nézzünk a képernyõre, hogy kell-e CD lemezt cserélnünk.</P>
<P><EM>FONTOS!</EM> Az én esetemben (kétszer telepítettem) hibaüzenetet kaptam, az összekapcsolási folyamat 79%-nál. A hibaüzenet párbeszédablaka a következõt tartalmazta:</P>
<P>
<BLOCKQUOTE><CODE>
<B>Error in invoking target install of makefile<BR>
/u01/app/oracle/product/9.2.0.1.0/ctx/lib/ins_ctx.mk</B>
</CODE></BLOCKQUOTE>
</P>
<P>Mindkét telepítésnél figyelmen kívül hagytam, és semmi probléma nem látszott az összeszerkesztési folyamatban.</P>
<P>A telepítés végén egy párbeszéd ablak bukkan elõ. Néhány terminál parancsot kell végrehajtani a telepítési folyamat befejezése elõtt. Alapvetõen van egy <B>roor.sh</B> nevû szkript az $ORACLE_HOME könyvtárban, amit root felhasználóként kell futtatni a root terminálról. Maga a folyamat idõt és sok HDD mûveletet igényel, legyünk türelemmel, és ne aggódjunk miatta.</P>
<H3>Beállítási eszközök képernyõ (Configuration Tools Screen)</H3>

<P>Három task-ot próbál lefuttatni a konfigurációs eszközök képernyõ és mindegyikrõl hibát jelez. A probléma megoldása a következõ. Az $ORACLE_HOME könyvtárban van egy JRE nevû hivatkozás (link), ami az Oracle JRE könyvtárra mutat. Töröljük ezt a hivatkozást, és készítsünk egyet a saját JRE disztribúciónkhoz, amirõl az elõzõekben már szóltunk. 
Végrehajtandó parancsok:</P>
<P>
<BLOCKQUOTE><CODE>
<B>rm -f JRE<BR>
ln -s /usr/local/jre/ JRE</B>
</CODE></BLOCKQUOTE>
</P>
<P>Miután végrehajtottuk a parancsokat, próbáljuk meg egyenként kiválasztani a táblázat Tool Name (eszközök neve) oszlopából az egyes tételeket, és kattintsunk a "Retry" gombra. Ha nem sikerül, akkor se aggódjunk. Ezek opcionálisak a telepítés során, és késõbb is végre lehet õket hajtani.</P>
<H3>Hibaelhárítás</H3>

<P>Amennyiben az utolsó (nem kötelezõ) mûveletek nem hajthatók végre, legalább kettõjük megvalósítására, vannak speciális megoldási javaslatok. Elõször is az Oracle dokumentációt érdemes kézbe venni, és a telepítés hibaelhárításakor a sorok között böngészni. Ha a feltételek rendben vannak, akkor komoly hiba nem lehet a mûveletben. Ha mégis, akkor ellenõrizzük át az összes kezdeti feltételt, fájl és könyvtár jogosultságokat és a tárhelyet.</P>
<P>Minden könnyen letörölhetõ és visszaállítható, csupán az Oracle felcsatolási pontok könyvtárainak (/u01, /u02, stb.) tartalmát kell leszedni, és az /etc könyvtárban lévõ <B>oratab</B> fájlt törölni. Azért, hogy ne maradjon nyoma az Oracle-nek a rendszeren még egy fájl-csoportot törölni kell. Ezek az /usr/local/bin könyvtárban található <B>oraenv</B>, <B>coraenv</B>, <B>dbhome</B> nevû fájlok. Habár ott is hagyhatjuk õket, és a legközelebbi telepítésnél a telepítõ majd rákérdez, hogy maradjanak-e.</P>
<P>Nos, akkor a nem kötelezõ feladatok:</P>
<H3>Hálózati beállítások (Net Configuration Assistant)</H3>

<P>Ennek futtatásához menjünk a $ORACLE_HOME/bin könyvtárba, és onnan futtassuk:</P>
<P>
<BLOCKQUOTE><CODE>
<B>./netca &amp;</B>
</CODE></BLOCKQUOTE>
</P>
<P>Ez az alkalmazás négy feladat közül egyet elindít. Ténylegesen a listener az amit be kell állítani. A többi nem olyan fontos, de próbáljuk meg azokat is beállítani. A listener beállítása elõtt lehetséges, hogy már fut egy listener. Ellenõrizzük ezt a következõ parancs végrehajtásával:</P>
<P>
<BLOCKQUOTE><CODE>
<B>ps afx | grep LISTEN | grep -v grep</B>
</CODE></BLOCKQUOTE>
</P>
<P>Amennyiben a következõ sorhoz hasonlót kapunk:</P>
<P>
<BLOCKQUOTE><CODE>
<B>15922 ?  S  0:00 /u01/app/oracle/product/9.2.0.1.0/bin/tnslsnr LISTENER</B>
</CODE></BLOCKQUOTE>
</P>
<P>már fut egy listener. Állítsuk le a következõ $ORACLE_HOME/bin könyvtárban lévõ paranccsal:</P>
<P>
<BLOCKQUOTE><CODE>
<B>./lsnrctl stop</B>
</CODE></BLOCKQUOTE>
</P>
<P>Lehetséges, hogy törölnünk kell a meglévõ listener-t és egy újat kell készítenünk. Ez teljesen rajtunk múlik. Kövessük az alkalmazás menetét. Amennyiben készítettünk egy új listenert, az egész folyamat végén az új listener fog elindulni.</P>
<H3>Adatbázis beállítás (Database Configuration Assistant)</H3>

<P>Ennek futtatásához lépjünk be a $ORACLE_HOME/bin könyvtárba és futtassuk:</P>
<P>
<BLOCKQUOTE><CODE>
<B>./dbca &amp;</B>
</CODE></BLOCKQUOTE>
</P>
<P>Ez az alkalmazás talán a legfontosabb a beállítások közül. Az adatbázis létrehozását és beállítását segíti. Ha a telepítés során vagy az elõzõekben említett alkalmazások újraindításával nem készült még adatbázis, ennek futtatásával készíthetjük el azt.</P>
<P>Amíg az adatbázist nem használjuk, az törölhetõ és újra létrehozható. Itt tehetjük ezt meg. Az alkalmazás összes funkcióit ez a dokumentum nem tartalmazhatja, de mivel egy GUI alkalmazásról van szó, ezért nagyon könnyû vele a feladatokat elvégezni.</P>
<P>Személy szerint itt szeretem elkészíteni az adatbázist, mert itt az összes szükséges paraméter ellenõrizhetõ, kiváltképp a könyvtárak ahová az adatfájlok készülnek (kerülnek). Válasszuk a "Typical"-t az adatbázis paraméterezéséhez. A következõ képernyõn fastruktúra segítségével állíthatjuk be az adatbázis fájlok helyét. {ORACLE_BASE} helyett állítsunk be például az /u02 könyvtárat. Ez rakja az adatbázis fájlokat használatra az /u02/oradata/SID könyvtárba. Mindez csak példa, rajtunk múlik, hogyan döntünk az adatbázis könyvtárfájának meghatározásáról.</P>
<P>Az adatbázis elkészítése végén be kell írni a SYS és SYSTEM felhasználókhoz tartozó jelszavakat. Írjuk be (megerõsítéssel), jegyezzük meg õket, és lépjünk ki (ezek az "OK"-t jelentik). Majd futtassuk:</P>
<P>
<BLOCKQUOTE><CODE>
<B>ps afx</B>
</CODE></BLOCKQUOTE>
</P>
<P>és a képernyõn a következõ sorokhoz hasonlóknak kell megjelennie:</P>
<P>
<HR>
<PRE>

PID     TTY      STAT   TIME COMMAND
    1   ?        S      0:04 init
    2   ?        SW     0:01 [keventd]
    
..... Lots of other lines we are not interested in...

11665   ?        S      0:00 ora_pmon_ORTD
11667   ?        S      0:00 ora_dbw0_ORTD
11671   ?        S      0:00 ora_lgwr_ORTD
11673   ?        S      0:00 ora_ckpt_ORTD
11675   ?        S      0:00 ora_smon_ORTD
11677   ?        S      0:00 ora_reco_ORTD
11679   ?        S      0:00 ora_cjq0_ORTD
11681   ?        S      0:02 ora_qmn0_ORTD
11683   ?        S      0:00 ora_s000_ORTD
11685   ?        S      0:00 ora_d000_ORTD
11812   pts/1    S      0:00 /u01/app/oracle/product/9.2.0.1.0/bin/tnslsnr LISTENER -inherit
</PRE>
<HR>
</P>
<P>Ha megnézzük az ábrát, ez a futó adatbázisunkat mutatja. A fenti példában szereplõ utolsó sor a listener (lehetséges, hogy máshol található a képernyõn).</P>
<P><EM>(Gratulálunk!)</EM> Sikeresen befejezõdött a telepítés!</P>
<H3>Hibaelhárítás frissítések</H3>

<P>A következõ Rene Bauer-tól származó frissítés. A következõ problémák merülhettek fel:
<UL>
<LI>JRE verzió kompatibilitás</LI>
<LI>Hiányzó adatbázis-beállító fájl</LI>
<LI>Legato Single Server Version telepítési hiba</LI>
</UL>
</P>
<P>JRE kompatibilitási problémát egyedül Rene jelzett, de sok e-mail-t kaptam ezzel kapcsolatban. A probléma abból származik, hogy a RedHat8 és 9  a gcc 3.2-es verzióval készült, míg némely régebbi JRE verziót gcc 2.9.x verzióval fordítottak. A megoldás az, hogy a legutolsó JRE verziót letöltjük. Ennek az frissítésnek az idejében ez a 1.4.1-es verzió volt, és mivel a JRE nem futtatható, futtassuk le a következõ parancsot, hogy elkészüljön a megfelelõ hivatkozás (link):
<BLOCKQUOTE><CODE>
<B>ln -s $JRE_DIR/bin/java $JRE_DIR/bin/jre</B>
</CODE></BLOCKQUOTE>

ahol a $JRE_BIN a jre könyvtárunkat jelöli.</P>
<P>A második frissítés az adatbázis létrehozása után hiányzó beállítási fájlt érinti. Az init{ORACLE_SID}.ora fájlnak alapértelmezetten az $ORACLE_HOME/db/ könyvtárban kellene létrejönnie.</P>
<P>Rene megoldása: A telepítõ egy spfile{ORACLE_SID}.ora nevû fájlt készít, így egy hivatkozás készíthetõ ami pótolja a hiányzó fájlt. Lépjünk az ORACLE_HOME/dbs/ könyvtárba, és hajtsuk végre a következõt:
<BLOCKQUOTE><CODE>
<B>ln -s spfile{ORACLE_SID}.ora init{ORACLE_SID}.ora</B>
</CODE></BLOCKQUOTE>
</P>


<P>Az én megoldásom:
A telepítés közben létrejön egy init.ora nevû fájl. Ezt egyszerûen lemásolom init{ORACLE_SID}.ora néven. Lépjünk be a $ORACLE_HOME/dbs/ könyvtárba, majd futtassuk:
<BLOCKQUOTE><CODE>
<B>cp init.ora initORTD.ora</B>
</CODE></BLOCKQUOTE>
</P>
<P>A harmadik probléma az Oracle telepítõ folyamat hibájára vonatkozik, a Legato Single Server Version telepítésnél. Nekem nem volt ilyen problémám, de itt van Rene verziója, amit megpróbálok lerövidíteni amennyire lehet. A legutolsó root.sh fájl, ami az Oracle telepítés kérésére futtatódott hibát okozott az LSSV telepítése alatt. Rene szerint, a RedHat 8 és 9 ncurses5-tel készült, de alapértelmezetten az ncurses4 kompatibilitás csomag nincs telepítve, így annak telepítése után az LSSV probléma megszûnik.</P>
<P>Az említett hibák valószínûleg nem az utolsó megoldandó problémák, ezért bátorítok minden megjegyzést és kiegészítést, amivel a "Hibaelhárítás" fejezetet bõvíthetem. Minden, a dokumentum tökéletesítését célzó visszajelzést köszönettel veszek.</P>
<H2><A NAME="s5">5. Telepítés utáni teendõk</A></H2>

<P>Az Oracle Installation Guide egy hosszadalmas telepítés után végrehajtandó folyamatot is leír. Néhány közülük elengedhetetlen, néhányra pedig a telepített példányunk esetén talán soha nem is lesz szükségünk, mindenesetre ez a dokumentum bõvebben nem tárgyalja.</P>
<P>Nézd meg az Installation Guide (Telepítési kézikönyv) leírást ezekhez az eljárásokhoz. Ez a leírás a minimális telepítéshez nyújt használható segítséget, ez elegendõ az alapvetõ mûveletek végrehajtásához.</P>
<H2><A NAME="ss5.1">5.1 Az <B>oratab</B> fájl szerkesztése</A>
</H2>

<P>Különösen fontos lépés, hogy az adatbázis-parancssorból bármikor elindítható és leállítható, rendszerindításkor automatikusan is indítható. Lépjünk az /etc könyvtárba az <B>oratab</B> fájl szerkesztéséhez. Az alábbi sor:</P>
<P>
<BLOCKQUOTE><CODE>
<B>ORTD:/u01/app/oracle/product/9.2.0.1.0:N</B>
</CODE></BLOCKQUOTE>
</P>
<P>utolsó értéket állítsuk "Y"-ra, azaz így:</P>
<P>
<BLOCKQUOTE><CODE>
<B>ORTD:/u01/app/oracle/product/9.2.0.1.0:Y</B>
</CODE></BLOCKQUOTE>
</P>
<P>Mentsünk és menjünk vissza az Oracle home könyvtárunkba.</P>
<H2><A NAME="ss5.2">5.2 Rendszerindításkor adatbázist indító szkript</A>
</H2>

<P>Általános elképzelés az, hogy az adatbázist a szerver rendszerindítás idejében automatikusan indítsuk el. Ehhez szükséges egy szkript, ami a futási szintû beállítások közé tehetõ. Az itteni megoldás csak például szolgál, mindenkinek a saját gépén a saját futási szintû beállításaihoz kell a beállítást megtennie.</P>
<P>
<HR>
<PRE>

#!/bin/bash
#
# Run-level Startup script for the Oracle Instance and Listener
#
# chkconfig: 345 91 19
# description: Startup/Shutdown Oracle listener and instance

ORA_HOME="/u01/app/oracle/product/9.2.0.1.0"
ORA_OWNR="oracle"

# if the executables do not exist -- display error

if [ ! -f $ORA_HOME/bin/dbstart -o ! -d $ORA_HOME ]
then
        echo "Oracle startup: cannot start"
        exit 1
fi

# depending on parameter -- startup, shutdown, restart 
# of the instance and listener or usage display 

case "$1" in
    start)
        # Oracle listener and instance startup
        echo -n "Starting Oracle: "
        su - $ORA_OWNR -c "$ORA_HOME/bin/lsnrctl start"
        su - $ORA_OWNR -c $ORA_HOME/bin/dbstart
        touch /var/lock/subsys/oracle
        echo "OK"
        ;;
    stop)
        # Oracle listener and instance shutdown
        echo -n "Shutdown Oracle: "
        su - $ORA_OWNR -c "$ORA_HOME/bin/lsnrctl stop"
        su - $ORA_OWNR -c $ORA_HOME/bin/dbshut
        rm -f /var/lock/subsys/oracle
        echo "OK"
        ;;
    reload|restart)
        $0 stop
        $0 start
        ;;
    *)
        echo "Usage: $0 start|stop|restart|reload"
        exit 1
esac
exit 0
</PRE>
<HR>
</P>
<P>Ezt a fájlt egyszerûen kimásolhatjuk, beilleszthetjük rendszerünkbe és beállításainknak megfelelõ változtatásokat végezhetünk raja.</P>
<P>Ha már másoljuk és szerkesszük a fájlt, tegyük azt az /etc/rc.d/init.d könyvtárba, és állítsuk át a tulajdonjogait és attribútumait a könyvtár többi fájljának értékeire..</P>
<P>Ehhez és a következõkhöz root felhasználóként kell bejelentkezzünk.</P>
<P>A fenti kód ötödik sorában olvasható a következõ:</P>
<P>
<BLOCKQUOTE><CODE>
<B># chkconfig: 345 91 19</B>
</CODE></BLOCKQUOTE>
</P>
<P>Ezt a chkconfig parancs használja a futási szintekhez tartozó szkriptek meghatározására. A 345 érték azokat a futási szinteket sorolja fel, melyeken Oracle-t futtathatunk, ha például azt akarjuk, hogy az Oracle csak a 3-a és 5-ös szinteken fusson, akkor írjuk át 35-re. A következõ 91-es érték az indítási sorszámot írja le. Ez annyit jelent, hogy ha 100 induló folyamatunk van, akkor az Oracle a 91-dikként fog elindulni. A következõ érték a leállítási szám, miszerint ha a rendszer leáll és például 100 folyamatnak kell leállnia, akkor az Oracle a 19-dik lesz a sorban. Ezeket az értékeket az Oracle indító és leállító folyamatainak a viszonylagos besorolására szokták használni. Itt példaként szerepelnek a beállítások. Megváltoztathatjuk õket, de sose feledkezzünk el arról, hogy az Oracle nem példányosítható, néhány rendszerfolyamat korábban történõ indítása nélkül.</P>
<P>Hajtsuk végre a következõ parancsot:</P>
<P>
<BLOCKQUOTE><CODE>
<B>chkconfig -add oracle</B>
</CODE></BLOCKQUOTE>
</P>
<P>Ezzel, a szkript elején felsorolt futási szintekhez tartozó könyvtárakban lehet a megfelelõ hivatkozásokat létrehozni.</P>
<P>Az újonnan készített automatikus indítások teszteléséhez újra kell indítanunk) a rendszert, azonban ne feledkezzünk meg arról, hogy az automatikus indítás elõtt a rendszermag paramétereket is be kell állítanunk. Egyébként a rendszermag beállításának a parancsa a fenti szkript <B>start</B> részében is elhelyezhetõ.</P>
<H2><A NAME="ss5.3">5.3 Telepítés tesztelése SQL*Plusz-szal</A>
</H2>

<P>Amennyiben tipikus adatbázist telepítettünk, egy <B>scott</B> nevû felhasználónak is kellett készülnie. Hozzátartozó jelszó a <B>tiger</B>. Hajtsuk végre a következõt:</P>
<P>
<BLOCKQUOTE><CODE>
<B>sqlplus scott/tiger</B>
</CODE></BLOCKQUOTE>
</P>
<P>ami az SQL*Plus értelmezõjét futtatja és <B>scott</B> felhasználóként lép az adatbázisba. A következõt kellene látnunk a képernyõnkön:</P>
<P>
<HR>
<PRE>

SQL*Plus: Release 9.2.0.1.0 - Production on Fri Feb 21 10:55:45 2003

Copyright (c) 1982, 2002, Oracle Corporation.  All rights reserved.

Connected to:
Oracle9i Release 9.2.0.1.0 - Production
JServer Release 9.2.0.1.0 - Production

SQL>quit
Disconnected from Oracle9i Release 9.2.0.1.0 - Production
JServer Release 9.2.0.1.0 - Production
</PRE>
<HR>
</P>
<P>Kilépés elõtt magunk is kipróbálhatunk néhány SQL parancsot, hogy lássuk az adatbázis mintatábláit, vagy bármit amit akarunk.
Innentõl kezdve a mi elképzelésünké és céljainké a terep.</P>
<H2><A NAME="s6">6. Kliensek</A></H2>

<P>Minden platformra van (futtatható) Oracle 9i adatbázis kliens szoftver, úgyhogy a tervezett platformra a megfelelõ klienst letölthetjük (már ami beszerezhetõ). Én szeretem a klienst szoftvert feltenni mind a DB szerverre mind a MS Windows munkaállomásra. Ez talán többplatformos ellenõrzési lehetõséget nyújt, illetve úgy hiszem :)</P>
<P>Töltsük le és készítsük elõ a platformunkra megfelelõ klienst tartalmazó CD lemezeket, amin majd használjuk a klienst. Nem nélkülözhetetlen, de ajánlott hogy legyen klienst tartalmazó CD lemezünk. Elképzelhetõ ugyan, hogy a telepítést elvégezhetjük a merevlemezrõl ahová letöltöttük a klienst, azért én azt ajánlom, hogy ne sajnáljuk az idõt a CD megírására, így mindig kéznél lesz. A kliens is az Oracle Universal Istaller-t (Általános Oracle telepítõt) használja, így elég egyszerû dolgunk lesz az elõzõek után. </P>
<P>Mikor elõször futtatjuk az Enterprise Management Console-t, az végigvezet minket az adatbázis csatlakozás során. Adjuk meg az adatbázisunk teljes nevét, a SID nevet, és próbáljunk SYS felhasználóként SYSDBA jogosultságokkal bejelentkezni az adatbázisba. Néhány helyen be kell írjuk az adatbázis-szerverünk IP címét, és választanunk kell egy portot a kliens csatlakozáshoz. Én az alapértelmezett értékeket hagytam meg (még a szerver hálózati beállításoknál is).</P>
<P>Ha semmilyen hibaüzenetet nem kapunk, akkor kész. Megcsináltuk.</P>
<P>Élvezzük a szerverek és kliensek játékát!</P>
<H2><A NAME="s7">7. Utószó</A></H2>

<P>Az Oracle 9i egy nagyon hasznos, összetett és mindenekelõtt nagyon biztonságos alkalmazás. Ez a dokumentum elég felszínes megközelítést ad csupán, és nem is akar átfogó útmutatóul szolgálni. Remélem, hogy a kezdeti telepítés során némely dologban segítséget nyújt, de fontos, hogy saját helyzetünket elemezve mindig a megbízhatóbb forrást használjuk.</P>
<P>Néhány mûveletet SQL*Pusz-szal közvetlenül is elvégezhetünk. Ez nagyobb rugalmasságot ad a szoftver beállításához, és a telepítés elvégzéséhez is. Mindezt én gyakorlottabb kezekre bízom.</P>
<P>Sok dologról nem szóltam, ami magában az Oracle dokumentációban megtalálható. Tanulmányozzuk át az eredeti forrást részletesen!</P>
<P>Sok szerencsét!</P>
</BODY>
</HTML>
