<HTML
><HEAD
><TITLE
>Dialup PPP Server HOWTO</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"></HEAD
><BODY
CLASS="ARTICLE"
BACKGROUND="../IMAGES/back.gif"
LINK="#000099"
><DIV
CLASS="ARTICLE"
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="TITLE"
><A
NAME="PPPDIALIN"
></A
>Dialup PPP Server HOWTO</H1
><H2
CLASS="SUBTITLE"
>Onder Linux een standalone dialup-server samenstellen</H2
><DIV
CLASS="AUTHORGROUP"
><A
NAME="AEN5"
></A
><H3
CLASS="AUTHOR"
><A
NAME="AEN6"
>Michael Cassera</A
></H3
><DIV
CLASS="AFFILIATION"
><SPAN
CLASS="ORGNAME"
>Las Vegas Data LLC.<BR></SPAN
><DIV
CLASS="ADDRESS"
><P
CLASS="ADDRESS"
>&nbsp;&nbsp;&nbsp;<TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:michaelc@lasvegasdata.com
   "
>michaelc@lasvegasdata.com
   </A
>&#62;</TT
><br>
&nbsp;&nbsp;</P
></DIV
></DIV
><H3
CLASS="AUTHOR"
><A
NAME="AEN14"
>Vertaald door: Ellen Bokhorst</A
></H3
><DIV
CLASS="AFFILIATION"
><DIV
CLASS="ADDRESS"
><P
CLASS="ADDRESS"
><TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:bokkie@nl.linux.org"
>bokkie@nl.linux.org</A
>&#62;</TT
></P
></DIV
></DIV
></DIV
><DIV
CLASS="REVHISTORY"
><TABLE
WIDTH="100%"
BORDER="0"
><TR
><TH
ALIGN="LEFT"
VALIGN="TOP"
COLSPAN="3"
><B
>Wijzigingen</B
></TH
></TR
><TR
><TD
ALIGN="LEFT"
>Herziening .2</TD
><TD
ALIGN="LEFT"
>03-03-2002</TD
><TD
ALIGN="LEFT"
></TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Opschonen van typfouten, pap-secrets verduidelijkt</TD
></TR
><TR
><TD
ALIGN="LEFT"
>Herziening .1</TD
><TD
ALIGN="LEFT"
>01-03-2002</TD
><TD
ALIGN="LEFT"
></TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Initieel schrijven</TD
></TR
></TABLE
></DIV
><DIV
><DIV
CLASS="ABSTRACT"
><A
NAME="AEN40"
></A
><P
></P
><P
>Dit document is opgebouwd uit delen vanuit verscheidene andere HOWTO's om 
een enkele HOWTO te genereren waarin het alleen gaat over het opzetten van
een dialup server.</P
><P
></P
></DIV
></DIV
><HR></DIV
><DIV
CLASS="TOC"
><DL
><DT
><B
>Inhoudsopgave</B
></DT
><DT
><A
HREF="#BASE"
>Wat te installeren</A
></DT
><DT
><A
HREF="#PPP"
>PPP Server Setup</A
></DT
><DT
><A
HREF="#REMOTE"
>Internet-toegang voor de remote machine</A
></DT
><DT
><A
HREF="#CREDIT"
>Krediet</A
></DT
><DT
><A
HREF="#LICENSE"
>Licentie</A
></DT
></DL
></DIV
><DIV
CLASS="SECT1"
><H2
CLASS="SECT1"
><A
NAME="BASE"
></A
>Wat te installeren</H2
><P
>Voor deze howto heb je mgetty en pppd nodig. Als basis voor deze HOWTO
wordt gebruik gemaakt van RedHat 7.2. pppd is standaard ge&iuml;nstalleerd, 
maar mgetty niet. Voer een serverinstallatie uit, selecteer individuele
packages. Selecteer mgetty en ga verder met de installatie.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PPP"
></A
>PPP Server Setup</H2
><P
>Voor deze HOWTO voegen we een extern modem toe aan ttyS1. Pas de instellingen
aan overeenkomstig je setup. Externe modems maken gewoonlijk gebruik van
ttyS0 of ttyS1. Dit geldt niet voor interne modems.</P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="TTY"
></A
>ttyS# discovery</H3
><P
>Red Hat is tamelijk goed in het detecteren van interne modems zolang het
geen "winmodem" is. Het kent een ttyS nummer toe aan de modem en maakt
een symbolische link /dev/modem aan verwijzend naar het ttyS nummer. 
Geef gewoon de opdracht stat als je wilt weten wat het ttyS nummer is voor
je modem:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>stat /dev/modem</PRE
></TD
></TR
></TABLE
><P
>Je krijgt aardig wat informatie over de link, maar de eerste regel ziet er
ongeveer zo uit:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>File: "/dev/modem" -&#62; "/dev/ttyS1"</PRE
></TD
></TR
></TABLE
><P
>Gebruik dat ttyS nummer voor de rest van deze HOWTO.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INITTAB"
></A
>inittab</H3
><P
>Voeg (voor elk modem) een regel toe aan het einde van /etc/inittab  </P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>S1:2345:respawn:/sbin/mgetty -D ttyS1</PRE
></TD
></TR
></TABLE
><P
>De "-D" vertelt het modem dat het moet worden behandeld als een data modem.
Geen Fax.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="MGETTY"
></A
>mgetty+sendfax/login.config</H3
><P
>Je moet het bestand /etc/mgetty+sendfax/login.config wijzigen om 
Autoppp(a_ppp) te activeren. De opdracht staat reeds in het bestand, maar er
staat een "#" teken voor. Verwijder gewoonweg de "#" voor de opdracht
en sla het bestand dan op. Het zou er ongeveer zo uit moeten komen te zien:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>/AutoPPP/ -	a_ppp	/usr/sbin/pppd auth -chap +pap login debug</PRE
></TD
></TR
></TABLE
><P
>Je hoeft verder niets te wijzigen aangezien we al onze verbindingsinstellingen
in /etc/ppp/options en /etc/pap-secrets zullen plaatsen.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PAP"
></A
>pap-secrets</H3
><P
>Update /etc/ppp/pap-secrets.  Typ in "*" voor client, "*" voor server, " "" " 
voor secret en "*" voor het IP-adres 
(laat de aanhalingstekens achterwege, behalve voor secret, waarbij je
een set dubbele aanhalingstekens plaatst).
Deze configuratie zorgt ervoor dat elke geregistreerde gebruiker op de dialup
server computer kan inloggen. Je kunt ook gebruikersnamen opgeven, wachtwoorden
en IP-adressen voor PAP-authenticatie. Wanneer je klaar bent, ziet het bestand
er ongeveer zo uit:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>client     server     secret     IP addresss
*          *          ""         *</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PPPOPT"
></A
>ppp-options</H3
><P
>Open /etc/ppp/options om het te wijzigen. Het bestand bevat standaard
systeem- en initialisatie-opties voor pppd. In het standaardbestand staat
simpelweg op de eerste regel "lock". Voeg de volgende opdrachten toe zodat
het overeenkomt met het volgende:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>lock
-detach
modem
crtscts
proxyarp
asyncmap 0</PRE
></TD
></TR
></TABLE
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Lock</DT
><DD
><P
>Maak een lock bestand aan voor exclusieve toegang tot
		het device</P
></DD
><DT
>-detach</DT
><DD
><P
>vertelt pppd niet te forken (een achtergrondproces te
		worden).</P
></DD
><DT
>modem</DT
><DD
><P
>stelt in gebruik te maken van modem control lijnen.
		Client zal wachten op een signaal van de modem te laten
		gelden wanneer de seri&euml;le device openend. Tenzij
		anders opgegeven.</P
></DD
><DT
>crtscts</DT
><DD
><P
>Gebruik hardware flow control.</P
></DD
><DT
>proxyarp</DT
><DD
><P
>Dit zorgt ervoor dat de client verschijnt dat het
		zich bevindt op de lan naar zijn peers.
		</P
></DD
><DT
>asyncmap 0</DT
><DD
><P
>Vertelt pppd geen escape control sequences in te
		stellen en gebruiken</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="TTYNAME"
></A
>options.ttyS#</H3
><P
>Om voor elke tty een specifieke IP voor een client en server in te stellen,
maak je een options.ttyS# bestand voor elk tty. In ons voorbeeld wordt
gebruik gemaakt van ttyS1, dus het bestand dat we aanmaken is 
/etc/ppp/options.ttyS1. Voor elke seri&euml;le lijn stel je een server IP en
client IP in, in het volgende formaat:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>serverIP:clientIP</PRE
></TD
></TR
></TABLE
><P
>Als voorbeeld: Als het IP-adres van de dialup server op het netwerk
192.168.1.32 is en je wilt dat de inbellende remote machine IP 192.168.1.151
is, dan voeg je de volgende regel toe aan options.ttyS#:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>192.168.1.32:192.168.1.151</PRE
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="REMOTE"
></A
>Internet-toegang voor de remote machine</H2
><P
>Wat we tot nu toe hebben gedaan is het verkrijgen van een ppp-verbinding tussen
de dialup server en de remote machine. Om het de remote machine mogelijk te
maken via het lan toegang tot het internet te krijgen waarmee de dialup server
is verbonden, moeten we /etc/sysconfig/ipchains en /etc/sysctl.conf wijzigen.</P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="IPCHAINS"
></A
>ipchains</H3
><P
>Wijzig het bestand /etc/sysconfig/ipchains.  
Het is zeer waarschijnlijk dat dit bestand nog niet voorkomt. Voeg de
volgende regel toe:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>-A forward -s xxx.xxx.xxx.0/24 -j MASQ</PRE
></TD
></TR
></TABLE
><P
>Vervang "xxx" door het van toepassing zijnde IP-adres. 
Een voorbeeld van ons netwerk zou er ongeveer zo uit kunnen zien:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>-A forward -s 192.168.1.0/24 -j MASQ</PRE
></TD
></TR
></TABLE
><P
>Sla het bestand op.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="SYSCTL"
></A
>sysctl.conf</H3
><P
>Wijzig het bestand /etc/sysctl.conf.</P
><P
>wijzig:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>net.ipv4.ip_forward = 0</PRE
></TD
></TR
></TABLE
><P
>in:</P
><TABLE
BORDER="1"
BGCOLOR="#d3dce3"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>net.ipv4.ip_forward = 1</PRE
></TD
></TR
></TABLE
><P
>Hiermee zal packet forwarding naar de remote machine worden geactiveerd.
Herstart de computer waarna het gereed zou moeten zijn een aanroep te
ontvangen van een remote machine.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="CREDIT"
></A
>Krediet</H2
><P
>Veel van de informatie is gekopieerd vanuit <A
HREF="http://www.redhat.com/support/docs/tips/Dialup-Tips/ppp_server_tips-1.html"
TARGET="_top"
>PPP Quick Setup Tips</A
></P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="LICENSE"
></A
>Licentie</H2
><P
>GNU Free Documentation License
<A
HREF="http://www.gnu.org/copyleft/fd1.html"
TARGET="_top"
>http://www.gnu.org/copyleft/fd1.html</A
></P
><P
>Copyright (C) 2002 Michael Cassera</P
><P
>Het is iedereen toegestaan woordelijke kopie&euml;n van dit licentiedocument
te kopi&euml;ren en distribueren, maar niet om het te wijzigen.</P
></DIV
></DIV
></BODY
></HTML
>