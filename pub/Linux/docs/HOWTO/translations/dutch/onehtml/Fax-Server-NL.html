<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>Linux eenvoudige fax printer server mini-HOWTO (faxsrv-mini-HOWTO)</TITLE>


</HEAD>
<BODY>
<H1>Linux eenvoudige fax printer server mini-HOWTO (faxsrv-mini-HOWTO)</H1>

<H2>
<A HREF="mailto:Erez Strauss &lt;erez@newplaces.com&gt;">Erez Strauss &lt;erez@newplaces.com&gt;</A><BR>
Vertaald door Ellen Bokhorst, bokkie@nl.linux.org</H2>v1.0, 8 november 1997
<P><HR>
<EM><B>Geen garanties.</B> Commentaar is altijd welkom.
Dit document beschrijft in detail &eacute;&eacute;n van de eenvoudigste manieren
om een fax-server op je Linux systeem in te stellen.
De fax is voor alle gebruikers op de lokale host en voor netwerkgebruikers
beschikbaar.</EM>
<HR>
<H2><A NAME="s1">1. Introductie</A></H2>

<P>Om een werkende printer/fax op je linux machine te krijgen, zal
je wat software en een fax-modem nodig hebben.
<P>De afdruksoftware zal de faxsoftware als een afdrukfilter gebruiken.
<P>Efax zal het faxnummer opzoeken vanuit het Afdruk Job nummer en zal
de fax versturen.
De efax software werd geschreven door Ed Casas &lt;edc@cce.com&gt;.
<P>De rest van het document is opgebouwd in de vorm V&amp;A.
<H2><A NAME="s2">2. Vragen &amp; Antwoorden</A></H2>

<H2>2.1  Wat is een fax printer server ?</H2>

<P> Een fax printer server is de instelling van een paar programma's:
efax en de printserver, op een zodanige manier dat het zenden van
een fax vanaf de computer net zo eenvoudig is als het verzenden van een
afdruk naar de printer.
<H2>2.2  Hoe stel je het in ?</H2>

<P>Het instellen van efax als fax print server geeft een paar problemen.
Aangezien ik ze een paar keer uitwerkte, besloot ik deze wijsheid in deze kleine
mini-HOWTO te verzamelen, opmerkingen zijn welkom via 
<CODE>&lt;erez@newplaces.com&gt;</CODE>.
Ik beschrijf ze hier in korte stappen met de oplossingen en instructies:
<H3>De efax Software</H3>

<P>zorg ervoor dat je het efax package hebt.
<P>Gebruik het commando `rpm -qv efax' op een op RPM gebaseerd systeem.
<P>Je kunt de efax sources in tar.gz formaat vanaf sunsite verkrijgen:
ftp://sunsite.unc.edu/pub/Linux/apps/serialcomm/fax/efax08a.tar.gz
of het binaire rpm package:
ftp://ftp.redhat.com/pub/redhat/redhat-4.2/i386/RedHat/RPMS/efax-0.8a-3.i386.rpm
<H3> De printcap invoer.</H3>

<P>In de efax documentatie ontbreekt de :  aan het einde van de printcap invoer.
<P>Oplossing: Voeg de volgende <CODE>/etc/printcap</CODE> gegevens toe:
<P>
<BLOCKQUOTE><CODE>
<PRE>
fax:\
        :lp=/dev/null:\
        :sd=/var/spool/fax:\
        :if=/usr/bin/faxlpr:
</PRE>
</CODE></BLOCKQUOTE>
<H3>Het fax commando</H3>

<P> Gebruik een hardlink en geen symbolische link naar het faxcommando
<P>Start het commando:
<BLOCKQUOTE><CODE>
<PRE>
ln /usr/bin/fax /usr/bin/faxlpr
</PRE>
</CODE></BLOCKQUOTE>
<H3>Het /usr/bin/fax bestand.</H3>

<P> Wijzig het /usr/bin/fax naar je voorkeuren:
<P> kies de juiste Fax Class voor je modem uit:
<BLOCKQUOTE><CODE>
<PRE>
CLASS=2.0
</PRE>
</CODE></BLOCKQUOTE>
<P>Stel het FROM="je internationale telefoonnummer" veld in
<BLOCKQUOTE><CODE>
<PRE>
NAME="Je naam"
</PRE>
</CODE></BLOCKQUOTE>
<P>Voeg de regel voor conversie van internationale naar lokale telefoonnummers
toe.
In Israel zou je bijvoorbeeld gebruiken:
<BLOCKQUOTE><CODE>
<PRE>
TELCVT='sed -e s/+972/0/ -e s/+/00/'  # Israel
</PRE>
</CODE></BLOCKQUOTE>
<P>Er is een probleem in het bestand op regel 586, wijzig de
<CODE>cfile=...</CODE> door de volgende twee regels:
<P>
<BLOCKQUOTE><CODE>
<PRE>
cfile=`/usr/bin/tail -1 lock`
cfile=`cat $cfile`
</PRE>
</CODE></BLOCKQUOTE>
<P>in de regels 586,587 zouden geen '-' tekens moeten staan, de regels zijn:
<P>
<BLOCKQUOTE><CODE>
<PRE>
0) echo "$l" | mail -s "fax to $num succeeded" $user@$host ;;
*) echo "$l" | mail -s "fax to $num failed   " $user@$host ;;
</PRE>
</CODE></BLOCKQUOTE>
<H3>De /var/spool/fax directory.</H3>

<P> maak de directory /var/spool/fax aan
<BLOCKQUOTE><CODE>
<PRE>
mkdir /var/spool/fax
chmod 777 /var/spool/fax
</PRE>
</CODE></BLOCKQUOTE>
<H3> Het lock bestand</H3>

<P>Het lock bestand (<CODE>/var/spool/fax/lock</CODE>) wordt met onjuiste
permissies aangemaakt, gebruik het volgende commando om het correct in
te stellen:
<P>
<BLOCKQUOTE><CODE>
<PRE>
touch /var/spool/fax/lock ; chmod 644 /var/spool/fax/lock
</PRE>
</CODE></BLOCKQUOTE>
<H3> Het speciale bestand /dev/modem</H3>

<P>Het efax programma verwacht een echt device bestand op <CODE>/dev/modem</CODE>
en zal met een symbolische link niet werken, dus maak een device bestand aan
met hetzelfde major en minor nummer als de
<CODE>/dev/cua?</CODE> die met het modem is verbonden.
Het bestand zou de rw-rw-rw- mode moeten hebben zodat iedere gebruiker
de fax software kan gebruiken.
<P>
<BLOCKQUOTE><CODE>
<PRE>
ls -lL /dev/modem 
rm /dev/modem
mknod /dev/modem c Mj Mi
chmod 666 /dev/modem
</PRE>
</CODE></BLOCKQUOTE>
<P>Mj is 5, en Mi is 64 voor de cua0, 65 voor cua1 enzovoort.
Bijvoorbeeld (voor cua1):
<P>
<BLOCKQUOTE><CODE>
<PRE>
mknod /dev/modem c 5 65
</PRE>
</CODE></BLOCKQUOTE>
<H3>De directory <CODE>/var/lock</CODE></H3>

<P>wijzig de mode van de directory <CODE>/var/lock</CODE>
<P>
<BLOCKQUOTE><CODE>
<PRE>
chmod 1777 /var/lock
</PRE>
</CODE></BLOCKQUOTE>
<H2>2.3 Hoe gebruik ik het, voor de server ?</H2>

<P>Je zou de faxprinter met de -P optie moeten gebruiken en de
-J optie met het faxnummer.
<P>gebruik &eacute;&eacute;n van de volgende lpr commando's:
<P>
<BLOCKQUOTE><CODE>
<PRE>
 lpr -Pfax -J &lt;Fax-Number> [file-names]
 om 't even wat voor commando | lpr -Pfax -J &lt;Fax-Number>
</PRE>
</CODE></BLOCKQUOTE>
<H2>2.4 Waar specificeer ik het bestemmings Faxnummer?</H2>

<P>Na de -J optie.
<H2>2.5 Hoe gebruik ik het vanaf andere Unixes op het net?</H2>

<P>Voeg de volgende gegevens toe aan het bestand <CODE>/etc/printcap</CODE> en 
de client Linux systemen, maak de spooldirectory aan, enzovoort ...
<P>
<BLOCKQUOTE><CODE>
<PRE>
fax:\
        :sd=/var/spool/fax:\
        :mx#0:\
        :sh:\
        :rm=host.domain:\
        :rp=fax:
</PRE>
</CODE></BLOCKQUOTE>
<P>voeg de naam van de client hosts toe aan het <CODE>/etc/hosts.lpd</CODE> op de
fax-server computer.
<P>gebruik het als voorheen.
<P>Opmerking:
<P>De koptekst die efax aan de fax-pagina's toevoegt, wordt niet 
be&iuml;nvloedt door de naam van de gebruiker die de fax verzendt.
(kan worden bijgewerkt).
<H2>2.6 Caldera, LPRng gebruikers</H2>

<P> De LPRng afdrukbeheersoftware gebruikt een andere methode 
om het controle bestand af te handelen.
<P>Met dank aan Luca Montecchiani &lt;m.luca@usa.net&gt;, die het probleem
en de oplossing vond.
Hier is een update van het <CODE>/usr/bin/fax</CODE> bestand. De volgende regel 
vervangt de twee eenvoudige <B>cfile=...</B> regels op de regels 586,587
<P>
<BLOCKQUOTE><CODE>
<PRE>
# Gewijzigd zodat het ook met het LPRng package werkt
# Luca Montecchiani (08/11/97 m.luca@usa.net)
if [ !-z "$CONTROL_FILE" ]
    then
        cfile=`cat tail -1 lock`
        cfile=`cat $cfile`
    else
        cfile=$CONTROL_FILE
fi                                       
</PRE>
</CODE></BLOCKQUOTE>
<H2><A NAME="s3">3. Laatste versie, Neem contact op met de auteur</A></H2>

<P> De laatste versie van dit bestand kan worden benaderd via het world
wide web via de URL's
<P>
<BLOCKQUOTE><CODE>
<PRE>
http://www.newplaces.com/linux/faxsrv/faxsrv-mini-HOWTO.sgml
http://www.newplaces.com/linux/faxsrv/faxsrv-mini-HOWTO.html
http://www.newplaces.com/linux/faxsrv/faxsrv-mini-HOWTO.txt
http://www.newplaces.com/linux/faxsrv/faxsrv-mini-HOWTO.info
</PRE>
</CODE></BLOCKQUOTE>
<P>Je kunt contact met me opnemen
<BLOCKQUOTE><CODE>
<PRE>
Erez Strauss
erez@newplaces.com
http://www.newplaces.com/linux/
http://www.newplaces.com/
Phone: +972 52 739737
Fax:  +972 9 954 3034
</PRE>
</CODE></BLOCKQUOTE>
</BODY>
</HTML>
