<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.7">
 <TITLE>The dosemu HOWTO: Setup Hard disk </TITLE>
 <LINK HREF="ID-DOSEMU-HOWTO-4.html" REL=next>
 <LINK HREF="ID-DOSEMU-HOWTO-2.html" REL=previous>
 <LINK HREF="ID-DOSEMU-HOWTO.html#toc3" REL=contents>
</HEAD>
<BODY>
<A HREF="ID-DOSEMU-HOWTO-4.html">Next</A>
<A HREF="ID-DOSEMU-HOWTO-2.html">Previous</A>
<A HREF="ID-DOSEMU-HOWTO.html#toc3">Contents</A>
<HR>
<H2><A NAME="s3">3. Setup Hard disk </A></H2>

<H2><A NAME="ss3.1">3.1 Bagaimana menggunakan hard disk saya dengan dosemu?</A>
</H2>

<P>Pertama, mount partisi dos hard disk anda sebagai sebuah
subdirectory Linux.
Contoh, anda dapat membuat directory dalam Linux seperti /dos (mkdir
-m 755 /dos) dan tambahkan baris 
<PRE>
   /dev/hda1       /dos     msdos   umask=022
</PRE>

dalam /etc/fstab anda. (Pada contoh ini, hard disk di-mount read-only.
Anda dapat me-mountnya read/write dengan mengganti "022" menjadi "000"
dan gunakan option -m 777 pada saat mkdir).  Sekarang <B>mount
/dos</B>.  Setelah itu anda dapat menambahkan baris 
<PRE>
  lredir d: linux\fs/dos
</PRE>

di dalam file AUTOEXEC.BAT dalam hdimage anda (lihat komentar untuk 
LREDIR di bawah).  Pada sistem multi-user anda dapat menggunakan 
<PRE>
  lredir d: linux\fs\${home}
</PRE>

di mana "home" adalah nama variabel environment yang berisi lokasi
directory dos (/dos pada contoh ini)(95/8/11).
<P>---------------------
<P>
<P>Tim Bird (Tim_R_Bird@Novell.COM) menyatakan bahwa pemakai LREDIR
agar berhati-hati ketika menggunakannya dalam autoexec, karena
COMMAND.COM akan melanjutkan memparsing autoexec.bat dari drive yang
di-redirect dengan offset file yang sama seperti dalam autoexec.bat
pada physical drive.  Karena hal ini, akan lebih aman jika 
autoexec.bat dalam drive yang di-redirect sama dengan autoexec.bat
dalam physical drive (diskimage) (95/8/11).
<P>---------------------
<P>
<P> Robert D. Warren (<B>rw11258@xx.acs.appstate.edu</B>) menyatakan
(94/4/28) 
<P>Saya mem-boot dengan file hdimage berukuran kecil (kurang dari 1 MB),
dan baris terakhir file config.sys saya dalam hdimage :
<PRE>
        
        install=c:\lredir.exe c: LINUX\FS\home/dos
</PRE>

Hal tersebut akan mengeksekusi lredir sebelum command interpreter
berjalan. Dan saya berhasil menjalankannya dengan command.com dan 
4DOS.  Hal ini dapat menghilangkan masalah offset ketika menggunakan
lredir dalam autoexec.bat.
<P>
<P> Uwe Bonnes (<B>bon@elektron.ikp.physik.th-darmstadt.de</B>) menambahkan
(95/8/11) 
<P>Hal berikut dapat dikerjakan :
<PRE>
        
install=C:\subst.exe g: c:
</PRE>
        
sebelumnya, anda tetap harus mengakses hdimage anda sebagai drive g:
Tip yang lain adalah dengan mengkonfigurasi dosemu untuk menggunakan
"<B>autoexec.emu</B>".
<P>
<H2><A NAME="ss3.2">3.2 Bagaimana saya dapat mengakses hdimage dari Linux?</A>
</H2>

<P>Gunakan mtools, version 3.0 pada saat penulisan dokumen ini. Dengan
baris dalam <B>/etc/mtools.conf</B> 
<PRE>
   drive g:  file="/var/lib/dosemu/hdimage" Offset=8832
</PRE>

Anda dapat menggunakan mtools dalam hdimage, seperti "mdir g:". "mcopy
g:/config.emu /tmp" meng-copy file config.emu dari hdimage ke 
/tmp/config.emu. Anda dapat mengeditnya di sana dan mengcopykannya
kembali. Gunakan drive
letter yang menurut anda cocok. "G:" hanyalah sebuah contoh (07/2/9).
<P>
<H2><A NAME="ss3.3">3.3 Dapatkah saya gunakan disk yang memakai stacked/double-spaced/</A>
super-stored?</H2>

<P>Saat ini, drive terkompresi tidak dapat di akses via redirector
(lredir atau emufs) pada kernel  standard. Terdapat patch kernel
tersebut untuk me-mount file terkompresi dengan nama "dmsdosfs".
Dapat ditemukan di sunsite.unc.edu dan mirrornya 
<BLOCKQUOTE><CODE>
<A HREF="http://sunsite.unc.edu:/pub/Linux/system/Filesystems/dosfs/">http://sunsite.unc.edu:/pub/Linux/system/Filesystems/dosfs/</A></CODE></BLOCKQUOTE>

Lihat pula dalam 
<A HREF="http://sunsite.unc.edu:/pub/Linux/Incoming">http://sunsite.unc.edu:/pub/Linux/Incoming</A> untuk versi yang lebih 
baru. Bagaimanapun, banyak juga yang berhasil dengan menghilangkan 
komentar pada baris
<PRE>
   disk { wholedisk "/dev/hda" }       # 1st partition on 1st disk
</PRE>

dalam config file dosemu.  Ada pula yang berhasil dengan menggunakan 
<PRE>
   disk { partition "/dev/hda1" }
</PRE>

Melakukan hal tersebut dapat menghilangkan data pada saat dosemu 
crash(97/2/9)!
<P>Jika partisi dos anda sudah di-mount dengan write access dan anda
mencoba menjalankan dosemu dengan partition atau whole disk access,
dosemu akan menampilkan pesan dan membatalkannya.  Hal ini mencegah
DOS dan Linux melakukan penulisan masing-masing ke disk dan
mengacaukan data anda dalam partisi dos tersebut (95/8/11).
<P>---------------------
<P>Jika LILO anda install, cara di atas tidak akan berhasil. ...
<P>Thomas Mockridge (<B>thomas@aztec.co.za</B>) melaporkan (94/8/5) bahwa
<P>Untuk boot dosemu dengan LILO dan Stacker 4.0, saya melakukan hal
berikut ...
<OL>
<LI> <B>dd</B> MBR ke sebuah file. (atau  norton utility, dll., 
512 bytes pertama)
</LI>
<LI> Boot dos (dari boot dos yang asli bukan emu), lakukan fdisk /mbr,
aktifkan pertisi dos anda dengan (dos) fdisk.
</LI>
<LI> Copy MBR baru ke sebuah file.
</LI>
<LI> Ganti MBR yang lama
</LI>
<LI> Copykan MBR yang kedua ke /var/lib/dosemu/partition.hda? (partisi
dos anda)  
</LI>
<LI> Set dosemu.conf 
<PRE>
               disk {partition "/dev/hda? ?"}
</PRE>

</LI>
<LI> Jalankan dosemu dan voila!  Tanpa LILO.</LI>
</OL>

---------------------
<P>Holger Schemel (<B>q99492@pbhrzx.uni-paderborn.de</B>) melaporkan
(94/2/10) 
<P>Bekerja dibawah dosemu dengan MS-DOS 6.0. Jika anda mempunyai masalah,
anda harus meng-edit manual file 'DBLSPACE.INI' dan mengubah disk
letter anda menjadi drive letter anda di bawah dosemu.
<P>---------------------
<P>Darren J Moffat (<B>moffatd@dcs.gla.ac.uk</B>) melaporkan juga
(94/3/27)
<P>"...Gunakan 6.2 jika anda mempunyainya!!  Yakinkan anda mempunyai
boot disk LILO karena dos 6{.2} akan mengubah MBR."
<P>
<HR>
<A HREF="ID-DOSEMU-HOWTO-4.html">Next</A>
<A HREF="ID-DOSEMU-HOWTO-2.html">Previous</A>
<A HREF="ID-DOSEMU-HOWTO.html#toc3">Contents</A>
</BODY>
</HTML>
