<HTML
><HEAD
>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-2">
<TITLE
>Linux NIS(YP)/NYS/NIS+ HOGYAN</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"></HEAD
><BODY
CLASS="ARTICLE"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="ARTICLE"
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="TITLE"
><A
NAME="AEN2">Linux NIS(YP)/NYS/NIS+ HOGYAN</H1
><H3
CLASS="AUTHOR"
><A
NAME="AEN4"
>Thorsten Kukuk</A
></H3
><P
CLASS="PUBDATE"
>v1.3, 2003. július 1.<BR></P
><DIV
><DIV
CLASS="ABSTRACT"
><A
NAME="AEN7"><P
></P
><P
>&#13;


Ez a dokumentáció elmagyarázza, hogyan kell a Linux rendszert NIS(YP)
vagy NIS+ kliensként beállítani, és hogy kell NIS szerverként
telepíteni.</P
><P
></P
></DIV
></DIV
><HR></DIV
><DIV
CLASS="TOC"
><DL
><DT
><B
>Tartalomjegyzék</B
></DT
><DT
>1. <A
HREF="#INTRODUCTION"
>Bevezetés</A
></DT
><DD
><DL
><DT
>1.1. <A
HREF="#AEN27"
>A dokumentum új verziói</A
></DT
><DT
>1.2. <A
HREF="#AEN34"
>A felelõsség teljes elhárítása</A
></DT
><DT
>1.3. <A
HREF="#AEN37"
>Visszajelzés és javítások</A
></DT
><DT
>1.4. <A
HREF="#AEN43"
>Köszönetnyilvánítás</A
></DT
><DT
>1.5. <A
HREF="#AEN49"
>Magyar fordítás</A
></DT
></DL
></DD
><DT
>2. <A
HREF="#GLOSSARY"
>Összefoglalás és általános információ</A
></DT
><DD
><DL
><DT
>2.1. <A
HREF="#AEN59"
>Kifejezések összefoglalása



&#13;</A
></DT
><DT
>2.2. <A
HREF="#AEN126"
>Néhány általános információ


&#13;</A
></DT
></DL
></DD
><DT
>3. <A
HREF="#WHICH"
>NIS, NYS vagy NIS+?</A
></DT
><DD
><DL
><DT
>3.1. <A
HREF="#AEN149"
>libc 4/5 hagyományos NIS-el, vagy NYS ?

&#13;</A
></DT
><DT
>3.2. <A
HREF="#AEN159"
>glibc 2 és NIS/NIS+
&#13;</A
></DT
><DT
>3.3. <A
HREF="#AEN166"
>NIS vagy NIS+ ?&#13;</A
></DT
></DL
></DD
><DT
>4. <A
HREF="#OPERATION"
>Hogyan mûködik?</A
></DT
><DD
><DL
><DT
>4.1. <A
HREF="#AEN173"
>Hogyan mûködik a NIS?&#13;</A
></DT
><DT
>4.2. <A
HREF="#AEN183"
>Hogyan mûködik a NIS+?&#13;</A
></DT
></DL
></DD
><DT
>5. <A
HREF="#PORTMAPPER"
>Az RPC Portmapper (Távoli Eljáráshívás kapuhozzárendelõ)

&#13;</A
></DT
><DT
>6. <A
HREF="#SETTING-NIS"
>Mire van szükség a NIS üzembe helyezéséhez?&#13;</A
></DT
><DD
><DL
><DT
>6.1. <A
HREF="#AEN208"
>Határozd meg, hogy géped szerver, szolga vagy kliens lesz.&#13;</A
></DT
><DT
>6.2. <A
HREF="#AEN222"
>A szoftver&#13;</A
></DT
></DL
></DD
><DT
>7. <A
HREF="#SETTINGUP-CLIENT"
>A NIS kliens telepítése</A
></DT
><DD
><DL
><DT
>7.1. <A
HREF="#AEN233"
>Az ypbind démon



&#13;</A
></DT
><DT
>7.2. <A
HREF="#AEN282"
>A NIS kliens beállítása hagyományos NIS használatával&#13;</A
></DT
><DT
>7.3. <A
HREF="#AEN302"
>NIS kliens beállítása NYS használatával&#13;</A
></DT
><DT
>7.4. <A
HREF="#AEN310"
>NIS kliens beállítása glibc 2.x segítségével&#13;</A
></DT
><DT
>7.5. <A
HREF="#AEN315"
>Az nsswitch.conf fájl

&#13;</A
></DT
><DT
>7.6. <A
HREF="#AEN328"
>Árnyék jelszavak NIS-sel&#13;</A
></DT
></DL
></DD
><DT
>8. <A
HREF="#NISPLUS"
>Mire van szükség a NIS+ beállításához?</A
></DT
><DD
><DL
><DT
>8.1. <A
HREF="#AEN349"
>Szoftver&#13;</A
></DT
><DT
>8.2. <A
HREF="#AEN359"
>NIS+ kliens beállítása&#13;</A
></DT
><DT
>8.3. <A
HREF="#AEN374"
>NIS+, keylogin, bejelentkezés és PAM&#13;</A
></DT
><DT
>8.4. <A
HREF="#AEN381"
>Az nsswitch.conf fájl

&#13;</A
></DT
></DL
></DD
><DT
>9. <A
HREF="#YPSERV"
>NIS szerver beállítása&#13;</A
></DT
><DD
><DL
><DT
>9.1. <A
HREF="#AEN402"
>Az ypserv szerver-program

&#13;</A
></DT
><DT
>9.2. <A
HREF="#AEN471"
>Az yps szerver program

&#13;</A
></DT
><DT
>9.3. <A
HREF="#AEN481"
>Az rpc.ypxfrd program

&#13;</A
></DT
><DT
>9.4. <A
HREF="#AEN490"
>Az rpc.yppasswdd program

&#13;</A
></DT
></DL
></DD
><DT
>10. <A
HREF="#VERIFICATION"
>A NIS/NYS telepítésének ellenõrzése

&#13;</A
></DT
><DT
>11. <A
HREF="#MAPS"
>NIS térképek készítése és karbantartása&#13;</A
></DT
><DD
><DL
><DT
>11.1. <A
HREF="#AEN530"
>Új NIS térkép létrehozása&#13;</A
></DT
><DT
>11.2. <A
HREF="#AEN543"
>NIS térképek frissítése&#13;</A
></DT
><DT
>11.3. <A
HREF="#AEN550"
>A térképfájl bejegyzéseinek hossza&#13;</A
></DT
></DL
></DD
><DT
>12. <A
HREF="#REBOOT"
>Túlélõcsomag újraindítás esetére</A
></DT
><DD
><DL
><DT
>12.1. <A
HREF="#AEN570"
>A NIS indító (init) szkript</A
></DT
><DT
>12.2. <A
HREF="#AEN578"
>NIS domainnév</A
></DT
><DT
>12.3. <A
HREF="#AEN583"
>Linux-disztribúció specifikus megjegyzések</A
></DT
></DL
></DD
><DT
>13. <A
HREF="#RPASSWDD"
>Jelszóváltás az rpasswd program segítségével&#13;</A
></DT
><DD
><DL
><DT
>13.1. <A
HREF="#AEN626"
>A szerver beállítása&#13;</A
></DT
><DT
>13.2. <A
HREF="#AEN644"
>A kliens beállítása&#13;</A
></DT
></DL
></DD
><DT
>14. <A
HREF="#TROUBLESHOOTING"
>Általános, valamint NIS problémák elhárítása

&#13;</A
></DT
><DT
>15. <A
HREF="#FAQ"
>Gyakran Ismételt Kérdések&#13;</A
></DT
></DL
></DIV
><DIV
CLASS="SECT1"
><H2
CLASS="SECT1"
><A
NAME="INTRODUCTION">1. Bevezetés</H2
><P
>Egyre több linuxos gépet telepítenek hálózat részeként.
A hálózati adminisztráció egyszerûsítéséhez, a legtöbb hálózatban (leginkább
a Sun alapú hálózatokban) Hálózati Információs Szolgáltatást (Network Information
Service, továbbiakban NIS) futtatnak. A Linux rendszerek teljes mértékben fel tudják
használni a már meglévõ NIS szolgáltatásokat, és õk maguk is képesek NIS
szolgáltatásokat nyújtani. Mindemellett képesek teljes értékû NIS+ kliensként
viselkedni, ez a támogatás egyelõre béta állapotban van.</P
><P
>Ez a dokumentáció megpróbál választ adni a NIS(YP) és NIS+ beállításával
kapcsolatos kérdésekre, amik a Linux rendszereden felmerülhetnek.
Ne felejtsd el elolvasni "Az RPC Portmapper (Távoli Eljáráshívás kapuhozzárendelõ)" fejezetet!</P
><P
>A NIS-HOGYANt szerkeszti, és karbantartja:</P
><P
>&#13;<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>        Thorsten Kukuk, &#60;kukuk@suse.de&#62;</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><P
>Az elsõ NIS-HOGYAN forrása az alábbi emberektõl származik, akiknek eme
dokumentáció elsõ verzióit köszönhetjük:</P
><P
>&#13;<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Andrea Dell'Amico       &#60;adellam@ZIA.ms.it&#62;
Mitchum DSouza          &#60;Mitch.DSouza@NetComm.IE&#62;
Erwin Embsen            &#60;erwin@nioz.nl&#62;
Peter Eriksson          &#60;peter@ifm.liu.se&#62;</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN27">1.1. A dokumentum új verziói</H3
><P
>Mindig megtalálhatod a legfrissebb változatot, megnézheted a World Wide Web használatával a
<A
HREF="http://www.linux-nis.org/nis-howto/HOWTO/NIS-HOWTO.html"
TARGET="_top"
>http://www.linux-nis.org/nis-howto/HOWTO/NIS-HOWTO.html</A
> honlapot.</P
><P
>A dokumentáció új verziói több linuxos WWW és FTP helyre felkerülnek,
beleértve az LDP honlapot is.</P
><P
>A dokumentáció fordításaira mutató hivatkozásokat a
<A
HREF="http://www.linux-nis.org/nis-howto/"
TARGET="_top"
>http://www.linux-nis.org/nis-howto/</A
> honlapon találod.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN34">1.2. A felelõsség teljes elhárítása</H3
><P
>Habár ezt a dokumentációt a legjobb tudásom szerint állítottam össze,
lehet, sõt, szinte biztos, hogy tartalmaz hibákat. Kérlek, olvass el
minden OLVASSEL (README) fájlt, ami ebben a dokumentációban
leírtakhoz kapcsolódik, hogy még részletesebb, és pontosabb
információkat szerezhess. Megpróbálom amennyire csak lehet hibátlanul
tartani ezt a dokumentumot.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN37">1.3. Visszajelzés és javítások</H3
><P
>Ha kérdésed, vagy megjegyzésed van ezzel a dokumentummal
kapcsolatban, kérlek ne habozz levelet küldeni Thorsten Kukuknak a
<A
HREF="mailto:kukuk@linux-nis.org"
TARGET="_top"
>kukuk@linux-nis.org</A
>
e-mail címre. Örömmel fogadok bármilyen ötletet vagy kritikát.
Ha hibát találnál e dokumentációban, kérlek értesíts, hogy ki tudjam
javítani a következõ változatban. Köszönöm.</P
><P
>Kérlek <EM
>ne</EM
> küldj nekem levelet a Linux disztribúciód belsõ
problémáiról! Nem ismerem mindegyik Linux disztribúciót, de
megpróbálom hozzáadni az összes megoldást, amit küldesz.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN43">1.4. Köszönetnyilvánítás</H3
><P
>Szeretnénk megköszönni mindenkinek, aki közremûködött (közvetlenül,
  vagy közvetve) eme dokumentum létrehozásában. ABC sorrendben:</P
><P
>&#13;<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Byron A Jeff            &#60;byron@cc.gatech.edu&#62;
Markus Rex              &#60;msrex@suse.de&#62;
Miquel van Smoorenburg  &#60;miquels@cistron.nl&#62;
Dan York                &#60;dyork@lodestar2.com&#62;
Christoffer Bromberg    &#60;christoffer@web.de&#62;</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><P
>Theo de Raadt felelõs az eredeti yp-kliensek kódjáért. Swen Thuemmler
portolta az yp-kliensek kódját Linuxra, illetve az yp-rutinokat libc-
be (szintén Theo munkájára alapozva). Thorsten Kukuk írta a NIS(YP)
és NIS+ rutinokat GNU libc 2.x-re a semmibõl.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN49">1.5. Magyar fordítás</H3
><P
>	    A magyar fordítást <A
HREF="mailto:bbk@swi.hu_NO_SPAM"
TARGET="_top"
>Bábos Balázs</A
> készítette (?).
	    A dokumentumot <A
HREF="mailto:petvolgyi@freemail.hu_NO_SPAM"
TARGET="_top"
>Völgyi Péter</A
> frissítette (2003.02.28).
	    A lektorálást <A
HREF="mailto:sysop@szigetvar.partner.enternet.hu_NO_SPAM"
TARGET="_top"
>Szilágyi Szilárd</A
> végezte el (2003.09.04).
	    Utoljára <A
HREF="mailto:dacas@freemail.hu_NO_SPAM"
TARGET="_top"
>Daczi László</A
> frissítette (2003.10.14).
	    A dokumentum legfrissebb változata megtalálható a <A
HREF="http://tldp.fsf.hu/index.html"
TARGET="_top"
>Magyar Linux Dokumentációs Projekt</A
> honlapján.
   </P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="GLOSSARY">2. Összefoglalás és általános információ</H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="AEN59">2.1. Kifejezések összefoglalása



&#13;</H3
><P
>Ebben a dokumentumban nagyon sok szakkifejezés található. Íme a
legfontosabb szakkifejezések rövid magyarázata:</P
><P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>DBM</DT
><DD
><P
>DataBase Management (adatbázis-menedzselés), egy könyvtárnyi
függvény, amely kulcs-tartalom párokat kezelnek egy
adatbázisban.</P
></DD
><DT
>DLL</DT
><DD
><P
>Dynamically Linked Library (dinamikusan láncolt programkönyvtár),
futtatható programhoz futásidõben hozzákapcsolódó programkönyvtár.</P
></DD
><DT
>domainname</DT
><DD
><P
>A domain name (domain név) egy "kulcs", amit a
NIS kliens arra használ, hogy megfelelõ NIS szervert
találjon, ami ezt a domain név kulcsot szolgáltatja.
Itt jegyezném meg, hogy ennek általában semmi köze
sincs a gép(ek) DNS "domain nevéhez" (gép név).</P
></DD
><DT
>FTP</DT
><DD
><P
>File Transfer Protocol (fájl átviteli protokoll), fájlok
két számítógép közötti átvitelére szolgáló protokoll.</P
></DD
><DT
>libnsl</DT
><DD
><P
>Name services library (név szolgáltató könyvtár), SVR4 Unixok
névszolgáltatás-hívásainak (getpwnam, getservbyname, stb...)
könyvtára. A GNU libc használja ezt a NIS(YP) és NIS+
függvényekhez.</P
></DD
><DT
>libsocket</DT
><DD
><P
>Socket services library (foglalat szolgáltatás könyvtár), SVR4
Unixok socket szolgáltatás-hívásainak (socket, bind, listen,
stb.) programkönyvtára.&#13;</P
></DD
><DT
>NIS</DT
><DD
><P
>Network Information Service (hálózati információs szolgáltatás),
a hálózat gépei számára olyan információt kínáló szolgáltatás,
amit a teljes hálózatnak ismernie kell. A Linux általános libc
könyvtára támogatást nyújt a NIS használatához, amire a
következõkben "hagyományos NIS" néven fogunk hivatkozni.</P
></DD
><DT
>NIS+</DT
><DD
><P
>Network Information Service (Plus :-) (hálózati információs
szolgáltatás plusz), alapvetõen NIS szteroidokkal. A NIS+
szolgáltatást a Sun Microsystems Inc. tervezte a NIS-t
lecserélendõ, hogy nagy telepítések esetén
biztonságosabb, és jobban kezelhetõ legyen.</P
></DD
><DT
>NYS</DT
><DD
><P
>Ez egy projekt neve, a NIS+-t, YP-t és a Switch (kapcsoló)
rövidítése, Peter Eriksson &#62;peter@ifm.liu.se&#60; vezeti.
Többek között a NYS könyvtár Name Services Switch (név szolgáltatás
kapcsoló) funkcionalitását használó NIS (= YP) kód teljes
újraírását foglalja magába.</P
></DD
><DT
>NSS</DT
><DD
><P
>Name Service Switch (név szolgáltatás kapcsoló), Az
/etc/nsswitch.conf fájl határozza meg a különbözõ kért
információ-darabok fellapozásának sorrendjét.</P
></DD
><DT
>RPC</DT
><DD
><P
>Remote Procedure Call (távoli eljáráshívás). Az RPC rutinok
lehetõvé teszik C programok számára, hogy hálózaton keresztül
más gépeken eljárásokat hívjanak meg. Amikor RPC-rõl beszélünk,
legtöbbször a Sun RPC változatára gondolunk.</P
></DD
><DT
>YP</DT
><DD
><P
>Yellow Pages(tm) (sárga oldalak(tm)), A United Kingdom
of British Telecom plc bejegyzett védjegye.</P
></DD
><DT
>TCP-IP</DT
><DD
><P
>Transmission Control Protocol/Internet Protocol (átvitelirányító
protokoll/internet protokoll), Unix gépeken leggyakrabban ezt az
adatkommunikációs protokollt használják.</P
></DD
></DL
></DIV
></P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN126">2.2. Néhány általános információ


&#13;</H3
><P
>A következõ 4 sor idézet a Sun(tm) Rendszer- és hálózati
  adminisztráció kézikönyvébõl:</P
><P
>&#13;<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    "A NIS korábban Sun Yellow Pages (YP) néven volt
    ismert, de a Yellow Pages(tm) az United Kingdom of
    British Telecom plc bejegyzett védjegye, és tilos
    a beleegyezésük nélkül felhasználni."</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><P
>A NIS a Hálózati Információs Szolgáltatás rövidítése. A célja az, hogy
a hálózat gépei számára olyan információt kínáljon, amit a teljes
hálózatnak ismernie kell. A NIS által szolgáltatott információk:

<P
></P
><UL
><LI
><P
> felhasználói nevek/jelszavak/home könyvtárak (/etc/passwd)</P
></LI
><LI
><P
> csoport információ (/etc/group)</P
></LI
></UL
>&#13;</P
><P
>Ha például a jelszavad bejegyzése szerepel a NIS jelszó adatbázisban,
be tudsz jelentkezni a hálózat minden olyan gépére, amin fut a NIS
kliens program.</P
><P
>A Sun a Sun Microsystems Inc. bejegyzett védjegye,
amit a SunSoft Inc. számára licencelt.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="WHICH">3. NIS, NYS vagy NIS+?</H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="AEN149">3.1. libc 4/5 hagyományos NIS-el, vagy NYS ?

&#13;</H3
><P
>A választás a "hagyományos NIS" és a NYS könyvtár NIS kódja között
olyan, mint a választás a lustaság és fejlettség, vagy a rugalmasság
és a kaland imádata között.</P
><P
>A "hagyományos NIS" kód az általános C könyvtárban található már
jó ideje, néha a korától és a rugalmatlanságától szenved.</P
><P
>A NYS könyvtár NIS kódjának használatához újra kell fordítanod a libc
könyvtárat, és bele kell fordítani a NYS kódot (vagy legalábbis
szerezned kell valakitõl, aki már elkészítette egy elõfordított libc
változatot).</P
><P
>A másik különbség, hogy a hagyományos NIS kód tartalmaz némi NIS
Netgroups (NIS Hálózati csoportok) támogatást, szemben a NYS kóddal.
Másfelõl a NYS kód lehetõvé teszi, hogy árnyék jelszavakat (Shadow
Password) használj teljesen átlátszó módon. A "hagyományos NIS" kód
nem engedélyezi NIS feletti árnyék jelszavak használatát.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN159">3.2. glibc 2 és NIS/NIS+
&#13;</H3
><P
>Ezt mind el is felejtheted, ha az új GNU C könyvtár 2.x-et (azaz libc6) használsz.
Ebben valódi NSS (név kapcsolás szolgáltatás) támogatás van, ami nagyon rugalmassá teszi,
valamint a következõ NIS/NIS+ térképekre is tartalmaz támogatást: aliases, ethers, group,
hosts, netgroups, networks, protocols, publickey, passwd, rpc, services és shadow.
A GNU C könyvtárnak nincs problémája a NIS feletti árnyék jelszavakkal.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN166">3.3. NIS vagy NIS+ ?&#13;</H3
><P
>A NIS és NIS+ közötti választás nagyon könnyû - használj NIS-t, ha nincs szükséged a NIS+-ra,
vagy ha komoly biztonsági szükségleteid vannak. NIS+-t  sokkal körülményesebb adminisztrálni
(nagyon könnyû kezelni a kliens oldalról, de a szerver oldalán szörnyû). Másik probléma,
hogy a NIS+ Linux alatti támogatása sok hibát tartalmaz, és a fejlesztése is leállt.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="OPERATION">4. Hogyan mûködik?</H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="AEN173">4.1. Hogyan mûködik a NIS?&#13;</H3
><P
>Egy hálózaton belül legalább egy, NIS szerverként mûködõ gépnek kell
lennie.  Lehet több NIS szerver is úgy, hogy mindegyik más NIS
"körzetet" szolgál ki - vagy lehetnek együttmûködõ NIS szervereid is,
ahol van egy mester NIS szerver, és a többi úgynevezett szolga NIS
szerver (egy adott NIS "körzetedre" ez így is van) - vagy lehet
vegyesen is...</P
><P
>A szolga szervereknek a NIS adatbázisról csak egy másolatuk van, és
ezeket a másolatokat a mester NIS szervertõl kapják, amikor abban
változás történt. A hálózatod gépeinek számától és a hálózatod
megbízhatóságától függõen választhatsz, hogy egy vagy több szolga
szervert telepítesz. Amikor egy NIS szerver lekapcsolódik, vagy túl
lassan válaszol a kérésekre, a NIS kliens, ami ehhez a szerverhez
kapcsolódik, megpróbál egy mûködõ vagy gyorsabb szervert találni.</P
><P
>A NIS adatbázisok úgynevezett DBM formátumban tárolódnak, amik ASCII
adatbázisból konvertálhatók. Például az /etc/passwd és az /etc/group
fájlok közvetlenül átalakíthatók DBM formátumba ASCII-bõl-DBM-be
átalakító szoftverrel ("makedbm", amit a szerver szoftveréhez
csatolnak). A mester NIS szerveren egyaránt kell ASCII és DBM
adatbázisnak lennie.</P
><P
>A szolga szerverek minden a NIS térképben történt változásról értesülnek
(az <B
CLASS="COMMAND"
>"yppush"</B
> program segítségével),
és automatikusan megkapják az adatbázisok szinkronizálásához szükséges változásokat.
A NIS klienseknek nem kell ezt megtenniük, hiszen õk folyamatosan a NIS
szerverrel kommunikálnak, hogy a szerverek DBM adatbázisából
megszerezzék a szükséges információkat.</P
><P
>A régi ypbind változatok üzenetszórással keresnek futó NIS szervert.
Ez nem biztonságos, mert bárki telepíthet NIS szervert, és válaszolhat
az üzenetszórással érkezõ üzenetekre. Az ypbind újabb változatai
(ypbind-3.3 vagy ypbind-mt) képesek a szervert konfigurációs
fájlból olvasni - tehát nincs szükség üzenetszórásra.&#13;</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN183">4.2. Hogyan mûködik a NIS+?&#13;</H3
><P
>A NIS+ a Sun hálózati információs névszolgáltatásának új változata. A
legnagyobb különbség a NIS és NIS+ között az, hogy a NIS+ támogatja az
adattitkosítást és a biztonságos RPC hitelesítést.</P
><P
>A NIS+ névmodellje fa-struktúrán alapul. Minden levél a fában egy NIS+
objektumnak felel meg. Az objektumok hat típusa: könyvtár, bejegyzés,
csoport, hivatkozás, tábla és privát.</P
><P
>A NIS+ névterület gyökerét alkotó NIS+ könyvtárat gyökér könyvtárnak
hívják. Két különleges NIS+ könyvtár létezik: org_dir és groups_dir.
Az org_dir (org=organization: szervezet, dir=directory: könyvtár)
könyvtár tartalmazza az összes adminisztrációs táblát, olyanokat mint
a passwd (passwd=password: jelszó), hosts (hosts: gépnevek) és a
mail_aliases (mail aliases: levél álnevek). A groups_dir (groups:
csoportok) könyvtár tartalmazza a hozzáférés vezérlésére szolgáló NIS+
csoport objektumokat. Az org_dir, groups_dir és a szülõ könyvtárak
együttesét NIS+ körzetnek nevezzük (NIS+ domain).</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PORTMAPPER">5. Az RPC Portmapper (Távoli Eljáráshívás kapuhozzárendelõ)

&#13;</H2
><P
>A lentebb említésre kerülõ programok futtatásához el kell indítanod az
/sbin/portmap programot. Néhány Linux disztribúció már tartalmazza
a kódot e démon futtatásához az /sbin/init.d/ vagy /etc/rc.d/
könyvtárakban. Csak annyit kell tenned, hogy aktiválod és újraindítod
a Linux gépedet. Olvasd el a Linux disztribúciód dokumentációjában
ennek menetét.</P
><P
>Az RPC portmapper (portmap(8) egy RPC program számokat TCP/IP (vagy
UDP/IP) protokoll port számokká alakító szerver. Ennek futnia kell
ahhoz, hogy RPC hívásokat (mint amilyeneket a NIS/NIS+ kliens szoftver
is nyújt) adhass RPC szervereknek (mint amilyen a NIS vagy NIS+ szerver)
azon a gépen.  Amikor egy RPC szerver elindul, megmondja a portmap-nek
hogy melyik porton hallgat, és milyen RPC program számok
kiszolgálására van felkészítve.  Amikor egy kliens RPC hívást szeretne
tenni egy adott programszámra, elõször kapcsolatot teremt a szerver
portmap-jével, hogy megállapítsa, melyik portcímre küldje az RPC
csomagokat.</P
><P
>Szabványosan, az általános RPC szervert az inetd(8) indítja, így a
portmap-nek már az inetd indulása elõtt el kell indulnia.</P
><P
>A biztonságos RPC-hez a portmapper-nek szüksége van az idõ
szolgáltatásra (Time service). Gyõzõdj meg arról, hogy engedélyezted
az idõ szolgáltatást az /etc/inetd.conf-ban minden gépre:

<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>#
# Az idõ szolgáltatás óra egyeztetésre használatos.
#
time    stream  tcp     nowait  root    internal
time    dgram   udp     wait    root    internal</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><P
>FONTOS: Ne feledkezz el a konfigurációs fájlok változtatása után
az inetd újraindításáról!</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="SETTING-NIS">6. Mire van szükség a NIS üzembe helyezéséhez?&#13;</H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="AEN208">6.1. Határozd meg, hogy géped szerver, szolga vagy kliens lesz.&#13;</H3
><P
> Ennek eldöntéséhez két esetet kell megvizsgálni:</P
><P
>&#13;<P
></P
><OL
TYPE="1"
><LI
><P
>A géped egy már NIS szervereket tartalmazó hálózat része lesz.</P
></LI
><LI
><P
>Még nincs NIS szervered a hálózatban.</P
></LI
></OL
>&#13;</P
><P
>Az elsõ esetben csak a kliens programokra van szükséged (ypbind,
ypwhich, ypcat, yppoll, ypmatch). A legfontosabb program az ypbind.
Ennek a programnak állandóan futnia kell, ami azt jelenti, hogy mindig
szerepelnie kell a folyamatok listájában (list of processes). Ez egy
démon folyamat, és a rendszerindító fájlokból kell indítani (például
/etc/init.d/nis, /sbin/init.d/ypclient, /etc/rc.d/init.d/ypbind,
/etc/rc.local).  Amint fut az ypbind, a géped máris NIS klienssé válik.</P
><P
>A második esetben, ha még nincs NIS szervered, akkor a NIS szerver
programokra is szükséged lesz (általában ypserv-nek hívják).
A "NIS szerver beállítása" fejezet mutatja be, hogy hogyan kell a
Linux gépedre NIS szervert telepíteni, használva az <B
CLASS="COMMAND"
>ypserv</B
> démont.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN222">6.2. A szoftver&#13;</H3
><P
>A NIS kliens és szerver szoftver sikeres lefordításához minden
szükséges rendszerhívás megtalálható az "/usr/lib/libc.a" (v.4.4.2 és újabb)
rendszerkönyvtárban, vagy a "/lib/libc.so.x" oszott könyvtárban.
A GNU C könyvtár 2-höz (glibc 2.x), a /lib/libnsl.so.1 is szükséges.</P
><P
>Néhányan jelezték, hogy a NIS csak 4.5.21 és újabb "/usr/lib/libc.a"
változatokkal mûködik, tehát ha biztonságosan szeretnéd használni, ne
használj régebbi libc-ket. A NIS kliens szoftver beszerezhetõ az
alábbi helyekrõl:</P
><P
>&#13;<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>  Hely                  Könyvtár                         Fájl neve

  ftp.kernel.org        /pub/linux/utils/net/NIS         yp-tools-2.8.tar.gz
  ftp.kernel.org        /pub/linux/utils/net/NIS         ypbind-mt-1.13.tar.gz
  ftp.kernel.org        /pub/linux/utils/net/NIS         ypbind-3.3.tar.gz
  ftp.kernel.org        /pub/linux/utils/net/NIS         ypbind-3.3-glibc5.diff.gz</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><P
>Amint megszerezted a szoftvert, kérlek, kövesd a szoftverrel kapott
utasításokat.  Az yp-clients-2.2 libc4-el és libc5-el használható
5.4.20-ig. A libc5.4.21-hez és glibc 2.x-hez yp-tools-1.4.1-re vagy
újabbra lesz szükséged. Az új yp-tools-2.4-nek minden Linux libc-vel
mûködnie kell. Mivel volt egy hiba a NIS kódban, ne használj
libc-5.4.21-5.4.35 közötti változatot. Használj inkább 5.4.36-os vagy
frissebb libc könyvtárat helyette, vagy a a legtöbb YP program nem fog mûködni. Az
ypbind 3.3 is mûködni fog minden könyvtárral. Ha gcc-2.8.x-et vagy
újabbat használsz, egcs-t vagy glibc-2.x-t, hozzá kell adnod az
ypbind-3.3-glibc5.diff foltot (patch) az ypbind-3.3-hoz. Ha lehetséges
ne használd az ypbind 3.3-as verzióját, biztonsági hiányosságokból kifolyólag.
Az ypbind-mt egy új, többszálú démon. 2.2-es Linux kernel kell hozzá,
és 2.1-es vagy újabb glibc.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="SETTINGUP-CLIENT">7. A NIS kliens telepítése</H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="AEN233">7.1. Az ypbind démon



&#13;</H3
><P
>Miután sikeresen lefordítottad a szoftvert, készen állsz a
telepítésére.  Az ypbind démon számára megfelelõ hely az /usr/sbin
könyvtár. Néhányan mondhatnák, hogy nincs szükséged ypbind-re NYS-t
tartalmazó rendszerben. Tévednek. ypwhich-re és ypcat-ra mindig
szükség van.</P
><P
>Ezt természetesen root felhasználóként kell elvégezned. A többi binárist
(ypwhich, ypcat, yppasswd, yppoll, ypmatch) olyan könyvtárba kell
tenni, ami minden felhasználó számára elérhetõ, általában az /usr/bin
könyvtárba.</P
><P
>Újabb ypbind változatok /etc/yp.conf nevû konfigurációs fájlal
rendelkeznek. Bedrótozhatsz ide egy NIS szervert - további
információkért nézd meg az ypbind(8) kézikönyv oldalt. Erre az
fájlra NYS esetén is szükséged van.
Például:

<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>  ypserver 10.10.0.1
  ypserver 10.0.100.8
  ypserver 10.3.1.1</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><P
>Ha a rendszer fel tudja oldani a gépneveket NIS nélül, használhatsz
gépnevet, különben IP címet kell használnod. Az ypbind-3.3-ban van egy
hiba, és csak a legutolsó bejegyzést használja (a példában ypserver 10.3.1.1).
Minden más bejegyzést figyelmen kívül hagy. Az ypbind-mt
helyesen kezeli ezt, és azt használja, amelyik elõször válaszol.</P
><P
>Jó ötlet kipróbálni az ypbind-et, mielõtt beleteszed az indítófájlokba. 
Az ypbind kipróbálásához a következõket kell tenned:</P
><P
>&#13;<P
></P
><UL
><LI
><P
>Gyõzõdj meg róla, hogy van YP-körzet név beállításod. Ha ez nincs
beállítva, akkor add ki a következõ utasítást:

<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>	    /bin/domainname nis.domain&#13;</PRE
></FONT
></TD
></TR
></TABLE
>

	ahol a <TT
CLASS="LITERAL"
>nis.domain</TT
> olyan szöveg,
aminek általában SEMMI köze a géped DNS-körzet nevéhez.
Ez azért van így, hogy a külsõ betörõk számára megnehezítse a
NIS szerveredbõl a jelszó adatbázis megszerzését.
Ha nem tudod, hogy mi a NIS körzet neve a hálózatodon,
kérdezd meg a rendszergazdát/hálózati adminisztrátort.&#13;</P
></LI
><LI
><P
>Indítsd el az "<B
CLASS="COMMAND"
>/sbin/portmap</B
>" programot, ha még nem fut.&#13;</P
></LI
><LI
><P
>Készíts egy <TT
CLASS="FILENAME"
>/var/yp</TT
> nevû könyvtárat, ha még nem létezik.&#13;</P
></LI
><LI
><P
>Indítsd el az <B
CLASS="COMMAND"
>/usr/sbin/ypbind</B
> programot.&#13;</P
></LI
><LI
><P
>Ellenõrizd a <B
CLASS="COMMAND"
>rpcinfo -p localhost</B
> utasítással, hogy az ypbind be
tudta-e regisztrálni a szolgáltatását a portmapper-be. A kimenetnek ilyesminek kell
lennie:


<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>       program vers proto   port
        100000    2   tcp    111  portmapper
        100000    2   udp    111  portmapper
        100007    2   udp    637  ypbind
        100007    2   tcp    639  ypbind&#13;</PRE
></FONT
></TD
></TR
></TABLE
>


vagy


<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>       program vers proto   port
        100000    2   tcp    111  portmapper
        100000    2   udp    111  portmapper
        100007    2   udp    758  ypbind
        100007    1   udp    758  ypbind
        100007    2   tcp    761  ypbind
        100007    1   tcp    761  ypbind&#13;</PRE
></FONT
></TD
></TR
></TABLE
>


az általad használt ypbind változattól függõen.&#13;</P
></LI
><LI
><P
>Elindíthatod az <B
CLASS="COMMAND"
>rpcinfo -u localhost ypbind</B
> programot is.
Ez az utasítás valami ehhez hasonlót fog eredményezni:
<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>        program 100007 version 2 ready and waiting&#13;</PRE
></FONT
></TD
></TR
></TABLE
>


vagy


<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>        program 100007 version 1 ready and waiting
        program 100007 version 2 ready and waiting&#13;</PRE
></FONT
></TD
></TR
></TABLE
>


A kimenet attól függ, hogy melyik ypbind változatot telepítetted.
Csak a "version 2" üzenet fontos.</P
></LI
></UL
>&#13;</P
><P
>Ettõl a ponttól kezdve használhatod az olyan NIS kliens programokat,
mint például az ypcat, stb... Például az <B
CLASS="COMMAND"
>ypcat passwd.byname</B
> visszaadja
neked a teljes NIS jelszó-adatbázist.</P
><P
>FONTOS: Ha kihagytad a tesztelõ eljárást, gyõzõdj meg róla, hogy
beállítottad a körzet nevét, és létrehoztad a következõ könyvtárat:</P
><P
>&#13;<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    /var/yp</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><P
>Ennek a könyvtárnak léteznie KELL az ypbind sikeres elindulásához.</P
><P
>A körzetnév helyességének ellenõrzésére használd a
<B
CLASS="COMMAND"
>/bin/ypdomainname</B
> programot az yp-tools-2.2-bõl. Ez az
yp_get_default_domain() függvényt használja, ami sokkal szigorúbb. Nem
engedélyezi például a "(semmi)" körzetnevet, ami az alapértelmezett
Linux alatt, és sok probléma okozója.&#13;</P
><P
>Ha a teszt mûködik, most érdemes megváltoztatnod a démonokat indító
fájlokat, hogy az ypbind a rendszer indulásakor indulhasson, és a
rendszered NIS kliensként viselkedjen. Gyõzõdj meg róla, hogy a
körzetnév az ypbind indítása elõtt beállításra kerül!&#13;</P
><P
>Nos, ennyi. Indítsd újra a géped, és nézd meg a rendszerüzeneteket,
hogy az ypbind elindult-e.&#13;</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN282">7.2. A NIS kliens beállítása hagyományos NIS használatával&#13;</H3
><P
>Gépnév feloldáshoz be kell állítanod (vagy hozzá kell adnod) a "nis"-t
a feloldási sorrend sorához az <TT
CLASS="FILENAME"
>/etc/host.conf</TT
> fájlban. Nézd meg
a "resolv+.8" kézikönyv oldalt a részletes leírásért.&#13;</P
><P
>Add hozzá a NIS kliens az <TT
CLASS="FILENAME"
>/etc/passwd</TT
> fájlhoz a következõ sort:</P
><P
>&#13;<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>+::::::</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><P
>Használhatod a + és a - karaktereket felhasználó
hozzáadásához/kizárásához vagy megváltoztatásához. Ha a vendég
felhasználót szeretnéd kizárni, csak add hozzá az <TT
CLASS="FILENAME"
>/etc/passwd</TT
>
fájlhoz a "-guest" kapcsolót. Más parancsértelmezõt (például ksh) szeretnél
használtatni a "linux" felhasználóval? Nem probléma, egyszerûen add
hozzá a "+linux::::::/bin/ksh" (idézõjelek nélkül) sort az <TT
CLASS="FILENAME"
>/etc/passwd</TT
>
fájlhoz. Azokat a mezõket, amelyeket nem akarsz használni,
üresen kell hagyni. Használhatod a Netgroups-t a felhasználó
szabályozáshoz.</P
><P
>Például ahhoz hogy csak miquels, dth és ed, valamint a sysadmin
hálózati csopot számára engedélyezd a bejelentkezés-hozzáférést, és a
többiek számára megmaradjon az azonosító, a következõket kell
megadnod:</P
><P
>&#13;<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>      +miquels:::::::
      +ed:::::::
      +dth:::::::
      +@sysadmins:::::::
      -ftp
      +:*::::::/etc/NoShell</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><P
>Jegyezzük meg, hogy Linux rendszerben a jelszó mezõt is felül lehet
bírálni ugyanúgy, ahogy ebben a példában tettük. Eltávolítottuk az
"ftp" felhasználót is, tehát itt többé nem létezik, azaz az anonymous
ftp nem fog többé mûködni.</P
><P
>A hálózati csoport így fog kinézni:

<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>sysadmins (-,software,) (-,kukuk,)</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><P
>FONTOS: A hálózati csoport (netgroup) beállítási lehetõség a 4.5.26-os libc változattól
kezdve használható. Ha 4.5.26-os libc-nél korábbi változatod van,
minden NIS jelszó-adatbázisban szereplõ felhasználó hozzáférhet a
Linux gépedhez, ha "ypbind"-et futtatsz!</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN302">7.3. NIS kliens beállítása NYS használatával&#13;</H3
><P
>Mindössze arra van szükség, hogy a NIS konfigurációs fájl
(/etc/yp.conf) a helyes szerver(ek)re mutasson.
Ezen kívül a Névszolgáltatás Kapcsoló (Name Services Switch) konfigurációs fájlt
(/etc/nsswitch.conf) helyesen be kell állítani.&#13;</P
><P
>Az ypbind-et fel kell még telepítened. Erre nem a libc-nek, hanem a
NIS(YP) tools-nak van szüksége.</P
><P
>Ha szeretnéd használni a felhasználók hozzáadása/kizárása jellemzõt
(+/-guest/+@admins), a "passwd: compat"-t és "group: compat" sort be kell
az nsswitch.conf fájlba tenned.  Jegyezzük meg, hogy nincs "shadow:
compat"! "shadow: files nis" bejegyzést kell használnod ebben az esetben.</P
><P
>A NYS források nem részei az 5-ös libc forrásnak. Ha a configure szkriptet
futtatod, válaszd elsõ alkalommal "NO"-t a "Values correct" kérdésre, és
utána "YES"-t a "Build a NYS libc from nys" kérdésre.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN310">7.4. NIS kliens beállítása glibc 2.x segítségével&#13;</H3
><P
>A glibc a "hagyományos NIS"-t használja, tehát el kell indítanod az
ypbind-et. A Név Szolgáltatás Kapcsoló konfigurációs (Name Services Switch) fájlt
(/etc/nsswitch.conf) helyesen be kell állítani. Ha a compat módot
használod a passwd-hez, shadow-hoz vagy a group-hoz, hozzá kell adnod
ezen fájlok végéhez a "+"-t, és használhatod a felhasználó
hozzáadás/kizárás jellemzõt. A beállítás ugyanilyen Solaris 2.x esetén
is.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN315">7.5. Az nsswitch.conf fájl

&#13;</H3
><P
>A Hálózati Szolgáltatások (Network Services) beállítási fájl (/etc/nsswitch.conf)
határozza meg egy meghatározott információcsoport lekérdezésekor a
feloldások sorrendjét, hasonlóan ahogy az /etc/host.conf fájl
meghatározza, hogy milyen módon történjen a gépnév feloldása.
Például a</P
><P
>&#13;<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    hosts: files nis dns</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><P
>sor meghatározza, hogy a gépnév feloldás függvény elõször a helyi
/etc/hosts fájlt nézze, majd NIS feloldás kövesse, végül a
körzetnév szolgáltatáson keresztül oldja fel (/etc/resolv.conf és
named). Ennél a pontnál, ha nincs találat, hibával tér vissza.  Ezt az
fájlt minden felhasználó számára olvashatóvá kell tenni!  További
információt találsz errõl az nsswitch.5, vagy az nsswitch.conf.5
kézikönyv oldalakban.</P
><P
>Egy NIS számára használható /etc/nsswitch.conf fájl:

<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>#
# /etc/nsswitch.conf
#
# Egy példa Név Szolgáltatás Kapcsoló (Name Service Switch) beállítási
# fájl. Ezt az fájlt úgy kell rendezni, hogy a leginkább használt
# szolgáltatás kerüljön az elejére.
#
# A '[NOTFOUND=return]' bejegyzés azt jelenti, hogy egy bejegyzés
# keresése be kell, hogy fejezõdjön, ha az elõzõ bejegyzés keresése
# nem adott vissza semmit. Jegyezzük meg, hogy ha a keresés más
# okból hibás (mondjuk nem válaszol NIS szerver), akkor a keresés
# folytatódik a következõ bejegyzéssel.
#
# Lehetséges bejegyzések:
#
#	nisplus			Használj NIS+ -t (NIS 3-as verzió)
#	nis			Használj NIS-t   (NIS 2-es verzió), YP-nek is |hívják
#	dns			Használj DNS-t   (Domain Name Service: Körzet |Név Szolgáltatás)
#	files			Használd a helyi fájlokat
#	db			Használd a /var/db adatbázist
#	[NOTFOUND=return]	Hagyd abba a keresést, ha nem találod
#

passwd:     compat
group:      compat
# libc5 esetén shadow: files nis -t kell használod
shadow:     compat

passwd_compat: nis
group_compat: nis
shadow_compat: nis

hosts:      nis files dns

services:   nis [NOTFOUND=return] files
networks:   nis [NOTFOUND=return] files
protocols:  nis [NOTFOUND=return] files
rpc:        nis [NOTFOUND=return] files
ethers:     nis [NOTFOUND=return] files
netmasks:   nis [NOTFOUND=return] files
netgroup:   nis
bootparams: nis [NOTFOUND=return] files
publickey:  nis [NOTFOUND=return] files
automount:  files
aliases:    nis [NOTFOUND=return] files</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><P
>A passwd_compat, group_compat és shadow_compat csak glibc 2.x alatt
támogatott. Ha nincs shadow szabály az /etc/nsswitch.conf fájlban, a
glibc a passwd szabályt fogja alkalmazni a feloldáshoz. Van még néhány
feloldó modul a glibc-hez, mint például a hesoid. További információért
olvasd el a glibc dokumentációját.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN328">7.6. Árnyék jelszavak NIS-sel&#13;</H3
><P
>A NIS feletti árnyék jelszavak használata mindig rossz ötlet.
Elveszted az árnyék által biztosított biztonságot, és csak néhány
Linux C könyvtár támogatja. Egy jó módszer a NIS feletti
árnyék jelszavak használatának elkerülésére az, hogy csak a helyi
felhasználók esetén használsz árnyékjelszót az /etc/shadow
fájlban. Vedd ki a NIS felhasználó bejegyzéseket az árnyék
adatbázisból, és tedd vissza a jelszót a passwd fájlba.  Így tehát
használhatod az árnyék jelszót a root bejelentkezéshez, és a
hagyományos passwd-t a NIS felhasználóhoz. Ennek a módszernek megvan
az az elõnye, hogy minden NIS kliens esetén mûködni fog.</P
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="AEN333">7.6.1. Linux</H4
><P
>Az egyetlen Linux libc, amely támogatja az árnyék jelszavak NIS
feletti használatát a GNU C 2.x könyvtár. A Linux libc5-ben nincs
ehhez támogatás. A Linux libc5 engedélyezett NYS-sel lefordítva
tartalmaz némi kódot hozzá. Azonban ez a kód néhány esetben hibásan mûködik,
és nem mûködik minden árnyék bejegyzéssel helyesen.</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="AEN336">7.6.2. Solaris</H4
><P
>A Solaris nem támogatja a NIS feletti árnyék jelszavakat.</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="AEN339">7.6.3. PAM&#13;</H4
><P
>A Linux-PAM 0.75 és újabb verzói támogatják a NIS feletti
árnyék jelszavakat, amennyiben pam_unix.so modult használsz,
vagy telepíted a pam_unix2.so modult. Régi rendszereknél
(például RedHat 5.x) , melyek még a pam_pwdb/libpwdb-t használják,
meg kell változtatnod az /etc/pam.d/* bejegyzéseket.
Cseréld ki az összed pam_pwdb szabályt a pam_unix_* modulokban.</P
><P
>Az /etc/pam.d/login fájl például így néz ki:</P
><P
>&#13;<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>#%PAM-1.0
auth     requisite      pam_unix2.so            nullok #set_secrpc
auth     required       pam_securetty.so
auth     required       pam_nologin.so
auth     required       pam_env.so
auth     required       pam_mail.so
account  required       pam_unix2.so
password required       pam_pwcheck.so          nullok
password required       pam_unix2.so            nullok use_first_pass use_authtok
session  required       pam_unix2.so            none # debug or trace
session  required       pam_limits.so</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
></DIV
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="NISPLUS">8. Mire van szükség a NIS+ beállításához?</H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="AEN349">8.1. Szoftver&#13;</H3
><P
>A Linux NIS+ kliens kódot a GNU C 2-es könyvtárhoz fejlesztették ki.
Vagy Linux libc5-höz is egy változat, hiszen a legtöbb kereskedelmi
alkalmazást ehhez a könyvtárhoz fordítják és nem tudod õket glibc
használatához újrafordítani. Problémák vannak a libc5 és NIS együttes
használatában: statikus programokat nem lehet ehhez fordítani, és az e
könyvtárhoz fordított programok nem fognak más libc5 változatokkal mûködni.</P
><P
>Ha olyan disztribúciód van, amelyikben nincs 2.11-es vagy újabb glibc,
akkor be kell szerezned egyet, vagy frissítened kell a rendszered glibc-jét.
Alaprendszerként, szükséged lesz egy glibc alapú disztribúcióra,
mint például a Debian, RedHat, vagy SuSE Linux.</P
><P
>A NIS+ kliens szoftvert megszerezheted az alábbi címekrõl:

<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>  Hely             Könyvtár                      Fájl neve

  ftp.gnu.org      /pub/gnu/glibc                glibc-2.3.2.tar.gz,
                                                 glibc-linuxthreads-2.3.2.tar.gz
  ftp.kernel.org   /pub/linux/utils/net/NIS+     nis-utils-1.4.1.tar.gz</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><P
>Nézz körül a <A
HREF="http://www.linux-nis.org/nisplus/"
TARGET="_top"
>http://www.linux-nis.org/nisplus/</A
> webhelyen további információkért,
és a legfrissebb forrásokért.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN359">8.2. NIS+ kliens beállítása&#13;</H3
><P
>FONTOS: NIS+ kliens beállításához olvasd el a Solaris NIS+
dokumentációkat, abban van leírva mit kell tenni a szerver oldalán!
Ez a dokumentáció csak a kliens oldali teendõket írja le!</P
><P
>Miután feltelepítetted az új libc-t és NIS-eszközöket, elkészítheted
az új kliens megbízólevelét (credential) a NIS+ szerveren. Gyõzõdj meg róla, hogy a
portmap fut. Ezután ellenõrizd, hogy a Linux géped ideje megegyezik a
NIS+ szerverével. Biztonságos RPC használatakor legfeljebb 3 perces ablak áll
rendelkezésre, amíg a megbízások érvényesek. Jó ötlet minden gépen
az xntpd futtatása. Mindezek után futtasd a következõket:</P
><P
>&#13;<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>domainname nisplus.domain.
nisinit -c -H &#60;NIS+ server&#62;</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><P
>az indítófájlok beállításához. Olvasd el az nisinit
kézikönyv oldalt a többi lehetõségért. Gyõzõdj meg róla, hogy a körzetnév
minden újraindítás után beállítódik-e. Ha nem tudod, hogy mi a
hálózatod NIS+ körzetneve, kérdezd meg a redszergazdát/hálózati adminisztrátort.</P
><P
>Most célszerû megváltoztatnod az <TT
CLASS="FILENAME"
>/etc/nsswitch.conf</TT
> fájlt.
Bizonyosodj meg arról, hogy a publickey szolgáltatás utáni egyetlen
szolgáltatás a nisplus ("publickey: nisplus"), és semmi más!</P
><P
>Ezután indítsd el a keyserv-et, és nézd meg, hogy minden induláskor ez
az elsõ elinduló démon a portmap után. Futtasd a

<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>keylogin -r</PRE
></FONT
></TD
></TR
></TABLE
>

parancsot a rendszered root titkos kulcsának eltárolásához.
(Remélem hozzáadtad az új gép nyilvános kulcsát a NIS+ szerveren?).</P
><P
>A <B
CLASS="COMMAND"
>niscat passwd.org_dir</B
> parancsnak
ekkor már meg kell mutatnia a passwd adatbázisod összes bejegyzését.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN374">8.3. NIS+, keylogin, bejelentkezés és PAM&#13;</H3
><P
>Amikor a felhasználó bejelentkezik, meg kell adnia a titkos kulcsát a
keyserv-nek. Ezt a "keylogin" parancs hívásával teszi meg. Az árnyék (shadow)
csomagban lévõ login megteszi ezt a felhasználónak, ha glibc-2.1-el
volt lefordítva. A PAM alapú bejelentkezéshez fel kell telepíteni a
pam_keylogin-1.2.tar.gz csomagot, és meg kell változtatni az /etc/pam.d/login
fájlt úgy, hogy a pam_unix_auth-ot használja, ne a pwdb-t, ami nem
támogatja a NIS+ -t. Például:&#13;</P
><P
>&#13;<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>#%PAM-1.0
auth       required	/lib/security/pam_securetty.so
auth       required	/lib/security/pam_unix2.so       set_secrpc
auth       required	/lib/security/pam_nologin.so
account    required	/lib/security/pam_unix2.so
password   required	/lib/security/pam_unix2.so
session    required	/lib/security/pam_unix2.so</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN381">8.4. Az nsswitch.conf fájl

&#13;</H3
><P
>A Hálózati Szolgáltatások (Network Services) beállítási fájl (<TT
CLASS="FILENAME"
>/etc/nsswitch.conf</TT
>)
megadja, hogy milyen sorrendben történjenek a kérés-feloldások, ha egy
bizonyos információkérés történt, hasonlóan ahogy az <TT
CLASS="FILENAME"
>/etc/host.conf</TT
>
fájl meghatározza a gépnév feloldásának menetét.
Például a</P
><P
>&#13;<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    hosts: files nisplus dns</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><P
>sor meghatározza, hogy a gépnév feloldó függvény elõször a helyi <TT
CLASS="FILENAME"
>/etc/hosts</TT
>
fájlt nézze, amit egy NIS+ feloldás kövessen, végül a körzetnév
szolgáltatást kérdezze (<TT
CLASS="FILENAME"
>/etc/resolv.conf</TT
> és named), ami után ha nincs
találat, akkor hibával tér vissza.</P
><P
>Egy használható NIS+ <TT
CLASS="FILENAME"
>/etc/nsswitch.conf</TT
> fájl:

<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>#
# /etc/nsswitch.conf
#
# Egy példa Név Szolgáltatás Kapcsoló (Name Service Switch) beállítási fájl.
# Ezt a fájlt úgy kell rendezni, hogy a legtöbbször használt szolgáltatás
# kerüljön az elejére.
#
# A '[NOTFOUND=return]' bejegyzés azt jelenti, hogy egy bejegyzés
# keresése fejezõdjön be, ha az elõzõ bejegyzés keresése
# nem adott vissza semmit. Jegyezzük meg, hogy ha a keresés más
# okból hibás (mondjuk nem válaszol NIS szerver), akkor a keresés
# folytatódik a következõ bejegyzéssel.
#
# Lehetséges bejegyzések:
#
#	nisplus			Használj NIS+ -t (NIS 3-as verzió)
#	nis			Használj NIS-t   (NIS 2-es verzió), YP-nek is hívják
#	dns			Használj DNS-t   (Domain Name Service: Körzet Név Szolgáltatás)
#	files			Használd a helyi fájlokat
#	db			Használd a /var/db adatbázist
#	[NOTFOUND=return]	Hagyd abba a keresést, ha nem találod
#

passwd:     compat
group:      compat
shadow:     compat

passwd_compat: nisplus
group_compat:  nisplus
shadow_compat: nisplus

hosts:      nisplus files dns

services:   nisplus [NOTFOUND=return] files
networks:   nisplus [NOTFOUND=return] files
protocols:  nisplus [NOTFOUND=return] files
rpc:        nisplus [NOTFOUND=return] files
ethers:     nisplus [NOTFOUND=return] files
netmasks:   nisplus [NOTFOUND=return] files
netgroup:   nisplus
bootparams: nisplus [NOTFOUND=return] files
publickey:  nisplus
automount:  files
aliases:    nisplus [NOTFOUND=return] files</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="YPSERV">9. NIS szerver beállítása&#13;</H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="AEN402">9.1. Az ypserv szerver-program

&#13;</H3
><P
>Ez a dokumentáció csak az "ypserv" NIS szerver beállítását
tartalmazza.</P
><P
>A NIS szerver szoftvert megtalálod a</P
><P
>&#13;<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>  Hely                Könyvtár                     Fájl neve

  ftp.kernel.org      /pub/linux/utils/net/NIS     ypserv-2.9.tar.gz
  ftp.kernel.org      /pub/linux/utils/net/NIS     ypserv-2.9.tar.bz2</PRE
></FONT
></TD
></TR
></TABLE
></P
><P
>helyen.</P
><P
>Bõvebb információkat találsz még a
<A
HREF="http://www.linux-nis.org/nis/"
TARGET="_top"
>http://www.linux-nis.org/nis/</A
> webhelyen.</P
><P
>A hagyományos NIS és a NYS szerver beállítása megegyezik.</P
><P
>Az <B
CLASS="COMMAND"
>ypserv</B
> és <B
CLASS="COMMAND"
>makedbm</B
> programok 
elkészítéséhez fordítsd le a szoftvert.
Beállíthatod az ypserv-et securenets fájlok vagy tcp_wrapper-ek
használatára.</P
><P
>Ha a szerveredet mesterként futtatod, határozd meg, hogy melyik
fájlokat kell NIS-en keresztül elérhetõvé tenned, és add hozzá
vagy vedd ki a megfelelõ bejegyzéseket az "all" szabálynál a
<TT
CLASS="FILENAME"
>/var/yp/Makefile</TT
> fájlban. Mindig célszerû megnézned, és
megfelelõen szerkeszteni az Opciókat (Options) a Makefile elején.</P
><P
>Nagy váltás volt az ypserv 1.1 és az 1.2 között. Az 1.2-es verzió óta
az fájlkezelõk cache-ben tárolódnak. Ez azt jelenti, hogy ha új map-eket
készítesz, mindig a -c kapcsolóval kell meghívnod a makedbm-et.
Gyõzõdj meg róla, hogy az ypserv 1.2-bõl, vagy újabbból származó
<TT
CLASS="FILENAME"
>/var/yp/Makefile</TT
>-t használod, vagy add hozzá a -c kapcsolót a makedbm-
hez a Makefile-ban. Ha ezt nem teszed meg, az ypserv nem fogja tovább
használni a régi map-eket, és a frissítetteket sem.</P
><P
>Most átszerkesztheted a <TT
CLASS="FILENAME"
>/var/yp/securenets</TT
> és a <TT
CLASS="FILENAME"
>/etc/ypserv.conf</TT
>
fájlokat. Bõvebb információkért olvasd el az ypserv(8) és az
ypserv.conf(5) kézikönyv oldalakat.</P
><P
>Bizonyosodj meg róla, hogy a portmapper (portmap(8)) fut, és indítsd
el az <B
CLASS="COMMAND"
>ypserv</B
> szervert. A</P
><P
>&#13;<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    % rpcinfo -u localhost ypserv</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><P
>utasítás kimenete hasonló lesz ehhez:</P
><P
>&#13;<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    program 100004 version 1 ready and waiting
    program 100004 version 2 ready and waiting</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><P
>A "version 1" sor lehet, hogy hiányzik, az ypserv verziójától függõen,
és attól függõen, hogy milyen konfigurációs fájlt használsz. Csak
akkor lényeges, ha régi SunOS 4.x-es klienseket használsz.</P
><P
>Most készítsük el a NIS (YP) adatbázist. A mesteren futtasd a</P
><P
>&#13;<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    % /usr/lib/yp/ypinit -m</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><P
>parancsot. A szolgán nézd meg, hogy mûködik-e az <B
CLASS="COMMAND"
>ypwhich -m</B
>. 
Mielõtt a

<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    % /usr/lib/yp/ypinit -s masterhost</PRE
></FONT
></TD
></TR
></TABLE
>

parancs kiadásával beüzemelnéd a gépet NIS szolgának, 
NIS kliensként kell beállítani</P
><P
>Nos, a szervered kész van és mûködik.</P
><P
>Ha nagyobb problémáid vannak, elindíthatod az <B
CLASS="COMMAND"
>ypserv</B
>
és <B
CLASS="COMMAND"
>ypbind</B
> programokat nyomkövetõ üzemmódban is, különbözõ xterm-ekben.
A nyomkövetés kimenetének mutatnia kell, hogy mi mûködik rosszul.</P
><P
>Ha map-et kell frissítened, futtasd a NIS mester szerveren a <B
CLASS="COMMAND"
>make</B
>-et a
<TT
CLASS="LITERAL"
>/var/yp</TT
> könyvtárban. Ez frissíteni fogja a map-et, ha a forrásfájl
frissebb, majd át is adja a szolga szervereknek is. Kérlek ne
használd a map frissítéshez az <TT
CLASS="LITERAL"
>/var/yp</TT
>-et.</P
><P
>Esetleg átszerkesztheted a root crontabját *a szolga*
szerveren és hozzáadni a következõ sorokat:</P
><P
>&#13;<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>      20 *    * * *    /usr/lib/yp/ypxfr_1perhour
      40 6    * * *    /usr/lib/yp/ypxfr_1perday
      55 6,18 * * *    /usr/lib/yp/ypxfr_2perday</PRE
></FONT
></TD
></TR
></TABLE
>

Ez biztosítani fogja, hogy a legtöbb NIS map frissüljön, még ha ki
is maradt egy frissítés, ha a mester szerver frissítésekor a szolga le
volt kapcsolva.</P
><P
>A késõbbiekben bármikor hozzáadhatsz új szolgát. Elõször biztosítsd,
hogy az új szolga szervernek legyen jogosultsága a NIS mester
szerverhez kapcsolódni, majd futtasd a

<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    % /usr/lib/yp/ypinit -s masterhost</PRE
></FONT
></TD
></TR
></TABLE
>

programot az új szolgán. A mester szerveren add hozzá a
<TT
CLASS="FILENAME"
>/var/yp/ypservers</TT
>-hez az új szolga szerver nevét
és futtasd a <B
CLASS="COMMAND"
>make</B
>-et a
<TT
CLASS="LITERAL"
>/var/yp</TT
> könyvtárban a map frissítéséhez.</P
><P
>Ha korlátozni szeretnéd a felhasználók hozzáférését a NIS
szerveredhez, a NIS szerveredet kliensként is üzemeltetned kell úgy,
hogy elindítod az ypbind-et, és hozzáadod az <TT
CLASS="FILENAME"
>/etc/passwd</TT
> jelszó
fájlhoz _félúton_ a plusz bejegyzéseket. A könyvtár függvények
figyelmen kívül hagyják a hagyományos bejegyzéseket az elsõ NIS
bejegyzés után és a többit NIS-en keresztül szerzik meg. Így a NIS
hozzáférés-szabályok karbantartottak.
Például:</P
><P
>&#13;<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>     root:x:0:0:root:/root:/bin/bash
     daemon:*:1:1:daemon:/usr/sbin:
     bin:*:2:2:bin:/bin:
     sys:*:3:3:sys:/dev:
     sync:*:4:100:sync:/bin:/bin/sync
     games:*:5:100:games:/usr/games:
     man:*:6:100:man:/var/catman:
     lp:*:7:7:lp:/var/spool/lpd:
     mail:*:8:8:mail:/var/spool/mail:
     news:*:9:9:news:/var/spool/news:
     uucp:*:10:50:uucp:/var/spool/uucp:
     nobody:*:65534:65534:noone at all,,,,:/dev/null:
     +miquels::::::
     +:*:::::/etc/NoShell
     [ All normal users AFTER this line! ]
     tester:*:299:10:Just a test account:/tmp:
     miquels:1234567890123:101:10:Miquel van Smoorenburg:/home/miquels:/bin/zsh</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><P
>Bár a "tester" felhasználó létezik, a parancsértelmezõje azonban az
/etc/NoShell.  miquels-nek rendes hozzáférése lesz.&#13;</P
><P
>Alternatívaként átszerkesztheted a <TT
CLASS="FILENAME"
>/var/yp/Makefile</TT
> fájlt és
beállíthatod, hogy a NIS másik jelszó forrás fájlt használjon.
Nagy rendszereken a NIS jelszó és csoport fájlok általában az
<TT
CLASS="LITERAL"
>/etc/yp/</TT
> könyvtárban vannak. Ha a hagyományos eszközöket nem használhatók
a <TT
CLASS="LITERAL"
>passwd</TT
>, <TT
CLASS="LITERAL"
>chfn</TT
>, <TT
CLASS="LITERAL"
>adduser</TT
> fájlokat adminisztrálására.
Ehhez saját készítésû programokra lesz szükséged.</P
><P
>Habár az <TT
CLASS="LITERAL"
>yppasswd</TT
>, <TT
CLASS="LITERAL"
>ypchsh</TT
> és az <TT
CLASS="LITERAL"
>ypchfn</TT
> természetesen mûködni fog.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN471">9.2. Az yps szerver program

&#13;</H3
><P
>Az "yps" NIS szerver beállításához tanulmányozd az elõzõ fejezetet.
Az "yps" szerver beállítása hasonló, _de_ nem pontosan ugyanolyan,
tehát légy óvatos, mielõtt megpróbálod az "ypserv" utasításait az
"yps"-re alkalmazni! Az "yps"-t nem támogatja egyik szerzõ sem, és
néhány biztonsági rést is tartalmaz. Tényleg nem kellene használod!</P
><P
>Az "yps" NIS szerver szoftvert megtalálod az alábbi címeken:</P
><P
>&#13;<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>  Hely                  Könyvtár                    Fájl neve

  ftp.lysator.liu.se    /pub/NYS/servers            yps-0.21.tar.gz
  ftp.kernel.org        /pub/linux/utils/net/NIS    yps-0.21.tar.gz</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN481">9.3. Az rpc.ypxfrd program

&#13;</H3
><P
>Az rpc.ypxfrd-t nagyon nagy NIS map fájlok esetén használjuk a mester és
szolga NIS szerverek közötti adatátvitel gyorsítására. Ha egy NIS
szolga szerver olyan üzenetet kap, hogy új map készült, elindítja az
ypxfr-t, hogy letöltse azt. Az ypxfr elolvassa a mester szerver
map-jét az yp_all() függvény segítségével. Ez a folyamat több percet
is igénybe vehet, ha nagyon nagy map fájlokról van szó, amit az adatbázis
könyvtárban kell tárolni.</P
><P
>Az rpc.ypxfrd szerver úgy gyorsítja az átvitel folyamatát, hogy a NIS
szolga szervereknek engedélyezi, hogy egyszerûen lemásolják a szerver
map fájlait, és ne kelljen újra felépíteniük a sajátjukat. Az
rpc.ypxfrd RPC-alapú fájl átviteli protokollt használ, tehát nincs
szükség új map építésére.</P
><P
>Az rpc.ypxfrd indítható az inetd-bõl, azonban mivel nagyon lassan
indul el, célszerû az ypserv segítségével indítani. Az rpc.ypxfrd-t
csak a mester NIS szerveren kell elindítanod.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN490">9.4. Az rpc.yppasswdd program

&#13;</H3
><P
>Amikor a felhasználók megváltoztatják a jelszavukat, a NIS jelszó
adatbázis, és feltehetõleg az összes, ettõl a NIS jelszó adatbázistól
függõ többi adatbázis frissítésre szorul. Az "rpc.yppasswdd" program
egy olyan szerver, ami a jelszóváltozásokat kezeli, és gondoskodik
arról, hogy a NIS információ helyesen frissüljön. Az rpc.yppasswdd
már az ypserv része. Nincs szükséged régi, különálló
yppasswd-0.9.tar.gz-re, vagy yppasswd-0.10.tar.gz-re, és nem is
javallott a továbbiakban használatuk.</P
><P
>Az rpc.yppasswdd démont csak a mester NIS szerveren kell elindítanod.
Alapértelmezés szerint a felhasználók nem változtathatják meg a teljes
nevüket, illetve a parancsértelmezõjüket. Engedélyezheted ezek
megváltoztatását a -e chfn vagy -e chsh kapcsolókkal.</P
><P
>Ha a jelszó vagy az árnyékfájlok nem az /etc könyvtárban vannak,
a -D kapcsolót is használnod kell. Például ha minden forrásfájlt az
/etc/yp könyvtárba tettél, és szeretnéd engedélyezni a felhasználók
számára, hogy megváltoztathassák a parancsértelmezõjüket, a következõ
paraméterekkel kell indítanod az rpc.yppasswdd démont:</P
><P
>&#13;<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>   rpc.yppasswdd -D /etc/yp -e chsh</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><P
>vagy</P
><P
>&#13;<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>   rpc.yppasswdd -s /etc/yp/shadow -p /etc/yp/passwd -e chsh</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><P
>Nincs más tennivaló, már csak meg kell gyõzõdnöd róla, hogy az
<TT
CLASS="LITERAL"
>rpc.yppasswdd</TT
> ugyanazt az fájlt használja, mint a
<TT
CLASS="LITERAL"
>/var/yp/Makefile</TT
>. A hibákat a syslog naplózza.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="VERIFICATION">10. A NIS/NYS telepítésének ellenõrzése

&#13;</H2
><P
>Ha minden rendben (ahogy lennie kellene), néhány egyszerû utasítással
ellenõrizheted a telepítést. Feltételezve, hogy például a jelszó
fájlodat a NIS adja, a</P
><P
>&#13;<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    % ypcat passwd</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><P
>utasításnak vissza kell adnia a NIS jelszófájlod tartalmát. A</P
><P
>&#13;<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    % ypmatch userid passwd</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><P
>utasítás (ahol a userid egy találomra választott felhasználó
azonosítója) vissza kell, hogy adja a felhasználó NIS jelszó fájlban lévõ
bejegyzését. Az "ypcat" és az "ypmatch" programokat a
hagyományos NIS vagy NYS disztribúciód tartalmazza.</P
><P
>Ha egy felhasználó nem tud bejelentkezni, indítsd el a következõ
programot a kliensen:


<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>#include &#60;stdio.h&#62;
#include &#60;pwd.h&#62;
#include &#60;sys/types.h&#62;

int
main(int argc, char *argv[])
{
  struct passwd *pwd;

  if(argc != 2)
    {
      fprintf(stderr,"Használat: getwpnam felhasználónév\n");
      exit(1);
    }

  pwd=getpwnam(argv[1]);

  if(pwd != NULL)
    {
      printf("név......: [%s]\n",pwd-&#62;pw_name);
      printf("jelszó...: [%s]\n",pwd-&#62;pw_passwd);
      printf("felh. id.: [%d]\n", pwd-&#62;pw_uid);
      printf("csoport id: [%d]\n",pwd-&#62;pw_gid);
      printf("gecos....: [%s]\n",pwd-&#62;pw_gecos);
      printf("könyvtár.: [%s]\n",pwd-&#62;pw_dir);
      printf("shell....: [%s]\n",pwd-&#62;pw_shell);
    }
  else
    fprintf(stderr,"Az \"%s\" felhasználó nem található!\n",argv[1]);

  exit(0);
}</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><P
>Ezt a programot futtatva a felhasználó nevével, mint paraméterrel,
kiírja mindazt az információt, amit a getpwnam függvény ad vissza erre
a felhasználóra. Ennek meg kell mutatnia, hogy melyik bejegyzés hibás.
A leggyakoribb probléma az, hogy a jelszó mezõ "*"-al felül lett írva.</P
><P
>A GNU C 2.1-es könyvtár (glibc 2.1) tartalmaz egy getent eszközt. Ezt
használhatod a fenti program helyett egy ilyen rendszeren.
Kipróbálhatod:

<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>   getent passwd</PRE
></FONT
></TD
></TR
></TABLE
>

vagy

<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>   getent passwd login</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MAPS">11. NIS térképek készítése és karbantartása&#13;</H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="AEN530">11.1. Új NIS térkép létrehozása&#13;</H3
><P
>Az elsõ NIS térképek a</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    % /usr/lib/yp/ypinit -m</PRE
></FONT
></TD
></TR
></TABLE
><P
>parancs futtatásával hozhatók létre.
Ezt a NIS mester szerver létrehozásakor
kell tenni. A "NIS szerver beállítása" fejezetben
bõvebben olvashatsz errõl.
Új térkép hozzáadása, illetve egy régi eltávolítása,
a <TT
CLASS="LITERAL"
>/var/yp/Makefile</TT
>
szerkesztésével lehetséges: meg kell változtatnod az
<TT
CLASS="LITERAL"
>all:</TT
> kezdetû sort.
Add hozzá vagy távolítsd el a szükséges/szükségtelen szabály nevét.</P
><P
>Ha eltávolítasz egy térkép bejegyzést, a hozzá tartozó fájlokat is törölnöd kell.</P
><P
>A változtatások után már csak a</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    % make -C /var/yp</PRE
></FONT
></TD
></TR
></TABLE
><P
>parancsot kell futtatnod és elkészülnek a térképeid.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN543">11.2. NIS térképek frissítése&#13;</H3
><P
>Ha megváltoztatod a NIS térképek forrásadatait, (mondjuk egy új felhasználót
veszel fel a passwd fájlba) akkor újra kell generálnod a NIS térképeket is.
Ezt egyszerûen a</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    % make -C /var/yp</PRE
></FONT
></TD
></TR
></TABLE
><P
>parancs kiadásával érheted el. Ez az utasítás megnézi mely források változtak,
elkészíti az új téképeket és tudatja az ypserv-vel a változásokat.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN550">11.3. A térképfájl bejegyzéseinek hossza&#13;</H3
><P
>A NIS protokoll 1024 karakterre korlátozza egy-egy bejegyzés hosszát.
Nem lehet tehát csak úgy megváltoztatni ezt az értéket, és újrafordítani a rendszert.
Minden NIS v2-t használó rendszer 1024 byte-nál rövidebb kulcs és adatértékeket vár;
ha hirtelen megnöveled a kliens és szerver YPMAXRECORD változójának méretét,
megszakad az átjárhatóság a NIS-t használó rendszereid között.
Ahhoz, hogy ez így mûködjön, el kellene menned minden szoftvergyártóhoz,
akik rendszerei támogatják a NIS-t és rá kellene venned õket, hogy változtassák
már meg az 1024 byte-os méretet, méghozzá egyszerre, és egyformán... elég csekély
a valószínûsége annak, hogy eredményes lesz az utad.</P
><P
>A glibc 2.1-tõl kezdve a glibc NIS alkalmazásain ez a korlát megszûnt.
Vagyis lehetségessé vált, hogy Linux rendszereken használhassunk hosszabb 
bejegyzéseket is, de csak ha nincs más típusú kliens, vagy szerver a rendszerben.</P
><P
>Ahhoz, hogy hosszabb bejegyzéseket használhass a NIS térképeken, 
hozzá kell adnod a <TT
CLASS="LITERAL"
>/var/yp/Makefile</TT
>-ban
levõ <TT
CLASS="LITERAL"
>makedbm</TT
> bejegyzéshez a 
<TT
CLASS="LITERAL"
>--no-limit-check</TT
> opciót.</P
><P
>Az eredmény valami ilyesmi:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>DBLOAD = $(YPBINDIR)/makedbm -c -m `$(YPBINDIR)/yphelper --hostname` --no-limit-check</PRE
></FONT
></TD
></TR
></TABLE
><P
>FIGYELEM! Ez törést okoz a NIS protokollban, és bár a Linux támogatja,
nem minden Linux alatt futó program tud a változásokkal együtt dolgozni.</P
><P
>Van egy másik útja is a probléma megoldásának. Ken Cameron ötletébõl ered 
és a <TT
CLASS="FILENAME"
>/etc/group</TT
> fájl bejegyzéseit érinti:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>1. A bejegyzést több sorban helyezzük el úgy, hogy minden csoport egymástól
   kissé eltérõ nevekkel szerepeljen. 
2. A GID maradjon ugyanaz minden csoportnál

3. Legyen az elsõ bejegyzés a jó csoportnév és GID
          (Én nem teszek felhasználónevet ide)

Amikor aztán a program felhasználó szerint haladva elolvassa a GID-et, majd
visszafelé haladva megáll az elsõ egyezõ GID-nél és beolvassa a hozzá
tartozó felhasználónevet. Ronda, de mûködik!    </PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="REBOOT">12. Túlélõcsomag újraindítás esetére</H2
><P
>Ha egyszer beállítottad és mûködõképessé tetted a NIS rendszered, mind a kliens,
mind pedig a szerver oldalról, meg kell gyõzõdnöd arról is, hogy ez az állapot
fennmarad-e a rendszer újraindításakor is.</P
><P
>Két elkülönülõ dolgot kell ellenõrizned:
Az indító szkript meglétét, és a NIS domainnév helyes tárolását.</P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN570">12.1. A NIS indító (init) szkript</H3
><P
>A Linux disztribúciód szerinti init-szkript könyvtárban
(leggyakrabban: <TT
CLASS="FILENAME"
>/etc/init.d</TT
>, 
<TT
CLASS="FILENAME"
>/etc/rc.d/init.d </TT
>,<TT
CLASS="FILENAME"
>/sbin/init.d</TT
>)
ellenõrizd, hogy megvan-e a NIS indításához szükséges szkript.
Általában <TT
CLASS="FILENAME"
>ypbind</TT
> vagy <TT
CLASS="FILENAME"
>ypclient</TT
> néven találod meg.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN578">12.2. NIS domainnév</H3
><P
>Talán az egyik legfontosabb kérdés, ami néhányunknál felmerülhet a NIS-sel
kapcsolatban, hogy a NIS domain újraindítás után elérhetõ-e vagy sem.
Solaris 2.x rendszereknél a NIS domaina t az </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>   /etc/defaultdomain</PRE
></FONT
></TD
></TR
></TABLE
><P
>fájlban kell tárolni.
A legtöbb Linux disztribúció nem használja ezt a fájlt.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN583">12.3. Linux-disztribúció specifikus megjegyzések</H3
><P
>Mostanáig a következõ információk állnak rendelkezésre a Linux disztribúciók
NIS domainnév tárolásával kapcsolatban:</P
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="AEN586">12.3.1. Caldera 2.x</H4
><P
>A Caldera az <TT
CLASS="FILENAME"
>/etc/nis.conf</TT
> fájlt használja,
formátuma a normál <TT
CLASS="FILENAME"
>/etc/yp.conf</TT
>-val megegyezõ.</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="AEN591">12.3.2. Debian</H4
><P
>A Debian a Sun-os <TT
CLASS="FILENAME"
>/etc/defaultdomain</TT
>-t használja.</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="AEN595">12.3.3. Red Hat Linux 6.x and 7.x, 8x és 9</H4
><P
>Az <TT
CLASS="FILENAME"
>/etc/sysconfig/network</TT
> fájlban
található <B
CLASS="COMMAND"
>NISDOMAIN</B
> változóval állíthatjuk be a körzetnevet.</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="AEN600">12.3.4. SuSE Linux 6.x and 7.x</H4
><P
>Az <TT
CLASS="FILENAME"
>/etc/rc.config</TT
> fájlban az <B
CLASS="COMMAND"
>YP_DOMAINNAME</B
> változót módosíthatod, majd futtatni kell a <B
CLASS="COMMAND"
>SuSEconfig</B
>-ot.</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="AEN606">12.3.5. SuSE Linux 8.x és késõbbi</H4
><P
>A 8.0-tól kezdve a SuSE is a SUN-os rendszert követi,
vagyis <TT
CLASS="FILENAME"
>/etc/defaultdomain</TT
>.</P
></DIV
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="RPASSWDD">13. Jelszóváltás az rpasswd program segítségével&#13;</H2
><P
>A NIS jelszó megváltoztatásának általános módja az
<B
CLASS="COMMAND"
>yppasswd</B
> program meghívása, ez néhány rendszeren
ez mindössze a <B
CLASS="COMMAND"
>passwd</B
> program alias neve.
Ez a parancs az yppasswd protokollt használja, emellett szükséges
az <B
CLASS="COMMAND"
>rpc.yppasswdd</B
> folyamatnak futnia a NIS
master szerveren. A protokoll eléggé idejétmúlt, a régi jelszót
sima szövegként küldi át a hálózaton. Ez nem problémás,
amennyiben a jelszó sikeresen megváltozik. Abban az esetben a régi jelszót
felváltja egy új. De ha a jelszóváltás sikertelen, úgy egy támadó
használhatja a helyes jelszót, és beléphet a felhasználó nevében.
Még rosszabb, ha a rendszeradminisztrátor változtatja meg egy
másik felhasználó jelszavát, ekkor a NIS master szerver root
jelszava továbbítódik sima szövegként a hálózaton. És az ebben
az esetben nem fog megváltozni.</P
><P
>Egyfajta megoldás az, ha nem az yppasswd programot használod
jelszóváltásra. Ehelyett jól használható az <B
CLASS="COMMAND"
>rpasswd</B
>
parancs a <TT
CLASS="LITERAL"
>pwdutils</TT
> csomagból.</P
><P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>  Webhely         Könyvtár                           Fájl neve

  ftp.kernel.org  /pub/linux/utils/net/NIS           pwdutils-2.3.tar.gz
  ftp.suse.com    /pub/people/kukuk/pam/pam_pwcheck  pam_pwcheck-2.2.tar.bz2
  ftp.suse.com    /pub/people/kukuk/pam/pam_unix2    pam_unix2-1.16.tar.bz2</PRE
></FONT
></TD
></TR
></TABLE
></P
><P
>Az <B
CLASS="COMMAND"
>rpasswd</B
> biztonságos SSL kapcsolaton keresztül 
megváltoztatja egy felhasználó jelszavát egy távoli szerveren.
Egy átlagos felhasználó csak a saját jelszavát változtathatja meg,
ha az adminisztrátor jelszavát is tudja, akkor pedig bárkiét, ha 
meghívja az <B
CLASS="COMMAND"
>rpasswd</B
> programot az -a kapcsolóval.</P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN626">13.1. A szerver beállítása&#13;</H3
><P
>A szervernek az elsõsorban tanúsítványra van szüksége, annak alapértelmezett
fájlneve az <TT
CLASS="FILENAME"
>/etc/rpasswdd.pem</TT
>. Ezt a következõ
paranccsal hozhatod létre:
<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>openssl req -new -x509 -nodes -days 730 -out /etc/rpasswdd.pem -keyout /etc/rpasswdd.pem</PRE
></FONT
></TD
></TR
></TABLE
></P
><P
>Egy PAM beállítófájlra is szüksége van az <B
CLASS="COMMAND"
>rpasswdd</B
> programnak.
Ha a NIS felhasználói jelszavak az <TT
CLASS="FILENAME"
>/etc/passwd</TT
> fájlban vannak,
a következõ példa jó kiindulási alapot nyújt a beállításhoz:

<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>#%PAM-1.0
auth     required       pam_unix2.so
account  required       pam_unix2.so
password required       pam_pwcheck.so
password required       pam_unix2.so    use_first_pass use_authtok
password required       pam_make.so     /var/yp
session  required       pam_unix2.so</PRE
></FONT
></TD
></TR
></TABLE
></P
><P
>Ha a NIS jelszótérképek forrása másutt tárolódik (például /etc/yp), 
úgy a pam_unix2 <TT
CLASS="LITERAL"
>nisdir</TT
> kapcsolója 
használható a forrásfájl megkeresésére:

<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>#%PAM-1.0
auth     required       pam_unix2.so
account  required       pam_unix2.so
password required       pam_pwcheck.so  nisdir=/etc/yp
password required       pam_unix2.so    nisdir=/etc/yp use_first_pass use_authtok
password required       pam_make.so     /var/yp
session  required       pam_unix2.so</PRE
></FONT
></TD
></TR
></TABLE
></P
><P
>Most indítsd el az <B
CLASS="COMMAND"
>rpasswdd</B
> démont a NIS mester szerveren.</P
><P
>A PAM modulokban történt jelszóbeállítás után az
<B
CLASS="COMMAND"
>rpasswdd</B
> is használható jelszóváltásra
NIS+, LDAP vagy más, a PAM modul által támogatott szolgáltatásokhoz.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN644">13.2. A kliens beállítása&#13;</H3
><P
>Minden egyes kliensen csak az 
<TT
CLASS="FILENAME"
>/etc/rpasswd.conf</TT
> fájlban vannak 
a szükséges szerverek nevei. Ha a szerver nem az alapértelmezett
portot használja, akkor azt be kell állítani:</P
><P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># az rpasswdd az master.example.com gépen fut
server master.example.com
# Port 774 az alapértelmezett
port 774</PRE
></FONT
></TD
></TR
></TABLE
></P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="TROUBLESHOOTING">14. Általános, valamint NIS problémák elhárítása

&#13;</H2
><P
>Íme néhány általános, felhasználók által jelzett probléma:</P
><P
>&#13;<P
></P
><OL
TYPE="1"
><LI
><P
>A 4.5.19-eshez szállított programkönyvtárak hibásak. A NIS nem mûködik vele.&#13;</P
></LI
><LI
><P
>Ha a 4.5.19-es könyvtárakat 4.5.24-re frissíted, akkor a su
program megszakad. Meg kell szerezned a su programot az 1.2.0-s
slackware-bõl. Minõ véletlen, hogy pont ugyaninnen szerezheted be a
frissített programkönyvtárakat is.&#13;</P
></LI
><LI
><P
>Amikor egy NIS szervert lekapcsolnak, majd újra bekapcsolnak, az
ypbind a következõ üzenettel indul:


<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    yp_match: clnt_call:
    RPC: Unable to receive; errno = Connection refused</PRE
></FONT
></TD
></TR
></TABLE
>

és a bejelentkezéseket megtagadja azoknak, akik a NIS adatbázisban
regisztrálva vannak. Megpróbálkozhatsz root felhasználóként bejelentkezni, és
legyilkolni az ypbind-et, majd újra elindítani. Egy 3.3-as, vagy újabb
verziójú ypbind frissítés is segíthet.&#13;</P
></LI
><LI
><P
>Miután a libc-t 5.4.20-asnál magasabb verziószámra frissítetted, az
YP eszközök nem mûködnek tovább. 1.2-es, vagy frissebb yp-tools-ra
lesz szükséged az 5.4.21-es, vagy frissebb libc-hez és a glibc 2.x-hez.
Korábbi libc verziójú libc-hez 2.2-es yp-clients kell. Az yp-
tools 2.x-nek minden programkönyvtárral mûködnie kell.</P
></LI
><LI
><P
>A 5.4.21 - 5.4.35 számú libc-ben az yp_maplist hibás, 5.4.36-es,
vagy frissebb változatra van szükséged, vagy néhány YP program,
mint például az ypwhich segfault hibával leáll.&#13;</P
></LI
><LI
><P
>A libc 5 hagyományos NIS-el nem támogatja a NIS feletti árnyék
jelszavakat. libc5+NYS-re vagy glibc 2.x-re van szükséged.</P
></LI
><LI
><P
>Az ypcat shadow nem mutatja a shadow map-et. Ez így helyes, az árnyék
térkép neve shadow.byname, nem shadow.</P
></LI
><LI
><P
>A Solaris nem mindig használ privilegizált kapukat, tehát ne használj
password mangling-et ha Solaris kliensed is van.</P
></LI
></OL
>&#13;</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="FAQ">15. Gyakran Ismételt Kérdések&#13;</H2
><P
>Mostanra a legtöbb kérdésedre válasz kellett kapnod. Ha még
mindig lenne megválaszolatlan kérdésed, küldj egy üzenetet a</P
><P
>&#13;<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    comp.os.linux.networking</PRE
></FONT
></TD
></TR
></TABLE
>&#13;</P
><P
>hírcsoportba.</P
></DIV
></DIV
></BODY
></HTML
>
