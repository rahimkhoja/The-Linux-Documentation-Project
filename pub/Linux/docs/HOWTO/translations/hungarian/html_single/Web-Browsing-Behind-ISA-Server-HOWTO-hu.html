<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-2">

 <TITLE>Böngészés ISA szerver mögül HOGYAN</TITLE>
</HEAD>
<BODY>
<H1>Böngészés ISA szerver mögül HOGYAN</H1>

<H2>Írta: Raheel Abdul Hameed (<CODE>raheel at raheelhameed dot com</CODE>)</H2>v1.0, 2003 április - Elsõ kiadás, az LDP által ellenõrizve
<HR>
<EM>     Ha a Linux kliensed egy Windows-alapú ISA szerverhez csatlakozik, akkor ez a leírás segít a rendszert úgy beállítani, hogy a linuxos géprõl böngészni tudjunk.
    Azért írtam meg ezt a cikket, mert hasonló problémákat tapasztaltam, és egy kis kutatás után
    találtam néhány megoldást arra, hogyan használhatom a webet linuxos kliensemen. Itt van hát
    a leírás, amely remélem hasznos információkkal szolgál. Mindenféle visszajelzést
    szívesen fogadok, különösen folt (patch) formájában. :)       </EM>
<HR>
<H2><A NAME="s1">1. Bevezetés</A></H2>

<P>Ez a fejezet tartalmazza a szerzõi jogokkal, a szükséges elõfeltételekkel, a dokumentum használatával valamint az új verziók elérhetõségével kapcsolatos információkat.</P>

<H2><A NAME="ss1.1">1.1 Szerzõi jogok</A>
</H2>

<P>A dokumentum jogos tulajdonosa Raheel Abdul Hameed. Copyright (c) 2003 </P>
<P>A dokumentum a Free Software Foundation által kiadott GNU Free Documentation License 1.2-es vagy újabb verziójában foglalt feltételek keretein belül másolható, terjeszthetõ és/vagy módosítható; invariáns fejezet, elsõ borítólapszöveg és hátsó borítólapszöveg nincsen.</P>
<P>A licenc egy másolata megtalálható a  
<A HREF="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License</A> címen.</P>

<H2><A NAME="ss1.2">1.2 Jogi nyilatkozat</A>
</H2>

<P>A dokumentumban található információkat saját felelõsségre használjuk. A dokumentum tartalmára vonatkozóan semmilyen felelõsséget nem vállalok. A dokumentumban lévõ elképzelések, példák és/vagy minden más tartalmat teljes mértékben a saját felelõsségünkre használjuk. </P>
<P>Minden szerzõi jog a tulajdonosoké, hacsak arról konkrétan másképpen nem rendelkeznek. Ebben a dokumentumban szereplõ kifejezések használata semmi estere sem lehetnek hatással termék védjegyre vagy szolgáltatói védjegyre. </P>
<P>Bizonyos termékek vagy védjegyek megnevezése jóváhagyásként (hozzájárulásként) nem tekinthetõek.</P>
<P>Erõsen ajánlott a rendszer biztonsági mentése nagyobb
telepítések elõtt. Ezen kívül ajánlott a rendszeres idõközönkénti biztonsági mentés.</P>

<H2><A NAME="ss1.3">1.3 A dokumentum legújabb változata</A>
</H2>

<P>A dokumentum legújabb változata a  
<A HREF="http://tldp.org/HOWTO/Web-Browsing-Behind-ISA-Server-HOWTO.html">http://tldp.org/HOWTO/Web-Browsing-Behind-ISA-Server-HOWTO.html</A> címen érhetõ el.</P>
<H2><A NAME="ss1.4">1.4 Elõfeltételek</A>
</H2>

<P> 
Jelen dokumentum feltételezi, hogy tudunk egy létezõ fájlt szerkeszteni egy általunk használt
szerkesztõ programmal, mivel a dokumentum egy konfigurációs fájl szerkesztésérõl szól.
Ezen kívül elõnyös, de nem szükséges az ISA szerver beállításának ismerete.</P>
<H2><A NAME="ss1.5">1.5 A dokumentum használata</A>
</H2>

<P> Jelen dokumentum az alábbi esetekben próbál segíteni:
<UL>
<LI> Rendelkezünk egy proxyként üzemelõ windowsos  géppel, ami egy ISA Szervert
futtat és rendelkezik internet kapcsolattal.</LI>
<LI> Rendelkezünk egy az ISA szerverhez kapcsolódó Linux klienssel, amelyen
böngészni szeretnénk.</LI>
<LI> Elegünk van a Windows alatti böngészésbõl.</LI>
<LI> Nem vagyunk normálisak és minden létezõ HOGYANt elolvasunk.</LI>
</UL>
</P>
<H2><A NAME="ss1.6">1.6 Fordítások</A>
</H2>

<P> Eddig nem készült fordítás.</P>
<P> Ha készítesz, vagy tudomásod van eme dokumentum fordításáról, úgy kérlek e-mailben jelezd, én pedig frissítem ezt a fejezetet.</P>
<H2><A NAME="ss1.7">1.7 Magyar fordítás</A>
     </H2>

<P>A magyar fordítást 
<A HREF="mailto:vape[kukac]maffia[pont]hu">Vadon Péter</A> készítette (2004.06.07).
A lektorálást 
<A HREF="mailto:dacas@freemail.hu_NO_SPAM">Daczi László</A> végezte el (2004.06.07).
Eme dokumentum legfrissebb változata megtalálható a 
<A HREF="http://tldp.fsf.hu/index.html">Magyar Linux Dokumentációs Projekt</A> honlapján.</P>
<H2><A NAME="s2">2. ISA szerver</A></H2>




<H2><A NAME="ss2.1">2.1 Néhány szó az ISA szerverrõl</A>
</H2>

<P>Az ISA szerver számos hálózati funkciót lát el, például tûzfal,
Web-gyorstár, jogosultság-alapú adminisztráció, dinamikus IP szûrés, virtuális magánhálózat szolgáltatás (Virtual Private Network; VPN),
betörési kísérlet detektálás, hálózati címfordítás (Network Adress Translation; NAT) és jelentések készítése (reporting).
Míg Windows kliensek számára robusztus megoldás, Linux felhasználók számára maga a kínszenvedés, mivel a legtöbb Linux alapú böngészõ
nem igazán használható ISA szerver mögül. Azért használom a "nem igazán" kifejezést, mert létezik néhány megoldás.</P>
<H2><A NAME="ss2.2">2.2 Miért nem mûködik?</A>
</H2>

<P>Windows alapú klienst futtatva az ISA szerver mögött észrevehetjük, hogy normális esetben
csak az Internet Explorert használva böngészhetünk, más böngészõkkel - például Netscape - nem.
Ennek az az oka, hogy az ISA szerver egy "integrált hitelesítés" nevû módszert
használ. Amikor az Internet Explorer kapcsolódik az ISA szerverhez, hogy egy weboldalt lekérjen,
minden egyes kéréssel együtt elküld egy kódot, ami alapján a szerver azonosít minket, mint
létezõ tartomány-felhasználókat. [Ennek ellenõrzésére lehallgathatunk néhány csomagot
böngészés közben, a kérés fejlécébõl kiderül, amit a böngészõnk küld az ISA szerver felé.] 
Ezt a fajta hitelesítést más böngészõk nem támogatják, ezért a legtöbb nem használható. </P>
<P>A következõ fejezetek bemutatják, hogyan tegyük képessé a Linux alapú
böngészõnket a szörfözésre.</P>
<H2><A NAME="s3">3. Elsõ módszer: Az alapvetõ hitelesítés (Basic Authentication) beállítása</A></H2>

<P>Mint fentebb megtudtuk, az ISA szerveren beállított integrált hitelesítés miatt
a harmadik fél által gyártott böngészõk nem mûködnek. Ebben az esetben használható egy
másik hitelesítési eljárás, az alapvetõ hitelesítés (Basic Authentication). Ezt a legtöbb böngészõ - és
ami a legfontosabb - az ISA szerver is támogatja. Amennyiben a környezet megköveteli a nagyobb biztonságot,
ez a módszer nem ajánlott, mivel a felhasználónév és jelszó továbbításkor
csak gyengén titkosított.</P>
<P>Ehhez a módszerhez elengedhetetlen feltétel, hogy jogosultak legyünk az ISA szerver beállítására.
Ha nincs hozzáférésünk a szerver beállítókonzoljához, ugorjunk a következõ fejezetben található második módszerhez.</P>

<H2><A NAME="ss3.1">3.1 Szerver oldali beállítások</A>
</H2>

<P>Csak annyit kell tennünk, hogy elindítjuk az ISA beállítást (ISA Management), és megtesszük a következõ lépéseket:
<OL>
<LI> Kattintsunk a jobb-egérgombbal a szerverre, majd kattintsunk a "Beállításokra" (Properties).</LI>
<LI> A "Kimenõ kérések" (Outgoing Web Requests) fülön kattintsunk a megváltoztatandó beállított kapcsolatra, és kattintsunk a "Szerkesztésre" (Edit).</LI>
<LI> Kattintsunk az "Alapvetõ hitelesítésre" (Basic authentication), majd válasszuk ki azt a tartományt, amelyben a hitelesítendõ felhasználói fiókok vannak.</LI>
<LI> Most jön a Linux alapú böngészõ beállítása.</LI>
</OL>
</P>
<H2><A NAME="ss3.2">3.2 Kliens oldali beállítások</A>
</H2>

<P>Alapvetõen a Netscape böngészõt vesszük példának. </P>
<P>
<OL>
<LI> Indítsuk el a Netscape Communicator-t.</LI>
<LI> Kattintsunk a "Szerkesztés" (Edit) menü "Tulajdonságok" (Preferences) pontjára.</LI>
<LI> Nyissuk meg a "Haladó" (Advanced) beállítást, és kattintsunk a "Proxyk"-ra (Proxies); ekkor néhány beállítási lehetõséget látunk baloldalt.</LI>
<LI> Kattintsunk a "Kézi proxy beállítás"-ra (Manual proxy configuration), majd a "Nézet" (View) gombra.</LI>
<LI> írjuk be az ISA Szerver IP címét a HTTP: mezõbe és a port számot, amelyen megtalálható (általában 8080, beállításfüggõ).</LI>
<LI> Kattintsunk az "OK" gombra a változtatások mentéséhez.</LI>
<LI> A "Beállítások" (Preferences) párbeszédablakhoz jutunk vissza.</LI>
<LI> Kattintsunk az "OK" gombra a változtatások érvényesítéséhez.</LI>
</OL>
</P>
<P>A böngészõben nyissunk meg egy teszt url-t, ekkor meg kell adnunk a felhasználónevünket és jelszavunkat.
A felhasználónévhez írjuk be: TARTOMÁNY\FELHASZNÁLÓ, ahol a TARTOMÁNY a Windows tartomány neve, 
a FELHASZNÁLÓ pedig a létezõ felhasználónevünk a tartományban. A jelszóhoz írjuk be a 
felhasználónévhez tartozó jelszót. Kattintsunk az "OK" gombra. Például:</P>
<P>
<HR>
<PRE>
Felhasználónév: CABLENET\Raheel
Jelszó: Az_én_jelszavam

ahol CABLENET a tartományom, Raheel a felhasználónevem
és Az_én_jelszavam az érvényes jelszavam.
</PRE>
<HR>
</P>
<P>Ekkor a böngészõ be tudja tölteni az oldalt. Más böngészõ használata
esetén ellenõrizzük, hogy támogatja-e az alapvetõ hitelesítést (Basic Authentication).</P>

<H2><A NAME="s4">4. Második módszer: NTLM hitelesítõ proxy szerver (NTLM Authorization Proxy Server)</A></H2>

<P>Az NTLM hitelesítõ proxy szerver egy proxy szerver-szerû szoftver, ami csak az NTLM 
hitelesítést továbbítja a böngészõ és az ISA Szerver között, így a szerver azt "hiszi",
hogy a böngészõnk Internet Explorer. Ezt úgy éri el, hogy hozzáadja a kérések fejlécéhez az NTLM hitelesítést 
szolgáló karakterláncokat. A programot Dmitry Rozmanov írta Python nyelven [szép munka!].
Megtalálható a 
<A HREF="http://www.python.org">www.python.org</A> webhelyen. 
A legtöbb Linux terjesztésnek része egy Python értelmezõ (interpreter).</P>

<H2><A NAME="ss4.1">4.1 Az NTLMAPS beszerzése</A>
</H2>

<P>Az NTLMAPS honlapja a 
<A HREF="http://ntlmaps.sourceforge.net/">http://ntlmaps.sourceforge.net/</A> címen található meg.
A letöltéseket a 
<A HREF="http://sourceforge.net/project/showfiles.php?group_id=69259">http://sourceforge.net/project/showfiles.php?group_id=69259</A> címen találhatjuk meg közvetlenül. A dokumentum írásakor a legfrissebb verzió a 0.9.8.</P>
<H2><A NAME="ss4.2">4.2 Az NTLMAPS telepítése</A>
</H2>

<P>Ha letöltöttük az NTLMAPS-t, kicsomagolhatjuk egy nekünk tetszõ könyvtárba:</P>
<P>
<HR>
<PRE>
        
tar xzvf apsxxx.tar.gz
cd apsxxx

ahol "xxx" a verziószám.
</PRE>
<HR>
</P>
<H2><A NAME="ss4.3">4.3 Gyors beállítás</A>
</H2>

<P>Kedvenc programunkkal szerkesszük a server.cfg fájlt. Keressük meg a következõ sorokat:</P>
<P>
<HR>
<PRE>
        
LISTEN_PORT:5865

# If you want APS to authenticate you at WWW servers using NTLM then just leave this
# value blank like PARENT_PROXY: and APS will connect to web servers directly.
# And NOTE that NTLM cannot pass through another proxy server.
PARENT_PROXY:your_parentproxy

PARENT_PROXY_PORT:8080
</PRE>
<HR>
</P>
<P>Alapbeállításban az NTLMAPS a 5865-ös portot figyeli.  Ezt tetszõleges port számra 
átírhatjuk. A "your_parentproxy" helyére írjuk be az ISA szerver IP címét. 
Az ISA szerveren beállított portot adjuk meg a PARENT_PROXY_PORT paraméterben.</P>

<P>Most a következõ sorokat keressük:</P>
<P>
<HR>
<PRE>
        
# Windows Domain.
# NOTE: it is not full qualified internet domain, but windows network domain.
NT_DOMAIN:your_domain

# What user's name to use during authorization. It may differ form real current username.
USER:username_to_use

# Password. Just leave it blank here and server will request it at the start time.
PASSWORD:your_nt_password
</PRE>
<HR>
</P>
<P>Írjuk be a Windows tartománynevet a "your_domain" helyére, a felhasználónevet 
a "username_to_use" helyére és a jelszavunkat a "your_nt_password" helyére. Szerkesztés 
után mentsük a fájlt.</P>

<H2><A NAME="ss4.4">4.4 Az NTLMAPS futtatása</A>
</H2>

<P>Egyszerûen futtassuk a main.py fájlt, például:</P>
<P>
<HR>
<PRE>
        
./main.py
</PRE>
<HR>
        </P>
<P>Ekkor az NTLMAPS szerver fogadja a kapcsolatokat.</P>
<H2><A NAME="ss4.5">4.5 Kliens oldali beállítások</A>
</H2>

<P>Alapvetõen a Netscape böngészõt vesszük példának. </P>
<P>
<UL>
<LI> Indítsuk el a Netscape Communicator-t.</LI>
<LI> Kattintsunk a "Szerkesztés" (Edit) menü "Tulajdonságok" (Preferences) pontjára.</LI>
<LI> Nyissuk meg a "Haladó" (Advanced) beállítást, és kattintsunk a "Proxyk"-ra (Proxies); ekkor néhány beállítási lehetõséget látunk baloldalt.</LI>
<LI> Kattintsunk a "Kézi proxy beállítás"-ra (Manual proxy configuration), majd a "Nézet" (View) gombra.</LI>
<LI> írjuk be a saját IP címünket (127.0.0.1) a HTTP: mezõbe és azt a port számot, amelyen megtalálható az NTLMAPS (alapbeállításban 5865).</LI>
<LI> Kattintsunk az "OK" gombra a változtatások mentéséhez.</LI>
<LI> A "Beállítások" (Preferences) párbeszédablakhoz jutunk vissza.</LI>
<LI> Kattintsunk az "OK" gombra a változtatások érvényesítéséhez.</LI>
</UL>
</P>
<P>A böngészõben nyissunk meg egy teszt url-t, és látni fogjuk, hogy a böngészõ helyesen betölti az oldalt. Más böngészõ
használata esetén ellenõrizzük, hogy támogatja-e proxy használatát.</P>
<H2><A NAME="s5">5. Kiegészítés</A></H2>

<H2><A NAME="ss5.1">5.1 Hivatkozások</A>
</H2>

<P> Microsoft Tudásbázis 295667. cikk </P>
<P>
<A HREF="http://support.microsoft.com/?kbid=295667">http://support.microsoft.com/?kbid=295667</A></P>

<P> NTLM Authorization Proxy Server honlap
<A HREF="http://ntlmaps.sourceforge.net/">http://ntlmaps.sourceforge.net/</A></P>

<P> Python honlap
<A HREF="http://www.python.org">www.python.org</A></P>
<H2><A NAME="ss5.2">5.2 Köszönetnyilvánítás </A>
</H2>

<P>
<UL>
<LI><P> Külön köszönöm Tabatha Persadnak (tabatha[kukac]merlinmonroe[pont]com) a nyelvtani, szerkezeti, jelölésbeli hibák javítását.</P>
</LI>
<LI><P> Köszönöm Greg Fergusonnak (gferg[kukac]sgi[pont]com), Joy Goodreaunak (joyg[kukac]us[pont]ibm[pont]com) a dokumentum kiadásában való segítségnyújtását.</P>
</LI>
<LI><P> Köszönöm Faisal Khatrinak (fslkhatri[kukac]hotmail[pont]com) a dokumentum tartalmának ellenõrzését.</P>
</LI>
</UL>
</P>
</BODY>
</HTML>
