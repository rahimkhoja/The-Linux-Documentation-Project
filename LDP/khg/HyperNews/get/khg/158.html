
<HTML>
<HEAD>
<TITLE>Can I make syscall from inside a kernel module?</TITLE>
<LINK rel="owner" href="mailto:">
<SCRIPT LANGUAGE="JavaScript">
<!-- hide this

function help(message) {
  self.status = message;
  return true;
}
// stop hiding -->
</SCRIPT>

</HEAD>
<BODY>
<strong>The
HyperNews <a href="../khg.html">Linux KHG</a>
Discussion Pages</strong>
<hr>
<NOBR>





</NOBR><BR>
<H2><IMG src="../../../Icons/question.gif" ALT="Question:"
  WIDTH=15 HEIGHT=15
  ALIGN="bottom">
Can I make syscall from inside a kernel module?</H2>

<DL> <DD>
<NOBR>
<font size=+1><I>Forum:</I> <A HREF="../khg.html" >
 The Linux Kernel Hackers' Guide</A> </font><BR>
<I>Keywords:</I> syscall, module, lock physical page <BR>
<I>Date:</I> Tue, 18 Nov 1997 21:48:35 GMT <BR>
<I>From:</I> Shawn Chang &lt;<A HREF="mailto:shawnc@cs.berkeley.edu" >shawnc@cs.berkeley.edu</A>&gt; <BR>

</NOBR>
</DD> </DL>

<P>
<table border cellpadding=5 cellspacing=0 
 width="100%" BGCOLOR="#FFFFFF">
 <tr><td>

I have a silly question about syscalls.  I wrote a kernel module for user controlled page allocation, which needs to call some kernel function to lock some physical pages allocated, so they won't get swapped out.  After searching in the kernel source, I only found sys_mlock() in mm/mlock.c seem to be a good function for my purpose.  But sys_mlock() is not a directly exported kernel symbol, so my module can't call it directly.  Then I found that one of the pre-defined syscalls is actually mlock, so I was thinking if  I could make a syscall from inside my kernel module.  Is it possible to do that?  Otherwise, how do I export sys_mlock() so my kernel module will be able to call it?
<P>

Another related question.  My kernel module is accessed by user application through syscall(164,...).  Suppose I want to access some functions in the kernel module from some original kernel functions, such as do_page_faults() in fault.c.  What should I do?
<P>

Thanks in advance for any answers.
<P>

Shawn
<P>

</td></tr>
</table>
<P><NOBR>





</NOBR><BR>

<P>
<P>



  






<BR> 
 
<BR></BODY>
</HTML>
