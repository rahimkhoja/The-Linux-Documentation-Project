
<HTML>
<HEAD>
<TITLE>sti() called too late.</TITLE>
<LINK rel="owner" href="mailto:">
<SCRIPT LANGUAGE="JavaScript">
<!-- hide this

function help(message) {
  self.status = message;
  return true;
}
// stop hiding -->
</SCRIPT>

</HEAD>
<BODY>
<strong>The
HyperNews <a href="../khg.html">Linux KHG</a>
Discussion Pages</strong>
<hr>
<NOBR>





</NOBR><BR>
<H2><IMG src="../../../Icons/sad.gif" ALT="Sad:"
  WIDTH=15 HEIGHT=15
  ALIGN="bottom">
sti() called too late.</H2>

<DL> <DD>
<NOBR>
<font size=+1><I>Forum:</I> <A HREF="../khg.html" >
 The Linux Kernel Hackers' Guide</A> </font><BR>
<I>Keywords:</I> cli() IRQ rtc realtime timer lost <BR>
<I>Date:</I> Sat, 18 Jan 1997 11:00:12 GMT <BR>
<I>From:</I> <A HREF="http://escape.unterland.de/~erik/" >Erik Thiele</A> &lt;<A HREF="mailto:erik@unterland.de" >erik@unterland.de</A>&gt; <BR>

</NOBR>
</DD> </DL>

<P>
<table border cellpadding=5 cellspacing=0 
 width="100%" BGCOLOR="#FFFFFF">
 <tr><td>

<P>Hello
</P>

<P>i read the /dev/rtc (Realtime clock) driver, mutated it
and wrote my own little module, that get's called 8192 times
per second via SA_INTERRUPT (highest possible priority)
IRQ 8.  ok. if harddisk interrupts occur, some timer
interrupts get lost. this is also mentioned in the original
rtc driver. this happens, because cli is "active" too long.
WHY doesn't the harddisk driver do a sti() as early as
possible ???
</P>

<P>i don't think this is good code.
</P>

<P>
<PRE>:)</PRE>

</P>

<P>byebye
Erik
</P>

</td></tr>
</table>
<P><NOBR>





</NOBR><BR>
<P><B><A NAME="Messages">Messages</A></B>
<NOBR>
<font size=-1>







</font>
</NOBR>
 <P>
<NOBR>
<DL COMPACT>
<DT> 1. <IMG src="../../../Icons/note.gif" ALT="None:" WIDTH=15 HEIGHT=15 ALIGN="absmiddle">
<A HREF="47/1.html">
sti() called too late.</A> <i> by Gadi Oxman</i> </DT>
</DL>
</NOBR>

<P>
<P>



  






<BR> 
 
<BR></BODY>
</HTML>
