
<HTML>
<HEAD>
<TITLE>DMA to user allocated buffer ?</TITLE>
<LINK rel="owner" href="mailto:">
<SCRIPT LANGUAGE="JavaScript">
<!-- hide this

function help(message) {
  self.status = message;
  return true;
}
// stop hiding -->
</SCRIPT>

</HEAD>
<BODY>
<strong>The
<a href="http://www.hypernews.org/HyperNews/get/hypernews.html">
HyperNews <a href="../khg.html">Linux KHG</a>
Discussion Pages</strong>
<hr>
<NOBR>





</NOBR><BR>
<H2><IMG src="../../../Icons/question.gif" ALT="Question:"
  WIDTH=15 HEIGHT=15
  ALIGN="bottom">
DMA to user allocated buffer ?</H2>

<DL> <DD>
<NOBR>
<font size=+1><I>Forum:</I> <A HREF="../khg.html" >
 The Linux Kernel Hackers' Guide</A> </font><BR>
<I>Keywords:</I> DMA user buffer physio <BR>
<I>Date:</I> Mon, 22 Jun 1998 17:07:54 GMT <BR>
<I>From:</I> <A HREF="www.active-silicon.com" >Chris Read</A> &lt;<A HREF="mailto:support@active-silicon.com" >support@active-silicon.com</A>&gt; <BR>

</NOBR>
</DD> </DL>

<P>
<table border cellpadding=5 cellspacing=0 
 width="100%" BGCOLOR="#FFFFFF">
 <tr><td>
<PRE>I am porting an application from Solaris and NT to Linux

I need to DMA fairly large ( &gt;1 MByte ) data areas to a user 
assigned buffer (assigned using malloc). I thus need to either

1) Lock down the pages manually in the driver and generate
a physical scatter/gather table for the DMA (I assume that
the malloc'ed pages will not be contiguous in physical memory)

2) Remap the user buffer into physically contiguous memory, 
without changing the user virtual mapping (i.e. same user
virtual address)

3) Implement a Unix (Solaris) like physio routine to perform
the DMA in chunks, akin to the read entry point uoi-&gt;buf
mappings.

Any pointers or ideas ?
</PRE>
</td></tr>
</table>
<P><NOBR>





</NOBR><BR>

<P>
<P>



  






<BR> 
 
<BR></BODY>
</HTML>
