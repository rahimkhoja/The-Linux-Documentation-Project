
<HTML>
<HEAD>
<TITLE>Device Driver notification of "Linux going down"</TITLE>
<LINK rel="owner" href="mailto:">
<SCRIPT LANGUAGE="JavaScript">
<!-- hide this

function help(message) {
  self.status = message;
  return true;
}
// stop hiding -->
</SCRIPT>

</HEAD>
<BODY>
<strong>The
HyperNews <a href="../../khg.html">Linux KHG</a>
Discussion Pages</strong>
<hr>
<NOBR>





</NOBR><BR>
<H2><IMG src="../../../../Icons/question.gif" ALT="Question:"
  WIDTH=15 HEIGHT=15
  ALIGN="bottom">
Device Driver notification of "Linux going down"</H2>

<DL> <DD>
<NOBR>
<font size=+1><I>Forum:</I> <A HREF="../devices.html" >
 Device Drivers</A> </font><BR>
<I>Keywords:</I> device drivers shutdown modules init watchdog <BR>
<I>Date:</I> Tue, 06 Aug 1996 20:21:06 GMT <BR>
<I>From:</I> Stan Troeh &lt;<A HREF="mailto:stan@forthrt.com" >stan@forthrt.com</A>&gt; <BR>

</NOBR>
</DD> </DL>

<P>
<table border cellpadding=5 cellspacing=0 
 width="100%" BGCOLOR="#FFFFFF">
 <tr><td>

<P>We have written a character device driver for FORTHRIGHT's 
PC WATCHDOG SYSTEM.  We find, however, in developing a
generic "watch" application (tells the hardware that Linux
is still healthy) that we can't detect when Linux is 
intentionally shutting down.  If Linux succeeds in going
down and back up within the default 2 minute window,
everything is transparent and no problem occurs.  However
we find that at times when the tolerance is set tighter or
the user delays making a LILO selection, etc., that the
hardware performs a physical PC Reset while Linux is doing
coming up (after a shutdown -r).
</P>

<P>Is there a "shutting down" call made to the drivers?  We have
not found one, but have found a place where it could be added
in ReadItab() or InitMain() of init.c.  But that doesn't seem
closely related to device driver module management.
</P>

<P>Suggestions for better ways to package the driver are
welcome.  We would also be willing to work on a "generic"
solution (such as a device driver __halt() routine) if there
is interest in this approach.
</P>

</td></tr>
</table>
<P><NOBR>





</NOBR><BR>
<P><B><A NAME="Messages">Messages</A></B>
<NOBR>
<font size=-1>







</font>
</NOBR>
 <P>
<NOBR>
<DL COMPACT>
<DT> 1. <IMG src="../../../../Icons/note.gif" ALT="Note:" WIDTH=15 HEIGHT=15 ALIGN="absmiddle">
<A HREF="4/1.html">
Through application which has opened the device</A> <i> by <A HREF="../../../../~johnsonm">Michael K. Johnson</A></i> </DT>
<DT> 2. <IMG src="../../../../Icons/news.gif" ALT="News:" WIDTH=15 HEIGHT=15 ALIGN="absmiddle">
<A HREF="4/2.html">
Device Driver notification of "Linux going down"</A> <i> by <A HREF="http://www.hut.fi/~mkohtala/">Marko Kohtala</A></i> </DT>
</DL>
</NOBR>

<P>
<P>



  






<BR> 
 
<BR></BODY>
</HTML>
