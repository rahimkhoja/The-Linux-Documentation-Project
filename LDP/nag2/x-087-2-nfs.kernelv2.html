<HTML
><HEAD
><TITLE
>Kernel-Based NFSv2 Server Support</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.57"><LINK
REL="HOME"
TITLE="Linux Network Administrators Guide"
HREF="index.html"><LINK
REL="UP"
TITLE="The NetworkFile System"
HREF="x-087-2-nfs.html"><LINK
REL="PREVIOUS"
TITLE="The exports File"
HREF="x-087-2-nfs.exports.html"><LINK
REL="NEXT"
TITLE="Kernel-Based NFSv3 Server Support"
HREF="x-087-2-nfs.kernelv3.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Linux Network Administrators Guide</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x-087-2-nfs.exports.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 14. The NetworkFile System</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x-087-2-nfs.kernelv3.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="X-087-2-NFS.KERNELV2"
>14.5. Kernel-Based NFSv2 Server Support</A
></H1
><P
>&#13;


The user-space NFS server traditionally used in Linux works reliably but
suffers performance problems when overworked. This is primarily because
of the overhead the system call interface adds to its operation, and because
it must compete for time with other, potentially less important, user-space
processes.</P
><P
>&#13;



The 2.2.0 kernel supports an experimental kernel-based NFS server developed
by Olaf Kirch and further developed by H.J. Lu, G. Allan Morris, and Trond
Myklebust. The kernel-based NFS support provides a significant boost in server
performance.</P
><P
>In current release distributions, you may find the server tools
available in prepackaged form. If not, you can locate them at
<SPAN
CLASS="SYSTEMITEM"
>http://csua.berkeley.edu/~gam3/knfsd/</SPAN
>.  You need to 
build a 2.2.0 kernel with the kernel-based NFS daemon
included in order to make use of the tools. You can check if your
kernel has the NFS daemon included by looking to see if the
<TT
CLASS="FILENAME"
>/proc/sys/sunrpc/nfsd_debug</TT
> file exists. If it's
not there, you may have to load the <B
CLASS="COMMAND"
>rpc.nfsd</B
> module
using the <B
CLASS="COMMAND"
>modprobe</B
> utility.</P
><P
>The kernel-based NFS daemon uses a standard
<TT
CLASS="FILENAME"
>/etc/exports</TT
> configuration file. The package
supplies replacement versions of the <B
CLASS="COMMAND"
>rpc.mountd</B
> and
<B
CLASS="COMMAND"
>rpc.nfsd</B
> daemons that you start much the same way
as their userspace daemon counterparts.</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x-087-2-nfs.exports.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x-087-2-nfs.kernelv3.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>The exports File</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="x-087-2-nfs.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Kernel-Based NFSv3 Server Support</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>