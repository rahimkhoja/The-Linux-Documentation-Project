<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<!--Converted with LaTeX2HTML 96.1-c (Feb 29, 1996) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds -->
<HTML>
<HEAD>
<TITLE>Writing the Configuration Files</TITLE>
</HEAD>
<BODY LANG="EN">
 <A HREF="node1.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="contents_motif.gif"></A>  <BR>
<B> Next:</B> <A HREF="node202.html">Running smail</A>
<B>Up:</B> <A HREF="node200.html">Setup for a LAN</A>
<B> Previous:</B> <A HREF="node200.html">Setup for a LAN</A>
<BR> <P>
<H2><A NAME="SECTION0016210000">Writing the Configuration Files</A></H2>
<A NAME="7790"></A>
The configuration for the Brewery works as follows: all hosts except the
mail server vstout itself route all outgoing mail to the server,
using smart host routing. vstout itself sends all outgoing mail
to the real smart host that routes all of the Brewery's mail; this host
is called moria.
<P>
The standard config file for all hosts other than vstout
looks like this:
<PRE>
           #
           # Our domain:
           visible domain=vbrew.com
           #
           # What we name ourselves
           visible name=vbrew.com
           #
           # Smart-host routing: via SMTP to vstout
           smart path=vstout
           smart transport=smtp
</PRE>
This is very similar to what we used for a UUCP-only site. The main
difference is that the transport used to send mail to the smart host
is, of course, SMTP. The visible_domain attribute makes
smail use the domain name instead of the local hostname on
all outgoing mail.
<P>
On the UUCP mail gateway vstout, the config file looks a
little different:
<PRE>
           # Our hostnames:
           hostnames=vbrew.com:vstout.vbrew.com:vstout
           #
           # What we name ourselves
           visible name=vbrew.com
           #
           # in the uucp world, we're known as vbrew.com
           uucp name=vbrew.com
           #
           # Smart transport: via uucp to moria
           smart path=moria
           smart transport=uux
           #
           # we're authoritative for our domain
           auth domains=vbrew.com
</PRE>
This config file uses a different scheme to tell smail
what the local host is called.  Instead of giving it a list of domains
and letting it find the hostname with a system call, it specifies a list
explicitly.  The above list contains both the fully qualified and the
unqualified hostname, and the domain name all by itself. This makes
smail recognize janet@vbrew.com as a local address, and
deliver the message to janet.
<P>
The auth_domains variable names the domains for which
vstout is considered to be authoritative. That is, if
smail receives any mail addressed to host.vbrew.com
where host does not name an existing local machine, it rejects the
message and returns it to the sender.  If this entry isn't present, any
such message will be sent to the smart-host, who will return it to
vstout, and so on until it is discarded for exceeding the maximum
hop count.
<P>
<BR> <HR>
<P><ADDRESS>
<I>Andrew Anderson <BR>
Thu Mar  7 23:22:06 EST 1996</I>
</ADDRESS>
</BODY>
</HTML>
