<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML
><HEAD
><TITLE
>Design</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="Pocket Linux Guide"
HREF="index.html"><LINK
REL="UP"
TITLE="A Simple Prototype"
HREF="phase1.html"><LINK
REL="PREVIOUS"
TITLE="Analysis"
HREF="x140.html"><LINK
REL="NEXT"
TITLE="Construction"
HREF="x185.html"></HEAD
><BODY
CLASS="sect1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Pocket Linux Guide</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x140.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 2. A Simple Prototype</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x185.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="AEN150"
></A
>2.2. Design</H1
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="AEN152"
></A
>2.2.1. Simplification</H2
><P
>Take a moment to skim through the Bootdisk-HOWTO or the
      From-PowerUp-to-BASH-Prompt-HOWTO. These HOWTO documents can be found
      online at <A
HREF="http://www.tldp.org/docs.html#howto"
TARGET="_top"
>http://www.tldp.org/docs.html#howto</A
>.
      Both documents offer an excellent view of what it takes to get a
      GNU/Linux system up and running. There is also a lot of information to
      digest. Remember that one of our goals is, "keep it simple to avoid
      stressing out," so we want to ignore everything but the absolutely
      critical pieces of a boot / root diskset.</P
><P
>Basically it boils down to the following required items:</P
><P
></P
><UL
><LI
><P
>A boot loader</P
></LI
><LI
><P
>The Linux kernel</P
></LI
><LI
><P
>A shell</P
></LI
><LI
><P
>Some <TT
CLASS="filename"
>/dev</TT
> files</P
></LI
></UL
><P
>We don't even need an init daemon. The kernel can be told to run
      the shell directly by passing it an option through the boot
      loader.</P
><P
>For easy construction we will build a two-disk boot / root set
      rather than trying to get everything onto a single diskette. The boot
      loader and kernel will go on the boot disk and the shell will reside on
      the root disk.</P
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="AEN169"
></A
>2.2.2. Boot Disk</H2
><P
>For the boot disk we simply need to install the GRUB bootloader
      and a Linux kernel. We will need to use a kernel that does not require
      modules for the hardware we need to access. Mainly, it should have
      compiled-in support for the floppy drive, ram disk, second extended
      filesystem, proc filesystem, ELF binaries, and a text-based console. If
      such a kernel is not available, it will need to be built from source
      code. Kwan Lowe's <A
HREF="http://www.digitalhermit.com/linux/Kernel-Build-HOWTO.html"
TARGET="_top"
>Kernel
      Rebuild Guide</A
> is a good reference for this task, however we can
      ignore the sections that deal with modules and the initial
      ramdisk.</P
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="AEN173"
></A
>2.2.3. Root Disk</H2
><P
>For the root disk we will need a floppy that has been prepared
      with a filesystem. We will also need a BASH shell that is
      statically-linked so we can avoid the additional complexities of shared
      libraries. The <B
CLASS="command"
>configure</B
> program in the BASH source
      code recognizes the <TT
CLASS="option"
>--enable-static-link</TT
> option for
      this feature. We will also be using the
      <TT
CLASS="option"
>--enable-minimal-config</TT
> option to keep the BASH binary
      down to a manageable size. Additional requirements for the root disk are
      a <TT
CLASS="filename"
>/dev</TT
> directory and a device file for the console.
      The <TT
CLASS="filename"
>console</TT
> device is required for BASH to be able
      to communicate with the keyboard and video display.</P
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="AEN181"
></A
>2.2.4. CPU Compatibility</H2
><P
>There is one other, less obvious requirement to keep in mind and
      that is CPU compatibility. Each generation of CPU features a more
      complex architecture than its predecessor. Late generation chips have
      additional registers and instructions when compared to an older 486 or
      386. So a kernel optimized for a new, fast 6x86 machine will not run on
      an older box. (See the <TT
CLASS="filename"
>README</TT
> file in the Linux
      kernel source code for details.) A BASH shell built for a 6x86 will
      probably not run on an older processor either. To avoid this problem, we
      can choose the 386 as a lowest common denominator CPU and build all the
      code for that architecture.</P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x140.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x185.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Analysis</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="phase1.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Construction</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>