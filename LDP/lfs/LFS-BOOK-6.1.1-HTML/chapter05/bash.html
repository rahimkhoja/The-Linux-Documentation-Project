<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "application/xhtml+xml; charset=iso-8859-1" />
    <title>
      5.27.&nbsp;Bash-3.0
    </title>
    <link rel="stylesheet" href="../stylesheets/lfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.69.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body id="lfs" class="6.1.1">
    <div class="navheader">
      <div class="headertitles">
        <h4>
          Linux From Scratch - Version 6.1.1
        </h4>
        <h3>
          Chapter&nbsp;5.&nbsp;Constructing a Temporary System
        </h3>
      </div>
      <ul class="headerlinks">
        <li class="prev">
          <a accesskey="p" href="texinfo.html" title="Texinfo-4.8">Prev</a>
          <p>
            Texinfo-4.8
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="m4.html" title="M4-1.4.3">Next</a>
          <p>
            M4-1.4.3
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter05.html" title=
          "Chapter&nbsp;5.&nbsp;Constructing a Temporary System">Up</a>.
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - Version 6.1.1">Home</a>
        </li>
      </ul>
    </div>
    <div class="wrap" lang="en" xml:lang="en">
      <div class="titlepage">
        <h1 class="sect1">
          5.27. Bash-3.0
        </h1>
      </div>
      <div class="package" lang="en" xml:lang="en">
        <p>
          The Bash package contains the Bourne-Again SHell.
        </p>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong><span class="segtitle">Approximate build
              time:</span></strong> <span class="seg">1.2 SBU</span>
            </div>
            <div class="seg">
              <strong><span class="segtitle">Required disk
              space:</span></strong> <span class="seg">20.7 MB</span>
            </div>
          </div>
        </div>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong><span class="segtitle">Installation depends
              on:</span></strong> <span class="seg">Binutils, Coreutils,
              Diffutils, Gawk, GCC, Glibc, Grep, Make, Ncurses, and
              Sed.</span>
            </div>
          </div>
        </div>
      </div>
      <div class="installation" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            5.27.1. Installation of Bash
          </h2>
        </div>
        <p>
          Bash has a problem when compiled against newer versions of Glibc,
          causing it to hang inappropriately. This patch fixes the problem:
        </p>
        <pre class="userinput"><kbd class=
        "command">patch -Np1 -i ../bash-3.0-avoid_WCONTINUED-1.patch</kbd></pre>
        <p>
          Prepare Bash for compilation:
        </p>
        <pre class="userinput"><kbd class=
        "command">./configure --prefix=/tools --without-bash-malloc</kbd></pre>
        <p>
          The meaning of the configure options:
        </p>
        <div class="variablelist">
          <dl>
            <dt>
              <span class="term"><em class=
              "parameter"><tt>--without-bash-malloc</tt></em></span>
            </dt>
            <dd>
              <p>
                This options turns off the use of Bash's memory allocation
                (malloc) function which is known to cause segmentation
                faults. By turning this option off, Bash will use the malloc
                functions from Glibc which are more stable.
              </p>
            </dd>
          </dl>
        </div>
        <p>
          Compile the package:
        </p>
        <pre class="userinput"><kbd class="command">make</kbd></pre>
        <p>
          To test the results, issue: <strong class="userinput"><tt>make
          tests</tt></strong>.
        </p>
        <p>
          Install the package:
        </p>
        <pre class="userinput"><kbd class="command">make install</kbd></pre>
        <p>
          Make a link for the programs that use <span><strong class=
          "command">sh</strong></span> for a shell:
        </p>
        <pre class="userinput"><kbd class=
        "command">ln -vs bash /tools/bin/sh</kbd></pre>
      </div>
      <div class="content" lang="en" xml:lang="en">
        <p>
          Details on this package are located in <a href=
          "../chapter06/bash.html#contents-bash" title=
          "6.37.2.&nbsp;Contents of Bash">Section&nbsp;6.37.2,
          &ldquo;Contents of Bash.&rdquo;</a>
        </p>
      </div>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="texinfo.html" title="Texinfo-4.8">Prev</a>
          <p>
            Texinfo-4.8
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="m4.html" title="M4-1.4.3">Next</a>
          <p>
            M4-1.4.3
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter05.html" title=
          "Chapter&nbsp;5.&nbsp;Constructing a Temporary System">Up</a>.
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - Version 6.1.1">Home</a>.
        </li>
      </ul>
    </div>
  </body>
</html>
